//
// Copyright 2020 FoxyUtils ehf. All rights reserved.
//
// This is a commercial product and requires a license to operate.
// A trial license can be obtained at https://unidoc.io
//
// DO NOT EDIT: generated by unitwist Go source code obfuscator.
//
// Use of this source code is governed by the UniDoc End User License Agreement
// terms that can be accessed at https://unidoc.io/eula/

// Package fdf provides support for loading form field data from Form Field Data (FDF) files.
package fdf ;import (_af "bufio";_ef "bytes";_gd "encoding/hex";_a "errors";_e "fmt";_ac "github.com/unidoc/unipdf/v3/common";_c "github.com/unidoc/unipdf/v3/core";_d "io";_ec "os";_g "regexp";_bc "sort";_ag "strconv";_f "strings";);

// Data represents forms data format (FDF) file data.
type Data struct{_db *_c .PdfObjectDictionary ;_cb *_c .PdfObjectArray ;};var _cbe =_g .MustCompile ("\u0025\u0025\u0045O\u0046");func (_aacc *fdfParser )parseIndirectObject ()(_c .PdfObject ,error ){_cdd :=_c .PdfIndirectObject {};_ac .Log .Trace ("\u002dR\u0065a\u0064\u0020\u0069\u006e\u0064i\u0072\u0065c\u0074\u0020\u006f\u0062\u006a");
_degb ,_aceg :=_aacc ._ffd .Peek (20);if _aceg !=nil {_ac .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0046\u0061\u0069\u006c\u0020\u0074\u006f\u0020r\u0065a\u0064\u0020\u0069\u006e\u0064\u0069\u0072\u0065\u0063\u0074\u0020\u006f\u0062\u006a");
return &_cdd ,_aceg ;};_ac .Log .Trace ("\u0028\u0069\u006edi\u0072\u0065\u0063\u0074\u0020\u006f\u0062\u006a\u0020\u0070\u0065\u0065\u006b\u0020\u0022\u0025\u0073\u0022",string (_degb ));_abc :=_eb .FindStringSubmatchIndex (string (_degb ));if len (_abc )< 6{_ac .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020U\u006e\u0061\u0062l\u0065\u0020\u0074\u006f \u0066\u0069\u006e\u0064\u0020\u006f\u0062\u006a\u0065\u0063\u0074\u0020\u0073\u0069\u0067\u006e\u0061\u0074\u0075\u0072\u0065\u0020\u0028\u0025\u0073\u0029",string (_degb ));
return &_cdd ,_a .New ("\u0075\u006e\u0061b\u006c\u0065\u0020\u0074\u006f\u0020\u0064\u0065\u0074\u0065\u0063\u0074\u0020\u0069\u006e\u0064\u0069\u0072\u0065\u0063\u0074\u0020\u006f\u0062\u006a\u0065\u0063\u0074\u0020s\u0069\u0067\u006e\u0061\u0074\u0075\u0072\u0065");
};_aacc ._ffd .Discard (_abc [0]);_ac .Log .Trace ("O\u0066\u0066\u0073\u0065\u0074\u0073\u0020\u0025\u0020\u0064",_abc );_eef :=_abc [1]-_abc [0];_gg :=make ([]byte ,_eef );_ ,_aceg =_aacc .readAtLeast (_gg ,_eef );if _aceg !=nil {_ac .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0075\u006e\u0061\u0062l\u0065\u0020\u0074\u006f\u0020\u0072\u0065\u0061\u0064\u0020-\u0020\u0025\u0073",_aceg );
return nil ,_aceg ;};_ac .Log .Trace ("\u0074\u0065\u0078t\u006c\u0069\u006e\u0065\u003a\u0020\u0025\u0073",_gg );_gee :=_eb .FindStringSubmatch (string (_gg ));if len (_gee )< 3{_ac .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020U\u006e\u0061\u0062l\u0065\u0020\u0074\u006f \u0066\u0069\u006e\u0064\u0020\u006f\u0062\u006a\u0065\u0063\u0074\u0020\u0073\u0069\u0067\u006e\u0061\u0074\u0075\u0072\u0065\u0020\u0028\u0025\u0073\u0029",string (_gg ));
return &_cdd ,_a .New ("\u0075\u006e\u0061b\u006c\u0065\u0020\u0074\u006f\u0020\u0064\u0065\u0074\u0065\u0063\u0074\u0020\u0069\u006e\u0064\u0069\u0072\u0065\u0063\u0074\u0020\u006f\u0062\u006a\u0065\u0063\u0074\u0020s\u0069\u0067\u006e\u0061\u0074\u0075\u0072\u0065");
};_efd ,_ :=_ag .Atoi (_gee [1]);_adga ,_ :=_ag .Atoi (_gee [2]);_cdd .ObjectNumber =int64 (_efd );_cdd .GenerationNumber =int64 (_adga );for {_dcc ,_aeb :=_aacc ._ffd .Peek (2);if _aeb !=nil {return &_cdd ,_aeb ;};_ac .Log .Trace ("I\u006ed\u002e\u0020\u0070\u0065\u0065\u006b\u003a\u0020%\u0073\u0020\u0028\u0025 x\u0029\u0021",string (_dcc ),string (_dcc ));
if _c .IsWhiteSpace (_dcc [0]){_aacc .skipSpaces ();}else if _dcc [0]=='%'{_aacc .skipComments ();}else if (_dcc [0]=='<')&&(_dcc [1]=='<'){_ac .Log .Trace ("\u0043\u0061\u006c\u006c\u0020\u0050\u0061\u0072\u0073e\u0044\u0069\u0063\u0074");_cdd .PdfObject ,_aeb =_aacc .parseDict ();
_ac .Log .Trace ("\u0045\u004f\u0046\u0020Ca\u006c\u006c\u0020\u0050\u0061\u0072\u0073\u0065\u0044\u0069\u0063\u0074\u003a\u0020%\u0076",_aeb );if _aeb !=nil {return &_cdd ,_aeb ;};_ac .Log .Trace ("\u0050\u0061\u0072\u0073\u0065\u0064\u0020\u0064\u0069\u0063t\u0069\u006f\u006e\u0061\u0072\u0079\u002e.\u002e\u0020\u0066\u0069\u006e\u0069\u0073\u0068\u0065\u0064\u002e");
}else if (_dcc [0]=='/')||(_dcc [0]=='(')||(_dcc [0]=='[')||(_dcc [0]=='<'){_cdd .PdfObject ,_aeb =_aacc .parseObject ();if _aeb !=nil {return &_cdd ,_aeb ;};_ac .Log .Trace ("P\u0061\u0072\u0073\u0065\u0064\u0020o\u0062\u006a\u0065\u0063\u0074\u0020\u002e\u002e\u002e \u0066\u0069\u006ei\u0073h\u0065\u0064\u002e");
}else {if _dcc [0]=='e'{_bfddg ,_ddga :=_aacc .readTextLine ();if _ddga !=nil {return nil ,_ddga ;};if len (_bfddg )>=6&&_bfddg [0:6]=="\u0065\u006e\u0064\u006f\u0062\u006a"{break ;};}else if _dcc [0]=='s'{_dcc ,_ =_aacc ._ffd .Peek (10);if string (_dcc [:6])=="\u0073\u0074\u0072\u0065\u0061\u006d"{_fgf :=6;
if len (_dcc )> 6{if _c .IsWhiteSpace (_dcc [_fgf ])&&_dcc [_fgf ]!='\r'&&_dcc [_fgf ]!='\n'{_ac .Log .Debug ("\u004e\u006fn\u002d\u0063\u006f\u006e\u0066\u006f\u0072\u006d\u0061\u006e\u0074\u0020\u0046\u0044\u0046\u0020\u006e\u006f\u0074 \u0065\u006e\u0064\u0069\u006e\u0067 \u0073\u0074\u0072\u0065\u0061\u006d\u0020\u006c\u0069\u006e\u0065\u0020\u0070\u0072o\u0070\u0065r\u006c\u0079\u0020\u0077i\u0074\u0068\u0020\u0045\u004fL\u0020\u006d\u0061\u0072\u006b\u0065\u0072");
_fgf ++;};if _dcc [_fgf ]=='\r'{_fgf ++;if _dcc [_fgf ]=='\n'{_fgf ++;};}else if _dcc [_fgf ]=='\n'{_fgf ++;};};_aacc ._ffd .Discard (_fgf );_cfe ,_bbd :=_cdd .PdfObject .(*_c .PdfObjectDictionary );if !_bbd {return nil ,_a .New ("\u0073\u0074\u0072\u0065\u0061\u006d\u0020\u006f\u0062\u006a\u0065\u0063\u0074\u0020\u006di\u0073s\u0069\u006e\u0067\u0020\u0064\u0069\u0063\u0074\u0069\u006f\u006e\u0061\u0072\u0079");
};_ac .Log .Trace ("\u0053\u0074\u0072\u0065\u0061\u006d\u0020\u0064\u0069c\u0074\u0020\u0025\u0073",_cfe );_efcf ,_faec :=_cfe .Get ("\u004c\u0065\u006e\u0067\u0074\u0068").(*_c .PdfObjectInteger );if !_faec {return nil ,_a .New ("\u0073\u0074re\u0061\u006d\u0020l\u0065\u006e\u0067\u0074h n\u0065ed\u0073\u0020\u0074\u006f\u0020\u0062\u0065 a\u006e\u0020\u0069\u006e\u0074\u0065\u0067e\u0072");
};_gbb :=*_efcf ;if _gbb < 0{return nil ,_a .New ("\u0073\u0074\u0072\u0065\u0061\u006d\u0020\u006e\u0065\u0065\u0064\u0073\u0020\u0074\u006f \u0062e\u0020\u006c\u006f\u006e\u0067\u0065\u0072\u0020\u0074\u0068\u0061\u006e\u0020\u0030");};if int64 (_gbb )> _aacc ._cgg {_ac .Log .Debug ("\u0045\u0052R\u004f\u0052\u003a\u0020\u0053t\u0072\u0065\u0061\u006d\u0020l\u0065\u006e\u0067\u0074\u0068\u0020\u0063\u0061\u006e\u006e\u006f\u0074\u0020\u0062\u0065\u0020\u006c\u0061\u0072\u0067\u0065\u0072\u0020\u0074\u0068\u0061\u006e\u0020\u0066\u0069\u006c\u0065\u0020\u0073\u0069\u007a\u0065");
return nil ,_a .New ("\u0069n\u0076\u0061l\u0069\u0064\u0020\u0073t\u0072\u0065\u0061m\u0020\u006c\u0065\u006e\u0067\u0074\u0068\u002c\u0020la\u0072\u0067\u0065r\u0020\u0074h\u0061\u006e\u0020\u0066\u0069\u006ce\u0020\u0073i\u007a\u0065");};_eaf :=make ([]byte ,_gbb );
_ ,_aeb =_aacc .readAtLeast (_eaf ,int (_gbb ));if _aeb !=nil {_ac .Log .Debug ("E\u0052\u0052\u004f\u0052 s\u0074r\u0065\u0061\u006d\u0020\u0028%\u0064\u0029\u003a\u0020\u0025\u0058",len (_eaf ),_eaf );_ac .Log .Debug ("\u0045R\u0052\u004f\u0052\u003a\u0020\u0025v",_aeb );
return nil ,_aeb ;};_ccc :=_c .PdfObjectStream {};_ccc .Stream =_eaf ;_ccc .PdfObjectDictionary =_cdd .PdfObject .(*_c .PdfObjectDictionary );_ccc .ObjectNumber =_cdd .ObjectNumber ;_ccc .GenerationNumber =_cdd .GenerationNumber ;_aacc .skipSpaces ();_aacc ._ffd .Discard (9);
_aacc .skipSpaces ();return &_ccc ,nil ;};};_cdd .PdfObject ,_aeb =_aacc .parseObject ();return &_cdd ,_aeb ;};};_ac .Log .Trace ("\u0052\u0065\u0074\u0075rn\u0069\u006e\u0067\u0020\u0069\u006e\u0064\u0069\u0072\u0065\u0063\u0074\u0021");return &_cdd ,nil ;
};var _eaa =_g .MustCompile ("^\u005c\u0073\u002a\u0028\\d\u002b)\u005c\u0073\u002b\u0028\u005cd\u002b\u0029\u005c\u0073\u002b\u0052");func (_fb *fdfParser )readTextLine ()(string ,error ){var _abe _ef .Buffer ;for {_ded ,_gb :=_fb ._ffd .Peek (1);if _gb !=nil {_ac .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0025\u0073",_gb .Error ());
return _abe .String (),_gb ;};if (_ded [0]!='\r')&&(_ded [0]!='\n'){_cde ,_ :=_fb ._ffd .ReadByte ();_abe .WriteByte (_cde );}else {break ;};};return _abe .String (),nil ;};func (_ccg *fdfParser )getFileOffset ()int64 {_abg ,_ :=_ccg ._gc .Seek (0,_d .SeekCurrent );
_abg -=int64 (_ccg ._ffd .Buffered ());return _abg ;};func (_bga *fdfParser )parseFdfVersion ()(int ,int ,error ){_bga ._gc .Seek (0,_d .SeekStart );_da :=20;_faea :=make ([]byte ,_da );_bga ._gc .Read (_faea );_bcb :=_bbc .FindStringSubmatch (string (_faea ));
if len (_bcb )< 3{_dbe ,_gec ,_ccd :=_bga .seekFdfVersionTopDown ();if _ccd !=nil {_ac .Log .Debug ("F\u0061\u0069\u006c\u0065\u0064\u0020\u0072\u0065\u0063\u006f\u0076\u0065\u0072\u0079\u0020\u002d\u0020\u0075n\u0061\u0062\u006c\u0065\u0020\u0074\u006f\u0020\u0066\u0069nd\u0020\u0076\u0065r\u0073i\u006f\u006e");
return 0,0,_ccd ;};return _dbe ,_gec ,nil ;};_afeg ,_cgc :=_ag .Atoi (_bcb [1]);if _cgc !=nil {return 0,0,_cgc ;};_fed ,_cgc :=_ag .Atoi (_bcb [2]);if _cgc !=nil {return 0,0,_cgc ;};_ac .Log .Debug ("\u0046\u0064\u0066\u0020\u0076\u0065\u0072\u0073\u0069\u006f\u006e\u0020%\u0064\u002e\u0025\u0064",_afeg ,_fed );
return _afeg ,_fed ,nil ;};func (_deg *fdfParser )readAtLeast (_cc []byte ,_ge int )(int ,error ){_dg :=_ge ;_bg :=0;_cd :=0;for _dg > 0{_be ,_geg :=_deg ._ffd .Read (_cc [_bg :]);if _geg !=nil {_ac .Log .Debug ("\u0045\u0052\u0052O\u0052\u0020\u0046\u0061i\u006c\u0065\u0064\u0020\u0072\u0065\u0061d\u0069\u006e\u0067\u0020\u0028\u0025\u0064\u003b\u0025\u0064\u0029\u0020\u0025\u0073",_be ,_cd ,_geg .Error ());
return _bg ,_a .New ("\u0066\u0061\u0069\u006c\u0065\u0064\u0020\u0072\u0065a\u0064\u0069\u006e\u0067");};_cd ++;_bg +=_be ;_dg -=_be ;};return _bg ,nil ;};

// Root returns the Root of the FDF document.
func (_fff *fdfParser )Root ()(*_c .PdfObjectDictionary ,error ){if _fff ._fg !=nil {if _gad ,_ddf :=_fff .trace (_fff ._fg .Get ("\u0052\u006f\u006f\u0074")).(*_c .PdfObjectDictionary );_ddf {if _ccdc ,_aadg :=_fff .trace (_gad .Get ("\u0046\u0044\u0046")).(*_c .PdfObjectDictionary );
_aadg {return _ccdc ,nil ;};};};var _fgc []int64 ;for _bfe :=range _fff ._fe {_fgc =append (_fgc ,_bfe );};_bc .Slice (_fgc ,func (_dga ,_dgc int )bool {return _fgc [_dga ]< _fgc [_dgc ]});for _ ,_cfgd :=range _fgc {_ade :=_fff ._fe [_cfgd ];if _efea ,_cgge :=_fff .trace (_ade ).(*_c .PdfObjectDictionary );
_cgge {if _aecb ,_fbb :=_fff .trace (_efea .Get ("\u0046\u0044\u0046")).(*_c .PdfObjectDictionary );_fbb {return _aecb ,nil ;};};};return nil ,_a .New ("\u0046\u0044\u0046\u0020\u006e\u006f\u0074\u0020\u0066\u006f\u0075\u006e\u0064");};var _agc =_g .MustCompile ("\u005e\u005b\u005c+-\u002e\u005d\u002a\u0028\u005b\u0030\u002d\u0039\u002e]\u002b)\u0065[\u005c+\u002d\u002e\u005d\u002a\u0028\u005b\u0030\u002d\u0039\u002e\u005d\u002b\u0029");


// FieldDictionaries returns a map of field names to field dictionaries.
func (fdf *Data )FieldDictionaries ()(map[string ]*_c .PdfObjectDictionary ,error ){_dc :=map[string ]*_c .PdfObjectDictionary {};for _bd :=0;_bd < fdf ._cb .Len ();_bd ++{_dbd ,_cf :=_c .GetDict (fdf ._cb .Get (_bd ));if _cf {_afg ,_ :=_c .GetString (_dbd .Get ("\u0054"));
if _afg !=nil {_dc [_afg .Str ()]=_dbd ;};};};return _dc ,nil ;};func (_gce *fdfParser )parseObject ()(_c .PdfObject ,error ){_ac .Log .Trace ("\u0052e\u0061d\u0020\u0064\u0069\u0072\u0065c\u0074\u0020o\u0062\u006a\u0065\u0063\u0074");_gce .skipSpaces ();
for {_aga ,_adc :=_gce ._ffd .Peek (2);if _adc !=nil {return nil ,_adc ;};_ac .Log .Trace ("\u0050e\u0065k\u0020\u0073\u0074\u0072\u0069\u006e\u0067\u003a\u0020\u0025\u0073",string (_aga ));if _aga [0]=='/'{_afe ,_cfd :=_gce .parseName ();_ac .Log .Trace ("\u002d\u003e\u004ea\u006d\u0065\u003a\u0020\u0027\u0025\u0073\u0027",_afe );
return &_afe ,_cfd ;}else if _aga [0]=='('{_ac .Log .Trace ("\u002d>\u0053\u0074\u0072\u0069\u006e\u0067!");return _gce .parseString ();}else if _aga [0]=='['{_ac .Log .Trace ("\u002d\u003e\u0041\u0072\u0072\u0061\u0079\u0021");return _gce .parseArray ();
}else if (_aga [0]=='<')&&(_aga [1]=='<'){_ac .Log .Trace ("\u002d>\u0044\u0069\u0063\u0074\u0021");return _gce .parseDict ();}else if _aga [0]=='<'{_ac .Log .Trace ("\u002d\u003e\u0048\u0065\u0078\u0020\u0073\u0074\u0072\u0069\u006e\u0067\u0021");return _gce .parseHexString ();
}else if _aga [0]=='%'{_gce .readComment ();_gce .skipSpaces ();}else {_ac .Log .Trace ("\u002d\u003eN\u0075\u006d\u0062e\u0072\u0020\u006f\u0072\u0020\u0072\u0065\u0066\u003f");_aga ,_ =_gce ._ffd .Peek (15);_bbcd :=string (_aga );_ac .Log .Trace ("\u0050\u0065\u0065k\u0020\u0073\u0074\u0072\u003a\u0020\u0025\u0073",_bbcd );
if (len (_bbcd )> 3)&&(_bbcd [:4]=="\u006e\u0075\u006c\u006c"){_efe ,_cada :=_gce .parseNull ();return &_efe ,_cada ;}else if (len (_bbcd )> 4)&&(_bbcd [:5]=="\u0066\u0061\u006cs\u0065"){_gdb ,_dee :=_gce .parseBool ();return &_gdb ,_dee ;}else if (len (_bbcd )> 3)&&(_bbcd [:4]=="\u0074\u0072\u0075\u0065"){_bgd ,_eag :=_gce .parseBool ();
return &_bgd ,_eag ;};_ffg :=_eaa .FindStringSubmatch (_bbcd );if len (_ffg )> 1{_aga ,_ =_gce ._ffd .ReadBytes ('R');_ac .Log .Trace ("\u002d\u003e\u0020\u0021\u0052\u0065\u0066\u003a\u0020\u0027\u0025\u0073\u0027",string (_aga [:]));_aac ,_aec :=_eeg (string (_aga ));
return &_aac ,_aec ;};_ddg :=_ba .FindStringSubmatch (_bbcd );if len (_ddg )> 1{_ac .Log .Trace ("\u002d\u003e\u0020\u004e\u0075\u006d\u0062\u0065\u0072\u0021");return _gce .parseNumber ();};_ddg =_agc .FindStringSubmatch (_bbcd );if len (_ddg )> 1{_ac .Log .Trace ("\u002d\u003e\u0020\u0045xp\u006f\u006e\u0065\u006e\u0074\u0069\u0061\u006c\u0020\u004e\u0075\u006d\u0062\u0065r\u0021");
_ac .Log .Trace ("\u0025\u0020\u0073",_ddg );return _gce .parseNumber ();};_ac .Log .Debug ("\u0045R\u0052\u004f\u0052\u0020U\u006e\u006b\u006e\u006f\u0077n\u0020(\u0070e\u0065\u006b\u0020\u0022\u0025\u0073\u0022)",_bbcd );return nil ,_a .New ("\u006f\u0062\u006a\u0065\u0063t\u0020\u0070\u0061\u0072\u0073\u0069\u006e\u0067\u0020\u0065\u0072\u0072\u006fr\u0020\u002d\u0020\u0075\u006e\u0065\u0078\u0070\u0065\u0063\u0074\u0065\u0064\u0020\u0070\u0061\u0074\u0074\u0065\u0072\u006e");
};};};func (_edb *fdfParser )parseHexString ()(*_c .PdfObjectString ,error ){_edb ._ffd .ReadByte ();var _fef _ef .Buffer ;for {_cac ,_gca :=_edb ._ffd .Peek (1);if _gca !=nil {return _c .MakeHexString (""),_gca ;};if _cac [0]=='>'{_edb ._ffd .ReadByte ();
break ;};_ae ,_ :=_edb ._ffd .ReadByte ();if !_c .IsWhiteSpace (_ae ){_fef .WriteByte (_ae );};};if _fef .Len ()%2==1{_fef .WriteRune ('0');};_faff ,_dd :=_gd .DecodeString (_fef .String ());if _dd !=nil {_ac .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u0020\u0050\u0061\u0072\u0073\u0069\u006e\u0067\u0020\u0068\u0065\u0078\u0020\u0073\u0074r\u0069\u006e\u0067\u003a\u0020\u0027\u0025\u0073\u0027 \u002d\u0020\u0072\u0065\u0074\u0075\u0072\u006e\u0069\u006e\u0067\u0020\u0061n\u0020\u0065\u006d\u0070\u0074\u0079 \u0073\u0074\u0072i\u006e\u0067",_fef .String ());
return _c .MakeHexString (""),nil ;};return _c .MakeHexString (string (_faff )),nil ;};var _ba =_g .MustCompile ("\u005e\u005b\u005c\u002b\u002d\u002e\u005d\u002a\u0028\u005b\u0030\u002d9\u002e\u005d\u002b\u0029");func (_degf *fdfParser )skipComments ()error {if _ ,_fc :=_degf .skipSpaces ();
_fc !=nil {return _fc ;};_ebc :=true ;for {_eee ,_fcc :=_degf ._ffd .Peek (1);if _fcc !=nil {_ac .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0025\u0073",_fcc .Error ());return _fcc ;};if _ebc &&_eee [0]!='%'{return nil ;};_ebc =false ;if (_eee [0]!='\r')&&(_eee [0]!='\n'){_degf ._ffd .ReadByte ();
}else {break ;};};return _degf .skipComments ();};

// LoadFromPath loads FDF form data from file path `fdfPath`.
func LoadFromPath (fdfPath string )(*Data ,error ){_def ,_ca :=_ec .Open (fdfPath );if _ca !=nil {return nil ,_ca ;};defer _def .Close ();return Load (_def );};func _ggb (_eabc string )(*fdfParser ,error ){_ddd :=fdfParser {};_bfg :=[]byte (_eabc );_gfgc :=_ef .NewReader (_bfg );
_ddd ._gc =_gfgc ;_ddd ._fe =map[int64 ]_c .PdfObject {};_bgad :=_af .NewReader (_gfgc );_ddd ._ffd =_bgad ;_ddd ._cgg =int64 (len (_eabc ));return &_ddd ,_ddd .parse ();};func (_bgfe *fdfParser )seekFdfVersionTopDown ()(int ,int ,error ){_bgfe ._gc .Seek (0,_d .SeekStart );
_bgfe ._ffd =_af .NewReader (_bgfe ._gc );_aege :=20;_fggg :=make ([]byte ,_aege );for {_feb ,_geba :=_bgfe ._ffd .ReadByte ();if _geba !=nil {if _geba ==_d .EOF {break ;}else {return 0,0,_geba ;};};if _c .IsDecimalDigit (_feb )&&_fggg [_aege -1]=='.'&&_c .IsDecimalDigit (_fggg [_aege -2])&&_fggg [_aege -3]=='-'&&_fggg [_aege -4]=='F'&&_fggg [_aege -5]=='D'&&_fggg [_aege -6]=='P'{_dbbe :=int (_fggg [_aege -2]-'0');
_ffb :=int (_feb -'0');return _dbbe ,_ffb ,nil ;};_fggg =append (_fggg [1:_aege ],_feb );};return 0,0,_a .New ("\u0076\u0065\u0072\u0073\u0069\u006f\u006e\u0020\u006e\u006f\u0074\u0020f\u006f\u0075\u006e\u0064");};func (_acb *fdfParser )parseString ()(*_c .PdfObjectString ,error ){_acb ._ffd .ReadByte ();
var _cga _ef .Buffer ;_faf :=1;for {_acf ,_bbg :=_acb ._ffd .Peek (1);if _bbg !=nil {return _c .MakeString (_cga .String ()),_bbg ;};if _acf [0]=='\\'{_acb ._ffd .ReadByte ();_cdb ,_afgc :=_acb ._ffd .ReadByte ();if _afgc !=nil {return _c .MakeString (_cga .String ()),_afgc ;
};if _c .IsOctalDigit (_cdb ){_efa ,_cff :=_acb ._ffd .Peek (2);if _cff !=nil {return _c .MakeString (_cga .String ()),_cff ;};var _efb []byte ;_efb =append (_efb ,_cdb );for _ ,_bbf :=range _efa {if _c .IsOctalDigit (_bbf ){_efb =append (_efb ,_bbf );
}else {break ;};};_acb ._ffd .Discard (len (_efb )-1);_ac .Log .Trace ("\u004e\u0075\u006d\u0065ri\u0063\u0020\u0073\u0074\u0072\u0069\u006e\u0067\u0020\u0022\u0025\u0073\u0022",_efb );_eba ,_cff :=_ag .ParseUint (string (_efb ),8,32);if _cff !=nil {return _c .MakeString (_cga .String ()),_cff ;
};_cga .WriteByte (byte (_eba ));continue ;};switch _cdb {case 'n':_cga .WriteRune ('\n');case 'r':_cga .WriteRune ('\r');case 't':_cga .WriteRune ('\t');case 'b':_cga .WriteRune ('\b');case 'f':_cga .WriteRune ('\f');case '(':_cga .WriteRune ('(');case ')':_cga .WriteRune (')');
case '\\':_cga .WriteRune ('\\');};continue ;}else if _acf [0]=='('{_faf ++;}else if _acf [0]==')'{_faf --;if _faf ==0{_acb ._ffd .ReadByte ();break ;};};_ecee ,_ :=_acb ._ffd .ReadByte ();_cga .WriteByte (_ecee );};return _c .MakeString (_cga .String ()),nil ;
};func _eeg (_gdc string )(_c .PdfObjectReference ,error ){_dfed :=_c .PdfObjectReference {};_adb :=_eaa .FindStringSubmatch (_gdc );if len (_adb )< 3{_ac .Log .Debug ("\u0045\u0072\u0072or\u0020\u0070\u0061\u0072\u0073\u0069\u006e\u0067\u0020\u0072\u0065\u0066\u0065\u0072\u0065\u006e\u0063\u0065");
return _dfed ,_a .New ("\u0075n\u0061\u0062\u006c\u0065 \u0074\u006f\u0020\u0070\u0061r\u0073e\u0020r\u0065\u0066\u0065\u0072\u0065\u006e\u0063e");};_geb ,_egg :=_ag .Atoi (_adb [1]);if _egg !=nil {_ac .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0070a\u0072\u0073\u0069n\u0067\u0020\u006fb\u006a\u0065c\u0074\u0020\u006e\u0075\u006d\u0062e\u0072 '\u0025\u0073\u0027\u0020\u002d\u0020\u0055\u0073\u0069\u006e\u0067\u0020\u006f\u0062\u006a\u0065\u0063\u0074\u0020\u006e\u0075\u006d\u0020\u003d\u0020\u0030",_adb [1]);
return _dfed ,nil ;};_dfed .ObjectNumber =int64 (_geb );_fcg ,_egg :=_ag .Atoi (_adb [2]);if _egg !=nil {_ac .Log .Debug ("\u0045\u0072r\u006f\u0072\u0020\u0070\u0061r\u0073\u0069\u006e\u0067\u0020g\u0065\u006e\u0065\u0072\u0061\u0074\u0069\u006f\u006e\u0020\u006e\u0075\u006d\u0062\u0065\u0072\u0020\u0027\u0025\u0073\u0027\u0020\u002d\u0020\u0055\u0073\u0069\u006e\u0067\u0020\u0067\u0065\u006e\u0020\u003d\u0020\u0030",_adb [2]);
return _dfed ,nil ;};_dfed .GenerationNumber =int64 (_fcg );return _dfed ,nil ;};func _fdg (_dfg _d .ReadSeeker )(*fdfParser ,error ){_acbc :=&fdfParser {};_acbc ._gc =_dfg ;_acbc ._fe =map[int64 ]_c .PdfObject {};_ceg ,_egc ,_bgf :=_acbc .parseFdfVersion ();
if _bgf !=nil {_ac .Log .Error ("U\u006e\u0061\u0062\u006c\u0065\u0020t\u006f\u0020\u0070\u0061\u0072\u0073\u0065\u0020\u0076e\u0072\u0073\u0069o\u006e:\u0020\u0025\u0076",_bgf );return nil ,_bgf ;};_acbc ._fac =_ceg ;_acbc ._ad =_egc ;_bgf =_acbc .parse ();
return _acbc ,_bgf ;};func (_cca *fdfParser )parseArray ()(*_c .PdfObjectArray ,error ){_ffe :=_c .MakeArray ();_cca ._ffd .ReadByte ();for {_cca .skipSpaces ();_ede ,_fbd :=_cca ._ffd .Peek (1);if _fbd !=nil {return _ffe ,_fbd ;};if _ede [0]==']'{_cca ._ffd .ReadByte ();
break ;};_gbc ,_fbd :=_cca .parseObject ();if _fbd !=nil {return _ffe ,_fbd ;};_ffe .Append (_gbc );};return _ffe ,nil ;};func (_cgd *fdfParser )seekToEOFMarker (_acbd int64 )error {_acc :=int64 (0);_dce :=int64 (1000);for _acc < _acbd {if _acbd <=(_dce +_acc ){_dce =_acbd -_acc ;
};_ ,_ace :=_cgd ._gc .Seek (-_acc -_dce ,_d .SeekEnd );if _ace !=nil {return _ace ;};_cec :=make ([]byte ,_dce );_cgd ._gc .Read (_cec );_ac .Log .Trace ("\u004c\u006f\u006f\u006bi\u006e\u0067\u0020\u0066\u006f\u0072\u0020\u0045\u004f\u0046 \u006da\u0072\u006b\u0065\u0072\u003a\u0020\u0022%\u0073\u0022",string (_cec ));
_aeg :=_cbe .FindAllStringIndex (string (_cec ),-1);if _aeg !=nil {_dbb :=_aeg [len (_aeg )-1];_ac .Log .Trace ("\u0049\u006e\u0064\u003a\u0020\u0025\u0020\u0064",_aeg );_cgd ._gc .Seek (-_acc -_dce +int64 (_dbb [0]),_d .SeekEnd );return nil ;};_ac .Log .Debug ("\u0057\u0061\u0072\u006e\u0069\u006eg\u003a\u0020\u0045\u004f\u0046\u0020\u006d\u0061\u0072\u006b\u0065\u0072\u0020\u006e\u006f\u0074\u0020\u0066\u006f\u0075n\u0064\u0021\u0020\u002d\u0020\u0063\u006f\u006e\u0074\u0069\u006e\u0075\u0065\u0020s\u0065e\u006b\u0069\u006e\u0067");
_acc +=_dce ;};_ac .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u003a\u0020\u0045\u004f\u0046\u0020\u006d\u0061\u0072\u006be\u0072 \u0077\u0061\u0073\u0020\u006e\u006f\u0074\u0020\u0066\u006f\u0075\u006e\u0064\u002e");return _a .New ("\u0045\u004f\u0046\u0020\u006e\u006f\u0074\u0020\u0066\u006f\u0075\u006e\u0064");
};func (_cfc *fdfParser )parseNumber ()(_c .PdfObject ,error ){return _c .ParseNumber (_cfc ._ffd )};type fdfParser struct{_fac int ;_ad int ;_fe map[int64 ]_c .PdfObject ;_gc _d .ReadSeeker ;_ffd *_af .Reader ;_cgg int64 ;_fg *_c .PdfObjectDictionary ;
};func (_bfdd *fdfParser )readComment ()(string ,error ){var _feg _ef .Buffer ;_ ,_dfe :=_bfdd .skipSpaces ();if _dfe !=nil {return _feg .String (),_dfe ;};_dcb :=true ;for {_aad ,_cad :=_bfdd ._ffd .Peek (1);if _cad !=nil {_ac .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0025\u0073",_cad .Error ());
return _feg .String (),_cad ;};if _dcb &&_aad [0]!='%'{return _feg .String (),_a .New ("c\u006f\u006d\u006d\u0065\u006e\u0074 \u0073\u0068\u006f\u0075\u006c\u0064\u0020\u0073\u0074a\u0072\u0074\u0020w\u0069t\u0068\u0020\u0025");};_dcb =false ;if (_aad [0]!='\r')&&(_aad [0]!='\n'){_ed ,_ :=_bfdd ._ffd .ReadByte ();
_feg .WriteByte (_ed );}else {break ;};};return _feg .String (),nil ;};var _bbc =_g .MustCompile ("\u0025F\u0044F\u002d\u0028\u005c\u0064\u0029\u005c\u002e\u0028\u005c\u0064\u0029");func (_afc *fdfParser )trace (_gac _c .PdfObject )_c .PdfObject {switch _fgb :=_gac .(type ){case *_c .PdfObjectReference :_cggd ,_abgb :=_afc ._fe [_fgb .ObjectNumber ].(*_c .PdfIndirectObject );
if _abgb {return _cggd .PdfObject ;};_ac .Log .Debug ("\u0054\u0079\u0070\u0065\u0020\u0065\u0072\u0072\u006f\u0072");return nil ;case *_c .PdfIndirectObject :return _fgb .PdfObject ;};return _gac ;};func (_gcb *fdfParser )parseBool ()(_c .PdfObjectBool ,error ){_ebbc ,_fcd :=_gcb ._ffd .Peek (4);
if _fcd !=nil {return _c .PdfObjectBool (false ),_fcd ;};if (len (_ebbc )>=4)&&(string (_ebbc [:4])=="\u0074\u0072\u0075\u0065"){_gcb ._ffd .Discard (4);return _c .PdfObjectBool (true ),nil ;};_ebbc ,_fcd =_gcb ._ffd .Peek (5);if _fcd !=nil {return _c .PdfObjectBool (false ),_fcd ;
};if (len (_ebbc )>=5)&&(string (_ebbc [:5])=="\u0066\u0061\u006cs\u0065"){_gcb ._ffd .Discard (5);return _c .PdfObjectBool (false ),nil ;};return _c .PdfObjectBool (false ),_a .New ("\u0075n\u0065\u0078\u0070\u0065c\u0074\u0065\u0064\u0020\u0062o\u006fl\u0065a\u006e\u0020\u0073\u0074\u0072\u0069\u006eg");
};var _eb =_g .MustCompile ("\u0028\u005c\u0064\u002b)\\\u0073\u002b\u0028\u005c\u0064\u002b\u0029\u005c\u0073\u002b\u006f\u0062\u006a");func (_gf *fdfParser )skipSpaces ()(int ,error ){_acd :=0;for {_bff ,_bfd :=_gf ._ffd .ReadByte ();if _bfd !=nil {return 0,_bfd ;
};if _c .IsWhiteSpace (_bff ){_acd ++;}else {_gf ._ffd .UnreadByte ();break ;};};return _acd ,nil ;};

// FieldValues implements interface model.FieldValueProvider.
// Returns a map of field names to values (PdfObjects).
func (fdf *Data )FieldValues ()(map[string ]_c .PdfObject ,error ){_ee ,_bdg :=fdf .FieldDictionaries ();if _bdg !=nil {return nil ,_bdg ;};var _aa []string ;for _bf :=range _ee {_aa =append (_aa ,_bf );};_bc .Strings (_aa );_bfc :=map[string ]_c .PdfObject {};
for _ ,_bdc :=range _aa {_ea :=_ee [_bdc ];_ab :=_c .TraceToDirectObject (_ea .Get ("\u0056"));_bfc [_bdc ]=_ab ;};return _bfc ,nil ;};func (_dbf *fdfParser )setFileOffset (_fa int64 ){_dbf ._gc .Seek (_fa ,_d .SeekStart );_dbf ._ffd =_af .NewReader (_dbf ._gc );
};

// Load loads FDF form data from `r`.
func Load (r _d .ReadSeeker )(*Data ,error ){_de ,_bb :=_fdg (r );if _bb !=nil {return nil ,_bb ;};_fd ,_bb :=_de .Root ();if _bb !=nil {return nil ,_bb ;};_ga ,_ff :=_c .GetArray (_fd .Get ("\u0046\u0069\u0065\u006c\u0064\u0073"));if !_ff {return nil ,_a .New ("\u0066\u0069\u0065\u006c\u0064\u0073\u0020\u006d\u0069s\u0073\u0069\u006e\u0067");
};return &Data {_cb :_ga ,_db :_fd },nil ;};func (_bcf *fdfParser )parseDict ()(*_c .PdfObjectDictionary ,error ){_ac .Log .Trace ("\u0052\u0065\u0061\u0064\u0069\u006e\u0067\u0020\u0046\u0044\u0046\u0020D\u0069\u0063\u0074\u0021");_adg :=_c .MakeDict ();
_cda ,_ :=_bcf ._ffd .ReadByte ();if _cda !='<'{return nil ,_a .New ("\u0069\u006e\u0076a\u006c\u0069\u0064\u0020\u0064\u0069\u0063\u0074");};_cda ,_ =_bcf ._ffd .ReadByte ();if _cda !='<'{return nil ,_a .New ("\u0069\u006e\u0076a\u006c\u0069\u0064\u0020\u0064\u0069\u0063\u0074");
};for {_bcf .skipSpaces ();_bcf .skipComments ();_cgf ,_bfa :=_bcf ._ffd .Peek (2);if _bfa !=nil {return nil ,_bfa ;};_ac .Log .Trace ("D\u0069c\u0074\u0020\u0070\u0065\u0065\u006b\u003a\u0020%\u0073\u0020\u0028\u0025 x\u0029\u0021",string (_cgf ),string (_cgf ));
if (_cgf [0]=='>')&&(_cgf [1]=='>'){_ac .Log .Trace ("\u0045\u004f\u0046\u0020\u0064\u0069\u0063\u0074\u0069o\u006e\u0061\u0072\u0079");_bcf ._ffd .ReadByte ();_bcf ._ffd .ReadByte ();break ;};_ac .Log .Trace ("\u0050a\u0072s\u0065\u0020\u0074\u0068\u0065\u0020\u006e\u0061\u006d\u0065\u0021");
_aea ,_bfa :=_bcf .parseName ();_ac .Log .Trace ("\u004be\u0079\u003a\u0020\u0025\u0073",_aea );if _bfa !=nil {_ac .Log .Debug ("E\u0052\u0052\u004f\u0052\u0020\u0052e\u0074\u0075\u0072\u006e\u0069\u006e\u0067\u0020\u006ea\u006d\u0065\u0020e\u0072r\u0020\u0025\u0073",_bfa );
return nil ,_bfa ;};if len (_aea )> 4&&_aea [len (_aea )-4:]=="\u006e\u0075\u006c\u006c"{_cbf :=_aea [0:len (_aea )-4];_ac .Log .Debug ("\u0054\u0061\u006b\u0069n\u0067\u0020\u0063\u0061\u0072\u0065\u0020\u006f\u0066\u0020n\u0075l\u006c\u0020\u0062\u0075\u0067\u0020\u0028%\u0073\u0029",_aea );
_ac .Log .Debug ("\u004e\u0065\u0077\u0020ke\u0079\u0020\u0022\u0025\u0073\u0022\u0020\u003d\u0020\u006e\u0075\u006c\u006c",_cbf );_bcf .skipSpaces ();_fgg ,_ :=_bcf ._ffd .Peek (1);if _fgg [0]=='/'{_adg .Set (_cbf ,_c .MakeNull ());continue ;};};_bcf .skipSpaces ();
_ccf ,_bfa :=_bcf .parseObject ();if _bfa !=nil {return nil ,_bfa ;};_adg .Set (_aea ,_ccf );_ac .Log .Trace ("\u0064\u0069\u0063\u0074\u005b\u0025\u0073\u005d\u0020\u003d\u0020\u0025\u0073",_aea ,_ccf .String ());};_ac .Log .Trace ("\u0072\u0065\u0074\u0075rn\u0069\u006e\u0067\u0020\u0046\u0044\u0046\u0020\u0044\u0069\u0063\u0074\u0021");
return _adg ,nil ;};func (_acba *fdfParser )parseNull ()(_c .PdfObjectNull ,error ){_ ,_bad :=_acba ._ffd .Discard (4);return _c .PdfObjectNull {},_bad ;};func (_cgac *fdfParser )parse ()error {_cgac ._gc .Seek (0,_d .SeekStart );_cgac ._ffd =_af .NewReader (_cgac ._gc );
for {_cgac .skipComments ();_fcdd ,_ega :=_cgac ._ffd .Peek (20);if _ega !=nil {_ac .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0046\u0061\u0069\u006c\u0020\u0074\u006f\u0020r\u0065a\u0064\u0020\u0069\u006e\u0064\u0069\u0072\u0065\u0063\u0074\u0020\u006f\u0062\u006a");
return _ega ;};if _f .HasPrefix (string (_fcdd ),"\u0074r\u0061\u0069\u006c\u0065\u0072"){_cgac ._ffd .Discard (7);_cgac .skipSpaces ();_cgac .skipComments ();_cbg ,_ :=_cgac .parseDict ();_cgac ._fg =_cbg ;break ;};_dad :=_eb .FindStringSubmatchIndex (string (_fcdd ));
if len (_dad )< 6{_ac .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020U\u006e\u0061\u0062l\u0065\u0020\u0074\u006f \u0066\u0069\u006e\u0064\u0020\u006f\u0062\u006a\u0065\u0063\u0074\u0020\u0073\u0069\u0067\u006e\u0061\u0074\u0075\u0072\u0065\u0020\u0028\u0025\u0073\u0029",string (_fcdd ));
return _a .New ("\u0075\u006e\u0061b\u006c\u0065\u0020\u0074\u006f\u0020\u0064\u0065\u0074\u0065\u0063\u0074\u0020\u0069\u006e\u0064\u0069\u0072\u0065\u0063\u0074\u0020\u006f\u0062\u006a\u0065\u0063\u0074\u0020s\u0069\u0067\u006e\u0061\u0074\u0075\u0072\u0065");
};_fafc ,_ega :=_cgac .parseIndirectObject ();if _ega !=nil {return _ega ;};switch _eebb :=_fafc .(type ){case *_c .PdfIndirectObject :_cgac ._fe [_eebb .ObjectNumber ]=_eebb ;case *_c .PdfObjectStream :_cgac ._fe [_eebb .ObjectNumber ]=_eebb ;default:return _a .New ("\u0074\u0079\u0070\u0065\u0020\u0065\u0072\u0072\u006f\u0072");
};};return nil ;};func (_cdf *fdfParser )parseName ()(_c .PdfObjectName ,error ){var _gag _ef .Buffer ;_bba :=false ;for {_bed ,_dec :=_cdf ._ffd .Peek (1);if _dec ==_d .EOF {break ;};if _dec !=nil {return _c .PdfObjectName (_gag .String ()),_dec ;};if !_bba {if _bed [0]=='/'{_bba =true ;
_cdf ._ffd .ReadByte ();}else if _bed [0]=='%'{_cdf .readComment ();_cdf .skipSpaces ();}else {_ac .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u0020N\u0061\u006d\u0065\u0020\u0073\u0074\u0061\u0072\u0074\u0069\u006e\u0067\u0020w\u0069\u0074\u0068\u0020\u0025\u0073\u0020(\u0025\u0020\u0078\u0029",_bed ,_bed );
return _c .PdfObjectName (_gag .String ()),_e .Errorf ("\u0069n\u0076a\u006c\u0069\u0064\u0020\u006ea\u006d\u0065:\u0020\u0028\u0025\u0063\u0029",_bed [0]);};}else {if _c .IsWhiteSpace (_bed [0]){break ;}else if (_bed [0]=='/')||(_bed [0]=='[')||(_bed [0]=='(')||(_bed [0]==']')||(_bed [0]=='<')||(_bed [0]=='>'){break ;
}else if _bed [0]=='#'{_bbe ,_dcbc :=_cdf ._ffd .Peek (3);if _dcbc !=nil {return _c .PdfObjectName (_gag .String ()),_dcbc ;};_cdf ._ffd .Discard (3);_baf ,_dcbc :=_gd .DecodeString (string (_bbe [1:3]));if _dcbc !=nil {return _c .PdfObjectName (_gag .String ()),_dcbc ;
};_gag .Write (_baf );}else {_efc ,_ :=_cdf ._ffd .ReadByte ();_gag .WriteByte (_efc );};};};return _c .PdfObjectName (_gag .String ()),nil ;};