//
// Copyright 2020 FoxyUtils ehf. All rights reserved.
//
// This is a commercial product and requires a license to operate.
// A trial license can be obtained at https://unidoc.io
//
// DO NOT EDIT: generated by unitwist Go source code obfuscator.
//
// Use of this source code is governed by the UniDoc End User License Agreement
// terms that can be accessed at https://unidoc.io/eula/

// Package fdf provides support for loading form field data from Form Field Data (FDF) files.
package fdf ;import (_aa "bufio";_dg "bytes";_c "encoding/hex";_b "errors";_da "fmt";_fg "github.com/unidoc/unipdf/v3/common";_bfb "github.com/unidoc/unipdf/v3/core";_aab "io";_fb "os";_d "regexp";_bf "sort";_a "strconv";_g "strings";);func (_fgc *fdfParser )getFileOffset ()int64 {_cdd ,_ :=_fgc ._fga .Seek (0,_aab .SeekCurrent );
_cdd -=int64 (_fgc ._eda .Buffered ());return _cdd ;};func (_gaf *fdfParser )parseObject ()(_bfb .PdfObject ,error ){_fg .Log .Trace ("\u0052e\u0061d\u0020\u0064\u0069\u0072\u0065c\u0074\u0020o\u0062\u006a\u0065\u0063\u0074");_gaf .skipSpaces ();for {_gece ,_dde :=_gaf ._eda .Peek (2);
if _dde !=nil {return nil ,_dde ;};_fg .Log .Trace ("\u0050e\u0065k\u0020\u0073\u0074\u0072\u0069\u006e\u0067\u003a\u0020\u0025\u0073",string (_gece ));if _gece [0]=='/'{_ccc ,_ggee :=_gaf .parseName ();_fg .Log .Trace ("\u002d\u003e\u004ea\u006d\u0065\u003a\u0020\u0027\u0025\u0073\u0027",_ccc );
return &_ccc ,_ggee ;}else if _gece [0]=='('{_fg .Log .Trace ("\u002d>\u0053\u0074\u0072\u0069\u006e\u0067!");return _gaf .parseString ();}else if _gece [0]=='['{_fg .Log .Trace ("\u002d\u003e\u0041\u0072\u0072\u0061\u0079\u0021");return _gaf .parseArray ();
}else if (_gece [0]=='<')&&(_gece [1]=='<'){_fg .Log .Trace ("\u002d>\u0044\u0069\u0063\u0074\u0021");return _gaf .parseDict ();}else if _gece [0]=='<'{_fg .Log .Trace ("\u002d\u003e\u0048\u0065\u0078\u0020\u0073\u0074\u0072\u0069\u006e\u0067\u0021");return _gaf .parseHexString ();
}else if _gece [0]=='%'{_gaf .readComment ();_gaf .skipSpaces ();}else {_fg .Log .Trace ("\u002d\u003eN\u0075\u006d\u0062e\u0072\u0020\u006f\u0072\u0020\u0072\u0065\u0066\u003f");_gece ,_ =_gaf ._eda .Peek (15);_abf :=string (_gece );_fg .Log .Trace ("\u0050\u0065\u0065k\u0020\u0073\u0074\u0072\u003a\u0020\u0025\u0073",_abf );
if (len (_abf )> 3)&&(_abf [:4]=="\u006e\u0075\u006c\u006c"){_bag ,_dcba :=_gaf .parseNull ();return &_bag ,_dcba ;}else if (len (_abf )> 4)&&(_abf [:5]=="\u0066\u0061\u006cs\u0065"){_abd ,_faa :=_gaf .parseBool ();return &_abd ,_faa ;}else if (len (_abf )> 3)&&(_abf [:4]=="\u0074\u0072\u0075\u0065"){_gdg ,_aca :=_gaf .parseBool ();
return &_gdg ,_aca ;};_dcbac :=_fc .FindStringSubmatch (_abf );if len (_dcbac )> 1{_gece ,_ =_gaf ._eda .ReadBytes ('R');_fg .Log .Trace ("\u002d\u003e\u0020\u0021\u0052\u0065\u0066\u003a\u0020\u0027\u0025\u0073\u0027",string (_gece [:]));_gcc ,_egg :=_cgg (string (_gece ));
return &_gcc ,_egg ;};_ggef :=_ebg .FindStringSubmatch (_abf );if len (_ggef )> 1{_fg .Log .Trace ("\u002d\u003e\u0020\u004e\u0075\u006d\u0062\u0065\u0072\u0021");return _gaf .parseNumber ();};_ggef =_bgg .FindStringSubmatch (_abf );if len (_ggef )> 1{_fg .Log .Trace ("\u002d\u003e\u0020\u0045xp\u006f\u006e\u0065\u006e\u0074\u0069\u0061\u006c\u0020\u004e\u0075\u006d\u0062\u0065r\u0021");
_fg .Log .Trace ("\u0025\u0020\u0073",_ggef );return _gaf .parseNumber ();};_fg .Log .Debug ("\u0045R\u0052\u004f\u0052\u0020U\u006e\u006b\u006e\u006f\u0077n\u0020(\u0070e\u0065\u006b\u0020\u0022\u0025\u0073\u0022)",_abf );return nil ,_b .New ("\u006f\u0062\u006a\u0065\u0063t\u0020\u0070\u0061\u0072\u0073\u0069\u006e\u0067\u0020\u0065\u0072\u0072\u006fr\u0020\u002d\u0020\u0075\u006e\u0065\u0078\u0070\u0065\u0063\u0074\u0065\u0064\u0020\u0070\u0061\u0074\u0074\u0065\u0072\u006e");
};};};func (_ab *fdfParser )readTextLine ()(string ,error ){var _fca _dg .Buffer ;for {_fab ,_gcg :=_ab ._eda .Peek (1);if _gcg !=nil {_fg .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0025\u0073",_gcg .Error ());return _fca .String (),_gcg ;};if (_fab [0]!='\r')&&(_fab [0]!='\n'){_acd ,_ :=_ab ._eda .ReadByte ();
_fca .WriteByte (_acd );}else {break ;};};return _fca .String (),nil ;};func (_egfb *fdfParser )seekToEOFMarker (_aabc int64 )error {_gac :=int64 (0);_fddb :=int64 (1000);for _gac < _aabc {if _aabc <=(_fddb +_gac ){_fddb =_aabc -_gac ;};_ ,_agc :=_egfb ._fga .Seek (-_gac -_fddb ,_aab .SeekEnd );
if _agc !=nil {return _agc ;};_ccae :=make ([]byte ,_fddb );_egfb ._fga .Read (_ccae );_fg .Log .Trace ("\u004c\u006f\u006f\u006bi\u006e\u0067\u0020\u0066\u006f\u0072\u0020\u0045\u004f\u0046 \u006da\u0072\u006b\u0065\u0072\u003a\u0020\u0022%\u0073\u0022",string (_ccae ));
_ccd :=_bg .FindAllStringIndex (string (_ccae ),-1);if _ccd !=nil {_dbf :=_ccd [len (_ccd )-1];_fg .Log .Trace ("\u0049\u006e\u0064\u003a\u0020\u0025\u0020\u0064",_ccd );_egfb ._fga .Seek (-_gac -_fddb +int64 (_dbf [0]),_aab .SeekEnd );return nil ;};_fg .Log .Debug ("\u0057\u0061\u0072\u006e\u0069\u006eg\u003a\u0020\u0045\u004f\u0046\u0020\u006d\u0061\u0072\u006b\u0065\u0072\u0020\u006e\u006f\u0074\u0020\u0066\u006f\u0075n\u0064\u0021\u0020\u002d\u0020\u0063\u006f\u006e\u0074\u0069\u006e\u0075\u0065\u0020s\u0065e\u006b\u0069\u006e\u0067");
_gac +=_fddb ;};_fg .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u003a\u0020\u0045\u004f\u0046\u0020\u006d\u0061\u0072\u006be\u0072 \u0077\u0061\u0073\u0020\u006e\u006f\u0074\u0020\u0066\u006f\u0075\u006e\u0064\u002e");return _b .New ("\u0045\u004f\u0046\u0020\u006e\u006f\u0074\u0020\u0066\u006f\u0075\u006e\u0064");
};

// FieldValues implements interface model.FieldValueProvider.
// Returns a map of field names to values (PdfObjects).
func (fdf *Data )FieldValues ()(map[string ]_bfb .PdfObject ,error ){_gd ,_cc :=fdf .FieldDictionaries ();if _cc !=nil {return nil ,_cc ;};var _ad []string ;for _gg :=range _gd {_ad =append (_ad ,_gg );};_bf .Strings (_ad );_ded :=map[string ]_bfb .PdfObject {};
for _ ,_def :=range _ad {_cf :=_gd [_def ];_dgg :=_bfb .TraceToDirectObject (_cf .Get ("\u0056"));_ded [_def ]=_dgg ;};return _ded ,nil ;};var _bg =_d .MustCompile ("\u0025\u0025\u0045O\u0046");

// FieldDictionaries returns a map of field names to field dictionaries.
func (fdf *Data )FieldDictionaries ()(map[string ]*_bfb .PdfObjectDictionary ,error ){_eb :=map[string ]*_bfb .PdfObjectDictionary {};for _bff :=0;_bff < fdf ._db .Len ();_bff ++{_ff ,_dd :=_bfb .GetDict (fdf ._db .Get (_bff ));if _dd {_ac ,_ :=_bfb .GetString (_ff .Get ("\u0054"));
if _ac !=nil {_eb [_ac .Str ()]=_ff ;};};};return _eb ,nil ;};func (_fdc *fdfParser )parseName ()(_bfb .PdfObjectName ,error ){var _fec _dg .Buffer ;_bfde :=false ;for {_dgb ,_gge :=_fdc ._eda .Peek (1);if _gge ==_aab .EOF {break ;};if _gge !=nil {return _bfb .PdfObjectName (_fec .String ()),_gge ;
};if !_bfde {if _dgb [0]=='/'{_bfde =true ;_fdc ._eda .ReadByte ();}else if _dgb [0]=='%'{_fdc .readComment ();_fdc .skipSpaces ();}else {_fg .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u0020N\u0061\u006d\u0065\u0020\u0073\u0074\u0061\u0072\u0074\u0069\u006e\u0067\u0020w\u0069\u0074\u0068\u0020\u0025\u0073\u0020(\u0025\u0020\u0078\u0029",_dgb ,_dgb );
return _bfb .PdfObjectName (_fec .String ()),_da .Errorf ("\u0069n\u0076a\u006c\u0069\u0064\u0020\u006ea\u006d\u0065:\u0020\u0028\u0025\u0063\u0029",_dgb [0]);};}else {if _bfb .IsWhiteSpace (_dgb [0]){break ;}else if (_dgb [0]=='/')||(_dgb [0]=='[')||(_dgb [0]=='(')||(_dgb [0]==']')||(_dgb [0]=='<')||(_dgb [0]=='>'){break ;
}else if _dgb [0]=='#'{_ace ,_abg :=_fdc ._eda .Peek (3);if _abg !=nil {return _bfb .PdfObjectName (_fec .String ()),_abg ;};_fdc ._eda .Discard (3);_edab ,_abg :=_c .DecodeString (string (_ace [1:3]));if _abg !=nil {return _bfb .PdfObjectName (_fec .String ()),_abg ;
};_fec .Write (_edab );}else {_dda ,_ :=_fdc ._eda .ReadByte ();_fec .WriteByte (_dda );};};};return _bfb .PdfObjectName (_fec .String ()),nil ;};func (_abb *fdfParser )parseDict ()(*_bfb .PdfObjectDictionary ,error ){_fg .Log .Trace ("\u0052\u0065\u0061\u0064\u0069\u006e\u0067\u0020\u0046\u0044\u0046\u0020D\u0069\u0063\u0074\u0021");
_aed :=_bfb .MakeDict ();_dcdc ,_ :=_abb ._eda .ReadByte ();if _dcdc !='<'{return nil ,_b .New ("\u0069\u006e\u0076a\u006c\u0069\u0064\u0020\u0064\u0069\u0063\u0074");};_dcdc ,_ =_abb ._eda .ReadByte ();if _dcdc !='<'{return nil ,_b .New ("\u0069\u006e\u0076a\u006c\u0069\u0064\u0020\u0064\u0069\u0063\u0074");
};for {_abb .skipSpaces ();_abb .skipComments ();_aea ,_fae :=_abb ._eda .Peek (2);if _fae !=nil {return nil ,_fae ;};_fg .Log .Trace ("D\u0069c\u0074\u0020\u0070\u0065\u0065\u006b\u003a\u0020%\u0073\u0020\u0028\u0025 x\u0029\u0021",string (_aea ),string (_aea ));
if (_aea [0]=='>')&&(_aea [1]=='>'){_fg .Log .Trace ("\u0045\u004f\u0046\u0020\u0064\u0069\u0063\u0074\u0069o\u006e\u0061\u0072\u0079");_abb ._eda .ReadByte ();_abb ._eda .ReadByte ();break ;};_fg .Log .Trace ("\u0050a\u0072s\u0065\u0020\u0074\u0068\u0065\u0020\u006e\u0061\u006d\u0065\u0021");
_dff ,_fae :=_abb .parseName ();_fg .Log .Trace ("\u004be\u0079\u003a\u0020\u0025\u0073",_dff );if _fae !=nil {_fg .Log .Debug ("E\u0052\u0052\u004f\u0052\u0020\u0052e\u0074\u0075\u0072\u006e\u0069\u006e\u0067\u0020\u006ea\u006d\u0065\u0020e\u0072r\u0020\u0025\u0073",_fae );
return nil ,_fae ;};if len (_dff )> 4&&_dff [len (_dff )-4:]=="\u006e\u0075\u006c\u006c"{_cbg :=_dff [0:len (_dff )-4];_fg .Log .Debug ("\u0054\u0061\u006b\u0069n\u0067\u0020\u0063\u0061\u0072\u0065\u0020\u006f\u0066\u0020n\u0075l\u006c\u0020\u0062\u0075\u0067\u0020\u0028%\u0073\u0029",_dff );
_fg .Log .Debug ("\u004e\u0065\u0077\u0020ke\u0079\u0020\u0022\u0025\u0073\u0022\u0020\u003d\u0020\u006e\u0075\u006c\u006c",_cbg );_abb .skipSpaces ();_cdda ,_ :=_abb ._eda .Peek (1);if _cdda [0]=='/'{_aed .Set (_cbg ,_bfb .MakeNull ());continue ;};};_abb .skipSpaces ();
_dga ,_fae :=_abb .parseObject ();if _fae !=nil {return nil ,_fae ;};_aed .Set (_dff ,_dga );_fg .Log .Trace ("\u0064\u0069\u0063\u0074\u005b\u0025\u0073\u005d\u0020\u003d\u0020\u0025\u0073",_dff ,_dga .String ());};_fg .Log .Trace ("\u0072\u0065\u0074\u0075rn\u0069\u006e\u0067\u0020\u0046\u0044\u0046\u0020\u0044\u0069\u0063\u0074\u0021");
return _aed ,nil ;};func (_ea *fdfParser )parseString ()(*_bfb .PdfObjectString ,error ){_ea ._eda .ReadByte ();var _aec _dg .Buffer ;_abc :=1;for {_bge ,_bged :=_ea ._eda .Peek (1);if _bged !=nil {return _bfb .MakeString (_aec .String ()),_bged ;};if _bge [0]=='\\'{_ea ._eda .ReadByte ();
_cfc ,_ebd :=_ea ._eda .ReadByte ();if _ebd !=nil {return _bfb .MakeString (_aec .String ()),_ebd ;};if _bfb .IsOctalDigit (_cfc ){_ga ,_fgg :=_ea ._eda .Peek (2);if _fgg !=nil {return _bfb .MakeString (_aec .String ()),_fgg ;};var _fce []byte ;_fce =append (_fce ,_cfc );
for _ ,_edb :=range _ga {if _bfb .IsOctalDigit (_edb ){_fce =append (_fce ,_edb );}else {break ;};};_ea ._eda .Discard (len (_fce )-1);_fg .Log .Trace ("\u004e\u0075\u006d\u0065ri\u0063\u0020\u0073\u0074\u0072\u0069\u006e\u0067\u0020\u0022\u0025\u0073\u0022",_fce );
_ffd ,_fgg :=_a .ParseUint (string (_fce ),8,32);if _fgg !=nil {return _bfb .MakeString (_aec .String ()),_fgg ;};_aec .WriteByte (byte (_ffd ));continue ;};switch _cfc {case 'n':_aec .WriteRune ('\n');case 'r':_aec .WriteRune ('\r');case 't':_aec .WriteRune ('\t');
case 'b':_aec .WriteRune ('\b');case 'f':_aec .WriteRune ('\f');case '(':_aec .WriteRune ('(');case ')':_aec .WriteRune (')');case '\\':_aec .WriteRune ('\\');};continue ;}else if _bge [0]=='('{_abc ++;}else if _bge [0]==')'{_abc --;if _abc ==0{_ea ._eda .ReadByte ();
break ;};};_bc ,_ :=_ea ._eda .ReadByte ();_aec .WriteByte (_bc );};return _bfb .MakeString (_aec .String ()),nil ;};

// Data represents forms data format (FDF) file data.
type Data struct{_gc *_bfb .PdfObjectDictionary ;_db *_bfb .PdfObjectArray ;};var _ebg =_d .MustCompile ("\u005e\u005b\u005c\u002b\u002d\u002e\u005d\u002a\u0028\u005b\u0030\u002d9\u002e\u005d\u002b\u0029");type fdfParser struct{_ba int ;_add int ;_cgea map[int64 ]_bfb .PdfObject ;
_fga _aab .ReadSeeker ;_eda *_aa .Reader ;_ef int64 ;_afg *_bfb .PdfObjectDictionary ;};

// LoadFromPath loads FDF form data from file path `fdfPath`.
func LoadFromPath (fdfPath string )(*Data ,error ){_ee ,_df :=_fb .Open (fdfPath );if _df !=nil {return nil ,_df ;};defer _ee .Close ();return Load (_ee );};func (_bdb *fdfParser )readComment ()(string ,error ){var _baf _dg .Buffer ;_ ,_edd :=_bdb .skipSpaces ();
if _edd !=nil {return _baf .String (),_edd ;};_ddg :=true ;for {_afgg ,_adb :=_bdb ._eda .Peek (1);if _adb !=nil {_fg .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0025\u0073",_adb .Error ());return _baf .String (),_adb ;};if _ddg &&_afgg [0]!='%'{return _baf .String (),_b .New ("c\u006f\u006d\u006d\u0065\u006e\u0074 \u0073\u0068\u006f\u0075\u006c\u0064\u0020\u0073\u0074a\u0072\u0074\u0020w\u0069t\u0068\u0020\u0025");
};_ddg =false ;if (_afgg [0]!='\r')&&(_afgg [0]!='\n'){_ccg ,_ :=_bdb ._eda .ReadByte ();_baf .WriteByte (_ccg );}else {break ;};};return _baf .String (),nil ;};func (_ebdg *fdfParser )seekFdfVersionTopDown ()(int ,int ,error ){_ebdg ._fga .Seek (0,_aab .SeekStart );
_ebdg ._eda =_aa .NewReader (_ebdg ._fga );_bga :=20;_fba :=make ([]byte ,_bga );for {_bgedc ,_dfa :=_ebdg ._eda .ReadByte ();if _dfa !=nil {if _dfa ==_aab .EOF {break ;}else {return 0,0,_dfa ;};};if _bfb .IsDecimalDigit (_bgedc )&&_fba [_bga -1]=='.'&&_bfb .IsDecimalDigit (_fba [_bga -2])&&_fba [_bga -3]=='-'&&_fba [_bga -4]=='F'&&_fba [_bga -5]=='D'&&_fba [_bga -6]=='P'{_afee :=int (_fba [_bga -2]-'0');
_cbge :=int (_bgedc -'0');return _afee ,_cbge ,nil ;};_fba =append (_fba [1:_bga ],_bgedc );};return 0,0,_b .New ("\u0076\u0065\u0072\u0073\u0069\u006f\u006e\u0020\u006e\u006f\u0074\u0020f\u006f\u0075\u006e\u0064");};func (_gb *fdfParser )setFileOffset (_ge int64 ){_gb ._fga .Seek (_ge ,_aab .SeekStart );
_gb ._eda =_aa .NewReader (_gb ._fga );};func (_cb *fdfParser )skipComments ()error {if _ ,_afa :=_cb .skipSpaces ();_afa !=nil {return _afa ;};_fgb :=true ;for {_gde ,_fe :=_cb ._eda .Peek (1);if _fe !=nil {_fg .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0025\u0073",_fe .Error ());
return _fe ;};if _fgb &&_gde [0]!='%'{return nil ;};_fgb =false ;if (_gde [0]!='\r')&&(_gde [0]!='\n'){_cb ._eda .ReadByte ();}else {break ;};};return _cb .skipComments ();};func (_gf *fdfParser )parseBool ()(_bfb .PdfObjectBool ,error ){_bb ,_gae :=_gf ._eda .Peek (4);
if _gae !=nil {return _bfb .PdfObjectBool (false ),_gae ;};if (len (_bb )>=4)&&(string (_bb [:4])=="\u0074\u0072\u0075\u0065"){_gf ._eda .Discard (4);return _bfb .PdfObjectBool (true ),nil ;};_bb ,_gae =_gf ._eda .Peek (5);if _gae !=nil {return _bfb .PdfObjectBool (false ),_gae ;
};if (len (_bb )>=5)&&(string (_bb [:5])=="\u0066\u0061\u006cs\u0065"){_gf ._eda .Discard (5);return _bfb .PdfObjectBool (false ),nil ;};return _bfb .PdfObjectBool (false ),_b .New ("\u0075n\u0065\u0078\u0070\u0065c\u0074\u0065\u0064\u0020\u0062o\u006fl\u0065a\u006e\u0020\u0073\u0074\u0072\u0069\u006eg");
};var _bd =_d .MustCompile ("\u0028\u005c\u0064\u002b)\\\u0073\u002b\u0028\u005c\u0064\u002b\u0029\u005c\u0073\u002b\u006f\u0062\u006a");var _bgg =_d .MustCompile ("\u005e\u005b\u005c+-\u002e\u005d\u002a\u0028\u005b\u0030\u002d\u0039\u002e]\u002b)\u0065[\u005c+\u002d\u002e\u005d\u002a\u0028\u005b\u0030\u002d\u0039\u002e\u005d\u002b\u0029");
func (_cgb *fdfParser )parse ()error {_cgb ._fga .Seek (0,_aab .SeekStart );_cgb ._eda =_aa .NewReader (_cgb ._fga );for {_cgb .skipComments ();_gea ,_cde :=_cgb ._eda .Peek (20);if _cde !=nil {_fg .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0046\u0061\u0069\u006c\u0020\u0074\u006f\u0020r\u0065a\u0064\u0020\u0069\u006e\u0064\u0069\u0072\u0065\u0063\u0074\u0020\u006f\u0062\u006a");
return _cde ;};if _g .HasPrefix (string (_gea ),"\u0074r\u0061\u0069\u006c\u0065\u0072"){_cgb ._eda .Discard (7);_cgb .skipSpaces ();_cgb .skipComments ();_acdg ,_ :=_cgb .parseDict ();_cgb ._afg =_acdg ;break ;};_ebba :=_bd .FindStringSubmatchIndex (string (_gea ));
if len (_ebba )< 6{_fg .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020U\u006e\u0061\u0062l\u0065\u0020\u0074\u006f \u0066\u0069\u006e\u0064\u0020\u006f\u0062\u006a\u0065\u0063\u0074\u0020\u0073\u0069\u0067\u006e\u0061\u0074\u0075\u0072\u0065\u0020\u0028\u0025\u0073\u0029",string (_gea ));
return _b .New ("\u0075\u006e\u0061b\u006c\u0065\u0020\u0074\u006f\u0020\u0064\u0065\u0074\u0065\u0063\u0074\u0020\u0069\u006e\u0064\u0069\u0072\u0065\u0063\u0074\u0020\u006f\u0062\u006a\u0065\u0063\u0074\u0020s\u0069\u0067\u006e\u0061\u0074\u0075\u0072\u0065");
};_cab ,_cde :=_cgb .parseIndirectObject ();if _cde !=nil {return _cde ;};switch _bbdf :=_cab .(type ){case *_bfb .PdfIndirectObject :_cgb ._cgea [_bbdf .ObjectNumber ]=_bbdf ;case *_bfb .PdfObjectStream :_cgb ._cgea [_bbdf .ObjectNumber ]=_bbdf ;default:return _b .New ("\u0074\u0079\u0070\u0065\u0020\u0065\u0072\u0072\u006f\u0072");
};};return nil ;};func (_ca *fdfParser )trace (_cdc _bfb .PdfObject )_bfb .PdfObject {switch _eeg :=_cdc .(type ){case *_bfb .PdfObjectReference :_dea ,_bcab :=_ca ._cgea [_eeg .ObjectNumber ].(*_bfb .PdfIndirectObject );if _bcab {return _dea .PdfObject ;
};_fg .Log .Debug ("\u0054\u0079\u0070\u0065\u0020\u0065\u0072\u0072\u006f\u0072");return nil ;case *_bfb .PdfIndirectObject :return _eeg .PdfObject ;};return _cdc ;};

// Load loads FDF form data from `r`.
func Load (r _aab .ReadSeeker )(*Data ,error ){_cg ,_dc :=_gga (r );if _dc !=nil {return nil ,_dc ;};_af ,_dc :=_cg .Root ();if _dc !=nil {return nil ,_dc ;};_e ,_dcc :=_bfb .GetArray (_af .Get ("\u0046\u0069\u0065\u006c\u0064\u0073"));if !_dcc {return nil ,_b .New ("\u0066\u0069\u0065\u006c\u0064\u0073\u0020\u006d\u0069s\u0073\u0069\u006e\u0067");
};return &Data {_db :_e ,_gc :_af },nil ;};func (_dac *fdfParser )parseArray ()(*_bfb .PdfObjectArray ,error ){_dbc :=_bfb .MakeArray ();_dac ._eda .ReadByte ();for {_dac .skipSpaces ();_eg ,_dbg :=_dac ._eda .Peek (1);if _dbg !=nil {return _dbc ,_dbg ;
};if _eg [0]==']'{_dac ._eda .ReadByte ();break ;};_daf ,_dbg :=_dac .parseObject ();if _dbg !=nil {return _dbc ,_dbg ;};_dbc .Append (_daf );};return _dbc ,nil ;};func (_age *fdfParser )parseFdfVersion ()(int ,int ,error ){_age ._fga .Seek (0,_aab .SeekStart );
_ddgg :=20;_egf :=make ([]byte ,_ddgg );_age ._fga .Read (_egf );_dafb :=_fa .FindStringSubmatch (string (_egf ));if len (_dafb )< 3{_ebb ,_deb ,_bde :=_age .seekFdfVersionTopDown ();if _bde !=nil {_fg .Log .Debug ("F\u0061\u0069\u006c\u0065\u0064\u0020\u0072\u0065\u0063\u006f\u0076\u0065\u0072\u0079\u0020\u002d\u0020\u0075n\u0061\u0062\u006c\u0065\u0020\u0074\u006f\u0020\u0066\u0069nd\u0020\u0076\u0065r\u0073i\u006f\u006e");
return 0,0,_bde ;};return _ebb ,_deb ,nil ;};_gdc ,_dafc :=_a .Atoi (_dafb [1]);if _dafc !=nil {return 0,0,_dafc ;};_ffda ,_dafc :=_a .Atoi (_dafb [2]);if _dafc !=nil {return 0,0,_dafc ;};_fg .Log .Debug ("\u0046\u0064\u0066\u0020\u0076\u0065\u0072\u0073\u0069\u006f\u006e\u0020%\u0064\u002e\u0025\u0064",_gdc ,_ffda );
return _gdc ,_ffda ,nil ;};func (_cec *fdfParser )parseNumber ()(_bfb .PdfObject ,error ){return _bfb .ParseNumber (_cec ._eda )};func _ggefb (_bfae string )(*fdfParser ,error ){_gcba :=fdfParser {};_ecg :=[]byte (_bfae );_gacb :=_dg .NewReader (_ecg );
_gcba ._fga =_gacb ;_gcba ._cgea =map[int64 ]_bfb .PdfObject {};_cbe :=_aa .NewReader (_gacb );_gcba ._eda =_cbe ;_gcba ._ef =int64 (len (_bfae ));return &_gcba ,_gcba .parse ();};func (_cge *fdfParser )readAtLeast (_ggb []byte ,_dfb int )(int ,error ){_cd :=_dfb ;
_bfd :=0;_ffa :=0;for _cd > 0{_ed ,_ebab :=_cge ._eda .Read (_ggb [_bfd :]);if _ebab !=nil {_fg .Log .Debug ("\u0045\u0052\u0052O\u0052\u0020\u0046\u0061i\u006c\u0065\u0064\u0020\u0072\u0065\u0061d\u0069\u006e\u0067\u0020\u0028\u0025\u0064\u003b\u0025\u0064\u0029\u0020\u0025\u0073",_ed ,_ffa ,_ebab .Error ());
return _bfd ,_b .New ("\u0066\u0061\u0069\u006c\u0065\u0064\u0020\u0072\u0065a\u0064\u0069\u006e\u0067");};_ffa ++;_bfd +=_ed ;_cd -=_ed ;};return _bfd ,nil ;};

// Root returns the Root of the FDF document.
func (_ceca *fdfParser )Root ()(*_bfb .PdfObjectDictionary ,error ){if _ceca ._afg !=nil {if _bbe ,_ffc :=_ceca .trace (_ceca ._afg .Get ("\u0052\u006f\u006f\u0074")).(*_bfb .PdfObjectDictionary );_ffc {if _bffa ,_eaf :=_ceca .trace (_bbe .Get ("\u0046\u0044\u0046")).(*_bfb .PdfObjectDictionary );
_eaf {return _bffa ,nil ;};};};var _fcc []int64 ;for _agag :=range _ceca ._cgea {_fcc =append (_fcc ,_agag );};_bf .Slice (_fcc ,func (_bca ,_fge int )bool {return _fcc [_bca ]< _fcc [_fge ]});for _ ,_aeb :=range _fcc {_ebdb :=_ceca ._cgea [_aeb ];if _afbe ,_aedg :=_ceca .trace (_ebdb ).(*_bfb .PdfObjectDictionary );
_aedg {if _ffde ,_ged :=_ceca .trace (_afbe .Get ("\u0046\u0044\u0046")).(*_bfb .PdfObjectDictionary );_ged {return _ffde ,nil ;};};};return nil ,_b .New ("\u0046\u0044\u0046\u0020\u006e\u006f\u0074\u0020\u0066\u006f\u0075\u006e\u0064");};var _fc =_d .MustCompile ("^\u005c\u0073\u002a\u0028\\d\u002b)\u005c\u0073\u002b\u0028\u005cd\u002b\u0029\u005c\u0073\u002b\u0052");
func (_fbf *fdfParser )parseIndirectObject ()(_bfb .PdfObject ,error ){_gfed :=_bfb .PdfIndirectObject {};_fg .Log .Trace ("\u002dR\u0065a\u0064\u0020\u0069\u006e\u0064i\u0072\u0065c\u0074\u0020\u006f\u0062\u006a");_agg ,_ggbd :=_fbf ._eda .Peek (20);if _ggbd !=nil {_fg .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0046\u0061\u0069\u006c\u0020\u0074\u006f\u0020r\u0065a\u0064\u0020\u0069\u006e\u0064\u0069\u0072\u0065\u0063\u0074\u0020\u006f\u0062\u006a");
return &_gfed ,_ggbd ;};_fg .Log .Trace ("\u0028\u0069\u006edi\u0072\u0065\u0063\u0074\u0020\u006f\u0062\u006a\u0020\u0070\u0065\u0065\u006b\u0020\u0022\u0025\u0073\u0022",string (_agg ));_baff :=_bd .FindStringSubmatchIndex (string (_agg ));if len (_baff )< 6{_fg .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020U\u006e\u0061\u0062l\u0065\u0020\u0074\u006f \u0066\u0069\u006e\u0064\u0020\u006f\u0062\u006a\u0065\u0063\u0074\u0020\u0073\u0069\u0067\u006e\u0061\u0074\u0075\u0072\u0065\u0020\u0028\u0025\u0073\u0029",string (_agg ));
return &_gfed ,_b .New ("\u0075\u006e\u0061b\u006c\u0065\u0020\u0074\u006f\u0020\u0064\u0065\u0074\u0065\u0063\u0074\u0020\u0069\u006e\u0064\u0069\u0072\u0065\u0063\u0074\u0020\u006f\u0062\u006a\u0065\u0063\u0074\u0020s\u0069\u0067\u006e\u0061\u0074\u0075\u0072\u0065");
};_fbf ._eda .Discard (_baff [0]);_fg .Log .Trace ("O\u0066\u0066\u0073\u0065\u0074\u0073\u0020\u0025\u0020\u0064",_baff );_bgbc :=_baff [1]-_baff [0];_cfde :=make ([]byte ,_bgbc );_ ,_ggbd =_fbf .readAtLeast (_cfde ,_bgbc );if _ggbd !=nil {_fg .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0075\u006e\u0061\u0062l\u0065\u0020\u0074\u006f\u0020\u0072\u0065\u0061\u0064\u0020-\u0020\u0025\u0073",_ggbd );
return nil ,_ggbd ;};_fg .Log .Trace ("\u0074\u0065\u0078t\u006c\u0069\u006e\u0065\u003a\u0020\u0025\u0073",_cfde );_dgbe :=_bd .FindStringSubmatch (string (_cfde ));if len (_dgbe )< 3{_fg .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020U\u006e\u0061\u0062l\u0065\u0020\u0074\u006f \u0066\u0069\u006e\u0064\u0020\u006f\u0062\u006a\u0065\u0063\u0074\u0020\u0073\u0069\u0067\u006e\u0061\u0074\u0075\u0072\u0065\u0020\u0028\u0025\u0073\u0029",string (_cfde ));
return &_gfed ,_b .New ("\u0075\u006e\u0061b\u006c\u0065\u0020\u0074\u006f\u0020\u0064\u0065\u0074\u0065\u0063\u0074\u0020\u0069\u006e\u0064\u0069\u0072\u0065\u0063\u0074\u0020\u006f\u0062\u006a\u0065\u0063\u0074\u0020s\u0069\u0067\u006e\u0061\u0074\u0075\u0072\u0065");
};_dgbea ,_ :=_a .Atoi (_dgbe [1]);_gcbb ,_ :=_a .Atoi (_dgbe [2]);_gfed .ObjectNumber =int64 (_dgbea );_gfed .GenerationNumber =int64 (_gcbb );for {_dggg ,_fda :=_fbf ._eda .Peek (2);if _fda !=nil {return &_gfed ,_fda ;};_fg .Log .Trace ("I\u006ed\u002e\u0020\u0070\u0065\u0065\u006b\u003a\u0020%\u0073\u0020\u0028\u0025 x\u0029\u0021",string (_dggg ),string (_dggg ));
if _bfb .IsWhiteSpace (_dggg [0]){_fbf .skipSpaces ();}else if _dggg [0]=='%'{_fbf .skipComments ();}else if (_dggg [0]=='<')&&(_dggg [1]=='<'){_fg .Log .Trace ("\u0043\u0061\u006c\u006c\u0020\u0050\u0061\u0072\u0073e\u0044\u0069\u0063\u0074");_gfed .PdfObject ,_fda =_fbf .parseDict ();
_fg .Log .Trace ("\u0045\u004f\u0046\u0020Ca\u006c\u006c\u0020\u0050\u0061\u0072\u0073\u0065\u0044\u0069\u0063\u0074\u003a\u0020%\u0076",_fda );if _fda !=nil {return &_gfed ,_fda ;};_fg .Log .Trace ("\u0050\u0061\u0072\u0073\u0065\u0064\u0020\u0064\u0069\u0063t\u0069\u006f\u006e\u0061\u0072\u0079\u002e.\u002e\u0020\u0066\u0069\u006e\u0069\u0073\u0068\u0065\u0064\u002e");
}else if (_dggg [0]=='/')||(_dggg [0]=='(')||(_dggg [0]=='[')||(_dggg [0]=='<'){_gfed .PdfObject ,_fda =_fbf .parseObject ();if _fda !=nil {return &_gfed ,_fda ;};_fg .Log .Trace ("P\u0061\u0072\u0073\u0065\u0064\u0020o\u0062\u006a\u0065\u0063\u0074\u0020\u002e\u002e\u002e \u0066\u0069\u006ei\u0073h\u0065\u0064\u002e");
}else {if _dggg [0]=='e'{_gfa ,_cdf :=_fbf .readTextLine ();if _cdf !=nil {return nil ,_cdf ;};if len (_gfa )>=6&&_gfa [0:6]=="\u0065\u006e\u0064\u006f\u0062\u006a"{break ;};}else if _dggg [0]=='s'{_dggg ,_ =_fbf ._eda .Peek (10);if string (_dggg [:6])=="\u0073\u0074\u0072\u0065\u0061\u006d"{_bcb :=6;
if len (_dggg )> 6{if _bfb .IsWhiteSpace (_dggg [_bcb ])&&_dggg [_bcb ]!='\r'&&_dggg [_bcb ]!='\n'{_fg .Log .Debug ("\u004e\u006fn\u002d\u0063\u006f\u006e\u0066\u006f\u0072\u006d\u0061\u006e\u0074\u0020\u0046\u0044\u0046\u0020\u006e\u006f\u0074 \u0065\u006e\u0064\u0069\u006e\u0067 \u0073\u0074\u0072\u0065\u0061\u006d\u0020\u006c\u0069\u006e\u0065\u0020\u0070\u0072o\u0070\u0065r\u006c\u0079\u0020\u0077i\u0074\u0068\u0020\u0045\u004fL\u0020\u006d\u0061\u0072\u006b\u0065\u0072");
_bcb ++;};if _dggg [_bcb ]=='\r'{_bcb ++;if _dggg [_bcb ]=='\n'{_bcb ++;};}else if _dggg [_bcb ]=='\n'{_bcb ++;};};_fbf ._eda .Discard (_bcb );_afe ,_gef :=_gfed .PdfObject .(*_bfb .PdfObjectDictionary );if !_gef {return nil ,_b .New ("\u0073\u0074\u0072\u0065\u0061\u006d\u0020\u006f\u0062\u006a\u0065\u0063\u0074\u0020\u006di\u0073s\u0069\u006e\u0067\u0020\u0064\u0069\u0063\u0074\u0069\u006f\u006e\u0061\u0072\u0079");
};_fg .Log .Trace ("\u0053\u0074\u0072\u0065\u0061\u006d\u0020\u0064\u0069c\u0074\u0020\u0025\u0073",_afe );_fbd ,_bfg :=_afe .Get ("\u004c\u0065\u006e\u0067\u0074\u0068").(*_bfb .PdfObjectInteger );if !_bfg {return nil ,_b .New ("\u0073\u0074re\u0061\u006d\u0020l\u0065\u006e\u0067\u0074h n\u0065ed\u0073\u0020\u0074\u006f\u0020\u0062\u0065 a\u006e\u0020\u0069\u006e\u0074\u0065\u0067e\u0072");
};_ddd :=*_fbd ;if _ddd < 0{return nil ,_b .New ("\u0073\u0074\u0072\u0065\u0061\u006d\u0020\u006e\u0065\u0065\u0064\u0073\u0020\u0074\u006f \u0062e\u0020\u006c\u006f\u006e\u0067\u0065\u0072\u0020\u0074\u0068\u0061\u006e\u0020\u0030");};if int64 (_ddd )> _fbf ._ef {_fg .Log .Debug ("\u0045\u0052R\u004f\u0052\u003a\u0020\u0053t\u0072\u0065\u0061\u006d\u0020l\u0065\u006e\u0067\u0074\u0068\u0020\u0063\u0061\u006e\u006e\u006f\u0074\u0020\u0062\u0065\u0020\u006c\u0061\u0072\u0067\u0065\u0072\u0020\u0074\u0068\u0061\u006e\u0020\u0066\u0069\u006c\u0065\u0020\u0073\u0069\u007a\u0065");
return nil ,_b .New ("\u0069n\u0076\u0061l\u0069\u0064\u0020\u0073t\u0072\u0065\u0061m\u0020\u006c\u0065\u006e\u0067\u0074\u0068\u002c\u0020la\u0072\u0067\u0065r\u0020\u0074h\u0061\u006e\u0020\u0066\u0069\u006ce\u0020\u0073i\u007a\u0065");};_cbd :=make ([]byte ,_ddd );
_ ,_fda =_fbf .readAtLeast (_cbd ,int (_ddd ));if _fda !=nil {_fg .Log .Debug ("E\u0052\u0052\u004f\u0052 s\u0074r\u0065\u0061\u006d\u0020\u0028%\u0064\u0029\u003a\u0020\u0025\u0058",len (_cbd ),_cbd );_fg .Log .Debug ("\u0045R\u0052\u004f\u0052\u003a\u0020\u0025v",_fda );
return nil ,_fda ;};_dgad :=_bfb .PdfObjectStream {};_dgad .Stream =_cbd ;_dgad .PdfObjectDictionary =_gfed .PdfObject .(*_bfb .PdfObjectDictionary );_dgad .ObjectNumber =_gfed .ObjectNumber ;_dgad .GenerationNumber =_gfed .GenerationNumber ;_fbf .skipSpaces ();
_fbf ._eda .Discard (9);_fbf .skipSpaces ();return &_dgad ,nil ;};};_gfed .PdfObject ,_fda =_fbf .parseObject ();return &_gfed ,_fda ;};};_fg .Log .Trace ("\u0052\u0065\u0074\u0075rn\u0069\u006e\u0067\u0020\u0069\u006e\u0064\u0069\u0072\u0065\u0063\u0074\u0021");
return &_gfed ,nil ;};var _fa =_d .MustCompile ("\u0025F\u0044F\u002d\u0028\u005c\u0064\u0029\u005c\u002e\u0028\u005c\u0064\u0029");func _gga (_ecgc _aab .ReadSeeker )(*fdfParser ,error ){_bdg :=&fdfParser {};_bdg ._fga =_ecgc ;_bdg ._cgea =map[int64 ]_bfb .PdfObject {};
_ggd ,_daff ,_ceb :=_bdg .parseFdfVersion ();if _ceb !=nil {_fg .Log .Error ("U\u006e\u0061\u0062\u006c\u0065\u0020t\u006f\u0020\u0070\u0061\u0072\u0073\u0065\u0020\u0076e\u0072\u0073\u0069o\u006e:\u0020\u0025\u0076",_ceb );return nil ,_ceb ;};_bdg ._ba =_ggd ;
_bdg ._add =_daff ;_ceb =_bdg .parse ();return _bdg ,_ceb ;};func (_bdc *fdfParser )skipSpaces ()(int ,error ){_ffg :=0;for {_ae ,_ce :=_bdc ._eda .ReadByte ();if _ce !=nil {return 0,_ce ;};if _bfb .IsWhiteSpace (_ae ){_ffg ++;}else {_bdc ._eda .UnreadByte ();
break ;};};return _ffg ,nil ;};func (_daa *fdfParser )parseNull ()(_bfb .PdfObjectNull ,error ){_ ,_fgf :=_daa ._eda .Discard (4);return _bfb .PdfObjectNull {},_fgf ;};func (_ccf *fdfParser )parseHexString ()(*_bfb .PdfObjectString ,error ){_ccf ._eda .ReadByte ();
var _afb _dg .Buffer ;for {_bfa ,_gec :=_ccf ._eda .Peek (1);if _gec !=nil {return _bfb .MakeHexString (""),_gec ;};if _bfa [0]=='>'{_ccf ._eda .ReadByte ();break ;};_gecb ,_ :=_ccf ._eda .ReadByte ();if !_bfb .IsWhiteSpace (_gecb ){_afb .WriteByte (_gecb );
};};if _afb .Len ()%2==1{_afb .WriteRune ('0');};_dcb ,_ced :=_c .DecodeString (_afb .String ());if _ced !=nil {_fg .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u0020\u0050\u0061\u0072\u0073\u0069\u006e\u0067\u0020\u0068\u0065\u0078\u0020\u0073\u0074r\u0069\u006e\u0067\u003a\u0020\u0027\u0025\u0073\u0027 \u002d\u0020\u0072\u0065\u0074\u0075\u0072\u006e\u0069\u006e\u0067\u0020\u0061n\u0020\u0065\u006d\u0070\u0074\u0079 \u0073\u0074\u0072i\u006e\u0067",_afb .String ());
return _bfb .MakeHexString (""),nil ;};return _bfb .MakeHexString (string (_dcb )),nil ;};func _cgg (_abe string )(_bfb .PdfObjectReference ,error ){_eec :=_bfb .PdfObjectReference {};_fdd :=_fc .FindStringSubmatch (_abe );if len (_fdd )< 3{_fg .Log .Debug ("\u0045\u0072\u0072or\u0020\u0070\u0061\u0072\u0073\u0069\u006e\u0067\u0020\u0072\u0065\u0066\u0065\u0072\u0065\u006e\u0063\u0065");
return _eec ,_b .New ("\u0075n\u0061\u0062\u006c\u0065 \u0074\u006f\u0020\u0070\u0061r\u0073e\u0020r\u0065\u0066\u0065\u0072\u0065\u006e\u0063e");};_gfe ,_ebc :=_a .Atoi (_fdd [1]);if _ebc !=nil {_fg .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0070a\u0072\u0073\u0069n\u0067\u0020\u006fb\u006a\u0065c\u0074\u0020\u006e\u0075\u006d\u0062e\u0072 '\u0025\u0073\u0027\u0020\u002d\u0020\u0055\u0073\u0069\u006e\u0067\u0020\u006f\u0062\u006a\u0065\u0063\u0074\u0020\u006e\u0075\u006d\u0020\u003d\u0020\u0030",_fdd [1]);
return _eec ,nil ;};_eec .ObjectNumber =int64 (_gfe );_fff ,_ebc :=_a .Atoi (_fdd [2]);if _ebc !=nil {_fg .Log .Debug ("\u0045\u0072r\u006f\u0072\u0020\u0070\u0061r\u0073\u0069\u006e\u0067\u0020g\u0065\u006e\u0065\u0072\u0061\u0074\u0069\u006f\u006e\u0020\u006e\u0075\u006d\u0062\u0065\u0072\u0020\u0027\u0025\u0073\u0027\u0020\u002d\u0020\u0055\u0073\u0069\u006e\u0067\u0020\u0067\u0065\u006e\u0020\u003d\u0020\u0030",_fdd [2]);
return _eec ,nil ;};_eec .GenerationNumber =int64 (_fff );return _eec ,nil ;};