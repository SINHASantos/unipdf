//
// Copyright 2020 FoxyUtils ehf. All rights reserved.
//
// This is a commercial product and requires a license to operate.
// A trial license can be obtained at https://unidoc.io
//
// DO NOT EDIT: generated by unitwist Go source code obfuscator.
//
// Use of this source code is governed by the UniDoc End User License Agreement
// terms that can be accessed at https://unidoc.io/eula/

// Package fdf provides support for loading form field data from Form Field Data (FDF) files.
package fdf ;import (_fe "bufio";_ba "bytes";_ff "encoding/hex";_b "errors";_c "fmt";_cd "github.com/unidoc/unipdf/v4/common";_de "github.com/unidoc/unipdf/v4/core";_g "io";_d "os";_bd "regexp";_a "sort";_fa "strconv";_f "strings";);var _cb =_bd .MustCompile ("\u0025F\u0044F\u002d\u0028\u005c\u0064\u0029\u005c\u002e\u0028\u005c\u0064\u0029");
func (_da *fdfParser )readTextLine ()(string ,error ){var _gdb _ba .Buffer ;for {_gae ,_ffa :=_da ._ccd .Peek (1);if _ffa !=nil {_cd .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0025\u0073",_ffa .Error ());return _gdb .String (),_ffa ;};if (_gae [0]!='\r')&&(_gae [0]!='\n'){_ce ,_ :=_da ._ccd .ReadByte ();
_gdb .WriteByte (_ce );}else {break ;};};return _gdb .String (),nil ;};var _dcc =_bd .MustCompile ("\u0025\u0025\u0045O\u0046");func (_dbf *fdfParser )parseObject ()(_de .PdfObject ,error ){_cd .Log .Trace ("\u0052e\u0061d\u0020\u0064\u0069\u0072\u0065c\u0074\u0020o\u0062\u006a\u0065\u0063\u0074");
_dbf .skipSpaces ();for {_bfeb ,_beg :=_dbf ._ccd .Peek (2);if _beg !=nil {return nil ,_beg ;};_cd .Log .Trace ("\u0050e\u0065k\u0020\u0073\u0074\u0072\u0069\u006e\u0067\u003a\u0020\u0025\u0073",string (_bfeb ));if _bfeb [0]=='/'{_gafg ,_cac :=_dbf .parseName ();
_cd .Log .Trace ("\u002d\u003e\u004ea\u006d\u0065\u003a\u0020\u0027\u0025\u0073\u0027",_gafg );return &_gafg ,_cac ;}else if _bfeb [0]=='('{_cd .Log .Trace ("\u002d>\u0053\u0074\u0072\u0069\u006e\u0067!");return _dbf .parseString ();}else if _bfeb [0]=='['{_cd .Log .Trace ("\u002d\u003e\u0041\u0072\u0072\u0061\u0079\u0021");
return _dbf .parseArray ();}else if (_bfeb [0]=='<')&&(_bfeb [1]=='<'){_cd .Log .Trace ("\u002d>\u0044\u0069\u0063\u0074\u0021");return _dbf .parseDict ();}else if _bfeb [0]=='<'{_cd .Log .Trace ("\u002d\u003e\u0048\u0065\u0078\u0020\u0073\u0074\u0072\u0069\u006e\u0067\u0021");
return _dbf .parseHexString ();}else if _bfeb [0]=='%'{_dbf .readComment ();_dbf .skipSpaces ();}else {_cd .Log .Trace ("\u002d\u003eN\u0075\u006d\u0062e\u0072\u0020\u006f\u0072\u0020\u0072\u0065\u0066\u003f");_bfeb ,_ =_dbf ._ccd .Peek (15);_adf :=string (_bfeb );
_cd .Log .Trace ("\u0050\u0065\u0065k\u0020\u0073\u0074\u0072\u003a\u0020\u0025\u0073",_adf );if (len (_adf )> 3)&&(_adf [:4]=="\u006e\u0075\u006c\u006c"){_gdg ,_efaa :=_dbf .parseNull ();return &_gdg ,_efaa ;}else if (len (_adf )> 4)&&(_adf [:5]=="\u0066\u0061\u006cs\u0065"){_caeb ,_eeb :=_dbf .parseBool ();
return &_caeb ,_eeb ;}else if (len (_adf )> 3)&&(_adf [:4]=="\u0074\u0072\u0075\u0065"){_cba ,_ceb :=_dbf .parseBool ();return &_cba ,_ceb ;};_ggf :=_edd .FindStringSubmatch (_adf );if len (_ggf )> 1{_bfeb ,_ =_dbf ._ccd .ReadBytes ('R');_cd .Log .Trace ("\u002d\u003e\u0020\u0021\u0052\u0065\u0066\u003a\u0020\u0027\u0025\u0073\u0027",string (_bfeb [:]));
_bfef ,_fdc :=_ac (string (_bfeb ));return &_bfef ,_fdc ;};_fbd :=_babf .FindStringSubmatch (_adf );if len (_fbd )> 1{_cd .Log .Trace ("\u002d\u003e\u0020\u004e\u0075\u006d\u0062\u0065\u0072\u0021");return _dbf .parseNumber ();};_fbd =_aggb .FindStringSubmatch (_adf );
if len (_fbd )> 1{_cd .Log .Trace ("\u002d\u003e\u0020\u0045xp\u006f\u006e\u0065\u006e\u0074\u0069\u0061\u006c\u0020\u004e\u0075\u006d\u0062\u0065r\u0021");_cd .Log .Trace ("\u0025\u0020\u0073",_fbd );return _dbf .parseNumber ();};_cd .Log .Debug ("\u0045R\u0052\u004f\u0052\u0020U\u006e\u006b\u006e\u006f\u0077n\u0020(\u0070e\u0065\u006b\u0020\u0022\u0025\u0073\u0022)",_adf );
return nil ,_b .New ("\u006f\u0062\u006a\u0065\u0063t\u0020\u0070\u0061\u0072\u0073\u0069\u006e\u0067\u0020\u0065\u0072\u0072\u006fr\u0020\u002d\u0020\u0075\u006e\u0065\u0078\u0070\u0065\u0063\u0074\u0065\u0064\u0020\u0070\u0061\u0074\u0074\u0065\u0072\u006e");
};};};

// Root returns the Root of the FDF document.
func (_dgc *fdfParser )Root ()(*_de .PdfObjectDictionary ,error ){if _dgc ._cbg !=nil {if _dde ,_ecdd :=_dgc .trace (_dgc ._cbg .Get ("\u0052\u006f\u006f\u0074")).(*_de .PdfObjectDictionary );_ecdd {if _bcda ,_eef :=_dgc .trace (_dde .Get ("\u0046\u0044\u0046")).(*_de .PdfObjectDictionary );
_eef {return _bcda ,nil ;};};};var _gfg []int64 ;for _cag :=range _dgc ._ad {_gfg =append (_gfg ,_cag );};_a .Slice (_gfg ,func (_cacd ,_effc int )bool {return _gfg [_cacd ]< _gfg [_effc ]});for _ ,_eea :=range _gfg {_bfbc :=_dgc ._ad [_eea ];if _abf ,_fgdg :=_dgc .trace (_bfbc ).(*_de .PdfObjectDictionary );
_fgdg {if _edda ,_geg :=_dgc .trace (_abf .Get ("\u0046\u0044\u0046")).(*_de .PdfObjectDictionary );_geg {return _edda ,nil ;};};};return nil ,_b .New ("\u0046\u0044\u0046\u0020\u006e\u006f\u0074\u0020\u0066\u006f\u0075\u006e\u0064");};func (_fae *fdfParser )parseHexString ()(*_de .PdfObjectString ,error ){_fae ._ccd .ReadByte ();
var _aba _ba .Buffer ;for {_gce ,_dbga :=_fae ._ccd .Peek (1);if _dbga !=nil {return _de .MakeHexString (""),_dbga ;};if _gce [0]=='>'{_fae ._ccd .ReadByte ();break ;};_fbc ,_ :=_fae ._ccd .ReadByte ();if !_de .IsWhiteSpace (_fbc ){_aba .WriteByte (_fbc );
};};if _aba .Len ()%2==1{_aba .WriteRune ('0');};_bbd ,_ecc :=_ff .DecodeString (_aba .String ());if _ecc !=nil {_cd .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u0020\u0050\u0061\u0072\u0073\u0069\u006e\u0067\u0020\u0068\u0065\u0078\u0020\u0073\u0074r\u0069\u006e\u0067\u003a\u0020\u0027\u0025\u0073\u0027 \u002d\u0020\u0072\u0065\u0074\u0075\u0072\u006e\u0069\u006e\u0067\u0020\u0061n\u0020\u0065\u006d\u0070\u0074\u0079 \u0073\u0074\u0072i\u006e\u0067",_aba .String ());
return _de .MakeHexString (""),nil ;};return _de .MakeHexString (string (_bbd )),nil ;};func (_fba *fdfParser )skipSpaces ()(int ,error ){_bg :=0;for {_gfbb ,_cg :=_fba ._ccd .ReadByte ();if _cg !=nil {return 0,_cg ;};if _de .IsWhiteSpace (_gfbb ){_bg ++;
}else {_fba ._ccd .UnreadByte ();break ;};};return _bg ,nil ;};func (_ffb *fdfParser )seekFdfVersionTopDown ()(int ,int ,error ){_ffb ._eg .Seek (0,_g .SeekStart );_ffb ._ccd =_fe .NewReader (_ffb ._eg );_bgb :=20;_def :=make ([]byte ,_bgb );for {_cgef ,_bafc :=_ffb ._ccd .ReadByte ();
if _bafc !=nil {if _bafc ==_g .EOF {break ;}else {return 0,0,_bafc ;};};if _de .IsDecimalDigit (_cgef )&&_def [_bgb -1]=='.'&&_de .IsDecimalDigit (_def [_bgb -2])&&_def [_bgb -3]=='-'&&_def [_bgb -4]=='F'&&_def [_bgb -5]=='D'&&_def [_bgb -6]=='P'{_acd :=int (_def [_bgb -2]-'0');
_fbga :=int (_cgef -'0');return _acd ,_fbga ,nil ;};_def =append (_def [1:_bgb ],_cgef );};return 0,0,_b .New ("\u0076\u0065\u0072\u0073\u0069\u006f\u006e\u0020\u006e\u006f\u0074\u0020f\u006f\u0075\u006e\u0064");};func (_bdg *fdfParser )parseBool ()(_de .PdfObjectBool ,error ){_bed ,_cgd :=_bdg ._ccd .Peek (4);
if _cgd !=nil {return _de .PdfObjectBool (false ),_cgd ;};if (len (_bed )>=4)&&(string (_bed [:4])=="\u0074\u0072\u0075\u0065"){_bdg ._ccd .Discard (4);return _de .PdfObjectBool (true ),nil ;};_bed ,_cgd =_bdg ._ccd .Peek (5);if _cgd !=nil {return _de .PdfObjectBool (false ),_cgd ;
};if (len (_bed )>=5)&&(string (_bed [:5])=="\u0066\u0061\u006cs\u0065"){_bdg ._ccd .Discard (5);return _de .PdfObjectBool (false ),nil ;};return _de .PdfObjectBool (false ),_b .New ("\u0075n\u0065\u0078\u0070\u0065c\u0074\u0065\u0064\u0020\u0062o\u006fl\u0065a\u006e\u0020\u0073\u0074\u0072\u0069\u006eg");
};

// LoadFromPath loads FDF form data from file path `fdfPath`.
func LoadFromPath (fdfPath string )(*Data ,error ){_bf ,_bad :=_d .Open (fdfPath );if _bad !=nil {return nil ,_bad ;};defer _bf .Close ();return Load (_bf );};func (_cfb *fdfParser )setFileOffset (_bb int64 ){_cfb ._eg .Seek (_bb ,_g .SeekStart );_cfb ._ccd =_fe .NewReader (_cfb ._eg );
};func (_gfbg *fdfParser )parseNull ()(_de .PdfObjectNull ,error ){_ ,_bgdd :=_gfbg ._ccd .Discard (4);return _de .PdfObjectNull {},_bgdd ;};func (_fea *fdfParser )readComment ()(string ,error ){var _efa _ba .Buffer ;_ ,_dcb :=_fea .skipSpaces ();if _dcb !=nil {return _efa .String (),_dcb ;
};_eee :=true ;for {_fcc ,_dec :=_fea ._ccd .Peek (1);if _dec !=nil {_cd .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0025\u0073",_dec .Error ());return _efa .String (),_dec ;};if _eee &&_fcc [0]!='%'{return _efa .String (),_b .New ("c\u006f\u006d\u006d\u0065\u006e\u0074 \u0073\u0068\u006f\u0075\u006c\u0064\u0020\u0073\u0074a\u0072\u0074\u0020w\u0069t\u0068\u0020\u0025");
};_eee =false ;if (_fcc [0]!='\r')&&(_fcc [0]!='\n'){_ggg ,_ :=_fea ._ccd .ReadByte ();_efa .WriteByte (_ggg );}else {break ;};};return _efa .String (),nil ;};func (_decc *fdfParser )parse ()error {_decc ._eg .Seek (0,_g .SeekStart );_decc ._ccd =_fe .NewReader (_decc ._eg );
for {_decc .skipComments ();_dead ,_bade :=_decc ._ccd .Peek (20);if _bade !=nil {_cd .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0046\u0061\u0069\u006c\u0020\u0074\u006f\u0020r\u0065a\u0064\u0020\u0069\u006e\u0064\u0069\u0072\u0065\u0063\u0074\u0020\u006f\u0062\u006a");
return _bade ;};if _f .HasPrefix (string (_dead ),"\u0074r\u0061\u0069\u006c\u0065\u0072"){_decc ._ccd .Discard (7);_decc .skipSpaces ();_decc .skipComments ();_eeed ,_ :=_decc .parseDict ();_decc ._cbg =_eeed ;break ;};_cfbf :=_edc .FindStringSubmatchIndex (string (_dead ));
if len (_cfbf )< 6{_cd .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020U\u006e\u0061\u0062l\u0065\u0020\u0074\u006f \u0066\u0069\u006e\u0064\u0020\u006f\u0062\u006a\u0065\u0063\u0074\u0020\u0073\u0069\u0067\u006e\u0061\u0074\u0075\u0072\u0065\u0020\u0028\u0025\u0073\u0029",string (_dead ));
return _b .New ("\u0075\u006e\u0061b\u006c\u0065\u0020\u0074\u006f\u0020\u0064\u0065\u0074\u0065\u0063\u0074\u0020\u0069\u006e\u0064\u0069\u0072\u0065\u0063\u0074\u0020\u006f\u0062\u006a\u0065\u0063\u0074\u0020s\u0069\u0067\u006e\u0061\u0074\u0075\u0072\u0065");
};_fbg ,_bade :=_decc .parseIndirectObject ();if _bade !=nil {return _bade ;};switch _bbc :=_fbg .(type ){case *_de .PdfIndirectObject :_decc ._ad [_bbc .ObjectNumber ]=_bbc ;case *_de .PdfObjectStream :_decc ._ad [_bbc .ObjectNumber ]=_bbc ;default:return _b .New ("\u0074\u0079\u0070\u0065\u0020\u0065\u0072\u0072\u006f\u0072");
};};return nil ;};func _eeg (_bgf _g .ReadSeeker )(*fdfParser ,error ){_baf :=&fdfParser {};_baf ._eg =_bgf ;_baf ._ad =map[int64 ]_de .PdfObject {};_abcb ,_afg ,_cfba :=_baf .parseFdfVersion ();if _cfba !=nil {_cd .Log .Error ("U\u006e\u0061\u0062\u006c\u0065\u0020t\u006f\u0020\u0070\u0061\u0072\u0073\u0065\u0020\u0076e\u0072\u0073\u0069o\u006e:\u0020\u0025\u0076",_cfba );
return nil ,_cfba ;};_baf ._fef =_abcb ;_baf ._ec =_afg ;_cfba =_baf .parse ();return _baf ,_cfba ;};func (_ef *fdfParser )readAtLeast (_db []byte ,_dgg int )(int ,error ){_age :=_dgg ;_cfa :=0;_gfb :=0;for _age > 0{_gef ,_fb :=_ef ._ccd .Read (_db [_cfa :]);
if _fb !=nil {_cd .Log .Debug ("\u0045\u0052\u0052O\u0052\u0020\u0046\u0061i\u006c\u0065\u0064\u0020\u0072\u0065\u0061d\u0069\u006e\u0067\u0020\u0028\u0025\u0064\u003b\u0025\u0064\u0029\u0020\u0025\u0073",_gef ,_gfb ,_fb .Error ());return _cfa ,_b .New ("\u0066\u0061\u0069\u006c\u0065\u0064\u0020\u0072\u0065a\u0064\u0069\u006e\u0067");
};_gfb ++;_cfa +=_gef ;_age -=_gef ;};return _cfa ,nil ;};var _babf =_bd .MustCompile ("\u005e\u005b\u005c\u002b\u002d\u002e\u005d\u002a\u0028\u005b\u0030\u002d9\u002e\u005d\u002b\u0029");

// FieldValues implements interface model.FieldValueProvider.
// Returns a map of field names to values (PdfObjects).
func (fdf *Data )FieldValues ()(map[string ]_de .PdfObject ,error ){_cc ,_dg :=fdf .FieldDictionaries ();if _dg !=nil {return nil ,_dg ;};var _agg []string ;for _gd :=range _cc {_agg =append (_agg ,_gd );};_a .Strings (_agg );_gaf :=map[string ]_de .PdfObject {};
for _ ,_bab :=range _agg {_gg :=_cc [_bab ];_ddd :=_de .TraceToDirectObject (_gg .Get ("\u0056"));_gaf [_bab ]=_ddd ;};return _gaf ,nil ;};func (_cfc *fdfParser )parseName ()(_de .PdfObjectName ,error ){var _gcd _ba .Buffer ;_ebb :=false ;for {_bde ,_gdd :=_cfc ._ccd .Peek (1);
if _gdd ==_g .EOF {break ;};if _gdd !=nil {return _de .PdfObjectName (_gcd .String ()),_gdd ;};if !_ebb {if _bde [0]=='/'{_ebb =true ;_cfc ._ccd .ReadByte ();}else if _bde [0]=='%'{_cfc .readComment ();_cfc .skipSpaces ();}else {_cd .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u0020N\u0061\u006d\u0065\u0020\u0073\u0074\u0061\u0072\u0074\u0069\u006e\u0067\u0020w\u0069\u0074\u0068\u0020\u0025\u0073\u0020(\u0025\u0020\u0078\u0029",_bde ,_bde );
return _de .PdfObjectName (_gcd .String ()),_c .Errorf ("\u0069n\u0076a\u006c\u0069\u0064\u0020\u006ea\u006d\u0065:\u0020\u0028\u0025\u0063\u0029",_bde [0]);};}else {if _de .IsWhiteSpace (_bde [0]){break ;}else if (_bde [0]=='/')||(_bde [0]=='[')||(_bde [0]=='(')||(_bde [0]==']')||(_bde [0]=='<')||(_bde [0]=='>'){break ;
}else if _bde [0]=='#'{_babe ,_gddg :=_cfc ._ccd .Peek (3);if _gddg !=nil {return _de .PdfObjectName (_gcd .String ()),_gddg ;};_cfc ._ccd .Discard (3);_dbg ,_gddg :=_ff .DecodeString (string (_babe [1:3]));if _gddg !=nil {return _de .PdfObjectName (_gcd .String ()),_gddg ;
};_gcd .Write (_dbg );}else {_cfd ,_ :=_cfc ._ccd .ReadByte ();_gcd .WriteByte (_cfd );};};};return _de .PdfObjectName (_gcd .String ()),nil ;};

// FieldDictionaries returns a map of field names to field dictionaries.
func (fdf *Data )FieldDictionaries ()(map[string ]*_de .PdfObjectDictionary ,error ){_ga :=map[string ]*_de .PdfObjectDictionary {};for _ab :=0;_ab < fdf ._ge .Len ();_ab ++{_dfg ,_ded :=_de .GetDict (fdf ._ge .Get (_ab ));if _ded {_dc ,_ :=_de .GetString (_dfg .Get ("\u0054"));
if _dc !=nil {_ga [_dc .Str ()]=_dfg ;};};};return _ga ,nil ;};type fdfParser struct{_fef int ;_ec int ;_ad map[int64 ]_de .PdfObject ;_eg _g .ReadSeeker ;_ccd *_fe .Reader ;_gdf int64 ;_cbg *_de .PdfObjectDictionary ;};func (_dfd *fdfParser )getFileOffset ()int64 {_fg ,_ :=_dfd ._eg .Seek (0,_g .SeekCurrent );
_fg -=int64 (_dfd ._ccd .Buffered ());return _fg ;};func (_bfe *fdfParser )parseArray ()(*_de .PdfObjectArray ,error ){_bdb :=_de .MakeArray ();_bfe ._ccd .ReadByte ();for {_bfe .skipSpaces ();_cge ,_cae :=_bfe ._ccd .Peek (1);if _cae !=nil {return _bdb ,_cae ;
};if _cge [0]==']'{_bfe ._ccd .ReadByte ();break ;};_dea ,_cae :=_bfe .parseObject ();if _cae !=nil {return _bdb ,_cae ;};_bdb .Append (_dea );};return _bdb ,nil ;};func _dabe (_dae string )(*fdfParser ,error ){_dfc :=fdfParser {};_aed :=[]byte (_dae );
_bfg :=_ba .NewReader (_aed );_dfc ._eg =_bfg ;_dfc ._ad =map[int64 ]_de .PdfObject {};_eff :=_fe .NewReader (_bfg );_dfc ._ccd =_eff ;_dfc ._gdf =int64 (len (_dae ));return &_dfc ,_dfc .parse ();};func (_aeb *fdfParser )parseString ()(*_de .PdfObjectString ,error ){_aeb ._ccd .ReadByte ();
var _ca _ba .Buffer ;_agc :=1;for {_ead ,_ceg :=_aeb ._ccd .Peek (1);if _ceg !=nil {return _de .MakeString (_ca .String ()),_ceg ;};if _ead [0]=='\\'{_aeb ._ccd .ReadByte ();_ggb ,_eaa :=_aeb ._ccd .ReadByte ();if _eaa !=nil {return _de .MakeString (_ca .String ()),_eaa ;
};if _de .IsOctalDigit (_ggb ){_ccgg ,_cfg :=_aeb ._ccd .Peek (2);if _cfg !=nil {return _de .MakeString (_ca .String ()),_cfg ;};var _aa []byte ;_aa =append (_aa ,_ggb );for _ ,_abb :=range _ccgg {if _de .IsOctalDigit (_abb ){_aa =append (_aa ,_abb );}else {break ;
};};_aeb ._ccd .Discard (len (_aa )-1);_cd .Log .Trace ("\u004e\u0075\u006d\u0065ri\u0063\u0020\u0073\u0074\u0072\u0069\u006e\u0067\u0020\u0022\u0025\u0073\u0022",_aa );_bgd ,_cfg :=_fa .ParseUint (string (_aa ),8,32);if _cfg !=nil {return _de .MakeString (_ca .String ()),_cfg ;
};_ca .WriteByte (byte (_bgd ));continue ;};switch _ggb {case 'n':_ca .WriteRune ('\n');case 'r':_ca .WriteRune ('\r');case 't':_ca .WriteRune ('\t');case 'b':_ca .WriteRune ('\b');case 'f':_ca .WriteRune ('\f');case '(':_ca .WriteRune ('(');case ')':_ca .WriteRune (')');
case '\\':_ca .WriteRune ('\\');};continue ;}else if _ead [0]=='('{_agc ++;}else if _ead [0]==')'{_agc --;if _agc ==0{_aeb ._ccd .ReadByte ();break ;};};_ebbe ,_ :=_aeb ._ccd .ReadByte ();_ca .WriteByte (_ebbe );};return _de .MakeString (_ca .String ()),nil ;
};func (_dbce *fdfParser )trace (_agb _de .PdfObject )_de .PdfObject {switch _gff :=_agb .(type ){case *_de .PdfObjectReference :_fde ,_ade :=_dbce ._ad [_gff .ObjectNumber ].(*_de .PdfIndirectObject );if _ade {return _fde .PdfObject ;};_cd .Log .Debug ("\u0054\u0079\u0070\u0065\u0020\u0065\u0072\u0072\u006f\u0072");
return nil ;case *_de .PdfIndirectObject :return _gff .PdfObject ;};return _agb ;};func (_ecg *fdfParser )seekToEOFMarker (_adg int64 )error {_cgc :=int64 (0);_ggbb :=int64 (1000);for _cgc < _adg {if _adg <=(_ggbb +_cgc ){_ggbb =_adg -_cgc ;};_ ,_aeeg :=_ecg ._eg .Seek (-_cgc -_ggbb ,_g .SeekEnd );
if _aeeg !=nil {return _aeeg ;};_bcc :=make ([]byte ,_ggbb );_ecg ._eg .Read (_bcc );_cd .Log .Trace ("\u004c\u006f\u006f\u006bi\u006e\u0067\u0020\u0066\u006f\u0072\u0020\u0045\u004f\u0046 \u006da\u0072\u006b\u0065\u0072\u003a\u0020\u0022%\u0073\u0022",string (_bcc ));
_gfd :=_dcc .FindAllStringIndex (string (_bcc ),-1);if _gfd !=nil {_fag :=_gfd [len (_gfd )-1];_cd .Log .Trace ("\u0049\u006e\u0064\u003a\u0020\u0025\u0020\u0064",_gfd );_ecg ._eg .Seek (-_cgc -_ggbb +int64 (_fag [0]),_g .SeekEnd );return nil ;};_cd .Log .Debug ("\u0057\u0061\u0072\u006e\u0069\u006eg\u003a\u0020\u0045\u004f\u0046\u0020\u006d\u0061\u0072\u006b\u0065\u0072\u0020\u006e\u006f\u0074\u0020\u0066\u006f\u0075n\u0064\u0021\u0020\u002d\u0020\u0063\u006f\u006e\u0074\u0069\u006e\u0075\u0065\u0020s\u0065e\u006b\u0069\u006e\u0067");
_cgc +=_ggbb ;};_cd .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u003a\u0020\u0045\u004f\u0046\u0020\u006d\u0061\u0072\u006be\u0072 \u0077\u0061\u0073\u0020\u006e\u006f\u0074\u0020\u0066\u006f\u0075\u006e\u0064\u002e");return _b .New ("\u0045\u004f\u0046\u0020\u006e\u006f\u0074\u0020\u0066\u006f\u0075\u006e\u0064");
};

// Data represents forms data format (FDF) file data.
type Data struct{_df *_de .PdfObjectDictionary ;_ge *_de .PdfObjectArray ;};var _edd =_bd .MustCompile ("^\u005c\u0073\u002a\u0028\\d\u002b)\u005c\u0073\u002b\u0028\u005cd\u002b\u0029\u005c\u0073\u002b\u0052");var _aggb =_bd .MustCompile ("\u005e\u005b\u005c+-\u002e\u005d\u002a\u0028\u005b\u0030\u002d\u0039\u002e]\u002b)\u0065[\u005c+\u002d\u002e\u005d\u002a\u0028\u005b\u0030\u002d\u0039\u002e\u005d\u002b\u0029");
func (_bcd *fdfParser )parseNumber ()(_de .PdfObject ,error ){return _de .ParseNumber (_bcd ._ccd )};func (_cbf *fdfParser )parseFdfVersion ()(int ,int ,error ){_cbf ._eg .Seek (0,_g .SeekStart );_aea :=20;_bfb :=make ([]byte ,_aea );_cbf ._eg .Read (_bfb );
_ccb :=_cb .FindStringSubmatch (string (_bfb ));if len (_ccb )< 3{_dgee ,_bdd ,_fad :=_cbf .seekFdfVersionTopDown ();if _fad !=nil {_cd .Log .Debug ("F\u0061\u0069\u006c\u0065\u0064\u0020\u0072\u0065\u0063\u006f\u0076\u0065\u0072\u0079\u0020\u002d\u0020\u0075n\u0061\u0062\u006c\u0065\u0020\u0074\u006f\u0020\u0066\u0069nd\u0020\u0076\u0065r\u0073i\u006f\u006e");
return 0,0,_fad ;};return _dgee ,_bdd ,nil ;};_gbb ,_feag :=_fa .Atoi (_ccb [1]);if _feag !=nil {return 0,0,_feag ;};_fbb ,_feag :=_fa .Atoi (_ccb [2]);if _feag !=nil {return 0,0,_feag ;};_cd .Log .Debug ("\u0046\u0064\u0066\u0020\u0076\u0065\u0072\u0073\u0069\u006f\u006e\u0020%\u0064\u002e\u0025\u0064",_gbb ,_fbb );
return _gbb ,_fbb ,nil ;};func _ac (_ecd string )(_de .PdfObjectReference ,error ){_gec :=_de .PdfObjectReference {};_ccc :=_edd .FindStringSubmatch (_ecd );if len (_ccc )< 3{_cd .Log .Debug ("\u0045\u0072\u0072or\u0020\u0070\u0061\u0072\u0073\u0069\u006e\u0067\u0020\u0072\u0065\u0066\u0065\u0072\u0065\u006e\u0063\u0065");
return _gec ,_b .New ("\u0075n\u0061\u0062\u006c\u0065 \u0074\u006f\u0020\u0070\u0061r\u0073e\u0020r\u0065\u0066\u0065\u0072\u0065\u006e\u0063e");};_efe ,_egd :=_fa .Atoi (_ccc [1]);if _egd !=nil {_cd .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0070a\u0072\u0073\u0069n\u0067\u0020\u006fb\u006a\u0065c\u0074\u0020\u006e\u0075\u006d\u0062e\u0072 '\u0025\u0073\u0027\u0020\u002d\u0020\u0055\u0073\u0069\u006e\u0067\u0020\u006f\u0062\u006a\u0065\u0063\u0074\u0020\u006e\u0075\u006d\u0020\u003d\u0020\u0030",_ccc [1]);
return _gec ,nil ;};_gec .ObjectNumber =int64 (_efe );_dfb ,_egd :=_fa .Atoi (_ccc [2]);if _egd !=nil {_cd .Log .Debug ("\u0045\u0072r\u006f\u0072\u0020\u0070\u0061r\u0073\u0069\u006e\u0067\u0020g\u0065\u006e\u0065\u0072\u0061\u0074\u0069\u006f\u006e\u0020\u006e\u0075\u006d\u0062\u0065\u0072\u0020\u0027\u0025\u0073\u0027\u0020\u002d\u0020\u0055\u0073\u0069\u006e\u0067\u0020\u0067\u0065\u006e\u0020\u003d\u0020\u0030",_ccc [2]);
return _gec ,nil ;};_gec .GenerationNumber =int64 (_dfb );return _gec ,nil ;};

// Load loads FDF form data from `r`.
func Load (r _g .ReadSeeker )(*Data ,error ){_ag ,_eb :=_eeg (r );if _eb !=nil {return nil ,_eb ;};_ed ,_eb :=_ag .Root ();if _eb !=nil {return nil ,_eb ;};_gf ,_gc :=_de .GetArray (_ed .Get ("\u0046\u0069\u0065\u006c\u0064\u0073"));if !_gc {return nil ,_b .New ("\u0066\u0069\u0065\u006c\u0064\u0073\u0020\u006d\u0069s\u0073\u0069\u006e\u0067");
};return &Data {_ge :_gf ,_df :_ed },nil ;};var _edc =_bd .MustCompile ("\u0028\u005c\u0064\u002b)\\\u0073\u002b\u0028\u005c\u0064\u002b\u0029\u005c\u0073\u002b\u006f\u0062\u006a");func (_cee *fdfParser )parseDict ()(*_de .PdfObjectDictionary ,error ){_cd .Log .Trace ("\u0052\u0065\u0061\u0064\u0069\u006e\u0067\u0020\u0046\u0044\u0046\u0020D\u0069\u0063\u0074\u0021");
_bbe :=_de .MakeDict ();_dge ,_ :=_cee ._ccd .ReadByte ();if _dge !='<'{return nil ,_b .New ("\u0069\u006e\u0076a\u006c\u0069\u0064\u0020\u0064\u0069\u0063\u0074");};_dge ,_ =_cee ._ccd .ReadByte ();if _dge !='<'{return nil ,_b .New ("\u0069\u006e\u0076a\u006c\u0069\u0064\u0020\u0064\u0069\u0063\u0074");
};for {_cee .skipSpaces ();_cee .skipComments ();_dcd ,_dbe :=_cee ._ccd .Peek (2);if _dbe !=nil {return nil ,_dbe ;};_cd .Log .Trace ("D\u0069c\u0074\u0020\u0070\u0065\u0065\u006b\u003a\u0020%\u0073\u0020\u0028\u0025 x\u0029\u0021",string (_dcd ),string (_dcd ));
if (_dcd [0]=='>')&&(_dcd [1]=='>'){_cd .Log .Trace ("\u0045\u004f\u0046\u0020\u0064\u0069\u0063\u0074\u0069o\u006e\u0061\u0072\u0079");_cee ._ccd .ReadByte ();_cee ._ccd .ReadByte ();break ;};_cd .Log .Trace ("\u0050a\u0072s\u0065\u0020\u0074\u0068\u0065\u0020\u006e\u0061\u006d\u0065\u0021");
_feaa ,_dbe :=_cee .parseName ();_cd .Log .Trace ("\u004be\u0079\u003a\u0020\u0025\u0073",_feaa );if _dbe !=nil {_cd .Log .Debug ("E\u0052\u0052\u004f\u0052\u0020\u0052e\u0074\u0075\u0072\u006e\u0069\u006e\u0067\u0020\u006ea\u006d\u0065\u0020e\u0072r\u0020\u0025\u0073",_dbe );
return nil ,_dbe ;};if len (_feaa )> 4&&_feaa [len (_feaa )-4:]=="\u006e\u0075\u006c\u006c"{_abc :=_feaa [0:len (_feaa )-4];_cd .Log .Debug ("\u0054\u0061\u006b\u0069n\u0067\u0020\u0063\u0061\u0072\u0065\u0020\u006f\u0066\u0020n\u0075l\u006c\u0020\u0062\u0075\u0067\u0020\u0028%\u0073\u0029",_feaa );
_cd .Log .Debug ("\u004e\u0065\u0077\u0020ke\u0079\u0020\u0022\u0025\u0073\u0022\u0020\u003d\u0020\u006e\u0075\u006c\u006c",_abc );_cee .skipSpaces ();_fca ,_ :=_cee ._ccd .Peek (1);if _fca [0]=='/'{_bbe .Set (_abc ,_de .MakeNull ());continue ;};};_cee .skipSpaces ();
_bcg ,_dbe :=_cee .parseObject ();if _dbe !=nil {return nil ,_dbe ;};_bbe .Set (_feaa ,_bcg );_cd .Log .Trace ("\u0064\u0069\u0063\u0074\u005b\u0025\u0073\u005d\u0020\u003d\u0020\u0025\u0073",_feaa ,_bcg .String ());};_cd .Log .Trace ("\u0072\u0065\u0074\u0075rn\u0069\u006e\u0067\u0020\u0046\u0044\u0046\u0020\u0044\u0069\u0063\u0074\u0021");
return _bbe ,nil ;};func (_fcd *fdfParser )parseIndirectObject ()(_de .PdfObject ,error ){_bca :=_de .PdfIndirectObject {};_cd .Log .Trace ("\u002dR\u0065a\u0064\u0020\u0069\u006e\u0064i\u0072\u0065c\u0074\u0020\u006f\u0062\u006a");_dda ,_daf :=_fcd ._ccd .Peek (20);
if _daf !=nil {_cd .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0046\u0061\u0069\u006c\u0020\u0074\u006f\u0020r\u0065a\u0064\u0020\u0069\u006e\u0064\u0069\u0072\u0065\u0063\u0074\u0020\u006f\u0062\u006a");return &_bca ,_daf ;};_cd .Log .Trace ("\u0028\u0069\u006edi\u0072\u0065\u0063\u0074\u0020\u006f\u0062\u006a\u0020\u0070\u0065\u0065\u006b\u0020\u0022\u0025\u0073\u0022",string (_dda ));
_cga :=_edc .FindStringSubmatchIndex (string (_dda ));if len (_cga )< 6{_cd .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020U\u006e\u0061\u0062l\u0065\u0020\u0074\u006f \u0066\u0069\u006e\u0064\u0020\u006f\u0062\u006a\u0065\u0063\u0074\u0020\u0073\u0069\u0067\u006e\u0061\u0074\u0075\u0072\u0065\u0020\u0028\u0025\u0073\u0029",string (_dda ));
return &_bca ,_b .New ("\u0075\u006e\u0061b\u006c\u0065\u0020\u0074\u006f\u0020\u0064\u0065\u0074\u0065\u0063\u0074\u0020\u0069\u006e\u0064\u0069\u0072\u0065\u0063\u0074\u0020\u006f\u0062\u006a\u0065\u0063\u0074\u0020s\u0069\u0067\u006e\u0061\u0074\u0075\u0072\u0065");
};_fcd ._ccd .Discard (_cga [0]);_cd .Log .Trace ("O\u0066\u0066\u0073\u0065\u0074\u0073\u0020\u0025\u0020\u0064",_cga );_gfe :=_cga [1]-_cga [0];_fge :=make ([]byte ,_gfe );_ ,_daf =_fcd .readAtLeast (_fge ,_gfe );if _daf !=nil {_cd .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0075\u006e\u0061\u0062l\u0065\u0020\u0074\u006f\u0020\u0072\u0065\u0061\u0064\u0020-\u0020\u0025\u0073",_daf );
return nil ,_daf ;};_cd .Log .Trace ("\u0074\u0065\u0078t\u006c\u0069\u006e\u0065\u003a\u0020\u0025\u0073",_fge );_ebe :=_edc .FindStringSubmatch (string (_fge ));if len (_ebe )< 3{_cd .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020U\u006e\u0061\u0062l\u0065\u0020\u0074\u006f \u0066\u0069\u006e\u0064\u0020\u006f\u0062\u006a\u0065\u0063\u0074\u0020\u0073\u0069\u0067\u006e\u0061\u0074\u0075\u0072\u0065\u0020\u0028\u0025\u0073\u0029",string (_fge ));
return &_bca ,_b .New ("\u0075\u006e\u0061b\u006c\u0065\u0020\u0074\u006f\u0020\u0064\u0065\u0074\u0065\u0063\u0074\u0020\u0069\u006e\u0064\u0069\u0072\u0065\u0063\u0074\u0020\u006f\u0062\u006a\u0065\u0063\u0074\u0020s\u0069\u0067\u006e\u0061\u0074\u0075\u0072\u0065");
};_bgc ,_ :=_fa .Atoi (_ebe [1]);_bbda ,_ :=_fa .Atoi (_ebe [2]);_bca .ObjectNumber =int64 (_bgc );_bca .GenerationNumber =int64 (_bbda );for {_abbd ,_gee :=_fcd ._ccd .Peek (2);if _gee !=nil {return &_bca ,_gee ;};_cd .Log .Trace ("I\u006ed\u002e\u0020\u0070\u0065\u0065\u006b\u003a\u0020%\u0073\u0020\u0028\u0025 x\u0029\u0021",string (_abbd ),string (_abbd ));
if _de .IsWhiteSpace (_abbd [0]){_fcd .skipSpaces ();}else if _abbd [0]=='%'{_fcd .skipComments ();}else if (_abbd [0]=='<')&&(_abbd [1]=='<'){_cd .Log .Trace ("\u0043\u0061\u006c\u006c\u0020\u0050\u0061\u0072\u0073e\u0044\u0069\u0063\u0074");_bca .PdfObject ,_gee =_fcd .parseDict ();
_cd .Log .Trace ("\u0045\u004f\u0046\u0020Ca\u006c\u006c\u0020\u0050\u0061\u0072\u0073\u0065\u0044\u0069\u0063\u0074\u003a\u0020%\u0076",_gee );if _gee !=nil {return &_bca ,_gee ;};_cd .Log .Trace ("\u0050\u0061\u0072\u0073\u0065\u0064\u0020\u0064\u0069\u0063t\u0069\u006f\u006e\u0061\u0072\u0079\u002e.\u002e\u0020\u0066\u0069\u006e\u0069\u0073\u0068\u0065\u0064\u002e");
}else if (_abbd [0]=='/')||(_abbd [0]=='(')||(_abbd [0]=='[')||(_abbd [0]=='<'){_bca .PdfObject ,_gee =_fcd .parseObject ();if _gee !=nil {return &_bca ,_gee ;};_cd .Log .Trace ("P\u0061\u0072\u0073\u0065\u0064\u0020o\u0062\u006a\u0065\u0063\u0074\u0020\u002e\u002e\u002e \u0066\u0069\u006ei\u0073h\u0065\u0064\u002e");
}else {if _abbd [0]=='e'{_gbe ,_gcb :=_fcd .readTextLine ();if _gcb !=nil {return nil ,_gcb ;};if len (_gbe )>=6&&_gbe [0:6]=="\u0065\u006e\u0064\u006f\u0062\u006a"{break ;};}else if _abbd [0]=='s'{_abbd ,_ =_fcd ._ccd .Peek (10);if string (_abbd [:6])=="\u0073\u0074\u0072\u0065\u0061\u006d"{_cdb :=6;
if len (_abbd )> 6{if _de .IsWhiteSpace (_abbd [_cdb ])&&_abbd [_cdb ]!='\r'&&_abbd [_cdb ]!='\n'{_cd .Log .Debug ("\u004e\u006fn\u002d\u0063\u006f\u006e\u0066\u006f\u0072\u006d\u0061\u006e\u0074\u0020\u0046\u0044\u0046\u0020\u006e\u006f\u0074 \u0065\u006e\u0064\u0069\u006e\u0067 \u0073\u0074\u0072\u0065\u0061\u006d\u0020\u006c\u0069\u006e\u0065\u0020\u0070\u0072o\u0070\u0065r\u006c\u0079\u0020\u0077i\u0074\u0068\u0020\u0045\u004fL\u0020\u006d\u0061\u0072\u006b\u0065\u0072");
_cdb ++;};if _abbd [_cdb ]=='\r'{_cdb ++;if _abbd [_cdb ]=='\n'{_cdb ++;};}else if _abbd [_cdb ]=='\n'{_cdb ++;};};_fcd ._ccd .Discard (_cdb );_gda ,_af :=_bca .PdfObject .(*_de .PdfObjectDictionary );if !_af {return nil ,_b .New ("\u0073\u0074\u0072\u0065\u0061\u006d\u0020\u006f\u0062\u006a\u0065\u0063\u0074\u0020\u006di\u0073s\u0069\u006e\u0067\u0020\u0064\u0069\u0063\u0074\u0069\u006f\u006e\u0061\u0072\u0079");
};_cd .Log .Trace ("\u0053\u0074\u0072\u0065\u0061\u006d\u0020\u0064\u0069c\u0074\u0020\u0025\u0073",_gda );_fcg ,_dgb :=_gda .Get ("\u004c\u0065\u006e\u0067\u0074\u0068").(*_de .PdfObjectInteger );if !_dgb {return nil ,_b .New ("\u0073\u0074re\u0061\u006d\u0020l\u0065\u006e\u0067\u0074h n\u0065ed\u0073\u0020\u0074\u006f\u0020\u0062\u0065 a\u006e\u0020\u0069\u006e\u0074\u0065\u0067e\u0072");
};_ede :=*_fcg ;if _ede < 0{return nil ,_b .New ("\u0073\u0074\u0072\u0065\u0061\u006d\u0020\u006e\u0065\u0065\u0064\u0073\u0020\u0074\u006f \u0062e\u0020\u006c\u006f\u006e\u0067\u0065\u0072\u0020\u0074\u0068\u0061\u006e\u0020\u0030");};if int64 (_ede )> _fcd ._gdf {_cd .Log .Debug ("\u0045\u0052R\u004f\u0052\u003a\u0020\u0053t\u0072\u0065\u0061\u006d\u0020l\u0065\u006e\u0067\u0074\u0068\u0020\u0063\u0061\u006e\u006e\u006f\u0074\u0020\u0062\u0065\u0020\u006c\u0061\u0072\u0067\u0065\u0072\u0020\u0074\u0068\u0061\u006e\u0020\u0066\u0069\u006c\u0065\u0020\u0073\u0069\u007a\u0065");
return nil ,_b .New ("\u0069n\u0076\u0061l\u0069\u0064\u0020\u0073t\u0072\u0065\u0061m\u0020\u006c\u0065\u006e\u0067\u0074\u0068\u002c\u0020la\u0072\u0067\u0065r\u0020\u0074h\u0061\u006e\u0020\u0066\u0069\u006ce\u0020\u0073i\u007a\u0065");};_bcac :=make ([]byte ,_ede );
_ ,_gee =_fcd .readAtLeast (_bcac ,int (_ede ));if _gee !=nil {_cd .Log .Debug ("E\u0052\u0052\u004f\u0052 s\u0074r\u0065\u0061\u006d\u0020\u0028%\u0064\u0029\u003a\u0020\u0025\u0058",len (_bcac ),_bcac );_cd .Log .Debug ("\u0045R\u0052\u004f\u0052\u003a\u0020\u0025v",_gee );
return nil ,_gee ;};_aaf :=_de .PdfObjectStream {};_aaf .Stream =_bcac ;_aaf .PdfObjectDictionary =_bca .PdfObject .(*_de .PdfObjectDictionary );_aaf .ObjectNumber =_bca .ObjectNumber ;_aaf .GenerationNumber =_bca .GenerationNumber ;_fcd .skipSpaces ();
_fcd ._ccd .Discard (9);_fcd .skipSpaces ();return &_aaf ,nil ;};};_bca .PdfObject ,_gee =_fcd .parseObject ();return &_bca ,_gee ;};};_cd .Log .Trace ("\u0052\u0065\u0074\u0075rn\u0069\u006e\u0067\u0020\u0069\u006e\u0064\u0069\u0072\u0065\u0063\u0074\u0021");
return &_bca ,nil ;};func (_ea *fdfParser )skipComments ()error {if _ ,_gb :=_ea .skipSpaces ();_gb !=nil {return _gb ;};_ee :=true ;for {_ae ,_be :=_ea ._ccd .Peek (1);if _be !=nil {_cd .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0025\u0073",_be .Error ());
return _be ;};if _ee &&_ae [0]!='%'{return nil ;};_ee =false ;if (_ae [0]!='\r')&&(_ae [0]!='\n'){_ea ._ccd .ReadByte ();}else {break ;};};return _ea .skipComments ();};