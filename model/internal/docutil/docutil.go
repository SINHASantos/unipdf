//
// Copyright 2020 FoxyUtils ehf. All rights reserved.
//
// This is a commercial product and requires a license to operate.
// A trial license can be obtained at https://unidoc.io
//
// DO NOT EDIT: generated by unitwist Go source code obfuscator.
//
// Use of this source code is governed by the UniDoc End User License Agreement
// terms that can be accessed at https://unidoc.io/eula/

package docutil ;import (_bc "errors";_f "fmt";_bf "github.com/unidoc/unipdf/v3/common";_e "github.com/unidoc/unipdf/v3/core";);func (_ab *Catalog )SetOutputIntents (outputIntents *OutputIntents ){if _bcc :=_ab .Object .Get ("\u004f\u0075\u0074\u0070\u0075\u0074\u0049\u006e\u0074\u0065\u006e\u0074\u0073");
_bcc !=nil {for _cae ,_eb :=range _ab ._ee .Objects {if _eb ==_bcc {if outputIntents ._gfb ==_bcc {return ;};_ab ._ee .Objects =append (_ab ._ee .Objects [:_cae ],_ab ._ee .Objects [_cae +1:]...);break ;};};};_dc :=outputIntents ._gfb ;if _dc ==nil {_dc =_e .MakeIndirectObject (outputIntents ._eac );
};_ab .Object .Set ("\u004f\u0075\u0074\u0070\u0075\u0074\u0049\u006e\u0074\u0065\u006e\u0074\u0073",_dc );_ab ._ee .Objects =append (_ab ._ee .Objects ,_dc );};func (_eeg *OutputIntents )Len ()int {return _eeg ._eac .Len ()};type Page struct{_aag int ;
Object *_e .PdfObjectDictionary ;_ceg *Document ;};func _ccg (_ebd _e .PdfObject )(_e .PdfObjectName ,error ){var _gcg *_e .PdfObjectName ;var _af *_e .PdfObjectArray ;if _edd ,_baf :=_ebd .(*_e .PdfIndirectObject );_baf {if _cbf ,_fag :=_edd .PdfObject .(*_e .PdfObjectArray );
_fag {_af =_cbf ;}else if _fgbc ,_cdg :=_edd .PdfObject .(*_e .PdfObjectName );_cdg {_gcg =_fgbc ;};}else if _eebf ,_ga :=_ebd .(*_e .PdfObjectArray );_ga {_af =_eebf ;}else if _egg ,_ebg :=_ebd .(*_e .PdfObjectName );_ebg {_gcg =_egg ;};if _gcg !=nil {switch *_gcg {case "\u0044\u0065\u0076\u0069\u0063\u0065\u0047\u0072\u0061\u0079","\u0044e\u0076\u0069\u0063\u0065\u0052\u0047B","\u0044\u0065\u0076\u0069\u0063\u0065\u0043\u004d\u0059\u004b":return *_gcg ,nil ;
case "\u0050a\u0074\u0074\u0065\u0072\u006e":return *_gcg ,nil ;};};if _af !=nil &&_af .Len ()> 0{if _aa ,_dgb :=_af .Get (0).(*_e .PdfObjectName );_dgb {switch *_aa {case "\u0044\u0065\u0076\u0069\u0063\u0065\u0047\u0072\u0061\u0079","\u0044e\u0076\u0069\u0063\u0065\u0052\u0047B","\u0044\u0065\u0076\u0069\u0063\u0065\u0043\u004d\u0059\u004b":if _af .Len ()==1{return *_aa ,nil ;
};case "\u0043a\u006c\u0047\u0072\u0061\u0079","\u0043\u0061\u006c\u0052\u0047\u0042","\u004c\u0061\u0062":return *_aa ,nil ;case "\u0049\u0043\u0043\u0042\u0061\u0073\u0065\u0064","\u0050a\u0074\u0074\u0065\u0072\u006e","\u0049n\u0064\u0065\u0078\u0065\u0064":return *_aa ,nil ;
case "\u0053\u0065\u0070\u0061\u0072\u0061\u0074\u0069\u006f\u006e","\u0044e\u0076\u0069\u0063\u0065\u004e":return *_aa ,nil ;};};};return "",nil ;};func (_ae *Catalog )SetMetadata (data []byte )error {_fee ,_df :=_e .MakeStream (data ,nil );if _df !=nil {return _df ;
};_fee .Set ("\u0054\u0079\u0070\u0065",_e .MakeName ("\u004d\u0065\u0074\u0061\u0064\u0061\u0074\u0061"));_fee .Set ("\u0053u\u0062\u0074\u0079\u0070\u0065",_e .MakeName ("\u0058\u004d\u004c"));_ae .Object .Set ("\u004d\u0065\u0074\u0061\u0064\u0061\u0074\u0061",_fee );
_ae ._ee .Objects =append (_ae ._ee .Objects ,_fee );return nil ;};func (_ace Page )FindXObjectForms ()[]*_e .PdfObjectStream {_cba ,_ccgc :=_ace .GetResourcesXObject ();if !_ccgc {return nil ;};_abe :=map[*_e .PdfObjectStream ]struct{}{};var _dd func (_ddg *_e .PdfObjectDictionary ,_abee map[*_e .PdfObjectStream ]struct{});
_dd =func (_beg *_e .PdfObjectDictionary ,_dab map[*_e .PdfObjectStream ]struct{}){for _ ,_bee :=range _beg .Keys (){_ega ,_ccf :=_e .GetStream (_beg .Get (_bee ));if !_ccf {continue ;};if _ ,_bda :=_dab [_ega ];_bda {continue ;};_edff ,_efce :=_e .GetName (_ega .Get ("\u0053u\u0062\u0074\u0079\u0070\u0065"));
if !_efce ||_edff .String ()!="\u0046\u006f\u0072\u006d"{continue ;};_dab [_ega ]=struct{}{};_bdc ,_efce :=_e .GetDict (_ega .Get ("\u0052e\u0073\u006f\u0075\u0072\u0063\u0065s"));if !_efce {continue ;};_dbb ,_fac :=_e .GetDict (_bdc .Get ("\u0058O\u0062\u006a\u0065\u0063\u0074"));
if _fac {_dd (_dbb ,_dab );};};};_dd (_cba ,_abe );var _cde []*_e .PdfObjectStream ;for _gff :=range _abe {_cde =append (_cde ,_gff );};return _cde ;};type Catalog struct{Object *_e .PdfObjectDictionary ;_ee *Document ;};func (_bcb *Document )GetPages ()([]Page ,bool ){_eff ,_efff :=_bcb .FindCatalog ();
if !_efff {return nil ,false ;};return _eff .GetPages ();};type ImageSMask struct{Image *Image ;Stream *_e .PdfObjectStream ;};func (_aec Page )FindXObjectImages ()([]*Image ,error ){_gg ,_gce :=_aec .GetResourcesXObject ();if !_gce {return nil ,nil ;};
var _gdb []*Image ;var _fbf error ;_ge :=map[*_e .PdfObjectStream ]int {};_dgg :=map[*_e .PdfObjectStream ]struct{}{};var _cda int ;for _ ,_gcd :=range _gg .Keys (){_cce ,_fbc :=_e .GetStream (_gg .Get (_gcd ));if !_fbc {continue ;};if _ ,_bg :=_ge [_cce ];
_bg {continue ;};_dbe ,_cdf :=_e .GetName (_cce .Get ("\u0053u\u0062\u0074\u0079\u0070\u0065"));if !_cdf ||_dbe .String ()!="\u0049\u006d\u0061g\u0065"{continue ;};_dea :=Image {BitsPerComponent :8,Stream :_cce ,Name :string (_gcd )};if _dea .Colorspace ,_fbf =_ccg (_cce .PdfObjectDictionary .Get ("\u0043\u006f\u006c\u006f\u0072\u0053\u0070\u0061\u0063\u0065"));
_fbf !=nil {_bf .Log .Error ("\u0045\u0072\u0072\u006f\u0072\u0020\u0064\u0065\u0074\u0065r\u006d\u0069\u006e\u0065\u0020\u0063\u006fl\u006f\u0072\u0020\u0073\u0070\u0061\u0063\u0065\u0020\u0025\u0073",_fbf );continue ;};if _cbb ,_afe :=_e .GetIntVal (_cce .PdfObjectDictionary .Get ("\u0042\u0069t\u0073\u0050\u0065r\u0043\u006f\u006d\u0070\u006f\u006e\u0065\u006e\u0074"));
_afe {_dea .BitsPerComponent =_cbb ;};if _efb ,_bdg :=_e .GetIntVal (_cce .PdfObjectDictionary .Get ("\u0057\u0069\u0064t\u0068"));_bdg {_dea .Width =_efb ;};if _cbfa ,_cfb :=_e .GetIntVal (_cce .PdfObjectDictionary .Get ("\u0048\u0065\u0069\u0067\u0068\u0074"));
_cfb {_dea .Height =_cbfa ;};if _gab ,_feee :=_e .GetStream (_cce .Get ("\u0053\u004d\u0061s\u006b"));_feee {_dea .SMask =&ImageSMask {Image :&_dea ,Stream :_gab };_dgg [_gab ]=struct{}{};};switch _dea .Colorspace {case "\u0044e\u0076\u0069\u0063\u0065\u0052\u0047B":_dea .ColorComponents =3;
case "\u0044\u0065\u0076\u0069\u0063\u0065\u0047\u0072\u0061\u0079":_dea .ColorComponents =1;case "\u0044\u0065\u0076\u0069\u0063\u0065\u0043\u004d\u0059\u004b":_dea .ColorComponents =4;default:_dea .ColorComponents =-1;};_ge [_cce ]=_cda ;_gdb =append (_gdb ,&_dea );
_cda ++;};var _aga []int ;for _ ,_aef :=range _gdb {if _aef .SMask !=nil {_fae ,_gec :=_ge [_aef .SMask .Stream ];if _gec {_aga =append (_aga ,_fae );};};};_eda :=make ([]*Image ,len (_gdb )-len (_aga ));_cda =0;_dae :for _bfe ,_gecc :=range _gdb {for _ ,_ccd :=range _aga {if _bfe ==_ccd {continue _dae ;
};};_eda [_cda ]=_gecc ;_cda ++;};return _gdb ,nil ;};type Image struct{Name string ;Width int ;Height int ;Colorspace _e .PdfObjectName ;ColorComponents int ;BitsPerComponent int ;SMask *ImageSMask ;Stream *_e .PdfObjectStream ;};func (_ca *Catalog )SetStructTreeRoot (structTreeRoot _e .PdfObject ){if structTreeRoot ==nil {_ca .Object .Remove ("\u0053\u0074\u0072\u0075\u0063\u0074\u0054\u0072\u0065e\u0052\u006f\u006f\u0074");
return ;};_fgg :=_e .MakeIndirectObject (structTreeRoot );_ca .Object .Set ("\u0053\u0074\u0072\u0075\u0063\u0074\u0054\u0072\u0065e\u0052\u006f\u006f\u0074",_fgg );_ca ._ee .Objects =append (_ca ._ee .Objects ,_fgg );};func (_fd *Catalog )GetPages ()([]Page ,bool ){_c ,_fg :=_e .GetDict (_fd .Object .Get ("\u0050\u0061\u0067e\u0073"));
if !_fg {return nil ,false ;};_ba ,_g :=_e .GetArray (_c .Get ("\u004b\u0069\u0064\u0073"));if !_g {return nil ,false ;};_fe :=make ([]Page ,_ba .Len ());for _gb ,_a :=range _ba .Elements (){_gc ,_bfg :=_e .GetDict (_a );if !_bfg {continue ;};_fe [_gb ]=Page {Object :_gc ,_aag :_gb +1,_ceg :_fd ._ee };
};return _fe ,true ;};func (_efa *Catalog )GetMetadata ()(*_e .PdfObjectStream ,bool ){return _e .GetStream (_efa .Object .Get ("\u004d\u0065\u0074\u0061\u0064\u0061\u0074\u0061"));};func (_abf *Catalog )GetOutputIntents ()(*OutputIntents ,bool ){_dfa :=_abf .Object .Get ("\u004f\u0075\u0074\u0070\u0075\u0074\u0049\u006e\u0074\u0065\u006e\u0074\u0073");
if _dfa ==nil {return nil ,false ;};_fa ,_eg :=_e .GetIndirect (_dfa );if !_eg {return nil ,false ;};_faa ,_ce :=_e .GetArray (_fa .PdfObject );if !_ce {return nil ,false ;};return &OutputIntents {_gfb :_fa ,_eac :_faa ,_db :_abf ._ee },true ;};func (_eaa *OutputIntents )Get (i int )(OutputIntent ,bool ){if _eaa ._eac ==nil {return OutputIntent {},false ;
};if i >=_eaa ._eac .Len (){return OutputIntent {},false ;};_da :=_eaa ._eac .Get (i );_acb ,_gfa :=_e .GetIndirect (_da );if !_gfa {_efc ,_bdd :=_e .GetDict (_da );return OutputIntent {Object :_efc },_bdd ;};_bcf ,_eeb :=_e .GetDict (_acb .PdfObject );
return OutputIntent {Object :_bcf },_eeb ;};type OutputIntent struct{Object *_e .PdfObjectDictionary ;};func (_ag *Catalog )NewOutputIntents ()*OutputIntents {return &OutputIntents {_db :_ag ._ee }};func (_ebe *Document )FindCatalog ()(*Catalog ,bool ){var _cad *_e .PdfObjectDictionary ;
for _ ,_fdg :=range _ebe .Objects {_fab ,_ff :=_e .GetDict (_fdg );if !_ff {continue ;};if _ed ,_fb :=_e .GetName (_fab .Get ("\u0054\u0079\u0070\u0065"));_fb &&*_ed =="\u0043a\u0074\u0061\u006c\u006f\u0067"{_cad =_fab ;break ;};};if _cad ==nil {return nil ,false ;
};return &Catalog {Object :_cad ,_ee :_ebe },true ;};func (_faae Page )GetResources ()(*_e .PdfObjectDictionary ,bool ){return _e .GetDict (_faae .Object .Get ("\u0052e\u0073\u006f\u0075\u0072\u0063\u0065s"));};func (_gfc *Content )SetData (data []byte )error {_eadf ,_bab :=_e .MakeStream (data ,_e .NewFlateEncoder ());
if _bab !=nil {return _bab ;};_ege ,_efe :=_e .GetArray (_gfc ._cag .Object .Get ("\u0043\u006f\u006e\u0074\u0065\u006e\u0074\u0073"));if !_efe &&_gfc ._eacf ==0{_gfc ._cag .Object .Set ("\u0043\u006f\u006e\u0074\u0065\u006e\u0074\u0073",_eadf );}else {if _bab =_ege .Set (_gfc ._eacf ,_eadf );
_bab !=nil {return _bab ;};};_gfc ._cag ._ceg .Objects =append (_gfc ._cag ._ceg .Objects ,_eadf );return nil ;};func (_fc *OutputIntents )Add (oi _e .PdfObject )error {_ead ,_bd :=oi .(*_e .PdfObjectDictionary );if !_bd {return _bc .New ("\u0069\u006e\u0070\u0075\u0074\u0020\u006f\u0075\u0074\u0070\u0075\u0074\u0020\u0069\u006e\u0074\u0065\u006et\u0020\u0073\u0068\u006f\u0075\u006c\u0064 \u0062\u0065\u0020\u0061\u006e\u0020\u006f\u0062\u006a\u0065\u0063t\u0020\u0064\u0069\u0063\u0074\u0069\u006f\u006e\u0061\u0072\u0079");
};if _cd ,_ac :=_e .GetStream (_ead .Get ("\u0044\u0065\u0073\u0074\u004f\u0075\u0074\u0070\u0075\u0074\u0050\u0072o\u0066\u0069\u006c\u0065"));_ac {_fc ._db .Objects =append (_fc ._db .Objects ,_cd );};_cf ,_cc :=oi .(*_e .PdfIndirectObject );if !_cc {_cf =_e .MakeIndirectObject (oi );
};if _fc ._eac ==nil {_fc ._eac =_e .MakeArray (_cf );}else {_fc ._eac .Append (_cf );};_fc ._db .Objects =append (_fc ._db .Objects ,_cf );return nil ;};func (_gac Page )GetResourcesXObject ()(*_e .PdfObjectDictionary ,bool ){_acg ,_caf :=_gac .GetResources ();
if !_caf {return nil ,false ;};return _e .GetDict (_acg .Get ("\u0058O\u0062\u006a\u0065\u0063\u0074"));};func (_ea *Catalog )HasMetadata ()bool {_ef :=_ea .Object .Get ("\u004d\u0065\u0074\u0061\u0064\u0061\u0074\u0061");return _ef !=nil ;};type OutputIntents struct{_eac *_e .PdfObjectArray ;
_db *Document ;_gfb *_e .PdfIndirectObject ;};type Document struct{ID [2]string ;Version _e .Version ;Objects []_e .PdfObject ;Info _e .PdfObject ;Crypt *_e .PdfCrypt ;UseHashBasedID bool ;};func (_be *Catalog )GetMarkInfo ()(*_e .PdfObjectDictionary ,bool ){_gf ,_fgb :=_e .GetDict (_be .Object .Get ("\u004d\u0061\u0072\u006b\u0049\u006e\u0066\u006f"));
return _gf ,_fgb ;};func (_egd Content )GetData ()([]byte ,error ){_baa ,_cbc :=_e .NewEncoderFromStream (_egd .Stream );if _cbc !=nil {return nil ,_cbc ;};_cegf ,_cbc :=_baa .DecodeStream (_egd .Stream );if _cbc !=nil {return nil ,_cbc ;};return _cegf ,nil ;
};func (_d *Catalog )SetVersion (){_d .Object .Set ("\u0056e\u0072\u0073\u0069\u006f\u006e",_e .MakeName (_f .Sprintf ("\u0025\u0064\u002e%\u0064",_d ._ee .Version .Major ,_d ._ee .Version .Minor )));};func (_ebf Page )GetContents ()([]Content ,bool ){_gba ,_cdd :=_e .GetArray (_ebf .Object .Get ("\u0043\u006f\u006e\u0074\u0065\u006e\u0074\u0073"));
if !_cdd {_fabe ,_aeb :=_e .GetStream (_ebf .Object .Get ("\u0043\u006f\u006e\u0074\u0065\u006e\u0074\u0073"));if !_aeb {return nil ,false ;};return []Content {{Stream :_fabe ,_cag :_ebf ,_eacf :0}},true ;};_bfb :=make ([]Content ,_gba .Len ());for _edg ,_abfa :=range _gba .Elements (){_gbag ,_dce :=_e .GetStream (_abfa );
if !_dce {continue ;};_bfb [_edg ]=Content {Stream :_gbag ,_cag :_ebf ,_eacf :_edg };};return _bfb ,true ;};func (_age *Page )Number ()int {return _age ._aag };func (_fea *Catalog )GetStructTreeRoot ()(*_e .PdfObjectDictionary ,bool ){return _e .GetDict (_fea .Object .Get ("\u0053\u0074\u0072\u0075\u0063\u0074\u0054\u0072\u0065e\u0052\u006f\u006f\u0074"));
};type Content struct{Stream *_e .PdfObjectStream ;_eacf int ;_cag Page ;};func (_bad *Catalog )SetMarkInfo (mi _e .PdfObject ){if mi ==nil {_bad .Object .Remove ("\u004d\u0061\u0072\u006b\u0049\u006e\u0066\u006f");return ;};_dg :=_e .MakeIndirectObject (mi );
_bad .Object .Set ("\u004d\u0061\u0072\u006b\u0049\u006e\u0066\u006f",_dg );_bad ._ee .Objects =append (_bad ._ee .Objects ,_dg );};func (_bef *Document )AddStream (stream *_e .PdfObjectStream ){for _ ,_gd :=range _bef .Objects {if _gd ==stream {return ;
};};_bef .Objects =append (_bef .Objects ,stream );};func (_ec *Document )AddIndirectObject (indirect *_e .PdfIndirectObject ){for _ ,_cb :=range _ec .Objects {if _cb ==indirect {return ;};};_ec .Objects =append (_ec .Objects ,indirect );};