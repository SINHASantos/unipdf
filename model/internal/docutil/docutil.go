//
// Copyright 2020 FoxyUtils ehf. All rights reserved.
//
// This is a commercial product and requires a license to operate.
// A trial license can be obtained at https://unidoc.io
//
// DO NOT EDIT: generated by unitwist Go source code obfuscator.
//
// Use of this source code is governed by the UniDoc End User License Agreement
// terms that can be accessed at https://unidoc.io/eula/

package docutil ;import (_d "errors";_e "fmt";_gg "github.com/unidoc/unipdf/v3/common";_g "github.com/unidoc/unipdf/v3/core";);func (_dd *Document )FindCatalog ()(*Catalog ,bool ){var _eca *_g .PdfObjectDictionary ;for _ ,_fac :=range _dd .Objects {_ed ,_dgf :=_g .GetDict (_fac );
if !_dgf {continue ;};if _gdb ,_eee :=_g .GetName (_ed .Get ("\u0054\u0079\u0070\u0065"));_eee &&*_gdb =="\u0043a\u0074\u0061\u006c\u006f\u0067"{_eca =_ed ;break ;};};if _eca ==nil {return nil ,false ;};return &Catalog {Object :_eca ,_c :_dd },true ;};
func (_bc *Catalog )SetVersion (){_bc .Object .Set ("\u0056e\u0072\u0073\u0069\u006f\u006e",_g .MakeName (_e .Sprintf ("\u0025\u0064\u002e%\u0064",_bc ._c .Version .Major ,_bc ._c .Version .Minor )));};func (_bcd *OutputIntents )Add (oi _g .PdfObject )error {_fa ,_af :=oi .(*_g .PdfObjectDictionary );
if !_af {return _d .New ("\u0069\u006e\u0070\u0075\u0074\u0020\u006f\u0075\u0074\u0070\u0075\u0074\u0020\u0069\u006e\u0074\u0065\u006et\u0020\u0073\u0068\u006f\u0075\u006c\u0064 \u0062\u0065\u0020\u0061\u006e\u0020\u006f\u0062\u006a\u0065\u0063t\u0020\u0064\u0069\u0063\u0074\u0069\u006f\u006e\u0061\u0072\u0079");
};if _bag ,_agec :=_g .GetStream (_fa .Get ("\u0044\u0065\u0073\u0074\u004f\u0075\u0074\u0070\u0075\u0074\u0050\u0072o\u0066\u0069\u006c\u0065"));_agec {_bcd ._dfd .Objects =append (_bcd ._dfd .Objects ,_bag );};_gbb ,_ged :=oi .(*_g .PdfIndirectObject );
if !_ged {_gbb =_g .MakeIndirectObject (oi );};if _bcd ._cge ==nil {_bcd ._cge =_g .MakeArray (_gbb );}else {_bcd ._cge .Append (_gbb );};_bcd ._dfd .Objects =append (_bcd ._dfd .Objects ,_gbb );return nil ;};func (_dac *Catalog )SetMetadata (data []byte )error {_db ,_dg :=_g .MakeStream (data ,nil );
if _dg !=nil {return _dg ;};_db .Set ("\u0054\u0079\u0070\u0065",_g .MakeName ("\u004d\u0065\u0074\u0061\u0064\u0061\u0074\u0061"));_db .Set ("\u0053u\u0062\u0074\u0079\u0070\u0065",_g .MakeName ("\u0058\u004d\u004c"));_dac .Object .Set ("\u004d\u0065\u0074\u0061\u0064\u0061\u0074\u0061",_db );
_dac ._c .Objects =append (_dac ._c .Objects ,_db );return nil ;};func (_ae *Catalog )SetStructTreeRoot (structTreeRoot _g .PdfObject ){if structTreeRoot ==nil {_ae .Object .Remove ("\u0053\u0074\u0072\u0075\u0063\u0074\u0054\u0072\u0065e\u0052\u006f\u006f\u0074");
return ;};_eg :=_g .MakeIndirectObject (structTreeRoot );_ae .Object .Set ("\u0053\u0074\u0072\u0075\u0063\u0074\u0054\u0072\u0065e\u0052\u006f\u006f\u0074",_eg );_ae ._c .Objects =append (_ae ._c .Objects ,_eg );};func (_da *Catalog )HasMetadata ()bool {_ggb :=_da .Object .Get ("\u004d\u0065\u0074\u0061\u0064\u0061\u0074\u0061");
return _ggb !=nil ;};func (_fd *OutputIntents )Len ()int {return _fd ._cge .Len ()};func (_fcg Page )GetResources ()(*_g .PdfObjectDictionary ,bool ){return _g .GetDict (_fcg .Object .Get ("\u0052e\u0073\u006f\u0075\u0072\u0063\u0065s"));};type Document struct{ID [2]string ;
Version _g .Version ;Objects []_g .PdfObject ;Info _g .PdfObject ;Crypt *_g .PdfCrypt ;UseHashBasedID bool ;};type OutputIntents struct{_cge *_g .PdfObjectArray ;_dfd *Document ;_bcc *_g .PdfIndirectObject ;};type Catalog struct{Object *_g .PdfObjectDictionary ;
_c *Document ;};func (_bdc Content )GetData ()([]byte ,error ){_edcb ,_fgaf :=_g .NewEncoderFromStream (_bdc .Stream );if _fgaf !=nil {return nil ,_fgaf ;};_cbe ,_fgaf :=_edcb .DecodeStream (_bdc .Stream );if _fgaf !=nil {return nil ,_fgaf ;};return _cbe ,nil ;
};func (_ege *Catalog )NewOutputIntents ()*OutputIntents {return &OutputIntents {_dfd :_ege ._c }};func (_f *Catalog )GetPages ()([]Page ,bool ){_gf ,_cg :=_g .GetDict (_f .Object .Get ("\u0050\u0061\u0067e\u0073"));if !_cg {return nil ,false ;};_a ,_bf :=_g .GetArray (_gf .Get ("\u004b\u0069\u0064\u0073"));
if !_bf {return nil ,false ;};_gfa :=make ([]Page ,_a .Len ());for _ee ,_de :=range _a .Elements (){_ec ,_df :=_g .GetDict (_de );if !_df {continue ;};_gfa [_ee ]=Page {Object :_ec ,_aca :_ee +1,_egg :_f ._c };};return _gfa ,true ;};func (_ad *Document )GetPages ()([]Page ,bool ){_dcb ,_fgc :=_ad .FindCatalog ();
if !_fgc {return nil ,false ;};return _dcb .GetPages ();};func _feb (_ca _g .PdfObject )(_g .PdfObjectName ,error ){var _dgde *_g .PdfObjectName ;var _eeec *_g .PdfObjectArray ;if _ff ,_adf :=_ca .(*_g .PdfIndirectObject );_adf {if _ece ,_caf :=_ff .PdfObject .(*_g .PdfObjectArray );
_caf {_eeec =_ece ;}else if _gde ,_efg :=_ff .PdfObject .(*_g .PdfObjectName );_efg {_dgde =_gde ;};}else if _gfb ,_bb :=_ca .(*_g .PdfObjectArray );_bb {_eeec =_gfb ;}else if _fc ,_bbd :=_ca .(*_g .PdfObjectName );_bbd {_dgde =_fc ;};if _dgde !=nil {switch *_dgde {case "\u0044\u0065\u0076\u0069\u0063\u0065\u0047\u0072\u0061\u0079","\u0044e\u0076\u0069\u0063\u0065\u0052\u0047B","\u0044\u0065\u0076\u0069\u0063\u0065\u0043\u004d\u0059\u004b":return *_dgde ,nil ;
case "\u0050a\u0074\u0074\u0065\u0072\u006e":return *_dgde ,nil ;};};if _eeec !=nil &&_eeec .Len ()> 0{if _edc ,_bab :=_eeec .Get (0).(*_g .PdfObjectName );_bab {switch *_edc {case "\u0044\u0065\u0076\u0069\u0063\u0065\u0047\u0072\u0061\u0079","\u0044e\u0076\u0069\u0063\u0065\u0052\u0047B","\u0044\u0065\u0076\u0069\u0063\u0065\u0043\u004d\u0059\u004b":if _eeec .Len ()==1{return *_edc ,nil ;
};case "\u0043a\u006c\u0047\u0072\u0061\u0079","\u0043\u0061\u006c\u0052\u0047\u0042","\u004c\u0061\u0062":return *_edc ,nil ;case "\u0049\u0043\u0043\u0042\u0061\u0073\u0065\u0064","\u0050a\u0074\u0074\u0065\u0072\u006e","\u0049n\u0064\u0065\u0078\u0065\u0064":return *_edc ,nil ;
case "\u0053\u0065\u0070\u0061\u0072\u0061\u0074\u0069\u006f\u006e","\u0044e\u0076\u0069\u0063\u0065\u004e":return *_edc ,nil ;};};};return "",nil ;};func (_fb Page )GetResourcesXObject ()(*_g .PdfObjectDictionary ,bool ){_eea ,_bfa :=_fb .GetResources ();
if !_bfa {return nil ,false ;};return _g .GetDict (_eea .Get ("\u0058O\u0062\u006a\u0065\u0063\u0074"));};type OutputIntent struct{Object *_g .PdfObjectDictionary ;};type Page struct{_aca int ;Object *_g .PdfObjectDictionary ;_egg *Document ;};func (_dbc *Page )Number ()int {return _dbc ._aca };
func (_gddf *OutputIntents )Get (i int )(OutputIntent ,bool ){if _gddf ._cge ==nil {return OutputIntent {},false ;};if i >=_gddf ._cge .Len (){return OutputIntent {},false ;};_be :=_gddf ._cge .Get (i );_cf ,_dgd :=_g .GetIndirect (_be );if !_dgd {_bd ,_fec :=_g .GetDict (_be );
return OutputIntent {Object :_bd },_fec ;};_fae ,_acg :=_g .GetDict (_cf .PdfObject );return OutputIntent {Object :_fae },_acg ;};func (_eec *Catalog )SetOutputIntents (outputIntents *OutputIntents ){if _fg :=_eec .Object .Get ("\u004f\u0075\u0074\u0070\u0075\u0074\u0049\u006e\u0074\u0065\u006e\u0074\u0073");
_fg !=nil {for _ag ,_aec :=range _eec ._c .Objects {if _aec ==_fg {if outputIntents ._bcc ==_fg {return ;};_eec ._c .Objects =append (_eec ._c .Objects [:_ag ],_eec ._c .Objects [_ag +1:]...);break ;};};};_gb :=outputIntents ._bcc ;if _gb ==nil {_gb =_g .MakeIndirectObject (outputIntents ._cge );
};_eec .Object .Set ("\u004f\u0075\u0074\u0070\u0075\u0074\u0049\u006e\u0074\u0065\u006e\u0074\u0073",_gb );_eec ._c .Objects =append (_eec ._c .Objects ,_gb );};func (_ef *Catalog )GetMetadata ()(*_g .PdfObjectStream ,bool ){return _g .GetStream (_ef .Object .Get ("\u004d\u0065\u0074\u0061\u0064\u0061\u0074\u0061"));
};func (_age *Catalog )GetOutputIntents ()(*OutputIntents ,bool ){_dee :=_age .Object .Get ("\u004f\u0075\u0074\u0070\u0075\u0074\u0049\u006e\u0074\u0065\u006e\u0074\u0073");if _dee ==nil {return nil ,false ;};_dc ,_ba :=_g .GetIndirect (_dee );if !_ba {return nil ,false ;
};_gdd ,_ge :=_g .GetArray (_dc .PdfObject );if !_ge {return nil ,false ;};return &OutputIntents {_bcc :_dc ,_cge :_gdd ,_dfd :_age ._c },true ;};func (_gc *Catalog )SetMarkInfo (mi _g .PdfObject ){if mi ==nil {_gc .Object .Remove ("\u004d\u0061\u0072\u006b\u0049\u006e\u0066\u006f");
return ;};_ac :=_g .MakeIndirectObject (mi );_gc .Object .Set ("\u004d\u0061\u0072\u006b\u0049\u006e\u0066\u006f",_ac );_gc ._c .Objects =append (_gc ._c .Objects ,_ac );};func (_gge Page )FindXObjectForms ()[]*_g .PdfObjectStream {_ffg ,_cca :=_gge .GetResourcesXObject ();
if !_cca {return nil ;};_cdc :=map[*_g .PdfObjectStream ]struct{}{};var _ecb func (_gec *_g .PdfObjectDictionary ,_fad map[*_g .PdfObjectStream ]struct{});_ecb =func (_ceg *_g .PdfObjectDictionary ,_adgg map[*_g .PdfObjectStream ]struct{}){for _ ,_cdb :=range _ceg .Keys (){_dgfa ,_ddb :=_g .GetStream (_ceg .Get (_cdb ));
if !_ddb {continue ;};if _ ,_dce :=_adgg [_dgfa ];_dce {continue ;};_ggc ,_eaa :=_g .GetName (_dgfa .Get ("\u0053u\u0062\u0074\u0079\u0070\u0065"));if !_eaa ||_ggc .String ()!="\u0046\u006f\u0072\u006d"{continue ;};_adgg [_dgfa ]=struct{}{};_cbb ,_eaa :=_g .GetDict (_dgfa .Get ("\u0052e\u0073\u006f\u0075\u0072\u0063\u0065s"));
if !_eaa {continue ;};_fbb ,_beb :=_g .GetDict (_cbb .Get ("\u0058O\u0062\u006a\u0065\u0063\u0074"));if _beb {_ecb (_fbb ,_adgg );};};};_ecb (_ffg ,_cdc );var _ega []*_g .PdfObjectStream ;for _ccd :=range _cdc {_ega =append (_ega ,_ccd );};return _ega ;
};func (_dba Page )GetContents ()([]Content ,bool ){_ffc ,_ggg :=_g .GetArray (_dba .Object .Get ("\u0043\u006f\u006e\u0074\u0065\u006e\u0074\u0073"));if !_ggg {_cad ,_ce :=_g .GetStream (_dba .Object .Get ("\u0043\u006f\u006e\u0074\u0065\u006e\u0074\u0073"));
if !_ce {return nil ,false ;};return []Content {{Stream :_cad ,_aea :_dba ,_ddc :0}},true ;};_fbc :=make ([]Content ,_ffc .Len ());for _cec ,_gbbb :=range _ffc .Elements (){_cba ,_fdb :=_g .GetStream (_gbbb );if !_fdb {continue ;};_fbc [_cec ]=Content {Stream :_cba ,_aea :_dba ,_ddc :_cec };
};return _fbc ,true ;};func (_acf *Content )SetData (data []byte )error {_bee ,_ggcd :=_g .MakeStream (data ,_g .NewFlateEncoder ());if _ggcd !=nil {return _ggcd ;};_fcgd ,_fdd :=_g .GetArray (_acf ._aea .Object .Get ("\u0043\u006f\u006e\u0074\u0065\u006e\u0074\u0073"));
if !_fdd &&_acf ._ddc ==0{_acf ._aea .Object .Set ("\u0043\u006f\u006e\u0074\u0065\u006e\u0074\u0073",_bee );}else {if _ggcd =_fcgd .Set (_acf ._ddc ,_bee );_ggcd !=nil {return _ggcd ;};};_acf ._aea ._egg .Objects =append (_acf ._aea ._egg .Objects ,_bee );
return nil ;};func (_cc Page )FindXObjectImages ()([]*Image ,error ){_def ,_cef :=_cc .GetResourcesXObject ();if !_cef {return nil ,nil ;};var _dcbg []*Image ;var _eecb error ;_ea :=map[*_g .PdfObjectStream ]int {};_agc :=map[*_g .PdfObjectStream ]struct{}{};
var _feca int ;for _ ,_cgb :=range _def .Keys (){_ga ,_dag :=_g .GetStream (_def .Get (_cgb ));if !_dag {continue ;};if _ ,_cafe :=_ea [_ga ];_cafe {continue ;};_fga ,_dbe :=_g .GetName (_ga .Get ("\u0053u\u0062\u0074\u0079\u0070\u0065"));if !_dbe ||_fga .String ()!="\u0049\u006d\u0061g\u0065"{continue ;
};_bdd :=Image {BitsPerComponent :8,Stream :_ga ,Name :string (_cgb )};if _bdd .Colorspace ,_eecb =_feb (_ga .PdfObjectDictionary .Get ("\u0043\u006f\u006c\u006f\u0072\u0053\u0070\u0061\u0063\u0065"));_eecb !=nil {_gg .Log .Error ("\u0045\u0072\u0072\u006f\u0072\u0020\u0064\u0065\u0074\u0065r\u006d\u0069\u006e\u0065\u0020\u0063\u006fl\u006f\u0072\u0020\u0073\u0070\u0061\u0063\u0065\u0020\u0025\u0073",_eecb );
continue ;};if _bba ,_gcf :=_g .GetIntVal (_ga .PdfObjectDictionary .Get ("\u0042\u0069t\u0073\u0050\u0065r\u0043\u006f\u006d\u0070\u006f\u006e\u0065\u006e\u0074"));_gcf {_bdd .BitsPerComponent =_bba ;};if _gbg ,_cfg :=_g .GetIntVal (_ga .PdfObjectDictionary .Get ("\u0057\u0069\u0064t\u0068"));
_cfg {_bdd .Width =_gbg ;};if _afg ,_bbb :=_g .GetIntVal (_ga .PdfObjectDictionary .Get ("\u0048\u0065\u0069\u0067\u0068\u0074"));_bbb {_bdd .Height =_afg ;};if _ecf ,_bcca :=_g .GetStream (_ga .Get ("\u0053\u004d\u0061s\u006b"));_bcca {_bdd .SMask =&ImageSMask {Image :&_bdd ,Stream :_ecf };
_agc [_ecf ]=struct{}{};};switch _bdd .Colorspace {case "\u0044e\u0076\u0069\u0063\u0065\u0052\u0047B":_bdd .ColorComponents =3;case "\u0044\u0065\u0076\u0069\u0063\u0065\u0047\u0072\u0061\u0079":_bdd .ColorComponents =1;case "\u0044\u0065\u0076\u0069\u0063\u0065\u0043\u004d\u0059\u004b":_bdd .ColorComponents =4;
default:_bdd .ColorComponents =-1;};_ea [_ga ]=_feca ;_dcbg =append (_dcbg ,&_bdd );_feca ++;};var _cd []int ;for _ ,_fcc :=range _dcbg {if _fcc .SMask !=nil {_adg ,_fag :=_ea [_fcc .SMask .Stream ];if _fag {_cd =append (_cd ,_adg );};};};_gdf :=make ([]*Image ,len (_dcbg )-len (_cd ));
_feca =0;_gee :for _ecac ,_bccd :=range _dcbg {for _ ,_ecc :=range _cd {if _ecac ==_ecc {continue _gee ;};};_gdf [_feca ]=_bccd ;_feca ++;};return _dcbg ,nil ;};func (_eecg *Document )AddStream (stream *_g .PdfObjectStream ){for _ ,_facg :=range _eecg .Objects {if _facg ==stream {return ;
};};_eecg .Objects =append (_eecg .Objects ,stream );};func (_cb *Catalog )GetMarkInfo ()(*_g .PdfObjectDictionary ,bool ){_gd ,_fee :=_g .GetDict (_cb .Object .Get ("\u004d\u0061\u0072\u006b\u0049\u006e\u0066\u006f"));return _gd ,_fee ;};type ImageSMask struct{Image *Image ;
Stream *_g .PdfObjectStream ;};func (_fe *Catalog )GetStructTreeRoot ()(*_g .PdfObjectDictionary ,bool ){return _g .GetDict (_fe .Object .Get ("\u0053\u0074\u0072\u0075\u0063\u0074\u0054\u0072\u0065e\u0052\u006f\u006f\u0074"));};type Content struct{Stream *_g .PdfObjectStream ;
_ddc int ;_aea Page ;};type Image struct{Name string ;Width int ;Height int ;Colorspace _g .PdfObjectName ;ColorComponents int ;BitsPerComponent int ;SMask *ImageSMask ;Stream *_g .PdfObjectStream ;};func (_dcf *Document )AddIndirectObject (indirect *_g .PdfIndirectObject ){for _ ,_agb :=range _dcf .Objects {if _agb ==indirect {return ;
};};_dcf .Objects =append (_dcf .Objects ,indirect );};