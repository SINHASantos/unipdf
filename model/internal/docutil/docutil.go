//
// Copyright 2020 FoxyUtils ehf. All rights reserved.
//
// This is a commercial product and requires a license to operate.
// A trial license can be obtained at https://unidoc.io
//
// DO NOT EDIT: generated by unitwist Go source code obfuscator.
//
// Use of this source code is governed by the UniDoc End User License Agreement
// terms that can be accessed at https://unidoc.io/eula/

package docutil ;import (_d "errors";_a "fmt";_b "github.com/unidoc/unipdf/v3/common";_f "github.com/unidoc/unipdf/v3/core";);func (_fd *Catalog )GetMetadata ()(*_f .PdfObjectStream ,bool ){_cf ,_cb :=_f .GetStream (_fd .Object .Get ("\u004d\u0065\u0074\u0061\u0064\u0061\u0074\u0061"));
return _cf ,_cb ;};func (_ga *Catalog )SetMarkInfo (mi _f .PdfObject ){if mi ==nil {_ga .Object .Remove ("\u004d\u0061\u0072\u006b\u0049\u006e\u0066\u006f");return ;};_gd :=_f .MakeIndirectObject (mi );_ga .Object .Set ("\u004d\u0061\u0072\u006b\u0049\u006e\u0066\u006f",_gd );
_ga ._e .Objects =append (_ga ._e .Objects ,_gd );};func (_ac *Document )FindCatalog ()(*Catalog ,bool ){var _aab *_f .PdfObjectDictionary ;for _ ,_gag :=range _ac .Objects {_fgc ,_gee :=_f .GetDict (_gag );if !_gee {continue ;};if _cbb ,_bg :=_f .GetName (_fgc .Get ("\u0054\u0079\u0070\u0065"));
_bg &&*_cbb =="\u0043a\u0074\u0061\u006c\u006f\u0067"{_aab =_fgc ;break ;};};if _aab ==nil {return nil ,false ;};return &Catalog {Object :_aab ,_e :_ac },true ;};func _bc (_gdg _f .PdfObject )(_f .PdfObjectName ,error ){var _bca *_f .PdfObjectName ;var _cba *_f .PdfObjectArray ;
if _baeg ,_cbc :=_gdg .(*_f .PdfIndirectObject );_cbc {if _fcg ,_af :=_baeg .PdfObject .(*_f .PdfObjectArray );_af {_cba =_fcg ;}else if _cbga ,_df :=_baeg .PdfObject .(*_f .PdfObjectName );_df {_bca =_cbga ;};}else if _dd ,_bcae :=_gdg .(*_f .PdfObjectArray );
_bcae {_cba =_dd ;}else if _ee ,_fa :=_gdg .(*_f .PdfObjectName );_fa {_bca =_ee ;};if _bca !=nil {switch *_bca {case "\u0044\u0065\u0076\u0069\u0063\u0065\u0047\u0072\u0061\u0079","\u0044e\u0076\u0069\u0063\u0065\u0052\u0047B","\u0044\u0065\u0076\u0069\u0063\u0065\u0043\u004d\u0059\u004b":return *_bca ,nil ;
case "\u0050a\u0074\u0074\u0065\u0072\u006e":return *_bca ,nil ;};};if _cba !=nil &&_cba .Len ()> 0{if _agc ,_gba :=_cba .Get (0).(*_f .PdfObjectName );_gba {switch *_agc {case "\u0044\u0065\u0076\u0069\u0063\u0065\u0047\u0072\u0061\u0079","\u0044e\u0076\u0069\u0063\u0065\u0052\u0047B","\u0044\u0065\u0076\u0069\u0063\u0065\u0043\u004d\u0059\u004b":if _cba .Len ()==1{return *_agc ,nil ;
};case "\u0043a\u006c\u0047\u0072\u0061\u0079","\u0043\u0061\u006c\u0052\u0047\u0042","\u004c\u0061\u0062":return *_agc ,nil ;case "\u0049\u0043\u0043\u0042\u0061\u0073\u0065\u0064","\u0050a\u0074\u0074\u0065\u0072\u006e","\u0049n\u0064\u0065\u0078\u0065\u0064":return *_agc ,nil ;
case "\u0053\u0065\u0070\u0061\u0072\u0061\u0074\u0069\u006f\u006e","\u0044e\u0076\u0069\u0063\u0065\u004e":return *_agc ,nil ;};};};return "",nil ;};type Catalog struct{Object *_f .PdfObjectDictionary ;_e *Document ;};func (_ef *Catalog )GetPages ()([]Page ,bool ){_efd ,_ab :=_f .GetDict (_ef .Object .Get ("\u0050\u0061\u0067e\u0073"));
if !_ab {return nil ,false ;};_ccd ,_g :=_f .GetArray (_efd .Get ("\u004b\u0069\u0064\u0073"));if !_g {return nil ,false ;};_be :=make ([]Page ,_ccd .Len ());for _aba ,_db :=range _ccd .Elements (){_ec ,_cg :=_f .GetDict (_db );if !_cg {continue ;};_be [_aba ]=Page {Object :_ec ,_bbe :_aba +1,_ce :_ef ._e };
};return _be ,true ;};type OutputIntent struct{Object *_f .PdfObjectDictionary ;};func (_gaf *Document )GetPages ()([]Page ,bool ){_fge ,_cbg :=_gaf .FindCatalog ();if !_cbg {return nil ,false ;};return _fge .GetPages ();};func (_ea *OutputIntents )Add (oi _f .PdfObject )error {_bab ,_abd :=oi .(*_f .PdfObjectDictionary );
if !_abd {return _d .New ("\u0069\u006e\u0070\u0075\u0074\u0020\u006f\u0075\u0074\u0070\u0075\u0074\u0020\u0069\u006e\u0074\u0065\u006et\u0020\u0073\u0068\u006f\u0075\u006c\u0064 \u0062\u0065\u0020\u0061\u006e\u0020\u006f\u0062\u006a\u0065\u0063t\u0020\u0064\u0069\u0063\u0074\u0069\u006f\u006e\u0061\u0072\u0079");
};if _dca ,_fe :=_f .GetStream (_bab .Get ("\u0044\u0065\u0073\u0074\u004f\u0075\u0074\u0070\u0075\u0074\u0050\u0072o\u0066\u0069\u006c\u0065"));_fe {_ea ._fdf .Objects =append (_ea ._fdf .Objects ,_dca );};_age ,_baa :=oi .(*_f .PdfIndirectObject );if !_baa {_age =_f .MakeIndirectObject (oi );
};if _ea ._fcb ==nil {_ea ._fcb =_f .MakeArray (_age );}else {_ea ._fcb .Append (_age );};_ea ._fdf .Objects =append (_ea ._fdf .Objects ,_age );return nil ;};type ImageSMask struct{Image *Image ;Stream *_f .PdfObjectStream ;};type OutputIntents struct{_fcb *_f .PdfObjectArray ;
_fdf *Document ;_ae *_f .PdfIndirectObject ;};func (_abc *OutputIntents )Len ()int {return _abc ._fcb .Len ()};type Document struct{ID [2]string ;Version _f .Version ;Objects []_f .PdfObject ;Info _f .PdfObject ;Crypt *_f .PdfCrypt ;UseHashBasedID bool ;
};func (_eg *OutputIntents )Get (i int )(OutputIntent ,bool ){if _eg ._fcb ==nil {return OutputIntent {},false ;};if i >=_eg ._fcb .Len (){return OutputIntent {},false ;};_cgc :=_eg ._fcb .Get (i );_cbf ,_ca :=_f .GetIndirect (_cgc );if !_ca {_gc ,_fg :=_f .GetDict (_cgc );
return OutputIntent {Object :_gc },_fg ;};_ge ,_ebc :=_f .GetDict (_cbf .PdfObject );return OutputIntent {Object :_ge },_ebc ;};func (_bf *Catalog )GetMarkInfo ()(*_f .PdfObjectDictionary ,bool ){_bd ,_cgd :=_f .GetDict (_bf .Object .Get ("\u004d\u0061\u0072\u006b\u0049\u006e\u0066\u006f"));
return _bd ,_cgd ;};func (_ace Page )GetResources ()(*_f .PdfObjectDictionary ,bool ){return _f .GetDict (_ace .Object .Get ("\u0052e\u0073\u006f\u0075\u0072\u0063\u0065s"));};func (_gdf *Document )AddStream (stream *_f .PdfObjectStream ){for _ ,_ff :=range _gdf .Objects {if _ff ==stream {return ;
};};_gdf .Objects =append (_gdf .Objects ,stream );};func (_eb *Catalog )SetOutputIntents (outputIntents *OutputIntents ){if _dc :=_eb .Object .Get ("\u004f\u0075\u0074\u0070\u0075\u0074\u0049\u006e\u0074\u0065\u006e\u0074\u0073");_dc !=nil {for _aa ,_dbd :=range _eb ._e .Objects {if _dbd ==_dc {if outputIntents ._ae ==_dc {return ;
};_eb ._e .Objects =append (_eb ._e .Objects [:_aa ],_eb ._e .Objects [_aa +1:]...);break ;};};};_ccc :=outputIntents ._ae ;if _ccc ==nil {_ccc =_f .MakeIndirectObject (outputIntents ._fcb );};_eb .Object .Set ("\u004f\u0075\u0074\u0070\u0075\u0074\u0049\u006e\u0074\u0065\u006e\u0074\u0073",_ccc );
_eb ._e .Objects =append (_eb ._e .Objects ,_ccc );};func (_gebd Page )FindXObjectForms ()[]*_f .PdfObjectStream {_ccdf ,_ddd :=_gebd .GetResourcesXObject ();if !_ddd {return nil ;};_eaf :=map[*_f .PdfObjectStream ]struct{}{};var _cef func (_dcaf *_f .PdfObjectDictionary ,_bde map[*_f .PdfObjectStream ]struct{});
_cef =func (_ecf *_f .PdfObjectDictionary ,_dddf map[*_f .PdfObjectStream ]struct{}){for _ ,_bbc :=range _ecf .Keys (){_bbcb ,_fad :=_f .GetStream (_ecf .Get (_bbc ));if !_fad {continue ;};if _ ,_fbd :=_dddf [_bbcb ];_fbd {continue ;};_cec ,_fcd :=_f .GetName (_bbcb .Get ("\u0053u\u0062\u0074\u0079\u0070\u0065"));
if !_fcd ||_cec .String ()!="\u0046\u006f\u0072\u006d"{continue ;};_dddf [_bbcb ]=struct{}{};_fddd ,_fcd :=_f .GetDict (_bbcb .Get ("\u0052e\u0073\u006f\u0075\u0072\u0063\u0065s"));if !_fcd {continue ;};_fgee ,_dg :=_f .GetDict (_fddd .Get ("\u0058O\u0062\u006a\u0065\u0063\u0074"));
if _dg {_cef (_fgee ,_dddf );};};};_cef (_ccdf ,_eaf );var _dgf []*_f .PdfObjectStream ;for _cae :=range _eaf {_dgf =append (_dgf ,_cae );};return _dgf ;};func (_ba *Catalog )GetOutputIntents ()(*OutputIntents ,bool ){_fb :=_ba .Object .Get ("\u004f\u0075\u0074\u0070\u0075\u0074\u0049\u006e\u0074\u0065\u006e\u0074\u0073");
if _fb ==nil {return nil ,false ;};_fc ,_fcf :=_f .GetIndirect (_fb );if !_fcf {return nil ,false ;};_dbg ,_eba :=_f .GetArray (_fc .PdfObject );if !_eba {return nil ,false ;};return &OutputIntents {_ae :_fc ,_fcb :_dbg ,_fdf :_ba ._e },true ;};type Image struct{Name string ;
Width int ;Height int ;Colorspace _f .PdfObjectName ;ColorComponents int ;BitsPerComponent int ;SMask *ImageSMask ;Stream *_f .PdfObjectStream ;};type Page struct{_bbe int ;Object *_f .PdfObjectDictionary ;_ce *Document ;};func (_cc *Catalog )SetVersion (){_cc .Object .Set ("\u0056e\u0072\u0073\u0069\u006f\u006e",_f .MakeName (_a .Sprintf ("\u0025\u0064\u002e%\u0064",_cc ._e .Version .Major ,_cc ._e .Version .Minor )));
};func (_bed Page )GetContents ()([]Content ,bool ){_ebce ,_bdb :=_f .GetArray (_bed .Object .Get ("\u0043\u006f\u006e\u0074\u0065\u006e\u0074\u0073"));if !_bdb {_geb ,_gad :=_f .GetStream (_bed .Object .Get ("\u0043\u006f\u006e\u0074\u0065\u006e\u0074\u0073"));
if !_gad {return nil ,false ;};return []Content {{Stream :_geb ,_ed :_bed ,_dbf :0}},true ;};_bfaa :=make ([]Content ,_ebce .Len ());for _caa ,_cgdc :=range _ebce .Elements (){_agcb ,_dfc :=_f .GetStream (_cgdc );if !_dfc {continue ;};_bfaa [_caa ]=Content {Stream :_agcb ,_ed :_bed ,_dbf :_caa };
};return _bfaa ,true ;};type Content struct{Stream *_f .PdfObjectStream ;_dbf int ;_ed Page ;};func (_gb *Catalog )HasMetadata ()bool {_bb :=_gb .Object .Get ("\u004d\u0065\u0074\u0061\u0064\u0061\u0074\u0061");return _bb !=nil ;};func (_ddf Page )FindXObjectImages ()([]*Image ,error ){_gadb ,_aea :=_ddf .GetResourcesXObject ();
if !_aea {return nil ,nil ;};var _bcf []*Image ;var _ceg error ;_gda :=map[*_f .PdfObjectStream ]int {};_eff :=map[*_f .PdfObjectStream ]struct{}{};var _cce int ;for _ ,_gfe :=range _gadb .Keys (){_cfa ,_efb :=_f .GetStream (_gadb .Get (_gfe ));if !_efb {continue ;
};if _ ,_fae :=_gda [_cfa ];_fae {continue ;};_gagc ,_fec :=_f .GetName (_cfa .Get ("\u0053u\u0062\u0074\u0079\u0070\u0065"));if !_fec ||_gagc .String ()!="\u0049\u006d\u0061g\u0065"{continue ;};_dcg :=Image {BitsPerComponent :8,Stream :_cfa ,Name :string (_gfe )};
if _dcg .Colorspace ,_ceg =_bc (_cfa .PdfObjectDictionary .Get ("\u0043\u006f\u006c\u006f\u0072\u0053\u0070\u0061\u0063\u0065"));_ceg !=nil {_b .Log .Error ("\u0045\u0072\u0072\u006f\u0072\u0020\u0064\u0065\u0074\u0065r\u006d\u0069\u006e\u0065\u0020\u0063\u006fl\u006f\u0072\u0020\u0073\u0070\u0061\u0063\u0065\u0020\u0025\u0073",_ceg );
continue ;};if _agef ,_fbc :=_f .GetIntVal (_cfa .PdfObjectDictionary .Get ("\u0042\u0069t\u0073\u0050\u0065r\u0043\u006f\u006d\u0070\u006f\u006e\u0065\u006e\u0074"));_fbc {_dcg .BitsPerComponent =_agef ;};if _ad ,_aef :=_f .GetIntVal (_cfa .PdfObjectDictionary .Get ("\u0057\u0069\u0064t\u0068"));
_aef {_dcg .Width =_ad ;};if _bce ,_cgcd :=_f .GetIntVal (_cfa .PdfObjectDictionary .Get ("\u0048\u0065\u0069\u0067\u0068\u0074"));_cgcd {_dcg .Height =_bce ;};if _ebb ,_faa :=_f .GetStream (_cfa .Get ("\u0053\u004d\u0061s\u006b"));_faa {_dcg .SMask =&ImageSMask {Image :&_dcg ,Stream :_ebb };
_eff [_ebb ]=struct{}{};};switch _dcg .Colorspace {case "\u0044e\u0076\u0069\u0063\u0065\u0052\u0047B":_dcg .ColorComponents =3;case "\u0044\u0065\u0076\u0069\u0063\u0065\u0047\u0072\u0061\u0079":_dcg .ColorComponents =1;case "\u0044\u0065\u0076\u0069\u0063\u0065\u0043\u004d\u0059\u004b":_dcg .ColorComponents =4;
default:_dcg .ColorComponents =-1;};_gda [_cfa ]=_cce ;_bcf =append (_bcf ,&_dcg );_cce ++;};var _ebg []int ;for _ ,_aad :=range _bcf {if _aad .SMask !=nil {_fbe ,_gdff :=_gda [_aad .SMask .Stream ];if _gdff {_ebg =append (_ebg ,_fbe );};};};_ebgc :=make ([]*Image ,len (_bcf )-len (_ebg ));
_cce =0;_de :for _fdd ,_abg :=range _bcf {for _ ,_ecc :=range _ebg {if _fdd ==_ecc {continue _de ;};};_ebgc [_cce ]=_abg ;_cce ++;};return _bcf ,nil ;};func (_aeac *Content )SetData (data []byte )error {_gdb ,_cag :=_f .MakeStream (data ,_f .NewFlateEncoder ());
if _cag !=nil {return _cag ;};_eec ,_bbcd :=_f .GetArray (_aeac ._ed .Object .Get ("\u0043\u006f\u006e\u0074\u0065\u006e\u0074\u0073"));if !_bbcd &&_aeac ._dbf ==0{_aeac ._ed .Object .Set ("\u0043\u006f\u006e\u0074\u0065\u006e\u0074\u0073",_gdb );}else {if _cag =_eec .Set (_aeac ._dbf ,_gdb );
_cag !=nil {return _cag ;};};_aeac ._ed ._ce .Objects =append (_aeac ._ed ._ce .Objects ,_gdb );return nil ;};func (_gg *Document )AddIndirectObject (indirect *_f .PdfIndirectObject ){for _ ,_gf :=range _gg .Objects {if _gf ==indirect {return ;};};_gg .Objects =append (_gg .Objects ,indirect );
};func (_ag *Catalog )NewOutputIntents ()*OutputIntents {return &OutputIntents {_fdf :_ag ._e }};func (_agd Content )GetData ()([]byte ,error ){_gaa ,_ada :=_f .NewEncoderFromStream (_agd .Stream );if _ada !=nil {return nil ,_ada ;};_cca ,_ada :=_gaa .DecodeStream (_agd .Stream );
if _ada !=nil {return nil ,_ada ;};return _cca ,nil ;};func (_fdc *Page )Number ()int {return _fdc ._bbe };func (_cgg *Catalog )SetMetadata (data []byte )error {_gbf ,_cfg :=_f .MakeStream (data ,nil );if _cfg !=nil {return _cfg ;};_gbf .Set ("\u0054\u0079\u0070\u0065",_f .MakeName ("\u004d\u0065\u0074\u0061\u0064\u0061\u0074\u0061"));
_gbf .Set ("\u0053u\u0062\u0074\u0079\u0070\u0065",_f .MakeName ("\u0058\u004d\u004c"));_cgg .Object .Set ("\u004d\u0065\u0074\u0061\u0064\u0061\u0074\u0061",_gbf );_cgg ._e .Objects =append (_cgg ._e .Objects ,_gbf );return nil ;};func (_cgb Page )GetResourcesXObject ()(*_f .PdfObjectDictionary ,bool ){_aeb ,_abad :=_cgb .GetResources ();
if !_abad {return nil ,false ;};return _f .GetDict (_aeb .Get ("\u0058O\u0062\u006a\u0065\u0063\u0074"));};