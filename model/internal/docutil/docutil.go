//
// Copyright 2020 FoxyUtils ehf. All rights reserved.
//
// This is a commercial product and requires a license to operate.
// A trial license can be obtained at https://unidoc.io
//
// DO NOT EDIT: generated by unitwist Go source code obfuscator.
//
// Use of this source code is governed by the UniDoc End User License Agreement
// terms that can be accessed at https://unidoc.io/eula/

package docutil ;import (_g "errors";_e "fmt";_ee "github.com/unidoc/unipdf/v3/common";_gg "github.com/unidoc/unipdf/v3/core";);func (_ece *OutputIntents )Len ()int {return _ece ._ac .Len ()};func (_cafa Page )GetResources ()(*_gg .PdfObjectDictionary ,bool ){return _gg .GetDict (_cafa .Object .Get ("\u0052e\u0073\u006f\u0075\u0072\u0063\u0065s"));
};func (_beeb *Document )GetPages ()([]Page ,bool ){_dgf ,_cb :=_beeb .FindCatalog ();if !_cb {return nil ,false ;};return _dgf .GetPages ();};type Document struct{ID [2]string ;Version _gg .Version ;Objects []_gg .PdfObject ;Info _gg .PdfObject ;Crypt *_gg .PdfCrypt ;
UseHashBasedID bool ;};type ImageSMask struct{Image *Image ;Stream *_gg .PdfObjectStream ;};func (_bbg Page )FindXObjectForms ()[]*_gg .PdfObjectStream {_ecg ,_adae :=_bbg .GetResourcesXObject ();if !_adae {return nil ;};_cgcd :=map[*_gg .PdfObjectStream ]struct{}{};
var _gdfd func (_eac *_gg .PdfObjectDictionary ,_beg map[*_gg .PdfObjectStream ]struct{});_gdfd =func (_ffd *_gg .PdfObjectDictionary ,_eaa map[*_gg .PdfObjectStream ]struct{}){for _ ,_bfa :=range _ffd .Keys (){_fbd ,_aegd :=_gg .GetStream (_ffd .Get (_bfa ));
if !_aegd {continue ;};if _ ,_eaef :=_eaa [_fbd ];_eaef {continue ;};_gb ,_gab :=_gg .GetName (_fbd .Get ("\u0053u\u0062\u0074\u0079\u0070\u0065"));if !_gab ||_gb .String ()!="\u0046\u006f\u0072\u006d"{continue ;};_eaa [_fbd ]=struct{}{};_cf ,_gab :=_gg .GetDict (_fbd .Get ("\u0052e\u0073\u006f\u0075\u0072\u0063\u0065s"));
if !_gab {continue ;};_eaf ,_ggg :=_gg .GetDict (_cf .Get ("\u0058O\u0062\u006a\u0065\u0063\u0074"));if _ggg {_gdfd (_eaf ,_eaa );};};};_gdfd (_ecg ,_cgcd );var _gff []*_gg .PdfObjectStream ;for _ded :=range _cgcd {_gff =append (_gff ,_ded );};return _gff ;
};func (_eab Page )GetResourcesXObject ()(*_gg .PdfObjectDictionary ,bool ){_fba ,_eeb :=_eab .GetResources ();if !_eeb {return nil ,false ;};return _gg .GetDict (_fba .Get ("\u0058O\u0062\u006a\u0065\u0063\u0074"));};func (_bf *Catalog )SetStructTreeRoot (structTreeRoot _gg .PdfObject ){if structTreeRoot ==nil {_bf .Object .Remove ("\u0053\u0074\u0072\u0075\u0063\u0074\u0054\u0072\u0065e\u0052\u006f\u006f\u0074");
return ;};_fb :=_gg .MakeIndirectObject (structTreeRoot );_bf .Object .Set ("\u0053\u0074\u0072\u0075\u0063\u0074\u0054\u0072\u0065e\u0052\u006f\u006f\u0074",_fb );_bf ._c .Objects =append (_bf ._c .Objects ,_fb );};func (_db *Page )Number ()int {return _db ._aegc };
type OutputIntent struct{Object *_gg .PdfObjectDictionary ;};func _caf (_cae _gg .PdfObject )(_gg .PdfObjectName ,error ){var _gaea *_gg .PdfObjectName ;var _bge *_gg .PdfObjectArray ;if _bgg ,_beb :=_cae .(*_gg .PdfIndirectObject );_beb {if _fae ,_bbc :=_bgg .PdfObject .(*_gg .PdfObjectArray );
_bbc {_bge =_fae ;}else if _cef ,_ccg :=_bgg .PdfObject .(*_gg .PdfObjectName );_ccg {_gaea =_cef ;};}else if _aed ,_agc :=_cae .(*_gg .PdfObjectArray );_agc {_bge =_aed ;}else if _aeg ,_bbcf :=_cae .(*_gg .PdfObjectName );_bbcf {_gaea =_aeg ;};if _gaea !=nil {switch *_gaea {case "\u0044\u0065\u0076\u0069\u0063\u0065\u0047\u0072\u0061\u0079","\u0044e\u0076\u0069\u0063\u0065\u0052\u0047B","\u0044\u0065\u0076\u0069\u0063\u0065\u0043\u004d\u0059\u004b":return *_gaea ,nil ;
case "\u0050a\u0074\u0074\u0065\u0072\u006e":return *_gaea ,nil ;};};if _bge !=nil &&_bge .Len ()> 0{if _gcb ,_fag :=_bge .Get (0).(*_gg .PdfObjectName );_fag {switch *_gcb {case "\u0044\u0065\u0076\u0069\u0063\u0065\u0047\u0072\u0061\u0079","\u0044e\u0076\u0069\u0063\u0065\u0052\u0047B","\u0044\u0065\u0076\u0069\u0063\u0065\u0043\u004d\u0059\u004b":if _bge .Len ()==1{return *_gcb ,nil ;
};case "\u0043a\u006c\u0047\u0072\u0061\u0079","\u0043\u0061\u006c\u0052\u0047\u0042","\u004c\u0061\u0062":return *_gcb ,nil ;case "\u0049\u0043\u0043\u0042\u0061\u0073\u0065\u0064","\u0050a\u0074\u0074\u0065\u0072\u006e","\u0049n\u0064\u0065\u0078\u0065\u0064":return *_gcb ,nil ;
case "\u0053\u0065\u0070\u0061\u0072\u0061\u0074\u0069\u006f\u006e","\u0044e\u0076\u0069\u0063\u0065\u004e":return *_gcb ,nil ;};};};return "",nil ;};type Image struct{Name string ;Width int ;Height int ;Colorspace _gg .PdfObjectName ;ColorComponents int ;
BitsPerComponent int ;SMask *ImageSMask ;Stream *_gg .PdfObjectStream ;};func (_dee *Document )FindCatalog ()(*Catalog ,bool ){var _gag *_gg .PdfObjectDictionary ;for _ ,_fd :=range _dee .Objects {_ea ,_aaa :=_gg .GetDict (_fd );if !_aaa {continue ;};if _ae ,_ddcc :=_gg .GetName (_ea .Get ("\u0054\u0079\u0070\u0065"));
_ddcc &&*_ae =="\u0043a\u0074\u0061\u006c\u006f\u0067"{_gag =_ea ;break ;};};if _gag ==nil {return nil ,false ;};return &Catalog {Object :_gag ,_c :_dee },true ;};func (_bfe *Document )AddStream (stream *_gg .PdfObjectStream ){for _ ,_adf :=range _bfe .Objects {if _adf ==stream {return ;
};};_bfe .Objects =append (_bfe .Objects ,stream );};func (_cecb *Catalog )GetStructTreeRoot ()(*_gg .PdfObjectDictionary ,bool ){return _gg .GetDict (_cecb .Object .Get ("\u0053\u0074\u0072\u0075\u0063\u0074\u0054\u0072\u0065e\u0052\u006f\u006f\u0074"));
};func (_eea *OutputIntents )Add (oi _gg .PdfObject )error {_dda ,_ag :=oi .(*_gg .PdfObjectDictionary );if !_ag {return _g .New ("\u0069\u006e\u0070\u0075\u0074\u0020\u006f\u0075\u0074\u0070\u0075\u0074\u0020\u0069\u006e\u0074\u0065\u006et\u0020\u0073\u0068\u006f\u0075\u006c\u0064 \u0062\u0065\u0020\u0061\u006e\u0020\u006f\u0062\u006a\u0065\u0063t\u0020\u0064\u0069\u0063\u0074\u0069\u006f\u006e\u0061\u0072\u0079");
};if _dc ,_ca :=_gg .GetStream (_dda .Get ("\u0044\u0065\u0073\u0074\u004f\u0075\u0074\u0070\u0075\u0074\u0050\u0072o\u0066\u0069\u006c\u0065"));_ca {_eea ._ab .Objects =append (_eea ._ab .Objects ,_dc );};_aab ,_fbfb :=oi .(*_gg .PdfIndirectObject );if !_fbfb {_aab =_gg .MakeIndirectObject (oi );
};if _eea ._ac ==nil {_eea ._ac =_gg .MakeArray (_aab );}else {_eea ._ac .Append (_aab );};_eea ._ab .Objects =append (_eea ._ab .Objects ,_aab );return nil ;};func (_cab Page )FindXObjectImages ()([]*Image ,error ){_caba ,_cgc :=_cab .GetResourcesXObject ();
if !_cgc {return nil ,nil ;};var _ba []*Image ;var _ggb error ;_acg :=map[*_gg .PdfObjectStream ]int {};_df :=map[*_gg .PdfObjectStream ]struct{}{};var _gf int ;for _ ,_fea :=range _caba .Keys (){_dfd ,_af :=_gg .GetStream (_caba .Get (_fea ));if !_af {continue ;
};if _ ,_dcf :=_acg [_dfd ];_dcf {continue ;};_ccd ,_bc :=_gg .GetName (_dfd .Get ("\u0053u\u0062\u0074\u0079\u0070\u0065"));if !_bc ||_ccd .String ()!="\u0049\u006d\u0061g\u0065"{continue ;};_fbg :=Image {BitsPerComponent :8,Stream :_dfd ,Name :string (_fea )};
if _fbg .Colorspace ,_ggb =_caf (_dfd .PdfObjectDictionary .Get ("\u0043\u006f\u006c\u006f\u0072\u0053\u0070\u0061\u0063\u0065"));_ggb !=nil {_ee .Log .Error ("\u0045\u0072\u0072\u006f\u0072\u0020\u0064\u0065\u0074\u0065r\u006d\u0069\u006e\u0065\u0020\u0063\u006fl\u006f\u0072\u0020\u0073\u0070\u0061\u0063\u0065\u0020\u0025\u0073",_ggb );
continue ;};if _gecg ,_gcc :=_gg .GetIntVal (_dfd .PdfObjectDictionary .Get ("\u0042\u0069t\u0073\u0050\u0065r\u0043\u006f\u006d\u0070\u006f\u006e\u0065\u006e\u0074"));_gcc {_fbg .BitsPerComponent =_gecg ;};if _aee ,_bd :=_gg .GetIntVal (_dfd .PdfObjectDictionary .Get ("\u0057\u0069\u0064t\u0068"));
_bd {_fbg .Width =_aee ;};if _gef ,_aedb :=_gg .GetIntVal (_dfd .PdfObjectDictionary .Get ("\u0048\u0065\u0069\u0067\u0068\u0074"));_aedb {_fbg .Height =_gef ;};if _gdd ,_cbf :=_gg .GetStream (_dfd .Get ("\u0053\u004d\u0061s\u006b"));_cbf {_fbg .SMask =&ImageSMask {Image :&_fbg ,Stream :_gdd };
_df [_gdd ]=struct{}{};};switch _fbg .Colorspace {case "\u0044e\u0076\u0069\u0063\u0065\u0052\u0047B":_fbg .ColorComponents =3;case "\u0044\u0065\u0076\u0069\u0063\u0065\u0047\u0072\u0061\u0079":_fbg .ColorComponents =1;case "\u0044\u0065\u0076\u0069\u0063\u0065\u0043\u004d\u0059\u004b":_fbg .ColorComponents =4;
default:_fbg .ColorComponents =-1;};_acg [_dfd ]=_gf ;_ba =append (_ba ,&_fbg );_gf ++;};var _ccbg []int ;for _ ,_dfdf :=range _ba {if _dfdf .SMask !=nil {_aaae ,_bda :=_acg [_dfdf .SMask .Stream ];if _bda {_ccbg =append (_ccbg ,_aaae );};};};_gca :=make ([]*Image ,len (_ba )-len (_ccbg ));
_gf =0;_aeef :for _adb ,_bgf :=range _ba {for _ ,_eae :=range _ccbg {if _adb ==_eae {continue _aeef ;};};_gca [_gf ]=_bgf ;_gf ++;};return _ba ,nil ;};func (_ec *Catalog )SetVersion (){_ec .Object .Set ("\u0056e\u0072\u0073\u0069\u006f\u006e",_gg .MakeName (_e .Sprintf ("\u0025\u0064\u002e%\u0064",_ec ._c .Version .Major ,_ec ._c .Version .Minor )));
};func (_fbf *Catalog )SetMarkInfo (mi _gg .PdfObject ){if mi ==nil {_fbf .Object .Remove ("\u004d\u0061\u0072\u006b\u0049\u006e\u0066\u006f");return ;};_dd :=_gg .MakeIndirectObject (mi );_fbf .Object .Set ("\u004d\u0061\u0072\u006b\u0049\u006e\u0066\u006f",_dd );
_fbf ._c .Objects =append (_fbf ._c .Objects ,_dd );};func (_gdc *OutputIntents )Get (i int )(OutputIntent ,bool ){if _gdc ._ac ==nil {return OutputIntent {},false ;};if i >=_gdc ._ac .Len (){return OutputIntent {},false ;};_gdf :=_gdc ._ac .Get (i );_gae ,_cg :=_gg .GetIndirect (_gdf );
if !_cg {_acd ,_fc :=_gg .GetDict (_gdf );return OutputIntent {Object :_acd },_fc ;};_cce ,_ff :=_gg .GetDict (_gae .PdfObject );return OutputIntent {Object :_cce },_ff ;};func (_ad *Catalog )GetMetadata ()(*_gg .PdfObjectStream ,bool ){return _gg .GetStream (_ad .Object .Get ("\u004d\u0065\u0074\u0061\u0064\u0061\u0074\u0061"));
};type Content struct{Stream *_gg .PdfObjectStream ;_dcfd int ;_aff Page ;};func (_ef *Catalog )HasMetadata ()bool {_cd :=_ef .Object .Get ("\u004d\u0065\u0074\u0061\u0064\u0061\u0074\u0061");return _cd !=nil ;};func (_gbd *Content )SetData (data []byte )error {_cag ,_bdf :=_gg .MakeStream (data ,_gg .NewFlateEncoder ());
if _bdf !=nil {return _bdf ;};_aga ,_cbg :=_gg .GetArray (_gbd ._aff .Object .Get ("\u0043\u006f\u006e\u0074\u0065\u006e\u0074\u0073"));if !_cbg &&_gbd ._dcfd ==0{_gbd ._aff .Object .Set ("\u0043\u006f\u006e\u0074\u0065\u006e\u0074\u0073",_cag );}else {if _bdf =_aga .Set (_gbd ._dcfd ,_cag );
_bdf !=nil {return _bdf ;};};_gbd ._aff ._bggc .Objects =append (_gbd ._aff ._bggc .Objects ,_cag );return nil ;};func (_ecf Content )GetData ()([]byte ,error ){_ade ,_cdgd :=_gg .NewEncoderFromStream (_ecf .Stream );if _cdgd !=nil {return nil ,_cdgd ;
};_egd ,_cdgd :=_ade .DecodeStream (_ecf .Stream );if _cdgd !=nil {return nil ,_cdgd ;};return _egd ,nil ;};type Page struct{_aegc int ;Object *_gg .PdfObjectDictionary ;_bggc *Document ;};func (_gd *Catalog )NewOutputIntents ()*OutputIntents {return &OutputIntents {_ab :_gd ._c }};
func (_gga *Catalog )SetOutputIntents (outputIntents *OutputIntents ){if _ada :=_gga .Object .Get ("\u004f\u0075\u0074\u0070\u0075\u0074\u0049\u006e\u0074\u0065\u006e\u0074\u0073");_ada !=nil {for _eecg ,_be :=range _gga ._c .Objects {if _be ==_ada {if outputIntents ._eee ==_ada {return ;
};_gga ._c .Objects =append (_gga ._c .Objects [:_eecg ],_gga ._c .Objects [_eecg +1:]...);break ;};};};_ga :=outputIntents ._eee ;if _ga ==nil {_ga =_gg .MakeIndirectObject (outputIntents ._ac );};_gga .Object .Set ("\u004f\u0075\u0074\u0070\u0075\u0074\u0049\u006e\u0074\u0065\u006e\u0074\u0073",_ga );
_gga ._c .Objects =append (_gga ._c .Objects ,_ga );};type OutputIntents struct{_ac *_gg .PdfObjectArray ;_ab *Document ;_eee *_gg .PdfIndirectObject ;};type Catalog struct{Object *_gg .PdfObjectDictionary ;_c *Document ;};func (_bgb *Document )AddIndirectObject (indirect *_gg .PdfIndirectObject ){for _ ,_da :=range _bgb .Objects {if _da ==indirect {return ;
};};_bgb .Objects =append (_bgb .Objects ,indirect );};func (_eg *Catalog )GetMarkInfo ()(*_gg .PdfObjectDictionary ,bool ){_bg ,_ge :=_gg .GetDict (_eg .Object .Get ("\u004d\u0061\u0072\u006b\u0049\u006e\u0066\u006f"));return _bg ,_ge ;};func (_dg *Catalog )GetOutputIntents ()(*OutputIntents ,bool ){_ccb :=_dg .Object .Get ("\u004f\u0075\u0074\u0070\u0075\u0074\u0049\u006e\u0074\u0065\u006e\u0074\u0073");
if _ccb ==nil {return nil ,false ;};_gec ,_ddc :=_gg .GetIndirect (_ccb );if !_ddc {return nil ,false ;};_fe ,_bee :=_gg .GetArray (_gec .PdfObject );if !_bee {return nil ,false ;};return &OutputIntents {_eee :_gec ,_ac :_fe ,_ab :_dg ._c },true ;};func (_eef *Catalog )SetMetadata (data []byte )error {_cec ,_bb :=_gg .MakeStream (data ,nil );
if _bb !=nil {return _bb ;};_cec .Set ("\u0054\u0079\u0070\u0065",_gg .MakeName ("\u004d\u0065\u0074\u0061\u0064\u0061\u0074\u0061"));_cec .Set ("\u0053u\u0062\u0074\u0079\u0070\u0065",_gg .MakeName ("\u0058\u004d\u004c"));_eef .Object .Set ("\u004d\u0065\u0074\u0061\u0064\u0061\u0074\u0061",_cec );
_eef ._c .Objects =append (_eef ._c .Objects ,_cec );return nil ;};func (_fbb Page )GetContents ()([]Content ,bool ){_bgbd ,_aeb :=_gg .GetArray (_fbb .Object .Get ("\u0043\u006f\u006e\u0074\u0065\u006e\u0074\u0073"));if !_aeb {_efc ,_aaf :=_gg .GetStream (_fbb .Object .Get ("\u0043\u006f\u006e\u0074\u0065\u006e\u0074\u0073"));
if !_aaf {return nil ,false ;};return []Content {{Stream :_efc ,_aff :_fbb ,_dcfd :0}},true ;};_fde :=make ([]Content ,_bgbd .Len ());for _cdg ,_fg :=range _bgbd .Elements (){_eabg ,_aba :=_gg .GetStream (_fg );if !_aba {continue ;};_fde [_cdg ]=Content {Stream :_eabg ,_aff :_fbb ,_dcfd :_cdg };
};return _fde ,true ;};func (_f *Catalog )GetPages ()([]Page ,bool ){_cc ,_a :=_gg .GetDict (_f .Object .Get ("\u0050\u0061\u0067e\u0073"));if !_a {return nil ,false ;};_de ,_b :=_gg .GetArray (_cc .Get ("\u004b\u0069\u0064\u0073"));if !_b {return nil ,false ;
};_gc :=make ([]Page ,_de .Len ());for _fa ,_aa :=range _de .Elements (){_ce ,_eec :=_gg .GetDict (_aa );if !_eec {continue ;};_gc [_fa ]=Page {Object :_ce ,_aegc :_fa +1,_bggc :_f ._c };};return _gc ,true ;};