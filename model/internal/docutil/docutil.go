//
// Copyright 2020 FoxyUtils ehf. All rights reserved.
//
// This is a commercial product and requires a license to operate.
// A trial license can be obtained at https://unidoc.io
//
// DO NOT EDIT: generated by unitwist Go source code obfuscator.
//
// Use of this source code is governed by the UniDoc End User License Agreement
// terms that can be accessed at https://unidoc.io/eula/

package docutil ;import (_f "errors";_b "fmt";_bfe "github.com/unidoc/unipdf/v3/common";_bf "github.com/unidoc/unipdf/v3/core";);func (_ff *Catalog )SetMetadata (data []byte )error {_bfb ,_d :=_bf .MakeStream (data ,nil );if _d !=nil {return _d ;};_bfb .Set ("\u0054\u0079\u0070\u0065",_bf .MakeName ("\u004d\u0065\u0074\u0061\u0064\u0061\u0074\u0061"));
_bfb .Set ("\u0053u\u0062\u0074\u0079\u0070\u0065",_bf .MakeName ("\u0058\u004d\u004c"));_ff .Object .Set ("\u004d\u0065\u0074\u0061\u0064\u0061\u0074\u0061",_bfb );_ff ._g .Objects =append (_ff ._g .Objects ,_bfb );return nil ;};func (_bg *Catalog )HasMetadata ()bool {_gac :=_bg .Object .Get ("\u004d\u0065\u0074\u0061\u0064\u0061\u0074\u0061");
return _gac !=nil ;};type Content struct{Stream *_bf .PdfObjectStream ;_fgee int ;_aca Page ;};type OutputIntents struct{_db *_bf .PdfObjectArray ;_bd *Document ;_edf *_bf .PdfIndirectObject ;};func _bdb (_gdf _bf .PdfObject )(_bf .PdfObjectName ,error ){var _ffa *_bf .PdfObjectName ;
var _fcd *_bf .PdfObjectArray ;if _eb ,_fed :=_gdf .(*_bf .PdfIndirectObject );_fed {if _beg ,_da :=_eb .PdfObject .(*_bf .PdfObjectArray );_da {_fcd =_beg ;}else if _cee ,_ea :=_eb .PdfObject .(*_bf .PdfObjectName );_ea {_ffa =_cee ;};}else if _gb ,_gbd :=_gdf .(*_bf .PdfObjectArray );
_gbd {_fcd =_gb ;}else if _ddg ,_dfa :=_gdf .(*_bf .PdfObjectName );_dfa {_ffa =_ddg ;};if _ffa !=nil {switch *_ffa {case "\u0044\u0065\u0076\u0069\u0063\u0065\u0047\u0072\u0061\u0079","\u0044e\u0076\u0069\u0063\u0065\u0052\u0047B","\u0044\u0065\u0076\u0069\u0063\u0065\u0043\u004d\u0059\u004b":return *_ffa ,nil ;
case "\u0050a\u0074\u0074\u0065\u0072\u006e":return *_ffa ,nil ;};};if _fcd !=nil &&_fcd .Len ()> 0{if _cbe ,_dbd :=_fcd .Get (0).(*_bf .PdfObjectName );_dbd {switch *_cbe {case "\u0044\u0065\u0076\u0069\u0063\u0065\u0047\u0072\u0061\u0079","\u0044e\u0076\u0069\u0063\u0065\u0052\u0047B","\u0044\u0065\u0076\u0069\u0063\u0065\u0043\u004d\u0059\u004b":if _fcd .Len ()==1{return *_cbe ,nil ;
};case "\u0043a\u006c\u0047\u0072\u0061\u0079","\u0043\u0061\u006c\u0052\u0047\u0042","\u004c\u0061\u0062":return *_cbe ,nil ;case "\u0049\u0043\u0043\u0042\u0061\u0073\u0065\u0064","\u0050a\u0074\u0074\u0065\u0072\u006e","\u0049n\u0064\u0065\u0078\u0065\u0064":return *_cbe ,nil ;
case "\u0053\u0065\u0070\u0061\u0072\u0061\u0074\u0069\u006f\u006e","\u0044e\u0076\u0069\u0063\u0065\u004e":return *_cbe ,nil ;};};};return "",nil ;};func (_dba Content )GetData ()([]byte ,error ){_fggg ,_gae :=_bf .NewEncoderFromStream (_dba .Stream );
if _gae !=nil {return nil ,_gae ;};_ged ,_gae :=_fggg .DecodeStream (_dba .Stream );if _gae !=nil {return nil ,_gae ;};return _ged ,nil ;};func (_ffg *Catalog )GetOutputIntents ()(*OutputIntents ,bool ){_aee :=_ffg .Object .Get ("\u004f\u0075\u0074\u0070\u0075\u0074\u0049\u006e\u0074\u0065\u006e\u0074\u0073");
if _aee ==nil {return nil ,false ;};_bc ,_bba :=_bf .GetIndirect (_aee );if !_bba {return nil ,false ;};_cfd ,_cg :=_bf .GetArray (_bc .PdfObject );if !_cg {return nil ,false ;};return &OutputIntents {_edf :_bc ,_db :_cfd ,_bd :_ffg ._g },true ;};func (_ee *Catalog )GetMarkInfo ()(*_bf .PdfObjectDictionary ,bool ){_gdb ,_cc :=_bf .GetDict (_ee .Object .Get ("\u004d\u0061\u0072\u006b\u0049\u006e\u0066\u006f"));
return _gdb ,_cc ;};func (_cd *OutputIntents )Len ()int {return _cd ._db .Len ()};type OutputIntent struct{Object *_bf .PdfObjectDictionary ;};func (_bea Page )GetContents ()([]Content ,bool ){_gaa ,_adf :=_bf .GetArray (_bea .Object .Get ("\u0043\u006f\u006e\u0074\u0065\u006e\u0074\u0073"));
if !_adf {_ec ,_bbc :=_bf .GetStream (_bea .Object .Get ("\u0043\u006f\u006e\u0074\u0065\u006e\u0074\u0073"));if !_bbc {return nil ,false ;};return []Content {{Stream :_ec ,_aca :_bea ,_fgee :0}},true ;};_de :=make ([]Content ,_gaa .Len ());for _bbb ,_bad :=range _gaa .Elements (){_dda ,_cbc :=_bf .GetStream (_bad );
if !_cbc {continue ;};_de [_bbb ]=Content {Stream :_dda ,_aca :_bea ,_fgee :_bbb };};return _de ,true ;};func (_c *Catalog )GetPages ()([]Page ,bool ){_bb ,_fg :=_bf .GetDict (_c .Object .Get ("\u0050\u0061\u0067e\u0073"));if !_fg {return nil ,false ;};
_e ,_bfa :=_bf .GetArray (_bb .Get ("\u004b\u0069\u0064\u0073"));if !_bfa {return nil ,false ;};_gd :=make ([]Page ,_e .Len ());for _ae ,_fe :=range _e .Elements (){_gc ,_ga :=_bf .GetDict (_fe );if !_ga {continue ;};_gd [_ae ]=Page {Object :_gc ,_dc :_ae +1,_gcd :_c ._g };
};return _gd ,true ;};type Document struct{ID [2]string ;Version _bf .Version ;Objects []_bf .PdfObject ;Info _bf .PdfObject ;Crypt *_bf .PdfCrypt ;UseHashBasedID bool ;};func (_edfb *OutputIntents )Get (i int )(OutputIntent ,bool ){if _edfb ._db ==nil {return OutputIntent {},false ;
};if i >=_edfb ._db .Len (){return OutputIntent {},false ;};_ceb :=_edfb ._db .Get (i );_af ,_df :=_bf .GetIndirect (_ceb );if !_df {_bda ,_aeea :=_bf .GetDict (_ceb );return OutputIntent {Object :_bda },_aeea ;};_cgd ,_dd :=_bf .GetDict (_af .PdfObject );
return OutputIntent {Object :_cgd },_dd ;};func (_be *Document )AddIndirectObject (indirect *_bf .PdfIndirectObject ){for _ ,_cb :=range _be .Objects {if _cb ==indirect {return ;};};_be .Objects =append (_be .Objects ,indirect );};func (_fa Page )GetResources ()(*_bf .PdfObjectDictionary ,bool ){return _bf .GetDict (_fa .Object .Get ("\u0052e\u0073\u006f\u0075\u0072\u0063\u0065s"));
};func (_ca *Document )AddStream (stream *_bf .PdfObjectStream ){for _ ,_afe :=range _ca .Objects {if _afe ==stream {return ;};};_ca .Objects =append (_ca .Objects ,stream );};func (_ad *Catalog )GetMetadata ()(*_bf .PdfObjectStream ,bool ){_ed ,_ge :=_bf .GetStream (_ad .Object .Get ("\u004d\u0065\u0074\u0061\u0064\u0061\u0074\u0061"));
return _ed ,_ge ;};func (_ede *Document )FindCatalog ()(*Catalog ,bool ){var _ba *_bf .PdfObjectDictionary ;for _ ,_ada :=range _ede .Objects {_ac ,_bga :=_bf .GetDict (_ada );if !_bga {continue ;};if _fgg ,_bbe :=_bf .GetName (_ac .Get ("\u0054\u0079\u0070\u0065"));
_bbe &&*_fgg =="\u0043a\u0074\u0061\u006c\u006f\u0067"{_ba =_ac ;break ;};};if _ba ==nil {return nil ,false ;};return &Catalog {Object :_ba ,_g :_ede },true ;};func (_cf *Catalog )SetOutputIntents (outputIntents *OutputIntents ){if _edb :=_cf .Object .Get ("\u004f\u0075\u0074\u0070\u0075\u0074\u0049\u006e\u0074\u0065\u006e\u0074\u0073");
_edb !=nil {for _ce ,_fee :=range _cf ._g .Objects {if _fee ==_edb {if outputIntents ._edf ==_edb {return ;};_cf ._g .Objects =append (_cf ._g .Objects [:_ce ],_cf ._g .Objects [_ce +1:]...);break ;};};};_ef :=outputIntents ._edf ;if _ef ==nil {_ef =_bf .MakeIndirectObject (outputIntents ._db );
};_cf .Object .Set ("\u004f\u0075\u0074\u0070\u0075\u0074\u0049\u006e\u0074\u0065\u006e\u0074\u0073",_ef );_cf ._g .Objects =append (_cf ._g .Objects ,_ef );};func (_caf *Content )SetData (data []byte )error {_ccf ,_agb :=_bf .MakeStream (data ,_bf .NewFlateEncoder ());
if _agb !=nil {return _agb ;};_acda ,_fdg :=_bf .GetArray (_caf ._aca .Object .Get ("\u0043\u006f\u006e\u0074\u0065\u006e\u0074\u0073"));if !_fdg &&_caf ._fgee ==0{_caf ._aca .Object .Set ("\u0043\u006f\u006e\u0074\u0065\u006e\u0074\u0073",_ccf );}else {if _agb =_acda .Set (_caf ._fgee ,_ccf );
_agb !=nil {return _agb ;};};_caf ._aca ._gcd .Objects =append (_caf ._aca ._gcd .Objects ,_ccf );return nil ;};func (_ab *Catalog )SetVersion (){_ab .Object .Set ("\u0056e\u0072\u0073\u0069\u006f\u006e",_bf .MakeName (_b .Sprintf ("\u0025\u0064\u002e%\u0064",_ab ._g .Version .Major ,_ab ._g .Version .Minor )));
};func (_aa *Page )Number ()int {return _aa ._dc };func (_eg *Document )GetPages ()([]Page ,bool ){_baf ,_afc :=_eg .FindCatalog ();if !_afc {return nil ,false ;};return _baf .GetPages ();};func (_ccd Page )GetResourcesXObject ()(*_bf .PdfObjectDictionary ,bool ){_adg ,_aeed :=_ccd .GetResources ();
if !_aeed {return nil ,false ;};return _bf .GetDict (_adg .Get ("\u0058O\u0062\u006a\u0065\u0063\u0074"));};type Catalog struct{Object *_bf .PdfObjectDictionary ;_g *Document ;};func (_bdd *OutputIntents )Add (oi _bf .PdfObject )error {_cde ,_fc :=oi .(*_bf .PdfObjectDictionary );
if !_fc {return _f .New ("\u0069\u006e\u0070\u0075\u0074\u0020\u006f\u0075\u0074\u0070\u0075\u0074\u0020\u0069\u006e\u0074\u0065\u006et\u0020\u0073\u0068\u006f\u0075\u006c\u0064 \u0062\u0065\u0020\u0061\u006e\u0020\u006f\u0062\u006a\u0065\u0063t\u0020\u0064\u0069\u0063\u0074\u0069\u006f\u006e\u0061\u0072\u0079");
};if _bgb ,_fff :=_bf .GetStream (_cde .Get ("\u0044\u0065\u0073\u0074\u004f\u0075\u0074\u0070\u0075\u0074\u0050\u0072o\u0066\u0069\u006c\u0065"));_fff {_bdd ._bd .Objects =append (_bdd ._bd .Objects ,_bgb );};_fea ,_ffb :=oi .(*_bf .PdfIndirectObject );
if !_ffb {_fea =_bf .MakeIndirectObject (oi );};if _bdd ._db ==nil {_bdd ._db =_bf .MakeArray (_fea );}else {_bdd ._db .Append (_fea );};_bdd ._bd .Objects =append (_bdd ._bd .Objects ,_fea );return nil ;};func (_ade *Catalog )SetMarkInfo (mi _bf .PdfObject ){_cca :=_bf .MakeIndirectObject (mi );
_ade .Object .Set ("\u004d\u0061\u0072\u006b\u0049\u006e\u0066\u006f",_cca );_ade ._g .Objects =append (_ade ._g .Objects ,_cca );};func (_fedd Page )FindXObjectImages ()([]*Image ,error ){_fef ,_gf :=_fedd .GetResourcesXObject ();if !_gf {return nil ,nil ;
};var _beae []*Image ;var _abc error ;_cfaa :=map[*_bf .PdfObjectStream ]int {};_begd :=map[*_bf .PdfObjectStream ]struct{}{};var _bec int ;for _ ,_cab :=range _fef .Keys (){_efc ,_feeb :=_bf .GetStream (_fef .Get (_cab ));if !_feeb {continue ;};if _ ,_gaad :=_cfaa [_efc ];
_gaad {continue ;};_cac ,_ded :=_bf .GetName (_efc .Get ("\u0053u\u0062\u0074\u0079\u0070\u0065"));if !_ded ||_cac .String ()!="\u0049\u006d\u0061g\u0065"{continue ;};_dcd :=Image {BitsPerComponent :8,Stream :_efc ,Name :string (_cab )};if _dcd .Colorspace ,_abc =_bdb (_efc .PdfObjectDictionary .Get ("\u0043\u006f\u006c\u006f\u0072\u0053\u0070\u0061\u0063\u0065"));
_abc !=nil {_bfe .Log .Error ("\u0045\u0072\u0072\u006f\u0072\u0020\u0064\u0065\u0074\u0065r\u006d\u0069\u006e\u0065\u0020\u0063\u006fl\u006f\u0072\u0020\u0073\u0070\u0061\u0063\u0065\u0020\u0025\u0073",_abc );continue ;};if _cda ,_dce :=_bf .GetIntVal (_efc .PdfObjectDictionary .Get ("\u0042\u0069t\u0073\u0050\u0065r\u0043\u006f\u006d\u0070\u006f\u006e\u0065\u006e\u0074"));
_dce {_dcd .BitsPerComponent =_cda ;};if _efg ,_gcc :=_bf .GetIntVal (_efc .PdfObjectDictionary .Get ("\u0057\u0069\u0064t\u0068"));_gcc {_dcd .Width =_efg ;};if _gda ,_bge :=_bf .GetIntVal (_efc .PdfObjectDictionary .Get ("\u0048\u0065\u0069\u0067\u0068\u0074"));
_bge {_dcd .Height =_gda ;};if _ag ,_geb :=_bf .GetStream (_efc .Get ("\u0053\u004d\u0061s\u006b"));_geb {_dcd .SMask =&ImageSMask {Image :&_dcd ,Stream :_ag };_begd [_ag ]=struct{}{};};switch _dcd .Colorspace {case "\u0044e\u0076\u0069\u0063\u0065\u0052\u0047B":_dcd .ColorComponents =3;
case "\u0044\u0065\u0076\u0069\u0063\u0065\u0047\u0072\u0061\u0079":_dcd .ColorComponents =1;case "\u0044\u0065\u0076\u0069\u0063\u0065\u0043\u004d\u0059\u004b":_dcd .ColorComponents =4;default:_dcd .ColorComponents =-1;};_cfaa [_efc ]=_bec ;_beae =append (_beae ,&_dcd );
_bec ++;};var _ddb []int ;for _ ,_dfb :=range _beae {if _dfb .SMask !=nil {_fb ,_fad :=_cfaa [_dfb .SMask .Stream ];if _fad {_ddb =append (_ddb ,_fb );};};};_gga :=make ([]*Image ,len (_beae )-len (_ddb ));_bec =0;_fbe :for _eec ,_eff :=range _beae {for _ ,_acd :=range _ddb {if _eec ==_acd {continue _fbe ;
};};_gga [_bec ]=_eff ;_bec ++;};return _beae ,nil ;};type Image struct{Name string ;Width int ;Height int ;Colorspace _bf .PdfObjectName ;ColorComponents int ;BitsPerComponent int ;SMask *ImageSMask ;Stream *_bf .PdfObjectStream ;};type ImageSMask struct{Image *Image ;
Stream *_bf .PdfObjectStream ;};func (_bfee *Catalog )NewOutputIntents ()*OutputIntents {return &OutputIntents {_bd :_bfee ._g }};type Page struct{_dc int ;Object *_bf .PdfObjectDictionary ;_gcd *Document ;};func (_abb Page )FindXObjectForms ()[]*_bf .PdfObjectStream {_bdg ,_ddeg :=_abb .GetResourcesXObject ();
if !_ddeg {return nil ;};_fge :=map[*_bf .PdfObjectStream ]struct{}{};var _gbf func (_cea *_bf .PdfObjectDictionary ,_gace map[*_bf .PdfObjectStream ]struct{});_gbf =func (_cgg *_bf .PdfObjectDictionary ,_fgd map[*_bf .PdfObjectStream ]struct{}){for _ ,_bgc :=range _cgg .Keys (){_cgdf ,_afee :=_bf .GetStream (_cgg .Get (_bgc ));
if !_afee {continue ;};if _ ,_bde :=_fgd [_cgdf ];_bde {continue ;};_cfb ,_feff :=_bf .GetName (_cgdf .Get ("\u0053u\u0062\u0074\u0079\u0070\u0065"));if !_feff ||_cfb .String ()!="\u0046\u006f\u0072\u006d"{continue ;};_fgd [_cgdf ]=struct{}{};_gff ,_feff :=_bf .GetDict (_cgdf .Get ("\u0052e\u0073\u006f\u0075\u0072\u0063\u0065s"));
if !_feff {continue ;};_eea ,_gfa :=_bf .GetDict (_gff .Get ("\u0058O\u0062\u006a\u0065\u0063\u0074"));if _gfa {_gbf (_eea ,_fgd );};};};_gbf (_bdg ,_fge );var _fae []*_bf .PdfObjectStream ;for _dbe :=range _fge {_fae =append (_fae ,_dbe );};return _fae ;
};