//
// Copyright 2020 FoxyUtils ehf. All rights reserved.
//
// This is a commercial product and requires a license to operate.
// A trial license can be obtained at https://unidoc.io
//
// DO NOT EDIT: generated by unitwist Go source code obfuscator.
//
// Use of this source code is governed by the UniDoc End User License Agreement
// terms that can be accessed at https://unidoc.io/eula/

package docutil ;import (_f "errors";_db "fmt";_bc "github.com/unidoc/unipdf/v3/common";_b "github.com/unidoc/unipdf/v3/core";);func (_eb *Catalog )NewOutputIntents ()*OutputIntents {return &OutputIntents {_caf :_eb ._bf }};func (_bgb *OutputIntents )Len ()int {return _bgb ._ccf .Len ()};
func (_fe *Catalog )GetMetadata ()(*_b .PdfObjectStream ,bool ){return _b .GetStream (_fe .Object .Get ("\u004d\u0065\u0074\u0061\u0064\u0061\u0074\u0061"));};func (_bcc Content )GetData ()([]byte ,error ){_bab ,_aggb :=_b .NewEncoderFromStream (_bcc .Stream );
if _aggb !=nil {return nil ,_aggb ;};_agc ,_aggb :=_bab .DecodeStream (_bcc .Stream );if _aggb !=nil {return nil ,_aggb ;};return _agc ,nil ;};func (_fa *Catalog )SetMarkInfo (mi _b .PdfObject ){if mi ==nil {_fa .Object .Remove ("\u004d\u0061\u0072\u006b\u0049\u006e\u0066\u006f");
return ;};_ce :=_b .MakeIndirectObject (mi );_fa .Object .Set ("\u004d\u0061\u0072\u006b\u0049\u006e\u0066\u006f",_ce );_fa ._bf .Objects =append (_fa ._bf .Objects ,_ce );};func (_eaa Page )GetResourcesXObject ()(*_b .PdfObjectDictionary ,bool ){_bbf ,_ec :=_eaa .GetResources ();
if !_ec {return nil ,false ;};return _b .GetDict (_bbf .Get ("\u0058O\u0062\u006a\u0065\u0063\u0074"));};type Content struct{Stream *_b .PdfObjectStream ;_gfc int ;_aecc Page ;};func (_c *Catalog )GetPages ()([]Page ,bool ){_a ,_gf :=_b .GetDict (_c .Object .Get ("\u0050\u0061\u0067e\u0073"));
if !_gf {return nil ,false ;};_ab ,_bb :=_b .GetArray (_a .Get ("\u004b\u0069\u0064\u0073"));if !_bb {return nil ,false ;};_ff :=make ([]Page ,_ab .Len ());for _cf ,_e :=range _ab .Elements (){_cd ,_ae :=_b .GetDict (_e );if !_ae {continue ;};_ff [_cf ]=Page {Object :_cd ,_bgbf :_cf +1,_fac :_c ._bf };
};return _ff ,true ;};func (_dg *Content )SetData (data []byte )error {_gdd ,_cff :=_b .MakeStream (data ,_b .NewFlateEncoder ());if _cff !=nil {return _cff ;};_bef ,_fffa :=_b .GetArray (_dg ._aecc .Object .Get ("\u0043\u006f\u006e\u0074\u0065\u006e\u0074\u0073"));
if !_fffa &&_dg ._gfc ==0{_dg ._aecc .Object .Set ("\u0043\u006f\u006e\u0074\u0065\u006e\u0074\u0073",_gdd );}else {if _cff =_bef .Set (_dg ._gfc ,_gdd );_cff !=nil {return _cff ;};};_dg ._aecc ._fac .Objects =append (_dg ._aecc ._fac .Objects ,_gdd );
return nil ;};func (_fgf *Document )AddStream (stream *_b .PdfObjectStream ){for _ ,_fc :=range _fgf .Objects {if _fc ==stream {return ;};};_fgf .Objects =append (_fgf .Objects ,stream );};type Image struct{Name string ;Width int ;Height int ;Colorspace _b .PdfObjectName ;
ColorComponents int ;BitsPerComponent int ;SMask *ImageSMask ;Stream *_b .PdfObjectStream ;};func (_aee *Document )FindCatalog ()(*Catalog ,bool ){var _fd *_b .PdfObjectDictionary ;for _ ,_ed :=range _aee .Objects {_def ,_cdf :=_b .GetDict (_ed );if !_cdf {continue ;
};if _aeg ,_agg :=_b .GetName (_def .Get ("\u0054\u0079\u0070\u0065"));_agg &&*_aeg =="\u0043a\u0074\u0061\u006c\u006f\u0067"{_fd =_def ;break ;};};if _fd ==nil {return nil ,false ;};return &Catalog {Object :_fd ,_bf :_aee },true ;};func (_ggg Page )FindXObjectForms ()[]*_b .PdfObjectStream {_gcc ,_bde :=_ggg .GetResourcesXObject ();
if !_bde {return nil ;};_beaa :=map[*_b .PdfObjectStream ]struct{}{};var _dbfg func (_dae *_b .PdfObjectDictionary ,_ade map[*_b .PdfObjectStream ]struct{});_dbfg =func (_gbe *_b .PdfObjectDictionary ,_fde map[*_b .PdfObjectStream ]struct{}){for _ ,_dcc :=range _gbe .Keys (){_cfb ,_ebda :=_b .GetStream (_gbe .Get (_dcc ));
if !_ebda {continue ;};if _ ,_dac :=_fde [_cfb ];_dac {continue ;};_cac ,_cacc :=_b .GetName (_cfb .Get ("\u0053u\u0062\u0074\u0079\u0070\u0065"));if !_cacc ||_cac .String ()!="\u0046\u006f\u0072\u006d"{continue ;};_fde [_cfb ]=struct{}{};_fca ,_cacc :=_b .GetDict (_cfb .Get ("\u0052e\u0073\u006f\u0075\u0072\u0063\u0065s"));
if !_cacc {continue ;};_cae ,_ggf :=_b .GetDict (_fca .Get ("\u0058O\u0062\u006a\u0065\u0063\u0074"));if _ggf {_dbfg (_cae ,_fde );};};};_dbfg (_gcc ,_beaa );var _egg []*_b .PdfObjectStream ;for _dab :=range _beaa {_egg =append (_egg ,_dab );};return _egg ;
};type Document struct{ID [2]string ;Version _b .Version ;Objects []_b .PdfObject ;Info _b .PdfObject ;Crypt *_b .PdfCrypt ;UseHashBasedID bool ;};type ImageSMask struct{Image *Image ;Stream *_b .PdfObjectStream ;};type OutputIntent struct{Object *_b .PdfObjectDictionary ;
};type Catalog struct{Object *_b .PdfObjectDictionary ;_bf *Document ;};func (_cfc *Document )GetPages ()([]Page ,bool ){_bbe ,_cce :=_cfc .FindCatalog ();if !_cce {return nil ,false ;};return _bbe .GetPages ();};func (_fg *Catalog )SetOutputIntents (outputIntents *OutputIntents ){if _bg :=_fg .Object .Get ("\u004f\u0075\u0074\u0070\u0075\u0074\u0049\u006e\u0074\u0065\u006e\u0074\u0073");
_bg !=nil {for _cc ,_aec :=range _fg ._bf .Objects {if _aec ==_bg {if outputIntents ._ag ==_bg {return ;};_fg ._bf .Objects =append (_fg ._bf .Objects [:_cc ],_fg ._bf .Objects [_cc +1:]...);break ;};};};_gd :=outputIntents ._ag ;if _gd ==nil {_gd =_b .MakeIndirectObject (outputIntents ._ccf );
};_fg .Object .Set ("\u004f\u0075\u0074\u0070\u0075\u0074\u0049\u006e\u0074\u0065\u006e\u0074\u0073",_gd );_fg ._bf .Objects =append (_fg ._bf .Objects ,_gd );};func (_gfe *Catalog )GetStructTreeRoot ()(*_b .PdfObjectDictionary ,bool ){return _b .GetDict (_gfe .Object .Get ("\u0053\u0074\u0072\u0075\u0063\u0074\u0054\u0072\u0065e\u0052\u006f\u006f\u0074"));
};func (_g *Catalog )SetVersion (){_g .Object .Set ("\u0056e\u0072\u0073\u0069\u006f\u006e",_b .MakeName (_db .Sprintf ("\u0025\u0064\u002e%\u0064",_g ._bf .Version .Major ,_g ._bf .Version .Minor )));};func (_fef *Catalog )GetMarkInfo ()(*_b .PdfObjectDictionary ,bool ){_abd ,_bbg :=_b .GetDict (_fef .Object .Get ("\u004d\u0061\u0072\u006b\u0049\u006e\u0066\u006f"));
return _abd ,_bbg ;};func _eac (_eab _b .PdfObject )(_b .PdfObjectName ,error ){var _eg *_b .PdfObjectName ;var _fea *_b .PdfObjectArray ;if _bga ,_aggg :=_eab .(*_b .PdfIndirectObject );_aggg {if _cec ,_ee :=_bga .PdfObject .(*_b .PdfObjectArray );_ee {_fea =_cec ;
}else if _cg ,_ba :=_bga .PdfObject .(*_b .PdfObjectName );_ba {_eg =_cg ;};}else if _ccc ,_ad :=_eab .(*_b .PdfObjectArray );_ad {_fea =_ccc ;}else if _cdd ,_fgb :=_eab .(*_b .PdfObjectName );_fgb {_eg =_cdd ;};if _eg !=nil {switch *_eg {case "\u0044\u0065\u0076\u0069\u0063\u0065\u0047\u0072\u0061\u0079","\u0044e\u0076\u0069\u0063\u0065\u0052\u0047B","\u0044\u0065\u0076\u0069\u0063\u0065\u0043\u004d\u0059\u004b":return *_eg ,nil ;
case "\u0050a\u0074\u0074\u0065\u0072\u006e":return *_eg ,nil ;};};if _fea !=nil &&_fea .Len ()> 0{if _ac ,_ebd :=_fea .Get (0).(*_b .PdfObjectName );_ebd {switch *_ac {case "\u0044\u0065\u0076\u0069\u0063\u0065\u0047\u0072\u0061\u0079","\u0044e\u0076\u0069\u0063\u0065\u0052\u0047B","\u0044\u0065\u0076\u0069\u0063\u0065\u0043\u004d\u0059\u004b":if _fea .Len ()==1{return *_ac ,nil ;
};case "\u0043a\u006c\u0047\u0072\u0061\u0079","\u0043\u0061\u006c\u0052\u0047\u0042","\u004c\u0061\u0062":return *_ac ,nil ;case "\u0049\u0043\u0043\u0042\u0061\u0073\u0065\u0064","\u0050a\u0074\u0074\u0065\u0072\u006e","\u0049n\u0064\u0065\u0078\u0065\u0064":return *_ac ,nil ;
case "\u0053\u0065\u0070\u0061\u0072\u0061\u0074\u0069\u006f\u006e","\u0044e\u0076\u0069\u0063\u0065\u004e":return *_ac ,nil ;};};};return "",nil ;};func (_fff *Catalog )HasMetadata ()bool {_ea :=_fff .Object .Get ("\u004d\u0065\u0074\u0061\u0064\u0061\u0074\u0061");
return _ea !=nil ;};type Page struct{_bgbf int ;Object *_b .PdfObjectDictionary ;_fac *Document ;};func (_dcb *Document )AddIndirectObject (indirect *_b .PdfIndirectObject ){for _ ,_gb :=range _dcb .Objects {if _gb ==indirect {return ;};};_dcb .Objects =append (_dcb .Objects ,indirect );
};type OutputIntents struct{_ccf *_b .PdfObjectArray ;_caf *Document ;_ag *_b .PdfIndirectObject ;};func (_df *Catalog )SetMetadata (data []byte )error {_ca ,_dc :=_b .MakeStream (data ,nil );if _dc !=nil {return _dc ;};_ca .Set ("\u0054\u0079\u0070\u0065",_b .MakeName ("\u004d\u0065\u0074\u0061\u0064\u0061\u0074\u0061"));
_ca .Set ("\u0053u\u0062\u0074\u0079\u0070\u0065",_b .MakeName ("\u0058\u004d\u004c"));_df .Object .Set ("\u004d\u0065\u0074\u0061\u0064\u0061\u0074\u0061",_ca );_df ._bf .Objects =append (_df ._bf .Objects ,_ca );return nil ;};func (_dbb Page )GetResources ()(*_b .PdfObjectDictionary ,bool ){return _b .GetDict (_dbb .Object .Get ("\u0052e\u0073\u006f\u0075\u0072\u0063\u0065s"));
};func (_eee Page )FindXObjectImages ()([]*Image ,error ){_bgc ,_ecg :=_eee .GetResourcesXObject ();if !_ecg {return nil ,nil ;};var _eeb []*Image ;var _ebg error ;_bag :=map[*_b .PdfObjectStream ]int {};_ede :=map[*_b .PdfObjectStream ]struct{}{};var _abc int ;
for _ ,_dad :=range _bgc .Keys (){_cdfb ,_ffd :=_b .GetStream (_bgc .Get (_dad ));if !_ffd {continue ;};if _ ,_gee :=_bag [_cdfb ];_gee {continue ;};_ef ,_acd :=_b .GetName (_cdfb .Get ("\u0053u\u0062\u0074\u0079\u0070\u0065"));if !_acd ||_ef .String ()!="\u0049\u006d\u0061g\u0065"{continue ;
};_aa :=Image {BitsPerComponent :8,Stream :_cdfb ,Name :string (_dad )};if _aa .Colorspace ,_ebg =_eac (_cdfb .PdfObjectDictionary .Get ("\u0043\u006f\u006c\u006f\u0072\u0053\u0070\u0061\u0063\u0065"));_ebg !=nil {_bc .Log .Error ("\u0045\u0072\u0072\u006f\u0072\u0020\u0064\u0065\u0074\u0065r\u006d\u0069\u006e\u0065\u0020\u0063\u006fl\u006f\u0072\u0020\u0073\u0070\u0061\u0063\u0065\u0020\u0025\u0073",_ebg );
continue ;};if _egb ,_cca :=_b .GetIntVal (_cdfb .PdfObjectDictionary .Get ("\u0042\u0069t\u0073\u0050\u0065r\u0043\u006f\u006d\u0070\u006f\u006e\u0065\u006e\u0074"));_cca {_aa .BitsPerComponent =_egb ;};if _gbdb ,_eff :=_b .GetIntVal (_cdfb .PdfObjectDictionary .Get ("\u0057\u0069\u0064t\u0068"));
_eff {_aa .Width =_gbdb ;};if _fed ,_bae :=_b .GetIntVal (_cdfb .PdfObjectDictionary .Get ("\u0048\u0065\u0069\u0067\u0068\u0074"));_bae {_aa .Height =_fed ;};if _bea ,_bdg :=_b .GetStream (_cdfb .Get ("\u0053\u004d\u0061s\u006b"));_bdg {_aa .SMask =&ImageSMask {Image :&_aa ,Stream :_bea };
_ede [_bea ]=struct{}{};};switch _aa .Colorspace {case "\u0044e\u0076\u0069\u0063\u0065\u0052\u0047B":_aa .ColorComponents =3;case "\u0044\u0065\u0076\u0069\u0063\u0065\u0047\u0072\u0061\u0079":_aa .ColorComponents =1;case "\u0044\u0065\u0076\u0069\u0063\u0065\u0043\u004d\u0059\u004b":_aa .ColorComponents =4;
default:_aa .ColorComponents =-1;};_bag [_cdfb ]=_abc ;_eeb =append (_eeb ,&_aa );_abc ++;};var _eebb []int ;for _ ,_efb :=range _eeb {if _efb .SMask !=nil {_gc ,_bca :=_bag [_efb .SMask .Stream ];if _bca {_eebb =append (_eebb ,_gc );};};};_cee :=make ([]*Image ,len (_eeb )-len (_eebb ));
_abc =0;_dbf :for _cga ,_efa :=range _eeb {for _ ,_deb :=range _eebb {if _cga ==_deb {continue _dbf ;};};_cee [_abc ]=_efa ;_abc ++;};return _eeb ,nil ;};func (_gdc Page )GetContents ()([]Content ,bool ){_cdc ,_egd :=_b .GetArray (_gdc .Object .Get ("\u0043\u006f\u006e\u0074\u0065\u006e\u0074\u0073"));
if !_egd {_gdb ,_ded :=_b .GetStream (_gdc .Object .Get ("\u0043\u006f\u006e\u0074\u0065\u006e\u0074\u0073"));if !_ded {return nil ,false ;};return []Content {{Stream :_gdb ,_aecc :_gdc ,_gfc :0}},true ;};_gbd :=make ([]Content ,_cdc .Len ());for _da ,_eaca :=range _cdc .Elements (){_ga ,_fb :=_b .GetStream (_eaca );
if !_fb {continue ;};_gbd [_da ]=Content {Stream :_ga ,_aecc :_gdc ,_gfc :_da };};return _gbd ,true ;};func (_bcd *Catalog )GetOutputIntents ()(*OutputIntents ,bool ){_de :=_bcd .Object .Get ("\u004f\u0075\u0074\u0070\u0075\u0074\u0049\u006e\u0074\u0065\u006e\u0074\u0073");
if _de ==nil {return nil ,false ;};_fga ,_faa :=_b .GetIndirect (_de );if !_faa {return nil ,false ;};_ddg ,_ge :=_b .GetArray (_fga .PdfObject );if !_ge {return nil ,false ;};return &OutputIntents {_ag :_fga ,_ccf :_ddg ,_caf :_bcd ._bf },true ;};func (_ebe *Page )Number ()int {return _ebe ._bgbf };
func (_dcf *OutputIntents )Add (oi _b .PdfObject )error {_ead ,_bd :=oi .(*_b .PdfObjectDictionary );if !_bd {return _f .New ("\u0069\u006e\u0070\u0075\u0074\u0020\u006f\u0075\u0074\u0070\u0075\u0074\u0020\u0069\u006e\u0074\u0065\u006et\u0020\u0073\u0068\u006f\u0075\u006c\u0064 \u0062\u0065\u0020\u0061\u006e\u0020\u006f\u0062\u006a\u0065\u0063t\u0020\u0064\u0069\u0063\u0074\u0069\u006f\u006e\u0061\u0072\u0079");
};if _dbc ,_bge :=_b .GetStream (_ead .Get ("\u0044\u0065\u0073\u0074\u004f\u0075\u0074\u0070\u0075\u0074\u0050\u0072o\u0066\u0069\u006c\u0065"));_bge {_dcf ._caf .Objects =append (_dcf ._caf .Objects ,_dbc );};_gfb ,_bcf :=oi .(*_b .PdfIndirectObject );
if !_bcf {_gfb =_b .MakeIndirectObject (oi );};if _dcf ._ccf ==nil {_dcf ._ccf =_b .MakeArray (_gfb );}else {_dcf ._ccf .Append (_gfb );};_dcf ._caf .Objects =append (_dcf ._caf .Objects ,_gfb );return nil ;};func (_gfg *OutputIntents )Get (i int )(OutputIntent ,bool ){if _gfg ._ccf ==nil {return OutputIntent {},false ;
};if i >=_gfg ._ccf .Len (){return OutputIntent {},false ;};_faac :=_gfg ._ccf .Get (i );_bcde ,_abde :=_b .GetIndirect (_faac );if !_abde {_ccff ,_gg :=_b .GetDict (_faac );return OutputIntent {Object :_ccff },_gg ;};_cb ,_bgf :=_b .GetDict (_bcde .PdfObject );
return OutputIntent {Object :_cb },_bgf ;};func (_dd *Catalog )SetStructTreeRoot (structTreeRoot _b .PdfObject ){if structTreeRoot ==nil {_dd .Object .Remove ("\u0053\u0074\u0072\u0075\u0063\u0074\u0054\u0072\u0065e\u0052\u006f\u006f\u0074");return ;};
_feb :=_b .MakeIndirectObject (structTreeRoot );_dd .Object .Set ("\u0053\u0074\u0072\u0075\u0063\u0074\u0054\u0072\u0065e\u0052\u006f\u006f\u0074",_feb );_dd ._bf .Objects =append (_dd ._bf .Objects ,_feb );};