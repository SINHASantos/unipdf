//
// Copyright 2020 FoxyUtils ehf. All rights reserved.
//
// This is a commercial product and requires a license to operate.
// A trial license can be obtained at https://unidoc.io
//
// DO NOT EDIT: generated by unitwist Go source code obfuscator.
//
// Use of this source code is governed by the UniDoc End User License Agreement
// terms that can be accessed at https://unidoc.io/eula/

// Package extractor is used for quickly extracting PDF content through a simple interface.
// Currently offers functionality for extracting textual content.
package extractor ;import (_dg "bytes";_eg "errors";_dcf "fmt";_d "github.com/unidoc/unipdf/v3/common";_ef "github.com/unidoc/unipdf/v3/contentstream";_de "github.com/unidoc/unipdf/v3/core";_a "github.com/unidoc/unipdf/v3/internal/license";_ca "github.com/unidoc/unipdf/v3/internal/textencoding";
_ccd "github.com/unidoc/unipdf/v3/internal/transform";_cg "github.com/unidoc/unipdf/v3/model";_c "golang.org/x/image/draw";_f "golang.org/x/text/unicode/norm";_g "image";_dc "image/color";_ee "io";_b "math";_db "reflect";_ff "regexp";_cc "sort";_bc "strings";
_cd "unicode";_cf "unicode/utf8";);func (_dfcee *textObject )setFont (_gede string ,_gcgfa float64 )error {if _dfcee ==nil {return nil ;};_dfcee ._dbcc ._faba =_gcgfa ;_ddbe ,_deaaa :=_dfcee .getFont (_gede );if _deaaa !=nil {return _deaaa ;};_dfcee ._dbcc ._gcd =_ddbe ;
return nil ;};func _daaa (_bffed int ,_aecc func (int ,int )bool )[]int {_cdea :=make ([]int ,_bffed );for _bacf :=range _cdea {_cdea [_bacf ]=_bacf ;};_cc .Slice (_cdea ,func (_efaca ,_fafe int )bool {return _aecc (_cdea [_efaca ],_cdea [_fafe ])});return _cdea ;
};func (_ffdaa *ruling )gridIntersecting (_eedg *ruling )bool {return _fdcd (_ffdaa ._ffebg ,_eedg ._ffebg )&&_fdcd (_ffdaa ._ceba ,_eedg ._ceba );};func _fafab (_caac ,_abegb _ccd .Point )bool {_fbfee :=_b .Abs (_caac .X -_abegb .X );_cfef :=_b .Abs (_caac .Y -_abegb .Y );
return _cdbc (_fbfee ,_cfef );};

// Text gets the extracted text contained in `l`.
func (_egeg *list )Text ()string {_cfgb :=&_bc .Builder {};_dgfcd :="";_bdde (_egeg ,_cfgb ,&_dgfcd );return _cfgb .String ();};func (_abgge compositeCell )parasBBox ()(paraList ,_cg .PdfRectangle ){return _abgge .paraList ,_abgge .PdfRectangle ;};func (_dee *imageExtractContext )extractContentStreamImages (_cfb string ,_gd *_cg .PdfPageResources )error {_gbc :=_ef .NewContentStreamParser (_cfb );
_fefc ,_dffg :=_gbc .Parse ();if _dffg !=nil {return _dffg ;};if _dee ._cea ==nil {_dee ._cea =map[*_de .PdfObjectStream ]*cachedImage {};};if _dee ._fadf ==nil {_dee ._fadf =&ImageExtractOptions {};};_gbce :=_ef .NewContentStreamProcessor (*_fefc );_gbce .AddHandler (_ef .HandlerConditionEnumAllOperands ,"",_dee .processOperand );
return _gbce .Process (_gd );};var _bfeg string ="\u0028\u003f\u0069\u0029\u005e\u0028\u004d\u007b\u0030\u002c\u0033\u007d\u0029\u0028\u0043\u0028?\u003a\u0044\u007cM\u0029\u007c\u0044\u003f\u0043{\u0030\u002c\u0033\u007d\u0029\u0028\u0058\u0028\u003f\u003a\u004c\u007c\u0043\u0029\u007cL\u003f\u0058\u007b\u0030\u002c\u0033}\u0029\u0028\u0049\u0028\u003f\u003a\u0056\u007c\u0058\u0029\u007c\u0056\u003f\u0049\u007b\u0030\u002c\u0033\u007d\u0029\u0028\u005c\u0029\u007c\u005c\u002e\u0029\u007c\u005e\u005c\u0028\u0028\u004d\u007b\u0030\u002c\u0033\u007d\u0029\u0028\u0043\u0028\u003f\u003aD\u007cM\u0029\u007c\u0044\u003f\u0043\u007b\u0030\u002c\u0033\u007d\u0029\u0028\u0058\u0028?\u003a\u004c\u007c\u0043\u0029\u007c\u004c?\u0058\u007b0\u002c\u0033\u007d\u0029(\u0049\u0028\u003f\u003a\u0056|\u0058\u0029\u007c\u0056\u003f\u0049\u007b\u0030\u002c\u0033\u007d\u0029\u005c\u0029";
func (_caff *textTable )toTextTable ()TextTable {if _fdea {_d .Log .Info ("t\u006fT\u0065\u0078\u0074\u0054\u0061\u0062\u006c\u0065:\u0020\u0025\u0064\u0020x \u0025\u0064",_caff ._ffcde ,_caff ._agefc );};_dfbf :=make ([][]TableCell ,_caff ._agefc );for _ffdbc :=0;
_ffdbc < _caff ._agefc ;_ffdbc ++{_dfbf [_ffdbc ]=make ([]TableCell ,_caff ._ffcde );for _egbe :=0;_egbe < _caff ._ffcde ;_egbe ++{_fbee :=_caff .get (_egbe ,_ffdbc );if _fbee ==nil {continue ;};_fegae (_fbee ._gccbb );if _fdea {_dcf .Printf ("\u0025\u0034\u0064 \u0025\u0032\u0064\u003a\u0020\u0025\u0073\u000a",_egbe ,_ffdbc ,_fbee );
};_dfbf [_ffdbc ][_egbe ].Text =_fbee .text ();_dbgd :=0;_dfbf [_ffdbc ][_egbe ].Marks ._bgad =_fbee .toTextMarks (&_dbgd );};};_bcadf :=TextTable {W :_caff ._ffcde ,H :_caff ._agefc ,Cells :_dfbf };_bcadf .PdfRectangle =_caff .bbox ();return _bcadf ;};
var _fbgd *_ff .Regexp =_ff .MustCompile (_bfeg +"\u007c"+_ggab );func _cecbe (_gfefc _cg .PdfRectangle )*ruling {return &ruling {_ccffc :_dgcg ,_ebfg :_gfefc .Urx ,_ffebg :_gfefc .Lly ,_ceba :_gfefc .Ury };};var _ba =[]string {"\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0053","\u0042","\u0053","\u0057\u0053","\u0042","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042","\u0042","\u0042","\u0053","\u0057\u0053","\u004f\u004e","\u004f\u004e","\u0045\u0054","\u0045\u0054","\u0045\u0054","\u004f\u004e","\u004f\u004e","\u004f\u004e","\u004f\u004e","\u004f\u004e","\u0045\u0053","\u0043\u0053","\u0045\u0053","\u0043\u0053","\u0043\u0053","\u0045\u004e","\u0045\u004e","\u0045\u004e","\u0045\u004e","\u0045\u004e","\u0045\u004e","\u0045\u004e","\u0045\u004e","\u0045\u004e","\u0045\u004e","\u0043\u0053","\u004f\u004e","\u004f\u004e","\u004f\u004e","\u004f\u004e","\u004f\u004e","\u004f\u004e","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004f\u004e","\u004f\u004e","\u004f\u004e","\u004f\u004e","\u004f\u004e","\u004f\u004e","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004f\u004e","\u004f\u004e","\u004f\u004e","\u004f\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0043\u0053","\u004f\u004e","\u0045\u0054","\u0045\u0054","\u0045\u0054","\u0045\u0054","\u004f\u004e","\u004f\u004e","\u004f\u004e","\u004f\u004e","\u004c","\u004f\u004e","\u004f\u004e","\u0042\u004e","\u004f\u004e","\u004f\u004e","\u0045\u0054","\u0045\u0054","\u0045\u004e","\u0045\u004e","\u004f\u004e","\u004c","\u004f\u004e","\u004f\u004e","\u004f\u004e","\u0045\u004e","\u004c","\u004f\u004e","\u004f\u004e","\u004f\u004e","\u004f\u004e","\u004f\u004e","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004f\u004e","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004f\u004e","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c"};
func (_fcbe rulingList )connections (_ggaac map[int ]intSet ,_cdcb int )intSet {_bfcc :=make (intSet );_cgfeb :=make (intSet );var _fade func (int );_fade =func (_ccbe int ){if !_cgfeb .has (_ccbe ){_cgfeb .add (_ccbe );for _ebefd :=range _fcbe {if _ggaac [_ebefd ].has (_ccbe ){_bfcc .add (_ebefd );
};};for _gebd :=range _fcbe {if _bfcc .has (_gebd ){_fade (_gebd );};};};};_fade (_cdcb );return _bfcc ;};

// RangeOffset returns the TextMarks in `ma` that overlap text[start:end] in the extracted text.
// These are tm: `start` <= tm.Offset + len(tm.Text) && tm.Offset < `end` where
// `start` and `end` are offsets in the extracted text.
// NOTE: TextMarks can contain multiple characters. e.g. "ffi" for the ï¬ƒ ligature so the first and
// last elements of the returned TextMarkArray may only partially overlap text[start:end].
func (_bebe *TextMarkArray )RangeOffset (start ,end int )(*TextMarkArray ,error ){if _bebe ==nil {return nil ,_eg .New ("\u006da\u003d\u003d\u006e\u0069\u006c");};if end < start {return nil ,_dcf .Errorf ("\u0065\u006e\u0064\u0020\u003c\u0020\u0073\u0074\u0061\u0072\u0074\u002e\u0020\u0052\u0061n\u0067\u0065\u004f\u0066\u0066\u0073\u0065\u0074\u0020\u006e\u006f\u0074\u0020d\u0065\u0066\u0069\u006e\u0065\u0064\u002e\u0020\u0073\u0074\u0061\u0072t=\u0025\u0064\u0020\u0065\u006e\u0064\u003d\u0025\u0064\u0020",start ,end );
};_bcccc :=len (_bebe ._bgad );if _bcccc ==0{return _bebe ,nil ;};if start < _bebe ._bgad [0].Offset {start =_bebe ._bgad [0].Offset ;};if end > _bebe ._bgad [_bcccc -1].Offset +1{end =_bebe ._bgad [_bcccc -1].Offset +1;};_edbb :=_cc .Search (_bcccc ,func (_eabfb int )bool {return _bebe ._bgad [_eabfb ].Offset +len (_bebe ._bgad [_eabfb ].Text )-1>=start });
if !(0<=_edbb &&_edbb < _bcccc ){_begg :=_dcf .Errorf ("\u004f\u0075\u0074\u0020\u006f\u0066\u0020\u0072\u0061\u006e\u0067\u0065\u002e\u0020\u0073\u0074\u0061\u0072\u0074\u003d%\u0064\u0020\u0069\u0053\u0074\u0061\u0072\u0074\u003d\u0025\u0064\u0020\u006c\u0065\u006e\u003d\u0025\u0064\u000a\u0009\u0066\u0069\u0072\u0073\u0074\u003d\u0025\u0076\u000a\u0009 \u006c\u0061\u0073\u0074\u003d%\u0076",start ,_edbb ,_bcccc ,_bebe ._bgad [0],_bebe ._bgad [_bcccc -1]);
return nil ,_begg ;};_ebbg :=_cc .Search (_bcccc ,func (_cded int )bool {return _bebe ._bgad [_cded ].Offset > end -1});if !(0<=_ebbg &&_ebbg < _bcccc ){_abef :=_dcf .Errorf ("\u004f\u0075\u0074\u0020\u006f\u0066\u0020r\u0061\u006e\u0067e\u002e\u0020\u0065n\u0064\u003d%\u0064\u0020\u0069\u0045\u006e\u0064=\u0025d \u006c\u0065\u006e\u003d\u0025\u0064\u000a\u0009\u0066\u0069\u0072\u0073\u0074\u003d\u0025\u0076\u000a\u0009\u0020\u006c\u0061\u0073\u0074\u003d\u0025\u0076",end ,_ebbg ,_bcccc ,_bebe ._bgad [0],_bebe ._bgad [_bcccc -1]);
return nil ,_abef ;};if _ebbg <=_edbb {return nil ,_dcf .Errorf ("\u0069\u0045\u006e\u0064\u0020\u003c=\u0020\u0069\u0053\u0074\u0061\u0072\u0074\u003a\u0020\u0073\u0074\u0061\u0072\u0074\u003d\u0025\u0064\u0020\u0065\u006ed\u003d\u0025\u0064\u0020\u0069\u0053\u0074\u0061\u0072\u0074\u003d\u0025\u0064\u0020i\u0045n\u0064\u003d\u0025\u0064",start ,end ,_edbb ,_ebbg );
};return &TextMarkArray {_bgad :_bebe ._bgad [_edbb :_ebbg ]},nil ;};func (_dfafc *shapesState )quadraticTo (_ggfd ,_fefdd ,_dafb ,_bdf float64 ){if _baffc {_d .Log .Info ("\u0071\u0075\u0061d\u0072\u0061\u0074\u0069\u0063\u0054\u006f\u003a");};_dfafc .addPoint (_dafb ,_bdf );
};func _aggb (_gegb []byte ,_badc *_cg .PdfFont )string {_bece :=_badc .BytesToCharcodes (_gegb );_dfac ,_ada ,_eaba :=_badc .CharcodesToStrings (_bece ,"");if _eaba > 0{_d .Log .Debug ("\u0072\u0065nd\u0065\u0072\u0054e\u0078\u0074\u003a\u0020num\u0043ha\u0072\u0073\u003d\u0025\u0064\u0020\u006eum\u004d\u0069\u0073\u0073\u0065\u0073\u003d%\u0064",_ada ,_eaba );
};_abf :=_bc .Join (_dfac ,"");return _abf ;};type textResult struct{_ebdgf PageText ;_ccda int ;_aaeg int ;};func (_dbdf *TextMarkArray )getTextMarkAtOffset (_aega int )*TextMark {for _ ,_bggb :=range _dbdf ._bgad {if _bggb .Offset ==_aega {return &_bggb ;
};};return nil ;};func _ddga (_dbdcc []*textLine ,_bdfb map[float64 ][]*textLine ,_gdgg []float64 ,_efdef int ,_gaaf ,_adea float64 )[]*list {_ecdb :=[]*list {};_fgdg :=_efdef ;_efdef =_efdef +1;_facb :=_gdgg [_fgdg ];_gebcb :=_bdfb [_facb ];_cede :=_eggf (_gebcb ,_adea ,_gaaf );
for _fccf ,_gaafa :=range _cede {var _eceeb float64 ;_gedea :=[]*list {};_gdeb :=_gaafa ._abfa ;_abed :=_adea ;if _fccf < len (_cede )-1{_abed =_cede [_fccf +1]._abfa ;};if _efdef < len (_gdgg ){_gedea =_ddga (_dbdcc ,_bdfb ,_gdgg ,_efdef ,_gdeb ,_abed );
};_eceeb =_abed ;if len (_gedea )> 0{_gacab :=_gedea [0];if len (_gacab ._fbcb )> 0{_eceeb =_gacab ._fbcb [0]._abfa ;};};_ffba :=[]*textLine {_gaafa };_gfaef :=_bfec (_gaafa ,_dbdcc ,_gdeb ,_eceeb );_ffba =append (_ffba ,_gfaef ...);_adede :=_bdee (_ffba ,"\u0062\u0075\u006c\u006c\u0065\u0074",_gedea );
_adede ._ggdc =_defb (_ffba ,"");_ecdb =append (_ecdb ,_adede );};return _ecdb ;};func _ae (_fb []rune )BidiText {_egf :=-1;_df :=false ;_afa :=true ;_dgdf :=len (_fb );_gf :=make ([]string ,_dgdf );_ce :=make ([]string ,_dgdf );if _dgdf ==0||_df {return _dgd (string (_fb ),_afa ,_df );
};_bb :=0;for _bab ,_cca :=range _fb {_gf [_bab ]=string (_cca );_ge :="\u004c";if _cca <=0x00ff{_ge =_ba [_cca ];}else if 0x0590<=_cca &&_cca <=0x05f4{_ge ="\u0052";}else if 0x0600<=_cca &&_cca <=0x06ff{_efg :=_cca &0xff;if int (_efg )>=len (_bg ){_d .Log .Debug ("\u0042\u0069\u0064\u0069\u003a\u0020\u0069\u006e\u0076\u0061\u006c\u0069\u0064\u0020\u0055n\u0069c\u006f\u0064\u0065\u0020\u0063\u0068\u0061\u0072\u0061\u0063\u0074\u0065\u0072\u0020"+string (_cca ));
};_ge =_bg [_cca &0xff];}else if (0x0700<=_cca &&_cca <=0x08ac)||(0xfb50<=_cca &&_cca <=0xfdff)||(0xfe70<=_cca &&_cca <=0xfeff){_ge ="\u0041\u004c";};if _ge =="\u0052"||_ge =="\u0041\u004c"||_ge =="\u0041\u004e"{_bb ++;};_ce [_bab ]=_ge ;};if _bb ==0{_afa =true ;
return _dgd (string (_fb ),_afa ,false );};if _egf ==-1{if float64 (_bb )/float64 (_dgdf )< 0.3&&_dgdf > 4{_afa =true ;_egf =0;}else {_afa =false ;_egf =1;};};var _eab []int ;for range _fb {_eab =append (_eab ,_egf );};_cdf :="\u004c";if _ea (_egf ){_cdf ="\u0052";
};_ebc :=_cdf ;_gad :=_ebc ;_gbe :=_ebc ;for _gaf :=range _fb {if _ce [_gaf ]=="\u004e\u0053\u004d"{_ce [_gaf ]=_gbe ;}else {_gbe =_ce [_gaf ];};};_gbe =_ebc ;var _cfe string ;for _fgg :=range _fb {_cfe =_ce [_fgg ];if _cfe =="\u0045\u004e"{if _gbe =="\u0041\u004c"{_ce [_fgg ]="\u0041\u004e";
}else {_ce [_fgg ]="\u0045\u004e";};}else if _cfe =="\u0052"||_cfe =="\u004c"||_cfe =="\u0041\u004c"{_gbe =_cfe ;};};for _gee :=range _fb {_bgc :=_ce [_gee ];if _bgc =="\u0041\u004c"{_ce [_gee ]="\u0052";};};for _ac :=1;_ac < (len (_fb )-1);_ac ++{if _ce [_ac ]=="\u0045\u0053"&&_ce [_ac -1]=="\u0045\u004e"&&_ce [_ac +1]=="\u0045\u004e"{_ce [_ac ]="\u0045\u004e";
};if _ce [_ac ]=="\u0043\u0053"&&(_ce [_ac -1]=="\u0045\u004e"||_ce [_ac -1]=="\u0041\u004e")&&_ce [_ac +1]==_ce [_ac -1]{_ce [_ac ]=_ce [_ac -1];};};for _fc :=range _fb {if _ce [_fc ]=="\u0045\u004e"{for _aga :=_fc -1;_aga >=0;_aga --{if _ce [_aga ]!="\u0045\u0054"{break ;
};_ce [_aga ]="\u0045\u004e";};for _fcc :=_fc +1;_fcc < _dgdf ;_fcc ++{if _ce [_fcc ]!="\u0045\u0054"{break ;};_ce [_fcc ]="\u0045\u004e";};};};for _bae :=range _fb {_eacc :=_ce [_bae ];if _eacc =="\u0057\u0053"||_eacc =="\u0045\u0053"||_eacc =="\u0045\u0054"||_eacc =="\u0043\u0053"{_ce [_bae ]="\u004f\u004e";
};};_gbe ="\u0073\u006f\u0072";for _dd :=range _fb {_dgdd :=_ce [_dd ];if _dgdd =="\u0045\u004e"{if _gbe =="\u004c"{_ce [_dd ]="\u004c";}else {_ce [_dd ]="\u0045\u004e";};}else if _dgdd =="\u0052"||_dgdd =="\u004c"{_gbe =_dgdd ;};};for _aee :=0;_aee < len (_fb );
_aee ++{if _ce [_aee ]=="\u004f\u004e"{_dcg :=_fa (_ce ,_aee +1,"\u004f\u004e");_bca :=_gad ;if _aee > 0{_bca =_ce [_aee -1];};_dcfc :=_gad ;if _dcg +1< _dgdf {_dcfc =_ce [_dcg +1];};if _bca !="\u004c"{_bca ="\u0052";};if _dcfc !="\u004c"{_dcfc ="\u0052";
};if _bca ==_dcfc {_facc (_ce ,_aee ,_dcg ,_bca );};_aee =_dcg -1;};};for _dec :=range _fb {if _ce [_dec ]=="\u004f\u004e"{_ce [_dec ]=_cdf ;};};for _ccg :=range _fb {_cb :=_ce [_ccg ];if _gca (_eab [_ccg ]){if _cb =="\u0052"{_eab [_ccg ]++;}else if _cb =="\u0041\u004e"||_cb =="\u0045\u004e"{_eab [_ccg ]+=2;
};}else if _cb =="\u004c"||_cb =="\u0041\u004e"||_cb =="\u0045\u004e"{_eab [_ccg ]++;};};_gbg :=-1;_fbe :=99;var _bd int ;for _fcca :=0;_fcca < len (_eab );_fcca ++{_bd =_eab [_fcca ];if _gbg < _bd {_gbg =_bd ;};if _fbe > _bd &&_ea (_bd ){_fbe =_bd ;};
};for _fag :=_gbg ;_fag >=_fbe ;_fag --{_cdg :=-1;for _fggg :=0;_fggg < len (_eab );_fggg ++{if _eab [_fggg ]< _fag {if _cdg >=0{_af (_gf ,_cdg ,_fggg );_cdg =-1;};}else if _cdg < 0{_cdg =_fggg ;};};if _cdg >=0{_af (_gf ,_cdg ,len (_eab ));};};for _cda :=0;
_cda < len (_gf );_cda ++{_fcb :=_gf [_cda ];if _fcb =="\u003c"||_fcb =="\u003e"{_gf [_cda ]="";};};return _dgd (_bc .Join (_gf ,""),_afa ,false );};type textLine struct{_cg .PdfRectangle ;_abfa float64 ;_fddcd []*textWord ;_dcad float64 ;};func _eedc (_ddeea []pathSection )rulingList {_cddf (_ddeea );
if _gagf {_d .Log .Info ("\u006da\u006b\u0065\u0046\u0069l\u006c\u0052\u0075\u006c\u0069n\u0067s\u003a \u0025\u0064\u0020\u0066\u0069\u006c\u006cs",len (_ddeea ));};var _ecag rulingList ;for _ ,_edcga :=range _ddeea {for _ ,_eebd :=range _edcga ._gccb {if !_eebd .isQuadrilateral (){if _gagf {_d .Log .Error ("!\u0069s\u0051\u0075\u0061\u0064\u0072\u0069\u006c\u0061t\u0065\u0072\u0061\u006c: \u0025\u0073",_eebd );
};continue ;};if _fdgac ,_bgdgc :=_eebd .makeRectRuling (_edcga .Color );_bgdgc {_ecag =append (_ecag ,_fdgac );}else {if _gada {_d .Log .Error ("\u0021\u006d\u0061\u006beR\u0065\u0063\u0074\u0052\u0075\u006c\u0069\u006e\u0067\u003a\u0020\u0025\u0073",_eebd );
};};};};if _gagf {_d .Log .Info ("\u006d\u0061\u006b\u0065Fi\u006c\u006c\u0052\u0075\u006c\u0069\u006e\u0067\u0073\u003a\u0020\u0025\u0073",_ecag .String ());};return _ecag ;};const (_adeg =false ;_abgg =false ;_dafg =false ;_ebaa =false ;_baffc =false ;
_gegd =false ;_gcede =false ;_aege =false ;_bcaf =false ;_gccbg =_bcaf &&true ;_gcbd =_gccbg &&false ;_decfe =_bcaf &&true ;_fdea =false ;_ababa =_fdea &&false ;_eeeg =_fdea &&true ;_gagf =false ;_dgff =_gagf &&false ;_dgbgg =_gagf &&false ;_cebb =_gagf &&true ;
_gada =_gagf &&false ;_afaa =_gagf &&false ;);func (_cdaa *wordBag )firstWord (_ddbff int )*textWord {return _cdaa ._aade [_ddbff ][0]};func (_acge *Extractor )extractPageText (_efe string ,_cba *_cg .PdfPageResources ,_gbb _ccd .Matrix ,_gea int ,_abab bool )(*PageText ,int ,int ,error ){_d .Log .Trace ("\u0065x\u0074\u0072\u0061\u0063t\u0050\u0061\u0067\u0065\u0054e\u0078t\u003a \u006c\u0065\u0076\u0065\u006c\u003d\u0025d",_gea );
_cgeg :=&PageText {_ddda :_acge ._eaf ,_dgda :_acge ._adb ,_dadab :_acge ._bf };_ddb :=_eade (_acge ._eaf );var _cgbf stateStack ;_dbg :=_cdc (_acge ,_cba ,_ef .GraphicsState {},&_ddb ,&_cgbf );_aad :=shapesState {_acbg :_gbb ,_bag :_ccd .IdentityMatrix (),_daac :_dbg };
var _dcd bool ;_bge :=-1;_efea :="";if _gea > _afee {_caec :=_eg .New ("\u0066\u006f\u0072\u006d s\u0074\u0061\u0063\u006b\u0020\u006f\u0076\u0065\u0072\u0066\u006c\u006f\u0077");_d .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a \u0065\u0078\u0074\u0072\u0061\u0063\u0074\u0050\u0061\u0067\u0065\u0054\u0065\u0078\u0074\u002e\u0020\u0072\u0065\u0063u\u0072\u0073\u0069\u006f\u006e\u0020\u006c\u0065\u0076\u0065\u006c\u003d\u0025\u0064 \u0065r\u0072\u003d\u0025\u0076",_gea ,_caec );
return _cgeg ,_ddb ._edcf ,_ddb ._abb ,_caec ;};_agb :=_ef .NewContentStreamParser (_efe );_cfg ,_ggcbe :=_agb .Parse ();if _ggcbe !=nil {_d .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020e\u0078\u0074\u0072a\u0063\u0074\u0050\u0061g\u0065\u0054\u0065\u0078\u0074\u0020\u0070\u0061\u0072\u0073\u0065\u0020\u0066\u0061\u0069\u006c\u0065\u0064\u002e\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_ggcbe );
return _cgeg ,_ddb ._edcf ,_ddb ._abb ,_ggcbe ;};_cgeg ._gedd =_cfg ;_edb :=_ef .NewContentStreamProcessor (*_cfg );if _acge ._dbd !=nil {_edb .SetRelaxedMode (_acge ._dbd .RelaxedMode );};_edb .AddHandler (_ef .HandlerConditionEnumAllOperands ,"",func (_eecb *_ef .ContentStreamOperation ,_adcg _ef .GraphicsState ,_gcbb *_cg .PdfPageResources )error {_cgf :=_eecb .Operand ;
if _dafg {_d .Log .Info ("\u0026&\u0026\u0020\u006f\u0070\u003d\u0025s",_eecb );};switch _cgf {case "\u0071":if _baffc {_d .Log .Info ("\u0063\u0074\u006d\u003d\u0025\u0073",_aad ._bag );};_cgbf .push (&_ddb );case "\u0051":if !_cgbf .empty (){_ddb =*_cgbf .pop ();
};_aad ._bag =_adcg .CTM ;if _baffc {_d .Log .Info ("\u0063\u0074\u006d\u003d\u0025\u0073",_aad ._bag );};case "\u0042\u0044\u0043":_efb ,_fcfc :=_de .GetDict (_eecb .Params [1]);if !_fcfc {_d .Log .Debug ("\u0045\u0052\u0052O\u0052\u003a\u0020\u0042D\u0043\u0020\u006f\u0070\u003d\u0025\u0073 \u0047\u0065\u0074\u0044\u0069\u0063\u0074\u0020\u0066\u0061\u0069\u006c\u0065\u0064",_eecb );
return _ggcbe ;};_fdc :=_efb .Get ("\u004d\u0043\u0049\u0044");if _fdc !=nil {_dfb ,_cgcg :=_de .GetIntVal (_fdc );if !_cgcg {_d .Log .Debug ("\u0045R\u0052\u004fR\u003a\u0020\u0042\u0044C\u0020\u006f\u0070=\u0025\u0073\u002e\u0020\u0042\u0061\u0064\u0020\u006eum\u0065\u0072\u0069c\u0061\u006c \u006f\u0062\u006a\u0065\u0063\u0074.\u0020\u006f=\u0025\u0073",_eecb ,_fdc );
};_bge =_dfb ;}else {_bge =-1;};if _acge ._adb !=nil &&_bge !=-1&&_acge ._bac !=-1&&_acge ._adb .ParentTree !=nil {_cff :=_acge ._bac ;var _fdb func (_aceg []*_cg .KValue )bool ;_fdb =func (_aage []*_cg .KValue )bool {for _ ,_gcc :=range _aage {if _dfeg :=_gcc .GetKDict ();
_dfeg !=nil {_cgd :=_dfeg .GetChildren ();if len (_cgd )==1&&_cgd [0].GetMCID ()!=nil {if *_cgd [0].GetMCID ()==_bge {if _dfeg .ActualText !=nil {_efea =_bc .TrimSpace (_dfeg .ActualText .Str ());return true ;};return false ;};}else {return _fdb (_cgd );
};};};return false ;};if _cbe :=_acge ._adb .ParentTree .Get ("\u004e\u0075\u006d\u0073");_cbe !=nil {_bdc ,_fed :=_de .GetArray (_cbe );if !_fed {_d .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0042\u0044\u0043\u0020\u006f\u0070\u003d\u0025\u0073\u002e\u0020\u0042\u0061\u0064\u0020\u004e\u0075m\u0073\u0020\u0061\u0072\u0072a\u0079\u002e \u006f\u003d\u0025\u0073",_eecb ,_cbe );
}else {for _edda :=0;_edda < _bdc .Len ();_edda +=2{if _bfd ,_ffcd :=_de .GetInt (_bdc .Get (_edda ));_ffcd {if int (*_bfd )==_cff {if _acgcg :=_bdc .Get (_edda +1);_acgcg !=nil {if _ebab ,_eef :=_de .GetArray (_acgcg );_eef {for _ ,_dfff :=range _ebab .Elements (){_cgda ,_decb :=_cg .NewKDictFromPdfObject (_dfff );
if _decb !=nil {_d .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a \u0042\u0044\u0043\u0020\u006f\u0070\u003d\u0025\u0073\u002e\u0020\u0042\u0061d\u0020\u004b\u0044\u0069\u0063\u0074\u002e \u006f\u003d\u0025\u0073",_eecb ,_dfff );continue ;};_fdd :=_cgda .GetChildren ();
if len (_fdd )==1&&_fdd [0].GetMCID ()!=nil {if *_fdd [0].GetMCID ()==_bge {if _cgda .ActualText !=nil {_efea =_bc .TrimSpace (_cgda .ActualText .Str ());};break ;}else if _fdb (_fdd ){break ;};};};};};};};};};};};if _efea ==""{_cgdg :=_efb .Get ("\u0041\u0063\u0074\u0075\u0061\u006c\u0054\u0065\u0078\u0074");
if _cgdg !=nil {_efea =_bc .TrimSpace (_cgdg .String ());};};case "\u0045\u004d\u0043":_bge =-1;_efea ="";case "\u0042\u0054":if _dcd {_d .Log .Debug ("\u0042\u0054\u0020\u0063\u0061\u006c\u006c\u0065\u0064\u0020\u0077\u0068\u0069\u006c\u0065 \u0069n\u0020\u0061\u0020\u0074\u0065\u0078\u0074\u0020\u006f\u0062\u006a\u0065\u0063\u0074");
_cgeg ._beaf =append (_cgeg ._beaf ,_dbg ._gebc ...);};_dcd =true ;_dgf :=_adcg ;if _abab {_dgf =_ef .GraphicsState {};_dgf .CTM =_aad ._bag ;};_dgf .CTM =_gbb .Mult (_dgf .CTM );_dbg =_cdc (_acge ,_gcbb ,_dgf ,&_ddb ,&_cgbf );_aad ._daac =_dbg ;case "\u0045\u0054":if !_dcd {_d .Log .Debug ("\u0045\u0054\u0020ca\u006c\u006c\u0065\u0064\u0020\u006f\u0075\u0074\u0073i\u0064e\u0020o\u0066 \u0061\u0020\u0074\u0065\u0078\u0074\u0020\u006f\u0062\u006a\u0065\u0063\u0074");
};_dcd =false ;_cgeg ._beaf =append (_cgeg ._beaf ,_dbg ._gebc ...);_dbg .reset ();case "\u0054\u002a":_dbg .nextLine ();case "\u0054\u0064":if _fcd ,_cce :=_dbg .checkOp (_eecb ,2,true );!_fcd {_d .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_cce );
return _cce ;};_dffe ,_gbggc ,_aab :=_fabf (_eecb .Params );if _aab !=nil {return _aab ;};_dbg .moveText (_dffe ,_gbggc );case "\u0054\u0044":if _aaad ,_ecbb :=_dbg .checkOp (_eecb ,2,true );!_aaad {_d .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_ecbb );
return _ecbb ;};_cbb ,_eeef ,_eaed :=_fabf (_eecb .Params );if _eaed !=nil {_d .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_eaed );return _eaed ;};_dbg .moveTextSetLeading (_cbb ,_eeef );case "\u0054\u006a":if _gac ,_cgcfaa :=_dbg .checkOp (_eecb ,1,true );
!_gac {_d .Log .Debug ("\u0045\u0052\u0052\u004fR:\u0020\u0054\u006a\u0020\u006f\u0070\u003d\u0025\u0073\u0020\u0065\u0072\u0072\u003d%\u0076",_eecb ,_cgcfaa );return _cgcfaa ;};_aagd :=_de .TraceToDirectObject (_eecb .Params [0]);_cdgg ,_efbg :=_de .GetStringBytes (_aagd );
if !_efbg {_d .Log .Debug ("\u0045\u0052R\u004f\u0052\u003a\u0020T\u006a\u0020o\u0070\u003d\u0025\u0073\u0020\u0047\u0065\u0074S\u0074\u0072\u0069\u006e\u0067\u0042\u0079\u0074\u0065\u0073\u0020\u0066a\u0069\u006c\u0065\u0064",_eecb );return _de .ErrTypeError ;
};return _dbg .showText (_aagd ,_cdgg ,_bge ,_efea );case "\u0054\u004a":if _afgg ,_ffg :=_dbg .checkOp (_eecb ,1,true );!_afgg {_d .Log .Debug ("\u0045\u0052R\u004f\u0052\u003a \u0054\u004a\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_ffg );return _ffg ;
};_gbfe ,_cffa :=_de .GetArray (_eecb .Params [0]);if !_cffa {_d .Log .Debug ("\u0045\u0052\u0052OR\u003a\u0020\u0054\u004a\u0020\u006f\u0070\u003d\u0025s\u0020G\u0065t\u0041r\u0072\u0061\u0079\u0056\u0061\u006c\u0020\u0066\u0061\u0069\u006c\u0065\u0064",_eecb );
return _ggcbe ;};return _dbg .showTextAdjusted (_gbfe ,_bge ,_efea );case "\u0027":if _gedg ,_bdbc :=_dbg .checkOp (_eecb ,1,true );!_gedg {_d .Log .Debug ("\u0045R\u0052O\u0052\u003a\u0020\u0027\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_bdbc );return _bdbc ;
};_fcbb :=_de .TraceToDirectObject (_eecb .Params [0]);_cbbf ,_dgfb :=_de .GetStringBytes (_fcbb );if !_dgfb {_d .Log .Debug ("\u0045\u0052RO\u0052\u003a\u0020'\u0020\u006f\u0070\u003d%s \u0047et\u0053\u0074\u0072\u0069\u006e\u0067\u0042yt\u0065\u0073\u0020\u0066\u0061\u0069\u006ce\u0064",_eecb );
return _de .ErrTypeError ;};_dbg .nextLine ();return _dbg .showText (_fcbb ,_cbbf ,_bge ,_efea );case "\u0022":if _cbdc ,_dbdb :=_dbg .checkOp (_eecb ,3,true );!_cbdc {_d .Log .Debug ("\u0045R\u0052O\u0052\u003a\u0020\u0022\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_dbdb );
return _dbdb ;};_cfd ,_cbef ,_fagb :=_fabf (_eecb .Params [:2]);if _fagb !=nil {return _fagb ;};_gaa :=_de .TraceToDirectObject (_eecb .Params [2]);_beb ,_cdfec :=_de .GetStringBytes (_gaa );if !_cdfec {_d .Log .Debug ("\u0045\u0052RO\u0052\u003a\u0020\"\u0020\u006f\u0070\u003d%s \u0047et\u0053\u0074\u0072\u0069\u006e\u0067\u0042yt\u0065\u0073\u0020\u0066\u0061\u0069\u006ce\u0064",_eecb );
return _de .ErrTypeError ;};_dbg .setCharSpacing (_cfd );_dbg .setWordSpacing (_cbef );_dbg .nextLine ();return _dbg .showText (_gaa ,_beb ,_bge ,_efea );case "\u0054\u004c":_gcfd ,_ddf :=_ccec (_eecb );if _ddf !=nil {_d .Log .Debug ("\u0045\u0052R\u004f\u0052\u003a \u0054\u004c\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_ddf );
return _ddf ;};_dbg .setTextLeading (_gcfd );case "\u0054\u0063":_dgg ,_dgaf :=_ccec (_eecb );if _dgaf !=nil {_d .Log .Debug ("\u0045\u0052R\u004f\u0052\u003a \u0054\u0063\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_dgaf );return _dgaf ;};_dbg .setCharSpacing (_dgg );
case "\u0054\u0066":if _gef ,_cag :=_dbg .checkOp (_eecb ,2,true );!_gef {_d .Log .Debug ("\u0045\u0052R\u004f\u0052\u003a \u0054\u0066\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_cag );return _cag ;};_gggg ,_eea :=_de .GetNameVal (_eecb .Params [0]);if !_eea {_d .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a \u0054\u0066\u0020\u006f\u0070\u003d\u0025\u0073\u0020\u0047\u0065\u0074\u004ea\u006d\u0065\u0056\u0061\u006c\u0020\u0066a\u0069\u006c\u0065\u0064",_eecb );
return _de .ErrTypeError ;};_feb ,_ddae :=_de .GetNumberAsFloat (_eecb .Params [1]);if !_eea {_d .Log .Debug ("\u0045\u0052\u0052O\u0052\u003a\u0020\u0054\u0066\u0020\u006f\u0070\u003d\u0025\u0073\u0020\u0047\u0065\u0074\u0046\u006c\u006f\u0061\u0074\u0056\u0061\u006c\u0020\u0066\u0061\u0069\u006c\u0065d\u002e\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_eecb ,_ddae );
return _ddae ;};_ddae =_dbg .setFont (_gggg ,_feb );_dbg ._edaf =_eg .Is (_ddae ,_de .ErrNotSupported );if _ddae !=nil &&!_dbg ._edaf {return _ddae ;};case "\u0054\u006d":if _ecg ,_cbc :=_dbg .checkOp (_eecb ,6,true );!_ecg {_d .Log .Debug ("\u0045\u0052R\u004f\u0052\u003a \u0054\u006d\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_cbc );
return _cbc ;};_afbe ,_cacc :=_de .GetNumbersAsFloat (_eecb .Params );if _cacc !=nil {_d .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_cacc );return _cacc ;};_dbg .setTextMatrix (_afbe );case "\u0054\u0072":if _fagg ,_eaca :=_dbg .checkOp (_eecb ,1,true );
!_fagg {_d .Log .Debug ("\u0045\u0052R\u004f\u0052\u003a \u0054\u0072\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_eaca );return _eaca ;};_fddc ,_ccdd :=_de .GetIntVal (_eecb .Params [0]);if !_ccdd {_d .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0054\u0072\u0020\u006f\u0070\u003d\u0025\u0073 \u0047e\u0074\u0049\u006e\u0074\u0056\u0061\u006c\u0020\u0066\u0061\u0069\u006c\u0065\u0064",_eecb );
return _de .ErrTypeError ;};_dbg .setTextRenderMode (_fddc );case "\u0054\u0073":if _agf ,_abce :=_dbg .checkOp (_eecb ,1,true );!_agf {_d .Log .Debug ("\u0045\u0052R\u004f\u0052\u003a \u0054\u0073\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_abce );return _abce ;
};_dgfc ,_gfef :=_de .GetNumberAsFloat (_eecb .Params [0]);if _gfef !=nil {_d .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_gfef );return _gfef ;};_dbg .setTextRise (_dgfc );case "\u0054\u0077":if _dada ,_cfdg :=_dbg .checkOp (_eecb ,1,true );
!_dada {_d .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_cfdg );return _cfdg ;};_gefe ,_eagf :=_de .GetNumberAsFloat (_eecb .Params [0]);if _eagf !=nil {_d .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_eagf );
return _eagf ;};_dbg .setWordSpacing (_gefe );case "\u0054\u007a":if _feec ,_face :=_dbg .checkOp (_eecb ,1,true );!_feec {_d .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_face );return _face ;};_bfgb ,_fced :=_de .GetNumberAsFloat (_eecb .Params [0]);
if _fced !=nil {_d .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_fced );return _fced ;};_dbg .setHorizScaling (_bfgb );case "\u0063\u006d":if !_abab {_aad ._bag =_adcg .CTM ;};if _aad ._bag .Singular (){_gfgbf :=_ccd .IdentityMatrix ().Translate (_aad ._bag .Translation ());
_d .Log .Debug ("S\u0069n\u0067\u0075\u006c\u0061\u0072\u0020\u0063\u0074m\u003d\u0025\u0073\u2192%s",_aad ._bag ,_gfgbf );_aad ._bag =_gfgbf ;};if _baffc {_d .Log .Info ("\u0063\u0074\u006d\u003d\u0025\u0073",_aad ._bag );};case "\u006d":if len (_eecb .Params )!=2{_d .Log .Debug ("\u0057\u0041\u0052\u004e\u003a\u0020\u0065\u0072\u0072o\u0072\u0020\u0077\u0068\u0069\u006c\u0065\u0020\u0070\u0072\u006f\u0063\u0065\u0073\u0073\u0069\u006e\u0067\u0020\u0060\u006d\u0060\u0020o\u0070\u0065r\u0061\u0074o\u0072\u003a\u0020\u0025\u0076\u002e\u0020\u004f\u0075\u0074\u0070\u0075\u0074 m\u0061\u0079\u0020\u0062\u0065\u0020\u0069\u006e\u0063o\u0072\u0072\u0065\u0063\u0074\u002e",_cbg );
return nil ;};_dgag ,_abcg :=_de .GetNumbersAsFloat (_eecb .Params );if _abcg !=nil {return _abcg ;};_aad .moveTo (_dgag [0],_dgag [1]);case "\u006c":if len (_eecb .Params )!=2{_d .Log .Debug ("\u0057\u0041\u0052\u004e\u003a\u0020\u0065\u0072\u0072o\u0072\u0020\u0077\u0068\u0069\u006c\u0065\u0020\u0070\u0072\u006f\u0063\u0065\u0073\u0073\u0069\u006e\u0067\u0020\u0060\u006c\u0060\u0020o\u0070\u0065r\u0061\u0074o\u0072\u003a\u0020\u0025\u0076\u002e\u0020\u004f\u0075\u0074\u0070\u0075\u0074 m\u0061\u0079\u0020\u0062\u0065\u0020\u0069\u006e\u0063o\u0072\u0072\u0065\u0063\u0074\u002e",_cbg );
return nil ;};_gbef ,_gacf :=_de .GetNumbersAsFloat (_eecb .Params );if _gacf !=nil {return _gacf ;};_aad .lineTo (_gbef [0],_gbef [1]);case "\u0063":if len (_eecb .Params )!=6{return _cbg ;};_fafa ,_bdcg :=_de .GetNumbersAsFloat (_eecb .Params );if _bdcg !=nil {return _bdcg ;
};_d .Log .Debug ("\u0043u\u0062\u0069\u0063\u0020b\u0065\u007a\u0069\u0065\u0072 \u0070a\u0072a\u006d\u0073\u003a\u0020\u0025\u002e\u0032f",_fafa );_aad .cubicTo (_fafa [0],_fafa [1],_fafa [2],_fafa [3],_fafa [4],_fafa [5]);case "\u0076","\u0079":if len (_eecb .Params )!=4{return _cbg ;
};_dead ,_daab :=_de .GetNumbersAsFloat (_eecb .Params );if _daab !=nil {return _daab ;};_d .Log .Debug ("\u0043u\u0062\u0069\u0063\u0020b\u0065\u007a\u0069\u0065\u0072 \u0070a\u0072a\u006d\u0073\u003a\u0020\u0025\u002e\u0032f",_dead );_aad .quadraticTo (_dead [0],_dead [1],_dead [2],_dead [3]);
case "\u0068":_aad .closePath ();case "\u0072\u0065":if len (_eecb .Params )!=4{return _cbg ;};_febc ,_dcaa :=_de .GetNumbersAsFloat (_eecb .Params );if _dcaa !=nil {return _dcaa ;};_aad .drawRectangle (_febc [0],_febc [1],_febc [2],_febc [3]);_aad .closePath ();
case "\u0053":_aad .stroke (&_cgeg ._fcgf );_aad .clearPath ();case "\u0073":_aad .closePath ();_aad .stroke (&_cgeg ._fcgf );_aad .clearPath ();case "\u0046":_aad .fill (&_cgeg ._cffg );_aad .clearPath ();case "\u0066","\u0066\u002a":_aad .closePath ();
_aad .fill (&_cgeg ._cffg );_aad .clearPath ();case "\u0042","\u0042\u002a":_aad .fill (&_cgeg ._cffg );_aad .stroke (&_cgeg ._fcgf );_aad .clearPath ();case "\u0062","\u0062\u002a":_aad .closePath ();_aad .fill (&_cgeg ._cffg );_aad .stroke (&_cgeg ._fcgf );
_aad .clearPath ();case "\u006e":_aad .clearPath ();case "\u0044\u006f":if len (_eecb .Params )==0{_d .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0065\u0078\u0070\u0065\u0063\u0074\u0065\u0064\u0020\u0058\u004fbj\u0065c\u0074\u0020\u006e\u0061\u006d\u0065\u0020\u006f\u0070\u0065\u0072\u0061n\u0064\u0020\u0066\u006f\u0072\u0020\u0044\u006f\u0020\u006f\u0070\u0065\u0072\u0061\u0074\u006f\u0072.\u0020\u0047\u006f\u0074\u0020\u0025\u002b\u0076\u002e",_eecb .Params );
return _de .ErrRangeError ;};_dab ,_gbee :=_de .GetName (_eecb .Params [0]);if !_gbee {_d .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0069\u006e\u0076\u0061l\u0069\u0064\u0020\u0044\u006f\u0020\u006f\u0070e\u0072a\u0074\u006f\u0072\u0020\u0058\u004f\u0062\u006a\u0065\u0063\u0074\u0020\u006e\u0061\u006d\u0065\u0020\u006fp\u0065\u0072\u0061\u006e\u0064\u003a\u0020\u0025\u002b\u0076\u002e",_eecb .Params [0]);
return _de .ErrTypeError ;};_ ,_caee :=_gcbb .GetXObjectByName (*_dab );if _caee !=_cg .XObjectTypeForm {break ;};_aafe ,_gbee :=_acge ._eae [_dab .String ()];if !_gbee {_aae ,_gbeff :=_gcbb .GetXObjectFormByName (*_dab );if _gbeff !=nil {_d .Log .Debug ("\u0045R\u0052\u004f\u0052\u003a\u0020\u0025v",_gbeff );
return _gbeff ;};_dece ,_gbeff :=_aae .GetContentStream ();if _gbeff !=nil {_d .Log .Debug ("\u0045R\u0052\u004f\u0052\u003a\u0020\u0025v",_gbeff );return _gbeff ;};_dgdg :=_aae .Resources ;if _dgdg ==nil {_dgdg =_gcbb ;};_dbe :=_adcg .CTM ;if _afbg ,_aedb :=_de .GetArray (_aae .Matrix );
_aedb {_bfbdg ,_dgbba :=_afbg .GetAsFloat64Slice ();if _dgbba !=nil {return _dgbba ;};if len (_bfbdg )!=6{return _cbg ;};_abff :=_ccd .NewMatrix (_bfbdg [0],_bfbdg [1],_bfbdg [2],_bfbdg [3],_bfbdg [4],_bfbdg [5]);_dbe =_adcg .CTM .Mult (_abff );};_gggfe ,_dgbed ,_eaec ,_gbeff :=_acge .extractPageText (string (_dece ),_dgdg ,_gbb .Mult (_dbe ),_gea +1,false );
if _gbeff !=nil {_d .Log .Debug ("\u0045R\u0052\u004f\u0052\u003a\u0020\u0025v",_gbeff );return _gbeff ;};_aafe =textResult {*_gggfe ,_dgbed ,_eaec };_acge ._eae [_dab .String ()]=_aafe ;};_aad ._bag =_adcg .CTM ;if _baffc {_d .Log .Info ("\u0063\u0074\u006d\u003d\u0025\u0073",_aad ._bag );
};_cgeg ._beaf =append (_cgeg ._beaf ,_aafe ._ebdgf ._beaf ...);_cgeg ._fcgf =append (_cgeg ._fcgf ,_aafe ._ebdgf ._fcgf ...);_cgeg ._cffg =append (_cgeg ._cffg ,_aafe ._ebdgf ._cffg ...);_ddb ._edcf +=_aafe ._ccda ;_ddb ._abb +=_aafe ._aaeg ;case "\u0072\u0067","\u0067","\u006b","\u0063\u0073","\u0073\u0063","\u0073\u0063\u006e":_dbg ._gacb .ColorspaceNonStroking =_adcg .ColorspaceNonStroking ;
_dbg ._gacb .ColorNonStroking =_adcg .ColorNonStroking ;case "\u0052\u0047","\u0047","\u004b","\u0043\u0053","\u0053\u0043","\u0053\u0043\u004e":_dbg ._gacb .ColorspaceStroking =_adcg .ColorspaceStroking ;_dbg ._gacb .ColorStroking =_adcg .ColorStroking ;
};return nil ;});_ggcbe =_edb .Process (_cba );if _acge ._dbd !=nil &&_acge ._dbd .IncludeAnnotations &&!_abab {for _ ,_cfge :=range _acge ._ggcb {_cbeg ,_fggf :=_de .GetDict (_cfge .AP );if !_fggf {continue ;};_dba ,_fggf :=_cbeg .Get ("\u004e").(*_de .PdfObjectStream );
if !_fggf {continue ;};_dbgg ,_cacb :=_de .DecodeStream (_dba );if _cacb !=nil {_d .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u006f\u006e\u0020\u0064\u0065c\u006f\u0064\u0065\u0020\u0073\u0074\u0072\u0065\u0061\u006d:\u0020\u0025\u0076",_cacb );
continue ;};_bdbca :=_dba .PdfObjectDictionary .Get ("\u0052e\u0073\u006f\u0075\u0072\u0063\u0065s");_adf ,_cacb :=_cg .NewPdfPageResourcesFromDict (_bdbca .(*_de .PdfObjectDictionary ));if _cacb !=nil {_d .Log .Debug ("\u0045\u0072\u0072\u006f\u0072 \u006f\u006e\u0020\u0067\u0065\u0074\u0074\u0069\u006e\u0067\u0020\u0061\u006en\u006f\u0074\u0061\u0074\u0069\u006f\u006e\u0020\u0072\u0065\u0073\u006f\u0075\u0072\u0063\u0065\u0073\u003a\u0020\u0025\u0076",_cacb );
continue ;};_cedd :=_ccd .IdentityMatrix ();_dbeb ,_fggf :=_dba .PdfObjectDictionary .Get ("\u004d\u0061\u0074\u0072\u0069\u0078").(*_de .PdfObjectArray );if _fggf {_cdd ,_ccdc :=_dbeb .GetAsFloat64Slice ();if _ccdc !=nil {_d .Log .Debug ("\u0045\u0072\u0072or\u0020\u006f\u006e\u0020\u0067\u0065\u0074\u0074\u0069n\u0067 \u0066l\u006fa\u0074\u0036\u0034\u0020\u0073\u006c\u0069\u0063\u0065\u003a\u0020\u0025\u0076",_ccdc );
continue ;};if len (_cdd )!=6{_d .Log .Debug ("I\u006e\u0076\u0061\u006c\u0069\u0064 \u006d\u0061\u0074\u0072\u0069\u0078\u0020\u0073\u006ci\u0063\u0065\u0020l\u0065n\u0067\u0074\u0068");continue ;};_cedd =_ccd .NewMatrix (_cdd [0],_cdd [1],_cdd [2],_cdd [3],_cdd [4],_cdd [5]);
};_cdfed ,_fggf :=_acge ._eag [_dba .String ()];if !_fggf {_eefb ,_fcef ,_gdaa ,_aabe :=_acge .extractPageText (string (_dbgg ),_adf ,_cedd ,_gea +1,true );if _aabe !=nil {_d .Log .Debug ("\u0045\u0052R\u004f\u0052\u0020\u0065x\u0074\u0072a\u0063\u0074\u0069\u006e\u0067\u0020\u0061\u006en\u006f\u0074\u0061\u0074\u0069\u006f\u006e\u0020\u0074\u0065\u0078\u0074s\u003a\u0020\u0025\u0076",_aabe );
continue ;};_cdfed =textResult {*_eefb ,_fcef ,_gdaa };_acge ._eag [_dba .String ()]=_cdfed ;};_cgeg ._beaf =append (_cgeg ._beaf ,_cdfed ._ebdgf ._beaf ...);_cgeg ._fcgf =append (_cgeg ._fcgf ,_cdfed ._ebdgf ._fcgf ...);_cgeg ._cffg =append (_cgeg ._cffg ,_cdfed ._ebdgf ._cffg ...);
_ddb ._edcf +=_cdfed ._ccda ;_ddb ._abb +=_cdfed ._aaeg ;};};return _cgeg ,_ddb ._edcf ,_ddb ._abb ,_ggcbe ;};func _adeea (_fgfg float64 )float64 {return _faeb *_b .Round (_fgfg /_faeb )};func _dbff (_fcff ,_gccfd _ccd .Point )bool {return _fcff .X ==_gccfd .X &&_fcff .Y ==_gccfd .Y };
func _feff (_dfc *TextMarkArray )[]*TextMarkArray {_cbga :=_dfc .Elements ();_ecb :=len (_cbga );var _cbgca _de .PdfObject ;_def :=[]*TextMarkArray {};_feae :=&TextMarkArray {};_gbgg :=-1;for _gfd ,_dgbb :=range _cbga {_bcb :=_dgbb .DirectObject ;_gbgg =_dgbb .Index ;
if _bcb ==nil {_bcg :=_fcfg (_dfc ,_gfd );if _cbgca !=nil {if _bcg ==-1||_bcg > _gfd {_def =append (_def ,_feae );_feae =&TextMarkArray {};};};}else if _cbgca ==nil {if _gbgg ==0&&_gfd > 0{_def =append (_def ,_feae );_feae =&TextMarkArray {};};}else {if _bcb !=_cbgca {_def =append (_def ,_feae );
_feae =&TextMarkArray {};};};_cbgca =_bcb ;_feae .Append (_dgbb );if _gfd ==(_ecb -1){_def =append (_def ,_feae );};};return _def ;};const (_gggc =true ;_cfebg =true ;_ddeb =true ;_caagf =false ;_adfcf =false ;_fgcfd =true ;_ddec =true ;_efab =true ;_gdda =true ;
_cgge =false ;);func (_edgcb *textLine )markWordBoundaries (){_acdea :=_gacad *_edgcb ._dcad ;for _gcag ,_gcab :=range _edgcb ._fddcd [1:]{if _gbada (_gcab ,_edgcb ._fddcd [_gcag ])>=_acdea {_gcab ._eaaab =true ;};};};func _fabab (_ecae *list )[]*textLine {for _ ,_fggca :=range _ecae ._gbcb {switch _fggca ._fffdc {case "\u004c\u0042\u006fd\u0079":if len (_fggca ._fbcb )!=0{return _fggca ._fbcb ;
};return _fabab (_fggca );case "\u0053\u0070\u0061\u006e":return _fggca ._fbcb ;case "I\u006e\u006c\u0069\u006e\u0065\u0053\u0068\u0061\u0070\u0065":return _fggca ._fbcb ;};};return nil ;};type intSet map[int ]struct{};func (_addf paraList )tables ()[]TextTable {var _accg []TextTable ;
if _fdea {_d .Log .Info ("\u0070\u0061\u0072\u0061\u0073\u002e\u0074\u0061\u0062\u006c\u0065\u0073\u003a");};for _ ,_bffe :=range _addf {_dbfc :=_bffe ._bbbg ;if _dbfc !=nil &&_dbfc .isExportable (){_accg =append (_accg ,_dbfc .toTextTable ());};};return _accg ;
};func (_faedd rulingList )aligned ()bool {if len (_faedd )< 2{return false ;};_adbb :=make (map[*ruling ]int );_adbb [_faedd [0]]=0;for _ ,_bccf :=range _faedd [1:]{_gcfdb :=false ;for _fcege :=range _adbb {if _bccf .gridIntersecting (_fcege ){_adbb [_fcege ]++;
_gcfdb =true ;break ;};};if !_gcfdb {_adbb [_bccf ]=0;};};_fccde :=0;for _ ,_agcg :=range _adbb {if _agcg ==0{_fccde ++;};};_bfcd :=float64 (_fccde )/float64 (len (_faedd ));_gggff :=_bfcd <=1.0-_ceff ;if _gagf {_d .Log .Info ("\u0061\u006c\u0069\u0067\u006e\u0065\u0064\u003d\u0025\u0074\u0020\u0075\u006em\u0061\u0074\u0063\u0068\u0065\u0064=\u0025\u002e\u0032\u0066\u003d\u0025\u0064\u002f\u0025\u0064\u0020\u0076\u0065c\u0073\u003d\u0025\u0073",_gggff ,_bfcd ,_fccde ,len (_faedd ),_faedd .String ());
};return _gggff ;};func (_gdgc paraList )writeText (_fdgd _ee .Writer ){for _cfgcf ,_cbfe :=range _gdgc {if _cbfe ._gbdg {continue ;};_cbfe .writeText (_fdgd );if _cfgcf !=len (_gdgc )-1{if _dafgb (_cbfe ,_gdgc [_cfgcf +1]){_fdgd .Write ([]byte ("\u0020"));
}else {_fdgd .Write ([]byte ("\u000a"));_fdgd .Write ([]byte ("\u000a"));};};};_fdgd .Write ([]byte ("\u000a"));_fdgd .Write ([]byte ("\u000a"));};func _gaafe (_gdeag ,_ffcg _ccd .Point ,_dbgfc _dc .Color )(*ruling ,bool ){_faab :=lineRuling {_gafbd :_gdeag ,_ebgd :_ffcg ,_cfcfd :_deadd (_gdeag ,_ffcg ),Color :_dbgfc };
if _faab ._cfcfd ==_cbfee {return nil ,false ;};return _faab .asRuling ();};func (_adbe *shapesState )closePath (){if _adbe ._ebbb {_adbe ._bfbe =append (_adbe ._bfbe ,_fggc (_adbe ._ggaa ));_adbe ._ebbb =false ;}else if len (_adbe ._bfbe )==0{if _baffc {_d .Log .Debug ("\u0063\u006c\u006f\u0073eP\u0061\u0074\u0068\u0020\u0077\u0069\u0074\u0068\u0020\u006e\u006f\u0020\u0070\u0061t\u0068");
};_adbe ._ebbb =false ;return ;};_adbe ._bfbe [len (_adbe ._bfbe )-1].close ();if _baffc {_d .Log .Info ("\u0063\u006c\u006f\u0073\u0065\u0050\u0061\u0074\u0068\u003a\u0020\u0025\u0073",_adbe );};};

// TextMarkArray is a collection of TextMarks.
type TextMarkArray struct{_bgad []TextMark };func (_fgae compositeCell )String ()string {_bgaa :="";if len (_fgae .paraList )> 0{_bgaa =_fgbfd (_fgae .paraList .merge ().text (),50);};return _dcf .Sprintf ("\u0025\u0036\u002e\u0032\u0066\u0020\u0025\u0064\u0020\u0070\u0061\u0072a\u0073\u0020\u0025\u0071",_fgae .PdfRectangle ,len (_fgae .paraList ),_bgaa );
};func (_aagf *textObject )setTextRise (_eddae float64 ){if _aagf ==nil {return ;};_aagf ._dbcc ._acee =_eddae ;};const (_dff ="\u0045\u0052R\u004f\u0052\u003a\u0020\u0043\u0061\u006e\u0027\u0074\u0020\u0063\u006f\u006e\u0076\u0065\u0072\u0074\u0020\u0066\u006f\u006e\u0074\u0020\u006f\u0062\u006a\u0065\u0063\u0074\u002c\u0020\u0069\u006e\u0076\u0061\u006c\u0069\u0064\u0020\u0074\u0079\u0070\u0065";
_aca ="\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0043a\u006e\u0027\u0074 g\u0065\u0074\u0020\u0066\u006f\u006et\u0020\u0070\u0072\u006f\u0070\u0065\u0072\u0074\u0069\u0065\u0073\u002c\u0020\u0066\u006fn\u0074\u0020\u006e\u006f\u0074\u0020\u0066\u006fu\u006e\u0064";
_fbf ="\u0045\u0052\u0052O\u0052\u003a\u0020\u0043\u0061\u006e\u0027\u0074\u0020\u0067\u0065\u0074\u0020\u0066\u006f\u006e\u0074\u0020\u0073\u0074\u0072\u0065\u0061\u006d\u002c\u0020\u0069\u006e\u0076a\u006c\u0069\u0064\u0020\u0074\u0079\u0070\u0065";_gbd ="E\u0052R\u004f\u0052\u003a\u0020\u004e\u006f\u0020\u0066o\u006e\u0074\u0020\u0066ou\u006e\u0064";
);

// String returns a description of `k`.
func (_abcb rulingKind )String ()string {_gedde ,_bgbb :=_deg [_abcb ];if !_bgbb {return _dcf .Sprintf ("\u004e\u006ft\u0020\u0061\u0020r\u0075\u006c\u0069\u006e\u0067\u003a\u0020\u0025\u0064",_abcb );};return _gedde ;};func (_dbde *textObject )getStrokeColor ()_dc .Color {return _afeda (_dbde ._gacb .ColorspaceStroking ,_dbde ._gacb .ColorStroking );
};func (_dcce *textTable )isExportable ()bool {if _dcce ._eeff {return true ;};_bbda :=func (_dgead int )bool {_aggcg :=_dcce .get (0,_dgead );if _aggcg ==nil {return false ;};_bcba :=_aggcg .text ();_egedd :=_cf .RuneCountInString (_bcba );_gffb :=_dgbd .MatchString (_bcba );
return _egedd <=1||_gffb ;};for _facfb :=0;_facfb < _dcce ._agefc ;_facfb ++{if !_bbda (_facfb ){return true ;};};return false ;};func _bfeb (_acdae ,_ceag _ccd .Point )bool {_fcdde :=_b .Abs (_acdae .X -_ceag .X );_fcfba :=_b .Abs (_acdae .Y -_ceag .Y );
return _cdbc (_fcfba ,_fcdde );};func (_afeb *textTable )depth ()float64 {_fdfd :=1e10;for _eadb :=0;_eadb < _afeb ._ffcde ;_eadb ++{_affcf :=_afeb .get (_eadb ,0);if _affcf ==nil ||_affcf ._gbdg {continue ;};_fdfd =_b .Min (_fdfd ,_affcf .depth ());};
return _fdfd ;};func (_ffdb *textTable )newTablePara ()*textPara {_beafb :=_ffdb .computeBbox ();_dcac :=&textPara {PdfRectangle :_beafb ,_bfc :_beafb ,_bbbg :_ffdb };if _fdea {_d .Log .Info ("\u006e\u0065w\u0054\u0061\u0062l\u0065\u0050\u0061\u0072\u0061\u003a\u0020\u0025\u0073",_dcac );
};return _dcac ;};func (_aafb *wordBag )arrangeText (_ffbb bool )*textPara {_aafb .sort ();if _cfebg {_aafb .removeDuplicates ();};var _adddg []*textLine ;for _ ,_bdeg :=range _aafb .depthIndexes (){for !_aafb .empty (_bdeg ){_cfabe :=_aafb .firstReadingIndex (_bdeg );
_ddfff :=_aafb .firstWord (_cfabe );_cbead :=_eggc (_aafb ,_cfabe );_egef :=_ddfff ._egca ;if _egef < _bff {_egef =_bff ;};_fegeg :=_ddfff ._acgec -_bacbc *_egef ;_cgfea :=_ddfff ._acgec +_bacbc *_egef ;_bbcb :=_ccae *_egef ;_gbgef :=_abcac *_egef ;_fdee :for {var _ceed *textWord ;
_abdcg :=0;for _ ,_fbgec :=range _aafb .depthBand (_fegeg ,_cgfea ){_dagbd :=_aafb .highestWord (_fbgec ,_fegeg ,_cgfea );if _dagbd ==nil {continue ;};_eabe :=_gbada (_dagbd ,_cbead ._fddcd [len (_cbead ._fddcd )-1]);if _eabe < -_gbgef {break _fdee ;};
if !_ffbb &&_eabe > _bbcb {continue ;};if _ceed !=nil &&_fdgb (_dagbd ,_ceed )>=0{continue ;};_ceed =_dagbd ;_abdcg =_fbgec ;};if _ceed ==nil {break ;};_cbead .pullWord (_aafb ,_ceed ,_abdcg );};_cbead .markWordBoundaries ();_adddg =append (_adddg ,_cbead );
};};if len (_adddg )==0{return nil ;};_cc .Slice (_adddg ,func (_deada ,_efeb int )bool {return _acca (_adddg [_deada ],_adddg [_efeb ])< 0});_gfce :=_bfaa (_aafb .PdfRectangle ,_adddg );if _bcaf {_d .Log .Info ("\u0061\u0072\u0072an\u0067\u0065\u0054\u0065\u0078\u0074\u0020\u0021\u0021\u0021\u0020\u0070\u0061\u0072\u0061\u003d\u0025\u0073",_gfce .String ());
if _gccbg {for _agbg ,_gdfgc :=range _gfce ._gccbb {_dcf .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0073\u000a",_agbg ,_gdfgc .String ());if _gcbd {for _gdac ,_bdgf :=range _gdfgc ._fddcd {_dcf .Printf ("\u0025\u0038\u0064\u003a\u0020\u0025\u0073\u000a",_gdac ,_bdgf .String ());
for _dbedd ,_cdeea :=range _bdgf ._dacf {_dcf .Printf ("\u00251\u0032\u0064\u003a\u0020\u0025\u0073\n",_dbedd ,_cdeea .String ());};};};};};};return _gfce ;};type lists []*list ;type textPara struct{_cg .PdfRectangle ;_bfc _cg .PdfRectangle ;_gccbb []*textLine ;
_bbbg *textTable ;_eega bool ;_gbdg bool ;_ccbc *textPara ;_gcgfc *textPara ;_dfdb *textPara ;_eacda *textPara ;_fagce []list ;};func _cddf (_fcacg []pathSection ){if _faeb < 0.0{return ;};if _gagf {_d .Log .Info ("\u0067\u0072\u0061\u006e\u0075\u006c\u0061\u0072\u0069\u007a\u0065\u003a\u0020\u0025\u0064 \u0073u\u0062\u0070\u0061\u0074\u0068\u0020\u0073\u0065\u0063\u0074\u0069\u006f\u006e\u0073",len (_fcacg ));
};for _agdg ,_gcad :=range _fcacg {for _abcee ,_effb :=range _gcad ._gccb {for _dgcc ,_ddag :=range _effb ._bbff {_effb ._bbff [_dgcc ]=_ccd .Point {X :_adeea (_ddag .X ),Y :_adeea (_ddag .Y )};if _gagf {_ccacd :=_effb ._bbff [_dgcc ];if !_dbff (_ddag ,_ccacd ){_cefaf :=_ccd .Point {X :_ccacd .X -_ddag .X ,Y :_ccacd .Y -_ddag .Y };
_dcf .Printf ("\u0025\u0034d \u002d\u0020\u00254\u0064\u0020\u002d\u0020%4d\u003a %\u002e\u0032\u0066\u0020\u2192\u0020\u0025.2\u0066\u0020\u0028\u0025\u0067\u0029\u000a",_agdg ,_abcee ,_dgcc ,_ddag ,_ccacd ,_cefaf );};};};};};};func (_aaeb *wordBag )firstReadingIndex (_egfdd int )int {_gdeg :=_aaeb .firstWord (_egfdd )._egca ;
_ebae :=float64 (_egfdd +1)*_adce ;_aadf :=_ebae +_faddd *_gdeg ;_ebcf :=_egfdd ;for _ ,_dcfg :=range _aaeb .depthBand (_ebae ,_aadf ){if _fdgb (_aaeb .firstWord (_dcfg ),_aaeb .firstWord (_ebcf ))< 0{_ebcf =_dcfg ;};};return _ebcf ;};const _afee =20;func _bgdb (_gafa _cg .PdfRectangle ,_cfgec bounded )float64 {return _gafa .Ury -_cfgec .bbox ().Lly };
func _ebce (_gdec ,_efca float64 )string {_fcddc :=!_cccee (_gdec -_efca );if _fcddc {return "\u000a";};return "\u0020";};

// List returns all the list objects detected on the page.
// It detects all the bullet point Lists from a given pdf page and builds a slice of bullet list objects.
// A given bullet list object has a tree structure.
// Each bullet point list is extracted with the text content it contains and all the sub lists found under it as children in the tree.
// The rest content of the pdf is ignored and only text in the bullet point lists are extracted.
// The list extraction is done in two ways.
// 1. If the document is tagged then the lists are extracted using the tags provided in the document.
// 2. Otherwise the bullet lists are extracted from the raw text using regex matching.
// By default the document tag is used if available.
// However this can be disabled using `DisableDocumentTags` in the `Options` object.
// Sometimes disabling document tags option might give a better bullet list extraction if the document was tagged incorrectly.
//
//	    options := &Options{
//		     DisableDocumentTags: false, // this means use document tag if available
//	    }
//	    ex, err := NewWithOptions(page, options)
//	    // handle error
//	    pageText, _, _, err := ex.ExtractPageText()
//	    // handle error
//	    lists := pageText.List()
//	    txt := lists.Text()
func (_accb PageText )List ()lists {_dccc :=!_accb ._beee ._dgcd ;_efgd :=_accb .getParagraphs ();_adcb :=_efgd .list ();if _accb ._dgda !=nil &&_dccc {_aeaag :=_egae (&_efgd );if len (_accb ._dgda .K )==0{_d .Log .Debug ("\u004c\u0069\u0073\u0074\u003a\u0020\u0073t\u0072\u0075\u0063\u0074\u0054\u0072\u0065\u0065\u0052\u006f\u006f\u0074\u0020\u0064\u006f\u0065\u0073\u006e'\u0074\u0020\u0068\u0061\u0076e\u0020\u0061\u006e\u0079\u0020\u0063\u006f\u006e\u0074e\u006e\u0074\u002c\u0020\u0075\u0073\u0069\u006e\u0067\u0020\u0074\u0065\u0078\u0074\u0020\u006d\u0061\u0074\u0063\u0068\u0069\u006e\u0067\u0020\u006d\u0065\u0074\u0068\u006f\u0064\u0020\u0069\u006e\u0073\u0074\u0065\u0061\u0064\u002e");
return _adcb ;};_adcb =_fdedf (_accb ._dgda ,_aeaag ,_accb ._dadab );};return _adcb ;};func (_dfbb *textObject )showTextAdjusted (_eabcb *_de .PdfObjectArray ,_eece int ,_ccde string )error {_acef :=false ;for _ ,_dbcd :=range _eabcb .Elements (){switch _dbcd .(type ){case *_de .PdfObjectFloat ,*_de .PdfObjectInteger :_aaed ,_afc :=_de .GetNumberAsFloat (_dbcd );
if _afc !=nil {_d .Log .Debug ("\u0045\u0052\u0052\u004fR\u003a\u0020\u0073\u0068\u006f\u0077\u0054\u0065\u0078t\u0041\u0064\u006a\u0075\u0073\u0074\u0065\u0064\u002e\u0020\u0042\u0061\u0064\u0020\u006e\u0075\u006d\u0065r\u0069\u0063\u0061\u006c\u0020a\u0072\u0067\u002e\u0020\u006f\u003d\u0025\u0073\u0020\u0061\u0072\u0067\u0073\u003d\u0025\u002b\u0076",_dbcd ,_eabcb );
return _afc ;};_dgc ,_agcd :=-_aaed *0.001*_dfbb ._dbcc ._faba ,0.0;if _acef {_agcd ,_dgc =_dgc ,_agcd ;};_cfab :=_daef (_ccd .Point {X :_dgc ,Y :_agcd });_dfbb ._gcde .Concat (_cfab );case *_de .PdfObjectString :_aceb :=_de .TraceToDirectObject (_dbcd );
_acbd ,_dfbba :=_de .GetStringBytes (_aceb );if !_dfbba {_d .Log .Trace ("s\u0068\u006f\u0077\u0054\u0065\u0078\u0074\u0041\u0064j\u0075\u0073\u0074\u0065\u0064\u003a\u0020Ba\u0064\u0020\u0073\u0074r\u0069\u006e\u0067\u0020\u0061\u0072\u0067\u002e\u0020o=\u0025\u0073 \u0061\u0072\u0067\u0073\u003d\u0025\u002b\u0076",_dbcd ,_eabcb );
return _de .ErrTypeError ;};_dfbb .renderText (_aceb ,_acbd ,_eece ,_ccde );default:_d .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0073\u0068\u006f\u0077\u0054\u0065\u0078\u0074A\u0064\u006a\u0075\u0073\u0074\u0065\u0064\u002e\u0020\u0055\u006e\u0065\u0078p\u0065\u0063\u0074\u0065\u0064\u0020\u0074\u0079\u0070\u0065\u0020\u0028%T\u0029\u0020\u0061\u0072\u0067\u0073\u003d\u0025\u002b\u0076",_dbcd ,_eabcb );
return _de .ErrTypeError ;};};return nil ;};

// String returns a string describing the current state of the textState stack.
func (_fdg *stateStack )String ()string {_egaa :=[]string {_dcf .Sprintf ("\u002d\u002d\u002d\u002d f\u006f\u006e\u0074\u0020\u0073\u0074\u0061\u0063\u006b\u003a\u0020\u0025\u0064",len (*_fdg ))};for _cgbd ,_aeae :=range *_fdg {_dcea :="\u003c\u006e\u0069l\u003e";
if _aeae !=nil {_dcea =_aeae .String ();};_egaa =append (_egaa ,_dcf .Sprintf ("\u0009\u0025\u0032\u0064\u003a\u0020\u0025\u0073",_cgbd ,_dcea ));};return _bc .Join (_egaa ,"\u000a");};func (_eefa *textTable )subdivide ()*textTable {_eefa .logComposite ("\u0073u\u0062\u0064\u0069\u0076\u0069\u0064e");
_gbged :=_eefa .compositeRowCorridors ();_agbaf :=_eefa .compositeColCorridors ();if _fdea {_d .Log .Info ("\u0073u\u0062\u0064i\u0076\u0069\u0064\u0065:\u000a\u0009\u0072o\u0077\u0043\u006f\u0072\u0072\u0069\u0064\u006f\u0072s=\u0025\u0073\u000a\t\u0063\u006fl\u0043\u006f\u0072\u0072\u0069\u0064o\u0072\u0073=\u0025\u0073",_fbffb (_gbged ),_fbffb (_agbaf ));
};if len (_gbged )==0||len (_agbaf )==0{return _eefa ;};_aagag (_gbged );_aagag (_agbaf );if _fdea {_d .Log .Info ("\u0073\u0075\u0062\u0064\u0069\u0076\u0069\u0064\u0065\u0020\u0066\u0069\u0078\u0065\u0064\u003a\u000a\u0009r\u006f\u0077\u0043\u006f\u0072\u0072\u0069d\u006f\u0072\u0073\u003d\u0025\u0073\u000a\u0009\u0063\u006f\u006cC\u006f\u0072\u0072\u0069\u0064\u006f\u0072\u0073\u003d\u0025\u0073",_fbffb (_gbged ),_fbffb (_agbaf ));
};_fbcdc ,_gdgb :=_fffde (_eefa ._agefc ,_gbged );_ceaed ,_dfdgdc :=_fffde (_eefa ._ffcde ,_agbaf );_ebceb :=make (map[uint64 ]*textPara ,_dfdgdc *_gdgb );_egfc :=&textTable {PdfRectangle :_eefa .PdfRectangle ,_eeff :_eefa ._eeff ,_agefc :_gdgb ,_ffcde :_dfdgdc ,_adaa :_ebceb };
if _fdea {_d .Log .Info ("\u0073\u0075b\u0064\u0069\u0076\u0069\u0064\u0065\u003a\u0020\u0063\u006f\u006d\u0070\u006f\u0073\u0069\u0074\u0065\u0020\u003d\u0020\u0025\u0064\u0020\u0078\u0020\u0025\u0064\u0020\u0063\u0065\u006c\u006c\u0073\u003d\u0020\u0025\u0064\u0020\u0078\u0020\u0025\u0064\u000a"+"\u0009\u0072\u006f\u0077\u0043\u006f\u0072\u0072\u0069\u0064\u006f\u0072s\u003d\u0025\u0073\u000a"+"\u0009\u0063\u006f\u006c\u0043\u006f\u0072\u0072\u0069\u0064\u006f\u0072s\u003d\u0025\u0073\u000a"+"\u0009\u0079\u004f\u0066\u0066\u0073\u0065\u0074\u0073=\u0025\u002b\u0076\u000a"+"\u0009\u0078\u004f\u0066\u0066\u0073\u0065\u0074\u0073\u003d\u0025\u002b\u0076",_eefa ._ffcde ,_eefa ._agefc ,_dfdgdc ,_gdgb ,_fbffb (_gbged ),_fbffb (_agbaf ),_fbcdc ,_ceaed );
};for _bfbdgg :=0;_bfbdgg < _eefa ._agefc ;_bfbdgg ++{_aggf :=_fbcdc [_bfbdgg ];for _bgedc :=0;_bgedc < _eefa ._ffcde ;_bgedc ++{_bcfa :=_ceaed [_bgedc ];if _fdea {_dcf .Printf ("\u0025\u0036\u0064\u002c %\u0032\u0064\u003a\u0020\u0078\u0030\u003d\u0025\u0064\u0020\u0079\u0030\u003d\u0025d\u000a",_bgedc ,_bfbdgg ,_bcfa ,_aggf );
};_cdade ,_geca :=_eefa ._gefa [_egegf (_bgedc ,_bfbdgg )];if !_geca {continue ;};_cdbdc :=_cdade .split (_gbged [_bfbdgg ],_agbaf [_bgedc ]);for _ggac :=0;_ggac < _cdbdc ._agefc ;_ggac ++{for _aaead :=0;_aaead < _cdbdc ._ffcde ;_aaead ++{_efagb :=_cdbdc .get (_aaead ,_ggac );
_egfc .put (_bcfa +_aaead ,_aggf +_ggac ,_efagb );if _fdea {_dcf .Printf ("\u0025\u0038\u0064\u002c\u0020\u0025\u0032\u0064\u003a\u0020\u0025\u0073\u000a",_bcfa +_aaead ,_aggf +_ggac ,_efagb );};};};};};return _egfc ;};func (_ggaf *wordBag )blocked (_dbbg *textWord )bool {if _dbbg .Urx < _ggaf .Llx {_bgcf :=_cecbe (_dbbg .PdfRectangle );
_fdeb :=_aegb (_ggaf .PdfRectangle );if _ggaf ._fbff .blocks (_bgcf ,_fdeb ){if _afaa {_d .Log .Info ("\u0062\u006c\u006f\u0063ke\u0064\u0020\u2190\u0078\u003a\u0020\u0025\u0073\u0020\u0025\u0073",_dbbg ,_ggaf );};return true ;};}else if _ggaf .Urx < _dbbg .Llx {_gcfbc :=_cecbe (_ggaf .PdfRectangle );
_gaff :=_aegb (_dbbg .PdfRectangle );if _ggaf ._fbff .blocks (_gcfbc ,_gaff ){if _afaa {_d .Log .Info ("b\u006co\u0063\u006b\u0065\u0064\u0020\u0078\u2192\u0020:\u0020\u0025\u0073\u0020%s",_dbbg ,_ggaf );};return true ;};};if _dbbg .Ury < _ggaf .Lly {_dgdgb :=_cgcc (_dbbg .PdfRectangle );
_cbea :=_gdgfg (_ggaf .PdfRectangle );if _ggaf ._gdcc .blocks (_dgdgb ,_cbea ){if _afaa {_d .Log .Info ("\u0062\u006c\u006f\u0063ke\u0064\u0020\u2190\u0079\u003a\u0020\u0025\u0073\u0020\u0025\u0073",_dbbg ,_ggaf );};return true ;};}else if _ggaf .Ury < _dbbg .Lly {_gaea :=_cgcc (_ggaf .PdfRectangle );
_agbd :=_gdgfg (_dbbg .PdfRectangle );if _ggaf ._gdcc .blocks (_gaea ,_agbd ){if _afaa {_d .Log .Info ("b\u006co\u0063\u006b\u0065\u0064\u0020\u0079\u2192\u0020:\u0020\u0025\u0073\u0020%s",_dbbg ,_ggaf );};return true ;};};return false ;};func (_gdfc rulingList )intersections ()map[int ]intSet {var _ggdg ,_cabe []int ;
for _adba ,_caged :=range _gdfc {switch _caged ._ccffc {case _dgcg :_ggdg =append (_ggdg ,_adba );case _afec :_cabe =append (_cabe ,_adba );};};if len (_ggdg )< _afff +1||len (_cabe )< _dcfe +1{return nil ;};if len (_ggdg )+len (_cabe )> _aedf {_d .Log .Debug ("\u0069\u006e\u0074\u0065\u0072\u0073e\u0063\u0074\u0069\u006f\u006e\u0073\u003a\u0020\u0054\u004f\u004f\u0020\u004d\u0041\u004e\u0059\u0020\u0072\u0075\u006ci\u006e\u0067\u0073\u0020\u0076\u0065\u0063\u0073\u003d\u0025\u0064\u0020\u003d\u0020%\u0064 \u0078\u0020\u0025\u0064",len (_gdfc ),len (_ggdg ),len (_cabe ));
return nil ;};_gdfgd :=make (map[int ]intSet ,len (_ggdg )+len (_cabe ));for _ ,_dfdge :=range _ggdg {for _ ,_baaa :=range _cabe {if _gdfc [_dfdge ].intersects (_gdfc [_baaa ]){if _ ,_eddd :=_gdfgd [_dfdge ];!_eddd {_gdfgd [_dfdge ]=make (intSet );};if _ ,_adcdb :=_gdfgd [_baaa ];
!_adcdb {_gdfgd [_baaa ]=make (intSet );};_gdfgd [_dfdge ].add (_baaa );_gdfgd [_baaa ].add (_dfdge );};};};return _gdfgd ;};func (_ffcdf *textObject )getFontDirect (_eafb string )(*_cg .PdfFont ,error ){_gfae ,_gacd :=_ffcdf .getFontDict (_eafb );if _gacd !=nil {return nil ,_gacd ;
};_gge ,_gacd :=_cg .NewPdfFontFromPdfObject (_gfae );if _gacd !=nil {_d .Log .Debug ("\u0067\u0065\u0074\u0046\u006f\u006e\u0074\u0044\u0069\u0072\u0065\u0063\u0074\u003a\u0020\u004e\u0065\u0077Pd\u0066F\u006f\u006e\u0074\u0046\u0072\u006f\u006d\u0050\u0064\u0066\u004f\u0062j\u0065\u0063\u0074\u0020\u0066\u0061\u0069\u006c\u0065\u0064\u002e\u0020\u006e\u0061\u006d\u0065\u003d%\u0023\u0071\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_eafb ,_gacd );
};return _gge ,_gacd ;};func (_edee gridTile )contains (_addbe _cg .PdfRectangle )bool {if _edee .numBorders ()< 3{return false ;};if _edee ._agege &&_addbe .Llx < _edee .Llx -_fege {return false ;};if _edee ._gfaaa &&_addbe .Urx > _edee .Urx +_fege {return false ;
};if _edee ._bebc &&_addbe .Lly < _edee .Lly -_fege {return false ;};if _edee ._ffff &&_addbe .Ury > _edee .Ury +_fege {return false ;};return true ;};

// String returns a human readable description of `s`.
func (_ddfab intSet )String ()string {var _ggeb []int ;for _acgcb :=range _ddfab {if _ddfab .has (_acgcb ){_ggeb =append (_ggeb ,_acgcb );};};_cc .Ints (_ggeb );return _dcf .Sprintf ("\u0025\u002b\u0076",_ggeb );};

// String returns a string describing `ma`.
func (_ddac TextMarkArray )String ()string {_gggga :=len (_ddac ._bgad );if _gggga ==0{return "\u0045\u004d\u0050T\u0059";};_adbgf :=_ddac ._bgad [0];_bgea :=_ddac ._bgad [_gggga -1];return _dcf .Sprintf ("\u007b\u0054\u0045\u0058\u0054\u004d\u0041\u0052K\u0041\u0052\u0052AY\u003a\u0020\u0025\u0064\u0020\u0065l\u0065\u006d\u0065\u006e\u0074\u0073\u000a\u0009\u0066\u0069\u0072\u0073\u0074\u003d\u0025s\u000a\u0009\u0020\u006c\u0061\u0073\u0074\u003d%\u0073\u007d",_gggga ,_adbgf ,_bgea );
};func (_afef *shapesState )addPoint (_dbge ,_gbcef float64 ){_ggcd :=_afef .establishSubpath ();_ccaa :=_afef .devicePoint (_dbge ,_gbcef );if _ggcd ==nil {_afef ._ebbb =true ;_afef ._ggaa =_ccaa ;}else {_ggcd .add (_ccaa );};};

// Match defines the structure for each match, including pattern, indexes, and locations.
type Match struct{Pattern string ;Indexes [][]int ;Locations []Box ;};

// Box represents the bounding box of a given textMark on pdf page.
// This might be used for different kinds of high lighting after doing the search
type Box struct{BBox _cg .PdfRectangle ;};func _fcf (_gfg []Font ,_afg string )bool {for _ ,_bea :=range _gfg {if _bea .FontName ==_afg {return true ;};};return false ;};

// String returns a human readable description of `ss`.
func (_ffgb *shapesState )String ()string {return _dcf .Sprintf ("\u007b\u0025\u0064\u0020su\u0062\u0070\u0061\u0074\u0068\u0073\u0020\u0066\u0072\u0065\u0073\u0068\u003d\u0025t\u007d",len (_ffgb ._bfbe ),_ffgb ._ebbb );};func (_ebdd *textPara )isAtom ()*textTable {_agcb :=_ebdd ;
_ecabb :=_ebdd ._gcgfc ;_eecgc :=_ebdd ._eacda ;if _ecabb .taken ()||_eecgc .taken (){return nil ;};_fdafb :=_ecabb ._eacda ;if _fdafb .taken ()||_fdafb !=_eecgc ._gcgfc {return nil ;};return _acab (_agcb ,_ecabb ,_eecgc ,_fdafb );};

// String returns a description of `state`.
func (_edcc *textState )String ()string {_eefe :="\u005bN\u004f\u0054\u0020\u0053\u0045\u0054]";if _edcc ._gcd !=nil {_eefe =_edcc ._gcd .BaseFont ();};return _dcf .Sprintf ("\u0074\u0063\u003d\u0025\u002e\u0032\u0066\u0020\u0074\u0077\u003d\u0025\u002e\u0032\u0066 \u0074f\u0073\u003d\u0025\u002e\u0032\u0066\u0020\u0066\u006f\u006e\u0074\u003d\u0025\u0071",_edcc ._ffb ,_edcc ._cfbgf ,_edcc ._faba ,_eefe );
};func _afgc (_ffa []*textWord ,_dfbd float64 ,_deacg ,_bfbf rulingList )*wordBag {_ggad :=_bed (_ffa [0],_dfbd ,_deacg ,_bfbf );for _ ,_bgdg :=range _ffa [1:]{_cbgg :=_edac (_bgdg ._acgec );_ggad ._aade [_cbgg ]=append (_ggad ._aade [_cbgg ],_bgdg );_ggad .PdfRectangle =_bbg (_ggad .PdfRectangle ,_bgdg .PdfRectangle );
};_ggad .sort ();return _ggad ;};func (_bbgf *textTable )computeBbox ()_cg .PdfRectangle {var _fdfec _cg .PdfRectangle ;_fbgf :=false ;for _daabfd :=0;_daabfd < _bbgf ._agefc ;_daabfd ++{for _adcga :=0;_adcga < _bbgf ._ffcde ;_adcga ++{_abcafa :=_bbgf .get (_adcga ,_daabfd );
if _abcafa ==nil {continue ;};if !_fbgf {_fdfec =_abcafa .PdfRectangle ;_fbgf =true ;}else {_fdfec =_bbg (_fdfec ,_abcafa .PdfRectangle );};};};return _fdfec ;};func (_dbdba compositeCell )hasLines (_dgac []*textLine )bool {for _bebd ,_cbaa :=range _dgac {_eeaed :=_bfgbd (_dbdba .PdfRectangle ,_cbaa .PdfRectangle );
if _fdea {_dcf .Printf ("\u0020\u0020\u0020\u0020\u0020\u0020\u005e\u005e\u005e\u0069\u006e\u0074\u0065\u0072\u0073e\u0063t\u0073\u003d\u0025\u0074\u0020\u0025\u0064\u0020\u006f\u0066\u0020\u0025\u0064\u000a",_eeaed ,_bebd ,len (_dgac ));_dcf .Printf ("\u0020\u0020\u0020\u0020  \u005e\u005e\u005e\u0063\u006f\u006d\u0070\u006f\u0073\u0069\u0074\u0065\u003d\u0025s\u000a",_dbdba );
_dcf .Printf ("\u0020 \u0020 \u0020\u0020\u0020\u006c\u0069\u006e\u0065\u003d\u0025\u0073\u000a",_cbaa );};if _eeaed {return true ;};};return false ;};func (_caeed *textObject )setHorizScaling (_fefd float64 ){if _caeed ==nil {return ;};_caeed ._dbcc ._ageb =_fefd ;
};func (_gdca *shapesState )lastpointEstablished ()(_ccd .Point ,bool ){if _gdca ._ebbb {return _gdca ._ggaa ,false ;};_cee :=len (_gdca ._bfbe );if _cee > 0&&_gdca ._bfbe [_cee -1]._efdb {return _gdca ._bfbe [_cee -1].last (),false ;};return _ccd .Point {},true ;
};var _egfb =TextMark {Text :"\u005b\u0058\u005d",Original :"\u0020",Meta :true ,FillColor :_dc .White ,StrokeColor :_dc .White };func (_bcbca *ruling )alignsSec (_ggfc *ruling )bool {const _cadd =_dddf +1.0;return _bcbca ._ffebg -_cadd <=_ggfc ._ceba &&_ggfc ._ffebg -_cadd <=_bcbca ._ceba ;
};func (_fbca *TextMarkArray )exists (_geaa TextMark )bool {for _ ,_bacd :=range _fbca .Elements (){if _db .DeepEqual (_geaa .DirectObject ,_bacd .DirectObject )&&_db .DeepEqual (_geaa .BBox ,_bacd .BBox )&&_bacd .Text ==_geaa .Text {return true ;};};return false ;
};func (_aaef paraList )reorder (_ddaad []int ){_dagba :=make (paraList ,len (_aaef ));for _egce ,_caeeg :=range _ddaad {_dagba [_egce ]=_aaef [_caeeg ];};copy (_aaef ,_dagba );};func (_agfad rulingList )log (_cbdbb string ){if !_gagf {return ;};_d .Log .Info ("\u0023\u0023\u0023\u0020\u0025\u0031\u0030\u0073\u003a\u0020\u0076\u0065c\u0073\u003d\u0025\u0073",_cbdbb ,_agfad .String ());
for _daff ,_adcdc :=range _agfad {_dcf .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0073\u000a",_daff ,_adcdc .String ());};};

// TextTable represents a table.
// Cells are ordered top-to-bottom, left-to-right.
// Cells[y] is the (0-offset) y'th row in the table.
// Cells[y][x] is the (0-offset) x'th column in the table.
type TextTable struct{_cg .PdfRectangle ;W ,H int ;Cells [][]TableCell ;};func (_edfg paraList )llyRange (_ccaf []int ,_cdadg ,_gbde float64 )[]int {_bccg :=len (_edfg );if _gbde < _edfg [_ccaf [0]].Lly ||_cdadg > _edfg [_ccaf [_bccg -1]].Lly {return nil ;
};_ccgbb :=_cc .Search (_bccg ,func (_geec int )bool {return _edfg [_ccaf [_geec ]].Lly >=_cdadg });_deega :=_cc .Search (_bccg ,func (_cacba int )bool {return _edfg [_ccaf [_cacba ]].Lly > _gbde });return _ccaf [_ccgbb :_deega ];};func (_aaggg *textTable )getRight ()paraList {_cbaae :=make (paraList ,_aaggg ._agefc );
for _bgec :=0;_bgec < _aaggg ._agefc ;_bgec ++{_egdaa :=_aaggg .get (_aaggg ._ffcde -1,_bgec )._gcgfc ;if _egdaa .taken (){return nil ;};_cbaae [_bgec ]=_egdaa ;};for _gaagc :=0;_gaagc < _aaggg ._agefc -1;_gaagc ++{if _cbaae [_gaagc ]._eacda !=_cbaae [_gaagc +1]{return nil ;
};};return _cbaae ;};

// ToTextMark returns the public view of `tm`.
func (_befd *textMark )ToTextMark ()TextMark {return TextMark {Text :_befd ._cffag ,Original :_befd ._cfag ,BBox :_befd ._bacg ,Font :_befd ._cceg ,FontSize :_befd ._gcee ,FillColor :_befd ._gbbgd ,StrokeColor :_befd ._ccga ,Orientation :_befd ._bead ,DirectObject :_befd ._ggggae ,ObjString :_befd ._ede ,Tw :_befd .Tw ,Th :_befd .Th ,Tc :_befd ._effge ,Index :_befd ._febf };
};func (_ecff rulingList )removeDuplicates ()rulingList {if len (_ecff )==0{return nil ;};_ecff .sort ();_ddde :=rulingList {_ecff [0]};for _ ,_acga :=range _ecff [1:]{if _acga .equals (_ddde [len (_ddde )-1]){continue ;};_ddde =append (_ddde ,_acga );
};return _ddde ;};func (_ggbe *stateStack )pop ()*textState {if _ggbe .empty (){return nil ;};_gcaa :=*(*_ggbe )[len (*_ggbe )-1];*_ggbe =(*_ggbe )[:len (*_ggbe )-1];return &_gcaa ;};func (_deab *textObject )renderText (_ecaa _de .PdfObject ,_gccg []byte ,_beed int ,_dac string )error {if _deab ._edaf {_d .Log .Debug ("\u0072\u0065\u006e\u0064\u0065r\u0054\u0065\u0078\u0074\u003a\u0020\u0049\u006e\u0076\u0061\u006c\u0069\u0064 \u0066\u006f\u006e\u0074\u002e\u0020\u004e\u006f\u0074\u0020\u0070\u0072\u006f\u0063\u0065\u0073\u0073\u0069\u006e\u0067\u002e");
return nil ;};_eacb :=_deab .getCurrentFont ();_dggd :=_eacb .BytesToCharcodes (_gccg );var (_egg []string ;_caag int ;_cbff int ;);if _dac !=""{_egg =[]string {_de .MakeString (_dac ).Decoded ()};_caag =1;}else {_egg ,_caag ,_cbff =_eacb .CharcodesToStrings (_dggd ,"");
if _cbff > 0{_d .Log .Debug ("\u0072\u0065nd\u0065\u0072\u0054e\u0078\u0074\u003a\u0020num\u0043ha\u0072\u0073\u003d\u0025\u0064\u0020\u006eum\u004d\u0069\u0073\u0073\u0065\u0073\u003d%\u0064",_caag ,_cbff );};};_deab ._dbcc ._edcf +=_caag ;_deab ._dbcc ._abb +=_cbff ;
_gbbc :=_deab ._dbcc ;_eafgg :=_gbbc ._faba ;_fbg :=_gbbc ._ageb /100.0;_ceb :=_eaea ;if _eacb .Subtype ()=="\u0054\u0079\u0070e\u0033"{_ceb =1;};_gff ,_fbfa :=_eacb .GetRuneMetrics (' ');if !_fbfa {_gff ,_fbfa =_eacb .GetCharMetrics (32);};if !_fbfa {_gff ,_ =_cg .DefaultFont ().GetRuneMetrics (' ');
};_dged :=_gff .Wx *_ceb ;_d .Log .Trace ("\u0073p\u0061\u0063e\u0057\u0069\u0064t\u0068\u003d\u0025\u002e\u0032\u0066\u0020t\u0065\u0078\u0074\u003d\u0025\u0071 \u0066\u006f\u006e\u0074\u003d\u0025\u0073\u0020\u0066\u006f\u006et\u0053\u0069\u007a\u0065\u003d\u0025\u002e\u0032\u0066",_dged ,_egg ,_eacb ,_eafgg );
_aagb :=_ccd .NewMatrix (_eafgg *_fbg ,0,0,_eafgg ,0,_gbbc ._acee );if _gegd {_d .Log .Info ("\u0072\u0065\u006e\u0064\u0065\u0072T\u0065\u0078\u0074\u003a\u0020\u0025\u0064\u0020\u0063\u006f\u0064\u0065\u0073=\u0025\u002b\u0076\u0020\u0074\u0065\u0078t\u0073\u003d\u0025\u0071",len (_dggd ),_dggd ,_egg );
};_d .Log .Trace ("\u0072\u0065\u006e\u0064\u0065\u0072T\u0065\u0078\u0074\u003a\u0020\u0025\u0064\u0020\u0063\u006f\u0064\u0065\u0073=\u0025\u002b\u0076\u0020\u0072\u0075\u006ee\u0073\u003d\u0025\u0071",len (_dggd ),_dggd ,len (_egg ));_fdf :=_deab .getFillColor ();
_adg :=_deab .getStrokeColor ();for _fcfd ,_gdbe :=range _egg {_dded :=[]rune (_gdbe );if len (_dded )==1&&_dded [0]=='\x00'{continue ;};_fcebd :=_dggd [_fcfd ];_afgf :=_deab ._gacb .CTM .Mult (_deab ._gcde ).Mult (_aagb );_aeg :=0.0;if len (_dded )==1&&_dded [0]==32{_aeg =_gbbc ._cfbgf ;
};_agga ,_gdce :=_eacb .GetCharMetrics (_fcebd );if !_gdce {_d .Log .Debug ("\u0045R\u0052\u004fR\u003a\u0020\u004e\u006f \u006d\u0065\u0074r\u0069\u0063\u0020\u0066\u006f\u0072\u0020\u0063\u006fde\u003d\u0025\u0064 \u0072\u003d0\u0078\u0025\u0030\u0034\u0078\u003d%\u002b\u0071 \u0025\u0073",_fcebd ,_dded ,_dded ,_eacb );
return _dcf .Errorf ("\u006e\u006f\u0020\u0063\u0068\u0061\u0072\u0020\u006d\u0065\u0074\u0072\u0069\u0063\u0073:\u0020f\u006f\u006e\u0074\u003d\u0025\u0073\u0020\u0063\u006f\u0064\u0065\u003d\u0025\u0064",_eacb .String (),_fcebd );};_fffb :=_ccd .Point {X :_agga .Wx *_ceb ,Y :_agga .Wy *_ceb };
_ecgg :=_ccd .Point {X :(_fffb .X *_eafgg +_aeg )*_fbg };_eegc :=_ccd .Point {X :(_fffb .X *_eafgg +_gbbc ._ffb +_aeg )*_fbg };if _gegd {_d .Log .Info ("\u0074\u0066\u0073\u003d\u0025\u002e\u0032\u0066\u0020\u0074\u0063\u003d\u0025\u002e\u0032f\u0020t\u0077\u003d\u0025\u002e\u0032\u0066\u0020\u0074\u0068\u003d\u0025\u002e\u0032\u0066",_eafgg ,_gbbc ._ffb ,_gbbc ._cfbgf ,_fbg );
_d .Log .Info ("\u0064x\u002c\u0064\u0079\u003d%\u002e\u0033\u0066\u0020\u00740\u003d%\u002e3\u0066\u0020\u0074\u003d\u0025\u002e\u0033f",_fffb ,_ecgg ,_eegc );};_dgfbb :=_daef (_ecgg );_feee :=_daef (_eegc );_fcfa :=_deab ._gacb .CTM .Mult (_deab ._gcde ).Mult (_dgfbb );
if _ebaa {_d .Log .Info ("e\u006e\u0064\u003a\u000a\tC\u0054M\u003d\u0025\u0073\u000a\u0009 \u0074\u006d\u003d\u0025\u0073\u000a"+"\u0009\u0020t\u0064\u003d\u0025s\u0020\u0078\u006c\u0061\u0074\u003d\u0025\u0073\u000a"+"\u0009t\u0064\u0030\u003d\u0025s\u000a\u0009\u0020\u0020\u2192 \u0025s\u0020x\u006c\u0061\u0074\u003d\u0025\u0073",_deab ._gacb .CTM ,_deab ._gcde ,_feee ,_ecbd (_deab ._gacb .CTM .Mult (_deab ._gcde ).Mult (_feee )),_dgfbb ,_fcfa ,_ecbd (_fcfa ));
};_cbce ,_gefd :=_deab .newTextMark (_ca .ExpandLigatures (_dded ),_afgf ,_ecbd (_fcfa ),_b .Abs (_dged *_afgf .ScalingFactorX ()),_eacb ,_deab ._dbcc ._ffb ,_fdf ,_adg ,_ecaa ,_egg ,_fcfd ,_beed );if !_gefd {_d .Log .Debug ("\u0054\u0065\u0078\u0074\u0020\u006d\u0061\u0072\u006b\u0020\u006f\u0075\u0074\u0073\u0069d\u0065 \u0070\u0061\u0067\u0065\u002e\u0020\u0053\u006b\u0069\u0070\u0070\u0069\u006e\u0067");
continue ;};if _eacb ==nil {_d .Log .Debug ("\u0045R\u0052O\u0052\u003a\u0020\u004e\u006f\u0020\u0066\u006f\u006e\u0074\u002e");}else if _eacb .Encoder ()==nil {_d .Log .Debug ("E\u0052\u0052\u004f\u0052\u003a\u0020N\u006f\u0020\u0065\u006e\u0063\u006f\u0064\u0069\u006eg\u002e\u0020\u0066o\u006et\u003d\u0025\u0073",_eacb );
}else {if _fca ,_gadc :=_eacb .Encoder ().CharcodeToRune (_fcebd );_gadc {_cbce ._cfag =string (_fca );};};_d .Log .Trace ("i\u003d\u0025\u0064\u0020\u0063\u006fd\u0065\u003d\u0025\u0064\u0020\u006d\u0061\u0072\u006b=\u0025\u0073\u0020t\u0072m\u003d\u0025\u0073",_fcfd ,_fcebd ,_cbce ,_afgf );
_deab ._gebc =append (_deab ._gebc ,&_cbce );_deab ._gcde .Concat (_feee );};return nil ;};type paraList []*textPara ;func (_eebc *wordBag )applyRemovals (_bbfb map[int ]map[*textWord ]struct{}){for _gbcf ,_cagc :=range _bbfb {if len (_cagc )==0{continue ;
};_ddbf :=_eebc ._aade [_gbcf ];_fggd :=len (_ddbf )-len (_cagc );if _fggd ==0{delete (_eebc ._aade ,_gbcf );continue ;};_dcdb :=make ([]*textWord ,_fggd );_baa :=0;for _ ,_eed :=range _ddbf {if _ ,_bdfc :=_cagc [_eed ];!_bdfc {_dcdb [_baa ]=_eed ;_baa ++;
};};_eebc ._aade [_gbcf ]=_dcdb ;};};func _gdde (_aafa []TextMark ,_aafeg *int ,_cdgc TextMark )[]TextMark {_cdgc .Offset =*_aafeg ;_aafa =append (_aafa ,_cdgc );*_aafeg +=len (_cdgc .Text );return _aafa ;};type stateStack []*textState ;

// String returns a human readable description of `vecs`.
func (_eccf rulingList )String ()string {if len (_eccf )==0{return "\u007b \u0045\u004d\u0050\u0054\u0059\u0020}";};_dcagd ,_ggea :=_eccf .vertsHorzs ();_dfga :=len (_dcagd );_agcf :=len (_ggea );if _dfga ==0||_agcf ==0{return _dcf .Sprintf ("\u007b%\u0064\u0020\u0078\u0020\u0025\u0064}",_dfga ,_agcf );
};_edbfg :=_cg .PdfRectangle {Llx :_dcagd [0]._ebfg ,Urx :_dcagd [_dfga -1]._ebfg ,Lly :_ggea [_agcf -1]._ebfg ,Ury :_ggea [0]._ebfg };return _dcf .Sprintf ("\u007b\u0025d\u0020\u0078\u0020%\u0064\u003a\u0020\u0025\u0036\u002e\u0032\u0066\u007d",_dfga ,_agcf ,_edbfg );
};func (_cfcb *textObject )moveText (_cdeb ,_fcg float64 ){_cfcb .moveLP (_cdeb ,_fcg )};type compositeCell struct{_cg .PdfRectangle ;paraList ;};const (_gddc markKind =iota ;_bgfbc ;_cefgc ;_bgdab ;);func (_eeac *wordBag )makeRemovals ()map[int ]map[*textWord ]struct{}{_fedd :=make (map[int ]map[*textWord ]struct{},len (_eeac ._aade ));
for _gbdf :=range _eeac ._aade {_fedd [_gbdf ]=make (map[*textWord ]struct{});};return _fedd ;};type textTable struct{_cg .PdfRectangle ;_ffcde ,_agefc int ;_eeff bool ;_adaa map[uint64 ]*textPara ;_gefa map[uint64 ]compositeCell ;};func _afcg (_cdee []int )[]int {_ccgfd :=make ([]int ,len (_cdee ));
for _eddaf ,_dfagf :=range _cdee {_ccgfd [len (_cdee )-1-_eddaf ]=_dfagf ;};return _ccgfd ;};func (_fbaac *subpath )last ()_ccd .Point {return _fbaac ._bbff [len (_fbaac ._bbff )-1]};func (_aff *wordBag )removeWord (_facf *textWord ,_ebec int ){_dgce :=_aff ._aade [_ebec ];
_dgce =_bfggf (_dgce ,_facf );if len (_dgce )==0{delete (_aff ._aade ,_ebec );}else {_aff ._aade [_ebec ]=_dgce ;};};func (_dbgc *stateStack )top ()*textState {if _dbgc .empty (){return nil ;};return (*_dbgc )[_dbgc .size ()-1];};func (_ddbga *textTable )putComposite (_gdag ,_fcdea int ,_feaf paraList ,_bcffg _cg .PdfRectangle ){if len (_feaf )==0{_d .Log .Error ("\u0074\u0065xt\u0054\u0061\u0062l\u0065\u0029\u0020\u0070utC\u006fmp\u006f\u0073\u0069\u0074\u0065\u003a\u0020em\u0070\u0074\u0079\u0020\u0070\u0061\u0072a\u0073");
return ;};_afag :=compositeCell {PdfRectangle :_bcffg ,paraList :_feaf };if _fdea {_dcf .Printf ("\u0020\u0020\u0020\u0020\u0020\u0020\u0020\u0020\u0070\u0075\u0074\u0043\u006f\u006d\u0070o\u0073i\u0074\u0065\u0028\u0025\u0064\u002c\u0025\u0064\u0029\u003c\u002d\u0025\u0073\u000a",_gdag ,_fcdea ,_afag .String ());
};_afag .updateBBox ();_ddbga ._gefa [_egegf (_gdag ,_fcdea )]=_afag ;};func _gegf (_eafd []*textMark ,_bfgef _cg .PdfRectangle ,_dfgad bool )[]*textWord {var _dadeg []*textWord ;var _fgedg *textWord ;if _abgg {_d .Log .Info ("\u006d\u0061\u006beT\u0065\u0078\u0074\u0057\u006f\u0072\u0064\u0073\u003a\u0020\u0025\u0064\u0020\u006d\u0061\u0072\u006b\u0073",len (_eafd ));
};_gefb :=func (){if _fgedg !=nil {_edccf :=_fgedg .computeText ();if !_fffbd (_edccf ){_fgedg ._afaded =_edccf ;_dadeg =append (_dadeg ,_fgedg );if _abgg {_d .Log .Info ("\u0061\u0064\u0064Ne\u0077\u0057\u006f\u0072\u0064\u003a\u0020\u0025\u0064\u003a\u0020\u0077\u006f\u0072\u0064\u003d\u0025\u0073",len (_dadeg )-1,_fgedg .String ());
for _bbgfe ,_dcacb :=range _fgedg ._dacf {_dcf .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0073\u000a",_bbgfe ,_dcacb .String ());};};};_fgedg =nil ;};};for _ ,_abafa :=range _eafd {if _ddeb &&_fgedg !=nil &&len (_fgedg ._dacf )> 0{_gbfge :=_fgedg ._dacf [len (_fgedg ._dacf )-1];
_fgeb ,_afecc :=_gaab (_abafa ._cffag );_efdbb ,_deaca :=_gaab (_gbfge ._cffag );if _afecc &&!_deaca &&_gbfge .inDiacriticArea (_abafa ){_fgedg .addDiacritic (_fgeb );continue ;};if _deaca &&!_afecc &&_abafa .inDiacriticArea (_gbfge ){_fgedg ._dacf =_fgedg ._dacf [:len (_fgedg ._dacf )-1];
_fgedg .appendMark (_abafa ,_bfgef );_fgedg .addDiacritic (_efdbb );continue ;};};_gaaa :=_fffbd (_abafa ._cffag );if _gaaa {_gefb ();continue ;};if _fgedg ==nil &&!_gaaa {_fgedg =_gcegg ([]*textMark {_abafa },_bfgef );continue ;};_dcfga :=_fgedg ._egca ;
_fcfca :=_b .Abs (_bgdb (_bfgef ,_abafa )-_fgedg ._acgec )/_dcfga ;_edgag :=_gbada (_abafa ,_fgedg )/_dcfga ;_ggdbc :=_fgedg .Width ()+_abafa .Width ();if _dfgad &&_abafa ._defga .Angle ()!=0.0{_egbca :=_b .Abs (_ggdbc *_b .Tan (_abafa ._defga .Angle ())/_dcfga );
if _fcfca > _egbca {_fcfca -=_egbca ;}else {_fcfca =0.0;};};if _edgag >=_cgeea ||!(-_bcf <=_edgag &&_fcfca <=_fcdg ){_gefb ();_fgedg =_gcegg ([]*textMark {_abafa },_bfgef );continue ;};_fgedg .appendMark (_abafa ,_bfgef );};_gefb ();return _dadeg ;};

// String returns a description of `l`.
func (_ggdbb *textLine )String ()string {return _dcf .Sprintf ("\u0025\u002e2\u0066\u0020\u0025\u0036\u002e\u0032\u0066\u0020\u0066\u006f\u006e\u0074\u0073\u0069\u007a\u0065\u003d\u0025\u002e\u0032\u0066\u0020\"%\u0073\u0022",_ggdbb ._abfa ,_ggdbb .PdfRectangle ,_ggdbb ._dcad ,_ggdbb .text ());
};func (_cgfa *subpath )removeDuplicates (){if len (_cgfa ._bbff )==0{return ;};_cgdad :=[]_ccd .Point {_cgfa ._bbff [0]};for _ ,_dgfe :=range _cgfa ._bbff [1:]{if !_dbff (_dgfe ,_cgdad [len (_cgdad )-1]){_cgdad =append (_cgdad ,_dgfe );};};_cgfa ._bbff =_cgdad ;
};func _bdde (_ggfa *list ,_gcfge *_bc .Builder ,_dfec *string ){_acgb :=_bgcb (_ggfa ,_dfec );_gcfge .WriteString (_acgb );for _ ,_edfag :=range _ggfa ._gbcb {_cfec :=*_dfec +"\u0020\u0020\u0020";_bdde (_edfag ,_gcfge ,&_cfec );};};func _bgcb (_feacf *list ,_dfgc *string )string {_affcb :=_bc .Split (_feacf ._ggdc ,"\u000a");
_cdabg :=&_bc .Builder {};for _ ,_gaba :=range _affcb {if _gaba !=""{_cdabg .WriteString (*_dfgc );_cdabg .WriteString (_gaba );_cdabg .WriteString ("\u000a");};};return _cdabg .String ();};func (_fgeg gridTile )numBorders ()int {_edfce :=0;if _fgeg ._agege {_edfce ++;
};if _fgeg ._gfaaa {_edfce ++;};if _fgeg ._bebc {_edfce ++;};if _fgeg ._ffff {_edfce ++;};return _edfce ;};func (_ccdda *textPara )bbox ()_cg .PdfRectangle {return _ccdda .PdfRectangle };func (_afced *ruling )equals (_gffff *ruling )bool {return _afced ._ccffc ==_gffff ._ccffc &&_fdcd (_afced ._ebfg ,_gffff ._ebfg )&&_fdcd (_afced ._ffebg ,_gffff ._ffebg )&&_fdcd (_afced ._ceba ,_gffff ._ceba );
};

// New returns an Extractor instance for extracting content from the input PDF page.
func New (page *_cg .PdfPage )(*Extractor ,error ){return NewWithOptions (page ,nil )};func (_ccgfc rulingList )primMinMax ()(float64 ,float64 ){_abdf ,_ggba :=_ccgfc [0]._ebfg ,_ccgfc [0]._ebfg ;for _ ,_geda :=range _ccgfc [1:]{if _geda ._ebfg < _abdf {_abdf =_geda ._ebfg ;
}else if _geda ._ebfg > _ggba {_ggba =_geda ._ebfg ;};};return _abdf ,_ggba ;};func (_dfcea rulingList )primaries ()[]float64 {_eebg :=make (map[float64 ]struct{},len (_dfcea ));for _ ,_cfgff :=range _dfcea {_eebg [_cfgff ._ebfg ]=struct{}{};};_addda :=make ([]float64 ,len (_eebg ));
_fgdf :=0;for _geefe :=range _eebg {_addda [_fgdf ]=_geefe ;_fgdf ++;};_cc .Float64s (_addda );return _addda ;};func (_cgbc *wordBag )absorb (_cdaaf *wordBag ){_ebdgff :=_cdaaf .makeRemovals ();for _ebbf ,_fgd :=range _cdaaf ._aade {for _ ,_afgce :=range _fgd {_cgbc .pullWord (_afgce ,_ebbf ,_ebdgff );
};};_cdaaf .applyRemovals (_ebdgff );};

// Text returns the extracted page text.
func (_aggc PageText )Text ()string {return _aggc ._gaca };

// ImageMark represents an image drawn on a page and its position in device coordinates.
// All coordinates are in device coordinates.
type ImageMark struct{Image *_cg .Image ;

// Dimensions of the image as displayed in the PDF.
Width float64 ;Height float64 ;

// Position of the image in PDF coordinates (lower left corner).
X float64 ;Y float64 ;

// Angle in degrees, if rotated.
Angle float64 ;};func _daef (_cgg _ccd .Point )_ccd .Matrix {return _ccd .TranslationMatrix (_cgg .X ,_cgg .Y )};func (_dgcda *wordBag )depthBand (_egdb ,_gaec float64 )[]int {if len (_dgcda ._aade )==0{return nil ;};return _dgcda .depthRange (_dgcda .getDepthIdx (_egdb ),_dgcda .getDepthIdx (_gaec ));
};

// Elements returns the TextMarks in `ma`.
func (_bdgb *TextMarkArray )Elements ()[]TextMark {return _bdgb ._bgad };func (_aaedg rulingList )toTilings ()(rulingList ,[]gridTiling ){_aaedg .log ("\u0074o\u0054\u0069\u006c\u0069\u006e\u0067s");if len (_aaedg )==0{return nil ,nil ;};_aaedg =_aaedg .tidied ("\u0061\u006c\u006c");
_aaedg .log ("\u0074\u0069\u0064\u0069\u0065\u0064");_gecf :=_aaedg .toGrids ();_edfcg :=make ([]gridTiling ,len (_gecf ));for _gebb ,_ebgf :=range _gecf {_edfcg [_gebb ]=_ebgf .asTiling ();};return _aaedg ,_edfcg ;};func _ecbd (_ddgc _ccd .Matrix )_ccd .Point {_cgegf ,_gffe :=_ddgc .Translation ();
return _ccd .Point {X :_cgegf ,Y :_gffe };};func _fa (_gb []string ,_fac int ,_facg string )int {_aa :=_fac ;for ;_aa < len (_gb );_aa ++{if _gb [_aa ]!=_facg {return _aa ;};};return _aa ;};func (_fcaf *ruling )intersects (_abcef *ruling )bool {_bfda :=(_fcaf ._ccffc ==_dgcg &&_abcef ._ccffc ==_afec )||(_abcef ._ccffc ==_dgcg &&_fcaf ._ccffc ==_afec );
_gagfa :=func (_gdgce ,_dbaf *ruling )bool {return _gdgce ._ffebg -_cddc <=_dbaf ._ebfg &&_dbaf ._ebfg <=_gdgce ._ceba +_cddc ;};_dbfedc :=_gagfa (_fcaf ,_abcef );_dcbgg :=_gagfa (_abcef ,_fcaf );if _gagf {_dcf .Printf ("\u0020\u0020\u0020\u0020\u0069\u006e\u0074\u0065\u0072\u0073\u0065\u0063\u0074\u0073\u003a\u0020\u0020\u006fr\u0074\u0068\u006f\u0067\u006f\u006e\u0061l\u003d\u0025\u0074\u0020\u006f\u0031\u003d\u0025\u0074\u0020\u006f2\u003d\u0025\u0074\u0020\u2192\u0020\u0025\u0074\u000a"+"\u0020\u0020\u0020 \u0020\u0020\u0020\u0076\u003d\u0025\u0073\u000a"+" \u0020\u0020\u0020\u0020\u0020\u0077\u003d\u0025\u0073\u000a",_bfda ,_dbfedc ,_dcbgg ,_bfda &&_dbfedc &&_dcbgg ,_fcaf ,_abcef );
};return _bfda &&_dbfedc &&_dcbgg ;};func _defb (_cgecc []*textLine ,_fcbab string )string {var _dced _bc .Builder ;_gdbb :=0.0;for _aded ,_efde :=range _cgecc {_ffda :=_efde .text ();_fggde :=_efde ._abfa ;if _aded < len (_cgecc )-1{_gdbb =_cgecc [_aded +1]._abfa ;
}else {_gdbb =0.0;};_dced .WriteString (_fcbab );_dced .WriteString (_ffda );if _gdbb !=_fggde {_dced .WriteString ("\u000a");}else {_dced .WriteString ("\u0020");};};return _dced .String ();};func (_bdcb *textObject )moveTextSetLeading (_cec ,_gbbb float64 ){_bdcb ._dbcc ._dcge =-_gbbb ;
_bdcb .moveLP (_cec ,_gbbb );};func _gbgb (_dcdee []TextMark ,_cfebgc *TextTable )[]TextMark {var _gfcd []TextMark ;for _ ,_cegf :=range _dcdee {_cegf ._cdedb =true ;_cegf ._fcdd =_cfebgc ;_gfcd =append (_gfcd ,_cegf );};return _gfcd ;};func (_abaeb rectRuling )asRuling ()(*ruling ,bool ){_ageff :=ruling {_ccffc :_abaeb ._acfgf ,Color :_abaeb .Color ,_cagbg :_cefgc };
switch _abaeb ._acfgf {case _dgcg :_ageff ._ebfg =0.5*(_abaeb .Llx +_abaeb .Urx );_ageff ._ffebg =_abaeb .Lly ;_ageff ._ceba =_abaeb .Ury ;_eabad ,_cbdd :=_abaeb .checkWidth (_abaeb .Llx ,_abaeb .Urx );if !_cbdd {if _gada {_d .Log .Error ("\u0072\u0065\u0063\u0074\u0052\u0075l\u0069\u006e\u0067\u002e\u0061\u0073\u0052\u0075\u006c\u0069\u006e\u0067\u003a\u0020\u0072\u0075\u006c\u0069\u006e\u0067V\u0065\u0072\u0074\u0020\u0021\u0063\u0068\u0065\u0063\u006b\u0057\u0069\u0064\u0074h\u0020v\u003d\u0025\u002b\u0076",_abaeb );
};return nil ,false ;};_ageff ._dcgg =_eabad ;case _afec :_ageff ._ebfg =0.5*(_abaeb .Lly +_abaeb .Ury );_ageff ._ffebg =_abaeb .Llx ;_ageff ._ceba =_abaeb .Urx ;_baaf ,_cgbde :=_abaeb .checkWidth (_abaeb .Lly ,_abaeb .Ury );if !_cgbde {if _gada {_d .Log .Error ("\u0072\u0065\u0063\u0074\u0052\u0075l\u0069\u006e\u0067\u002e\u0061\u0073\u0052\u0075\u006c\u0069\u006e\u0067\u003a\u0020\u0072\u0075\u006c\u0069\u006e\u0067H\u006f\u0072\u007a\u0020\u0021\u0063\u0068\u0065\u0063\u006b\u0057\u0069\u0064\u0074h\u0020v\u003d\u0025\u002b\u0076",_abaeb );
};return nil ,false ;};_ageff ._dcgg =_baaf ;default:_d .Log .Error ("\u0062\u0061\u0064\u0020pr\u0069\u006d\u0061\u0072\u0079\u0020\u006b\u0069\u006e\u0064\u003d\u0025\u0064",_abaeb ._acfgf );return nil ,false ;};return &_ageff ,true ;};

// Options extractor options.
type Options struct{

// DisableDocumentTags specifies whether to use the document tags during list extraction.
DisableDocumentTags bool ;

// ApplyCropBox will extract page text based on page cropbox if set to `true`.
ApplyCropBox bool ;

// UseSimplerExtractionProcess will skip topological text ordering and table processing.
//
// NOTE: While normally the extra processing is beneficial, it can also lead to problems when it does not work.
// Thus it is a flag to allow the user to control this process.
//
// Skipping some extraction processes would also lead to the reduced processing time.
UseSimplerExtractionProcess bool ;

// IncludeAnnotations specifies whether to include annotations in the extraction process, default value is `false`.
IncludeAnnotations bool ;

// If enabled, this option prevents splitting of one line into several lines.
DisableMultiColumns bool ;

// RelaxedMode specifies whether to use relaxed mode for processing the objects,
// If enabled UniPDF will automatically try to fix invalid parameters length and value.
// Default is `false`.
RelaxedMode bool ;};func _fgbf (_fdddf float64 )bool {return _b .Abs (_fdddf )< _dddf };

// TableCell is a cell in a TextTable.
type TableCell struct{_cg .PdfRectangle ;

// Text is the extracted text.
Text string ;

// Marks returns the TextMarks corresponding to the text in Text.
Marks TextMarkArray ;};func _egegf (_gefaa ,_adeee int )uint64 {return uint64 (_gefaa )*0x1000000+uint64 (_adeee )};func (_cdedc *textPara )toTextMarks (_fgba *int )[]TextMark {if _cdedc ._bbbg ==nil {return _cdedc .toCellTextMarks (_fgba );};var _eaef []TextMark ;
for _cdfb :=0;_cdfb < _cdedc ._bbbg ._agefc ;_cdfb ++{for _dggb :=0;_dggb < _cdedc ._bbbg ._ffcde ;_dggb ++{_ddca :=_cdedc ._bbbg .get (_dggb ,_cdfb );if _ddca ==nil {_eaef =_gacbc (_eaef ,_fgba ,"\u0009");}else {_ecacd :=_ddca .toCellTextMarks (_fgba );
_eaef =append (_eaef ,_ecacd ...);};_eaef =_gacbc (_eaef ,_fgba ,"\u0020");};if _cdfb < _cdedc ._bbbg ._agefc -1{_eaef =_gacbc (_eaef ,_fgba ,"\u000a");};};_fcgg :=_cdedc ._bbbg ;if _fcgg .isExportable (){_ddffd :=_fcgg .toTextTable ();_eaef =_gbgb (_eaef ,&_ddffd );
};return _eaef ;};type ruling struct{_ccffc rulingKind ;_cagbg markKind ;_dc .Color ;_ebfg float64 ;_ffebg float64 ;_ceba float64 ;_dcgg float64 ;};func _acca (_acbeb ,_cad bounded )float64 {_fdae :=_bagf (_acbeb ,_cad );if !_cccee (_fdae ){return _fdae ;
};return _fdgb (_acbeb ,_cad );};func (_bcca *textLine )bbox ()_cg .PdfRectangle {return _bcca .PdfRectangle };const (_cbfee rulingKind =iota ;_afec ;_dgcg ;);

// String returns a description of `v`.
func (_ffga *ruling )String ()string {if _ffga ._ccffc ==_cbfee {return "\u004e\u004f\u0054\u0020\u0052\u0055\u004c\u0049\u004e\u0047";};_gdaac ,_gaag :="\u0078","\u0079";if _ffga ._ccffc ==_afec {_gdaac ,_gaag ="\u0079","\u0078";};_affd :="";if _ffga ._dcgg !=0.0{_affd =_dcf .Sprintf (" \u0077\u0069\u0064\u0074\u0068\u003d\u0025\u002e\u0032\u0066",_ffga ._dcgg );
};return _dcf .Sprintf ("\u0025\u00310\u0073\u0020\u0025\u0073\u003d\u0025\u0036\u002e\u0032\u0066\u0020\u0025\u0073\u003d\u0025\u0036\u002e\u0032\u0066\u0020\u002d\u0020\u0025\u0036\u002e\u0032\u0066\u0020\u0028\u0025\u0036\u002e\u0032\u0066\u0029\u0020\u0025\u0073\u0020\u0025\u0076\u0025\u0073",_ffga ._ccffc ,_gdaac ,_ffga ._ebfg ,_gaag ,_ffga ._ffebg ,_ffga ._ceba ,_ffga ._ceba -_ffga ._ffebg ,_ffga ._cagbg ,_ffga .Color ,_affd );
};func (_efcee rulingList )snapToGroupsDirection ()rulingList {_efcee .sortStrict ();_cffe :=make (map[*ruling ]rulingList ,len (_efcee ));_egced :=_efcee [0];_edadae :=func (_bccab *ruling ){_egced =_bccab ;_cffe [_egced ]=rulingList {_bccab }};_edadae (_efcee [0]);
for _ ,_cagf :=range _efcee [1:]{if _cagf ._ebfg < _egced ._ebfg -_fdcc {_d .Log .Error ("\u0073\u006e\u0061\u0070T\u006f\u0047\u0072\u006f\u0075\u0070\u0073\u0044\u0069r\u0065\u0063\u0074\u0069\u006f\u006e\u003a\u0020\u0057\u0072\u006f\u006e\u0067\u0020\u0070\u0072\u0069\u006da\u0072\u0079\u0020\u006f\u0072d\u0065\u0072\u002e\u000a\u0009\u0076\u0030\u003d\u0025\u0073\u000a\u0009\u0020\u0076\u003d\u0025\u0073",_egced ,_cagf );
};if _cagf ._ebfg > _egced ._ebfg +_dddf {_edadae (_cagf );}else {_cffe [_egced ]=append (_cffe [_egced ],_cagf );};};_gbcg :=make (map[*ruling ]float64 ,len (_cffe ));_aecef :=make (map[*ruling ]*ruling ,len (_efcee ));for _ceddg ,_eacfc :=range _cffe {_gbcg [_ceddg ]=_eacfc .mergePrimary ();
for _ ,_gcefa :=range _eacfc {_aecef [_gcefa ]=_ceddg ;};};for _ ,_gegba :=range _efcee {_gegba ._ebfg =_gbcg [_aecef [_gegba ]];};_fbbcg :=make (rulingList ,0,len (_efcee ));for _ ,_fbded :=range _cffe {_fgggd :=_fbded .splitSec ();for _dggda ,_egbf :=range _fgggd {_fbegg :=_egbf .merge ();
if len (_fbbcg )> 0{_gaad :=_fbbcg [len (_fbbcg )-1];if _gaad .alignsPrimary (_fbegg )&&_gaad .alignsSec (_fbegg ){_d .Log .Error ("\u0073\u006e\u0061\u0070\u0054\u006fG\u0072\u006f\u0075\u0070\u0073\u0044\u0069\u0072\u0065\u0063\u0074\u0069\u006f\u006e\u003a\u0020\u0044\u0075\u0070\u006ci\u0063\u0061\u0074\u0065\u0020\u0069\u003d\u0025\u0064\u000a\u0009\u0077\u003d\u0025s\u000a\t\u0076\u003d\u0025\u0073",_dggda ,_gaad ,_fbegg );
continue ;};};_fbbcg =append (_fbbcg ,_fbegg );};};_fbbcg .sortStrict ();return _fbbcg ;};func (_aeca paraList )readBefore (_geae []int ,_afad ,_gggdg int )bool {_baae ,_efcg :=_aeca [_afad ],_aeca [_gggdg ];if _geddd (_baae ,_efcg )&&_baae .Lly > _efcg .Lly {return true ;
};if !(_baae ._bfc .Urx < _efcg ._bfc .Llx ){return false ;};_gefg ,_deec :=_baae .Lly ,_efcg .Lly ;if _gefg > _deec {_deec ,_gefg =_gefg ,_deec ;};_cfead :=_b .Max (_baae ._bfc .Llx ,_efcg ._bfc .Llx );_ceae :=_b .Min (_baae ._bfc .Urx ,_efcg ._bfc .Urx );
_eeag :=_aeca .llyRange (_geae ,_gefg ,_deec );for _ ,_dcdea :=range _eeag {if _dcdea ==_afad ||_dcdea ==_gggdg {continue ;};_bgca :=_aeca [_dcdea ];if _bgca ._bfc .Llx <=_ceae &&_cfead <=_bgca ._bfc .Urx {return false ;};};return true ;};func _ggae (_fgcf []*wordBag )[]*wordBag {if len (_fgcf )<=1{return _fgcf ;
};if _bcaf {_d .Log .Info ("\u006d\u0065\u0072\u0067\u0065\u0057\u006f\u0072\u0064B\u0061\u0067\u0073\u003a");};_cc .Slice (_fgcf ,func (_fbed ,_cdfa int )bool {_abaf ,_acf :=_fgcf [_fbed ],_fgcf [_cdfa ];_feg :=_abaf .Width ()*_abaf .Height ();_cgbdf :=_acf .Width ()*_acf .Height ();
if _feg !=_cgbdf {return _feg > _cgbdf ;};if _abaf .Height ()!=_acf .Height (){return _abaf .Height ()> _acf .Height ();};return _fbed < _cdfa ;});var _ecc []*wordBag ;_ecfa :=make (intSet );for _geef :=0;_geef < len (_fgcf );_geef ++{if _ecfa .has (_geef ){continue ;
};_adfc :=_fgcf [_geef ];for _abeg :=_geef +1;_abeg < len (_fgcf );_abeg ++{if _ecfa .has (_geef ){continue ;};_cbbe :=_fgcf [_abeg ];_ccccg :=_adfc .PdfRectangle ;_ccccg .Llx -=_adfc ._fdbe ;if _fcbc (_ccccg ,_cbbe .PdfRectangle ){_adfc .absorb (_cbbe );
_ecfa .add (_abeg );};};_ecc =append (_ecc ,_adfc );};if len (_fgcf )!=len (_ecc )+len (_ecfa ){_d .Log .Error ("\u006d\u0065\u0072ge\u0057\u006f\u0072\u0064\u0042\u0061\u0067\u0073\u003a \u0025d\u2192%\u0064 \u0061\u0062\u0073\u006f\u0072\u0062\u0065\u0064\u003d\u0025\u0064",len (_fgcf ),len (_ecc ),len (_ecfa ));
};return _ecc ;};type event struct{_dgdgd float64 ;_ddbcb bool ;_fcdf int ;};func _gdgfg (_dgae _cg .PdfRectangle )*ruling {return &ruling {_ccffc :_afec ,_ebfg :_dgae .Lly ,_ffebg :_dgae .Llx ,_ceba :_dgae .Urx };};

// ExtractTextWithStats works like ExtractText but returns the number of characters in the output
// (`numChars`) and the number of characters that were not decoded (`numMisses`).
func (_egdf *Extractor )ExtractTextWithStats ()(_acgcc string ,_gcb int ,_fda int ,_aagg error ){_ffe ,_gcb ,_fda ,_aagg :=_egdf .ExtractPageText ();if _aagg !=nil {return "",_gcb ,_fda ,_aagg ;};return _ffe .Text (),_gcb ,_fda ,nil ;};func _cfea (_adgd byte )bool {for _ ,_gadad :=range _ffgc {if []byte (_gadad )[0]==_adgd {return true ;
};};return false ;};func _dbbgf (_fefda *wordBag ,_dadc *textWord ,_dcgd float64 )bool {return _dadc .Llx < _fefda .Urx +_dcgd &&_fefda .Llx -_dcgd < _dadc .Urx ;};

// Len returns the number of TextMarks in `ma`.
func (_ddfg *TextMarkArray )Len ()int {if _ddfg ==nil {return 0;};return len (_ddfg ._bgad );};func (_begf *textObject )getFont (_gfag string )(*_cg .PdfFont ,error ){if _begf ._bbcc ._ega !=nil {_fbdb ,_cbcf :=_begf .getFontDict (_gfag );if _cbcf !=nil {_d .Log .Debug ("\u0045\u0052\u0052OR\u003a\u0020\u0067\u0065\u0074\u0046\u006f\u006e\u0074:\u0020n\u0061m\u0065=\u0025\u0073\u002c\u0020\u0065\u0072\u0072\u006f\u0072\u003a\u0020\u0025\u0073",_gfag ,_cbcf .Error ());
return nil ,_cbcf ;};_begf ._bbcc ._bgg ++;_ecgb ,_aacg :=_begf ._bbcc ._ega [_fbdb .String ()];if _aacg {_ecgb ._fged =_begf ._bbcc ._bgg ;return _ecgb ._edgbf ,nil ;};};_gdffe ,_bdbbb :=_begf .getFontDict (_gfag );if _bdbbb !=nil {return nil ,_bdbbb ;
};_ebac ,_bdbbb :=_begf .getFontDirect (_gfag );if _bdbbb !=nil {return nil ,_bdbbb ;};if _begf ._bbcc ._ega !=nil {_faee :=fontEntry {_ebac ,_begf ._bbcc ._bgg };if len (_begf ._bbcc ._ega )>=_egb {var _decgg []string ;for _cbac :=range _begf ._bbcc ._ega {_decgg =append (_decgg ,_cbac );
};_cc .Slice (_decgg ,func (_bgde ,_cgfe int )bool {return _begf ._bbcc ._ega [_decgg [_bgde ]]._fged < _begf ._bbcc ._ega [_decgg [_cgfe ]]._fged ;});delete (_begf ._bbcc ._ega ,_decgg [0]);};_begf ._bbcc ._ega [_gdffe .String ()]=_faee ;};return _ebac ,nil ;
};func (_gefec *ruling )alignsPrimary (_ccdcf *ruling )bool {return _gefec ._ccffc ==_ccdcf ._ccffc &&_b .Abs (_gefec ._ebfg -_ccdcf ._ebfg )< _dddf *0.5;};func _dgd (_dcef string ,_gba bool ,_ad bool )BidiText {_ag :="\u006c\u0074\u0072";if _ad {_ag ="\u0074\u0074\u0062";
}else if !_gba {_ag ="\u0072\u0074\u006c";};return BidiText {_fg :_dcef ,_gc :_ag };};type subpath struct{_bbff []_ccd .Point ;_efdb bool ;};

// Append appends `mark` to the mark array.
func (_cdebg *TextMarkArray )Append (mark TextMark ){_cdebg ._bgad =append (_cdebg ._bgad ,mark )};func (_gggb gridTile )complete ()bool {return _gggb .numBorders ()==4};func _baafc (_eafcg ,_fdddg _ccd .Point )rulingKind {_fcde :=_b .Abs (_eafcg .X -_fdddg .X );
_fabbg :=_b .Abs (_eafcg .Y -_fdddg .Y );return _gbgd (_fcde ,_fabbg ,_adcca );};func (_edfe *textObject )showText (_afba _de .PdfObject ,_cbcg []byte ,_dde int ,_fec string )error {return _edfe .renderText (_afba ,_cbcg ,_dde ,_fec );};func (_ebcef rulingList )augmentGrid ()(rulingList ,rulingList ){_bffff ,_eabbf :=_ebcef .vertsHorzs ();
if len (_bffff )==0||len (_eabbf )==0{return _bffff ,_eabbf ;};_ecbf ,_eada :=_bffff ,_eabbf ;_abgd :=_bffff .bbox ();_abfb :=_eabbf .bbox ();if _gagf {_d .Log .Info ("\u0061u\u0067\u006d\u0065\u006e\u0074\u0047\u0072\u0069\u0064\u003a\u0020b\u0062\u006f\u0078\u0056\u003d\u0025\u0036\u002e\u0032\u0066",_abgd );
_d .Log .Info ("\u0061u\u0067\u006d\u0065\u006e\u0074\u0047\u0072\u0069\u0064\u003a\u0020b\u0062\u006f\u0078\u0048\u003d\u0025\u0036\u002e\u0032\u0066",_abfb );};var _edaeb ,_ecgbd ,_gagb ,_bcbf *ruling ;if _abfb .Llx < _abgd .Llx -_cddc {_edaeb =&ruling {_cagbg :_bgdab ,_ccffc :_dgcg ,_ebfg :_abfb .Llx ,_ffebg :_abgd .Lly ,_ceba :_abgd .Ury };
_bffff =append (rulingList {_edaeb },_bffff ...);};if _abfb .Urx > _abgd .Urx +_cddc {_ecgbd =&ruling {_cagbg :_bgdab ,_ccffc :_dgcg ,_ebfg :_abfb .Urx ,_ffebg :_abgd .Lly ,_ceba :_abgd .Ury };_bffff =append (_bffff ,_ecgbd );};if _abgd .Lly < _abfb .Lly -_cddc {_gagb =&ruling {_cagbg :_bgdab ,_ccffc :_afec ,_ebfg :_abgd .Lly ,_ffebg :_abfb .Llx ,_ceba :_abfb .Urx };
_eabbf =append (rulingList {_gagb },_eabbf ...);};if _abgd .Ury > _abfb .Ury +_cddc {_bcbf =&ruling {_cagbg :_bgdab ,_ccffc :_afec ,_ebfg :_abgd .Ury ,_ffebg :_abfb .Llx ,_ceba :_abfb .Urx };_eabbf =append (_eabbf ,_bcbf );};if len (_bffff )+len (_eabbf )==len (_ebcef ){return _ecbf ,_eada ;
};_addb :=append (_bffff ,_eabbf ...);_ebcef .log ("u\u006e\u0061\u0075\u0067\u006d\u0065\u006e\u0074\u0065\u0064");_addb .log ("\u0061u\u0067\u006d\u0065\u006e\u0074\u0065d");return _bffff ,_eabbf ;};func _af (_dce []string ,_egd int ,_eb int ){for _eac ,_cab :=_egd ,_eb -1;
_eac < _cab ;_eac ,_cab =_eac +1,_cab -1{_fef :=_dce [_eac ];_dce [_eac ]=_dce [_cab ];_dce [_cab ]=_fef ;};};func (_fdeba *wordBag )allWords ()[]*textWord {var _dcb []*textWord ;for _ ,_gebe :=range _fdeba ._aade {_dcb =append (_dcb ,_gebe ...);};return _dcb ;
};

// String returns a description of `b`.
func (_fdab *wordBag )String ()string {var _bbfg []string ;for _ ,_efef :=range _fdab .depthIndexes (){_fadd :=_fdab ._aade [_efef ];for _ ,_fbaf :=range _fadd {_bbfg =append (_bbfg ,_fbaf ._afaded );};};return _dcf .Sprintf ("\u0025.\u0032\u0066\u0020\u0066\u006f\u006e\u0074\u0073\u0069\u007a\u0065=\u0025\u002e\u0032\u0066\u0020\u0025\u0064\u0020\u0025\u0071",_fdab .PdfRectangle ,_fdab ._fdbe ,len (_bbfg ),_bbfg );
};func _dbbf (_fbb *wordBag ,_eedbc *textWord ,_deba float64 )bool {return _fbb .Urx <=_eedbc .Llx &&_eedbc .Llx < _fbb .Urx +_deba ;};

// Extractor stores and offers functionality for extracting content from PDF pages.
type Extractor struct{_bce string ;_cga *_cg .PdfPageResources ;_eaf _cg .PdfRectangle ;_da *_cg .PdfRectangle ;_bac int ;_ega map[string ]fontEntry ;_eae map[string ]textResult ;_eag map[string ]textResult ;_bgg int64 ;_bcc int ;_dbd *Options ;_adb *_cg .StructTreeRoot ;
_bf _de .PdfObject ;_ggcb []*_cg .PdfAnnotation ;};

// String returns a description of `t`.
func (_bbgde *textTable )String ()string {return _dcf .Sprintf ("\u0025\u0064\u0020\u0078\u0020\u0025\u0064\u0020\u0025\u0074",_bbgde ._ffcde ,_bbgde ._agefc ,_bbgde ._eeff );};func (_dgdac lineRuling )xMean ()float64 {return 0.5*(_dgdac ._gafbd .X +_dgdac ._ebgd .X )};
func (_ceeda rulingList )asTiling ()gridTiling {if _cebb {_d .Log .Info ("r\u0075\u006ci\u006e\u0067\u004c\u0069\u0073\u0074\u002e\u0061\u0073\u0054\u0069\u006c\u0069\u006e\u0067\u003a\u0020\u0076\u0065\u0063s\u003d\u0025\u0064\u0020\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d=\u003d\u003d\u003d\u003d\u003d\u002b\u002b\u002b\u0020\u003d\u003d\u003d\u003d=\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d=\u003d",len (_ceeda ));
};for _eadg ,_efgbe :=range _ceeda [1:]{_faec :=_ceeda [_eadg ];if _faec .alignsPrimary (_efgbe )&&_faec .alignsSec (_efgbe ){_d .Log .Error ("a\u0073\u0054\u0069\u006c\u0069\u006e\u0067\u003a\u0020\u0044\u0075\u0070\u006c\u0069\u0063\u0061\u0074\u0065 \u0072\u0075\u006c\u0069\u006e\u0067\u0073\u002e\u000a\u0009v=\u0025\u0073\u000a\t\u0077=\u0025\u0073",_efgbe ,_faec );
};};_ceeda .sortStrict ();_ceeda .log ("\u0073n\u0061\u0070\u0070\u0065\u0064");_dfca ,_aeeeg :=_ceeda .vertsHorzs ();_bbgda :=_dfca .primaries ();_acce :=_aeeeg .primaries ();_bbfdc :=len (_bbgda )-1;_dfgd :=len (_acce )-1;if _bbfdc ==0||_dfgd ==0{return gridTiling {};
};_eedfb :=_cg .PdfRectangle {Llx :_bbgda [0],Urx :_bbgda [_bbfdc ],Lly :_acce [0],Ury :_acce [_dfgd ]};if _cebb {_d .Log .Info ("\u0072\u0075l\u0069\u006e\u0067\u004c\u0069\u0073\u0074\u002e\u0061\u0073\u0054\u0069\u006c\u0069\u006e\u0067\u003a\u0020\u0076\u0065\u0072\u0074s=\u0025\u0064",len (_dfca ));
for _dbdce ,_fcebb :=range _dfca {_dcf .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0073\u000a",_dbdce ,_fcebb );};_d .Log .Info ("\u0072\u0075l\u0069\u006e\u0067\u004c\u0069\u0073\u0074\u002e\u0061\u0073\u0054\u0069\u006c\u0069\u006e\u0067\u003a\u0020\u0068\u006f\u0072\u007as=\u0025\u0064",len (_aeeeg ));
for _aagc ,_caaa :=range _aeeeg {_dcf .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0073\u000a",_aagc ,_caaa );};_d .Log .Info ("\u0072\u0075\u006c\u0069\u006eg\u004c\u0069\u0073\u0074\u002e\u0061\u0073\u0054\u0069\u006c\u0069\u006e\u0067:\u0020\u0020\u0077\u0078\u0068\u003d\u0025\u0064\u0078\u0025\u0064\u000a\u0009\u006c\u006c\u0078\u003d\u0025\u002e\u0032\u0066\u000a\u0009\u006c\u006c\u0079\u003d\u0025\u002e\u0032f",_bbfdc ,_dfgd ,_bbgda ,_acce );
};_ffcf :=make ([]gridTile ,_bbfdc *_dfgd );for _gcda :=_dfgd -1;_gcda >=0;_gcda --{_eafe :=_acce [_gcda ];_faadc :=_acce [_gcda +1];for _geead :=0;_geead < _bbfdc ;_geead ++{_bgcbf :=_bbgda [_geead ];_acgab :=_bbgda [_geead +1];_cefeg :=_dfca .findPrimSec (_bgcbf ,_eafe );
_faff :=_dfca .findPrimSec (_acgab ,_eafe );_ggcc :=_aeeeg .findPrimSec (_eafe ,_bgcbf );_fcbg :=_aeeeg .findPrimSec (_faadc ,_bgcbf );_dgcgf :=_cg .PdfRectangle {Llx :_bgcbf ,Urx :_acgab ,Lly :_eafe ,Ury :_faadc };_adad :=_bfdg (_dgcgf ,_cefeg ,_faff ,_ggcc ,_fcbg );
_ffcf [_gcda *_bbfdc +_geead ]=_adad ;if _cebb {_dcf .Printf ("\u0020\u0020\u0078\u003d\u0025\u0032\u0064\u0020\u0079\u003d\u0025\u0032\u0064\u003a\u0020%\u0073 \u0025\u0036\u002e\u0032\u0066\u0020\u0078\u0020\u0025\u0036\u002e\u0032\u0066\u000a",_geead ,_gcda ,_adad .String (),_adad .Width (),_adad .Height ());
};};};if _cebb {_d .Log .Info ("r\u0075\u006c\u0069\u006e\u0067\u004c\u0069\u0073\u0074.\u0061\u0073\u0054\u0069\u006c\u0069\u006eg:\u0020\u0063\u006f\u0061l\u0065\u0073\u0063\u0065\u0020\u0068\u006f\u0072\u0069zo\u006e\u0074a\u006c\u002e\u0020\u0025\u0036\u002e\u0032\u0066",_eedfb );
};_ffgdf :=make ([]map[float64 ]gridTile ,_dfgd );for _debg :=_dfgd -1;_debg >=0;_debg --{if _cebb {_dcf .Printf ("\u0020\u0020\u0079\u003d\u0025\u0032\u0064\u000a",_debg );};_ffgdf [_debg ]=make (map[float64 ]gridTile ,_bbfdc );for _ggcf :=0;_ggcf < _bbfdc ;
_ggcf ++{_agfc :=_ffcf [_debg *_bbfdc +_ggcf ];if _cebb {_dcf .Printf ("\u0020\u0020\u0025\u0034\u0064\u003a\u0020\u0025\u0073\u000a",_ggcf ,_agfc );};if !_agfc ._agege {continue ;};_dbfg :=_ggcf ;for _bbfge :=_ggcf +1;!_agfc ._gfaaa &&_bbfge < _bbfdc ;
_bbfge ++{_aabfb :=_ffcf [_debg *_bbfdc +_bbfge ];_agfc .Urx =_aabfb .Urx ;_agfc ._ffff =_agfc ._ffff ||_aabfb ._ffff ;_agfc ._bebc =_agfc ._bebc ||_aabfb ._bebc ;_agfc ._gfaaa =_aabfb ._gfaaa ;if _cebb {_dcf .Printf ("\u0020 \u0020%\u0034\u0064\u003a\u0020\u0025s\u0020\u2192 \u0025\u0073\u000a",_bbfge ,_aabfb ,_agfc );
};_dbfg =_bbfge ;};if _cebb {_dcf .Printf (" \u0020 \u0025\u0032\u0064\u0020\u002d\u0020\u0025\u0032d\u0020\u2192\u0020\u0025s\n",_ggcf ,_dbfg ,_agfc );};_ggcf =_dbfg ;_ffgdf [_debg ][_agfc .Llx ]=_agfc ;};};_eegg :=make (map[float64 ]map[float64 ]gridTile ,_dfgd );
_eaaa :=make (map[float64 ]map[float64 ]struct{},_dfgd );for _accc :=_dfgd -1;_accc >=0;_accc --{_ebgc :=_ffcf [_accc *_bbfdc ].Lly ;_eegg [_ebgc ]=make (map[float64 ]gridTile ,_bbfdc );_eaaa [_ebgc ]=make (map[float64 ]struct{},_bbfdc );};if _cebb {_d .Log .Info ("\u0072u\u006c\u0069n\u0067\u004c\u0069s\u0074\u002e\u0061\u0073\u0054\u0069\u006ci\u006e\u0067\u003a\u0020\u0063\u006fa\u006c\u0065\u0073\u0063\u0065\u0020\u0076\u0065\u0072\u0074\u0069c\u0061\u006c\u002e\u0020\u0025\u0036\u002e\u0032\u0066",_eedfb );
};for _bfee :=_dfgd -1;_bfee >=0;_bfee --{_gefc :=_ffcf [_bfee *_bbfdc ].Lly ;_cdaab :=_ffgdf [_bfee ];if _cebb {_dcf .Printf ("\u0020\u0020\u0079\u003d\u0025\u0032\u0064\u000a",_bfee );};for _ ,_dgea :=range _cbggc (_cdaab ){if _ ,_cfdf :=_eaaa [_gefc ][_dgea ];
_cfdf {continue ;};_adbf :=_cdaab [_dgea ];if _cebb {_dcf .Printf (" \u0020\u0020\u0020\u0020\u0076\u0030\u003d\u0025\u0073\u000a",_adbf .String ());};for _fggfe :=_bfee -1;_fggfe >=0;_fggfe --{if _adbf ._bebc {break ;};_defae :=_ffgdf [_fggfe ];_fgggc ,_eacg :=_defae [_dgea ];
if !_eacg {break ;};if _fgggc .Urx !=_adbf .Urx {break ;};_adbf ._bebc =_fgggc ._bebc ;_adbf .Lly =_fgggc .Lly ;if _cebb {_dcf .Printf ("\u0020\u0020\u0020\u0020  \u0020\u0020\u0076\u003d\u0025\u0073\u0020\u0076\u0030\u003d\u0025\u0073\u000a",_fgggc .String (),_adbf .String ());
};_eaaa [_fgggc .Lly ][_fgggc .Llx ]=struct{}{};};if _bfee ==0{_adbf ._bebc =true ;};if _adbf .complete (){_eegg [_gefc ][_dgea ]=_adbf ;};};};_bgdad :=gridTiling {PdfRectangle :_eedfb ,_dfcg :_ffcce (_eegg ),_dgfd :_fbgde (_eegg ),_dgced :_eegg };_bgdad .log ("\u0043r\u0065\u0061\u0074\u0065\u0064");
return _bgdad ;};func (_gfbadd intSet )has (_fgdaf int )bool {_ ,_dbggca :=_gfbadd [_fgdaf ];return _dbggca };func (_fdbg paraList )toTextMarks ()[]TextMark {_cdccd :=0;var _cfad []TextMark ;for _afbbf ,_cfda :=range _fdbg {if _cfda ._gbdg {continue ;};
_dfba :=_cfda .toTextMarks (&_cdccd );_cfad =append (_cfad ,_dfba ...);if _afbbf !=len (_fdbg )-1{if _dafgb (_cfda ,_fdbg [_afbbf +1]){_cfad =_gacbc (_cfad ,&_cdccd ,"\u0020");}else {_cfad =_gacbc (_cfad ,&_cdccd ,"\u000a");_cfad =_gacbc (_cfad ,&_cdccd ,"\u000a");
};};};_cfad =_gacbc (_cfad ,&_cdccd ,"\u000a");_cfad =_gacbc (_cfad ,&_cdccd ,"\u000a");return _cfad ;};func (_egeaa *wordBag )removeDuplicates (){if _decfe {_d .Log .Info ("r\u0065m\u006f\u0076\u0065\u0044\u0075\u0070\u006c\u0069c\u0061\u0074\u0065\u0073: \u0025\u0071",_egeaa .text ());
};for _ ,_gcdbf :=range _egeaa .depthIndexes (){if len (_egeaa ._aade [_gcdbf ])==0{continue ;};_agfa :=_egeaa ._aade [_gcdbf ][0];_bdbbf :=_acda *_agfa ._egca ;_bggee :=_agfa ._acgec ;for _ ,_eegaa :=range _egeaa .depthBand (_bggee ,_bggee +_bdbbf ){_dfbcb :=map[*textWord ]struct{}{};
_fadc :=_egeaa ._aade [_eegaa ];for _ ,_ffab :=range _fadc {if _ ,_cdbd :=_dfbcb [_ffab ];_cdbd {continue ;};for _ ,_bcbc :=range _fadc {if _ ,_afdf :=_dfbcb [_bcbc ];_afdf {continue ;};if _bcbc !=_ffab &&_bcbc ._afaded ==_ffab ._afaded &&_b .Abs (_bcbc .Llx -_ffab .Llx )< _bdbbf &&_b .Abs (_bcbc .Urx -_ffab .Urx )< _bdbbf &&_b .Abs (_bcbc .Lly -_ffab .Lly )< _bdbbf &&_b .Abs (_bcbc .Ury -_ffab .Ury )< _bdbbf {_dfbcb [_bcbc ]=struct{}{};
};};};if len (_dfbcb )> 0{_bbgd :=0;for _ ,_ffdfe :=range _fadc {if _ ,_bdfg :=_dfbcb [_ffdfe ];!_bdfg {_fadc [_bbgd ]=_ffdfe ;_bbgd ++;};};_egeaa ._aade [_eegaa ]=_fadc [:len (_fadc )-len (_dfbcb )];if len (_egeaa ._aade [_eegaa ])==0{delete (_egeaa ._aade ,_eegaa );
};};};};};func _gbada (_abbd ,_bagb bounded )float64 {return _abbd .bbox ().Llx -_bagb .bbox ().Urx };func (_ggcbc *wordBag )highestWord (_ebbc int ,_ccgf ,_geaf float64 )*textWord {for _ ,_cagb :=range _ggcbc ._aade [_ebbc ]{if _ccgf <=_cagb ._acgec &&_cagb ._acgec <=_geaf {return _cagb ;
};};return nil ;};func (_afed *textObject )moveLP (_gdd ,_aac float64 ){_afed ._ddcd .Concat (_ccd .NewMatrix (1,0,0,1,_gdd ,_aac ));_afed ._gcde =_afed ._ddcd ;};func _ccec (_edgbd *_ef .ContentStreamOperation )(float64 ,error ){if len (_edgbd .Params )!=1{_bdcd :=_eg .New ("\u0069n\u0063\u006f\u0072\u0072e\u0063\u0074\u0020\u0070\u0061r\u0061m\u0065t\u0065\u0072\u0020\u0063\u006f\u0075\u006et");
_d .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0025\u0023\u0071\u0020\u0073\u0068\u006f\u0075\u006c\u0064\u0020h\u0061\u0076\u0065\u0020\u0025\u0064\u0020i\u006e\u0070\u0075\u0074\u0020\u0070\u0061\u0072\u0061\u006d\u0073,\u0020\u0067\u006f\u0074\u0020\u0025\u0064\u0020\u0025\u002b\u0076",_edgbd .Operand ,1,len (_edgbd .Params ),_edgbd .Params );
return 0.0,_bdcd ;};return _de .GetNumberAsFloat (_edgbd .Params [0]);};type rulingList []*ruling ;func (_dfcd *shapesState )cubicTo (_gdcb ,_ebag ,_afdg ,_dccf ,_aebf ,_caed float64 ){if _baffc {_d .Log .Info ("\u0063\u0075\u0062\u0069\u0063\u0054\u006f\u003a");
};_dfcd .addPoint (_aebf ,_caed );};

// String returns a description of `tm`.
func (_dbadc *textMark )String ()string {return _dcf .Sprintf ("\u0025\u002e\u0032f \u0066\u006f\u006e\u0074\u0073\u0069\u007a\u0065\u003d\u0025\u002e\u0032\u0066\u0020\u0022\u0025\u0073\u0022",_dbadc .PdfRectangle ,_dbadc ._gcee ,_dbadc ._cffag );};type imageExtractContext struct{_daf []ImageMark ;
_cdb int ;_fgff int ;_bef int ;_cea map[*_de .PdfObjectStream ]*cachedImage ;_fadf *ImageExtractOptions ;_cfc bool ;};func (_cbgb *textObject )setTextMatrix (_ffcb []float64 ){if len (_ffcb )!=6{_d .Log .Debug ("\u0045\u0052\u0052OR\u003a\u0020\u006c\u0065\u006e\u0028\u0066\u0029\u0020\u0021\u003d\u0020\u0036\u0020\u0028\u0025\u0064\u0029",len (_ffcb ));
return ;};_gdc ,_bdgc ,_cffd ,_dgfcg ,_fgc ,_abg :=_ffcb [0],_ffcb [1],_ffcb [2],_ffcb [3],_ffcb [4],_ffcb [5];_cbgb ._gcde =_ccd .NewMatrix (_gdc ,_bdgc ,_cffd ,_dgfcg ,_fgc ,_abg );_cbgb ._ddcd =_cbgb ._gcde ;};func (_aada *textTable )log (_afbbfa string ){if !_fdea {return ;
};_d .Log .Info ("~\u007e\u007e\u0020\u0025\u0073\u003a \u0025\u0064\u0020\u0078\u0020\u0025d\u0020\u0067\u0072\u0069\u0064\u003d\u0025t\u000a\u0020\u0020\u0020\u0020\u0020\u0020\u0025\u0036\u002e2\u0066",_afbbfa ,_aada ._ffcde ,_aada ._agefc ,_aada ._eeff ,_aada .PdfRectangle );
for _ggdbg :=0;_ggdbg < _aada ._agefc ;_ggdbg ++{for _ddafd :=0;_ddafd < _aada ._ffcde ;_ddafd ++{_edaga :=_aada .get (_ddafd ,_ggdbg );if _edaga ==nil {continue ;};_dcf .Printf ("%\u0034\u0064\u0020\u00252d\u003a \u0025\u0036\u002e\u0032\u0066 \u0025\u0071\u0020\u0025\u0064\u000a",_ddafd ,_ggdbg ,_edaga .PdfRectangle ,_fgbfd (_edaga .text (),50),_cf .RuneCountInString (_edaga .text ()));
};};};func (_cegb *shapesState )drawRectangle (_abba ,_eagg ,_aec ,_bfdc float64 ){if _baffc {_abcaf :=_cegb .devicePoint (_abba ,_eagg );_deag :=_cegb .devicePoint (_abba +_aec ,_eagg +_bfdc );_fgeab :=_cg .PdfRectangle {Llx :_abcaf .X ,Lly :_abcaf .Y ,Urx :_deag .X ,Ury :_deag .Y };
_d .Log .Info ("d\u0072a\u0077\u0052\u0065\u0063\u0074\u0061\u006e\u0067l\u0065\u003a\u0020\u00256.\u0032\u0066",_fgeab );};_cegb .newSubPath ();_cegb .moveTo (_abba ,_eagg );_cegb .lineTo (_abba +_aec ,_eagg );_cegb .lineTo (_abba +_aec ,_eagg +_bfdc );
_cegb .lineTo (_abba ,_eagg +_bfdc );_cegb .closePath ();};func (_bafc *textPara )getListLines ()[]*textLine {var _efff []*textLine ;_fccea :=_dbag (_bafc ._gccbb );for _ ,_bagbb :=range _bafc ._gccbb {_ccce :=_bagbb ._fddcd [0]._afaded [0];if _cfea (_ccce ){_efff =append (_efff ,_bagbb );
};};_efff =append (_efff ,_fccea ...);return _efff ;};func _fabf (_dfcc []_de .PdfObject )(_deeccb ,_aacca float64 ,_fecf error ){if len (_dfcc )!=2{return 0,0,_dcf .Errorf ("\u0069\u006e\u0076\u0061l\u0069\u0064\u0020\u006e\u0075\u006d\u0062\u0065\u0072\u0020o\u0066 \u0070\u0061\u0072\u0061\u006d\u0073\u003a \u0025\u0064",len (_dfcc ));
};_aegg ,_fecf :=_de .GetNumbersAsFloat (_dfcc );if _fecf !=nil {return 0,0,_fecf ;};return _aegg [0],_aegg [1],nil ;};func _bbg (_dfed ,_effd _cg .PdfRectangle )_cg .PdfRectangle {return _cg .PdfRectangle {Llx :_b .Min (_dfed .Llx ,_effd .Llx ),Lly :_b .Min (_dfed .Lly ,_effd .Lly ),Urx :_b .Max (_dfed .Urx ,_effd .Urx ),Ury :_b .Max (_dfed .Ury ,_effd .Ury )};
};func (_bgdf lineRuling )yMean ()float64 {return 0.5*(_bgdf ._gafbd .Y +_bgdf ._ebgd .Y )};func (_acbf rulingList )splitSec ()[]rulingList {_cc .Slice (_acbf ,func (_gfgc ,_aacd int )bool {_gdgd ,_baeab :=_acbf [_gfgc ],_acbf [_aacd ];if _gdgd ._ffebg !=_baeab ._ffebg {return _gdgd ._ffebg < _baeab ._ffebg ;
};return _gdgd ._ceba < _baeab ._ceba ;});_bgaga :=make (map[*ruling ]struct{},len (_acbf ));_bdbe :=func (_bgac *ruling )rulingList {_geecf :=rulingList {_bgac };_bgaga [_bgac ]=struct{}{};for _ ,_dcefc :=range _acbf {if _ ,_aagac :=_bgaga [_dcefc ];_aagac {continue ;
};for _ ,_bgefc :=range _geecf {if _dcefc .alignsSec (_bgefc ){_geecf =append (_geecf ,_dcefc );_bgaga [_dcefc ]=struct{}{};break ;};};};return _geecf ;};_agab :=[]rulingList {_bdbe (_acbf [0])};for _ ,_gggfg :=range _acbf [1:]{if _ ,_dbba :=_bgaga [_gggfg ];
_dbba {continue ;};_agab =append (_agab ,_bdbe (_gggfg ));};return _agab ;};type textMark struct{_cg .PdfRectangle ;_bead int ;_cffag string ;_cfag string ;_cceg *_cg .PdfFont ;_gcee float64 ;_effge float64 ;_defga _ccd .Matrix ;_egag _ccd .Point ;_bacg _cg .PdfRectangle ;
_gbbgd _dc .Color ;_ccga _dc .Color ;_ggggae _de .PdfObject ;_ede []string ;Tw float64 ;Th float64 ;_debd int ;_febf int ;};func _eggf (_gcdg []*textLine ,_aaag ,_ebcg float64 )[]*textLine {var _bcae []*textLine ;for _ ,_gcaf :=range _gcdg {if _aaag ==-1{if _gcaf ._abfa > _ebcg {_bcae =append (_bcae ,_gcaf );
};}else {if _gcaf ._abfa > _ebcg &&_gcaf ._abfa < _aaag {_bcae =append (_bcae ,_gcaf );};};};return _bcae ;};

// ExtractPageImages returns the image contents of the page extractor, including data
// and position, size information for each image.
// A set of options to control page image extraction can be passed in. The options
// parameter can be nil for the default options. By default, inline stencil masks
// are not extracted.
func (_edf *Extractor )ExtractPageImages (options *ImageExtractOptions )(*PageImages ,error ){_fea :=&imageExtractContext {_fadf :options };_ged :=_fea .extractContentStreamImages (_edf ._bce ,_edf ._cga );if _ged !=nil {return nil ,_ged ;};return &PageImages {Images :_fea ._daf },nil ;
};func (_dbggc *shapesState )establishSubpath ()*subpath {_cccg ,_efag :=_dbggc .lastpointEstablished ();if !_efag {_dbggc ._bfbe =append (_dbggc ._bfbe ,_fggc (_cccg ));};if len (_dbggc ._bfbe )==0{return nil ;};_dbggc ._ebbb =false ;return _dbggc ._bfbe [len (_dbggc ._bfbe )-1];
};func _fdgb (_bbcg ,_eefbf bounded )float64 {return _bbcg .bbox ().Llx -_eefbf .bbox ().Llx };func _fggc (_cfeb _ccd .Point )*subpath {return &subpath {_bbff :[]_ccd .Point {_cfeb }}};func _fdedf (_ccfa *_cg .StructTreeRoot ,_febg map[int ][]*textLine ,_bggd _de .PdfObject )[]*list {if _ccfa ==nil {_d .Log .Debug ("\u0062\u0075\u0069\u006c\u0064\u004c\u0069\u0073\u0074\u003a\u0020t\u0072\u0065\u0065\u0052\u006f\u006f\u0074\u0020\u0069\u0073 \u006e\u0069\u006c");
return nil ;};_adfe :=[]*_cg .KValue {};var _gdga func (_efadb *_cg .KValue );_gdga =func (_fcede *_cg .KValue ){if _ccba :=_fcede .GetKDict ();_ccba !=nil {if _ccba .S .String ()=="\u004c"{_adfe =append (_adfe ,_fcede );}else {for _ ,_bdcc :=range _ccba .GetChildren (){_gdga (_bdcc );
};};};};for _ ,_fage :=range _ccfa .K {_caba :=_cg .NewKValue ();_caba .SetKDict (_fage );_gdga (_caba );};_ffad :=_gagd (_adfe ,_febg ,_bggd );var _fafd []*list ;for _ ,_agaf :=range _ffad {_ccge :=_afbec (_agaf );_fafd =append (_fafd ,_ccge ...);};return _fafd ;
};func (_abgbd *textPara )fontsize ()float64 {return _abgbd ._gccbb [0]._dcad };func (_bfffd *compositeCell )updateBBox (){for _ ,_bddg :=range _bfffd .paraList {_bfffd .PdfRectangle =_bbg (_bfffd .PdfRectangle ,_bddg .PdfRectangle );};};func (_cgec *shapesState )lineTo (_fdfe ,_geea float64 ){if _baffc {_d .Log .Info ("\u006c\u0069\u006eeT\u006f\u0028\u0025\u002e\u0032\u0066\u002c\u0025\u002e\u0032\u0066\u0020\u0070\u003d\u0025\u002e\u0032\u0066",_fdfe ,_geea ,_cgec .devicePoint (_fdfe ,_geea ));
};_cgec .addPoint (_fdfe ,_geea );};func _dfg (_eaeb string ,_fdeg ,_ccdf int ,_gda string )string {if _ccdf > len (_eaeb )-1{return _eaeb [:_fdeg ]+_gda ;};return _eaeb [:_fdeg ]+_gda +_eaeb [_ccdf :];};type lineRuling struct{_cfcfd rulingKind ;_eacfg markKind ;
_dc .Color ;_gafbd ,_ebgd _ccd .Point ;};func _cgcc (_gfge _cg .PdfRectangle )*ruling {return &ruling {_ccffc :_afec ,_ebfg :_gfge .Ury ,_ffebg :_gfge .Llx ,_ceba :_gfge .Urx };};func _cgaf (_acb *TextMarkArray ,_bfbg *string ,_efd *int ,_cfbg string )error {_eafg :=_acb .Elements ()[0].DirectObject ;
_bad ,_eafa :=_de .GetString (_eafg );if !_eafa {return _dcf .Errorf ("\u0075n\u0061\u0062l\u0065\u0020\u0074\u006f \u0067\u0065\u0074 \u0073\u0074\u0072\u0069\u006e\u0067\u0020\u0042\u0079te\u0073\u0020\u0066r\u006f\u006d \u0064\u0069\u0072\u0065\u0063\u0074O\u0062\u006ae\u0063\u0074");
};_cgcfa :=_bgge (_acb );_ccgb ,_eafa :=_de .GetStringBytes (_eafg );if !_eafa {return _de .ErrTypeError ;};_eacd :=_acb .Elements ()[0].Font ;_ccc :=_aggb (_ccgb ,_eacd );_bade :="";_dddc :=*_bfbg ;if len (_dddc )> *_efd {_bade =_dddc [*_efd :*_efd +len (_cgcfa )];
}else if *_efd ==len (_cfbg )-1&&len (_dddc )> *_efd {_bade =_dddc [*_efd :];};_ccage :="";_faed :=_bc .Split (_ccc ,"\u0020");_bcgf :=_faed [len (_faed )-1];if _bcgf ==_cgcfa &&*_efd ==0{_baeb :=_bc .LastIndex (_ccc ,_cgcfa );_ccage =_dfg (_ccc ,_baeb ,len (_cgcfa )+_baeb ,_bade );
}else if *_efd ==len (_cfbg )-1&&len (_dddc )> *_efd {_ccage =_bc .Replace (_ccc ,_cgcfa ,_dddc [*_efd :],-1);}else {_ccage =_bc .Replace (_ccc ,_cgcfa ,_bade ,1);};_ced (_bad ,_ccage ,_eacd );*_efd +=len (_cgcfa );return nil ;};func _geac (_gbfd _de .PdfObject ,_fbce _dc .Color )(_g .Image ,error ){_fedg ,_edcb :=_de .GetStream (_gbfd );
if !_edcb {return nil ,nil ;};_egefe ,_gcfaa :=_cg .NewXObjectImageFromStream (_fedg );if _gcfaa !=nil {return nil ,_gcfaa ;};_aacdc ,_gcfaa :=_egefe .ToImage ();if _gcfaa !=nil {return nil ,_gcfaa ;};return _fdff (_aacdc ,_fbce ),nil ;};func _gagd (_cgeed []*_cg .KValue ,_bcde map[int ][]*textLine ,_ffea _de .PdfObject )[]*list {_bdfcb :=[]*list {};
for _ ,_cedg :=range _cgeed {_bcgb :=_cedg .GetKDict ();_efec :=_bcgb .GetChildren ();_cfce :=[]*textLine {};_gffc :=[]*list {};_ffed :=_bcgb .S .(*_de .PdfObjectName ).String ();_cddd :=_efec [0];_gfefe :=_cddd .GetMCID ();if len (_efec )==1&&_gfefe !=nil &&*_gfefe !=-1{if _bcgb .Pg ==_ffea {_cfce =_bcde [*_gfefe ];
};}else {_gffc =_gagd (_efec ,_bcde ,_ffea );};_fdaf :=_bdee (_cfce ,_ffed ,_gffc );_bdfcb =append (_bdfcb ,_fdaf );};return _bdfcb ;};func _gbedf (_efgc []*textLine )map[float64 ][]*textLine {_cc .Slice (_efgc ,func (_bcaa ,_deefe int )bool {return _efgc [_bcaa ]._abfa < _efgc [_deefe ]._abfa });
_gdba :=map[float64 ][]*textLine {};for _ ,_babc :=range _efgc {_dbac :=_fefgc (_babc );_dbac =_b .Round (_dbac );_gdba [_dbac ]=append (_gdba [_dbac ],_babc );};return _gdba ;};func (_fdfg rulingList )vertsHorzs ()(rulingList ,rulingList ){var _ddfa ,_fcdeg rulingList ;
for _ ,_dfdgd :=range _fdfg {switch _dfdgd ._ccffc {case _dgcg :_ddfa =append (_ddfa ,_dfdgd );case _afec :_fcdeg =append (_fcdeg ,_dfdgd );};};return _ddfa ,_fcdeg ;};type textObject struct{_bbcc *Extractor ;_fbc *_cg .PdfPageResources ;_gacb _ef .GraphicsState ;
_dbcc *textState ;_bgf *stateStack ;_gcde _ccd .Matrix ;_ddcd _ccd .Matrix ;_gebc []*textMark ;_edaf bool ;};func (_faad rectRuling )checkWidth (_ddaf ,_dgaa float64 )(float64 ,bool ){_gbdb :=_dgaa -_ddaf ;_bbbgd :=_gbdb <=_dddf ;return _gbdb ,_bbbgd ;
};func _aegb (_eeeb _cg .PdfRectangle )*ruling {return &ruling {_ccffc :_dgcg ,_ebfg :_eeeb .Llx ,_ffebg :_eeeb .Lly ,_ceba :_eeeb .Ury };};func (_badg lineRuling )asRuling ()(*ruling ,bool ){_eebdg :=ruling {_ccffc :_badg ._cfcfd ,Color :_badg .Color ,_cagbg :_bgfbc };
switch _badg ._cfcfd {case _dgcg :_eebdg ._ebfg =_badg .xMean ();_eebdg ._ffebg =_b .Min (_badg ._gafbd .Y ,_badg ._ebgd .Y );_eebdg ._ceba =_b .Max (_badg ._gafbd .Y ,_badg ._ebgd .Y );case _afec :_eebdg ._ebfg =_badg .yMean ();_eebdg ._ffebg =_b .Min (_badg ._gafbd .X ,_badg ._ebgd .X );
_eebdg ._ceba =_b .Max (_badg ._gafbd .X ,_badg ._ebgd .X );default:_d .Log .Error ("\u0062\u0061\u0064\u0020pr\u0069\u006d\u0061\u0072\u0079\u0020\u006b\u0069\u006e\u0064\u003d\u0025\u0064",_badg ._cfcfd );return nil ,false ;};return &_eebdg ,true ;};
type rulingKind int ;func (_dbce rulingList )snapToGroups ()rulingList {_bgcg ,_eegbb :=_dbce .vertsHorzs ();if len (_bgcg )> 0{_bgcg =_bgcg .snapToGroupsDirection ();};if len (_eegbb )> 0{_eegbb =_eegbb .snapToGroupsDirection ();};_acdd :=append (_bgcg ,_eegbb ...);
_acdd .log ("\u0073\u006e\u0061p\u0054\u006f\u0047\u0072\u006f\u0075\u0070\u0073");return _acdd ;};const _egb =10;func (_bdge *imageExtractContext )extractFormImages (_decg *_de .PdfObjectName ,_gbdc _ef .GraphicsState ,_caa *_cg .PdfPageResources )error {_aeea ,_eec :=_caa .GetXObjectFormByName (*_decg );
if _eec !=nil {return _eec ;};if _aeea ==nil {return nil ;};_aaf ,_eec :=_aeea .GetContentStream ();if _eec !=nil {return _eec ;};_geba :=_aeea .Resources ;if _geba ==nil {_geba =_caa ;};_eec =_bdge .extractContentStreamImages (string (_aaf ),_geba );if _eec !=nil {return _eec ;
};_bdge ._bef ++;return nil ;};func (_gcga *textWord )appendMark (_dadaa *textMark ,_eeacd _cg .PdfRectangle ){_gcga ._dacf =append (_gcga ._dacf ,_dadaa );_gcga .PdfRectangle =_bbg (_gcga .PdfRectangle ,_dadaa .PdfRectangle );if _dadaa ._gcee > _gcga ._egca {_gcga ._egca =_dadaa ._gcee ;
};_gcga ._acgec =_eeacd .Ury -_gcga .PdfRectangle .Lly ;};func _cbggc (_gged map[float64 ]gridTile )[]float64 {_gdfee :=make ([]float64 ,0,len (_gged ));for _aece :=range _gged {_gdfee =append (_gdfee ,_aece );};_cc .Float64s (_gdfee );return _gdfee ;};
func _facc (_be []string ,_fe int ,_dbc int ,_ec string ){for _ggc :=_fe ;_ggc < _dbc ;_ggc ++{_be [_ggc ]=_ec ;};};func _ebaaa (_gaeaa []*textLine ,_cbgbe map[float64 ][]*textLine )[]*list {_cegbg :=_gcgfac (_cbgbe );_gbedg :=[]*list {};if len (_cegbg )==0{return _gbedg ;
};_fddg :=_cegbg [0];_bffg :=1;_fdec :=_cbgbe [_fddg ];for _egea ,_gaeb :=range _fdec {var _cfgd float64 ;_caf :=[]*list {};_gdfe :=_gaeb ._abfa ;_egbc :=-1.0;if _egea < len (_fdec )-1{_egbc =_fdec [_egea +1]._abfa ;};if _bffg < len (_cegbg ){_caf =_ddga (_gaeaa ,_cbgbe ,_cegbg ,_bffg ,_gdfe ,_egbc );
};_cfgd =_egbc ;if len (_caf )> 0{_eadf :=_caf [0];if len (_eadf ._fbcb )> 0{_cfgd =_eadf ._fbcb [0]._abfa ;};};_ffgdd :=[]*textLine {_gaeb };_aeag :=_bfec (_gaeb ,_gaeaa ,_gdfe ,_cfgd );_ffgdd =append (_ffgdd ,_aeag ...);_dbbb :=_bdee (_ffgdd ,"\u0062\u0075\u006c\u006c\u0065\u0074",_caf );
_dbbb ._ggdc =_defb (_ffgdd ,"");_gbedg =append (_gbedg ,_dbbb );};return _gbedg ;};func _deadd (_abfc ,_aegdc _ccd .Point )rulingKind {_bbed :=_b .Abs (_abfc .X -_aegdc .X );_fadgf :=_b .Abs (_abfc .Y -_aegdc .Y );return _gbgd (_bbed ,_fadgf ,_gaead );
};func (_efda *textPara )writeCellText (_egbd _ee .Writer ){for _gcacd ,_ccgbe :=range _efda ._gccbb {_ebff :=_ccgbe .text ();_gcfe :=_gggc &&_ccgbe .endsInHyphen ()&&_gcacd !=len (_efda ._gccbb )-1;if _gcfe {_ebff =_ggde (_ebff );};_egbd .Write ([]byte (_ebff ));
if !(_gcfe ||_gcacd ==len (_efda ._gccbb )-1){_egbd .Write ([]byte (_ebce (_ccgbe ._abfa ,_efda ._gccbb [_gcacd +1]._abfa )));};};};func (_deadc *textPara )writeText (_ecad _ee .Writer ){if _deadc ._bbbg ==nil {_deadc .writeCellText (_ecad );return ;};
for _adda :=0;_adda < _deadc ._bbbg ._agefc ;_adda ++{for _cgfd :=0;_cgfd < _deadc ._bbbg ._ffcde ;_cgfd ++{_ddbg :=_deadc ._bbbg .get (_cgfd ,_adda );if _ddbg ==nil {_ecad .Write ([]byte ("\u0009"));}else {_fegae (_ddbg ._gccbb );_ddbg .writeCellText (_ecad );
};_ecad .Write ([]byte ("\u0020"));};if _adda < _deadc ._bbbg ._agefc -1{_ecad .Write ([]byte ("\u000a"));};};};func _fbgde (_ffag map[float64 ]map[float64 ]gridTile )[]float64 {_bcbfa :=make ([]float64 ,0,len (_ffag ));for _gceeg :=range _ffag {_bcbfa =append (_bcbfa ,_gceeg );
};_cc .Float64s (_bcbfa );_acegb :=len (_bcbfa );for _edafb :=0;_edafb < _acegb /2;_edafb ++{_bcbfa [_edafb ],_bcbfa [_acegb -1-_edafb ]=_bcbfa [_acegb -1-_edafb ],_bcbfa [_edafb ];};return _bcbfa ;};func _adgf (_aaec []*textMark ,_edbc _cg .PdfRectangle )string {_d .Log .Trace ("\u006d\u0061\u006b\u0065\u0053i\u006d\u0070\u006c\u0065\u0054\u0065\u0078\u0074\u003a\u0020\u0025\u0064\u0020e\u006c\u0065\u006d\u0065\u006e\u0074\u0073\u0020\u0070\u0061\u0067\u0065\u0053\u0069\u007a\u0065\u003d\u0025\u002e\u0032\u0066",len (_aaec ),_edbc );
_edeg :="";if len (_aaec )==0{return _edeg ;};_caeef :=_gegf (_aaec ,_edbc ,true );if len (_caeef )==0{return _edeg ;};_fffgc :=0.0;_dccg :=true ;_bffcd :="";for _ ,_bcafg :=range _caeef {_bdcbd :=_bcafg ._egca ;if _bdcbd > _bff {_bdcbd =_bff ;};if (_bcafg ._acgec -_fffgc > _bacbc *_bdcbd &&_fffgc !=0.0)||(_fffgc -_bcafg ._acgec > _bdcbd *10){_edca :=_ae ([]rune (_bffcd ));
_bffcd =_edca ._fg ;_bffcd +="\u000a";_edeg +=_bffcd ;_bffcd ="";}else {if !_dccg {_bffcd +="\u0020";};};_bffcd +=_bcafg ._afaded ;_dccg =false ;_fffgc =_bcafg ._acgec ;};if _bffcd !=""{_dgab :=_ae ([]rune (_bffcd ));_bffcd =_dgab ._fg ;_bffcd +="\u000a";
_edeg +=_bffcd ;};return _edeg ;};func _cccee (_ggccc float64 )bool {return _b .Abs (_ggccc )< _fdcc };func _bdcba (_bdadd []*textWord ,_daege int )[]*textWord {_agec :=len (_bdadd );copy (_bdadd [_daege :],_bdadd [_daege +1:]);return _bdadd [:_agec -1];
};func (_bcce rulingList )sortStrict (){_cc .Slice (_bcce ,func (_dgbc ,_dgee int )bool {_dcdf ,_cgac :=_bcce [_dgbc ],_bcce [_dgee ];_ccef ,_adfca :=_dcdf ._ccffc ,_cgac ._ccffc ;if _ccef !=_adfca {return _ccef > _adfca ;};_bdeea ,_edada :=_dcdf ._ebfg ,_cgac ._ebfg ;
if !_cccee (_bdeea -_edada ){return _bdeea < _edada ;};_bdeea ,_edada =_dcdf ._ffebg ,_cgac ._ffebg ;if _bdeea !=_edada {return _bdeea < _edada ;};return _dcdf ._ceba < _cgac ._ceba ;});};func (_egac *imageExtractContext )processOperand (_bbb *_ef .ContentStreamOperation ,_eee _ef .GraphicsState ,_ebb *_cg .PdfPageResources )error {if _bbb .Operand =="\u0042\u0049"&&len (_bbb .Params )==1{_bbf ,_dda :=_bbb .Params [0].(*_ef .ContentStreamInlineImage );
if !_dda {return nil ;};if _ade ,_edg :=_de .GetBoolVal (_bbf .ImageMask );_edg {if _ade &&!_egac ._fadf .IncludeInlineStencilMasks {return nil ;};};return _egac .extractInlineImage (_bbf ,_eee ,_ebb );}else if _bbb .Operand =="\u0044\u006f"&&len (_bbb .Params )==1{_bda ,_aeb :=_de .GetName (_bbb .Params [0]);
if !_aeb {_d .Log .Debug ("E\u0052\u0052\u004f\u0052\u003a\u0020\u0054\u0079\u0070\u0065");return _eeb ;};_ ,_bdg :=_ebb .GetXObjectByName (*_bda );switch _bdg {case _cg .XObjectTypeImage :return _egac .extractXObjectImage (_bda ,_eee ,_ebb );case _cg .XObjectTypeForm :return _egac .extractFormImages (_bda ,_eee ,_ebb );
};}else if _egac ._cfc &&(_bbb .Operand =="\u0073\u0063\u006e"||_bbb .Operand =="\u0053\u0043\u004e")&&len (_bbb .Params )==1{_bfg ,_gcf :=_de .GetName (_bbb .Params [0]);if !_gcf {_d .Log .Debug ("E\u0052\u0052\u004f\u0052\u003a\u0020\u0054\u0079\u0070\u0065");
return _eeb ;};_aed ,_gcf :=_ebb .GetPatternByName (*_bfg );if !_gcf {_d .Log .Debug ("\u0045R\u0052\u004f\u0052\u003a\u0020\u0050\u0061\u0074\u0074\u0065\u0072n\u0020\u006e\u006f\u0074\u0020\u0066\u006f\u0075\u006e\u0064");return nil ;};if _aed .IsTiling (){_edgb :=_aed .GetAsTilingPattern ();
_fde ,_ebd :=_edgb .GetContentStream ();if _ebd !=nil {return _ebd ;};_ebd =_egac .extractContentStreamImages (string (_fde ),_edgb .Resources );if _ebd !=nil {return _ebd ;};};}else if (_bbb .Operand =="\u0063\u0073"||_bbb .Operand =="\u0043\u0053")&&len (_bbb .Params )>=1{_egac ._cfc =_bbb .Params [0].String ()=="\u0050a\u0074\u0074\u0065\u0072\u006e";
};return nil ;};func _gca (_gg int )bool {return (_gg &1)==0};var _deg =map[rulingKind ]string {_cbfee :"\u006e\u006f\u006e\u0065",_afec :"\u0068\u006f\u0072\u0069\u007a\u006f\u006e\u0074\u0061\u006c",_dgcg :"\u0076\u0065\u0072\u0074\u0069\u0063\u0061\u006c"};
func (_dcgb pathSection )bbox ()_cg .PdfRectangle {_gab :=_dcgb ._gccb [0]._bbff [0];_dabb :=_cg .PdfRectangle {Llx :_gab .X ,Urx :_gab .X ,Lly :_gab .Y ,Ury :_gab .Y };_deb :=func (_adfa _ccd .Point ){if _adfa .X < _dabb .Llx {_dabb .Llx =_adfa .X ;}else if _adfa .X > _dabb .Urx {_dabb .Urx =_adfa .X ;
};if _adfa .Y < _dabb .Lly {_dabb .Lly =_adfa .Y ;}else if _adfa .Y > _dabb .Ury {_dabb .Ury =_adfa .Y ;};};for _ ,_fbfe :=range _dcgb ._gccb [0]._bbff [1:]{_deb (_fbfe );};for _ ,_adcc :=range _dcgb ._gccb [1:]{for _ ,_dbcf :=range _adcc ._bbff {_deb (_dbcf );
};};return _dabb ;};func _bfec (_bfed *textLine ,_cbdg []*textLine ,_cced ,_adgb float64 )[]*textLine {_fdbfe :=[]*textLine {};for _ ,_bgaf :=range _cbdg {if _bgaf ._abfa >=_cced {if _adgb !=-1&&_bgaf ._abfa < _adgb {if _bgaf .text ()!=_bfed .text (){if _b .Round (_bgaf .Llx )< _b .Round (_bfed .Llx ){break ;
};_fdbfe =append (_fdbfe ,_bgaf );};}else if _adgb ==-1{if _bgaf ._abfa ==_bfed ._abfa {if _bgaf .text ()!=_bfed .text (){_fdbfe =append (_fdbfe ,_bgaf );};continue ;};_cabc :=_egba (_bfed ,_cbdg );if _cabc !=-1&&_bgaf ._abfa <=_cabc {_fdbfe =append (_fdbfe ,_bgaf );
};};};};return _fdbfe ;};func _gcgfac (_gggcd map[float64 ][]*textLine )[]float64 {_bace :=[]float64 {};for _aadfc :=range _gggcd {_bace =append (_bace ,_aadfc );};_cc .Float64s (_bace );return _bace ;};func _fbdee (_ccff ,_ccab _cg .PdfRectangle )bool {return _ccff .Lly <=_ccab .Ury &&_ccab .Lly <=_ccff .Ury ;
};func (_acgag rulingList )isActualGrid ()(rulingList ,bool ){_eagb ,_aceee :=_acgag .augmentGrid ();if !(len (_eagb )>=_afff +1&&len (_aceee )>=_dcfe +1){if _gagf {_d .Log .Info ("\u0069s\u0041\u0063t\u0075\u0061\u006c\u0047r\u0069\u0064\u003a \u004e\u006f\u0074\u0020\u0061\u006c\u0069\u0067\u006eed\u002e\u0020\u0025d\u0020\u0078 \u0025\u0064\u0020\u003c\u0020\u0025d\u0020\u0078 \u0025\u0064",len (_eagb ),len (_aceee ),_afff +1,_dcfe +1);
};return nil ,false ;};if _gagf {_d .Log .Info ("\u0069\u0073\u0041\u0063\u0074\u0075a\u006c\u0047\u0072\u0069\u0064\u003a\u0020\u0025\u0073\u0020\u003a\u0020\u0025t\u0020\u0026\u0020\u0025\u0074\u0020\u2192 \u0025\u0074",_acgag ,len (_eagb )>=2,len (_aceee )>=2,len (_eagb )>=2&&len (_aceee )>=2);
for _gfgd ,_bfecc :=range _acgag {_dcf .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0076\u000a",_gfgd ,_bfecc );};};if _cgge {_cgbe ,_bgdge :=_eagb [0],_eagb [len (_eagb )-1];_agde ,_gfbad :=_aceee [0],_aceee [len (_aceee )-1];if !(_fgbf (_cgbe ._ebfg -_agde ._ffebg )&&_fgbf (_bgdge ._ebfg -_agde ._ceba )&&_fgbf (_agde ._ebfg -_cgbe ._ceba )&&_fgbf (_gfbad ._ebfg -_cgbe ._ffebg )){if _gagf {_d .Log .Info ("\u0069\u0073\u0041\u0063\u0074\u0075\u0061l\u0047\u0072\u0069d\u003a\u0020\u0020N\u006f\u0074 \u0061\u006c\u0069\u0067\u006e\u0065d\u002e\n\t\u0076\u0030\u003d\u0025\u0073\u000a\u0009\u0076\u0031\u003d\u0025\u0073\u000a\u0009\u0068\u0030\u003d\u0025\u0073\u000a\u0009\u0068\u0031\u003d\u0025\u0073",_cgbe ,_bgdge ,_agde ,_gfbad );
};return nil ,false ;};}else {if !_eagb .aligned (){if _dgbgg {_d .Log .Info ("i\u0073\u0041\u0063\u0074\u0075\u0061l\u0047\u0072\u0069\u0064\u003a\u0020N\u006f\u0074\u0020\u0061\u006c\u0069\u0067n\u0065\u0064\u0020\u0076\u0065\u0072\u0074\u0073\u002e\u0020%\u0064",len (_eagb ));
};return nil ,false ;};if !_aceee .aligned (){if _gagf {_d .Log .Info ("i\u0073\u0041\u0063\u0074\u0075\u0061l\u0047\u0072\u0069\u0064\u003a\u0020N\u006f\u0074\u0020\u0061\u006c\u0069\u0067n\u0065\u0064\u0020\u0068\u006f\u0072\u007a\u0073\u002e\u0020%\u0064",len (_aceee ));
};return nil ,false ;};};_effa :=append (_eagb ,_aceee ...);return _effa ,true ;};

// PageText represents the layout of text on a device page.
type PageText struct{_beaf []*textMark ;_gaca string ;_beef []TextMark ;_dagf []TextTable ;_ddda _cg .PdfRectangle ;_fcgf []pathSection ;_cffg []pathSection ;_dgda *_cg .StructTreeRoot ;_dadab _de .PdfObject ;_gedd *_ef .ContentStreamOperations ;_beee PageTextOptions ;
};func (_dedce rulingList )secMinMax ()(float64 ,float64 ){_dcgbf ,_eeba :=_dedce [0]._ffebg ,_dedce [0]._ceba ;for _ ,_bggf :=range _dedce [1:]{if _bggf ._ffebg < _dcgbf {_dcgbf =_bggf ._ffebg ;};if _bggf ._ceba > _eeba {_eeba =_bggf ._ceba ;};};return _dcgbf ,_eeba ;
};func (_abegc rulingList )bbox ()_cg .PdfRectangle {var _ggec _cg .PdfRectangle ;if len (_abegc )==0{_d .Log .Error ("r\u0075\u006c\u0069\u006e\u0067\u004ci\u0073\u0074\u002e\u0062\u0062\u006f\u0078\u003a\u0020n\u006f\u0020\u0072u\u006ci\u006e\u0067\u0073");
return _cg .PdfRectangle {};};if _abegc [0]._ccffc ==_afec {_ggec .Llx ,_ggec .Urx =_abegc .secMinMax ();_ggec .Lly ,_ggec .Ury =_abegc .primMinMax ();}else {_ggec .Llx ,_ggec .Urx =_abegc .primMinMax ();_ggec .Lly ,_ggec .Ury =_abegc .secMinMax ();};return _ggec ;
};func (_affg paraList )applyTables (_fbfd []*textTable )paraList {var _caadd paraList ;for _ ,_bfafc :=range _fbfd {_caadd =append (_caadd ,_bfafc .newTablePara ());};for _ ,_aafg :=range _affg {if _aafg ._eega {continue ;};_caadd =append (_caadd ,_aafg );
};return _caadd ;};

// Tables returns the tables extracted from the page.
func (_beg PageText )Tables ()[]TextTable {if _fdea {_d .Log .Info ("\u0054\u0061\u0062\u006c\u0065\u0073\u003a\u0020\u0025\u0064",len (_beg ._dagf ));};return _beg ._dagf ;};func (_daba *stateStack )empty ()bool {return len (*_daba )==0};func _gbgd (_ecgd ,_fegb ,_ccgd float64 )rulingKind {if _ecgd >=_ccgd &&_cdbc (_fegb ,_ecgd ){return _afec ;
};if _fegb >=_ccgd &&_cdbc (_ecgd ,_fegb ){return _dgcg ;};return _cbfee ;};

// PageTextOptions holds various options available in extraction process.
type PageTextOptions struct{_dgcd bool ;_cbdb bool ;_dcc bool ;};func (_eaedc paraList )findGridTables (_cagedd []gridTiling )[]*textTable {if _fdea {_d .Log .Info ("\u0066i\u006e\u0064\u0047\u0072\u0069\u0064\u0054\u0061\u0062\u006c\u0065s\u003a\u0020\u0025\u0064\u0020\u0070\u0061\u0072\u0061\u0073",len (_eaedc ));
for _eacfcc ,_aabc :=range _eaedc {_dcf .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0073\u000a",_eacfcc ,_aabc );};};var _cceb []*textTable ;for _edec ,_ebgcf :=range _cagedd {_agbe ,_fegcb :=_eaedc .findTableGrid (_ebgcf );if _agbe !=nil {_agbe .log (_dcf .Sprintf ("\u0066\u0069\u006e\u0064Ta\u0062\u006c\u0065\u0057\u0069\u0074\u0068\u0047\u0072\u0069\u0064\u0073\u003a\u0020%\u0064",_edec ));
_cceb =append (_cceb ,_agbe );_agbe .markCells ();};for _eaebb :=range _fegcb {_eaebb ._eega =true ;};};if _fdea {_d .Log .Info ("\u0066i\u006e\u0064\u0047\u0072i\u0064\u0054\u0061\u0062\u006ce\u0073:\u0020%\u0064\u0020\u0074\u0061\u0062\u006c\u0065s",len (_cceb ));
};return _cceb ;};func _bffcf (_gccf []compositeCell )[]float64 {var _ggage []*textLine ;_fdbc :=0;for _ ,_eggd :=range _gccf {_fdbc +=len (_eggd .paraList );_ggage =append (_ggage ,_eggd .lines ()...);};_cc .Slice (_ggage ,func (_abceg ,_eefbfg int )bool {_fbdc ,_ecbg :=_ggage [_abceg ],_ggage [_eefbfg ];
_dgec ,_egeeb :=_fbdc ._abfa ,_ecbg ._abfa ;if !_cccee (_dgec -_egeeb ){return _dgec < _egeeb ;};return _fbdc .Llx < _ecbg .Llx ;});if _fdea {_dcf .Printf ("\u0020\u0020\u0020 r\u006f\u0077\u0042\u006f\u0072\u0064\u0065\u0072\u0073:\u0020%\u0064 \u0070a\u0072\u0061\u0073\u0020\u0025\u0064\u0020\u006c\u0069\u006e\u0065\u0073\u000a",_fdbc ,len (_ggage ));
for _ecdd ,_abfd :=range _ggage {_dcf .Printf ("\u0025\u0038\u0064\u003a\u0020\u0025\u0073\u000a",_ecdd ,_abfd );};};var _caaga []float64 ;_gfecc :=_ggage [0];var _fede [][]*textLine ;_adgcb :=[]*textLine {_gfecc };for _dbdef ,_dbdg :=range _ggage [1:]{if _dbdg .Ury < _gfecc .Lly {_ebddf :=0.5*(_dbdg .Ury +_gfecc .Lly );
if _fdea {_dcf .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0036\u002e\u0032\u0066\u0020\u003c\u0020\u0025\u0036.\u0032f\u0020\u0062\u006f\u0072\u0064\u0065\u0072\u003d\u0025\u0036\u002e\u0032\u0066\u000a"+"\u0009\u0020\u0071\u003d\u0025\u0073\u000a\u0009\u0020p\u003d\u0025\u0073\u000a",_dbdef ,_dbdg .Ury ,_gfecc .Lly ,_ebddf ,_gfecc ,_dbdg );
};_caaga =append (_caaga ,_ebddf );_fede =append (_fede ,_adgcb );_adgcb =nil ;};_adgcb =append (_adgcb ,_dbdg );if _dbdg .Lly < _gfecc .Lly {_gfecc =_dbdg ;};};if len (_adgcb )> 0{_fede =append (_fede ,_adgcb );};if _fdea {_dcf .Printf (" \u0020\u0020\u0020\u0020\u0020\u0020 \u0072\u006f\u0077\u0043\u006f\u0072\u0072\u0069\u0064o\u0072\u0073\u003d%\u0036.\u0032\u0066\u000a",_caaga );
};if _fdea {_d .Log .Info ("\u0072\u006f\u0077\u003d\u0025\u0064",len (_gccf ));for _aaff ,_ggbbd :=range _gccf {_dcf .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0073\u000a",_aaff ,_ggbbd );};_d .Log .Info ("\u0067r\u006f\u0075\u0070\u0073\u003d\u0025d",len (_fede ));
for _acbee ,_efgbef :=range _fede {_dcf .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0064\u000a",_acbee ,len (_efgbef ));for _dafgf ,_debab :=range _efgbef {_dcf .Printf ("\u0025\u0038\u0064\u003a\u0020\u0025\u0073\u000a",_dafgf ,_debab );};};};_aggac :=true ;
for _agge ,_acgeg :=range _fede {_dbcbb :=true ;for _bgaag ,_dbfgc :=range _gccf {if _fdea {_dcf .Printf ("\u0020\u0020\u0020\u007e\u007e\u007e\u0067\u0072\u006f\u0075\u0070\u0020\u0025\u0064\u0020\u006f\u0066\u0020\u0025\u0064\u0020\u0063\u0065\u006cl\u0020\u0025\u0064\u0020\u006ff\u0020\u0025d\u0020\u0025\u0073\u000a",_agge ,len (_fede ),_bgaag ,len (_gccf ),_dbfgc );
};if !_dbfgc .hasLines (_acgeg ){if _fdea {_dcf .Printf ("\u0020\u0020\u0020\u0021\u0021\u0021\u0067\u0072\u006f\u0075\u0070\u0020\u0025d\u0020\u006f\u0066\u0020\u0025\u0064 \u0063\u0065\u006c\u006c\u0020\u0025\u0064\u0020\u006f\u0066\u0020\u0025\u0064 \u004f\u0055\u0054\u000a",_agge ,len (_fede ),_bgaag ,len (_gccf ));
};_dbcbb =false ;break ;};};if !_dbcbb {_aggac =false ;break ;};};if !_aggac {if _fdea {_d .Log .Info ("\u0072\u006f\u0077\u0020\u0063o\u0072\u0072\u0069\u0064\u006f\u0072\u0073\u0020\u0064\u006f\u006e\u0027\u0074 \u0073\u0070\u0061\u006e\u0020\u0061\u006c\u006c\u0020\u0063\u0065\u006c\u006c\u0073\u0020\u0069\u006e\u0020\u0072\u006f\u0077\u002e\u0020\u0069\u0067\u006e\u006f\u0072\u0069\u006eg");
};_caaga =nil ;};if _fdea &&_caaga !=nil {_dcf .Printf ("\u0020\u0020\u0020\u0020\u0020\u0020\u0020\u0020\u002a\u002a*\u0072\u006f\u0077\u0043\u006f\u0072\u0072i\u0064\u006f\u0072\u0073\u003d\u0025\u0036\u002e\u0032\u0066\u000a",_caaga );};return _caaga ;
};func (_cbcge paraList )findTextTables ()[]*textTable {var _ceab []*textTable ;for _ ,_gfggg :=range _cbcge {if _gfggg .taken ()||_gfggg .Width ()==0{continue ;};_dfee :=_gfggg .isAtom ();if _dfee ==nil {continue ;};_dfee .growTable ();if _dfee ._ffcde *_dfee ._agefc < _afcd {continue ;
};_dfee .markCells ();_dfee .log ("\u0067\u0072\u006fw\u006e");_ceab =append (_ceab ,_dfee );};return _ceab ;};func (_fceb *textObject )setWordSpacing (_edcg float64 ){if _fceb ==nil {return ;};_fceb ._dbcc ._cfbgf =_edcg ;};func (_ccb *textObject )setTextRenderMode (_abdbd int ){if _ccb ==nil {return ;
};_ccb ._dbcc ._cgfb =RenderMode (_abdbd );};var _efgg =map[markKind ]string {_bgfbc :"\u0073\u0074\u0072\u006f\u006b\u0065",_cefgc :"\u0066\u0069\u006c\u006c",_bgdab :"\u0061u\u0067\u006d\u0065\u006e\u0074"};func _gcegg (_gfbe []*textMark ,_gcbe _cg .PdfRectangle )*textWord {_deagg :=_gfbe [0].PdfRectangle ;
_dcedg :=_gfbe [0]._gcee ;for _ ,_ddcac :=range _gfbe [1:]{_deagg =_bbg (_deagg ,_ddcac .PdfRectangle );if _ddcac ._gcee > _dcedg {_dcedg =_ddcac ._gcee ;};};return &textWord {PdfRectangle :_deagg ,_dacf :_gfbe ,_acgec :_gcbe .Ury -_deagg .Lly ,_egca :_dcedg };
};

// TextMark represents extracted text on a page with information regarding both textual content,
// formatting (font and size) and positioning.
// It is the smallest unit of text on a PDF page, typically a single character.
//
// getBBox() in test_text.go shows how to compute bounding boxes of substrings of extracted text.
// The following code extracts the text on PDF page `page` into `text` then finds the bounding box
// `bbox` of substring `term` in `text`.
//
//	ex, _ := New(page)
//	// handle errors
//	pageText, _, _, err := ex.ExtractPageText()
//	// handle errors
//	text := pageText.Text()
//	textMarks := pageText.Marks()
//
//		start := strings.Index(text, term)
//	 end := start + len(term)
//	 spanMarks, err := textMarks.RangeOffset(start, end)
//	 // handle errors
//	 bbox, ok := spanMarks.BBox()
//	 // handle errors
type TextMark struct{

// Text is the extracted text.
Text string ;

// Original is the text in the PDF. It has not been decoded like `Text`.
Original string ;

// BBox is the bounding box of the text.
BBox _cg .PdfRectangle ;

// Font is the font the text was drawn with.
Font *_cg .PdfFont ;

// FontSize is the font size the text was drawn with.
FontSize float64 ;

// Offset is the offset of the start of TextMark.Text in the extracted text. If you do this
//   text, textMarks := pageText.Text(), pageText.Marks()
//   marks := textMarks.Elements()
// then marks[i].Offset is the offset of marks[i].Text in text.
Offset int ;

// Meta is set true for spaces and line breaks that we insert in the extracted text. We insert
// spaces (line breaks) when we see characters that are over a threshold horizontal (vertical)
//  distance  apart. See wordJoiner (lineJoiner) in PageText.computeViews().
Meta bool ;

// FillColor is the fill color of the text.
// The color is nil for spaces and line breaks (i.e. the Meta field is true).
FillColor _dc .Color ;

// StrokeColor is the stroke color of the text.
// The color is nil for spaces and line breaks (i.e. the Meta field is true).
StrokeColor _dc .Color ;

// Orientation is the text orientation
Orientation int ;

// DirectObject is the underlying PdfObject (Text Object) that represents the visible texts. This is introduced to get
// a simple access to the TextObject in case editing or replacment of some text is needed. E.g during redaction.
DirectObject _de .PdfObject ;

// ObjString is a decoded string operand of a text-showing operator. It has the same value as `Text` attribute except
// when many glyphs are represented with the same Text Object that contains multiple length string operand in which case
// ObjString spans more than one character string that falls in different TextMark objects.
ObjString []string ;Tw float64 ;Th float64 ;Tc float64 ;Index int ;_cdedb bool ;_fcdd *TextTable ;};func (_deegf *textLine )pullWord (_ggbb *wordBag ,_gdab *textWord ,_fefe int ){_deegf .appendWord (_gdab );_ggbb .removeWord (_gdab ,_fefe );};func _baad (_bgcc *wordBag ,_bcabg float64 ,_dfbef ,_gaece rulingList ,_gfefd bool )[]*wordBag {var _gebcf []*wordBag ;
for _ ,_cdcc :=range _bgcc .depthIndexes (){_ffeb :=false ;for !_bgcc .empty (_cdcc ){_bgfb :=_bgcc .firstReadingIndex (_cdcc );_bebf :=_bgcc .firstWord (_bgfb );_ddede :=_bed (_bebf ,_bcabg ,_dfbef ,_gaece );_bgcc .removeWord (_bebf ,_bgfb );if _gcede {_d .Log .Info ("\u0066\u0069\u0072\u0073\u0074\u0057\u006f\u0072\u0064\u0020\u005e\u005e^\u005e\u0020\u0025\u0073",_bebf .String ());
};for _cgbb :=true ;_cgbb ;_cgbb =_ffeb {_ffeb =false ;_edaab :=_cdbe *_ddede ._fdbe ;_fbbce :=_fddd *_ddede ._fdbe ;if _gfefd {_fbbce =_b .MaxFloat64 ;};_adfag :=_bbee *_ddede ._fdbe ;if _gcede {_d .Log .Info ("\u0070a\u0072a\u0057\u006f\u0072\u0064\u0073\u0020\u0064\u0065\u0070\u0074\u0068 \u0025\u002e\u0032\u0066 \u002d\u0020\u0025\u002e\u0032f\u0020\u006d\u0061\u0078\u0049\u006e\u0074\u0072\u0061\u0044\u0065\u0070\u0074\u0068\u0047\u0061\u0070\u003d\u0025\u002e\u0032\u0066\u0020\u006d\u0061\u0078\u0049\u006e\u0074\u0072\u0061R\u0065\u0061\u0064\u0069\u006e\u0067\u0047\u0061p\u003d\u0025\u002e\u0032\u0066",_ddede .minDepth (),_ddede .maxDepth (),_adfag ,_fbbce );
};if _bgcc .scanBand ("\u0076\u0065\u0072\u0074\u0069\u0063\u0061\u006c",_ddede ,_bgeg (_dbbgf ,0),_ddede .minDepth ()-_adfag ,_ddede .maxDepth ()+_adfag ,_eagef ,false ,false )> 0{_ffeb =true ;};if _bgcc .scanBand ("\u0068\u006f\u0072\u0069\u007a\u006f\u006e\u0074\u0061\u006c",_ddede ,_bgeg (_dbbgf ,_fbbce ),_ddede .minDepth (),_ddede .maxDepth (),_bbbe ,false ,false )> 0{_ffeb =true ;
};if _ffeb {continue ;};_dedc :=_bgcc .scanBand ("",_ddede ,_bgeg (_dbbf ,_edaab ),_ddede .minDepth (),_ddede .maxDepth (),_fbge ,true ,false );if _dedc > 0{_acdc :=(_ddede .maxDepth ()-_ddede .minDepth ())/_ddede ._fdbe ;if (_dedc > 1&&float64 (_dedc )> 0.3*_acdc )||_dedc <=10{if _bgcc .scanBand ("\u006f\u0074\u0068e\u0072",_ddede ,_bgeg (_dbbf ,_edaab ),_ddede .minDepth (),_ddede .maxDepth (),_fbge ,false ,true )> 0{_ffeb =true ;
};};};};_gebcf =append (_gebcf ,_ddede );};};return _gebcf ;};func (_fdbb *stateStack )size ()int {return len (*_fdbb )};func (_cfgc *textObject )checkOp (_dbbe *_ef .ContentStreamOperation ,_effg int ,_bbc bool )(_bacae bool ,_cacbe error ){if _cfgc ==nil {var _age []_de .PdfObject ;
if _effg > 0{_age =_dbbe .Params ;if len (_age )> _effg {_age =_age [:_effg ];};};_d .Log .Debug ("\u0025\u0023q \u006f\u0070\u0065r\u0061\u006e\u0064\u0020out\u0073id\u0065\u0020\u0074\u0065\u0078\u0074\u002e p\u0061\u0072\u0061\u006d\u0073\u003d\u0025+\u0076",_dbbe .Operand ,_age );
};if _effg >=0{if len (_dbbe .Params )!=_effg {if _bbc {_cacbe =_eg .New ("\u0069n\u0063\u006f\u0072\u0072e\u0063\u0074\u0020\u0070\u0061r\u0061m\u0065t\u0065\u0072\u0020\u0063\u006f\u0075\u006et");};_d .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0025\u0023\u0071\u0020\u0073\u0068\u006f\u0075\u006c\u0064\u0020h\u0061\u0076\u0065\u0020\u0025\u0064\u0020i\u006e\u0070\u0075\u0074\u0020\u0070\u0061\u0072\u0061\u006d\u0073,\u0020\u0067\u006f\u0074\u0020\u0025\u0064\u0020\u0025\u002b\u0076",_dbbe .Operand ,_effg ,len (_dbbe .Params ),_dbbe .Params );
return false ,_cacbe ;};};return true ,nil ;};

// PageFonts represents extracted fonts on a PDF page.
type PageFonts struct{Fonts []Font ;};func _eegb (_gbggcc ,_dggf bounded )float64 {_aabea :=_fdgb (_gbggcc ,_dggf );if !_cccee (_aabea ){return _aabea ;};return _bagf (_gbggcc ,_dggf );};func _dafgb (_beggd ,_feef *textPara )bool {if _beggd ._gbdg ||_feef ._gbdg {return true ;
};return _cccee (_beggd .depth ()-_feef .depth ());};func (_bdfa *textPara )text ()string {_acag :=new (_dg .Buffer );_bdfa .writeText (_acag );return _acag .String ();};func (_edgbg paraList )log (_bbfa string ){if !_aege {return ;};_d .Log .Info ("%\u0038\u0073\u003a\u0020\u0025\u0064 \u0070\u0061\u0072\u0061\u0073\u0020=\u003d\u003d\u003d\u003d\u003d\u003d\u002d-\u002d\u002d\u002d\u002d\u002d\u003d\u003d\u003d\u003d\u003d=\u003d",_bbfa ,len (_edgbg ));
for _cgaag ,_afab :=range _edgbg {if _afab ==nil {continue ;};_agee :=_afab .text ();_bbac :="\u0020\u0020";if _afab ._bbbg !=nil {_bbac =_dcf .Sprintf ("\u005b%\u0064\u0078\u0025\u0064\u005d",_afab ._bbbg ._ffcde ,_afab ._bbbg ._agefc );};_dcf .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0036\u002e\u0032\u0066\u0020\u0025s\u0020\u0025\u0071\u000a",_cgaag ,_afab .PdfRectangle ,_bbac ,_fgbfd (_agee ,50));
};};func _bbbf (_ecd *TextMarkArray ,_gbad *string ,_ecf *int ,_defd string )error {var _ffca TextMark ;for _ ,_ead :=range _ecd .Elements (){_fgea :=_ead .Text ;_ddd :=_ead .Font ;_adeef :="";_ddaa :=*_gbad ;if len (_ddaa )> *_ecf {_adeef =_ddaa [*_ecf :*_ecf +len (_fgea )];
}else if *_ecf ==len (_defd )-1&&len (_ddaa )> *_ecf {_adeef =_ddaa [*_ecf :];};_cgee :=_ead .DirectObject ;if _cgee ==nil &&_ead .Text =="\u0020"{_cbd :=_ffca .ObjString ;_dbcb :=_cbd [len (_cbd )-1];if _dbcb !=_ead .Text {_cgee =_ffca .DirectObject ;
_ddd =_ffca .Font ;_bcdg ,_gfaa :=_de .GetString (_cgee );if !_gfaa {return _dcf .Errorf ("\u0075n\u0061\u0062l\u0065\u0020\u0074\u006f \u0067\u0065\u0074 \u0073\u0074\u0072\u0069\u006e\u0067\u0020\u0042\u0079te\u0073\u0020\u0066r\u006f\u006d \u0064\u0069\u0072\u0065\u0063\u0074O\u0062\u006ae\u0063\u0074");
};_agag ,_gfaa :=_de .GetStringBytes (_cgee );if !_gfaa {return _de .ErrTypeError ;};_ace :=_aggb (_agag ,_ddd );_adeef =_ace +_adeef ;_ced (_bcdg ,_adeef ,_ddd );*_ecf +=len (_fgea );continue ;};};_fae ,_gfcb :=_de .GetString (_cgee );if !_gfcb {return _dcf .Errorf ("\u0075n\u0061\u0062l\u0065\u0020\u0074\u006f \u0067\u0065\u0074 \u0073\u0074\u0072\u0069\u006e\u0067\u0020\u0042\u0079te\u0073\u0020\u0066r\u006f\u006d \u0064\u0069\u0072\u0065\u0063\u0074O\u0062\u006ae\u0063\u0074");
};_ebca :="";_faa ,_gfcb :=_de .GetStringBytes (_cgee );if !_gfcb {return _de .ErrTypeError ;};_fccb :=_aggb (_faa ,_ddd );_ebca =_bc .Replace (_fccb ,_fgea ,_adeef ,1);_ced (_fae ,_ebca ,_ddd );*_ecf +=len (_fgea );_ffca =_ead ;};return nil ;};

// String returns a string describing `pt`.
func (_bccc PageText )String ()string {_dfbc :=_dcf .Sprintf ("P\u0061\u0067\u0065\u0054ex\u0074:\u0020\u0025\u0064\u0020\u0065l\u0065\u006d\u0065\u006e\u0074\u0073",len (_bccc ._beaf ));_cedf :=[]string {"\u002d"+_dfbc };for _ ,_aadb :=range _bccc ._beaf {_cedf =append (_cedf ,_aadb .String ());
};_cedf =append (_cedf ,"\u002b"+_dfbc );return _bc .Join (_cedf ,"\u000a");};func _gacbc (_fegg []TextMark ,_fgec *int ,_gedb string )[]TextMark {_cffaa :=_egfb ;_cffaa .Text =_gedb ;return _gdde (_fegg ,_fgec ,_cffaa );};func (_fbafd paraList )llyOrdering ()[]int {_bbag :=make ([]int ,len (_fbafd ));
for _fcaa :=range _fbafd {_bbag [_fcaa ]=_fcaa ;};_cc .SliceStable (_bbag ,func (_gacag ,_efbc int )bool {_egga ,_fbbd :=_bbag [_gacag ],_bbag [_efbc ];return _fbafd [_egga ].Lly < _fbafd [_fbbd ].Lly ;});return _bbag ;};func (_fgb *shapesState )clearPath (){_fgb ._bfbe =nil ;
_fgb ._ebbb =false ;if _baffc {_d .Log .Info ("\u0043\u004c\u0045A\u0052\u003a\u0020\u0073\u0073\u003d\u0025\u0073",_fgb );};};func _abdd (_bcee []int ,_eagc *TextMarkArray ,_gcgf string )(*TextMarkArray ,Box ,error ){_gdb :=Box {};_ddc :=_bcee [0];_bfa :=_bcee [1];
_bdbb :=len (_gcgf )-len (_bc .TrimLeft (_gcgf ,"\u0020"));_aeaa :=len (_gcgf )-len (_bc .TrimRight (_gcgf ,"\u0020\u000a"));_ddc =_ddc +_bdbb ;_bfa =_bfa -_aeaa ;_eaa ,_dagb :=_eagc .RangeOffset (_ddc ,_bfa );if _dagb !=nil {return nil ,_gdb ,_dagb ;};
_bfbd ,_cdab :=_eaa .BBox ();if !_cdab {return nil ,_gdb ,_dcf .Errorf ("\u0073\u0070\u0061\u006e\u004d\u0061\u0072\u006bs\u002e\u0042\u0042ox\u0020\u0068\u0061\u0073\u0020\u006eo\u0020\u0062\u006f\u0075\u006e\u0064\u0069\u006e\u0067\u0020\u0062\u006f\u0078\u002e\u0020s\u0070\u0061\u006e\u004d\u0061\u0072\u006b\u0073=\u0025\u0073",_eaa );
};_gdb =Box {BBox :_bfbd };return _eaa ,_gdb ,nil ;};func (_egcef rulingList )comp (_fffgcf ,_gedddd int )bool {_fgdge ,_egdfe :=_egcef [_fffgcf ],_egcef [_gedddd ];_eceea ,_abfee :=_fgdge ._ccffc ,_egdfe ._ccffc ;if _eceea !=_abfee {return _eceea > _abfee ;
};if _eceea ==_cbfee {return false ;};_gaafb :=func (_bcccd bool )bool {if _eceea ==_afec {return _bcccd ;};return !_bcccd ;};_gaedd ,_gcagd :=_fgdge ._ebfg ,_egdfe ._ebfg ;if _gaedd !=_gcagd {return _gaafb (_gaedd > _gcagd );};_gaedd ,_gcagd =_fgdge ._ffebg ,_egdfe ._ffebg ;
if _gaedd !=_gcagd {return _gaafb (_gaedd < _gcagd );};return _gaafb (_fgdge ._ceba < _egdfe ._ceba );};func (_aggd *textPara )toCellTextMarks (_bdfbf *int )[]TextMark {var _ecca []TextMark ;for _gdebb ,_dcag :=range _aggd ._gccbb {_faceg :=_dcag .toTextMarks (_bdfbf );
_baeg :=_gggc &&_dcag .endsInHyphen ()&&_gdebb !=len (_aggd ._gccbb )-1;if _baeg {_faceg =_dedg (_faceg ,_bdfbf );};_ecca =append (_ecca ,_faceg ...);if !(_baeg ||_gdebb ==len (_aggd ._gccbb )-1){_ecca =_gacbc (_ecca ,_bdfbf ,_ebce (_dcag ._abfa ,_aggd ._gccbb [_gdebb +1]._abfa ));
};};return _ecca ;};func (_gbdd *textWord )absorb (_bcga *textWord ){_gbdd .PdfRectangle =_bbg (_gbdd .PdfRectangle ,_bcga .PdfRectangle );_gbdd ._dacf =append (_gbdd ._dacf ,_bcga ._dacf ...);};func (_dade *subpath )add (_fgbdg ..._ccd .Point ){_dade ._bbff =append (_dade ._bbff ,_fgbdg ...)};
func _bfaa (_gfffc _cg .PdfRectangle ,_gbaba []*textLine )*textPara {return &textPara {PdfRectangle :_gfffc ,_gccbb :_gbaba };};func _eggc (_dgcdc *wordBag ,_abgbf int )*textLine {_cfed :=_dgcdc .firstWord (_abgbf );_ccbb :=textLine {PdfRectangle :_cfed .PdfRectangle ,_dcad :_cfed ._egca ,_abfa :_cfed ._acgec };
_ccbb .pullWord (_dgcdc ,_cfed ,_abgbf );return &_ccbb ;};func _dbded (_dcdc _de .PdfObject ,_bggeeg _dc .Color )(_g .Image ,error ){_eegdc ,_bbffa :=_de .GetStream (_dcdc );if !_bbffa {return nil ,nil ;};_abdfa ,_ccfc :=_cg .NewXObjectImageFromStream (_eegdc );
if _ccfc !=nil {return nil ,_ccfc ;};_daacd ,_ccfc :=_abdfa .ToImage ();if _ccfc !=nil {return nil ,_ccfc ;};return _babbc (_daacd ,_bggeeg ),nil ;};func (_ddee *textObject )reset (){_ddee ._gcde =_ccd .IdentityMatrix ();_ddee ._ddcd =_ccd .IdentityMatrix ();
_ddee ._gebc =nil ;};func (_dadd paraList )sortReadingOrder (){_d .Log .Trace ("\u0073\u006fr\u0074\u0052\u0065\u0061\u0064i\u006e\u0067\u004f\u0072\u0064e\u0072\u003a\u0020\u0070\u0061\u0072\u0061\u0073\u003d\u0025\u0064\u0020\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u0078\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d",len (_dadd ));
if len (_dadd )<=1{return ;};_dadd .computeEBBoxes ();_cc .Slice (_dadd ,func (_fbdab ,_fdddb int )bool {return _acca (_dadd [_fbdab ],_dadd [_fdddb ])<=0});};var _ggab string ="\u005e\u005b\u0061\u002d\u007a\u0041\u002dZ\u005d\u0028\u005c)\u007c\u005c\u002e)\u007c\u005e[\u005c\u0064\u005d\u002b\u0028\u005c)\u007c\\.\u0029\u007c\u005e\u005c\u0028\u005b\u0061\u002d\u007a\u0041\u002d\u005a\u005d\u005c\u0029\u007c\u005e\u005c\u0028\u005b\u005c\u0064\u005d\u002b\u005c\u0029";
func (_bdcgd *shapesState )devicePoint (_cdba ,_ccca float64 )_ccd .Point {_eegd :=_bdcgd ._acbg .Mult (_bdcgd ._bag );_cdba ,_ccca =_eegd .Transform (_cdba ,_ccca );return _ccd .NewPoint (_cdba ,_ccca );};

// String returns a string describing `tm`.
func (_bcad TextMark )String ()string {_cbgab :=_bcad .BBox ;var _cfaf string ;if _bcad .Font !=nil {_cfaf =_bcad .Font .String ();if len (_cfaf )> 50{_cfaf =_cfaf [:50]+"\u002e\u002e\u002e";};};var _cfcf string ;if _bcad .Meta {_cfcf ="\u0020\u002a\u004d\u002a";
};return _dcf .Sprintf ("\u007b\u0054\u0065\u0078t\u004d\u0061\u0072\u006b\u003a\u0020\u0025\u0064\u0020%\u0071\u003d\u0025\u0030\u0032\u0078\u0020\u0028\u0025\u0036\u002e\u0032\u0066\u002c\u0020\u0025\u0036\u002e2\u0066\u0029\u0020\u0028\u00256\u002e\u0032\u0066\u002c\u0020\u0025\u0036\u002e\u0032\u0066\u0029\u0020\u0025\u0073\u0025\u0073\u007d",_bcad .Offset ,_bcad .Text ,[]rune (_bcad .Text ),_cbgab .Llx ,_cbgab .Lly ,_cbgab .Urx ,_cbgab .Ury ,_cfaf ,_cfcf );
};func _daefb (_fegcd []rulingList )(rulingList ,rulingList ){var _bbdb rulingList ;for _ ,_gdcbb :=range _fegcd {_bbdb =append (_bbdb ,_gdcbb ...);};return _bbdb .vertsHorzs ();};

// NewEditor returns a new Editor object
func NewEditor (reader *_cg .PdfReader )*Editor {return &Editor {_adee :reader }};func (_gacac intSet )add (_gfccf int ){_gacac [_gfccf ]=struct{}{}};func _egae (_bbcd *paraList )map[int ][]*textLine {_bdabe :=map[int ][]*textLine {};for _ ,_afgga :=range *_bbcd {for _ ,_cegg :=range _afgga ._gccbb {if !_aeec (_cegg ){_d .Log .Debug ("g\u0072\u006f\u0075p\u004c\u0069\u006e\u0065\u0073\u003a\u0020\u0054\u0068\u0065\u0020\u0074\u0065\u0078\u0074\u0020\u006c\u0069\u006e\u0065\u0020\u0063\u006f\u006e\u0074a\u0069\u006e\u0073 \u006d\u006f\u0072\u0065\u0020\u0074\u0068\u0061\u006e\u0020\u006f\u006e\u0065 \u006d\u0063\u0069\u0064 \u006e\u0075\u006d\u0062e\u0072\u002e\u0020\u0049\u0074\u0020\u0073\u0068\u006f\u0075\u006c\u0064\u0020\u0062\u0065\u0020\u0073p\u006c\u0069\u0074\u002e");
continue ;};_deeb :=_cegg ._fddcd [0]._dacf [0]._debd ;_bdabe [_deeb ]=append (_bdabe [_deeb ],_cegg );};if _afgga ._bbbg !=nil {_dbgce :=_afgga ._bbbg ._adaa ;for _ ,_beff :=range _dbgce {for _ ,_fbbc :=range _beff ._gccbb {if !_aeec (_fbbc ){_d .Log .Debug ("g\u0072\u006f\u0075p\u004c\u0069\u006e\u0065\u0073\u003a\u0020\u0054\u0068\u0065\u0020\u0074\u0065\u0078\u0074\u0020\u006c\u0069\u006e\u0065\u0020\u0063\u006f\u006e\u0074a\u0069\u006e\u0073 \u006d\u006f\u0072\u0065\u0020\u0074\u0068\u0061\u006e\u0020\u006f\u006e\u0065 \u006d\u0063\u0069\u0064 \u006e\u0075\u006d\u0062e\u0072\u002e\u0020\u0049\u0074\u0020\u0073\u0068\u006f\u0075\u006c\u0064\u0020\u0062\u0065\u0020\u0073p\u006c\u0069\u0074\u002e");
continue ;};_dgfeb :=_fbbc ._fddcd [0]._dacf [0]._debd ;_bdabe [_dgfeb ]=append (_bdabe [_dgfeb ],_fbbc );};};};};return _bdabe ;};

// Marks returns the TextMark collection for a page. It represents all the text on the page.
func (_fcac PageText )Marks ()*TextMarkArray {return &TextMarkArray {_bgad :_fcac ._beef }};

// TableInfo gets table information of the textmark `tm`.
func (_fgef *TextMark )TableInfo ()(*TextTable ,[][]int ){if !_fgef ._cdedb {return nil ,nil ;};_defa :=_fgef ._fcdd ;_bgd :=_defa .getCellInfo (*_fgef );return _defa ,_bgd ;};

// Search searches the pages specified by `pages`.
func (_abdb *Editor )Search (pattern string ,pages []int )(map[int ]Match ,error ){_ccac ,_ ,_eacf :=_abdb .getMatches (pattern ,pages );return _ccac ,_eacf ;};func (_dcgdd *textLine )appendWord (_bacdf *textWord ){_dcgdd ._fddcd =append (_dcgdd ._fddcd ,_bacdf );
_dcgdd .PdfRectangle =_bbg (_dcgdd .PdfRectangle ,_bacdf .PdfRectangle );if _bacdf ._egca > _dcgdd ._dcad {_dcgdd ._dcad =_bacdf ._egca ;};if _bacdf ._acgec > _dcgdd ._abfa {_dcgdd ._abfa =_bacdf ._acgec ;};};func _daeg (_afefa string )bool {if _cf .RuneCountInString (_afefa )< _defg {return false ;
};_affc ,_cgafa :=_cf .DecodeLastRuneInString (_afefa );if _cgafa <=0||!_cd .Is (_cd .Hyphen ,_affc ){return false ;};_affc ,_cgafa =_cf .DecodeLastRuneInString (_afefa [:len (_afefa )-_cgafa ]);return _cgafa > 0&&!_cd .IsSpace (_affc );};type gridTile struct{_cg .PdfRectangle ;
_ffff ,_agege ,_bebc ,_gfaaa bool ;};func (_faac compositeCell )split (_egcc ,_acdeb []float64 )*textTable {_eabb :=len (_egcc )+1;_gcbg :=len (_acdeb )+1;if _fdea {_d .Log .Info ("\u0063\u006f\u006d\u0070\u006f\u0073\u0069t\u0065\u0043\u0065l\u006c\u002e\u0073\u0070l\u0069\u0074\u003a\u0020\u0025\u0064\u0020\u0078\u0020\u0025\u0064\u000a\u0009\u0063\u006f\u006d\u0070\u006f\u0073\u0069\u0074\u0065\u003d\u0025\u0073\u000a"+"\u0009\u0072\u006f\u0077\u0043\u006f\u0072\u0072\u0069\u0064\u006f\u0072\u0073=\u0025\u0036\u002e\u0032\u0066\u000a\t\u0063\u006f\u006c\u0043\u006f\u0072\u0072\u0069\u0064\u006f\u0072\u0073\u003d%\u0036\u002e\u0032\u0066",_gcbg ,_eabb ,_faac ,_egcc ,_acdeb );
_dcf .Printf ("\u0020\u0020\u0020\u0020\u0025\u0064\u0020\u0070\u0061\u0072\u0061\u0073\u000a",len (_faac .paraList ));for _gbfc ,_gbfee :=range _faac .paraList {_dcf .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0073\u000a",_gbfc ,_gbfee .String ());
};_dcf .Printf ("\u0020\u0020\u0020\u0020\u0025\u0064\u0020\u006c\u0069\u006e\u0065\u0073\u000a",len (_faac .lines ()));for _aced ,_edfc :=range _faac .lines (){_dcf .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0073\u000a",_aced ,_edfc );};};_egcc =_fegga (_egcc ,_faac .Ury ,_faac .Lly );
_acdeb =_fegga (_acdeb ,_faac .Llx ,_faac .Urx );_bfdb :=make (map[uint64 ]*textPara ,_gcbg *_eabb );_gdge :=textTable {_ffcde :_gcbg ,_agefc :_eabb ,_adaa :_bfdb };_adfac :=_faac .paraList ;_cc .Slice (_adfac ,func (_gdaca ,_fbba int )bool {_ddgb ,_fbbg :=_adfac [_gdaca ],_adfac [_fbba ];
_bafb ,_acad :=_ddgb .Lly ,_fbbg .Lly ;if _bafb !=_acad {return _bafb < _acad ;};return _ddgb .Llx < _fbbg .Llx ;});_gbaf :=make (map[uint64 ]_cg .PdfRectangle ,_gcbg *_eabb );for _bacbe ,_daabf :=range _egcc [1:]{_ffae :=_egcc [_bacbe ];for _bbfea ,_cfcg :=range _acdeb [1:]{_bdcga :=_acdeb [_bbfea ];
_gbaf [_egegf (_bbfea ,_bacbe )]=_cg .PdfRectangle {Llx :_bdcga ,Urx :_cfcg ,Lly :_daabf ,Ury :_ffae };};};if _fdea {_d .Log .Info ("\u0063\u006f\u006d\u0070\u006f\u0073\u0069\u0074\u0065\u0043\u0065l\u006c\u002e\u0073\u0070\u006c\u0069\u0074\u003a\u0020\u0072e\u0063\u0074\u0073");
_dcf .Printf ("\u0020\u0020\u0020\u0020");for _bdcdg :=0;_bdcdg < _gcbg ;_bdcdg ++{_dcf .Printf ("\u0025\u0033\u0030\u0064\u002c\u0020",_bdcdg );};_dcf .Println ();for _adege :=0;_adege < _eabb ;_adege ++{_dcf .Printf ("\u0020\u0020\u0025\u0032\u0064\u003a",_adege );
for _adega :=0;_adega < _gcbg ;_adega ++{_dcf .Printf ("\u00256\u002e\u0032\u0066\u002c\u0020",_gbaf [_egegf (_adega ,_adege )]);};_dcf .Println ();};};_gfbg :=func (_egad *textLine )(int ,int ){for _bbba :=0;_bbba < _eabb ;_bbba ++{for _cfgf :=0;_cfgf < _gcbg ;
_cfgf ++{if _fcbc (_gbaf [_egegf (_cfgf ,_bbba )],_egad .PdfRectangle ){return _cfgf ,_bbba ;};};};return -1,-1;};_bbfd :=make (map[uint64 ][]*textLine ,_gcbg *_eabb );for _ ,_gfca :=range _adfac .lines (){_agea ,_egeb :=_gfbg (_gfca );if _agea < 0{continue ;
};_bbfd [_egegf (_agea ,_egeb )]=append (_bbfd [_egegf (_agea ,_egeb )],_gfca );};for _aaged :=0;_aaged < len (_egcc )-1;_aaged ++{_cbad :=_egcc [_aaged ];_dbgf :=_egcc [_aaged +1];for _beda :=0;_beda < len (_acdeb )-1;_beda ++{_efdda :=_acdeb [_beda ];
_gdgf :=_acdeb [_beda +1];_dbee :=_cg .PdfRectangle {Llx :_efdda ,Urx :_gdgf ,Lly :_dbgf ,Ury :_cbad };_fffgb :=_bbfd [_egegf (_beda ,_aaged )];if len (_fffgb )==0{continue ;};_ccbd :=_bfaa (_dbee ,_fffgb );_gdge .put (_beda ,_aaged ,_ccbd );};};return &_gdge ;
};func _bfggf (_cgage []*textWord ,_aace *textWord )[]*textWord {for _feddg ,_ddgdd :=range _cgage {if _ddgdd ==_aace {return _bdcba (_cgage ,_feddg );};};_d .Log .Error ("\u0072\u0065\u006d\u006f\u0076e\u0057\u006f\u0072\u0064\u003a\u0020\u0077\u006f\u0072\u0064\u0073\u0020\u0064o\u0065\u0073\u006e\u0027\u0074\u0020\u0063\u006f\u006e\u0074\u0061\u0069\u006e\u0020\u0077\u006f\u0072\u0064\u003d\u0025\u0073",_aace );
return nil ;};func _bfdg (_bgdga _cg .PdfRectangle ,_cfae ,_aeda ,_dgfee ,_eccc *ruling )gridTile {_gfgg :=_bgdga .Llx ;_cfecc :=_bgdga .Urx ;_cacac :=_bgdga .Lly ;_eeebg :=_bgdga .Ury ;return gridTile {PdfRectangle :_bgdga ,_agege :_cfae !=nil &&_cfae .encloses (_cacac ,_eeebg ),_gfaaa :_aeda !=nil &&_aeda .encloses (_cacac ,_eeebg ),_bebc :_dgfee !=nil &&_dgfee .encloses (_gfgg ,_cfecc ),_ffff :_eccc !=nil &&_eccc .encloses (_gfgg ,_cfecc )};
};func (_fcea *wordBag )minDepth ()float64 {return _fcea ._faef -(_fcea .Ury -_fcea ._fdbe )};func _bgeg (_fded func (*wordBag ,*textWord ,float64 )bool ,_gcdf float64 )func (*wordBag ,*textWord )bool {return func (_cged *wordBag ,_ccaca *textWord )bool {return _fded (_cged ,_ccaca ,_gcdf )};
};func _afbec (_dfdf *list )[]*list {var _abcaa []*list ;for _ ,_eabcbc :=range _dfdf ._gbcb {switch _eabcbc ._fffdc {case "\u004c\u0049":_gdad :=_fabab (_eabcbc );_bcccg :=_afbec (_eabcbc );_eeca :=_bdee (_gdad ,"\u0062\u0075\u006c\u006c\u0065\u0074",_bcccg );
_geaaf :=_defb (_gdad ,"");_eeca ._ggdc =_geaaf ;_abcaa =append (_abcaa ,_eeca );case "\u004c\u0042\u006fd\u0079":return _afbec (_eabcbc );case "\u004c":_dbdd :=_afbec (_eabcbc );_abcaa =append (_abcaa ,_dbdd ...);return _abcaa ;};};return _abcaa ;};func (_edbcdc *textTable )getComposite (_eded ,_egff int )(paraList ,_cg .PdfRectangle ){_acfe ,_cbegc :=_edbcdc ._gefa [_egegf (_eded ,_egff )];
if _fdea {_dcf .Printf ("\u0020\u0020\u0020\u0020\u0020\u0020\u0020\u0020\u0067\u0065\u0074\u0043\u006f\u006d\u0070o\u0073i\u0074\u0065\u0028\u0025\u0064\u002c\u0025\u0064\u0029\u002d\u003e\u0025\u0073\u000a",_eded ,_egff ,_acfe .String ());};if !_cbegc {return nil ,_cg .PdfRectangle {};
};return _acfe .parasBBox ();};func (_acg *imageExtractContext )extractXObjectImage (_cbgc *_de .PdfObjectName ,_ddg _ef .GraphicsState ,_cae *_cg .PdfPageResources )error {_fab ,_ :=_cae .GetXObjectByName (*_cbgc );if _fab ==nil {return nil ;};_dag ,_dge :=_acg ._cea [_fab ];
if !_dge {_faf ,_dca :=_cae .GetXObjectImageByName (*_cbgc );if _dca !=nil {return _dca ;};if _faf ==nil {return nil ;};_acaf ,_dca :=_faf .ToImage ();if _dca !=nil {return _dca ;};var _baf _g .Image ;if _faf .Mask !=nil {if _baf ,_dca =_dbded (_faf .Mask ,_dc .Opaque );
_dca !=nil {_d .Log .Debug ("\u0057\u0041\u0052\u004e\u003a \u0063\u006f\u0075\u006c\u0064 \u006eo\u0074\u0020\u0067\u0065\u0074\u0020\u0065\u0078\u0070\u006c\u0069\u0063\u0069\u0074\u0020\u0069\u006d\u0061\u0067e\u0020\u006d\u0061\u0073\u006b\u002e\u0020\u004f\u0075\u0074\u0070\u0075\u0074\u0020\u006d\u0061\u0079\u0020\u0062\u0065\u0020\u0069\u006e\u0063o\u0072\u0072\u0065\u0063\u0074\u002e");
};}else if _faf .SMask !=nil {_baf ,_dca =_geac (_faf .SMask ,_dc .Opaque );if _dca !=nil {_d .Log .Debug ("W\u0041\u0052\u004e\u003a\u0020\u0063\u006f\u0075\u006c\u0064\u0020\u006e\u006f\u0074\u0020\u0067\u0065\u0074\u0020\u0073\u006f\u0066\u0074\u0020\u0069\u006da\u0067e\u0020\u006d\u0061\u0073k\u002e\u0020O\u0075\u0074\u0070\u0075\u0074\u0020\u006d\u0061\u0079\u0020\u0062\u0065\u0020\u0069\u006e\u0063\u006f\u0072\u0072\u0065\u0063\u0074\u002e");
};};if _baf !=nil {_geg ,_dga :=_acaf .ToGoImage ();if _dga !=nil {return _dga ;};_geg =_gebaf (_geg ,_baf );switch _faf .ColorSpace .String (){case "\u0044\u0065\u0076\u0069\u0063\u0065\u0047\u0072\u0061\u0079","\u0049n\u0064\u0065\u0078\u0065\u0064":_acaf ,_dga =_cg .ImageHandling .NewGrayImageFromGoImage (_geg );
if _dga !=nil {return _dga ;};default:_acaf ,_dga =_cg .ImageHandling .NewImageFromGoImage (_geg );if _dga !=nil {return _dga ;};};};_dag =&cachedImage {_eabcc :_acaf ,_cdaf :_faf .ColorSpace };_acg ._cea [_fab ]=_dag ;};_abd :=_dag ._eabcc ;_ece :=_dag ._cdaf ;
_afeg ,_fabb :=_ece .ImageToRGB (*_abd );if _fabb !=nil {return _fabb ;};_d .Log .Debug ("@\u0044\u006f\u0020\u0043\u0054\u004d\u003a\u0020\u0025\u0073",_ddg .CTM .String ());_ggd :=ImageMark {Image :&_afeg ,Width :_ddg .CTM .ScalingFactorX (),Height :_ddg .CTM .ScalingFactorY (),Angle :_ddg .CTM .Angle ()};
_ggd .X ,_ggd .Y =_ddg .CTM .Translation ();_acg ._daf =append (_acg ._daf ,_ggd );_acg ._fgff ++;return nil ;};func _cgfdg (_egcfd ,_decad int )int {if _egcfd < _decad {return _egcfd ;};return _decad ;};type markKind int ;func _fdcd (_dafbb ,_dagfb float64 )bool {return _b .Abs (_dafbb -_dagfb )<=_cddc };
func (_egfg *textWord )bbox ()_cg .PdfRectangle {return _egfg .PdfRectangle };var (_fgbb =map[rune ]string {0x0060:"\u0300",0x02CB:"\u0300",0x0027:"\u0301",0x00B4:"\u0301",0x02B9:"\u0301",0x02CA:"\u0301",0x005E:"\u0302",0x02C6:"\u0302",0x007E:"\u0303",0x02DC:"\u0303",0x00AF:"\u0304",0x02C9:"\u0304",0x02D8:"\u0306",0x02D9:"\u0307",0x00A8:"\u0308",0x00B0:"\u030a",0x02DA:"\u030a",0x02BA:"\u030b",0x02DD:"\u030b",0x02C7:"\u030c",0x02C8:"\u030d",0x0022:"\u030e",0x02BB:"\u0312",0x02BC:"\u0313",0x0486:"\u0313",0x055A:"\u0313",0x02BD:"\u0314",0x0485:"\u0314",0x0559:"\u0314",0x02D4:"\u031d",0x02D5:"\u031e",0x02D6:"\u031f",0x02D7:"\u0320",0x02B2:"\u0321",0x00B8:"\u0327",0x02CC:"\u0329",0x02B7:"\u032b",0x02CD:"\u0331",0x005F:"\u0332",0x204E:"\u0359"};
);func (_daffc *textTable )compositeColCorridors ()map[int ][]float64 {_gebde :=make (map[int ][]float64 ,_daffc ._ffcde );if _fdea {_d .Log .Info ("\u0063\u006f\u006d\u0070o\u0073\u0069\u0074\u0065\u0043\u006f\u006c\u0043\u006f\u0072r\u0069d\u006f\u0072\u0073\u003a\u0020\u0077\u003d%\u0064\u0020",_daffc ._ffcde );
};for _beade :=0;_beade < _daffc ._ffcde ;_beade ++{_gebde [_beade ]=nil ;};return _gebde ;};func _fefgc (_acfg *textLine )float64 {return _acfg ._fddcd [0].Llx };func _egaaf (_bgegb float64 ,_gegg int )int {if _gegg ==0{_gegg =1;};_fcbf :=float64 (_gegg );
return int (_b .Round (_bgegb /_fcbf )*_fcbf );};

// String returns a description of `p`.
func (_dfgb *textPara )String ()string {if _dfgb ._gbdg {return _dcf .Sprintf ("\u0025\u0036\u002e\u0032\u0066\u0020\u005b\u0045\u004d\u0050\u0054\u0059\u005d",_dfgb .PdfRectangle );};_gddg :="";if _dfgb ._bbbg !=nil {_gddg =_dcf .Sprintf ("\u005b\u0025\u0064\u0078\u0025\u0064\u005d\u0020",_dfgb ._bbbg ._ffcde ,_dfgb ._bbbg ._agefc );
};return _dcf .Sprintf ("\u0025\u0036\u002e\u0032f \u0025\u0073\u0025\u0064\u0020\u006c\u0069\u006e\u0065\u0073\u0020\u0025\u0071",_dfgb .PdfRectangle ,_gddg ,len (_dfgb ._gccbb ),_fgbfd (_dfgb .text (),50));};

// Font represents the font properties on a PDF page.
type Font struct{PdfFont *_cg .PdfFont ;

// FontName represents Font Name from font properties.
FontName string ;

// FontType represents Font Subtype entry in the font dictionary inside page resources.
// Examples : type0, Type1, MMType1, Type3, TrueType, CIDFont.
FontType string ;

// ToUnicode is true if font provides a `ToUnicode` mapping.
ToUnicode bool ;

// IsCID is true if underlying font is a composite font.
// Composite font is represented by a font dictionary whose Subtype is `Type0`
IsCID bool ;

// IsSimple is true if font is simple font.
// A simple font is limited to only 8 bit (255) character codes.
IsSimple bool ;

// FontData represents the raw data of the embedded font file.
// It can have format TrueType (TTF), PostScript Font (PFB) or Compact Font Format (CCF).
// FontData value can be indicates from `FontFile`, `FontFile2` or `FontFile3` inside Font Descriptor.
// At most, only one of `FontFile`, `FontFile2` or `FontFile3` will be FontData value.
FontData []byte ;

// FontFileName is a name representing the font. it has format:
// (Font Name) + (Font Type Extension), example: helvetica.ttf.
FontFileName string ;

// FontDescriptor represents metrics and other attributes inside font properties from PDF Structure (Font Descriptor).
FontDescriptor *_cg .PdfFontDescriptor ;};

// BidiText represents a bidi text organized in its visual order
// with base direction of the text.
type BidiText struct{_fg string ;_gc string ;};func _cgcgb (_aegag []*textMark ,_dddfd _cg .PdfRectangle ,_ebcc rulingList ,_agebg []gridTiling ,_cddg bool )paraList {_d .Log .Trace ("\u006d\u0061\u006b\u0065\u0054\u0065\u0078\u0074\u0050\u0061\u0067\u0065\u003a \u0025\u0064\u0020\u0065\u006c\u0065m\u0065\u006e\u0074\u0073\u0020\u0070\u0061\u0067\u0065\u0053\u0069\u007a\u0065=\u0025\u002e\u0032\u0066",len (_aegag ),_dddfd );
if len (_aegag )==0{return nil ;};_fbedb :=_gegf (_aegag ,_dddfd ,false );if len (_fbedb )==0{return nil ;};_ebcc .log ("\u006d\u0061\u006be\u0054\u0065\u0078\u0074\u0050\u0061\u0067\u0065");_cbdgd ,_efce :=_ebcc .vertsHorzs ();_ffaac :=_afgc (_fbedb ,_dddfd .Ury ,_cbdgd ,_efce );
_ggeea :=_baad (_ffaac ,_dddfd .Ury ,_cbdgd ,_efce ,_cddg );_ggeea =_ggae (_ggeea );_deaf :=make (paraList ,0,len (_ggeea ));for _ ,_bceec :=range _ggeea {_dfcb :=_bceec .arrangeText (_cddg );if _dfcb !=nil {_deaf =append (_deaf ,_dfcb );};};if len (_deaf )>=_afcd {_deaf =_deaf .extractTables (_agebg );
};_deaf .sortReadingOrder ();_deaf .sortTopoOrder ();_deaf .log ("\u0073\u006f\u0072te\u0064\u0020\u0069\u006e\u0020\u0072\u0065\u0061\u0064\u0069\u006e\u0067\u0020\u006f\u0072\u0064\u0065\u0072");return _deaf ;};

// RenderMode specifies the text rendering mode (Tmode), which determines whether showing text shall cause
// glyph outlines to be  stroked, filled, used as a clipping boundary, or some combination of the three.
// Stroking, filling, and clipping shall have the same effects for a text object as they do for a path object
// (see 8.5.3, "Path-Painting Operators" and 8.5.4, "Clipping Path Operators").
type RenderMode int ;type fontEntry struct{_edgbf *_cg .PdfFont ;_fged int64 ;};func (_fagd *shapesState )stroke (_ddfc *[]pathSection ){_daca :=pathSection {_gccb :_fagd ._bfbe ,Color :_fagd ._daac .getStrokeColor ()};*_ddfc =append (*_ddfc ,_daca );if _gagf {_dcf .Printf ("\u0020 \u0020\u0020S\u0054\u0052\u004fK\u0045\u003a\u0020\u0025\u0064\u0020\u0073t\u0072\u006f\u006b\u0065\u0073\u0020s\u0073\u003d\u0025\u0073\u0020\u0063\u006f\u006c\u006f\u0072\u003d%\u002b\u0076\u0020\u0025\u0036\u002e\u0032\u0066\u000a",len (*_ddfc ),_fagd ,_fagd ._daac .getStrokeColor (),_daca .bbox ());
if _dgff {for _deeg ,_aabb :=range _fagd ._bfbe {_dcf .Printf ("\u0025\u0038\u0064\u003a\u0020\u0025\u0073\u000a",_deeg ,_aabb );if _deeg ==10{break ;};};};};};func _gfbb (_edce ,_efdd _cg .PdfRectangle )bool {return _efdd .Llx <=_edce .Urx &&_edce .Llx <=_efdd .Urx ;
};func (_ebdgg *textObject )setCharSpacing (_aaga float64 ){if _ebdgg ==nil {return ;};_ebdgg ._dbcc ._ffb =_aaga ;if _gegd {_d .Log .Info ("\u0073\u0065t\u0043\u0068\u0061\u0072\u0053\u0070\u0061\u0063\u0069\u006e\u0067\u003a\u0020\u0025\u002e\u0032\u0066\u0020\u0073\u0074\u0061\u0074e=\u0025\u0073",_aaga ,_ebdgg ._dbcc .String ());
};};func (_fbdd *wordBag )sort (){for _ ,_gcef :=range _fbdd ._aade {_cc .Slice (_gcef ,func (_ddge ,_bbfbc int )bool {return _fdgb (_gcef [_ddge ],_gcef [_bbfbc ])< 0});};};func (_bebed *textPara )taken ()bool {return _bebed ==nil ||_bebed ._eega };func _edac (_gfga float64 )int {var _eagcg int ;
if _gfga >=0{_eagcg =int (_gfga /_adce );}else {_eagcg =int (_gfga /_adce )-1;};return _eagcg ;};func (_dadf *shapesState )newSubPath (){_dadf .clearPath ();if _baffc {_d .Log .Info ("\u006e\u0065\u0077\u0053\u0075\u0062\u0050\u0061\u0074h\u003a\u0020\u0025\u0073",_dadf );
};};func _fdff (_bcffea *_cg .Image ,_aggbd _dc .Color )_g .Image {_efdbg ,_ccgg :=int (_bcffea .Width ),int (_bcffea .Height );_cccgdg :=_g .NewRGBA (_g .Rect (0,0,_efdbg ,_ccgg ));for _acgbd :=0;_acgbd < _ccgg ;_acgbd ++{for _cabg :=0;_cabg < _efdbg ;
_cabg ++{_ebcec ,_degdc :=_bcffea .ColorAt (_cabg ,_acgbd );if _degdc !=nil {_d .Log .Debug ("\u0057\u0041\u0052\u004e\u003a\u0020\u0063o\u0075\u006c\u0064\u0020\u006e\u006f\u0074\u0020\u0072\u0065\u0074\u0072\u0069\u0065v\u0065 \u0069\u006d\u0061\u0067\u0065\u0020m\u0061\u0073\u006b\u0020\u0076\u0061\u006cu\u0065\u0020\u0061\u0074\u0020\u0028\u0025\u0064\u002c\u0020\u0025\u0064\u0029\u002e\u0020\u004f\u0075\u0074\u0070\u0075\u0074\u0020\u006da\u0079\u0020\u0062\u0065\u0020\u0069\u006e\u0063\u006f\u0072\u0072\u0065\u0063t\u002e",_cabg ,_acgbd );
continue ;};_decfg ,_efebc ,_bccfa ,_ :=_ebcec .RGBA ();var _gfffg _dc .Color ;if _decfg +_efebc +_bccfa ==0{_gfffg =_dc .Transparent ;}else {_gfffg =_aggbd ;};_cccgdg .Set (_cabg ,_acgbd ,_gfffg );};};return _cccgdg ;};func (_dfea paraList )lines ()[]*textLine {var _dbbee []*textLine ;
for _ ,_aaagg :=range _dfea {_dbbee =append (_dbbee ,_aaagg ._gccbb ...);};return _dbbee ;};

// String returns a string descibing `i`.
func (_aafbe gridTile )String ()string {_adac :=func (_cdeda bool ,_gfgda string )string {if _cdeda {return _gfgda ;};return "\u005f";};return _dcf .Sprintf ("\u00256\u002e2\u0066\u0020\u0025\u0031\u0073%\u0031\u0073%\u0031\u0073\u0025\u0031\u0073",_aafbe .PdfRectangle ,_adac (_aafbe ._agege ,"\u004c"),_adac (_aafbe ._gfaaa ,"\u0052"),_adac (_aafbe ._bebc ,"\u0042"),_adac (_aafbe ._ffff ,"\u0054"));
};func _dbag (_gedc []*textLine )[]*textLine {_edba :=[]*textLine {};for _ ,_egbg :=range _gedc {_cegdc :=_egbg .text ();_bbcab :=_fbgd .Find ([]byte (_cegdc ));if _bbcab !=nil {_edba =append (_edba ,_egbg );};};return _edba ;};func (_fagf rulingList )toGrids ()[]rulingList {if _gagf {_d .Log .Info ("t\u006f\u0047\u0072\u0069\u0064\u0073\u003a\u0020\u0025\u0073",_fagf );
};_edge :=_fagf .intersections ();if _gagf {_d .Log .Info ("\u0074\u006f\u0047r\u0069\u0064\u0073\u003a \u0076\u0065\u0063\u0073\u003d\u0025\u0064 \u0069\u006e\u0074\u0065\u0072\u0073\u0065\u0063\u0074\u0073\u003d\u0025\u0064\u0020",len (_fagf ),len (_edge ));
for _ ,_aefe :=range _afbc (_edge ){_dcf .Printf ("\u00254\u0064\u003a\u0020\u0025\u002b\u0076\n",_aefe ,_edge [_aefe ]);};};_gdadd :=make (map[int ]intSet ,len (_fagf ));for _bbge :=range _fagf {_cbab :=_fagf .connections (_edge ,_bbge );if len (_cbab )> 0{_gdadd [_bbge ]=_cbab ;
};};if _gagf {_d .Log .Info ("t\u006fG\u0072\u0069\u0064\u0073\u003a\u0020\u0063\u006fn\u006e\u0065\u0063\u0074s=\u0025\u0064",len (_gdadd ));for _ ,_afga :=range _afbc (_gdadd ){_dcf .Printf ("\u00254\u0064\u003a\u0020\u0025\u002b\u0076\n",_afga ,_gdadd [_afga ]);
};};_bfegc :=_daaa (len (_fagf ),func (_dddb ,_aagda int )bool {_cbgbb ,_dabbb :=len (_gdadd [_dddb ]),len (_gdadd [_aagda ]);if _cbgbb !=_dabbb {return _cbgbb > _dabbb ;};return _fagf .comp (_dddb ,_aagda );});if _gagf {_d .Log .Info ("t\u006fG\u0072\u0069\u0064\u0073\u003a\u0020\u006f\u0072d\u0065\u0072\u0069\u006eg=\u0025\u0076",_bfegc );
};_abec :=[][]int {{_bfegc [0]}};_fgcfe :for _ ,_fgabe :=range _bfegc [1:]{for _ebdcf ,_dcaga :=range _abec {for _ ,_eddg :=range _dcaga {if _gdadd [_eddg ].has (_fgabe ){_abec [_ebdcf ]=append (_dcaga ,_fgabe );continue _fgcfe ;};};};_abec =append (_abec ,[]int {_fgabe });
};if _gagf {_d .Log .Info ("\u0074o\u0047r\u0069\u0064\u0073\u003a\u0020i\u0067\u0072i\u0064\u0073\u003d\u0025\u0076",_abec );};_cc .SliceStable (_abec ,func (_cccgd ,_bgegbf int )bool {return len (_abec [_cccgd ])> len (_abec [_bgegbf ])});for _ ,_bgef :=range _abec {_cc .Slice (_bgef ,func (_bdcda ,_gade int )bool {return _fagf .comp (_bgef [_bdcda ],_bgef [_gade ])});
};_cgedd :=make ([]rulingList ,len (_abec ));for _aedbd ,_ecada :=range _abec {_dgbbg :=make (rulingList ,len (_ecada ));for _eafgc ,_adcgd :=range _ecada {_dgbbg [_eafgc ]=_fagf [_adcgd ];};_cgedd [_aedbd ]=_dgbbg ;};if _gagf {_d .Log .Info ("\u0074o\u0047r\u0069\u0064\u0073\u003a\u0020g\u0072\u0069d\u0073\u003d\u0025\u002b\u0076",_cgedd );
};var _cfcbd []rulingList ;for _ ,_gaffa :=range _cgedd {if _bdac ,_ffdc :=_gaffa .isActualGrid ();_ffdc {_gaffa =_bdac ;_gaffa =_gaffa .snapToGroups ();_cfcbd =append (_cfcbd ,_gaffa );};};if _gagf {_ccfg ("t\u006fG\u0072\u0069\u0064\u0073\u003a\u0020\u0061\u0063t\u0075\u0061\u006c\u0047ri\u0064\u0073",_cfcbd );
_d .Log .Info ("\u0074\u006f\u0047\u0072\u0069\u0064\u0073\u003a\u0020\u0067\u0072\u0069\u0064\u0073\u003d%\u0064 \u0061\u0063\u0074\u0075\u0061\u006c\u0047\u0072\u0069\u0064\u0073\u003d\u0025\u0064",len (_cgedd ),len (_cfcbd ));};return _cfcbd ;};

// Replace takes a pattern and replaces all the texts that much the pattern with `replacement`.
func (_edd *Editor )Replace (pattern string ,replacement string ,pages []int )error {_gcfg :=map[int ]Match {};for _ ,_gfa :=range pages {_facgf ,_ceaf :=_edd ._adee .GetPage (_gfa );if _ceaf !=nil {return _ceaf ;};_bdab ,_ceaf :=New (_facgf );if _ceaf !=nil {return _ceaf ;
};_feac ,_ ,_ ,_ceaf :=_bdab .ExtractPageText ();if _ceaf !=nil {return _ceaf ;};_gbge :="";_cdfe :=_feac .Text ();_dbda ,_ceaf :=_ggb (pattern ,_cdfe );if _ceaf !=nil {return _ceaf ;};_aba :=_feac .Marks ();_dgbe :=[]Box {};for _ ,_cef :=range _dbda {_bdb ,_cge ,_eaff :=_abdd (_cef ,_aba ,pattern );
if _eaff !=nil {return _eaff ;};_fba :=_feff (_bdb );_dgbe =append (_dgbe ,_cge );replacement ,_eaff =_babf (_fba ,replacement ,pattern );if _eaff !=nil {return _eaff ;};};_gbge =_feac .GetContentStreamOps ().String ();_dae :=Match {Pattern :pattern ,Indexes :_dbda ,Locations :_dgbe };
_facgf .SetContentStreams ([]string {_gbge },_de .NewFlateEncoder ());_gcfg [_gfa ]=_dae ;};return nil ;};var _dgbd =_ff .MustCompile ("\u005e\u005c\u0073\u002a\u0028\u005c\u0064\u002b\u005c\u002e\u003f|\u005b\u0049\u0069\u0076\u005d\u002b\u0029\u005c\u0073\u002a\\\u0029\u003f\u0024");
func _babf (_edaa []*TextMarkArray ,_decf ,_aea string )(string ,error ){_afd :=0;for _ ,_acgc :=range _edaa {_ceaa :=_acgc ._bgad [0].DirectObject ;if _ceaa ==nil {continue ;};_caad :=_ceaa .String ();if len (_caad )> 1{_afgb :=_cgaf (_acgc ,&_decf ,&_afd ,_aea );
if _afgb !=nil {return _decf ,_afgb ;};}else if len (_caad )==1{_afb :=_bbbf (_acgc ,&_decf ,&_afd ,_aea );if _afb !=nil {return _decf ,_afb ;};};};return _decf ,nil ;};func _ggde (_aebcf string )string {_bbcga :=[]rune (_aebcf );return string (_bbcga [:len (_bbcga )-1])};
func (_bdbbe *ruling )encloses (_ebgfg ,_dfece float64 )bool {return _bdbbe ._ffebg -_cddc <=_ebgfg &&_dfece <=_bdbbe ._ceba +_cddc ;};func _degb (_dgaaab *PageText )error {_degg :=_a .GetLicenseKey ();if _degg !=nil &&_degg .IsLicensed ()||_dea {return nil ;
};_dcf .Printf ("\u0055\u006e\u006c\u0069\u0063\u0065\u006e\u0073\u0065\u0064\u0020c\u006f\u0070\u0079\u0020\u006f\u0066\u0020\u0055\u006e\u0069P\u0044\u0046\u000a");_dcf .Println ("-\u0020\u0047\u0065\u0074\u0020\u0061\u0020\u0066\u0072e\u0065\u0020\u0074\u0072\u0069\u0061\u006c l\u0069\u0063\u0065\u006es\u0065\u0020\u006f\u006e\u0020\u0068\u0074\u0074\u0070s:\u002f\u002fu\u006e\u0069\u0064\u006f\u0063\u002e\u0069\u006f");
return _eg .New ("\u0075\u006e\u0069\u0070d\u0066\u0020\u006c\u0069\u0063\u0065\u006e\u0073\u0065\u0020c\u006fd\u0065\u0020\u0072\u0065\u0071\u0075\u0069r\u0065\u0064");};func (_dedga *textWord )computeText ()string {_ebaf :=make ([]string ,len (_dedga ._dacf ));
for _gfea ,_cddb :=range _dedga ._dacf {_ebaf [_gfea ]=_cddb ._cffag ;};return _bc .Join (_ebaf ,"");};var _dea =false ;func _bed (_gde *textWord ,_fbefd float64 ,_edbf ,_bgbg rulingList )*wordBag {_becef :=_edac (_gde ._acgec );_fdbf :=[]*textWord {_gde };
_badd :=wordBag {_aade :map[int ][]*textWord {_becef :_fdbf },PdfRectangle :_gde .PdfRectangle ,_fdbe :_gde ._egca ,_faef :_fbefd ,_fbff :_edbf ,_gdcc :_bgbg };return &_badd ;};func _bdee (_dfbe []*textLine ,_cffc string ,_caef []*list )*list {return &list {_fbcb :_dfbe ,_fffdc :_cffc ,_gbcb :_caef };
};func (_defdc paraList )xNeighbours (_aacgf float64 )map[*textPara ][]int {_bffee :=make ([]event ,2*len (_defdc ));if _aacgf ==0{for _eafec ,_fbgdg :=range _defdc {_bffee [2*_eafec ]=event {_fbgdg .Llx ,true ,_eafec };_bffee [2*_eafec +1]=event {_fbgdg .Urx ,false ,_eafec };
};}else {for _dcda ,_gfcae :=range _defdc {_bffee [2*_dcda ]=event {_gfcae .Llx -_aacgf *_gfcae .fontsize (),true ,_dcda };_bffee [2*_dcda +1]=event {_gfcae .Urx +_aacgf *_gfcae .fontsize (),false ,_dcda };};};return _defdc .eventNeighbours (_bffee );};
func (_adgg *textLine )endsInHyphen ()bool {_cbced :=_adgg ._fddcd [len (_adgg ._fddcd )-1];_dfdg :=_cbced ._afaded ;_ggff ,_gggd :=_cf .DecodeLastRuneInString (_dfdg );if _gggd <=0||!_cd .Is (_cd .Hyphen ,_ggff ){return false ;};if _cbced ._eaaab &&_daeg (_dfdg ){return true ;
};return _daeg (_adgg .text ());};func (_dfad rulingList )findPrimSec (_deca ,_baag float64 )*ruling {for _ ,_bfea :=range _dfad {if _cccee (_bfea ._ebfg -_deca )&&_bfea ._ffebg -_cddc <=_baag &&_baag <=_bfea ._ceba +_cddc {return _bfea ;};};return nil ;
};func _fffbd (_bfge string )bool {for _ ,_ddab :=range _bfge {if !_cd .IsSpace (_ddab ){return false ;};};return true ;};func (_cabbg rulingList )tidied (_agbge string )rulingList {_ggga :=_cabbg .removeDuplicates ();_ggga .log ("\u0075n\u0069\u0071\u0075\u0065\u0073");
_aegde :=_ggga .snapToGroups ();if _aegde ==nil {return nil ;};_aegde .sort ();if _gagf {_d .Log .Info ("\u0074\u0069\u0064i\u0065\u0064\u003a\u0020\u0025\u0071\u0020\u0076\u0065\u0063\u0073\u003d\u0025\u0064\u0020\u0075\u006e\u0069\u0071\u0075\u0065\u0073\u003d\u0025\u0064\u0020\u0063\u006f\u0061l\u0065\u0073\u0063\u0065\u0064\u003d\u0025\u0064",_agbge ,len (_cabbg ),len (_ggga ),len (_aegde ));
};_aegde .log ("\u0063o\u0061\u006c\u0065\u0073\u0063\u0065d");return _aegde ;};type wordBag struct{_cg .PdfRectangle ;_fdbe float64 ;_fbff ,_gdcc rulingList ;_faef float64 ;_aade map[int ][]*textWord ;};func _dedg (_gcdd []TextMark ,_ffdf *int )[]TextMark {_bbea :=_gcdd [len (_gcdd )-1];
_adfg :=[]rune (_bbea .Text );if len (_adfg )==1{_gcdd =_gcdd [:len (_gcdd )-1];_cbda :=_gcdd [len (_gcdd )-1];*_ffdf =_cbda .Offset +len (_cbda .Text );}else {_gadf :=_ggde (_bbea .Text );*_ffdf +=len (_gadf )-len (_bbea .Text );_bbea .Text =_gadf ;};
return _gcdd ;};func _bfgbd (_aedbf ,_cbgd _cg .PdfRectangle )bool {return _gfbb (_aedbf ,_cbgd )&&_fbdee (_aedbf ,_cbgd );};func (_dbfe paraList )topoOrder ()[]int {if _aege {_d .Log .Info ("\u0074\u006f\u0070\u006f\u004f\u0072\u0064\u0065\u0072\u003a");
};_fbcbd :=len (_dbfe );_dadcg :=make ([]bool ,_fbcbd );_eebb :=make ([]int ,0,_fbcbd );_cecb :=_dbfe .llyOrdering ();var _efac func (_gfcc int );_efac =func (_aadef int ){_dadcg [_aadef ]=true ;for _dfafcc :=0;_dfafcc < _fbcbd ;_dfafcc ++{if !_dadcg [_dfafcc ]{if _dbfe .readBefore (_cecb ,_aadef ,_dfafcc ){_efac (_dfafcc );
};};};_eebb =append (_eebb ,_aadef );};for _dfgca :=0;_dfgca < _fbcbd ;_dfgca ++{if !_dadcg [_dfgca ]{_efac (_dfgca );};};return _afcg (_eebb );};func _fcfg (_bbd *TextMarkArray ,_gbea int )int {_ffc :=_bbd .Elements ();_cac :=_gbea -1;_ggf :=_gbea +1;
_acd :=-1;if _cac >=0{_gfc :=_ffc [_cac ];_bcd :=_gfc .ObjString ;_fcfgf :=len (_bcd );_cdeg :=_gfc .Index ;if _cdeg +1< _fcfgf {return _cac ;};};if _ggf < len (_ffc ){_bdd :=_ffc [_ggf ];_baca :=_bdd .ObjString ;if _baca [0]!=_bdd .Text {return _ggf ;
};};if _acd ==-1&&_ffc [_gbea ].Text =="\u0020"{return _cac ;};return _acd ;};func (_bdafc *textTable )growTable (){_abbag :=func (_aadd paraList ){_bdafc ._agefc ++;for _cebef :=0;_cebef < _bdafc ._ffcde ;_cebef ++{_aaea :=_aadd [_cebef ];_bdafc .put (_cebef ,_bdafc ._agefc -1,_aaea );
};};_gbeab :=func (_cbeaa paraList ){_bdafc ._ffcde ++;for _eefef :=0;_eefef < _bdafc ._agefc ;_eefef ++{_fcbaa :=_cbeaa [_eefef ];_bdafc .put (_bdafc ._ffcde -1,_eefef ,_fcbaa );};};if _ababa {_bdafc .log ("\u0067r\u006f\u0077\u0054\u0061\u0062\u006ce");
};for _gfcbg :=0;;_gfcbg ++{_cege :=false ;_acbgg :=_bdafc .getDown ();_aaaa :=_bdafc .getRight ();if _ababa {_dcf .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0073\u000a",_gfcbg ,_bdafc );_dcf .Printf ("\u0020\u0020 \u0020\u0020\u0020 \u0020\u0064\u006f\u0077\u006e\u003d\u0025\u0073\u000a",_acbgg );
_dcf .Printf ("\u0020\u0020 \u0020\u0020\u0020 \u0072\u0069\u0067\u0068\u0074\u003d\u0025\u0073\u000a",_aaaa );};if _acbgg !=nil &&_aaaa !=nil {_gcdc :=_acbgg [len (_acbgg )-1];if !_gcdc .taken ()&&_gcdc ==_aaaa [len (_aaaa )-1]{_abbag (_acbgg );if _aaaa =_bdafc .getRight ();
_aaaa !=nil {_gbeab (_aaaa );_bdafc .put (_bdafc ._ffcde -1,_bdafc ._agefc -1,_gcdc );};_cege =true ;};};if !_cege &&_acbgg !=nil {_abbag (_acbgg );_cege =true ;};if !_cege &&_aaaa !=nil {_gbeab (_aaaa );_cege =true ;};if !_cege {break ;};};};var _ffgc =[]string {"\u2756","\u27a2","\u2713","\u2022","\uf0a7","\u25a1","\u2212","\u25a0","\u25aa","\u006f"};


// ExtractText processes and extracts all text data in content streams and returns as a string.
// It takes into account character encodings in the PDF file, which are decoded by
// CharcodeBytesToUnicode.
// Characters that can't be decoded are replaced with MissingCodeRune ('\ufffd' = ï¿½).
func (_defdd *Extractor )ExtractText ()(string ,error ){_fada ,_ ,_ ,_ecab :=_defdd .ExtractTextWithStats ();return _fada ,_ecab ;};func (_bfba rulingList )mergePrimary ()float64 {_bfcbd :=_bfba [0]._ebfg ;for _ ,_ggfb :=range _bfba [1:]{_bfcbd +=_ggfb ._ebfg ;
};return _bfcbd /float64 (len (_bfba ));};func _ea (_ga int )bool {return (_ga &1)!=0};func _bcbg (_fdbbf []pathSection )rulingList {_cddf (_fdbbf );if _gagf {_d .Log .Info ("\u006d\u0061k\u0065\u0053\u0074\u0072\u006f\u006b\u0065\u0052\u0075\u006c\u0069\u006e\u0067\u0073\u003a\u0020\u0025\u0064\u0020\u0073\u0074\u0072ok\u0065\u0073",len (_fdbbf ));
};var _bfaae rulingList ;for _ ,_bbfgg :=range _fdbbf {for _ ,_cefb :=range _bbfgg ._gccb {if len (_cefb ._bbff )< 2{continue ;};_dbgcb :=_cefb ._bbff [0];for _ ,_begd :=range _cefb ._bbff [1:]{if _gbfcc ,_cagd :=_gaafe (_dbgcb ,_begd ,_bbfgg .Color );
_cagd {_bfaae =append (_bfaae ,_gbfcc );};_dbgcb =_begd ;};};};if _gagf {_d .Log .Info ("m\u0061\u006b\u0065\u0053tr\u006fk\u0065\u0052\u0075\u006c\u0069n\u0067\u0073\u003a\u0020\u0025\u0073",_bfaae );};return _bfaae ;};func (_cgc *PageFonts )extractPageResourcesToFont (_ffd *_cg .PdfPageResources )error {if _ffd .Font ==nil {return _eg .New (_gbd );
};_aaa ,_dfa :=_de .GetDict (_ffd .Font );if !_dfa {return _eg .New (_dff );};for _ ,_fgga :=range _aaa .Keys (){var (_dbf =true ;_bga []byte ;_gcg string ;);_agg ,_geb :=_ffd .GetFontByName (_fgga );if !_geb {return _eg .New (_aca );};_fff ,_edc :=_cg .NewPdfFontFromPdfObject (_agg );
if _edc !=nil {return _edc ;};_gga :=_fff .FontDescriptor ();_eca :=_fff .FontDescriptor ().FontName .String ();_bgab :=_fff .Subtype ();if _fcf (_cgc .Fonts ,_eca ){continue ;};if len (_fff .ToUnicode ())==0{_dbf =false ;};if _gga .FontFile !=nil {if _gce ,_bgag :=_de .GetStream (_gga .FontFile );
_bgag {_bga ,_edc =_de .DecodeStream (_gce );if _edc !=nil {return _edc ;};_gcg =_eca +"\u002e\u0070\u0066\u0062";};}else if _gga .FontFile2 !=nil {if _eabc ,_dad :=_de .GetStream (_gga .FontFile2 );_dad {_bga ,_edc =_de .DecodeStream (_eabc );if _edc !=nil {return _edc ;
};_gcg =_eca +"\u002e\u0074\u0074\u0066";};}else if _gga .FontFile3 !=nil {if _cdac ,_cabb :=_de .GetStream (_gga .FontFile3 );_cabb {_bga ,_edc =_de .DecodeStream (_cdac );if _edc !=nil {return _edc ;};_gcg =_eca +"\u002e\u0063\u0066\u0066";};};if len (_gcg )< 1{_d .Log .Debug (_fbf );
};_afe :=Font {FontName :_eca ,PdfFont :_fff ,IsCID :_fff .IsCID (),IsSimple :_fff .IsSimple (),ToUnicode :_dbf ,FontType :_bgab ,FontData :_bga ,FontFileName :_gcg ,FontDescriptor :_gga };_cgc .Fonts =append (_cgc .Fonts ,_afe );};return nil ;};func (_cbcfe *wordBag )depthRange (_ffgd ,_gdbf int )[]int {var _edbe []int ;
for _ffcaf :=range _cbcfe ._aade {if _ffgd <=_ffcaf &&_ffcaf <=_gdbf {_edbe =append (_edbe ,_ffcaf );};};if len (_edbe )==0{return nil ;};_cc .Ints (_edbe );return _edbe ;};func _fegga (_adefd []float64 ,_agegg ,_fbdde float64 )[]float64 {_fbafg ,_afgdc :=_agegg ,_fbdde ;
if _afgdc < _fbafg {_fbafg ,_afgdc =_afgdc ,_fbafg ;};_acaab :=make ([]float64 ,0,len (_adefd )+2);_acaab =append (_acaab ,_agegg );for _ ,_gcabe :=range _adefd {if _gcabe <=_fbafg {continue ;}else if _gcabe >=_afgdc {break ;};_acaab =append (_acaab ,_gcabe );
};_acaab =append (_acaab ,_fbdde );return _acaab ;};func (_gcbda paraList )computeEBBoxes (){if _adeg {_d .Log .Info ("\u0063o\u006dp\u0075\u0074\u0065\u0045\u0042\u0042\u006f\u0078\u0065\u0073\u003a");};for _ ,_efaa :=range _gcbda {_efaa ._bfc =_efaa .PdfRectangle ;
};_dafa :=_gcbda .yNeighbours (0);for _fgda ,_bgfe :=range _gcbda {_edaca :=_bgfe ._bfc ;_eaaf ,_bebba :=-1.0e9,+1.0e9;for _ ,_bacbb :=range _dafa [_bgfe ]{_ebda :=_gcbda [_bacbb ]._bfc ;if _ebda .Urx < _edaca .Llx {_eaaf =_b .Max (_eaaf ,_ebda .Urx );
}else if _edaca .Urx < _ebda .Llx {_bebba =_b .Min (_bebba ,_ebda .Llx );};};for _ddff ,_gggfa :=range _gcbda {_edad :=_gggfa ._bfc ;if _fgda ==_ddff ||_edad .Ury > _edaca .Lly {continue ;};if _eaaf <=_edad .Llx &&_edad .Llx < _edaca .Llx {_edaca .Llx =_edad .Llx ;
}else if _edad .Urx <=_bebba &&_edaca .Urx < _edad .Urx {_edaca .Urx =_edad .Urx ;};};if _adeg {_dcf .Printf ("\u0025\u0034\u0064\u003a %\u0036\u002e\u0032\u0066\u2192\u0025\u0036\u002e\u0032\u0066\u0020\u0025\u0071\u000a",_fgda ,_bgfe ._bfc ,_edaca ,_fgbfd (_bgfe .text (),50));
};_bgfe ._bfc =_edaca ;};if _caagf {for _ ,_cecbc :=range _gcbda {_cecbc .PdfRectangle =_cecbc ._bfc ;};};};func _bcbgg (_edbcd _cg .PdfRectangle )rulingKind {_dfgf :=_edbcd .Width ();_dbfed :=_edbcd .Height ();if _dfgf > _dbfed {if _dfgf >=_gaead {return _afec ;
};}else {if _dbfed >=_gaead {return _dgcg ;};};return _cbfee ;};func (_cebc *textTable )put (_dfadd ,_edfac int ,_babb *textPara ){_cebc ._adaa [_egegf (_dfadd ,_edfac )]=_babb ;};func (_fbfb *textLine )toTextMarks (_cegd *int )[]TextMark {var _caca []TextMark ;
for _ ,_fdga :=range _fbfb ._fddcd {if _fdga ._eaaab {_caca =_gacbc (_caca ,_cegd ,"\u0020");};_edcec :=_fdga .toTextMarks (_cegd );_caca =append (_caca ,_edcec ...);};return _caca ;};func (_efgb *textObject )newTextMark (_fgfe string ,_agafc _ccd .Matrix ,_gcdb _ccd .Point ,_baeaa float64 ,_daecg *_cg .PdfFont ,_cgfab float64 ,_bebb ,_agef _dc .Color ,_eadc _de .PdfObject ,_abddg []string ,_gbab int ,_bgda int )(textMark ,bool ){_bffc :=_agafc .Angle ();
_faefc :=_egaaf (_bffc ,_acde );var _afgfb float64 ;if _faefc %180!=90{_afgfb =_agafc .ScalingFactorY ();}else {_afgfb =_agafc .ScalingFactorX ();};_ccee :=_ecbd (_agafc );_gace :=_cg .PdfRectangle {Llx :_ccee .X ,Lly :_ccee .Y ,Urx :_gcdb .X ,Ury :_gcdb .Y };
switch _faefc %360{case 90:_gace .Urx -=_afgfb ;case 180:_gace .Ury -=_afgfb ;case 270:_gace .Urx +=_afgfb ;case 0:_gace .Ury +=_afgfb ;default:_faefc =0;_gace .Ury +=_afgfb ;};if _gace .Llx > _gace .Urx {_gace .Llx ,_gace .Urx =_gace .Urx ,_gace .Llx ;
};if _gace .Lly > _gace .Ury {_gace .Lly ,_gace .Ury =_gace .Ury ,_gace .Lly ;};_acbga :=true ;if _efgb ._bbcc ._eaf .Width ()> 0{_eaeaa ,_gggcc :=_agd (_gace ,_efgb ._bbcc ._eaf );if !_gggcc {_acbga =false ;_d .Log .Debug ("\u0054\u0065\u0078\u0074\u0020m\u0061\u0072\u006b\u0020\u006f\u0075\u0074\u0073\u0069\u0064\u0065\u0020\u0070a\u0067\u0065\u002e\u0020\u0062\u0062\u006f\u0078\u003d\u0025\u0067\u0020\u006d\u0065\u0064\u0069\u0061\u0042\u006f\u0078\u003d\u0025\u0067\u0020\u0074\u0065\u0078\u0074\u003d\u0025q",_gace ,_efgb ._bbcc ._eaf ,_fgfe );
};_gace =_eaeaa ;};_edfec :=_gace ;_gccbe :=_efgb ._bbcc ._eaf ;switch _faefc %360{case 90:_gccbe .Urx ,_gccbe .Ury =_gccbe .Ury ,_gccbe .Urx ;_edfec =_cg .PdfRectangle {Llx :_gccbe .Urx -_gace .Ury ,Urx :_gccbe .Urx -_gace .Lly ,Lly :_gace .Llx ,Ury :_gace .Urx };
case 180:_edfec =_cg .PdfRectangle {Llx :_gccbe .Urx -_gace .Llx ,Urx :_gccbe .Urx -_gace .Urx ,Lly :_gccbe .Ury -_gace .Lly ,Ury :_gccbe .Ury -_gace .Ury };case 270:_gccbe .Urx ,_gccbe .Ury =_gccbe .Ury ,_gccbe .Urx ;_edfec =_cg .PdfRectangle {Llx :_gace .Ury ,Urx :_gace .Lly ,Lly :_gccbe .Ury -_gace .Llx ,Ury :_gccbe .Ury -_gace .Urx };
};if _edfec .Llx > _edfec .Urx {_edfec .Llx ,_edfec .Urx =_edfec .Urx ,_edfec .Llx ;};if _edfec .Lly > _edfec .Ury {_edfec .Lly ,_edfec .Ury =_edfec .Ury ,_edfec .Lly ;};_eabcd :=textMark {_cffag :_fgfe ,PdfRectangle :_edfec ,_bacg :_gace ,_cceg :_daecg ,_gcee :_afgfb ,_effge :_cgfab ,_defga :_agafc ,_egag :_gcdb ,_bead :_faefc ,_gbbgd :_bebb ,_ccga :_agef ,_ggggae :_eadc ,_ede :_abddg ,Th :_efgb ._dbcc ._ageb ,Tw :_efgb ._dbcc ._cfbgf ,_debd :_bgda ,_febf :_gbab };
if _abgg {_d .Log .Info ("n\u0065\u0077\u0054\u0065\u0078\u0074M\u0061\u0072\u006b\u003a\u0020\u0073t\u0061\u0072\u0074\u003d\u0025\u002e\u0032f\u0020\u0065\u006e\u0064\u003d\u0025\u002e\u0032\u0066\u0020%\u0073",_ccee ,_gcdb ,_eabcd .String ());};return _eabcd ,_acbga ;
};func _geeab (_fcad map[int ][]float64 )[]int {_efbca :=make ([]int ,len (_fcad ));_bdad :=0;for _ddcdf :=range _fcad {_efbca [_bdad ]=_ddcdf ;_bdad ++;};_cc .Ints (_efbca );return _efbca ;};func (_fbcd paraList )merge ()*textPara {_d .Log .Trace ("\u006d\u0065\u0072\u0067\u0065:\u0020\u0070\u0061\u0072\u0061\u0073\u003d\u0025\u0064\u0020\u003d\u003d\u003d=\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u0078\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d",len (_fbcd ));
if len (_fbcd )==0{return nil ;};_fbcd .sortReadingOrder ();_bfgd :=_fbcd [0].PdfRectangle ;_edfad :=_fbcd [0]._gccbb ;for _ ,_gabf :=range _fbcd [1:]{_bfgd =_bbg (_bfgd ,_gabf .PdfRectangle );_edfad =append (_edfad ,_gabf ._gccbb ...);};return _bfaa (_bfgd ,_edfad );
};func (_bacb TextTable )getCellInfo (_dgdab TextMark )[][]int {for _gced ,_dfaf :=range _bacb .Cells {for _ded :=range _dfaf {_gddb :=&_dfaf [_ded ].Marks ;if _gddb .exists (_dgdab ){return [][]int {{_gced },{_ded }};};};};return nil ;};

// ImageExtractOptions contains options for controlling image extraction from
// PDF pages.
type ImageExtractOptions struct{IncludeInlineStencilMasks bool ;};func (_adeaf *textTable )emptyCompositeRow (_cadf int )bool {for _fgdd :=0;_fgdd < _adeaf ._ffcde ;_fgdd ++{if _ffcaa ,_dccga :=_adeaf ._gefa [_egegf (_fgdd ,_cadf )];_dccga {if len (_ffcaa .paraList )> 0{return false ;
};};};return true ;};func _ccfg (_ddbd string ,_fddb []rulingList ){_d .Log .Info ("\u0024\u0024 \u0025\u0064\u0020g\u0072\u0069\u0064\u0073\u0020\u002d\u0020\u0025\u0073",len (_fddb ),_ddbd );for _bdabd ,_dgddf :=range _fddb {_dcf .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0073\u000a",_bdabd ,_dgddf .String ());
};};var _bg =[]string {"\u0041\u004e","\u0041\u004e","\u0041\u004e","\u0041\u004e","\u0041\u004e","\u0041\u004e","\u004f\u004e","\u004f\u004e","\u0041\u004c","\u0045\u0054","\u0045\u0054","\u0041\u004c","\u0043\u0053","\u0041\u004c","\u004f\u004e","\u004f\u004e","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u0041\u004c","\u0041\u004c","","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u0041\u004e","\u0041\u004e","\u0041\u004e","\u0041\u004e","\u0041\u004e","\u0041\u004e","\u0041\u004e","\u0041\u004e","\u0041\u004e","\u0041\u004e","\u0045\u0054","\u0041\u004e","\u0041\u004e","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u004e\u0053\u004d","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u0041\u004e","\u004f\u004e","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u0041\u004c","\u0041\u004c","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004f\u004e","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u0041\u004c","\u0041\u004c","\u0045\u004e","\u0045\u004e","\u0045\u004e","\u0045\u004e","\u0045\u004e","\u0045\u004e","\u0045\u004e","\u0045\u004e","\u0045\u004e","\u0045\u004e","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c"};
func (_edcfg *textTable )reduce ()*textTable {_abge :=make ([]int ,0,_edcfg ._agefc );_fgdfa :=make ([]int ,0,_edcfg ._ffcde );for _dggc :=0;_dggc < _edcfg ._agefc ;_dggc ++{if !_edcfg .emptyCompositeRow (_dggc ){_abge =append (_abge ,_dggc );};};for _dcca :=0;
_dcca < _edcfg ._ffcde ;_dcca ++{if !_edcfg .emptyCompositeColumn (_dcca ){_fgdfa =append (_fgdfa ,_dcca );};};if len (_abge )==_edcfg ._agefc &&len (_fgdfa )==_edcfg ._ffcde {return _edcfg ;};_dcefg :=textTable {_eeff :_edcfg ._eeff ,_ffcde :len (_fgdfa ),_agefc :len (_abge ),_adaa :make (map[uint64 ]*textPara ,len (_fgdfa )*len (_abge ))};
if _fdea {_d .Log .Info ("\u0072\u0065\u0064\u0075ce\u003a\u0020\u0025\u0064\u0078\u0025\u0064\u0020\u002d\u003e\u0020\u0025\u0064\u0078%\u0064",_edcfg ._ffcde ,_edcfg ._agefc ,len (_fgdfa ),len (_abge ));_d .Log .Info ("\u0072\u0065d\u0075\u0063\u0065d\u0043\u006f\u006c\u0073\u003a\u0020\u0025\u002b\u0076",_fgdfa );
_d .Log .Info ("\u0072\u0065d\u0075\u0063\u0065d\u0052\u006f\u0077\u0073\u003a\u0020\u0025\u002b\u0076",_abge );};for _dfeb ,_aefff :=range _abge {for _ebdggb ,_fbgfa :=range _fgdfa {_bbec ,_efded :=_edcfg .getComposite (_fbgfa ,_aefff );if _bbec ==nil {continue ;
};if _fdea {_dcf .Printf ("\u0020 \u0025\u0032\u0064\u002c \u0025\u0032\u0064\u0020\u0028%\u0032d\u002c \u0025\u0032\u0064\u0029\u0020\u0025\u0071\n",_ebdggb ,_dfeb ,_fbgfa ,_aefff ,_fgbfd (_bbec .merge ().text (),50));};_dcefg .putComposite (_ebdggb ,_dfeb ,_bbec ,_efded );
};};return &_dcefg ;};

// ApplyArea processes the page text only within the specified area `bbox`.
// Each time ApplyArea is called, it updates the result set in `pt`.
// Can be called multiple times in a row with different bounding boxes.
func (_eabg *PageText )ApplyArea (bbox _cg .PdfRectangle ){_gbbg :=make ([]*textMark ,0,len (_eabg ._beaf ));for _ ,_fdbba :=range _eabg ._beaf {if _bfgbd (_fdbba .bbox (),bbox ){_gbbg =append (_gbbg ,_fdbba );};};var _baea paraList ;_cbeb :="";_edag :=len (_gbbg );
for _dcde :=0;_dcde < 360&&_edag > 0;_dcde +=90{_egee :=make ([]*textMark ,0,len (_gbbg )-_edag );for _ ,_cdag :=range _gbbg {if _cdag ._bead ==_dcde {_egee =append (_egee ,_cdag );};};if len (_egee )> 0{if _eabg ._beee ._cbdb {_cbeb +=_adgf (_egee ,_eabg ._ddda );
}else {_eeaa :=_cgcgb (_egee ,_eabg ._ddda ,nil ,nil ,_eabg ._beee ._dcc );_baea =append (_baea ,_eeaa ...);};_edag -=len (_egee );};};if _eabg ._beee ._cbdb {_eabg ._gaca =_cbeb ;}else {_cbbd :=new (_dg .Buffer );_baea .writeText (_cbbd );_eabg ._gaca =_cbbd .String ();
_eabg ._beef =_baea .toTextMarks ();_eabg ._dagf =_baea .tables ();};};func (_fefddd *textMark )bbox ()_cg .PdfRectangle {return _fefddd .PdfRectangle };func (_cegc paraList )addNeighbours (){_debdb :=func (_cafa []int ,_fcae *textPara )([]*textPara ,[]*textPara ){_cagcc :=make ([]*textPara ,0,len (_cafa )-1);
_gcgc :=make ([]*textPara ,0,len (_cafa )-1);for _ ,_gaeda :=range _cafa {_afdgf :=_cegc [_gaeda ];if _afdgf .Urx <=_fcae .Llx {_cagcc =append (_cagcc ,_afdgf );}else if _afdgf .Llx >=_fcae .Urx {_gcgc =append (_gcgc ,_afdgf );};};return _cagcc ,_gcgc ;
};_edeec :=func (_gegbg []int ,_dadda *textPara )([]*textPara ,[]*textPara ){_bdgfc :=make ([]*textPara ,0,len (_gegbg )-1);_aafed :=make ([]*textPara ,0,len (_gegbg )-1);for _ ,_caeg :=range _gegbg {_eaccc :=_cegc [_caeg ];if _eaccc .Ury <=_dadda .Lly {_aafed =append (_aafed ,_eaccc );
}else if _eaccc .Lly >=_dadda .Ury {_bdgfc =append (_bdgfc ,_eaccc );};};return _bdgfc ,_aafed ;};_fcdeab :=_cegc .yNeighbours (_adgc );for _ ,_ffbd :=range _cegc {_eeec :=_fcdeab [_ffbd ];if len (_eeec )==0{continue ;};_cabdb ,_dbbgb :=_debdb (_eeec ,_ffbd );
if len (_cabdb )==0&&len (_dbbgb )==0{continue ;};if len (_cabdb )> 0{_agdeb :=_cabdb [0];for _ ,_gebdeg :=range _cabdb [1:]{if _gebdeg .Urx >=_agdeb .Urx {_agdeb =_gebdeg ;};};for _ ,_fdcda :=range _cabdb {if _fdcda !=_agdeb &&_fdcda .Urx > _agdeb .Llx {_agdeb =nil ;
break ;};};if _agdeb !=nil &&_fbdee (_ffbd .PdfRectangle ,_agdeb .PdfRectangle ){_ffbd ._ccbc =_agdeb ;};};if len (_dbbgb )> 0{_ebad :=_dbbgb [0];for _ ,_fbfad :=range _dbbgb [1:]{if _fbfad .Llx <=_ebad .Llx {_ebad =_fbfad ;};};for _ ,_cbdgg :=range _dbbgb {if _cbdgg !=_ebad &&_cbdgg .Llx < _ebad .Urx {_ebad =nil ;
break ;};};if _ebad !=nil &&_fbdee (_ffbd .PdfRectangle ,_ebad .PdfRectangle ){_ffbd ._gcgfc =_ebad ;};};};_fcdeab =_cegc .xNeighbours (_baded );for _ ,_agbf :=range _cegc {_bddgc :=_fcdeab [_agbf ];if len (_bddgc )==0{continue ;};_aeeb ,_egebg :=_edeec (_bddgc ,_agbf );
if len (_aeeb )==0&&len (_egebg )==0{continue ;};if len (_egebg )> 0{_eebae :=_egebg [0];for _ ,_fbcg :=range _egebg [1:]{if _fbcg .Ury >=_eebae .Ury {_eebae =_fbcg ;};};for _ ,_ffgdea :=range _egebg {if _ffgdea !=_eebae &&_ffgdea .Ury > _eebae .Lly {_eebae =nil ;
break ;};};if _eebae !=nil &&_gfbb (_agbf .PdfRectangle ,_eebae .PdfRectangle ){_agbf ._eacda =_eebae ;};};if len (_aeeb )> 0{_ddgdf :=_aeeb [0];for _ ,_geged :=range _aeeb [1:]{if _geged .Lly <=_ddgdf .Lly {_ddgdf =_geged ;};};for _ ,_beeb :=range _aeeb {if _beeb !=_ddgdf &&_beeb .Lly < _ddgdf .Ury {_ddgdf =nil ;
break ;};};if _ddgdf !=nil &&_gfbb (_agbf .PdfRectangle ,_ddgdf .PdfRectangle ){_agbf ._dfdb =_ddgdf ;};};};for _ ,_gcfbe :=range _cegc {if _gcfbe ._ccbc !=nil &&_gcfbe ._ccbc ._gcgfc !=_gcfbe {_gcfbe ._ccbc =nil ;};if _gcfbe ._dfdb !=nil &&_gcfbe ._dfdb ._eacda !=_gcfbe {_gcfbe ._dfdb =nil ;
};if _gcfbe ._gcgfc !=nil &&_gcfbe ._gcgfc ._ccbc !=_gcfbe {_gcfbe ._gcgfc =nil ;};if _gcfbe ._eacda !=nil &&_gcfbe ._eacda ._dfdb !=_gcfbe {_gcfbe ._eacda =nil ;};};};func _ffcce (_caeedc map[float64 ]map[float64 ]gridTile )[]float64 {_ggcdc :=make ([]float64 ,0,len (_caeedc ));
_dcfa :=make (map[float64 ]struct{},len (_caeedc ));for _ ,_cfebf :=range _caeedc {for _bfbee :=range _cfebf {if _ ,_dgddd :=_dcfa [_bfbee ];_dgddd {continue ;};_ggcdc =append (_ggcdc ,_bfbee );_dcfa [_bfbee ]=struct{}{};};};_cc .Float64s (_ggcdc );return _ggcdc ;
};func (_ecaf *textObject )nextLine (){_ecaf .moveLP (0,-_ecaf ._dbcc ._dcge )};

// ExtractPageText returns the text contents of `e` (an Extractor for a page) as a PageText.
// TODO(peterwilliams97): The stats complicate this function signature and aren't very useful.
//
//	Replace with a function like Extract() (*PageText, error)
func (_baee *Extractor )ExtractPageText ()(*PageText ,int ,int ,error ){_gfgb ,_ggbg ,_eba ,_deaa :=_baee .extractPageText (_baee ._bce ,_baee ._cga ,_ccd .IdentityMatrix (),0,false );if _deaa !=nil &&_deaa !=_cg .ErrColorOutOfRange {return nil ,0,0,_deaa ;
};if _baee ._dbd !=nil {_gfgb ._beee ._cbdb =_baee ._dbd .UseSimplerExtractionProcess ;_gfgb ._beee ._dcc =_baee ._dbd .DisableMultiColumns ;};_gfgb .computeViews ();_deaa =_degb (_gfgb );if _deaa !=nil {return nil ,0,0,_deaa ;};if _baee ._dbd !=nil {if _baee ._dbd .ApplyCropBox &&_baee ._da !=nil {_gfgb .ApplyArea (*_baee ._da );
};_gfgb ._beee ._dgcd =_baee ._dbd .DisableDocumentTags ;};return _gfgb ,_ggbg ,_eba ,nil ;};const (RenderModeStroke RenderMode =1<<iota ;RenderModeFill ;RenderModeClip ;);func _cdbc (_caaf ,_bfcb float64 )bool {return _caaf /_b .Max (_aedfd ,_bfcb )< _adcca };
func _fgbfd (_fccba string ,_dbgca int )string {if len (_fccba )< _dbgca {return _fccba ;};return _fccba [:_dbgca ];};func (_adeaa *textTable )logComposite (_gbcfd string ){if !_fdea {return ;};_d .Log .Info ("\u007e~\u007eP\u0061\u0072\u0061\u0020\u0025d\u0020\u0078 \u0025\u0064\u0020\u0025\u0073",_adeaa ._ffcde ,_adeaa ._agefc ,_gbcfd );
_dcf .Printf ("\u0025\u0035\u0073 \u007c","");for _bdcdd :=0;_bdcdd < _adeaa ._ffcde ;_bdcdd ++{_dcf .Printf ("\u0025\u0033\u0064 \u007c",_bdcdd );};_dcf .Println ("");_dcf .Printf ("\u0025\u0035\u0073 \u002b","");for _eebdgf :=0;_eebdgf < _adeaa ._ffcde ;
_eebdgf ++{_dcf .Printf ("\u0025\u0033\u0073 \u002b","\u002d\u002d\u002d");};_dcf .Println ("");for _defbg :=0;_defbg < _adeaa ._agefc ;_defbg ++{_dcf .Printf ("\u0025\u0035\u0064 \u007c",_defbg );for _dfge :=0;_dfge < _adeaa ._ffcde ;_dfge ++{_bgbbe ,_ :=_adeaa ._gefa [_egegf (_dfge ,_defbg )].parasBBox ();
_dcf .Printf ("\u0025\u0033\u0064 \u007c",len (_bgbbe ));};_dcf .Println ("");};_d .Log .Info ("\u007e~\u007eT\u0065\u0078\u0074\u0020\u0025d\u0020\u0078 \u0025\u0064\u0020\u0025\u0073",_adeaa ._ffcde ,_adeaa ._agefc ,_gbcfd );_dcf .Printf ("\u0025\u0035\u0073 \u007c","");
for _ecbfc :=0;_ecbfc < _adeaa ._ffcde ;_ecbfc ++{_dcf .Printf ("\u0025\u0031\u0032\u0064\u0020\u007c",_ecbfc );};_dcf .Println ("");_dcf .Printf ("\u0025\u0035\u0073 \u002b","");for _gbeb :=0;_gbeb < _adeaa ._ffcde ;_gbeb ++{_dcf .Print ("\u002d\u002d\u002d\u002d\u002d\u002d\u002d\u002d\u002d-\u002d\u002d\u002d\u002b");
};_dcf .Println ("");for _fcebe :=0;_fcebe < _adeaa ._agefc ;_fcebe ++{_dcf .Printf ("\u0025\u0035\u0064 \u007c",_fcebe );for _gaee :=0;_gaee < _adeaa ._ffcde ;_gaee ++{_bege ,_ :=_adeaa ._gefa [_egegf (_gaee ,_fcebe )].parasBBox ();_dceg :="";_afgdb :=_bege .merge ();
if _afgdb !=nil {_dceg =_afgdb .text ();};_dceg =_dcf .Sprintf ("\u0025\u0071",_fgbfd (_dceg ,12));_dceg =_dceg [1:len (_dceg )-1];_dcf .Printf ("\u0025\u0031\u0032\u0073\u0020\u007c",_dceg );};_dcf .Println ("");};};func (_eceebb *textTable )reduceTiling (_faedf gridTiling ,_begb float64 )*textTable {_ecda :=make ([]int ,0,_eceebb ._agefc );
_bbab :=make ([]int ,0,_eceebb ._ffcde );_bbcdg :=_faedf ._dfcg ;_bgbe :=_faedf ._dgfd ;for _aafag :=0;_aafag < _eceebb ._agefc ;_aafag ++{_ffebgg :=_aafag > 0&&_b .Abs (_bgbe [_aafag -1]-_bgbe [_aafag ])< _begb &&_eceebb .emptyCompositeRow (_aafag );if !_ffebgg {_ecda =append (_ecda ,_aafag );
};};for _eacef :=0;_eacef < _eceebb ._ffcde ;_eacef ++{_dgcef :=_eacef < _eceebb ._ffcde -1&&_b .Abs (_bbcdg [_eacef +1]-_bbcdg [_eacef ])< _begb &&_eceebb .emptyCompositeColumn (_eacef );if !_dgcef {_bbab =append (_bbab ,_eacef );};};if len (_ecda )==_eceebb ._agefc &&len (_bbab )==_eceebb ._ffcde {return _eceebb ;
};_deeaa :=textTable {_eeff :_eceebb ._eeff ,_ffcde :len (_bbab ),_agefc :len (_ecda ),_gefa :make (map[uint64 ]compositeCell ,len (_bbab )*len (_ecda ))};if _fdea {_d .Log .Info ("\u0072\u0065\u0064\u0075c\u0065\u0054\u0069\u006c\u0069\u006e\u0067\u003a\u0020\u0025d\u0078%\u0064\u0020\u002d\u003e\u0020\u0025\u0064x\u0025\u0064",_eceebb ._ffcde ,_eceebb ._agefc ,len (_bbab ),len (_ecda ));
_d .Log .Info ("\u0072\u0065d\u0075\u0063\u0065d\u0043\u006f\u006c\u0073\u003a\u0020\u0025\u002b\u0076",_bbab );_d .Log .Info ("\u0072\u0065d\u0075\u0063\u0065d\u0052\u006f\u0077\u0073\u003a\u0020\u0025\u002b\u0076",_ecda );};for _bcgc ,_bcccgg :=range _ecda {for _gege ,_bcaed :=range _bbab {_dddfb ,_cbgaa :=_eceebb .getComposite (_bcaed ,_bcccgg );
if len (_dddfb )==0{continue ;};if _fdea {_dcf .Printf ("\u0020 \u0025\u0032\u0064\u002c \u0025\u0032\u0064\u0020\u0028%\u0032d\u002c \u0025\u0032\u0064\u0029\u0020\u0025\u0071\n",_gege ,_bcgc ,_bcaed ,_bcccgg ,_fgbfd (_dddfb .merge ().text (),50));};_deeaa .putComposite (_gege ,_bcgc ,_dddfb ,_cbgaa );
};};return &_deeaa ;};

// NewFromContents creates a new extractor from contents and page resources.
func NewFromContents (contents string ,resources *_cg .PdfPageResources )(*Extractor ,error ){const _baed ="\u0065x\u0074\u0072\u0061\u0063t\u006f\u0072\u002e\u004e\u0065w\u0046r\u006fm\u0043\u006f\u006e\u0074\u0065\u006e\u0074s";_fd :=&Extractor {_bce :contents ,_cga :resources ,_ega :map[string ]fontEntry {},_eae :map[string ]textResult {}};
_a .TrackUse (_baed );return _fd ,nil ;};func (_fdfc *textTable )getDown ()paraList {_ecce :=make (paraList ,_fdfc ._ffcde );for _dfbcbd :=0;_dfbcbd < _fdfc ._ffcde ;_dfbcbd ++{_bfce :=_fdfc .get (_dfbcbd ,_fdfc ._agefc -1)._eacda ;if _bfce .taken (){return nil ;
};_ecce [_dfbcbd ]=_bfce ;};for _bbcf :=0;_bbcf < _fdfc ._ffcde -1;_bbcf ++{if _ecce [_bbcf ]._gcgfc !=_ecce [_bbcf +1]{return nil ;};};return _ecce ;};func (_ggeaa intSet )del (_bcdee int ){delete (_ggeaa ,_bcdee )};func _afbc (_gdcgc map[int ]intSet )[]int {_cbfeee :=make ([]int ,0,len (_gdcgc ));
for _eeaaf :=range _gdcgc {_cbfeee =append (_cbfeee ,_eeaaf );};_cc .Ints (_cbfeee );return _cbfeee ;};func (_ddaec paraList )findTableGrid (_dccgc gridTiling )(*textTable ,map[*textPara ]struct{}){_efcdd :=len (_dccgc ._dfcg );_acdb :=len (_dccgc ._dgfd );
_ageeg :=textTable {_eeff :true ,_ffcde :_efcdd ,_agefc :_acdb ,_adaa :make (map[uint64 ]*textPara ,_efcdd *_acdb ),_gefa :make (map[uint64 ]compositeCell ,_efcdd *_acdb )};_ageeg .PdfRectangle =_dccgc .PdfRectangle ;_caga :=make (map[*textPara ]struct{});
_dgcbf :=int ((1.0-_gdea )*float64 (_efcdd *_acdb ));_egaf :=0;if _cebb {_d .Log .Info ("\u0066\u0069\u006e\u0064Ta\u0062\u006c\u0065\u0047\u0072\u0069\u0064\u003a\u0020\u0025\u0064\u0020\u0078\u0020%\u0064",_efcdd ,_acdb );};for _bgcga ,_cfabg :=range _dccgc ._dgfd {_edaff ,_affgb :=_dccgc ._dgced [_cfabg ];
if !_affgb {continue ;};for _gbfce ,_gdgdf :=range _dccgc ._dfcg {_cgba ,_ggeg :=_edaff [_gdgdf ];if !_ggeg {continue ;};_agafd :=_ddaec .inTile (_cgba );if len (_agafd )==0{_egaf ++;if _egaf > _dgcbf {if _cebb {_d .Log .Info ("\u0021\u006e\u0075m\u0045\u006d\u0070\u0074\u0079\u003d\u0025\u0064",_egaf );
};return nil ,nil ;};}else {_ageeg .putComposite (_gbfce ,_bgcga ,_agafd ,_cgba .PdfRectangle );for _ ,_cfgce :=range _agafd {_caga [_cfgce ]=struct{}{};};};};};_dgaaa :=0;for _dfecf :=0;_dfecf < _efcdd ;_dfecf ++{_eaad :=_ageeg .get (_dfecf ,0);if _eaad ==nil ||!_eaad ._gbdg {_dgaaa ++;
};};if _dgaaa ==0{if _cebb {_d .Log .Info ("\u0021\u006e\u0075m\u0048\u0065\u0061\u0064\u0065\u0072\u003d\u0030");};return nil ,nil ;};_gecc :=_ageeg .reduceTiling (_dccgc ,_eddc );_gecc =_gecc .subdivide ();return _gecc ,_caga ;};func (_ggdb *wordBag )maxDepth ()float64 {return _ggdb ._faef -_ggdb .Lly };
func (_efad *textObject )getCurrentFont ()*_cg .PdfFont {_fceg :=_efad ._dbcc ._gcd ;if _fceg ==nil {_d .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u004e\u006f\u0020\u0066\u006f\u006e\u0074\u0020\u0064\u0065\u0066\u0069\u006e\u0065\u0064\u002e\u0020U\u0073\u0069\u006e\u0067\u0020d\u0065\u0066a\u0075\u006c\u0074\u002e");
return _cg .DefaultFont ();};return _fceg ;};func (_cefg paraList )list ()[]*list {var _aabf []*textLine ;var _adef []*textLine ;for _ ,_cgag :=range _cefg {_ccfb :=_cgag .getListLines ();_aabf =append (_aabf ,_ccfb ...);_adef =append (_adef ,_cgag ._gccbb ...);
};_cage :=_gbedf (_aabf );_gcfa :=_ebaaa (_adef ,_cage );return _gcfa ;};func (_cfeg paraList )extractTables (_aadeb []gridTiling )paraList {if _fdea {_d .Log .Debug ("\u0065\u0078\u0074r\u0061\u0063\u0074\u0054\u0061\u0062\u006c\u0065\u0073\u003d\u0025\u0064\u0020\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u0078\u003d\u003d\u003d\u003d=\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d",len (_cfeg ));
};if len (_cfeg )< _afcd {return _cfeg ;};_feacc :=_cfeg .findTables (_aadeb );if _fdea {_d .Log .Info ("c\u006f\u006d\u0062\u0069\u006e\u0065d\u0020\u0074\u0061\u0062\u006c\u0065s\u0020\u0025\u0064\u0020\u003d\u003d\u003d=\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d=\u003d",len (_feacc ));
for _bbbee ,_gceg :=range _feacc {_gceg .log (_dcf .Sprintf ("c\u006f\u006d\u0062\u0069\u006e\u0065\u0064\u0020\u0025\u0064",_bbbee ));};};return _cfeg .applyTables (_feacc );};func (_ggee *textObject )getFontDict (_beeee string )(_egfd _de .PdfObject ,_fbdg error ){_gfb :=_ggee ._fbc ;
if _gfb ==nil {_d .Log .Debug ("g\u0065\u0074\u0046\u006f\u006e\u0074D\u0069\u0063\u0074\u002e\u0020\u004eo\u0020\u0072\u0065\u0073\u006f\u0075\u0072c\u0065\u0073\u002e\u0020\u006e\u0061\u006d\u0065\u003d\u0025#\u0071",_beeee );return nil ,nil ;};_egfd ,_ecac :=_gfb .GetFontByName (_de .PdfObjectName (_beeee ));
if !_ecac {_d .Log .Debug ("\u0045R\u0052\u004fR\u003a\u0020\u0067\u0065t\u0046\u006f\u006et\u0044\u0069\u0063\u0074\u003a\u0020\u0046\u006f\u006et \u006e\u006f\u0074 \u0066\u006fu\u006e\u0064\u003a\u0020\u006e\u0061m\u0065\u003d%\u0023\u0071",_beeee );
return nil ,_eg .New ("f\u006f\u006e\u0074\u0020no\u0074 \u0069\u006e\u0020\u0072\u0065s\u006f\u0075\u0072\u0063\u0065\u0073");};return _egfd ,nil ;};const (_fdcc =1.0e-6;_faeb =1.0e-4;_acde =10;_adce =6;_bacbc =0.5;_cgeea =0.12;_bcf =0.19;_fcdg =0.04;
_bbee =1.0;_eagef =0.04;_bff =12;_fddd =0.4;_bbbe =0.7;_cdbe =1.0;_fbge =0.1;_ccae =1.4;_abcac =0.46;_gacad =0.02;_acda =0.2;_cabd =0.5;_defg =4;_faddd =4.0;_afcd =6;_gdea =0.3;_baded =0.01;_adgc =0.02;_afff =2;_dcfe =2;_aedf =500;_gaead =4.0;_adcca =0.05;
_aedfd =0.1;_cddc =2.0;_dddf =2.0;_fege =1.5;_eddc =3.0;_ceff =0.25;);func (_fbfg *PageText )getText ()string {_acc :="";_bfgc :=len (_fbfg ._beaf );for _gfad :=0;_gfad < 360&&_bfgc > 0;_gfad +=90{_effc :=make ([]*textMark ,0,len (_fbfg ._beaf )-_bfgc );
for _ ,_becf :=range _fbfg ._beaf {if _becf ._bead ==_gfad {_effc =append (_effc ,_becf );};};if len (_effc )> 0{_acc +=_adgf (_effc ,_fbfg ._ddda );_bfgc -=len (_effc );};};return _acc ;};func _gaab (_bgdgaa string )(string ,bool ){_agae :=[]rune (_bgdgaa );
if len (_agae )!=1{return "",false ;};_adceb ,_ecfac :=_fgbb [_agae [0]];return _adceb ,_ecfac ;};func (_eage *stateStack )push (_gae *textState ){_fagc :=*_gae ;*_eage =append (*_eage ,&_fagc )};func (_agbb *textPara )depth ()float64 {if _agbb ._gbdg {return -1.0;
};if len (_agbb ._gccbb )> 0{return _agbb ._gccbb [0]._abfa ;};return _agbb ._bbbg .depth ();};

// String returns a description of `k`.
func (_bcbb markKind )String ()string {_adfb ,_ddcdd :=_efgg [_bcbb ];if !_ddcdd {return _dcf .Sprintf ("\u004e\u006f\u0074\u0020\u0061\u0020\u006d\u0061\u0072k\u003a\u0020\u0025\u0064",_bcbb );};return _adfb ;};func (_aeed *textLine )text ()string {var _cdad []string ;
for _ ,_ecee :=range _aeed ._fddcd {if _ecee ._eaaab {_cdad =append (_cdad ,"\u0020");};_cdad =append (_cdad ,_ecee ._afaded );};_edde :=_bc .Join (_cdad ,"");_cecf :=_ae ([]rune (_edde ));return _cecf ._fg ;};type pathSection struct{_gccb []*subpath ;
_dc .Color ;};func _bagf (_abac ,_gacc bounded )float64 {return _ddgf (_abac )-_ddgf (_gacc )};func _bgge (_eebf *TextMarkArray )string {_dgeg :="";for _ ,_gdff :=range _eebf .Elements (){_dgeg +=_gdff .Text ;};return _dgeg ;};func (_dfcf *subpath )makeRectRuling (_aedfa _dc .Color )(*ruling ,bool ){if _gada {_d .Log .Info ("\u006d\u0061\u006beR\u0065\u0063\u0074\u0052\u0075\u006c\u0069\u006e\u0067\u003a\u0020\u0070\u0061\u0074\u0068\u003d\u0025\u0076",_dfcf );
};_dcbg :=_dfcf ._bbff [:4];_dabad :=make (map[int ]rulingKind ,len (_dcbg ));for _ccacaa ,_aeff :=range _dcbg {_fffc :=_dfcf ._bbff [(_ccacaa +1)%4];_dabad [_ccacaa ]=_baafc (_aeff ,_fffc );if _gada {_dcf .Printf ("\u0025\u0034\u0064: \u0025\u0073\u0020\u003d\u0020\u0025\u0036\u002e\u0032\u0066\u0020\u002d\u0020\u0025\u0036\u002e\u0032\u0066",_ccacaa ,_dabad [_ccacaa ],_aeff ,_fffc );
};};if _gada {_dcf .Printf ("\u0020\u0020\u0020\u006b\u0069\u006e\u0064\u0073\u003d\u0025\u002b\u0076\u000a",_dabad );};var _cgecg ,_cfcgf []int ;for _gdfaf ,_fbdbc :=range _dabad {switch _fbdbc {case _afec :_cfcgf =append (_cfcgf ,_gdfaf );case _dgcg :_cgecg =append (_cgecg ,_gdfaf );
};};if _gada {_dcf .Printf ("\u0020\u0020 \u0068\u006f\u0072z\u0073\u003d\u0025\u0064\u0020\u0025\u002b\u0076\u000a",len (_cfcgf ),_cfcgf );_dcf .Printf ("\u0020\u0020 \u0076\u0065\u0072t\u0073\u003d\u0025\u0064\u0020\u0025\u002b\u0076\u000a",len (_cgecg ),_cgecg );
};_aegd :=(len (_cfcgf )==2&&len (_cgecg )==2)||(len (_cfcgf )==2&&len (_cgecg )==0&&_bfeb (_dcbg [_cfcgf [0]],_dcbg [_cfcgf [1]]))||(len (_cgecg )==2&&len (_cfcgf )==0&&_fafab (_dcbg [_cgecg [0]],_dcbg [_cgecg [1]]));if _gada {_dcf .Printf (" \u0020\u0020\u0068\u006f\u0072\u007as\u003d\u0025\u0064\u0020\u0076\u0065\u0072\u0074\u0073=\u0025\u0064\u0020o\u006b=\u0025\u0074\u000a",len (_cfcgf ),len (_cgecg ),_aegd );
};if !_aegd {if _gada {_d .Log .Error ("\u0021!\u006d\u0061\u006b\u0065R\u0065\u0063\u0074\u0052\u0075l\u0069n\u0067:\u0020\u0070\u0061\u0074\u0068\u003d\u0025v",_dfcf );_dcf .Printf (" \u0020\u0020\u0068\u006f\u0072\u007as\u003d\u0025\u0064\u0020\u0076\u0065\u0072\u0074\u0073=\u0025\u0064\u0020o\u006b=\u0025\u0074\u000a",len (_cfcgf ),len (_cgecg ),_aegd );
};return &ruling {},false ;};if len (_cgecg )==0{for _edga ,_egbac :=range _dabad {if _egbac !=_afec {_cgecg =append (_cgecg ,_edga );};};};if len (_cfcgf )==0{for _cbcga ,_eeaaa :=range _dabad {if _eeaaa !=_dgcg {_cfcgf =append (_cfcgf ,_cbcga );};};};
if _gada {_d .Log .Info ("\u006da\u006b\u0065R\u0065\u0063\u0074\u0052u\u006c\u0069\u006eg\u003a\u0020\u0068\u006f\u0072\u007a\u0073\u003d\u0025d \u0076\u0065\u0072t\u0073\u003d%\u0064\u0020\u0070\u006f\u0069\u006et\u0073\u003d%\u0064\u000a"+"\u0009\u0020\u0068o\u0072\u007a\u0073\u003d\u0025\u002b\u0076\u000a"+"\u0009\u0020\u0076e\u0072\u0074\u0073\u003d\u0025\u002b\u0076\u000a"+"\t\u0070\u006f\u0069\u006e\u0074\u0073\u003d\u0025\u002b\u0076",len (_cfcgf ),len (_cgecg ),len (_dcbg ),_cfcgf ,_cgecg ,_dcbg );
};var _gaecf ,_gega ,_acdfc ,_fega _ccd .Point ;if _dcbg [_cfcgf [0]].Y > _dcbg [_cfcgf [1]].Y {_acdfc ,_fega =_dcbg [_cfcgf [0]],_dcbg [_cfcgf [1]];}else {_acdfc ,_fega =_dcbg [_cfcgf [1]],_dcbg [_cfcgf [0]];};if _dcbg [_cgecg [0]].X > _dcbg [_cgecg [1]].X {_gaecf ,_gega =_dcbg [_cgecg [0]],_dcbg [_cgecg [1]];
}else {_gaecf ,_gega =_dcbg [_cgecg [1]],_dcbg [_cgecg [0]];};_gafbb :=_cg .PdfRectangle {Llx :_gaecf .X ,Urx :_gega .X ,Lly :_fega .Y ,Ury :_acdfc .Y };if _gafbb .Llx > _gafbb .Urx {_gafbb .Llx ,_gafbb .Urx =_gafbb .Urx ,_gafbb .Llx ;};if _gafbb .Lly > _gafbb .Ury {_gafbb .Lly ,_gafbb .Ury =_gafbb .Ury ,_gafbb .Lly ;
};_ebeb :=rectRuling {PdfRectangle :_gafbb ,_acfgf :_bcbgg (_gafbb ),Color :_aedfa };if _ebeb ._acfgf ==_cbfee {if _gada {_d .Log .Error ("\u006da\u006b\u0065\u0052\u0065\u0063\u0074\u0052\u0075\u006c\u0069\u006eg\u003a\u0020\u006b\u0069\u006e\u0064\u003d\u006e\u0069\u006c");
};return nil ,false ;};_bdda ,_eecac :=_ebeb .asRuling ();if !_eecac {if _gada {_d .Log .Error ("\u006da\u006b\u0065\u0052\u0065c\u0074\u0052\u0075\u006c\u0069n\u0067:\u0020!\u0069\u0073\u0052\u0075\u006c\u0069\u006eg");};return nil ,false ;};if _gagf {_dcf .Printf ("\u0020\u0020\u0020\u0072\u003d\u0025\u0073\u000a",_bdda .String ());
};return _bdda ,true ;};func (_ebagb *subpath )isQuadrilateral ()bool {if len (_ebagb ._bbff )< 4||len (_ebagb ._bbff )> 5{return false ;};if len (_ebagb ._bbff )==5{_fcdc :=_ebagb ._bbff [0];_gecg :=_ebagb ._bbff [4];if _fcdc .X !=_gecg .X ||_fcdc .Y !=_gecg .Y {return false ;
};};return true ;};func _babbc (_dcab *_cg .Image ,_ebfb _dc .Color )_g .Image {_degc ,_beca :=int (_dcab .Width ),int (_dcab .Height );_eabgg :=_g .NewRGBA (_g .Rect (0,0,_degc ,_beca ));for _bgcab :=0;_bgcab < _beca ;_bgcab ++{for _cdadgc :=0;_cdadgc < _degc ;
_cdadgc ++{_aefc ,_dfbag :=_dcab .ColorAt (_cdadgc ,_bgcab );if _dfbag !=nil {_d .Log .Debug ("\u0057\u0041\u0052\u004e\u003a\u0020\u0063o\u0075\u006c\u0064\u0020\u006e\u006f\u0074\u0020\u0072\u0065\u0074\u0072\u0069\u0065v\u0065 \u0069\u006d\u0061\u0067\u0065\u0020m\u0061\u0073\u006b\u0020\u0076\u0061\u006cu\u0065\u0020\u0061\u0074\u0020\u0028\u0025\u0064\u002c\u0020\u0025\u0064\u0029\u002e\u0020\u004f\u0075\u0074\u0070\u0075\u0074\u0020\u006da\u0079\u0020\u0062\u0065\u0020\u0069\u006e\u0063\u006f\u0072\u0072\u0065\u0063t\u002e",_cdadgc ,_bgcab );
continue ;};_gbeea ,_gddf ,_aedfc ,_ :=_aefc .RGBA ();var _fggaa _dc .Color ;if _gbeea +_gddf +_aedfc ==0{_fggaa =_ebfb ;}else {_fggaa =_dc .Transparent ;};_eabgg .Set (_cdadgc ,_bgcab ,_fggaa );};};return _eabgg ;};func (_cefe rulingList )blocks (_aagaa ,_ggcdf *ruling )bool {if _aagaa ._ffebg > _ggcdf ._ceba ||_ggcdf ._ffebg > _aagaa ._ceba {return false ;
};_bbbb :=_b .Max (_aagaa ._ffebg ,_ggcdf ._ffebg );_cbgbf :=_b .Min (_aagaa ._ceba ,_ggcdf ._ceba );if _aagaa ._ebfg > _ggcdf ._ebfg {_aagaa ,_ggcdf =_ggcdf ,_aagaa ;};for _ ,_bdgg :=range _cefe {if _aagaa ._ebfg <=_bdgg ._ebfg +_dddf &&_bdgg ._ebfg <=_ggcdf ._ebfg +_dddf &&_bdgg ._ffebg <=_cbgbf &&_bbbb <=_bdgg ._ceba {return true ;
};};return false ;};func (_gabae paraList )eventNeighbours (_daacg []event )map[*textPara ][]int {_cc .Slice (_daacg ,func (_adedb ,_fcgd int )bool {_gead ,_dafaf :=_daacg [_adedb ],_daacg [_fcgd ];_agaga ,_bced :=_gead ._dgdgd ,_dafaf ._dgdgd ;if _agaga !=_bced {return _agaga < _bced ;
};if _gead ._ddbcb !=_dafaf ._ddbcb {return _gead ._ddbcb ;};return _adedb < _fcgd ;});_abee :=make (map[int ]intSet );_bddec :=make (intSet );for _ ,_afade :=range _daacg {if _afade ._ddbcb {_abee [_afade ._fcdf ]=make (intSet );for _ebgdc :=range _bddec {if _ebgdc !=_afade ._fcdf {_abee [_afade ._fcdf ].add (_ebgdc );
_abee [_ebgdc ].add (_afade ._fcdf );};};_bddec .add (_afade ._fcdf );}else {_bddec .del (_afade ._fcdf );};};_efaf :=map[*textPara ][]int {};for _gecb ,_bbbec :=range _abee {_bagbd :=_gabae [_gecb ];if len (_bbbec )==0{_efaf [_bagbd ]=nil ;continue ;};
_gfdc :=make ([]int ,len (_bbbec ));_egcg :=0;for _ffde :=range _bbbec {_gfdc [_egcg ]=_ffde ;_egcg ++;};_efaf [_bagbd ]=_gfdc ;};return _efaf ;};

// WriteToFile writes the edited content to `outputPath`.
func (_fefg *Editor )WriteToFile (outputPath string )error {_egda ,_bee :=_fefg ._adee .ToWriter (nil );if _bee !=nil {return _dcf .Errorf ("\u0066\u0061\u0069\u006c\u0065\u0064\u0020\u0074\u006f\u0020c\u006f\u006e\u0076\u0065\u0072\u0074\u0020t\u006f\u0020\u0077\u0072\u0069\u0074\u0065\u0072\u0020\u0025\u0076",_bee );
};_egda .WriteToFile (outputPath );return nil ;};type textState struct{_ffb float64 ;_cfbgf float64 ;_ageb float64 ;_dcge float64 ;_faba float64 ;_cgfb RenderMode ;_acee float64 ;_gcd *_cg .PdfFont ;_aaadc _cg .PdfRectangle ;_edcf int ;_abb int ;};func (_dcefa *wordBag )pullWord (_fefa *textWord ,_fcee int ,_fadg map[int ]map[*textWord ]struct{}){_dcefa .PdfRectangle =_bbg (_dcefa .PdfRectangle ,_fefa .PdfRectangle );
if _fefa ._egca > _dcefa ._fdbe {_dcefa ._fdbe =_fefa ._egca ;};_dcefa ._aade [_fcee ]=append (_dcefa ._aade [_fcee ],_fefa );_fadg [_fcee ][_fefa ]=struct{}{};};

// GetContentStreamOps returns the contentStreamOps field of `pt`.
func (_bfga *PageText )GetContentStreamOps ()*_ef .ContentStreamOperations {return _bfga ._gedd };func (_eceebc *textTable )get (_eaab ,_cfadb int )*textPara {return _eceebc ._adaa [_egegf (_eaab ,_cfadb )];};func _cdc (_cbcgd *Extractor ,_bfde *_cg .PdfPageResources ,_acae _ef .GraphicsState ,_daec *textState ,_ccdb *stateStack )*textObject {return &textObject {_bbcc :_cbcgd ,_fbc :_bfde ,_gacb :_acae ,_bgf :_ccdb ,_dbcc :_daec ,_gcde :_ccd .IdentityMatrix (),_ddcd :_ccd .IdentityMatrix ()};
};func _fffde (_caddg int ,_ccdg map[int ][]float64 )([]int ,int ){_fgbfe :=make ([]int ,_caddg );_fcddb :=0;for _dbbbg :=0;_dbbbg < _caddg ;_dbbbg ++{_fgbfe [_dbbbg ]=_fcddb ;_fcddb +=len (_ccdg [_dbbbg ])+1;};return _fgbfe ,_fcddb ;};

// BBox returns the smallest axis-aligned rectangle that encloses all the TextMarks in `ma`.
func (_dabaf *TextMarkArray )BBox ()(_cg .PdfRectangle ,bool ){var _gfff _cg .PdfRectangle ;_fbag :=false ;for _ ,_afcf :=range _dabaf ._bgad {if _afcf .Meta ||_fffbd (_afcf .Text ){continue ;};if _fbag {_gfff =_bbg (_gfff ,_afcf .BBox );}else {_gfff =_afcf .BBox ;
_fbag =true ;};};return _gfff ,_fbag ;};

// PageImages represents extracted images on a PDF page with spatial information:
// display position and size.
type PageImages struct{Images []ImageMark ;};func _fegae (_dbdbb []*textLine ){_cc .Slice (_dbdbb ,func (_bgdgee ,_eeccb int )bool {_eebfe ,_baab :=_dbdbb [_bgdgee ],_dbdbb [_eeccb ];return _eebfe ._abfa < _baab ._abfa ;});};const _eaea =1.0/1000.0;func (_cacd *textWord )addDiacritic (_geeae string ){_bgaff :=_cacd ._dacf [len (_cacd ._dacf )-1];
_bgaff ._cffag +=_geeae ;_bgaff ._cffag =_f .NFKC .String (_bgaff ._cffag );};func (_gegc rulingList )merge ()*ruling {_aacc :=_gegc [0]._ebfg ;_faeeb :=_gegc [0]._ffebg ;_gggbe :=_gegc [0]._ceba ;for _ ,_fcced :=range _gegc [1:]{_aacc +=_fcced ._ebfg ;
if _fcced ._ffebg < _faeeb {_faeeb =_fcced ._ffebg ;};if _fcced ._ceba > _gggbe {_gggbe =_fcced ._ceba ;};};_eecg :=&ruling {_ccffc :_gegc [0]._ccffc ,_cagbg :_gegc [0]._cagbg ,Color :_gegc [0].Color ,_ebfg :_aacc /float64 (len (_gegc )),_ffebg :_faeeb ,_ceba :_gggbe };
if _dgbgg {_d .Log .Info ("\u006de\u0072g\u0065\u003a\u0020\u0025\u0032d\u0020\u0076e\u0063\u0073\u0020\u0025\u0073",len (_gegc ),_eecg );for _daefbb ,_gage :=range _gegc {_dcf .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0073\u000a",_daefbb ,_gage );
};};return _eecg ;};type shapesState struct{_bag _ccd .Matrix ;_acbg _ccd .Matrix ;_bfbe []*subpath ;_ebbb bool ;_ggaa _ccd .Point ;_daac *textObject ;};type list struct{_fbcb []*textLine ;_fffdc string ;_gbcb []*list ;_ggdc string ;};func (_cfabb *PageText )computeViews (){if _cfabb ._beee ._cbdb {_cfabb ._gaca =_cfabb .getText ();
return ;};_aebb :=_cfabb .getParagraphs ();_bdag :=new (_dg .Buffer );_aebb .writeText (_bdag );_cfabb ._gaca =_bdag .String ();_cfabb ._beef =_aebb .toTextMarks ();_cfabb ._dagf =_aebb .tables ();if _fdea {_d .Log .Info ("\u0063\u006f\u006dpu\u0074\u0065\u0056\u0069\u0065\u0077\u0073\u003a\u0020\u0074\u0061\u0062\u006c\u0065\u0073\u003d\u0025\u0064",len (_cfabb ._dagf ));
};};

// NewWithOptions an Extractor instance for extracting content from the input PDF page with options.
func NewWithOptions (page *_cg .PdfPage ,options *Options )(*Extractor ,error ){const _fad ="\u0065x\u0074\u0072\u0061\u0063\u0074\u006f\u0072\u002e\u004e\u0065\u0077W\u0069\u0074\u0068\u004f\u0070\u0074\u0069\u006f\u006e\u0073";_bec ,_aag :=page .GetAllContentStreams ();
if _aag !=nil {return nil ,_aag ;};var _dgb *_cg .StructTreeRoot ;_ed ,_eeg :=page .GetStructTreeRoot ();if !_eeg {_d .Log .Debug ("T\u0068\u0065\u0020\u0070\u0064\u0066\u0020\u0064\u006f\u0063\u0075\u006d\u0065\u006e\u0074\u0020\u0069\u0073\u0020\u006e\u006f\u0074\u0020\u0074\u0061\u0067g\u0065d\u002e\u0020\u0053\u0074r\u0075\u0063t\u0054\u0072\u0065\u0065\u0052\u006f\u006f\u0074\u0020\u0064\u006f\u0065\u0073\u006e\u0027\u0074\u0020\u0065\u0078\u0069\u0073\u0074\u002e");
}else {_dgb ,_aag =_cg .NewStructTreeRootFromPdfObject (*_ed );if _aag !=nil {return nil ,_dcf .Errorf ("\u0065\u0072\u0072or\u0020\u006c\u006f\u0061\u0064\u0069\u006e\u0067\u0020s\u0074r\u0075c\u0074 \u0074\u0072\u0065\u0065\u0020\u0072\u006f\u006f\u0074\u003a\u0020\u0025\u0076",_aag );
};};_dbdc :=page .GetContainingPdfObject ();_ab ,_aag :=page .GetMediaBox ();if _aag !=nil {return nil ,_dcf .Errorf ("\u0065\u0078\u0074r\u0061\u0063\u0074\u006fr\u0020\u0072\u0065\u0071\u0075\u0069\u0072e\u0073\u0020\u006d\u0065\u0064\u0069\u0061\u0042\u006f\u0078\u002e\u0020\u0025\u0076",_aag );
};_fgf :=&Extractor {_bce :_bec ,_cga :page .Resources ,_eaf :*_ab ,_da :page .CropBox ,_bac :page .GetStructParentsKey (),_ega :map[string ]fontEntry {},_eae :map[string ]textResult {},_eag :map[string ]textResult {},_dbd :options ,_adb :_dgb ,_bf :_dbdc };
if _fgf ._eaf .Llx > _fgf ._eaf .Urx {_d .Log .Info ("\u004d\u0065\u0064\u0069\u0061\u0042o\u0078\u0020\u0068\u0061\u0073\u0020\u0058\u0020\u0063\u006f\u006f\u0072\u0064\u0069\u006e\u0061\u0074\u0065\u0073\u0020r\u0065\u0076\u0065\u0072\u0073\u0065\u0064\u002e\u0020\u0025\u002e\u0032\u0066\u0020F\u0069x\u0069\u006e\u0067\u002e",_fgf ._eaf );
_fgf ._eaf .Llx ,_fgf ._eaf .Urx =_fgf ._eaf .Urx ,_fgf ._eaf .Llx ;};if _fgf ._eaf .Lly > _fgf ._eaf .Ury {_d .Log .Info ("\u004d\u0065\u0064\u0069\u0061\u0042o\u0078\u0020\u0068\u0061\u0073\u0020\u0059\u0020\u0063\u006f\u006f\u0072\u0064\u0069\u006e\u0061\u0074\u0065\u0073\u0020r\u0065\u0076\u0065\u0072\u0073\u0065\u0064\u002e\u0020\u0025\u002e\u0032\u0066\u0020F\u0069x\u0069\u006e\u0067\u002e",_fgf ._eaf );
_fgf ._eaf .Lly ,_fgf ._eaf .Ury =_fgf ._eaf .Ury ,_fgf ._eaf .Lly ;};if _fgf ._dbd !=nil {if _fgf ._dbd .IncludeAnnotations {_fgf ._ggcb ,_aag =page .GetAnnotations ();if _aag !=nil {_d .Log .Debug ("\u0045\u0072r\u006f\u0072\u0020\u0067\u0065\u0074\u0074\u0069\u006e\u0067\u0020\u0061\u006e\u006e\u006f\u0074\u0061\u0074\u0069\u006f\u006e\u0073: \u0025\u0076",_aag );
};};};_a .TrackUse (_fad );return _fgf ,nil ;};func (_fga paraList )sortTopoOrder (){_ageg :=_fga .topoOrder ();_fga .reorder (_ageg )};func _fbffb (_ffac map[int ][]float64 )string {_caecg :=_geeab (_ffac );_feacd :=make ([]string ,len (_ffac ));for _cfgba ,_bfccb :=range _caecg {_feacd [_cfgba ]=_dcf .Sprintf ("\u0025\u0064\u003a\u0020\u0025\u002e\u0032\u0066",_bfccb ,_ffac [_bfccb ]);
};return _dcf .Sprintf ("\u007b\u0025\u0073\u007d",_bc .Join (_feacd ,"\u002c\u0020"));};type gridTiling struct{_cg .PdfRectangle ;_dfcg []float64 ;_dgfd []float64 ;_dgced map[float64 ]map[float64 ]gridTile ;};func (_aafd *textTable )bbox ()_cg .PdfRectangle {return _aafd .PdfRectangle };
func _gebaf (_gccd ,_febe _g .Image )_g .Image {_bcafge ,_baddb :=_febe .Bounds ().Size (),_gccd .Bounds ().Size ();_cdafd ,_cacce :=_bcafge .X ,_bcafge .Y ;if _baddb .X > _cdafd {_cdafd =_baddb .X ;};if _baddb .Y > _cacce {_cacce =_baddb .Y ;};_gfdd :=_g .Rect (0,0,_cdafd ,_cacce );
if _bcafge .X !=_cdafd ||_bcafge .Y !=_cacce {_ffeg :=_g .NewRGBA (_gfdd );_c .BiLinear .Scale (_ffeg ,_gfdd ,_gccd ,_febe .Bounds (),_c .Over ,nil );_febe =_ffeg ;};if _baddb .X !=_cdafd ||_baddb .Y !=_cacce {_afdfe :=_g .NewRGBA (_gfdd );_c .BiLinear .Scale (_afdfe ,_gfdd ,_gccd ,_gccd .Bounds (),_c .Over ,nil );
_gccd =_afdfe ;};_dgfbg :=_g .NewRGBA (_gfdd );_c .DrawMask (_dgfbg ,_gfdd ,_gccd ,_g .Point {},_febe ,_g .Point {},_c .Over );return _dgfbg ;};func _fcbc (_bdbcc ,_ffaa _cg .PdfRectangle )bool {return _bdbcc .Llx <=_ffaa .Llx &&_ffaa .Urx <=_bdbcc .Urx &&_bdbcc .Lly <=_ffaa .Lly &&_ffaa .Ury <=_bdbcc .Ury ;
};func _ggb (_bgb string ,_ggg string )([][]int ,error ){_bfb ,_ffcc :=_ff .Compile (_bgb );if _ffcc !=nil {return nil ,_dcf .Errorf ("\u0065\u0072\u0072\u006f\u0072\u0020c\u006f\u006d\u0070\u0069\u006c\u0069\u006e\u0067\u0020\u0072\u0065\u0067\u0065x\u0020\u0070\u0061\u0074\u0074\u0065\u0072n\u003a\u0020\u0025\u0077",_ffcc );
};_fcce :=_bfb .FindAllStringIndex (_ggg ,-1);return _fcce ,nil ;};func (_gafb *wordBag )depthIndexes ()[]int {if len (_gafb ._aade )==0{return nil ;};_gaed :=make ([]int ,len (_gafb ._aade ));_egc :=0;for _fffe :=range _gafb ._aade {_gaed [_egc ]=_fffe ;
_egc ++;};_cc .Ints (_gaed );return _gaed ;};func (_fdfdf paraList )inTile (_gcddb gridTile )paraList {var _afefg paraList ;for _ ,_acgd :=range _fdfdf {if _gcddb .contains (_acgd .PdfRectangle ){_afefg =append (_afefg ,_acgd );};};if _fdea {_dcf .Printf ("\u0020 \u0020\u0069\u006e\u0054i\u006c\u0065\u003a\u0020\u0020%\u0073 \u0069n\u0073\u0069\u0064\u0065\u003d\u0025\u0064\n",_gcddb ,len (_afefg ));
for _egfdf ,_ggccg :=range _afefg {_dcf .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0073\u000a",_egfdf ,_ggccg );};_dcf .Println ("");};return _afefg ;};func _geddd (_feeca ,_gbbca *textPara )bool {return _gfbb (_feeca ._bfc ,_gbbca ._bfc )};func (_bfaf gridTiling )complete ()bool {for _ ,_beefa :=range _bfaf ._dgced {for _ ,_ccaab :=range _beefa {if !_ccaab .complete (){return false ;
};};};return true ;};func _acab (_fbedbg ,_eagca ,_gfgbb ,_ggaef *textPara )*textTable {_badeg :=&textTable {_ffcde :2,_agefc :2,_adaa :make (map[uint64 ]*textPara ,4)};_badeg .put (0,0,_fbedbg );_badeg .put (1,0,_eagca );_badeg .put (0,1,_gfgbb );_badeg .put (1,1,_ggaef );
return _badeg ;};func (_gcdeg *wordBag )text ()string {_fabd :=_gcdeg .allWords ();_baedf :=make ([]string ,len (_fabd ));for _dgbea ,_bfae :=range _fabd {_baedf [_dgbea ]=_bfae ._afaded ;};return _bc .Join (_baedf ,"\u0020");};func _aebda (_bbcdd ,_efdec int )int {if _bbcdd > _efdec {return _bbcdd ;
};return _efdec ;};func (_fggb *textObject )getFillColor ()_dc .Color {return _afeda (_fggb ._gacb .ColorspaceNonStroking ,_fggb ._gacb .ColorNonStroking );};type rectRuling struct{_acfgf rulingKind ;_fgab markKind ;_dc .Color ;_cg .PdfRectangle ;};func _ced (_dfaa *_de .PdfObjectString ,_cgb string ,_cgea *_cg .PdfFont ){_cfcc ,_eff :=_cgea .StringToCharcodeBytes (_cgb );
if _eff !=0{_d .Log .Debug ("\u0057\u0041\u0052\u004e\u003a\u0020\u0073\u006fm\u0065\u0020\u0072un\u0065\u0073\u0020\u0063\u006f\u0075l\u0064\u0020\u006e\u006f\u0074\u0020\u0062\u0065\u0020\u0065\u006e\u0063\u006f\u0064\u0065d\u002e\u000a\u0009\u0025\u0073\u0020\u002d\u003e \u0025\u0076",_cgb ,_cfcc );
};_dgbg :=_de .MakeStringFromBytes (_cfcc );*_dfaa =*_dgbg ;};func (_aeee *subpath )clear (){*_aeee =subpath {}};type textWord struct{_cg .PdfRectangle ;_acgec float64 ;_afaded string ;_dacf []*textMark ;_egca float64 ;_eaaab bool ;};func (_dfadb *textWord )toTextMarks (_eefbe *int )[]TextMark {var _afdga []TextMark ;
for _ ,_cadb :=range _dfadb ._dacf {_afdga =_gdde (_afdga ,_eefbe ,_cadb .ToTextMark ());};return _afdga ;};func (_affgd *textTable )markCells (){for _ddfce :=0;_ddfce < _affgd ._agefc ;_ddfce ++{for _cgbg :=0;_cgbg < _affgd ._ffcde ;_cgbg ++{_faae :=_affgd .get (_cgbg ,_ddfce );
if _faae !=nil {_faae ._eega =true ;};};};};func (_bbe *PageText )getParagraphs ()paraList {var _bcab rulingList ;if _efab {_abbg :=_bcbg (_bbe ._fcgf );_bcab =append (_bcab ,_abbg ...);};if _gdda {_aeaee :=_eedc (_bbe ._cffg );_bcab =append (_bcab ,_aeaee ...);
};_bcab ,_adbg :=_bcab .toTilings ();var _efa paraList ;_cgbdb :=len (_bbe ._beaf );for _bba :=0;_bba < 360&&_cgbdb > 0;_bba +=90{_edgg :=make ([]*textMark ,0,len (_bbe ._beaf )-_cgbdb );for _ ,_dcgf :=range _bbe ._beaf {if _dcgf ._bead ==_bba {_edgg =append (_edgg ,_dcgf );
};};if len (_edgg )> 0{_ggag :=_cgcgb (_edgg ,_bbe ._ddda ,_bcab ,_adbg ,_bbe ._beee ._dcc );_efa =append (_efa ,_ggag ...);_cgbdb -=len (_edgg );};};return _efa ;};func _egba (_gedeg *textLine ,_gfba []*textLine )float64 {var _eggeg float64 =-1;for _ ,_aebbg :=range _gfba {if _aebbg ._abfa > _gedeg ._abfa {if _b .Round (_aebbg .Llx )>=_b .Round (_gedeg .Llx ){_eggeg =_aebbg ._abfa ;
}else {break ;};};};return _eggeg ;};func (_agbc *subpath )close (){if !_dbff (_agbc ._bbff [0],_agbc .last ()){_agbc .add (_agbc ._bbff [0]);};_agbc ._efdb =true ;_agbc .removeDuplicates ();};func (_cbgabf *shapesState )moveTo (_gdg ,_edgc float64 ){_cbgabf ._ebbb =true ;
_cbgabf ._ggaa =_cbgabf .devicePoint (_gdg ,_edgc );if _baffc {_d .Log .Info ("\u006d\u006fv\u0065\u0054\u006f\u003a\u0020\u0025\u002e\u0032\u0066\u002c\u0025\u002e\u0032\u0066\u0020\u0064\u0065\u0076\u0069\u0063\u0065\u003d%.\u0032\u0066",_gdg ,_edgc ,_cbgabf ._ggaa );
};};func (_bdggd *textTable )compositeRowCorridors ()map[int ][]float64 {_fgbc :=make (map[int ][]float64 ,_bdggd ._agefc );if _fdea {_d .Log .Info ("c\u006f\u006d\u0070\u006f\u0073\u0069t\u0065\u0052\u006f\u0077\u0043\u006f\u0072\u0072\u0069d\u006f\u0072\u0073:\u0020h\u003d\u0025\u0064",_bdggd ._agefc );
};for _gdfgf :=1;_gdfgf < _bdggd ._agefc ;_gdfgf ++{var _ffdbd []compositeCell ;for _bbbeb :=0;_bbbeb < _bdggd ._ffcde ;_bbbeb ++{if _cbec ,_dcbf :=_bdggd ._gefa [_egegf (_bbbeb ,_gdfgf )];_dcbf {_ffdbd =append (_ffdbd ,_cbec );};};if len (_ffdbd )==0{continue ;
};_abggee :=_bffcf (_ffdbd );_fgbc [_gdfgf ]=_abggee ;if _fdea {_dcf .Printf ("\u0020\u0020\u0020\u0025\u0032\u0064\u003a\u0020\u00256\u002e\u0032\u0066\u000a",_gdfgf ,_abggee );};};return _fgbc ;};func (_dede *wordBag )scanBand (_bdgcg string ,_ebef *wordBag ,_adcd func (_gbbcd *wordBag ,_daee *textWord )bool ,_acbe ,_fdad ,_fffd float64 ,_ggcbee ,_agba bool )int {_fbaaf :=_ebef ._fdbe ;
var _ffbe map[int ]map[*textWord ]struct{};if !_ggcbee {_ffbe =_dede .makeRemovals ();};_aagdf :=_bacbc *_fbaaf ;_bede :=0;for _ ,_ggfdc :=range _dede .depthBand (_acbe -_aagdf ,_fdad +_aagdf ){if len (_dede ._aade [_ggfdc ])==0{continue ;};for _ ,_dfag :=range _dede ._aade [_ggfdc ]{if !(_acbe -_aagdf <=_dfag ._acgec &&_dfag ._acgec <=_fdad +_aagdf ){continue ;
};if !_adcd (_ebef ,_dfag ){continue ;};_cdace :=2.0*_b .Abs (_dfag ._egca -_ebef ._fdbe )/(_dfag ._egca +_ebef ._fdbe );_addd :=_b .Max (_dfag ._egca /_ebef ._fdbe ,_ebef ._fdbe /_dfag ._egca );_aeba :=_b .Min (_cdace ,_addd );if _fffd > 0&&_aeba > _fffd {continue ;
};if _ebef .blocked (_dfag ){continue ;};if !_ggcbee {_ebef .pullWord (_dfag ,_ggfdc ,_ffbe );};_bede ++;if !_agba {if _dfag ._acgec < _acbe {_acbe =_dfag ._acgec ;};if _dfag ._acgec > _fdad {_fdad =_dfag ._acgec ;};};if _ggcbee {break ;};};};if !_ggcbee {_dede .applyRemovals (_ffbe );
};return _bede ;};

// String returns a human readable description of `path`.
func (_cbde *subpath )String ()string {_gbae :=_cbde ._bbff ;_abgb :=len (_gbae );if _abgb <=5{return _dcf .Sprintf ("\u0025d\u003a\u0020\u0025\u0036\u002e\u0032f",_abgb ,_gbae );};return _dcf .Sprintf ("\u0025d\u003a\u0020\u0025\u0036.\u0032\u0066\u0020\u0025\u0036.\u0032f\u0020.\u002e\u002e\u0020\u0025\u0036\u002e\u0032f",_abgb ,_gbae [0],_gbae [1],_gbae [_abgb -1]);
};func (_gbag *wordBag )empty (_ffgde int )bool {_ ,_gaae :=_gbag ._aade [_ffgde ];return !_gaae };func _agd (_egge ,_gfec _cg .PdfRectangle )(_cg .PdfRectangle ,bool ){if !_bfgbd (_egge ,_gfec ){return _cg .PdfRectangle {},false ;};return _cg .PdfRectangle {Llx :_b .Max (_egge .Llx ,_gfec .Llx ),Urx :_b .Min (_egge .Urx ,_gfec .Urx ),Lly :_b .Max (_egge .Lly ,_gfec .Lly ),Ury :_b .Min (_egge .Ury ,_gfec .Ury )},true ;
};func (_ebacg paraList )yNeighbours (_efadg float64 )map[*textPara ][]int {_ddbc :=make ([]event ,2*len (_ebacg ));if _efadg ==0{for _gfdg ,_ccgac :=range _ebacg {_ddbc [2*_gfdg ]=event {_ccgac .Lly ,true ,_gfdg };_ddbc [2*_gfdg +1]=event {_ccgac .Ury ,false ,_gfdg };
};}else {for _eaag ,_gafg :=range _ebacg {_ddbc [2*_eaag ]=event {_gafg .Lly -_efadg *_gafg .fontsize (),true ,_eaag };_ddbc [2*_eaag +1]=event {_gafg .Ury +_efadg *_gafg .fontsize (),false ,_eaag };};};return _ebacg .eventNeighbours (_ddbc );};type bounded interface{bbox ()_cg .PdfRectangle };
func _aeec (_fdca *textLine )bool {_cgbfd :=true ;_afgd :=-1;for _ ,_gbbe :=range _fdca ._fddcd {for _ ,_abdc :=range _gbbe ._dacf {_fbeg :=_abdc ._debd ;if _afgd ==-1{_afgd =_fbeg ;}else {if _afgd !=_fbeg {_cgbfd =false ;break ;};};};};return _cgbfd ;
};var (_eeb =_eg .New ("\u0074\u0079p\u0065\u0020\u0063h\u0065\u0063\u006b\u0020\u0065\u0072\u0072\u006f\u0072");_cbg =_eg .New ("\u0072\u0061\u006e\u0067\u0065\u0020\u0063\u0068\u0065\u0063\u006b\u0020e\u0072\u0072\u006f\u0072"););

// String returns a description of `w`.
func (_edccc *textWord )String ()string {return _dcf .Sprintf ("\u0025\u002e2\u0066\u0020\u0025\u0036\u002e\u0032\u0066\u0020\u0066\u006f\u006e\u0074\u0073\u0069\u007a\u0065\u003d\u0025\u002e\u0032\u0066\u0020\"%\u0073\u0022",_edccc ._acgec ,_edccc .PdfRectangle ,_edccc ._egca ,_edccc ._afaded );
};func _afeda (_cdagg _cg .PdfColorspace ,_aagbd _cg .PdfColor )_dc .Color {if _cdagg ==nil ||_aagbd ==nil {return _dc .Black ;};_dedf ,_egcec :=_cdagg .ColorToRGB (_aagbd );if _egcec !=nil {_d .Log .Debug ("\u0057\u0041\u0052\u004e\u003a\u0020\u0063\u006fu\u006c\u0064\u0020no\u0074\u0020\u0063\u006f\u006e\u0076e\u0072\u0074\u0020\u0063\u006f\u006c\u006f\u0072\u0020\u0025\u0076\u0020\u0028\u0025\u0076)\u0020\u0074\u006f\u0020\u0052\u0047\u0042\u003a \u0025\u0073",_aagbd ,_cdagg ,_egcec );
return _dc .Black ;};_fcefe ,_fcafg :=_dedf .(*_cg .PdfColorDeviceRGB );if !_fcafg {_d .Log .Debug ("\u0057\u0041\u0052\u004e\u003a\u0020\u0063\u006f\u006e\u0076\u0065\u0072\u0074\u0065\u0064 \u0063\u006f\u006c\u006f\u0072\u0020\u0069\u0073\u0020\u006e\u006f\u0074\u0020i\u006e\u0020\u0074\u0068\u0065\u0020\u0052\u0047\u0042\u0020\u0063\u006flo\u0072\u0073\u0070\u0061\u0063\u0065\u003a\u0020\u0025\u0076",_dedf );
return _dc .Black ;};return _dc .NRGBA {R :uint8 (_fcefe .R ()*255),G :uint8 (_fcefe .G ()*255),B :uint8 (_fcefe .B ()*255),A :uint8 (255)};};type cachedImage struct{_eabcc *_cg .Image ;_cdaf _cg .PdfColorspace ;};

// ToText returns the page text as a single string.
// Deprecated: This function is deprecated and will be removed in a future major version. Please use
// Text() instead.
func (_efc PageText )ToText ()string {return _efc .Text ()};func (_fdbbb gridTiling )log (_bcge string ){if !_cebb {return ;};_d .Log .Info ("\u0074i\u006ci\u006e\u0067\u003a\u0020\u0025d\u0020\u0078 \u0025\u0064\u0020\u0025\u0071",len (_fdbbb ._dfcg ),len (_fdbbb ._dgfd ),_bcge );
_dcf .Printf ("\u0020\u0020\u0020l\u006c\u0078\u003d\u0025\u002e\u0032\u0066\u000a",_fdbbb ._dfcg );_dcf .Printf ("\u0020\u0020\u0020l\u006c\u0079\u003d\u0025\u002e\u0032\u0066\u000a",_fdbbb ._dgfd );for _egfe ,_bddb :=range _fdbbb ._dgfd {_bggfe ,_gbac :=_fdbbb ._dgced [_bddb ];
if !_gbac {continue ;};_dcf .Printf ("%\u0034\u0064\u003a\u0020\u0025\u0036\u002e\u0032\u0066\u000a",_egfe ,_bddb );for _cecdc ,_aeef :=range _fdbbb ._dfcg {_aebd ,_bcff :=_bggfe [_aeef ];if !_bcff {continue ;};_dcf .Printf ("\u0025\u0038\u0064\u003a\u0020\u0025\u0073\u000a",_cecdc ,_aebd .String ());
};};};func (_fce *imageExtractContext )extractInlineImage (_gdf *_ef .ContentStreamInlineImage ,_fbef _ef .GraphicsState ,_eda *_cg .PdfPageResources )error {_gdfg ,_edfa :=_gdf .ToImage (_eda );if _edfa !=nil {return _edfa ;};_ceg ,_edfa :=_gdf .GetColorSpace (_eda );
if _edfa !=nil {return _edfa ;};if _ceg ==nil {_ceg =_cg .NewPdfColorspaceDeviceGray ();};_bde ,_edfa :=_ceg .ImageToRGB (*_gdfg );if _edfa !=nil {return _edfa ;};_ege :=ImageMark {Image :&_bde ,Width :_fbef .CTM .ScalingFactorX (),Height :_fbef .CTM .ScalingFactorY (),Angle :_fbef .CTM .Angle ()};
_ege .X ,_ege .Y =_fbef .CTM .Translation ();_fce ._daf =append (_fce ._daf ,_ege );_fce ._cdb ++;return nil ;};func (_dbebc *textMark )inDiacriticArea (_cecd *textMark )bool {_eedf :=_dbebc .Llx -_cecd .Llx ;_abdbc :=_dbebc .Urx -_cecd .Urx ;_aebc :=_dbebc .Lly -_cecd .Lly ;
return _b .Abs (_eedf +_abdbc )< _dbebc .Width ()*_cabd &&_b .Abs (_aebc )< _dbebc .Height ()*_cabd ;};func _ddgf (_bdfd bounded )float64 {return -_bdfd .bbox ().Lly };func (_aaage rulingList )sort (){_cc .Slice (_aaage ,_aaage .comp )};

// Editor represents a document editor object
type Editor struct{_adee *_cg .PdfReader };func (_dcfb *textObject )setTextLeading (_aedg float64 ){if _dcfb ==nil {return ;};_dcfb ._dbcc ._dcge =_aedg ;};func _aagag (_cgfda map[int ][]float64 ){if len (_cgfda )<=1{return ;};_ceaff :=_geeab (_cgfda );
if _fdea {_d .Log .Info ("\u0066i\u0078C\u0065\u006c\u006c\u0073\u003a \u006b\u0065y\u0073\u003d\u0025\u002b\u0076",_ceaff );};var _bcef ,_gceef int ;for _bcef ,_gceef =range _ceaff {if _cgfda [_gceef ]!=nil {break ;};};for _eadgg ,_eafcb :=range _ceaff [_bcef :]{_gbfg :=_cgfda [_eafcb ];
if _gbfg ==nil {continue ;};if _fdea {_dcf .Printf ("\u0025\u0034\u0064\u003a\u0020\u006b\u0030\u003d\u0025\u0064\u0020\u006b1\u003d\u0025\u0064\u000a",_bcef +_eadgg ,_gceef ,_eafcb );};_cebec :=_cgfda [_eafcb ];if _cebec [len (_cebec )-1]> _gbfg [0]{_cebec [len (_cebec )-1]=_gbfg [0];
_cgfda [_gceef ]=_cebec ;};_gceef =_eafcb ;};};func (_baff *Editor )getMatches (_deea string ,_adbc []int )(map[int ]Match ,map[int ][]*TextMarkArray ,error ){_add :=map[int ]Match {};_dfe :=map[int ][]*TextMarkArray {};for _ ,_ebdg :=range _adbc {_dfce ,_bdaf :=_baff ._adee .GetPage (_ebdg );
if _bdaf !=nil {return nil ,nil ,_bdaf ;};_fee ,_bdaf :=New (_dfce );if _bdaf !=nil {return nil ,nil ,_bdaf ;};_edae ,_ ,_ ,_bdaf :=_fee .ExtractPageText ();if _bdaf !=nil {return nil ,nil ,_bdaf ;};_fffg :=_edae .Text ();_cgcf ,_bdaf :=_ggb (_deea ,_fffg );
if _bdaf !=nil {return nil ,nil ,_bdaf ;};if len (_cgcf )==0{_d .Log .Info ("\u004e\u006f\u0020\u006d\u0061\u0074\u0063\u0068\u0020\u0066\u006f\u0075\u006e\u0064\u0020f\u006fr\u0020\u0025\u0073\u0020\u006f\u006e\u0020\u0070\u0061\u0067\u0065\u0020\u0025\u0064",_deea ,_ebdg );
};_gcac :=_edae .Marks ();_agc :=[]Box {};for _ ,_egab :=range _cgcf {_ ,_ccag ,_dfcef :=_abdd (_egab ,_gcac ,_deea );if _dfcef !=nil {return nil ,nil ,_dfcef ;};_agc =append (_agc ,_ccag );};_abc :=Match {Pattern :_deea ,Indexes :_cgcf ,Locations :_agc };
_add [_ebdg ]=_abc ;};return _add ,_dfe ,nil ;};

// Text returns the text content of the `bulletLists`.
func (_dcba *lists )Text ()string {_dgede :=&_bc .Builder {};for _ ,_dedeb :=range *_dcba {_ccccb :=_dedeb .Text ();_dgede .WriteString (_ccccb );};return _dgede .String ();};

// ExtractFonts returns all font information from the page extractor, including
// font name, font type, the raw data of the embedded font file (if embedded), font descriptor and more.
//
// The argument `previousPageFonts` is used when trying to build a complete font catalog for multiple pages or the entire document.
// The entries from `previousPageFonts` are added to the returned result unless already included in the page, i.e. no duplicate entries.
//
// NOTE: If previousPageFonts is nil, all fonts from the page will be returned. Use it when building up a full list of fonts for a document or page range.
func (_ebg *Extractor )ExtractFonts (previousPageFonts *PageFonts )(*PageFonts ,error ){_cde :=PageFonts {};_cbf :=_cde .extractPageResourcesToFont (_ebg ._cga );if _cbf !=nil {return nil ,_cbf ;};if previousPageFonts !=nil {for _ ,_gfe :=range previousPageFonts .Fonts {if !_fcf (_cde .Fonts ,_gfe .FontName ){_cde .Fonts =append (_cde .Fonts ,_gfe );
};};};return &PageFonts {Fonts :_cde .Fonts },nil ;};func _eade (_faeda _cg .PdfRectangle )textState {return textState {_ageb :100,_cgfb :RenderModeFill ,_aaadc :_faeda };};func (_bgce *shapesState )fill (_aeaf *[]pathSection ){_ggbgc :=pathSection {_gccb :_bgce ._bfbe ,Color :_bgce ._daac .getFillColor ()};
*_aeaf =append (*_aeaf ,_ggbgc );if _gagf {_bbca :=_ggbgc .bbox ();_dcf .Printf ("\u0020 \u0020\u0020\u0046\u0049\u004c\u004c\u003a %\u0032\u0064\u0020\u0066\u0069\u006c\u006c\u0073\u0020\u0028\u0025\u0064\u0020\u006ee\u0077\u0029 \u0073\u0073\u003d%\u0073\u0020\u0063\u006f\u006c\u006f\u0072\u003d\u0025\u0033\u0076\u0020\u0025\u0036\u002e\u0032f\u003d\u00256.\u0032\u0066\u0078%\u0036\u002e\u0032\u0066\u000a",len (*_aeaf ),len (_ggbgc ._gccb ),_bgce ,_ggbgc .Color ,_bbca ,_bbca .Width (),_bbca .Height ());
if _dgff {for _deac ,_dddad :=range _ggbgc ._gccb {_dcf .Printf ("\u0025\u0038\u0064\u003a\u0020\u0025\u0073\u000a",_deac ,_dddad );if _deac ==10{break ;};};};};};func (_eafce *textTable )emptyCompositeColumn (_bbbc int )bool {for _bfca :=0;_bfca < _eafce ._agefc ;
_bfca ++{if _gbgedb ,_ebcd :=_eafce ._gefa [_egegf (_bbbc ,_bfca )];_ebcd {if len (_gbgedb .paraList )> 0{return false ;};};};return true ;};func (_bdfe *wordBag )getDepthIdx (_fbde float64 )int {_dgcb :=_bdfe .depthIndexes ();_bfdf :=_edac (_fbde );if _bfdf < _dgcb [0]{return _dgcb [0];
};if _bfdf > _dgcb [len (_dgcb )-1]{return _dgcb [len (_dgcb )-1];};return _bfdf ;};func (_dbebe paraList )findTables (_bafg []gridTiling )[]*textTable {_dbebe .addNeighbours ();_cc .Slice (_dbebe ,func (_cbbfd ,_ddgd int )bool {return _eegb (_dbebe [_cbbfd ],_dbebe [_ddgd ])< 0});
var _eeda []*textTable ;if _fgcfd {_bgafb :=_dbebe .findGridTables (_bafg );_eeda =append (_eeda ,_bgafb ...);};if _ddec {_ffdcb :=_dbebe .findTextTables ();_eeda =append (_eeda ,_ffdcb ...);};return _eeda ;};