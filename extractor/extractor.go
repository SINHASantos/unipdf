//
// Copyright 2020 FoxyUtils ehf. All rights reserved.
//
// This is a commercial product and requires a license to operate.
// A trial license can be obtained at https://unidoc.io
//
// DO NOT EDIT: generated by unitwist Go source code obfuscator.
//
// Use of this source code is governed by the UniDoc End User License Agreement
// terms that can be accessed at https://unidoc.io/eula/

// Package extractor is used for quickly extracting PDF content through a simple interface.
// Currently offers functionality for extracting textual content.
package extractor ;import (_gf "bytes";_ed "errors";_cf "fmt";_fc "github.com/unidoc/unipdf/v3/common";_edb "github.com/unidoc/unipdf/v3/contentstream";_ad "github.com/unidoc/unipdf/v3/core";_db "github.com/unidoc/unipdf/v3/internal/license";_edc "github.com/unidoc/unipdf/v3/internal/textencoding";
_cg "github.com/unidoc/unipdf/v3/internal/transform";_ea "github.com/unidoc/unipdf/v3/model";_gd "golang.org/x/image/draw";_gff "golang.org/x/text/unicode/norm";_bc "image";_d "image/color";_e "io";_c "log";_ag "math";_ge "reflect";_b "regexp";_ba "sort";
_eb "strings";_g "unicode";_a "unicode/utf8";);

// Elements returns the TextMarks in `ma`.
func (_cbde *TextMarkArray )Elements ()[]TextMark {return _cbde ._bag };func _dfcae (_agbe float64 )float64 {return _cbdf *_ag .Round (_agbe /_cbdf )};

// String returns a string describing the current state of the textState stack.
func (_dfccf *stateStack )String ()string {_dfdf :=[]string {_cf .Sprintf ("\u002d\u002d\u002d\u002d f\u006f\u006e\u0074\u0020\u0073\u0074\u0061\u0063\u006b\u003a\u0020\u0025\u0064",len (*_dfccf ))};for _acdc ,_fcc :=range *_dfccf {_fcae :="\u003c\u006e\u0069l\u003e";
if _fcc !=nil {_fcae =_fcc .String ();};_dfdf =append (_dfdf ,_cf .Sprintf ("\u0009\u0025\u0032\u0064\u003a\u0020\u0025\u0073",_acdc ,_fcae ));};return _eb .Join (_dfdf ,"\u000a");};func (_fbccd paraList )inTile (_daaga gridTile )paraList {var _babd paraList ;
for _ ,_ccga :=range _fbccd {if _daaga .contains (_ccga .PdfRectangle ){_babd =append (_babd ,_ccga );};};if _dgda {_cf .Printf ("\u0020 \u0020\u0069\u006e\u0054i\u006c\u0065\u003a\u0020\u0020%\u0073 \u0069n\u0073\u0069\u0064\u0065\u003d\u0025\u0064\n",_daaga ,len (_babd ));
for _afcgd ,_cbbeae :=range _babd {_cf .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0073\u000a",_afcgd ,_cbbeae );};_cf .Println ("");};return _babd ;};func _gdda (_cgbbg []*textWord ,_dead float64 ,_daga ,_feeb rulingList )*wordBag {_badff :=_caff (_cgbbg [0],_dead ,_daga ,_feeb );
for _ ,_aedg :=range _cgbbg [1:]{_eadf :=_ebeg (_aedg ._bbcgb );_badff ._dfga [_eadf ]=append (_badff ._dfga [_eadf ],_aedg );_badff .PdfRectangle =_fgde (_badff .PdfRectangle ,_aedg .PdfRectangle );};_badff .sort ();return _badff ;};func (_babe *textObject )moveText (_bgab ,_abf float64 ){_babe .moveLP (_bgab ,_abf )};
type rulingList []*ruling ;func (_gdffc paraList )llyOrdering ()[]int {_bagcd :=make ([]int ,len (_gdffc ));for _bccfb :=range _gdffc {_bagcd [_bccfb ]=_bccfb ;};_ba .SliceStable (_bagcd ,func (_bedc ,_gcgf int )bool {_ggcfd ,_cadbf :=_bagcd [_bedc ],_bagcd [_gcgf ];
return _gdffc [_ggcfd ].Lly < _gdffc [_cadbf ].Lly ;});return _bagcd ;};

// String returns a string describing `tm`.
func (_ffd TextMark )String ()string {_daee :=_ffd .BBox ;var _cgff string ;if _ffd .Font !=nil {_cgff =_ffd .Font .String ();if len (_cgff )> 50{_cgff =_cgff [:50]+"\u002e\u002e\u002e";};};var _aadc string ;if _ffd .Meta {_aadc ="\u0020\u002a\u004d\u002a";
};return _cf .Sprintf ("\u007b\u0054\u0065\u0078t\u004d\u0061\u0072\u006b\u003a\u0020\u0025\u0064\u0020%\u0071\u003d\u0025\u0030\u0032\u0078\u0020\u0028\u0025\u0036\u002e\u0032\u0066\u002c\u0020\u0025\u0036\u002e2\u0066\u0029\u0020\u0028\u00256\u002e\u0032\u0066\u002c\u0020\u0025\u0036\u002e\u0032\u0066\u0029\u0020\u0025\u0073\u0025\u0073\u007d",_ffd .Offset ,_ffd .Text ,[]rune (_ffd .Text ),_daee .Llx ,_daee .Lly ,_daee .Urx ,_daee .Ury ,_cgff ,_aadc );
};func (_egbg *textObject )getStrokeColor ()_d .Color {return _bdeb (_egbg ._ggda .ColorspaceStroking ,_egbg ._ggda .ColorStroking );};func (_dfcd *textObject )getFillColor ()_d .Color {return _bdeb (_dfcd ._ggda .ColorspaceNonStroking ,_dfcd ._ggda .ColorNonStroking );
};

// String returns a string describing `ma`.
func (_abce TextMarkArray )String ()string {_bgda :=len (_abce ._bag );if _bgda ==0{return "\u0045\u004d\u0050T\u0059";};_cffb :=_abce ._bag [0];_gefg :=_abce ._bag [_bgda -1];return _cf .Sprintf ("\u007b\u0054\u0045\u0058\u0054\u004d\u0041\u0052K\u0041\u0052\u0052AY\u003a\u0020\u0025\u0064\u0020\u0065l\u0065\u006d\u0065\u006e\u0074\u0073\u000a\u0009\u0066\u0069\u0072\u0073\u0074\u003d\u0025s\u000a\u0009\u0020\u006c\u0061\u0073\u0074\u003d%\u0073\u007d",_bgda ,_cffb ,_gefg );
};func (_ecdd rulingList )bbox ()_ea .PdfRectangle {var _faaef _ea .PdfRectangle ;if len (_ecdd )==0{_fc .Log .Error ("r\u0075\u006c\u0069\u006e\u0067\u004ci\u0073\u0074\u002e\u0062\u0062\u006f\u0078\u003a\u0020n\u006f\u0020\u0072u\u006ci\u006e\u0067\u0073");
return _ea .PdfRectangle {};};if _ecdd [0]._gddac ==_ecacd {_faaef .Llx ,_faaef .Urx =_ecdd .secMinMax ();_faaef .Lly ,_faaef .Ury =_ecdd .primMinMax ();}else {_faaef .Llx ,_faaef .Urx =_ecdd .primMinMax ();_faaef .Lly ,_faaef .Ury =_ecdd .secMinMax ();
};return _faaef ;};func _bdfe (_aggd _ea .PdfRectangle )rulingKind {_accfb :=_aggd .Width ();_gacg :=_aggd .Height ();if _accfb > _gacg {if _accfb >=_bdca {return _ecacd ;};}else {if _gacg >=_bdca {return _bgcg ;};};return _badgc ;};func (_edcfc *wordBag )removeWord (_gadg *textWord ,_feac int ){_aadg :=_edcfc ._dfga [_feac ];
_aadg =_aaade (_aadg ,_gadg );if len (_aadg )==0{delete (_edcfc ._dfga ,_feac );}else {_edcfc ._dfga [_feac ]=_aadg ;};};func (_eefc *textWord )addDiacritic (_eegce string ){_dbab :=_eefc ._eccf [len (_eefc ._eccf )-1];_dbab ._cddae +=_eegce ;_dbab ._cddae =_gff .NFKC .String (_dbab ._cddae );
};func _ega (_cb []string ,_fd int ,_ebd int ,_be string ){for _bf :=_fd ;_bf < _ebd ;_bf ++{_cb [_bf ]=_be ;};};func (_afce rulingList )blocks (_bbbdb ,_cedb *ruling )bool {if _bbbdb ._fddc > _cedb ._begad ||_cedb ._fddc > _bbbdb ._begad {return false ;
};_egcfe :=_ag .Max (_bbbdb ._fddc ,_cedb ._fddc );_fbcg :=_ag .Min (_bbbdb ._begad ,_cedb ._begad );if _bbbdb ._cafa > _cedb ._cafa {_bbbdb ,_cedb =_cedb ,_bbbdb ;};for _ ,_dfb :=range _afce {if _bbbdb ._cafa <=_dfb ._cafa +_ggf &&_dfb ._cafa <=_cedb ._cafa +_ggf &&_dfb ._fddc <=_fbcg &&_egcfe <=_dfb ._begad {return true ;
};};return false ;};func (_ebff *wordBag )sort (){for _ ,_cfccf :=range _ebff ._dfga {_ba .Slice (_cfccf ,func (_fab ,_eae int )bool {return _cgfd (_cfccf [_fab ],_cfccf [_eae ])< 0});};};

// Text returns the extracted page text.
func (_aaaf PageText )Text ()string {return _aaaf ._cdb };func (_gbec paraList )sortTopoOrder (){_cbfbc :=_gbec .topoOrder ();_gbec .reorder (_cbfbc )};func _fccfe (_bdafb []*textLine ){_ba .Slice (_bdafb ,func (_cgcca ,_agddf int )bool {_bgge ,_debc :=_bdafb [_cgcca ],_bdafb [_agddf ];
return _bgge ._fbgb < _debc ._fbgb ;});};func (_ddab paraList )reorder (_dbbac []int ){_bedb :=make (paraList ,len (_ddab ));for _bage ,_fgfg :=range _dbbac {_bedb [_bage ]=_ddab [_fgfg ];};copy (_ddab ,_bedb );};func (_ffbb *shapesState )moveTo (_dbff ,_bcdc float64 ){_ffbb ._cdceb =true ;
_ffbb ._efc =_ffbb .devicePoint (_dbff ,_bcdc );if _dfcf {_fc .Log .Info ("\u006d\u006fv\u0065\u0054\u006f\u003a\u0020\u0025\u002e\u0032\u0066\u002c\u0025\u002e\u0032\u0066\u0020\u0064\u0065\u0076\u0069\u0063\u0065\u003d%.\u0032\u0066",_dbff ,_bcdc ,_ffbb ._efc );
};};func (_bcee *textObject )setCharSpacing (_gad float64 ){if _bcee ==nil {return ;};_bcee ._abcg ._gfc =_gad ;if _fdaf {_fc .Log .Info ("\u0073\u0065t\u0043\u0068\u0061\u0072\u0053\u0070\u0061\u0063\u0069\u006e\u0067\u003a\u0020\u0025\u002e\u0032\u0066\u0020\u0073\u0074\u0061\u0074e=\u0025\u0073",_gad ,_bcee ._abcg .String ());
};};func _daceb (_ecgfc _ea .PdfRectangle )*ruling {return &ruling {_gddac :_ecacd ,_cafa :_ecgfc .Ury ,_fddc :_ecgfc .Llx ,_begad :_ecgfc .Urx };};func (_afaf *textObject )nextLine (){_afaf .moveLP (0,-_afaf ._abcg ._acge )};

// GetContentStreamOps returns the contentStreamOps field of `pt`.
func (_gdgb *PageText )GetContentStreamOps ()*_edb .ContentStreamOperations {return _gdgb ._bbdaa };func _bdacfc (_dbcgf *textLine ,_eaca []*textLine ,_babef []float64 ,_geca ,_faef float64 )[]*textLine {_gdcc :=[]*textLine {};for _ ,_edde :=range _eaca {if _edde ._fbgb >=_geca {if _faef !=-1&&_edde ._fbgb < _faef {if _edde .text ()!=_dbcgf .text (){if _ag .Round (_edde .Llx )< _ag .Round (_dbcgf .Llx ){break ;
};_gdcc =append (_gdcc ,_edde );};}else if _faef ==-1{if _edde ._fbgb ==_dbcgf ._fbgb {if _edde .text ()!=_dbcgf .text (){_gdcc =append (_gdcc ,_edde );};continue ;};_dedd :=_bfgc (_dbcgf ,_eaca ,_babef );if _dedd !=-1&&_edde ._fbgb <=_dedd {_gdcc =append (_gdcc ,_edde );
};};};};return _gdcc ;};func (_gfgb *textPara )getListLines ()[]*textLine {var _bfdb []*textLine ;_babee :=_fbgg (_gfgb ._cebdg );for _ ,_dgcge :=range _gfgb ._cebdg {_ffff :=_dgcge ._bbada [0]._cfdag [0];if _afbda (_ffff ){_bfdb =append (_bfdb ,_dgcge );
};};_bfdb =append (_bfdb ,_babee ...);return _bfdb ;};func (_bbfc *textLine )text ()string {var _dfce []string ;for _ ,_gaead :=range _bbfc ._bbada {if _gaead ._edfc {_dfce =append (_dfce ,"\u0020");};_dfce =append (_dfce ,_gaead ._cfdag );};_ffgb :=_eb .Join (_dfce ,"");
_eefg :=_fcg ([]rune (_ffgb ));return _eefg ._df ;};func _cgdb (_begfec ,_dfeb _cg .Point )bool {return _begfec .X ==_dfeb .X &&_begfec .Y ==_dfeb .Y };

// TextTable represents a table.
// Cells are ordered top-to-bottom, left-to-right.
// Cells[y] is the (0-offset) y'th row in the table.
// Cells[y][x] is the (0-offset) x'th column in the table.
type TextTable struct{_ea .PdfRectangle ;W ,H int ;Cells [][]TableCell ;};const (_abadg =1.0e-6;_cbdf =1.0e-4;_afdc =10;_bcec =6;_fbac =0.5;_begea =0.12;_ebegf =0.19;_fgee =0.04;_aeaf =0.04;_gafdf =1.0;_cfga =0.04;_bafa =0.4;_fgda =0.7;_gbbb =1.0;_daag =0.1;
_ggbf =1.4;_gbce =0.46;_fff =0.02;_cedc =0.2;_gdcf =0.5;_acgfc =4;_ccada =4.0;_ebgd =6;_fbcb =0.3;_cgbfc =0.01;_gege =0.02;_fcf =2;_adda =2;_adgb =500;_bdca =4.0;_eeef =4.0;_ddeg =0.05;_aacc =0.1;_bbfd =2.0;_ggf =2.0;_begee =1.5;_fecc =3.0;_ceag =0.25;
);func (_bgdc *textLine )toTextMarks (_daed *int )[]TextMark {var _ecff []TextMark ;for _ ,_gdbaa :=range _bgdc ._bbada {if _gdbaa ._edfc {_ecff =_cagg (_ecff ,_daed ,"\u0020");};_bbcc :=_gdbaa .toTextMarks (_daed );_ecff =append (_ecff ,_bbcc ...);};return _ecff ;
};func (_baaa *textPara )writeText (_eaga _e .Writer ){if _baaa ._ebdd ==nil {_baaa .writeCellText (_eaga );return ;};for _gacdb :=0;_gacdb < _baaa ._ebdd ._ebaab ;_gacdb ++{for _gbab :=0;_gbab < _baaa ._ebdd ._agaf ;_gbab ++{_gfba :=_baaa ._ebdd .get (_gbab ,_gacdb );
if _gfba ==nil {_eaga .Write ([]byte ("\u0009"));}else {_fccfe (_gfba ._cebdg );_gfba .writeCellText (_eaga );};_eaga .Write ([]byte ("\u0020"));};if _gacdb < _baaa ._ebdd ._ebaab -1{_eaga .Write ([]byte ("\u000a"));};};};

// ToText returns the page text as a single string.
// Deprecated: This function is deprecated and will be removed in a future major version. Please use
// Text() instead.
func (_dae PageText )ToText ()string {return _dae .Text ()};const (_aadd markKind =iota ;_ccgcb ;_eafad ;_baeg ;);

// RenderMode specifies the text rendering mode (Tmode), which determines whether showing text shall cause
// glyph outlines to be  stroked, filled, used as a clipping boundary, or some combination of the three.
// Stroking, filling, and clipping shall have the same effects for a text object as they do for a path object
// (see 8.5.3, "Path-Painting Operators" and 8.5.4, "Clipping Path Operators").
type RenderMode int ;func (_cbb *shapesState )newSubPath (){_cbb .clearPath ();if _dfcf {_fc .Log .Info ("\u006e\u0065\u0077\u0053\u0075\u0062\u0050\u0061\u0074h\u003a\u0020\u0025\u0073",_cbb );};};func _eedd (_cefg ,_eegg _ea .PdfRectangle )bool {return _cefg .Lly <=_eegg .Ury &&_eegg .Lly <=_cefg .Ury ;
};func (_agea *wordBag )applyRemovals (_aaed map[int ]map[*textWord ]struct{}){for _gaff ,_bdfaa :=range _aaed {if len (_bdfaa )==0{continue ;};_aegce :=_agea ._dfga [_gaff ];_ebdb :=len (_aegce )-len (_bdfaa );if _ebdb ==0{delete (_agea ._dfga ,_gaff );
continue ;};_ecbb :=make ([]*textWord ,_ebdb );_adeg :=0;for _ ,_dgbfb :=range _aegce {if _ ,_acab :=_bdfaa [_dgbfb ];!_acab {_ecbb [_adeg ]=_dgbfb ;_adeg ++;};};_agea ._dfga [_gaff ]=_ecbb ;};};func (_gfg *wordBag )empty (_fdgagb int )bool {_ ,_cadg :=_gfg ._dfga [_fdgagb ];
return !_cadg };func _ggdea (_agac []int )[]int {_fgfeg :=make ([]int ,len (_agac ));for _fcccf ,_gcbab :=range _agac {_fgfeg [len (_agac )-1-_fcccf ]=_gcbab ;};return _fgfeg ;};func (_cbecd rulingList )splitSec ()[]rulingList {_ba .Slice (_cbecd ,func (_bffge ,_gccf int )bool {_eaaag ,_gebe :=_cbecd [_bffge ],_cbecd [_gccf ];
if _eaaag ._fddc !=_gebe ._fddc {return _eaaag ._fddc < _gebe ._fddc ;};return _eaaag ._begad < _gebe ._begad ;});_acccd :=make (map[*ruling ]struct{},len (_cbecd ));_cadcb :=func (_eceac *ruling )rulingList {_fbdb :=rulingList {_eceac };_acccd [_eceac ]=struct{}{};
for _ ,_gdeg :=range _cbecd {if _ ,_fabd :=_acccd [_gdeg ];_fabd {continue ;};for _ ,_baga :=range _fbdb {if _gdeg .alignsSec (_baga ){_fbdb =append (_fbdb ,_gdeg );_acccd [_gdeg ]=struct{}{};break ;};};};return _fbdb ;};_dbefa :=[]rulingList {_cadcb (_cbecd [0])};
for _ ,_fggda :=range _cbecd [1:]{if _ ,_aaea :=_acccd [_fggda ];_aaea {continue ;};_dbefa =append (_dbefa ,_cadcb (_fggda ));};return _dbefa ;};func (_gcbc *textTable )reduce ()*textTable {_aabbgb :=make ([]int ,0,_gcbc ._ebaab );_dbad :=make ([]int ,0,_gcbc ._agaf );
for _efdfc :=0;_efdfc < _gcbc ._ebaab ;_efdfc ++{if !_gcbc .emptyCompositeRow (_efdfc ){_aabbgb =append (_aabbgb ,_efdfc );};};for _beeb :=0;_beeb < _gcbc ._agaf ;_beeb ++{if !_gcbc .emptyCompositeColumn (_beeb ){_dbad =append (_dbad ,_beeb );};};if len (_aabbgb )==_gcbc ._ebaab &&len (_dbad )==_gcbc ._agaf {return _gcbc ;
};_ccdg :=textTable {_agae :_gcbc ._agae ,_agaf :len (_dbad ),_ebaab :len (_aabbgb ),_aaedb :make (map[uint64 ]*textPara ,len (_dbad )*len (_aabbgb ))};if _dgda {_fc .Log .Info ("\u0072\u0065\u0064\u0075ce\u003a\u0020\u0025\u0064\u0078\u0025\u0064\u0020\u002d\u003e\u0020\u0025\u0064\u0078%\u0064",_gcbc ._agaf ,_gcbc ._ebaab ,len (_dbad ),len (_aabbgb ));
_fc .Log .Info ("\u0072\u0065d\u0075\u0063\u0065d\u0043\u006f\u006c\u0073\u003a\u0020\u0025\u002b\u0076",_dbad );_fc .Log .Info ("\u0072\u0065d\u0075\u0063\u0065d\u0052\u006f\u0077\u0073\u003a\u0020\u0025\u002b\u0076",_aabbgb );};for _dfac ,_aadee :=range _aabbgb {for _dfgee ,_abdc :=range _dbad {_agacf ,_dddbg :=_gcbc .getComposite (_abdc ,_aadee );
if _agacf ==nil {continue ;};if _dgda {_cf .Printf ("\u0020 \u0025\u0032\u0064\u002c \u0025\u0032\u0064\u0020\u0028%\u0032d\u002c \u0025\u0032\u0064\u0029\u0020\u0025\u0071\n",_dfgee ,_dfac ,_abdc ,_aadee ,_afbcec (_agacf .merge ().text (),50));};_ccdg .putComposite (_dfgee ,_dfac ,_agacf ,_dddbg );
};};return &_ccdg ;};func (_abfbe paraList )toTextMarks ()[]TextMark {_geffb :=0;var _efac []TextMark ;for _abda ,_bcgb :=range _abfbe {if _bcgb ._cdgcg {continue ;};_eeec :=_bcgb .toTextMarks (&_geffb );_efac =append (_efac ,_eeec ...);if _abda !=len (_abfbe )-1{if _fcbea (_bcgb ,_abfbe [_abda +1]){_efac =_cagg (_efac ,&_geffb ,"\u0020");
}else {_efac =_cagg (_efac ,&_geffb ,"\u000a");_efac =_cagg (_efac ,&_geffb ,"\u000a");};};};_efac =_cagg (_efac ,&_geffb ,"\u000a");_efac =_cagg (_efac ,&_geffb ,"\u000a");return _efac ;};func _ee (_bd []string ,_cfe int ,_bcc string )int {_cd :=_cfe ;
for ;_cd < len (_bd );_cd ++{if _bd [_cd ]!=_bcc {return _cd ;};};return _cd ;};func (_ffe *PageText )getParagraphs ()paraList {var _fbce rulingList ;if _gcaa {_cgbb :=_aegb (_ffe ._efda );_fbce =append (_fbce ,_cgbb ...);};if _bcgf {_acb :=_efae (_ffe ._dfea );
_fbce =append (_fbce ,_acb ...);};_fbce ,_fgff :=_fbce .toTilings ();var _baf paraList ;_aaac :=len (_ffe ._ageb );for _beae :=0;_beae < 360&&_aaac > 0;_beae +=90{_gde :=make ([]*textMark ,0,len (_ffe ._ageb )-_aaac );for _ ,_bcfag :=range _ffe ._ageb {if _bcfag ._dggag ==_beae {_gde =append (_gde ,_bcfag );
};};if len (_gde )> 0{_fbb :=_dbef (_gde ,_ffe ._aaab ,_fbce ,_fgff ,_ffe ._fafc ._bdc );_baf =append (_baf ,_fbb ...);_aaac -=len (_gde );};};return _baf ;};func (_bdac *textObject )getFontDict (_gaee string )(_dfdfe _ad .PdfObject ,_dfcg error ){_bcade :=_bdac ._ggde ;
if _bcade ==nil {_fc .Log .Debug ("g\u0065\u0074\u0046\u006f\u006e\u0074D\u0069\u0063\u0074\u002e\u0020\u004eo\u0020\u0072\u0065\u0073\u006f\u0075\u0072c\u0065\u0073\u002e\u0020\u006e\u0061\u006d\u0065\u003d\u0025#\u0071",_gaee );return nil ,nil ;};_dfdfe ,_ccgc :=_bcade .GetFontByName (_ad .PdfObjectName (_gaee ));
if !_ccgc {_fc .Log .Debug ("\u0045R\u0052\u004fR\u003a\u0020\u0067\u0065t\u0046\u006f\u006et\u0044\u0069\u0063\u0074\u003a\u0020\u0046\u006f\u006et \u006e\u006f\u0074 \u0066\u006fu\u006e\u0064\u003a\u0020\u006e\u0061m\u0065\u003d%\u0023\u0071",_gaee );
return nil ,_ed .New ("f\u006f\u006e\u0074\u0020no\u0074 \u0069\u006e\u0020\u0072\u0065s\u006f\u0075\u0072\u0063\u0065\u0073");};return _dfdfe ,nil ;};func (_decb paraList )list ()[]*list {var _dddb []*textLine ;var _dcded []*textLine ;for _ ,_ggdeg :=range _decb {_deeab :=_ggdeg .getListLines ();
_dddb =append (_dddb ,_deeab ...);_dcded =append (_dcded ,_ggdeg ._cebdg ...);};_bgcd :=_deda (_dddb );_adcgb :=_bfcef (_dcded ,_bgcd );return _adcgb ;};func _ggdag (_bgea *textLine )bool {_fecb :=true ;_afbe :=-1;for _ ,_dbea :=range _bgea ._bbada {for _ ,_cabc :=range _dbea ._eccf {_dgec :=_cabc ._bfcfc ;
if _afbe ==-1{_afbe =_dgec ;}else {if _afbe !=_dgec {_fecb =false ;break ;};};};};return _fecb ;};

// BBox returns the smallest axis-aligned rectangle that encloses all the TextMarks in `ma`.
func (_aega *TextMarkArray )BBox ()(_ea .PdfRectangle ,bool ){var _dada _ea .PdfRectangle ;_ccca :=false ;for _ ,_cgac :=range _aega ._bag {if _cgac .Meta ||_cefad (_cgac .Text ){continue ;};if _ccca {_dada =_fgde (_dada ,_cgac .BBox );}else {_dada =_cgac .BBox ;
_ccca =true ;};};return _dada ,_ccca ;};func (_bgcgd rulingList )findPrimSec (_eeedc ,_agbad float64 )*ruling {for _ ,_efgf :=range _bgcgd {if _eeaf (_efgf ._cafa -_eeedc )&&_efgf ._fddc -_bbfd <=_agbad &&_agbad <=_efgf ._begad +_bbfd {return _efgf ;};
};return nil ;};func (_eecac rulingList )comp (_edac ,_bagf int )bool {_eeba ,_ebgec :=_eecac [_edac ],_eecac [_bagf ];_dbfac ,_bdde :=_eeba ._gddac ,_ebgec ._gddac ;if _dbfac !=_bdde {return _dbfac > _bdde ;};if _dbfac ==_badgc {return false ;};_eddfd :=func (_eggce bool )bool {if _dbfac ==_ecacd {return _eggce ;
};return !_eggce ;};_ecde ,_ecbge :=_eeba ._cafa ,_ebgec ._cafa ;if _ecde !=_ecbge {return _eddfd (_ecde > _ecbge );};_ecde ,_ecbge =_eeba ._fddc ,_ebgec ._fddc ;if _ecde !=_ecbge {return _eddfd (_ecde < _ecbge );};return _eddfd (_eeba ._begad < _ebgec ._begad );
};func (_gbfd *textMark )inDiacriticArea (_cefgc *textMark )bool {_bfaa :=_gbfd .Llx -_cefgc .Llx ;_ggfc :=_gbfd .Urx -_cefgc .Urx ;_bddc :=_gbfd .Lly -_cefgc .Lly ;return _ag .Abs (_bfaa +_ggfc )< _gbfd .Width ()*_gdcf &&_ag .Abs (_bddc )< _gbfd .Height ()*_gdcf ;
};var _eg =[]string {"\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0053","\u0042","\u0053","\u0057\u0053","\u0042","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042","\u0042","\u0042","\u0053","\u0057\u0053","\u004f\u004e","\u004f\u004e","\u0045\u0054","\u0045\u0054","\u0045\u0054","\u004f\u004e","\u004f\u004e","\u004f\u004e","\u004f\u004e","\u004f\u004e","\u0045\u0053","\u0043\u0053","\u0045\u0053","\u0043\u0053","\u0043\u0053","\u0045\u004e","\u0045\u004e","\u0045\u004e","\u0045\u004e","\u0045\u004e","\u0045\u004e","\u0045\u004e","\u0045\u004e","\u0045\u004e","\u0045\u004e","\u0043\u0053","\u004f\u004e","\u004f\u004e","\u004f\u004e","\u004f\u004e","\u004f\u004e","\u004f\u004e","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004f\u004e","\u004f\u004e","\u004f\u004e","\u004f\u004e","\u004f\u004e","\u004f\u004e","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004f\u004e","\u004f\u004e","\u004f\u004e","\u004f\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0043\u0053","\u004f\u004e","\u0045\u0054","\u0045\u0054","\u0045\u0054","\u0045\u0054","\u004f\u004e","\u004f\u004e","\u004f\u004e","\u004f\u004e","\u004c","\u004f\u004e","\u004f\u004e","\u0042\u004e","\u004f\u004e","\u004f\u004e","\u0045\u0054","\u0045\u0054","\u0045\u004e","\u0045\u004e","\u004f\u004e","\u004c","\u004f\u004e","\u004f\u004e","\u004f\u004e","\u0045\u004e","\u004c","\u004f\u004e","\u004f\u004e","\u004f\u004e","\u004f\u004e","\u004f\u004e","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004f\u004e","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004f\u004e","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c"};
func (_adcd *stateStack )top ()*textState {if _adcd .empty (){return nil ;};return (*_adcd )[_adcd .size ()-1];};func _eabba (_dgffb ,_afcg _cg .Point )bool {_bffbf :=_ag .Abs (_dgffb .X -_afcg .X );_efgb :=_ag .Abs (_dgffb .Y -_afcg .Y );return _dbaf (_efgb ,_bffbf );
};func _fadc (_geccg string )(string ,bool ){_ecaefg :=[]rune (_geccg );if len (_ecaefg )!=1{return "",false ;};_dcgfa ,_cbfg :=_aagcb [_ecaefg [0]];return _dcgfa ,_cbfg ;};func (_gega *textPara )bbox ()_ea .PdfRectangle {return _gega .PdfRectangle };func (_bacf *shapesState )cubicTo (_fbef ,_feca ,_agab ,_ceac ,_dbdbg ,_bfff float64 ){if _dfcf {_fc .Log .Info ("\u0063\u0075\u0062\u0069\u0063\u0054\u006f\u003a");
};_bacf .addPoint (_dbdbg ,_bfff );};

// String returns a description of `state`.
func (_fefg *textState )String ()string {_cbfc :="\u005bN\u004f\u0054\u0020\u0053\u0045\u0054]";if _fefg ._egcgg !=nil {_cbfc =_fefg ._egcgg .BaseFont ();};return _cf .Sprintf ("\u0074\u0063\u003d\u0025\u002e\u0032\u0066\u0020\u0074\u0077\u003d\u0025\u002e\u0032\u0066 \u0074f\u0073\u003d\u0025\u002e\u0032\u0066\u0020\u0066\u006f\u006e\u0074\u003d\u0025\u0071",_fefg ._gfc ,_fefg ._aade ,_fefg ._fgfa ,_cbfc );
};type lineRuling struct{_afbea rulingKind ;_bebd markKind ;_d .Color ;_edfeg ,_acdee _cg .Point ;};func _eeda (_gafg ,_fgac _cg .Point ,_cceg _d .Color )(*ruling ,bool ){_gdgbd :=lineRuling {_edfeg :_gafg ,_acdee :_fgac ,_afbea :_accd (_gafg ,_fgac ),Color :_cceg };
if _gdgbd ._afbea ==_badgc {return nil ,false ;};return _gdgbd .asRuling ();};func _dgced (_ebde *_edb .ContentStreamOperation )(float64 ,error ){if len (_ebde .Params )!=1{_cafg :=_ed .New ("\u0069n\u0063\u006f\u0072\u0072e\u0063\u0074\u0020\u0070\u0061r\u0061m\u0065t\u0065\u0072\u0020\u0063\u006f\u0075\u006et");
_fc .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0025\u0023\u0071\u0020\u0073\u0068\u006f\u0075\u006c\u0064\u0020h\u0061\u0076\u0065\u0020\u0025\u0064\u0020i\u006e\u0070\u0075\u0074\u0020\u0070\u0061\u0072\u0061\u006d\u0073,\u0020\u0067\u006f\u0074\u0020\u0025\u0064\u0020\u0025\u002b\u0076",_ebde .Operand ,1,len (_ebde .Params ),_ebde .Params );
return 0.0,_cafg ;};return _ad .GetNumberAsFloat (_ebde .Params [0]);};type textLine struct{_ea .PdfRectangle ;_fbgb float64 ;_bbada []*textWord ;_faee float64 ;};func _bbfb (_edef _ea .PdfRectangle ,_dgggfa ,_eccaa ,_dddd ,_eacag *ruling )gridTile {_eega :=_edef .Llx ;
_cgge :=_edef .Urx ;_bagg :=_edef .Lly ;_ccadg :=_edef .Ury ;return gridTile {PdfRectangle :_edef ,_cafgb :_dgggfa !=nil &&_dgggfa .encloses (_bagg ,_ccadg ),_gcgff :_eccaa !=nil &&_eccaa .encloses (_bagg ,_ccadg ),_beag :_dddd !=nil &&_dddd .encloses (_eega ,_cgge ),_ddba :_eacag !=nil &&_eacag .encloses (_eega ,_cgge )};
};func (_defefe rulingList )merge ()*ruling {_fgbf :=_defefe [0]._cafa ;_efdc :=_defefe [0]._fddc ;_ddfd :=_defefe [0]._begad ;for _ ,_ddegg :=range _defefe [1:]{_fgbf +=_ddegg ._cafa ;if _ddegg ._fddc < _efdc {_efdc =_ddegg ._fddc ;};if _ddegg ._begad > _ddfd {_ddfd =_ddegg ._begad ;
};};_gfee :=&ruling {_gddac :_defefe [0]._gddac ,_afbc :_defefe [0]._afbc ,Color :_defefe [0].Color ,_cafa :_fgbf /float64 (len (_defefe )),_fddc :_efdc ,_begad :_ddfd };if _adaf {_fc .Log .Info ("\u006de\u0072g\u0065\u003a\u0020\u0025\u0032d\u0020\u0076e\u0063\u0073\u0020\u0025\u0073",len (_defefe ),_gfee );
for _bceed ,_ffbfd :=range _defefe {_cf .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0073\u000a",_bceed ,_ffbfd );};};return _gfee ;};func (_fdbge *textObject )getFontDirect (_gabc string )(*_ea .PdfFont ,error ){_fgae ,_gfcd :=_fdbge .getFontDict (_gabc );
if _gfcd !=nil {return nil ,_gfcd ;};_fgd ,_gfcd :=_ea .NewPdfFontFromPdfObject (_fgae );if _gfcd !=nil {_fc .Log .Debug ("\u0067\u0065\u0074\u0046\u006f\u006e\u0074\u0044\u0069\u0072\u0065\u0063\u0074\u003a\u0020\u004e\u0065\u0077Pd\u0066F\u006f\u006e\u0074\u0046\u0072\u006f\u006d\u0050\u0064\u0066\u004f\u0062j\u0065\u0063\u0074\u0020\u0066\u0061\u0069\u006c\u0065\u0064\u002e\u0020\u006e\u0061\u006d\u0065\u003d%\u0023\u0071\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_gabc ,_gfcd );
};return _fgd ,_gfcd ;};func (_dade *imageExtractContext )processOperand (_gae *_edb .ContentStreamOperation ,_cgd _edb .GraphicsState ,_bea *_ea .PdfPageResources )error {if _gae .Operand =="\u0042\u0049"&&len (_gae .Params )==1{_adfa ,_ddc :=_gae .Params [0].(*_edb .ContentStreamInlineImage );
if !_ddc {return nil ;};if _gbc ,_dgf :=_ad .GetBoolVal (_adfa .ImageMask );_dgf {if _gbc &&!_dade ._cfb .IncludeInlineStencilMasks {return nil ;};};return _dade .extractInlineImage (_adfa ,_cgd ,_bea );}else if _gae .Operand =="\u0044\u006f"&&len (_gae .Params )==1{_dcd ,_cge :=_ad .GetName (_gae .Params [0]);
if !_cge {_fc .Log .Debug ("E\u0052\u0052\u004f\u0052\u003a\u0020\u0054\u0079\u0070\u0065");return _ebf ;};_ ,_gef :=_bea .GetXObjectByName (*_dcd );switch _gef {case _ea .XObjectTypeImage :return _dade .extractXObjectImage (_dcd ,_cgd ,_bea );case _ea .XObjectTypeForm :return _dade .extractFormImages (_dcd ,_cgd ,_bea );
};}else if _dade ._gedgc &&(_gae .Operand =="\u0073\u0063\u006e"||_gae .Operand =="\u0053\u0043\u004e")&&len (_gae .Params )==1{_gdf ,_gbfg :=_ad .GetName (_gae .Params [0]);if !_gbfg {_fc .Log .Debug ("E\u0052\u0052\u004f\u0052\u003a\u0020\u0054\u0079\u0070\u0065");
return _ebf ;};_aeg ,_gbfg :=_bea .GetPatternByName (*_gdf );if !_gbfg {_fc .Log .Debug ("\u0045R\u0052\u004f\u0052\u003a\u0020\u0050\u0061\u0074\u0074\u0065\u0072n\u0020\u006e\u006f\u0074\u0020\u0066\u006f\u0075\u006e\u0064");return nil ;};if _aeg .IsTiling (){_ecf :=_aeg .GetAsTilingPattern ();
_afac ,_bab :=_ecf .GetContentStream ();if _bab !=nil {return _bab ;};_bab =_dade .extractContentStreamImages (string (_afac ),_ecf .Resources );if _bab !=nil {return _bab ;};};}else if (_gae .Operand =="\u0063\u0073"||_gae .Operand =="\u0043\u0053")&&len (_gae .Params )>=1{_dade ._gedgc =_gae .Params [0].String ()=="\u0050a\u0074\u0074\u0065\u0072\u006e";
};return nil ;};func _gdfda (_bdce []structElement ,_fdeea map[int ][]*textLine ,_cgda _ad .PdfObject )[]*list {_bgeac :=[]*list {};for _ ,_dgga :=range _bdce {_abga :=_dgga ._cfae ;_aebg :=int (_dgga ._gcba );_cdffe :=_dgga ._bef ;_gcca :=[]*textLine {};
_gbcf :=[]*list {};_fdacd :=_dgga ._ggcd ;_cbae ,_bbcge :=(_fdacd .(*_ad .PdfObjectReference ));if !_bbcge {_fc .Log .Debug ("\u0066\u0061\u0069l\u0065\u0064\u0020\u006f\u0074\u0020\u0063\u0061\u0073\u0074\u0020\u0074\u006f\u0020\u002a\u0063\u006f\u0072\u0065\u002e\u0050\u0064\u0066\u004f\u0062\u006a\u0065\u0063\u0074R\u0065\u0066\u0065\u0072\u0065\u006e\u0063\u0065");
};if _aebg !=-1&&_cbae !=nil {if _dgggb ,_bcde :=_fdeea [_aebg ];_bcde {if _cgdae ,_bgfa :=_cgda .(*_ad .PdfIndirectObject );_bgfa {_eacfg :=_cgdae .PdfObjectReference ;if _ge .DeepEqual (*_cbae ,_eacfg ){_gcca =_dgggb ;};};};};if _abga !=nil {_gbcf =_gdfda (_abga ,_fdeea ,_cgda );
};_dbdc :=_gaag (_gcca ,_cdffe ,_gbcf );_bgeac =append (_bgeac ,_dbdc );};return _bgeac ;};const (_badgc rulingKind =iota ;_ecacd ;_bgcg ;);func _egdg (_adgbc []TextMark ,_edda *TextTable )[]TextMark {var _egca []TextMark ;for _ ,_gcbaf :=range _adgbc {_gcbaf ._fdbg =true ;
_gcbaf ._abea =_edda ;_egca =append (_egca ,_gcbaf );};return _egca ;};func (_bfef *textLine )appendWord (_bcda *textWord ){_bfef ._bbada =append (_bfef ._bbada ,_bcda );_bfef .PdfRectangle =_fgde (_bfef .PdfRectangle ,_bcda .PdfRectangle );if _bcda ._geba > _bfef ._faee {_bfef ._faee =_bcda ._geba ;
};if _bcda ._bbcgb > _bfef ._fbgb {_bfef ._fbgb =_bcda ._bbcgb ;};};

// Append appends `mark` to the mark array.
func (_ggad *TextMarkArray )Append (mark TextMark ){_ggad ._bag =append (_ggad ._bag ,mark )};func _beee (_bcba _ad .PdfObject ,_fddf _d .Color )(_bc .Image ,error ){_fbceb ,_gcdef :=_ad .GetStream (_bcba );if !_gcdef {return nil ,nil ;};_bebde ,_abbe :=_ea .NewXObjectImageFromStream (_fbceb );
if _abbe !=nil {return nil ,_abbe ;};_edaf ,_abbe :=_bebde .ToImage ();if _abbe !=nil {return nil ,_abbe ;};return _bagfd (_edaf ,_fddf ),nil ;};type textPara struct{_ea .PdfRectangle ;_eeada _ea .PdfRectangle ;_cebdg []*textLine ;_ebdd *textTable ;_gfff bool ;
_cdgcg bool ;_dgad *textPara ;_gccd *textPara ;_abbb *textPara ;_aedgf *textPara ;_bbddg []list ;};func (_dcdee *textTable )putComposite (_beca ,_gfef int ,_dgacd paraList ,_faba _ea .PdfRectangle ){if len (_dgacd )==0{_fc .Log .Error ("\u0074\u0065xt\u0054\u0061\u0062l\u0065\u0029\u0020\u0070utC\u006fmp\u006f\u0073\u0069\u0074\u0065\u003a\u0020em\u0070\u0074\u0079\u0020\u0070\u0061\u0072a\u0073");
return ;};_eggde :=compositeCell {PdfRectangle :_faba ,paraList :_dgacd };if _dgda {_cf .Printf ("\u0020\u0020\u0020\u0020\u0020\u0020\u0020\u0020\u0070\u0075\u0074\u0043\u006f\u006d\u0070o\u0073i\u0074\u0065\u0028\u0025\u0064\u002c\u0025\u0064\u0029\u003c\u002d\u0025\u0073\u000a",_beca ,_gfef ,_eggde .String ());
};_eggde .updateBBox ();_dcdee ._ecag [_fcgc (_beca ,_gfef )]=_eggde ;};func (_dcca paraList )eventNeighbours (_cacga []event )map[*textPara ][]int {_ba .Slice (_cacga ,func (_cgbbc ,_bedcd int )bool {_bgabd ,_ecaef :=_cacga [_cgbbc ],_cacga [_bedcd ];
_cfdac ,_cdgef :=_bgabd ._afec ,_ecaef ._afec ;if _cfdac !=_cdgef {return _cfdac < _cdgef ;};if _bgabd ._cdead !=_ecaef ._cdead {return _bgabd ._cdead ;};return _cgbbc < _bedcd ;});_dgcae :=make (map[int ]intSet );_aebee :=make (intSet );for _ ,_aecce :=range _cacga {if _aecce ._cdead {_dgcae [_aecce ._fgbcf ]=make (intSet );
for _gefag :=range _aebee {if _gefag !=_aecce ._fgbcf {_dgcae [_aecce ._fgbcf ].add (_gefag );_dgcae [_gefag ].add (_aecce ._fgbcf );};};_aebee .add (_aecce ._fgbcf );}else {_aebee .del (_aecce ._fgbcf );};};_dfbd :=map[*textPara ][]int {};for _gdedf ,_cbgde :=range _dgcae {_gage :=_dcca [_gdedf ];
if len (_cbgde )==0{_dfbd [_gage ]=nil ;continue ;};_geceb :=make ([]int ,len (_cbgde ));_eddg :=0;for _egee :=range _cbgde {_geceb [_eddg ]=_egee ;_eddg ++;};_dfbd [_gage ]=_geceb ;};return _dfbd ;};func (_bgfc rulingList )snapToGroupsDirection ()rulingList {_bgfc .sortStrict ();
_dggc :=make (map[*ruling ]rulingList ,len (_bgfc ));_dcdb :=_bgfc [0];_dfbc :=func (_gebg *ruling ){_dcdb =_gebg ;_dggc [_dcdb ]=rulingList {_gebg }};_dfbc (_bgfc [0]);for _ ,_dagb :=range _bgfc [1:]{if _dagb ._cafa < _dcdb ._cafa -_abadg {_fc .Log .Error ("\u0073\u006e\u0061\u0070T\u006f\u0047\u0072\u006f\u0075\u0070\u0073\u0044\u0069r\u0065\u0063\u0074\u0069\u006f\u006e\u003a\u0020\u0057\u0072\u006f\u006e\u0067\u0020\u0070\u0072\u0069\u006da\u0072\u0079\u0020\u006f\u0072d\u0065\u0072\u002e\u000a\u0009\u0076\u0030\u003d\u0025\u0073\u000a\u0009\u0020\u0076\u003d\u0025\u0073",_dcdb ,_dagb );
};if _dagb ._cafa > _dcdb ._cafa +_ggf {_dfbc (_dagb );}else {_dggc [_dcdb ]=append (_dggc [_dcdb ],_dagb );};};_dcgc :=make (map[*ruling ]float64 ,len (_dggc ));_aeaa :=make (map[*ruling ]*ruling ,len (_bgfc ));for _aegbb ,_dfbe :=range _dggc {_dcgc [_aegbb ]=_dfbe .mergePrimary ();
for _ ,_dabad :=range _dfbe {_aeaa [_dabad ]=_aegbb ;};};for _ ,_bgfge :=range _bgfc {_bgfge ._cafa =_dcgc [_aeaa [_bgfge ]];};_dfdad :=make (rulingList ,0,len (_bgfc ));for _ ,_ffcg :=range _dggc {_bbagf :=_ffcg .splitSec ();for _afbbf ,_aegceb :=range _bbagf {_efacg :=_aegceb .merge ();
if len (_dfdad )> 0{_cgdc :=_dfdad [len (_dfdad )-1];if _cgdc .alignsPrimary (_efacg )&&_cgdc .alignsSec (_efacg ){_fc .Log .Error ("\u0073\u006e\u0061\u0070\u0054\u006fG\u0072\u006f\u0075\u0070\u0073\u0044\u0069\u0072\u0065\u0063\u0074\u0069\u006f\u006e\u003a\u0020\u0044\u0075\u0070\u006ci\u0063\u0061\u0074\u0065\u0020\u0069\u003d\u0025\u0064\u000a\u0009\u0077\u003d\u0025s\u000a\t\u0076\u003d\u0025\u0073",_afbbf ,_cgdc ,_efacg );
continue ;};};_dfdad =append (_dfdad ,_efacg );};};_dfdad .sortStrict ();return _dfdad ;};

// TableInfo gets table information of the textmark `tm`.
func (_beg *TextMark )TableInfo ()(*TextTable ,[][]int ){if !_beg ._fdbg {return nil ,nil ;};_decd :=_beg ._abea ;_abee :=_decd .getCellInfo (*_beg );return _decd ,_abee ;};

// Font represents the font properties on a PDF page.
type Font struct{PdfFont *_ea .PdfFont ;

// FontName represents Font Name from font properties.
FontName string ;

// FontType represents Font Subtype entry in the font dictionary inside page resources.
// Examples : type0, Type1, MMType1, Type3, TrueType, CIDFont.
FontType string ;

// ToUnicode is true if font provides a `ToUnicode` mapping.
ToUnicode bool ;

// IsCID is true if underlying font is a composite font.
// Composite font is represented by a font dictionary whose Subtype is `Type0`
IsCID bool ;

// IsSimple is true if font is simple font.
// A simple font is limited to only 8 bit (255) character codes.
IsSimple bool ;

// FontData represents the raw data of the embedded font file.
// It can have format TrueType (TTF), PostScript Font (PFB) or Compact Font Format (CCF).
// FontData value can be indicates from `FontFile`, `FontFile2` or `FontFile3` inside Font Descriptor.
// At most, only one of `FontFile`, `FontFile2` or `FontFile3` will be FontData value.
FontData []byte ;

// FontFileName is a name representing the font. it has format:
// (Font Name) + (Font Type Extension), example: helvetica.ttf.
FontFileName string ;

// FontDescriptor represents metrics and other attributes inside font properties from PDF Structure (Font Descriptor).
FontDescriptor *_ea .PdfFontDescriptor ;};var (_ebf =_ed .New ("\u0074\u0079p\u0065\u0020\u0063h\u0065\u0063\u006b\u0020\u0065\u0072\u0072\u006f\u0072");_dedg =_ed .New ("\u0072\u0061\u006e\u0067\u0065\u0020\u0063\u0068\u0065\u0063\u006b\u0020e\u0072\u0072\u006f\u0072");
);var _ccbg =TextMark {Text :"\u005b\u0058\u005d",Original :"\u0020",Meta :true ,FillColor :_d .White ,StrokeColor :_d .White };func _dadc (_facbf *list )[]*textLine {for _ ,_dged :=range _facbf ._adgg {switch _dged ._fdbe {case "\u004c\u0042\u006fd\u0079":if len (_dged ._addb )!=0{return _dged ._addb ;
};return _dadc (_dged );case "\u0053\u0070\u0061\u006e":return _dged ._addb ;case "I\u006e\u006c\u0069\u006e\u0065\u0053\u0068\u0061\u0070\u0065":return _dged ._addb ;};};return nil ;};func _bfda (_gfgc *_ea .Image ,_ceefd _d .Color )_bc .Image {_fgccg ,_fgfgg :=int (_gfgc .Width ),int (_gfgc .Height );
_edcfe :=_bc .NewRGBA (_bc .Rect (0,0,_fgccg ,_fgfgg ));for _eacb :=0;_eacb < _fgfgg ;_eacb ++{for _eege :=0;_eege < _fgccg ;_eege ++{_cbdaa ,_dbac :=_gfgc .ColorAt (_eege ,_eacb );if _dbac !=nil {_fc .Log .Debug ("\u0057\u0041\u0052\u004e\u003a\u0020\u0063o\u0075\u006c\u0064\u0020\u006e\u006f\u0074\u0020\u0072\u0065\u0074\u0072\u0069\u0065v\u0065 \u0069\u006d\u0061\u0067\u0065\u0020m\u0061\u0073\u006b\u0020\u0076\u0061\u006cu\u0065\u0020\u0061\u0074\u0020\u0028\u0025\u0064\u002c\u0020\u0025\u0064\u0029\u002e\u0020\u004f\u0075\u0074\u0070\u0075\u0074\u0020\u006da\u0079\u0020\u0062\u0065\u0020\u0069\u006e\u0063\u006f\u0072\u0072\u0065\u0063t\u002e",_eege ,_eacb );
continue ;};_cbfbe ,_daefe ,_cfcb ,_ :=_cbdaa .RGBA ();var _bfgca _d .Color ;if _cbfbe +_daefe +_cfcb ==0{_bfgca =_ceefd ;}else {_bfgca =_d .Transparent ;};_edcfe .Set (_eege ,_eacb ,_bfgca );};};return _edcfe ;};func (_cbdff *wordBag )removeDuplicates (){if _dffcf {_fc .Log .Info ("r\u0065m\u006f\u0076\u0065\u0044\u0075\u0070\u006c\u0069c\u0061\u0074\u0065\u0073: \u0025\u0071",_cbdff .text ());
};for _ ,_gfeg :=range _cbdff .depthIndexes (){if len (_cbdff ._dfga [_gfeg ])==0{continue ;};_egdb :=_cbdff ._dfga [_gfeg ][0];_bdcb :=_cedc *_egdb ._geba ;_bcab :=_egdb ._bbcgb ;for _ ,_dedfd :=range _cbdff .depthBand (_bcab ,_bcab +_bdcb ){_abeeb :=map[*textWord ]struct{}{};
_bgad :=_cbdff ._dfga [_dedfd ];for _ ,_gcfda :=range _bgad {if _ ,_dgdba :=_abeeb [_gcfda ];_dgdba {continue ;};for _ ,_fcbf :=range _bgad {if _ ,_ebdbf :=_abeeb [_fcbf ];_ebdbf {continue ;};if _fcbf !=_gcfda &&_fcbf ._cfdag ==_gcfda ._cfdag &&_ag .Abs (_fcbf .Llx -_gcfda .Llx )< _bdcb &&_ag .Abs (_fcbf .Urx -_gcfda .Urx )< _bdcb &&_ag .Abs (_fcbf .Lly -_gcfda .Lly )< _bdcb &&_ag .Abs (_fcbf .Ury -_gcfda .Ury )< _bdcb {_abeeb [_fcbf ]=struct{}{};
};};};if len (_abeeb )> 0{_befb :=0;for _ ,_agdc :=range _bgad {if _ ,_gcceb :=_abeeb [_agdc ];!_gcceb {_bgad [_befb ]=_agdc ;_befb ++;};};_cbdff ._dfga [_dedfd ]=_bgad [:len (_bgad )-len (_abeeb )];if len (_cbdff ._dfga [_dedfd ])==0{delete (_cbdff ._dfga ,_dedfd );
};};};};};func (_eaceb rulingList )tidied (_eecb string )rulingList {_eefdd :=_eaceb .removeDuplicates ();_eefdd .log ("\u0075n\u0069\u0071\u0075\u0065\u0073");_adfd :=_eefdd .snapToGroups ();if _adfd ==nil {return nil ;};_adfd .sort ();if _gbbe {_fc .Log .Info ("\u0074\u0069\u0064i\u0065\u0064\u003a\u0020\u0025\u0071\u0020\u0076\u0065\u0063\u0073\u003d\u0025\u0064\u0020\u0075\u006e\u0069\u0071\u0075\u0065\u0073\u003d\u0025\u0064\u0020\u0063\u006f\u0061l\u0065\u0073\u0063\u0065\u0064\u003d\u0025\u0064",_eecb ,len (_eaceb ),len (_eefdd ),len (_adfd ));
};_adfd .log ("\u0063o\u0061\u006c\u0065\u0073\u0063\u0065d");return _adfd ;};func _fcg (_bb []rune )BidiText {_dcf :=-1;_bbd :=false ;_aa :=true ;_ged :=len (_bb );_fe :=make ([]string ,_ged );_cad :=make ([]string ,_ged );if _ged ==0||_bbd {return _abd (string (_bb ),_aa ,_bbd );
};_da :=0;for _ec ,_agb :=range _bb {_fe [_ec ]=string (_agb );_bfc :="\u004c";if _agb <=0x00ff{_bfc =_eg [_agb ];}else if 0x0590<=_agb &&_agb <=0x05f4{_bfc ="\u0052";}else if 0x0600<=_agb &&_agb <=0x06ff{_af :=_agb &0xff;if int (_af )>=len (_bce ){_c .Printf ("\u0042\u0069\u0064\u0069\u003a\u0020\u0069\u006e\u0076\u0061\u006c\u0069\u0064\u0020\u0055n\u0069c\u006f\u0064\u0065\u0020\u0063\u0068\u0061\u0072\u0061\u0063\u0074\u0065\u0072\u0020"+string (_agb ));
};_bfc =_bce [_agb &0xff];}else if (0x0700<=_agb &&_agb <=0x08ac)||(0xfb50<=_agb &&_agb <=0xfdff)||(0xfe70<=_agb &&_agb <=0xfeff){_bfc ="\u0041\u004c";};if _bfc =="\u0052"||_bfc =="\u0041\u004c"||_bfc =="\u0041\u004e"{_da ++;};_cad [_ec ]=_bfc ;};if _da ==0{_aa =true ;
return _abd (string (_bb ),_aa ,false );};if _dcf ==-1{if float64 (_da )/float64 (_ged )< 0.3&&_ged > 4{_aa =true ;_dcf =0;}else {_aa =false ;_dcf =1;};};var _agc []int ;for range _bb {_agc =append (_agc ,_dcf );};_dad :="\u004c";if _ga (_dcf ){_dad ="\u0052";
};_bbg :=_dad ;_fb :=_bbg ;_fg :=_bbg ;for _eed :=range _bb {if _cad [_eed ]=="\u004e\u0053\u004d"{_cad [_eed ]=_fg ;}else {_fg =_cad [_eed ];};};_fg =_bbg ;var _cfa string ;for _gg :=range _bb {_cfa =_cad [_gg ];if _cfa =="\u0045\u004e"{if _fg =="\u0041\u004c"{_cad [_gg ]="\u0041\u004e";
}else {_cad [_gg ]="\u0045\u004e";};}else if _cfa =="\u0052"||_cfa =="\u004c"||_cfa =="\u0041\u004c"{_fg =_cfa ;};};for _gcf :=range _bb {_fcb :=_cad [_gcf ];if _fcb =="\u0041\u004c"{_cad [_gcf ]="\u0052";};};for _afa :=1;_afa < (len (_bb )-1);_afa ++{if _cad [_afa ]=="\u0045\u0053"&&_cad [_afa -1]=="\u0045\u004e"&&_cad [_afa +1]=="\u0045\u004e"{_cad [_afa ]="\u0045\u004e";
};if _cad [_afa ]=="\u0043\u0053"&&(_cad [_afa -1]=="\u0045\u004e"||_cad [_afa -1]=="\u0041\u004e")&&_cad [_afa +1]==_cad [_afa -1]{_cad [_afa ]=_cad [_afa -1];};};for _gcc :=range _bb {if _cad [_gcc ]=="\u0045\u004e"{for _bde :=_gcc -1;_bde >=0;_bde --{if _cad [_bde ]!="\u0045\u0054"{break ;
};_cad [_bde ]="\u0045\u004e";};for _bec :=_gcc +1;_bec < _ged ;_bec ++{if _cad [_bec ]!="\u0045\u0054"{break ;};_cad [_bec ]="\u0045\u004e";};};};for _ac :=range _bb {_ce :=_cad [_ac ];if _ce =="\u0057\u0053"||_ce =="\u0045\u0053"||_ce =="\u0045\u0054"||_ce =="\u0043\u0053"{_cad [_ac ]="\u004f\u004e";
};};_fg ="\u0073\u006f\u0072";for _adf :=range _bb {_dg :=_cad [_adf ];if _dg =="\u0045\u004e"{if _fg =="\u004c"{_cad [_adf ]="\u004c";}else {_cad [_adf ]="\u0045\u004e";};}else if _dg =="\u0052"||_dg =="\u004c"{_fg =_dg ;};};for _dce :=0;_dce < len (_bb );
_dce ++{if _cad [_dce ]=="\u004f\u004e"{_gedg :=_ee (_cad ,_dce +1,"\u004f\u004e");_bcf :=_fb ;if _dce > 0{_bcf =_cad [_dce -1];};_fgc :=_fb ;if _gedg +1< _ged {_fgc =_cad [_gedg +1];};if _bcf !="\u004c"{_bcf ="\u0052";};if _fgc !="\u004c"{_fgc ="\u0052";
};if _bcf ==_fgc {_ega (_cad ,_dce ,_gedg ,_bcf );};_dce =_gedg -1;};};for _egf :=range _bb {if _cad [_egf ]=="\u004f\u004e"{_cad [_egf ]=_dad ;};};for _aef :=range _bb {_ced :=_cad [_aef ];if _ae (_agc [_aef ]){if _ced =="\u0052"{_agc [_aef ]++;}else if _ced =="\u0041\u004e"||_ced =="\u0045\u004e"{_agc [_aef ]+=2;
};}else if _ced =="\u004c"||_ced =="\u0041\u004e"||_ced =="\u0045\u004e"{_agc [_aef ]++;};};_dff :=-1;_egc :=99;var _eeb int ;for _dbf :=0;_dbf < len (_agc );_dbf ++{_eeb =_agc [_dbf ];if _dff < _eeb {_dff =_eeb ;};if _egc > _eeb &&_ga (_eeb ){_egc =_eeb ;
};};for _gfd :=_dff ;_gfd >=_egc ;_gfd --{_bfa :=-1;for _cbd :=0;_cbd < len (_agc );_cbd ++{if _agc [_cbd ]< _gfd {if _bfa >=0{_ca (_fe ,_bfa ,_cbd );_bfa =-1;};}else if _bfa < 0{_bfa =_cbd ;};};if _bfa >=0{_ca (_fe ,_bfa ,len (_agc ));};};for _ceb :=0;
_ceb < len (_fe );_ceb ++{_eag :=_fe [_ceb ];if _eag =="\u003c"||_eag =="\u003e"{_fe [_ceb ]="";};};return _abd (_eb .Join (_fe ,""),_aa ,false );};func (_dcag *stateStack )empty ()bool {return len (*_dcag )==0};func _afbda (_fece byte )bool {for _ ,_adcg :=range _aebd {if []byte (_adcg )[0]==_fece {return true ;
};};return false ;};const (_fed =true ;_dgcd =true ;_ebg =true ;_dccc =false ;_fbaf =false ;_aead =6;_adedg =3.0;_ccgcg =200;_edfeb =true ;_bcbe =true ;_gcaa =true ;_bcgf =true ;_ebfbd =false ;);func (_accge paraList )computeEBBoxes (){if _daad {_fc .Log .Info ("\u0063o\u006dp\u0075\u0074\u0065\u0045\u0042\u0042\u006f\u0078\u0065\u0073\u003a");
};for _ ,_agad :=range _accge {_agad ._eeada =_agad .PdfRectangle ;};_eggcf :=_accge .yNeighbours (0);for _dgfaa ,_gacbf :=range _accge {_gdaf :=_gacbf ._eeada ;_cadab ,_gdga :=-1.0e9,+1.0e9;for _ ,_daeeag :=range _eggcf [_gacbf ]{_gbcdf :=_accge [_daeeag ]._eeada ;
if _gbcdf .Urx < _gdaf .Llx {_cadab =_ag .Max (_cadab ,_gbcdf .Urx );}else if _gdaf .Urx < _gbcdf .Llx {_gdga =_ag .Min (_gdga ,_gbcdf .Llx );};};for _bfac ,_cgcf :=range _accge {_ggaa :=_cgcf ._eeada ;if _dgfaa ==_bfac ||_ggaa .Ury > _gdaf .Lly {continue ;
};if _cadab <=_ggaa .Llx &&_ggaa .Llx < _gdaf .Llx {_gdaf .Llx =_ggaa .Llx ;}else if _ggaa .Urx <=_gdga &&_gdaf .Urx < _ggaa .Urx {_gdaf .Urx =_ggaa .Urx ;};};if _daad {_cf .Printf ("\u0025\u0034\u0064\u003a %\u0036\u002e\u0032\u0066\u2192\u0025\u0036\u002e\u0032\u0066\u0020\u0025\u0071\u000a",_dgfaa ,_gacbf ._eeada ,_gdaf ,_afbcec (_gacbf .text (),50));
};_gacbf ._eeada =_gdaf ;};if _dccc {for _ ,_ebegb :=range _accge {_ebegb .PdfRectangle =_ebegb ._eeada ;};};};func _bfb (_bbag *list ,_defc *_eb .Builder ,_edbcf *string ){_aedgd :=_cgacc (_bbag ,_edbcf );_defc .WriteString (_aedgd );for _ ,_bagd :=range _bbag ._adgg {_adbgg :=*_edbcf +"\u0020\u0020\u0020";
_bfb (_bagd ,_defc ,&_adbgg );};};func (_dabfb *textLine )pullWord (_ecfa *wordBag ,_gbef *textWord ,_ffbf int ){_dabfb .appendWord (_gbef );_ecfa .removeWord (_gbef ,_ffbf );};func _ebfdg (_badad bounded )float64 {return -_badad .bbox ().Lly };type wordBag struct{_ea .PdfRectangle ;
_ggc float64 ;_feae ,_dabg rulingList ;_aagd float64 ;_dfga map[int ][]*textWord ;};func _deda (_bfeg []*textLine )map[float64 ][]*textLine {_ba .Slice (_bfeg ,func (_beaeg ,_agdac int )bool {return _bfeg [_beaeg ]._fbgb < _bfeg [_agdac ]._fbgb });_gcec :=map[float64 ][]*textLine {};
for _ ,_acbd :=range _bfeg {_acde :=_afafc (_acbd );_acde =_ag .Round (_acde );_gcec [_acde ]=append (_gcec [_acde ],_acbd );};return _gcec ;};

// ExtractPageImages returns the image contents of the page extractor, including data
// and position, size information for each image.
// A set of options to control page image extraction can be passed in. The options
// parameter can be nil for the default options. By default, inline stencil masks
// are not extracted.
func (_ccaa *Extractor )ExtractPageImages (options *ImageExtractOptions )(*PageImages ,error ){_bff :=&imageExtractContext {_cfb :options };_fdga :=_bff .extractContentStreamImages (_ccaa ._acg ,_ccaa ._daf );if _fdga !=nil {return nil ,_fdga ;};return &PageImages {Images :_bff ._cfd },nil ;
};func _ae (_cfg int )bool {return (_cfg &1)==0};func _agabf (_dagc string )bool {if _a .RuneCountInString (_dagc )< _acgfc {return false ;};_aaabb ,_cgef :=_a .DecodeLastRuneInString (_dagc );if _cgef <=0||!_g .Is (_g .Hyphen ,_aaabb ){return false ;};
_aaabb ,_cgef =_a .DecodeLastRuneInString (_dagc [:len (_dagc )-_cgef ]);return _cgef > 0&&!_g .IsSpace (_aaabb );};func (_fbgaa paraList )applyTables (_dggcb []*textTable )paraList {var _ffef paraList ;for _ ,_cgdca :=range _dggcb {_ffef =append (_ffef ,_cgdca .newTablePara ());
};for _ ,_gddaa :=range _fbgaa {if _gddaa ._gfff {continue ;};_ffef =append (_ffef ,_gddaa );};return _ffef ;};func (_ceef *shapesState )clearPath (){_ceef ._agbgb =nil ;_ceef ._cdceb =false ;if _dfcf {_fc .Log .Info ("\u0043\u004c\u0045A\u0052\u003a\u0020\u0073\u0073\u003d\u0025\u0073",_ceef );
};};

// ExtractTextWithStats works like ExtractText but returns the number of characters in the output
// (`numChars`) and the number of characters that were not decoded (`numMisses`).
func (_adfca *Extractor )ExtractTextWithStats ()(_def string ,_ccg int ,_fba int ,_efdf error ){_dac ,_ccg ,_fba ,_efdf :=_adfca .ExtractPageText ();if _efdf !=nil {return "",_ccg ,_fba ,_efdf ;};return _dac .Text (),_ccg ,_fba ,nil ;};

// TextMarkArray is a collection of TextMarks.
type TextMarkArray struct{_bag []TextMark };type event struct{_afec float64 ;_cdead bool ;_fgbcf int ;};type markKind int ;

// String returns a description of `k`.
func (_fegg rulingKind )String ()string {_dgbbd ,_ebcg :=_bcbeg [_fegg ];if !_ebcg {return _cf .Sprintf ("\u004e\u006ft\u0020\u0061\u0020r\u0075\u006c\u0069\u006e\u0067\u003a\u0020\u0025\u0064",_fegg );};return _dgbbd ;};const (_daad =false ;_dbge =false ;
_dfge =false ;_fgffe =false ;_dfcf =false ;_fdaf =false ;_efdff =false ;_adbf =false ;_cadga =false ;_ggbef =_cadga &&true ;_ecaf =_ggbef &&false ;_dffcf =_cadga &&true ;_dgda =false ;_gcff =_dgda &&false ;_gcge =_dgda &&true ;_gbbe =false ;_ccfea =_gbbe &&false ;
_adaf =_gbbe &&false ;_cafd =_gbbe &&true ;_aceg =_gbbe &&false ;_gfbd =_gbbe &&false ;);func (_acaf paraList )readBefore (_cdbe []int ,_dcdf ,_fgfe int )bool {_dgaaa ,_fgebc :=_acaf [_dcdf ],_acaf [_fgfe ];if _gdfe (_dgaaa ,_fgebc )&&_dgaaa .Lly > _fgebc .Lly {return true ;
};if !(_dgaaa ._eeada .Urx < _fgebc ._eeada .Llx ){return false ;};_gdgg ,_gggg :=_dgaaa .Lly ,_fgebc .Lly ;if _gdgg > _gggg {_gggg ,_gdgg =_gdgg ,_gggg ;};_gbfe :=_ag .Max (_dgaaa ._eeada .Llx ,_fgebc ._eeada .Llx );_egfb :=_ag .Min (_dgaaa ._eeada .Urx ,_fgebc ._eeada .Urx );
_dagcc :=_acaf .llyRange (_cdbe ,_gdgg ,_gggg );for _ ,_cacg :=range _dagcc {if _cacg ==_dcdf ||_cacg ==_fgfe {continue ;};_bbfa :=_acaf [_cacg ];if _bbfa ._eeada .Llx <=_egfb &&_gbfe <=_bbfa ._eeada .Urx {return false ;};};return true ;};func (_ffbbc *wordBag )firstWord (_bddd int )*textWord {return _ffbbc ._dfga [_bddd ][0]};
var _bcbeg =map[rulingKind ]string {_badgc :"\u006e\u006f\u006e\u0065",_ecacd :"\u0068\u006f\u0072\u0069\u007a\u006f\u006e\u0074\u0061\u006c",_bgcg :"\u0076\u0065\u0072\u0074\u0069\u0063\u0061\u006c"};func (_gdfef lineRuling )asRuling ()(*ruling ,bool ){_gdce :=ruling {_gddac :_gdfef ._afbea ,Color :_gdfef .Color ,_afbc :_ccgcb };
switch _gdfef ._afbea {case _bgcg :_gdce ._cafa =_gdfef .xMean ();_gdce ._fddc =_ag .Min (_gdfef ._edfeg .Y ,_gdfef ._acdee .Y );_gdce ._begad =_ag .Max (_gdfef ._edfeg .Y ,_gdfef ._acdee .Y );case _ecacd :_gdce ._cafa =_gdfef .yMean ();_gdce ._fddc =_ag .Min (_gdfef ._edfeg .X ,_gdfef ._acdee .X );
_gdce ._begad =_ag .Max (_gdfef ._edfeg .X ,_gdfef ._acdee .X );default:_fc .Log .Error ("\u0062\u0061\u0064\u0020pr\u0069\u006d\u0061\u0072\u0079\u0020\u006b\u0069\u006e\u0064\u003d\u0025\u0064",_gdfef ._afbea );return nil ,false ;};return &_gdce ,true ;
};func (_gfcdc *wordBag )makeRemovals ()map[int ]map[*textWord ]struct{}{_deeb :=make (map[int ]map[*textWord ]struct{},len (_gfcdc ._dfga ));for _cdbb :=range _gfcdc ._dfga {_deeb [_cdbb ]=make (map[*textWord ]struct{});};return _deeb ;};func _acfb (_bdacd ,_abae int )int {if _bdacd < _abae {return _bdacd ;
};return _abae ;};func _cgacc (_bdacf *list ,_dacfe *string )string {_ddag :=_eb .Split (_bdacf ._eeefb ,"\u000a");_bagc :=&_eb .Builder {};for _ ,_egbf :=range _ddag {if _egbf !=""{_bagc .WriteString (*_dacfe );_bagc .WriteString (_egbf );_bagc .WriteString ("\u000a");
};};return _bagc .String ();};func (_dgbf *shapesState )lastpointEstablished ()(_cg .Point ,bool ){if _dgbf ._cdceb {return _dgbf ._efc ,false ;};_cfda :=len (_dgbf ._agbgb );if _cfda > 0&&_dgbf ._agbgb [_cfda -1]._bge {return _dgbf ._agbgb [_cfda -1].last (),false ;
};return _cg .Point {},true ;};func (_adge *wordBag )highestWord (_dfefd int ,_cead ,_bada float64 )*textWord {for _ ,_ecggd :=range _adge ._dfga [_dfefd ]{if _cead <=_ecggd ._bbcgb &&_ecggd ._bbcgb <=_bada {return _ecggd ;};};return nil ;};func _cgfd (_bceag ,_dggg bounded )float64 {return _bceag .bbox ().Llx -_dggg .bbox ().Llx };
var _bcdg string ="\u005e\u005b\u0061\u002d\u007a\u0041\u002dZ\u005d\u0028\u005c)\u007c\u005c\u002e)\u007c\u005e[\u005c\u0064\u005d\u002b\u0028\u005c)\u007c\\.\u0029\u007c\u005e\u005c\u0028\u005b\u0061\u002d\u007a\u0041\u002d\u005a\u005d\u005c\u0029\u007c\u005e\u005c\u0028\u005b\u005c\u0064\u005d\u002b\u005c\u0029";
func (_gfdeg *textTable )getDown ()paraList {_cecbe :=make (paraList ,_gfdeg ._agaf );for _bfcdf :=0;_bfcdf < _gfdeg ._agaf ;_bfcdf ++{_dacb :=_gfdeg .get (_bfcdf ,_gfdeg ._ebaab -1)._aedgf ;if _dacb .taken (){return nil ;};_cecbe [_bfcdf ]=_dacb ;};for _abgd :=0;
_abgd < _gfdeg ._agaf -1;_abgd ++{if _cecbe [_abgd ]._gccd !=_cecbe [_abgd +1]{return nil ;};};return _cecbe ;};func (_eggg paraList )tables ()[]TextTable {var _gfaf []TextTable ;if _dgda {_fc .Log .Info ("\u0070\u0061\u0072\u0061\u0073\u002e\u0074\u0061\u0062\u006c\u0065\u0073\u003a");
};for _ ,_fddba :=range _eggg {_gbbd :=_fddba ._ebdd ;if _gbbd !=nil &&_gbbd .isExportable (){_gfaf =append (_gfaf ,_gbbd .toTextTable ());};};return _gfaf ;};func _ecbc (_cbfe ,_beafe bounded )float64 {_gabeb :=_eefd (_cbfe ,_beafe );if !_eeaf (_gabeb ){return _gabeb ;
};return _cgfd (_cbfe ,_beafe );};

// Marks returns the TextMark collection for a page. It represents all the text on the page.
func (_dagd PageText )Marks ()*TextMarkArray {return &TextMarkArray {_bag :_dagd ._feeg }};func (_bafc *wordBag )allWords ()[]*textWord {var _aded []*textWord ;for _ ,_efa :=range _bafc ._dfga {_aded =append (_aded ,_efa ...);};return _aded ;};func _aafg (_egcf ,_edfe _ea .PdfRectangle )bool {return _egcf .Llx <=_edfe .Llx &&_edfe .Urx <=_egcf .Urx &&_egcf .Lly <=_edfe .Lly &&_edfe .Ury <=_egcf .Ury ;
};var _aebd =[]string {"\u2756","\u27a2","\u2713","\u2022","\uf0a7","\u25a1","\u2212","\u25a0","\u25aa","\u006f"};func (_ebddd paraList )extractTables (_ecfg []gridTiling )paraList {if _dgda {_fc .Log .Debug ("\u0065\u0078\u0074r\u0061\u0063\u0074\u0054\u0061\u0062\u006c\u0065\u0073\u003d\u0025\u0064\u0020\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u0078\u003d\u003d\u003d\u003d=\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d",len (_ebddd ));
};if len (_ebddd )< _ebgd {return _ebddd ;};_bgeag :=_ebddd .findTables (_ecfg );if _dgda {_fc .Log .Info ("c\u006f\u006d\u0062\u0069\u006e\u0065d\u0020\u0074\u0061\u0062\u006c\u0065s\u0020\u0025\u0064\u0020\u003d\u003d\u003d=\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d=\u003d",len (_bgeag ));
for _bcaead ,_gefa :=range _bgeag {_gefa .log (_cf .Sprintf ("c\u006f\u006d\u0062\u0069\u006e\u0065\u0064\u0020\u0025\u0064",_bcaead ));};};return _ebddd .applyTables (_bgeag );};func (_eccb *imageExtractContext )extractInlineImage (_bggf *_edb .ContentStreamInlineImage ,_eca _edb .GraphicsState ,_ece *_ea .PdfPageResources )error {_aaf ,_dffd :=_bggf .ToImage (_ece );
if _dffd !=nil {return _dffd ;};_bfce ,_dffd :=_bggf .GetColorSpace (_ece );if _dffd !=nil {return _dffd ;};if _bfce ==nil {_bfce =_ea .NewPdfColorspaceDeviceGray ();};_edf ,_dffd :=_bfce .ImageToRGB (*_aaf );if _dffd !=nil {return _dffd ;};_acgf :=ImageMark {Image :&_edf ,Width :_eca .CTM .ScalingFactorX (),Height :_eca .CTM .ScalingFactorY (),Angle :_eca .CTM .Angle ()};
_acgf .X ,_acgf .Y =_eca .CTM .Translation ();_eccb ._cfd =append (_eccb ._cfd ,_acgf );_eccb ._eac ++;return nil ;};func (_gdeb rulingList )removeDuplicates ()rulingList {if len (_gdeb )==0{return nil ;};_gdeb .sort ();_cfgdb :=rulingList {_gdeb [0]};
for _ ,_debaf :=range _gdeb [1:]{if _debaf .equals (_cfgdb [len (_cfgdb )-1]){continue ;};_cfgdb =append (_cfgdb ,_debaf );};return _cfgdb ;};func _bffba (_cfea float64 ,_edge int )int {if _edge ==0{_edge =1;};_cacc :=float64 (_edge );return int (_ag .Round (_cfea /_cacc )*_cacc );
};func (_eegf *wordBag )minDepth ()float64 {return _eegf ._aagd -(_eegf .Ury -_eegf ._ggc )};func (_ggec *textObject )showText (_ddb _ad .PdfObject ,_efe []byte ,_edd int ,_cbe string )error {return _ggec .renderText (_ddb ,_efe ,_edd ,_cbe );};type ruling struct{_gddac rulingKind ;
_afbc markKind ;_d .Color ;_cafa float64 ;_fddc float64 ;_begad float64 ;_gcccd float64 ;};func (_deef *wordBag )scanBand (_bdfg string ,_eabf *wordBag ,_ccfg func (_bdab *wordBag ,_geff *textWord )bool ,_fdad ,_feaea ,_eaa float64 ,_feff ,_cbbb bool )int {_acabe :=_eabf ._ggc ;
var _aefe map[int ]map[*textWord ]struct{};if !_feff {_aefe =_deef .makeRemovals ();};_bacg :=_fbac *_acabe ;_aecf :=0;for _ ,_ecgf :=range _deef .depthBand (_fdad -_bacg ,_feaea +_bacg ){if len (_deef ._dfga [_ecgf ])==0{continue ;};for _ ,_cedf :=range _deef ._dfga [_ecgf ]{if !(_fdad -_bacg <=_cedf ._bbcgb &&_cedf ._bbcgb <=_feaea +_bacg ){continue ;
};if !_ccfg (_eabf ,_cedf ){continue ;};_babgf :=2.0*_ag .Abs (_cedf ._geba -_eabf ._ggc )/(_cedf ._geba +_eabf ._ggc );_eada :=_ag .Max (_cedf ._geba /_eabf ._ggc ,_eabf ._ggc /_cedf ._geba );_cfac :=_ag .Min (_babgf ,_eada );if _eaa > 0&&_cfac > _eaa {continue ;
};if _eabf .blocked (_cedf ){continue ;};if !_feff {_eabf .pullWord (_cedf ,_ecgf ,_aefe );};_aecf ++;if !_cbbb {if _cedf ._bbcgb < _fdad {_fdad =_cedf ._bbcgb ;};if _cedf ._bbcgb > _feaea {_feaea =_cedf ._bbcgb ;};};if _feff {break ;};};};if !_feff {_deef .applyRemovals (_aefe );
};return _aecf ;};func (_egeca *textTable )compositeColCorridors ()map[int ][]float64 {_dgfb :=make (map[int ][]float64 ,_egeca ._agaf );if _dgda {_fc .Log .Info ("\u0063\u006f\u006d\u0070o\u0073\u0069\u0074\u0065\u0043\u006f\u006c\u0043\u006f\u0072r\u0069d\u006f\u0072\u0073\u003a\u0020\u0077\u003d%\u0064\u0020",_egeca ._agaf );
};for _bcdb :=0;_bcdb < _egeca ._agaf ;_bcdb ++{_dgfb [_bcdb ]=nil ;};return _dgfb ;};func (_gdcea gridTile )numBorders ()int {_bggfc :=0;if _gdcea ._cafgb {_bggfc ++;};if _gdcea ._gcgff {_bggfc ++;};if _gdcea ._beag {_bggfc ++;};if _gdcea ._ddba {_bggfc ++;
};return _bggfc ;};func (_abec *textObject )setWordSpacing (_gcd float64 ){if _abec ==nil {return ;};_abec ._abcg ._aade =_gcd ;};func (_daeec *textLine )bbox ()_ea .PdfRectangle {return _daeec .PdfRectangle };var _bbda =false ;func _gaag (_fdcd []*textLine ,_gda string ,_dage []*list )*list {return &list {_addb :_fdcd ,_fdbe :_gda ,_adgg :_dage };
};func (_cfeg paraList )yNeighbours (_eebc float64 )map[*textPara ][]int {_ffgc :=make ([]event ,2*len (_cfeg ));if _eebc ==0{for _fdbdg ,_aabd :=range _cfeg {_ffgc [2*_fdbdg ]=event {_aabd .Lly ,true ,_fdbdg };_ffgc [2*_fdbdg +1]=event {_aabd .Ury ,false ,_fdbdg };
};}else {for _ggccb ,_becdd :=range _cfeg {_ffgc [2*_ggccb ]=event {_becdd .Lly -_eebc *_becdd .fontsize (),true ,_ggccb };_ffgc [2*_ggccb +1]=event {_becdd .Ury +_eebc *_becdd .fontsize (),false ,_ggccb };};};return _cfeg .eventNeighbours (_ffgc );};type textObject struct{_dbdb *Extractor ;
_ggde *_ea .PdfPageResources ;_ggda _edb .GraphicsState ;_abcg *textState ;_gegf *stateStack ;_bdfa _cg .Matrix ;_acdcf _cg .Matrix ;_afgad []*textMark ;_ecce bool ;};func _dag (_bdb []Font ,_gfdb string )bool {for _ ,_adfc :=range _bdb {if _adfc .FontName ==_gfdb {return true ;
};};return false ;};func _efec (_abff *Extractor ,_abad *_ea .PdfPageResources ,_ebbgf _edb .GraphicsState ,_age *textState ,_bgd *stateStack )*textObject {return &textObject {_dbdb :_abff ,_ggde :_abad ,_ggda :_ebbgf ,_gegf :_bgd ,_abcg :_age ,_bdfa :_cg .IdentityMatrix (),_acdcf :_cg .IdentityMatrix ()};
};func (_cdgad rulingList )sort (){_ba .Slice (_cdgad ,_cdgad .comp )};func (_gbdd *shapesState )addPoint (_eec ,_ccf float64 ){_fbedc :=_gbdd .establishSubpath ();_bbbedf :=_gbdd .devicePoint (_eec ,_ccf );if _fbedc ==nil {_gbdd ._cdceb =true ;_gbdd ._efc =_bbbedf ;
}else {_fbedc .add (_bbbedf );};};func (_cdbed paraList )findTables (_gadd []gridTiling )[]*textTable {_cdbed .addNeighbours ();_ba .Slice (_cdbed ,func (_cbaf ,_eccea int )bool {return _fbd (_cdbed [_cbaf ],_cdbed [_eccea ])< 0});var _eaae []*textTable ;
if _edfeb {_eccbed :=_cdbed .findGridTables (_gadd );_eaae =append (_eaae ,_eccbed ...);};if _bcbe {_aefgf :=_cdbed .findTextTables ();_eaae =append (_eaae ,_aefgf ...);};return _eaae ;};func (_gddd *ruling )encloses (_ebaf ,_fefged float64 )bool {return _gddd ._fddc -_bbfd <=_ebaf &&_fefged <=_gddd ._begad +_bbfd ;
};func _bfgc (_gfca *textLine ,_ecbf []*textLine ,_cdda []float64 )float64 {var _eafdd float64 =-1;for _ ,_gbbg :=range _ecbf {if _gbbg ._fbgb > _gfca ._fbgb {if _ag .Round (_gbbg .Llx )>=_ag .Round (_gfca .Llx ){_eafdd =_gbbg ._fbgb ;}else {break ;};};
};return _eafdd ;};type imageExtractContext struct{_cfd []ImageMark ;_eac int ;_bdf int ;_dcg int ;_bcfa map[*_ad .PdfObjectStream ]*cachedImage ;_cfb *ImageExtractOptions ;_gedgc bool ;};func _cefad (_beec string )bool {for _ ,_adga :=range _beec {if !_g .IsSpace (_adga ){return false ;
};};return true ;};type fontEntry struct{_caeee *_ea .PdfFont ;_abafd int64 ;};func _afca (_gacd structElement )[]structElement {_cbce :=[]structElement {};for _ ,_ebacb :=range _gacd ._cfae {for _ ,_dba :=range _ebacb ._cfae {for _ ,_cdgce :=range _dba ._cfae {if _cdgce ._bef =="\u004c"{_cbce =append (_cbce ,_cdgce );
};};};};return _cbce ;};func (_fggg gridTile )complete ()bool {return _fggg .numBorders ()==4};func _ggaf (_gccaa ,_bbgb float64 )bool {return _ag .Abs (_gccaa -_bbgb )<=_bbfd };func (_fdgb lineRuling )xMean ()float64 {return 0.5*(_fdgb ._edfeg .X +_fdgb ._acdee .X )};


// String returns a string descibing `i`.
func (_efdfa gridTile )String ()string {_begd :=func (_daba bool ,_bdbab string )string {if _daba {return _bdbab ;};return "\u005f";};return _cf .Sprintf ("\u00256\u002e2\u0066\u0020\u0025\u0031\u0073%\u0031\u0073%\u0031\u0073\u0025\u0031\u0073",_efdfa .PdfRectangle ,_begd (_efdfa ._cafgb ,"\u004c"),_begd (_efdfa ._gcgff ,"\u0052"),_begd (_efdfa ._beag ,"\u0042"),_begd (_efdfa ._ddba ,"\u0054"));
};func (_bced paraList )lines ()[]*textLine {var _ddffg []*textLine ;for _ ,_gfcgb :=range _bced {_ddffg =append (_ddffg ,_gfcgb ._cebdg ...);};return _ddffg ;};type textResult struct{_adbg PageText ;_bcg int ;_baab int ;};var _feec =map[markKind ]string {_ccgcb :"\u0073\u0074\u0072\u006f\u006b\u0065",_eafad :"\u0066\u0069\u006c\u006c",_baeg :"\u0061u\u0067\u006d\u0065\u006e\u0074"};
func _ecbdb (_gdbbd []rulingList )(rulingList ,rulingList ){var _cggdg rulingList ;for _ ,_bdba :=range _gdbbd {_cggdg =append (_cggdg ,_bdba ...);};return _cggdg .vertsHorzs ();};

// Text returns the text content of the `bulletLists`.
func (_gcag *lists )Text ()string {_fdfg :=&_eb .Builder {};for _ ,_ddec :=range *_gcag {_fgcc :=_ddec .Text ();_fdfg .WriteString (_fgcc );};return _fdfg .String ();};

// RangeOffset returns the TextMarks in `ma` that overlap text[start:end] in the extracted text.
// These are tm: `start` <= tm.Offset + len(tm.Text) && tm.Offset < `end` where
// `start` and `end` are offsets in the extracted text.
// NOTE: TextMarks can contain multiple characters. e.g. "ffi" for the ﬃ ligature so the first and
// last elements of the returned TextMarkArray may only partially overlap text[start:end].
func (_aac *TextMarkArray )RangeOffset (start ,end int )(*TextMarkArray ,error ){if _aac ==nil {return nil ,_ed .New ("\u006da\u003d\u003d\u006e\u0069\u006c");};if end < start {return nil ,_cf .Errorf ("\u0065\u006e\u0064\u0020\u003c\u0020\u0073\u0074\u0061\u0072\u0074\u002e\u0020\u0052\u0061n\u0067\u0065\u004f\u0066\u0066\u0073\u0065\u0074\u0020\u006e\u006f\u0074\u0020d\u0065\u0066\u0069\u006e\u0065\u0064\u002e\u0020\u0073\u0074\u0061\u0072t=\u0025\u0064\u0020\u0065\u006e\u0064\u003d\u0025\u0064\u0020",start ,end );
};_afbde :=len (_aac ._bag );if _afbde ==0{return _aac ,nil ;};if start < _aac ._bag [0].Offset {start =_aac ._bag [0].Offset ;};if end > _aac ._bag [_afbde -1].Offset +1{end =_aac ._bag [_afbde -1].Offset +1;};_gac :=_ba .Search (_afbde ,func (_eeg int )bool {return _aac ._bag [_eeg ].Offset +len (_aac ._bag [_eeg ].Text )-1>=start });
if !(0<=_gac &&_gac < _afbde ){_cece :=_cf .Errorf ("\u004f\u0075\u0074\u0020\u006f\u0066\u0020\u0072\u0061\u006e\u0067\u0065\u002e\u0020\u0073\u0074\u0061\u0072\u0074\u003d%\u0064\u0020\u0069\u0053\u0074\u0061\u0072\u0074\u003d\u0025\u0064\u0020\u006c\u0065\u006e\u003d\u0025\u0064\u000a\u0009\u0066\u0069\u0072\u0073\u0074\u003d\u0025\u0076\u000a\u0009 \u006c\u0061\u0073\u0074\u003d%\u0076",start ,_gac ,_afbde ,_aac ._bag [0],_aac ._bag [_afbde -1]);
return nil ,_cece ;};_bceb :=_ba .Search (_afbde ,func (_edba int )bool {return _aac ._bag [_edba ].Offset > end -1});if !(0<=_bceb &&_bceb < _afbde ){_ecca :=_cf .Errorf ("\u004f\u0075\u0074\u0020\u006f\u0066\u0020r\u0061\u006e\u0067e\u002e\u0020\u0065n\u0064\u003d%\u0064\u0020\u0069\u0045\u006e\u0064=\u0025d \u006c\u0065\u006e\u003d\u0025\u0064\u000a\u0009\u0066\u0069\u0072\u0073\u0074\u003d\u0025\u0076\u000a\u0009\u0020\u006c\u0061\u0073\u0074\u003d\u0025\u0076",end ,_bceb ,_afbde ,_aac ._bag [0],_aac ._bag [_afbde -1]);
return nil ,_ecca ;};if _bceb <=_gac {return nil ,_cf .Errorf ("\u0069\u0045\u006e\u0064\u0020\u003c=\u0020\u0069\u0053\u0074\u0061\u0072\u0074\u003a\u0020\u0073\u0074\u0061\u0072\u0074\u003d\u0025\u0064\u0020\u0065\u006ed\u003d\u0025\u0064\u0020\u0069\u0053\u0074\u0061\u0072\u0074\u003d\u0025\u0064\u0020i\u0045n\u0064\u003d\u0025\u0064",start ,end ,_gac ,_bceb );
};return &TextMarkArray {_bag :_aac ._bag [_gac :_bceb ]},nil ;};func (_dcba *subpath )makeRectRuling (_egeg _d .Color )(*ruling ,bool ){if _aceg {_fc .Log .Info ("\u006d\u0061\u006beR\u0065\u0063\u0074\u0052\u0075\u006c\u0069\u006e\u0067\u003a\u0020\u0070\u0061\u0074\u0068\u003d\u0025\u0076",_dcba );
};_cdeb :=_dcba ._gfagc [:4];_afef :=make (map[int ]rulingKind ,len (_cdeb ));for _feda ,_deead :=range _cdeb {_feef :=_dcba ._gfagc [(_feda +1)%4];_afef [_feda ]=_cecb (_deead ,_feef );if _aceg {_cf .Printf ("\u0025\u0034\u0064: \u0025\u0073\u0020\u003d\u0020\u0025\u0036\u002e\u0032\u0066\u0020\u002d\u0020\u0025\u0036\u002e\u0032\u0066",_feda ,_afef [_feda ],_deead ,_feef );
};};if _aceg {_cf .Printf ("\u0020\u0020\u0020\u006b\u0069\u006e\u0064\u0073\u003d\u0025\u002b\u0076\u000a",_afef );};var _gcffb ,_eccc []int ;for _aagc ,_acgca :=range _afef {switch _acgca {case _ecacd :_eccc =append (_eccc ,_aagc );case _bgcg :_gcffb =append (_gcffb ,_aagc );
};};if _aceg {_cf .Printf ("\u0020\u0020 \u0068\u006f\u0072z\u0073\u003d\u0025\u0064\u0020\u0025\u002b\u0076\u000a",len (_eccc ),_eccc );_cf .Printf ("\u0020\u0020 \u0076\u0065\u0072t\u0073\u003d\u0025\u0064\u0020\u0025\u002b\u0076\u000a",len (_gcffb ),_gcffb );
};_ecfe :=(len (_eccc )==2&&len (_gcffb )==2)||(len (_eccc )==2&&len (_gcffb )==0&&_eabba (_cdeb [_eccc [0]],_cdeb [_eccc [1]]))||(len (_gcffb )==2&&len (_eccc )==0&&_eeddd (_cdeb [_gcffb [0]],_cdeb [_gcffb [1]]));if _aceg {_cf .Printf (" \u0020\u0020\u0068\u006f\u0072\u007as\u003d\u0025\u0064\u0020\u0076\u0065\u0072\u0074\u0073=\u0025\u0064\u0020o\u006b=\u0025\u0074\u000a",len (_eccc ),len (_gcffb ),_ecfe );
};if !_ecfe {if _aceg {_fc .Log .Error ("\u0021!\u006d\u0061\u006b\u0065R\u0065\u0063\u0074\u0052\u0075l\u0069n\u0067:\u0020\u0070\u0061\u0074\u0068\u003d\u0025v",_dcba );_cf .Printf (" \u0020\u0020\u0068\u006f\u0072\u007as\u003d\u0025\u0064\u0020\u0076\u0065\u0072\u0074\u0073=\u0025\u0064\u0020o\u006b=\u0025\u0074\u000a",len (_eccc ),len (_gcffb ),_ecfe );
};return &ruling {},false ;};if len (_gcffb )==0{for _gcdc ,_dagdf :=range _afef {if _dagdf !=_ecacd {_gcffb =append (_gcffb ,_gcdc );};};};if len (_eccc )==0{for _fdace ,_baea :=range _afef {if _baea !=_bgcg {_eccc =append (_eccc ,_fdace );};};};if _aceg {_fc .Log .Info ("\u006da\u006b\u0065R\u0065\u0063\u0074\u0052u\u006c\u0069\u006eg\u003a\u0020\u0068\u006f\u0072\u007a\u0073\u003d\u0025d \u0076\u0065\u0072t\u0073\u003d%\u0064\u0020\u0070\u006f\u0069\u006et\u0073\u003d%\u0064\u000a"+"\u0009\u0020\u0068o\u0072\u007a\u0073\u003d\u0025\u002b\u0076\u000a"+"\u0009\u0020\u0076e\u0072\u0074\u0073\u003d\u0025\u002b\u0076\u000a"+"\t\u0070\u006f\u0069\u006e\u0074\u0073\u003d\u0025\u002b\u0076",len (_eccc ),len (_gcffb ),len (_cdeb ),_eccc ,_gcffb ,_cdeb );
};var _agdf ,_cbgd ,_afda ,_dgdd _cg .Point ;if _cdeb [_eccc [0]].Y > _cdeb [_eccc [1]].Y {_afda ,_dgdd =_cdeb [_eccc [0]],_cdeb [_eccc [1]];}else {_afda ,_dgdd =_cdeb [_eccc [1]],_cdeb [_eccc [0]];};if _cdeb [_gcffb [0]].X > _cdeb [_gcffb [1]].X {_agdf ,_cbgd =_cdeb [_gcffb [0]],_cdeb [_gcffb [1]];
}else {_agdf ,_cbgd =_cdeb [_gcffb [1]],_cdeb [_gcffb [0]];};_cbbg :=_ea .PdfRectangle {Llx :_agdf .X ,Urx :_cbgd .X ,Lly :_dgdd .Y ,Ury :_afda .Y };if _cbbg .Llx > _cbbg .Urx {_cbbg .Llx ,_cbbg .Urx =_cbbg .Urx ,_cbbg .Llx ;};if _cbbg .Lly > _cbbg .Ury {_cbbg .Lly ,_cbbg .Ury =_cbbg .Ury ,_cbbg .Lly ;
};_bfcg :=rectRuling {PdfRectangle :_cbbg ,_bfdc :_bdfe (_cbbg ),Color :_egeg };if _bfcg ._bfdc ==_badgc {if _aceg {_fc .Log .Error ("\u006da\u006b\u0065\u0052\u0065\u0063\u0074\u0052\u0075\u006c\u0069\u006eg\u003a\u0020\u006b\u0069\u006e\u0064\u003d\u006e\u0069\u006c");
};return nil ,false ;};_dfabb ,_fcfa :=_bfcg .asRuling ();if !_fcfa {if _aceg {_fc .Log .Error ("\u006da\u006b\u0065\u0052\u0065c\u0074\u0052\u0075\u006c\u0069n\u0067:\u0020!\u0069\u0073\u0052\u0075\u006c\u0069\u006eg");};return nil ,false ;};if _gbbe {_cf .Printf ("\u0020\u0020\u0020\u0072\u003d\u0025\u0073\u000a",_dfabb .String ());
};return _dfabb ,true ;};func _afbcec (_gdfde string ,_eeccd int )string {if len (_gdfde )< _eeccd {return _gdfde ;};return _gdfde [:_eeccd ];};func _bfcef (_abeab []*textLine ,_dgeb map[float64 ][]*textLine )[]*list {_fbbe :=_cdbbf (_dgeb );_dgagg :=[]*list {};
if len (_fbbe )==0{return _dgagg ;};_cfcf :=_fbbe [0];_bega :=1;_cdeac :=_dgeb [_cfcf ];for _gegea ,_efad :=range _cdeac {var _dfabe float64 ;_cbgc :=[]*list {};_dbag :=_efad ._fbgb ;_cgfdf :=-1.0;if _gegea < len (_cdeac )-1{_cgfdf =_cdeac [_gegea +1]._fbgb ;
};if _bega < len (_fbbe ){_cbgc =_dace (_abeab ,_dgeb ,_fbbe ,_bega ,_dbag ,_cgfdf );};_dfabe =_cgfdf ;if len (_cbgc )> 0{_accc :=_cbgc [0];if len (_accc ._addb )> 0{_dfabe =_accc ._addb [0]._fbgb ;};};_gegc :=[]*textLine {_efad };_gccc :=_bdacfc (_efad ,_abeab ,_fbbe ,_dbag ,_dfabe );
_gegc =append (_gegc ,_gccc ...);_eafd :=_gaag (_gegc ,"\u0062\u0075\u006c\u006c\u0065\u0074",_cbgc );_eafd ._eeefb =_cgcb (_gegc ,"");_dgagg =append (_dgagg ,_eafd );};return _dgagg ;};

// String returns a human readable description of `ss`.
func (_bccb *shapesState )String ()string {return _cf .Sprintf ("\u007b\u0025\u0064\u0020su\u0062\u0070\u0061\u0074\u0068\u0073\u0020\u0066\u0072\u0065\u0073\u0068\u003d\u0025t\u007d",len (_bccb ._agbgb ),_bccb ._cdceb );};func (_ggee *shapesState )drawRectangle (_egec ,_aed ,_aag ,_ddff float64 ){if _dfcf {_gbff :=_ggee .devicePoint (_egec ,_aed );
_eebb :=_ggee .devicePoint (_egec +_aag ,_aed +_ddff );_defef :=_ea .PdfRectangle {Llx :_gbff .X ,Lly :_gbff .Y ,Urx :_eebb .X ,Ury :_eebb .Y };_fc .Log .Info ("d\u0072a\u0077\u0052\u0065\u0063\u0074\u0061\u006e\u0067l\u0065\u003a\u0020\u00256.\u0032\u0066",_defef );
};_ggee .newSubPath ();_ggee .moveTo (_egec ,_aed );_ggee .lineTo (_egec +_aag ,_aed );_ggee .lineTo (_egec +_aag ,_aed +_ddff );_ggee .lineTo (_egec ,_aed +_ddff );_ggee .closePath ();};type textState struct{_gfc float64 ;_aade float64 ;_cccc float64 ;
_acge float64 ;_fgfa float64 ;_afbd RenderMode ;_gbb float64 ;_egcgg *_ea .PdfFont ;_caa _ea .PdfRectangle ;_febd int ;_dcee int ;};func (_eddf rulingList )toTilings ()(rulingList ,[]gridTiling ){_eddf .log ("\u0074o\u0054\u0069\u006c\u0069\u006e\u0067s");
if len (_eddf )==0{return nil ,nil ;};_eddf =_eddf .tidied ("\u0061\u006c\u006c");_eddf .log ("\u0074\u0069\u0064\u0069\u0065\u0064");_aacf :=_eddf .toGrids ();_cecd :=make ([]gridTiling ,len (_aacf ));for _deac ,_adde :=range _aacf {_cecd [_deac ]=_adde .asTiling ();
};return _eddf ,_cecd ;};func (_ddgd *subpath )clear (){*_ddgd =subpath {}};func (_fgffd rulingList )secMinMax ()(float64 ,float64 ){_agfc ,_ffbbcb :=_fgffd [0]._fddc ,_fgffd [0]._begad ;for _ ,_efee :=range _fgffd [1:]{if _efee ._fddc < _agfc {_agfc =_efee ._fddc ;
};if _efee ._begad > _ffbbcb {_ffbbcb =_efee ._begad ;};};return _agfc ,_ffbbcb ;};func (_aaa *textObject )renderText (_dgcf _ad .PdfObject ,_eaba []byte ,_caeb int ,_gaaa string )error {if _aaa ._ecce {_fc .Log .Debug ("\u0072\u0065\u006e\u0064\u0065r\u0054\u0065\u0078\u0074\u003a\u0020\u0049\u006e\u0076\u0061\u006c\u0069\u0064 \u0066\u006f\u006e\u0074\u002e\u0020\u004e\u006f\u0074\u0020\u0070\u0072\u006f\u0063\u0065\u0073\u0073\u0069\u006e\u0067\u002e");
return nil ;};_dbcf :=_aaa .getCurrentFont ();_gcbd :=_dbcf .BytesToCharcodes (_eaba );_cfcc ,_fdd ,_cagef :=_dbcf .CharcodesToStrings (_gcbd ,_gaaa );if _cagef > 0{_fc .Log .Debug ("\u0072\u0065nd\u0065\u0072\u0054e\u0078\u0074\u003a\u0020num\u0043ha\u0072\u0073\u003d\u0025\u0064\u0020\u006eum\u004d\u0069\u0073\u0073\u0065\u0073\u003d%\u0064",_fdd ,_cagef );
};_aaa ._abcg ._febd +=_fdd ;_aaa ._abcg ._dcee +=_cagef ;_beac :=_aaa ._abcg ;_aafb :=_beac ._fgfa ;_bda :=_beac ._cccc /100.0;_ecee :=_fgaf ;if _dbcf .Subtype ()=="\u0054\u0079\u0070e\u0033"{_ecee =1;};_fcad ,_cdcc :=_dbcf .GetRuneMetrics (' ');if !_cdcc {_fcad ,_cdcc =_dbcf .GetCharMetrics (32);
};if !_cdcc {_fcad ,_ =_ea .DefaultFont ().GetRuneMetrics (' ');};_gccb :=_fcad .Wx *_ecee ;_fc .Log .Trace ("\u0073p\u0061\u0063e\u0057\u0069\u0064t\u0068\u003d\u0025\u002e\u0032\u0066\u0020t\u0065\u0078\u0074\u003d\u0025\u0071 \u0066\u006f\u006e\u0074\u003d\u0025\u0073\u0020\u0066\u006f\u006et\u0053\u0069\u007a\u0065\u003d\u0025\u002e\u0032\u0066",_gccb ,_cfcc ,_dbcf ,_aafb );
_ecgg :=_cg .NewMatrix (_aafb *_bda ,0,0,_aafb ,0,_beac ._gbb );if _fdaf {_fc .Log .Info ("\u0072\u0065\u006e\u0064\u0065\u0072T\u0065\u0078\u0074\u003a\u0020\u0025\u0064\u0020\u0063\u006f\u0064\u0065\u0073=\u0025\u002b\u0076\u0020\u0074\u0065\u0078t\u0073\u003d\u0025\u0071",len (_gcbd ),_gcbd ,_cfcc );
};_fc .Log .Trace ("\u0072\u0065\u006e\u0064\u0065\u0072T\u0065\u0078\u0074\u003a\u0020\u0025\u0064\u0020\u0063\u006f\u0064\u0065\u0073=\u0025\u002b\u0076\u0020\u0072\u0075\u006ee\u0073\u003d\u0025\u0071",len (_gcbd ),_gcbd ,len (_cfcc ));_ebcf :=_aaa .getFillColor ();
_dgag :=_aaa .getStrokeColor ();for _ege ,_aeae :=range _cfcc {_bfcb :=[]rune (_aeae );if len (_bfcb )==1&&_bfcb [0]=='\x00'{continue ;};_bad :=_gcbd [_ege ];_cda :=_aaa ._ggda .CTM .Mult (_aaa ._bdfa ).Mult (_ecgg );_edbc :=0.0;if len (_bfcb )==1&&_bfcb [0]==32{_edbc =_beac ._aade ;
};_adca ,_eggd :=_dbcf .GetCharMetrics (_bad );if !_eggd {_fc .Log .Debug ("\u0045R\u0052\u004fR\u003a\u0020\u004e\u006f \u006d\u0065\u0074r\u0069\u0063\u0020\u0066\u006f\u0072\u0020\u0063\u006fde\u003d\u0025\u0064 \u0072\u003d0\u0078\u0025\u0030\u0034\u0078\u003d%\u002b\u0071 \u0025\u0073",_bad ,_bfcb ,_bfcb ,_dbcf );
return _cf .Errorf ("\u006e\u006f\u0020\u0063\u0068\u0061\u0072\u0020\u006d\u0065\u0074\u0072\u0069\u0063\u0073:\u0020f\u006f\u006e\u0074\u003d\u0025\u0073\u0020\u0063\u006f\u0064\u0065\u003d\u0025\u0064",_dbcf .String (),_bad );};_eedc :=_cg .Point {X :_adca .Wx *_ecee ,Y :_adca .Wy *_ecee };
_aec :=_cg .Point {X :(_eedc .X *_aafb +_edbc )*_bda };_gdfg :=_cg .Point {X :(_eedc .X *_aafb +_beac ._gfc +_edbc )*_bda };if _fdaf {_fc .Log .Info ("\u0074\u0066\u0073\u003d\u0025\u002e\u0032\u0066\u0020\u0074\u0063\u003d\u0025\u002e\u0032f\u0020t\u0077\u003d\u0025\u002e\u0032\u0066\u0020\u0074\u0068\u003d\u0025\u002e\u0032\u0066",_aafb ,_beac ._gfc ,_beac ._aade ,_bda );
_fc .Log .Info ("\u0064x\u002c\u0064\u0079\u003d%\u002e\u0033\u0066\u0020\u00740\u003d%\u002e3\u0066\u0020\u0074\u003d\u0025\u002e\u0033f",_eedc ,_aec ,_gdfg );};_bdfd :=_eead (_aec );_babea :=_eead (_gdfg );_egbgc :=_aaa ._ggda .CTM .Mult (_aaa ._bdfa ).Mult (_bdfd );
if _fgffe {_fc .Log .Info ("e\u006e\u0064\u003a\u000a\tC\u0054M\u003d\u0025\u0073\u000a\u0009 \u0074\u006d\u003d\u0025\u0073\u000a"+"\u0009\u0020t\u0064\u003d\u0025s\u0020\u0078\u006c\u0061\u0074\u003d\u0025\u0073\u000a"+"\u0009t\u0064\u0030\u003d\u0025s\u000a\u0009\u0020\u0020\u2192 \u0025s\u0020x\u006c\u0061\u0074\u003d\u0025\u0073",_aaa ._ggda .CTM ,_aaa ._bdfa ,_babea ,_daaf (_aaa ._ggda .CTM .Mult (_aaa ._bdfa ).Mult (_babea )),_bdfd ,_egbgc ,_daaf (_egbgc ));
};_edfa ,_dbcff :=_aaa .newTextMark (_edc .ExpandLigatures (_bfcb ),_cda ,_daaf (_egbgc ),_ag .Abs (_gccb *_cda .ScalingFactorX ()),_dbcf ,_aaa ._abcg ._gfc ,_ebcf ,_dgag ,_dgcf ,_cfcc ,_ege ,_caeb );if !_dbcff {_fc .Log .Debug ("\u0054\u0065\u0078\u0074\u0020\u006d\u0061\u0072\u006b\u0020\u006f\u0075\u0074\u0073\u0069d\u0065 \u0070\u0061\u0067\u0065\u002e\u0020\u0053\u006b\u0069\u0070\u0070\u0069\u006e\u0067");
continue ;};if _dbcf ==nil {_fc .Log .Debug ("\u0045R\u0052O\u0052\u003a\u0020\u004e\u006f\u0020\u0066\u006f\u006e\u0074\u002e");}else if _dbcf .Encoder ()==nil {_fc .Log .Debug ("E\u0052\u0052\u004f\u0052\u003a\u0020N\u006f\u0020\u0065\u006e\u0063\u006f\u0064\u0069\u006eg\u002e\u0020\u0066o\u006et\u003d\u0025\u0073",_dbcf );
}else {if _caee ,_dbg :=_dbcf .Encoder ().CharcodeToRune (_bad );_dbg {_edfa ._aeef =string (_caee );};};_fc .Log .Trace ("i\u003d\u0025\u0064\u0020\u0063\u006fd\u0065\u003d\u0025\u0064\u0020\u006d\u0061\u0072\u006b=\u0025\u0073\u0020t\u0072m\u003d\u0025\u0073",_ege ,_bad ,_edfa ,_cda );
_aaa ._afgad =append (_aaa ._afgad ,&_edfa );_aaa ._bdfa .Concat (_babea );};return nil ;};func (_ecbbb *textTable )subdivide ()*textTable {_ecbbb .logComposite ("\u0073u\u0062\u0064\u0069\u0076\u0069\u0064e");_fgbcb :=_ecbbb .compositeRowCorridors ();
_ccd :=_ecbbb .compositeColCorridors ();if _dgda {_fc .Log .Info ("\u0073u\u0062\u0064i\u0076\u0069\u0064\u0065:\u000a\u0009\u0072o\u0077\u0043\u006f\u0072\u0072\u0069\u0064\u006f\u0072s=\u0025\u0073\u000a\t\u0063\u006fl\u0043\u006f\u0072\u0072\u0069\u0064o\u0072\u0073=\u0025\u0073",_ggeb (_fgbcb ),_ggeb (_ccd ));
};if len (_fgbcb )==0||len (_ccd )==0{return _ecbbb ;};_fgdc (_fgbcb );_fgdc (_ccd );if _dgda {_fc .Log .Info ("\u0073\u0075\u0062\u0064\u0069\u0076\u0069\u0064\u0065\u0020\u0066\u0069\u0078\u0065\u0064\u003a\u000a\u0009r\u006f\u0077\u0043\u006f\u0072\u0072\u0069d\u006f\u0072\u0073\u003d\u0025\u0073\u000a\u0009\u0063\u006f\u006cC\u006f\u0072\u0072\u0069\u0064\u006f\u0072\u0073\u003d\u0025\u0073",_ggeb (_fgbcb ),_ggeb (_ccd ));
};_fdef ,_fecga :=_cgeae (_ecbbb ._ebaab ,_fgbcb );_gead ,_edddc :=_cgeae (_ecbbb ._agaf ,_ccd );_feadf :=make (map[uint64 ]*textPara ,_edddc *_fecga );_fccb :=&textTable {PdfRectangle :_ecbbb .PdfRectangle ,_agae :_ecbbb ._agae ,_ebaab :_fecga ,_agaf :_edddc ,_aaedb :_feadf };
if _dgda {_fc .Log .Info ("\u0073\u0075b\u0064\u0069\u0076\u0069\u0064\u0065\u003a\u0020\u0063\u006f\u006d\u0070\u006f\u0073\u0069\u0074\u0065\u0020\u003d\u0020\u0025\u0064\u0020\u0078\u0020\u0025\u0064\u0020\u0063\u0065\u006c\u006c\u0073\u003d\u0020\u0025\u0064\u0020\u0078\u0020\u0025\u0064\u000a"+"\u0009\u0072\u006f\u0077\u0043\u006f\u0072\u0072\u0069\u0064\u006f\u0072s\u003d\u0025\u0073\u000a"+"\u0009\u0063\u006f\u006c\u0043\u006f\u0072\u0072\u0069\u0064\u006f\u0072s\u003d\u0025\u0073\u000a"+"\u0009\u0079\u004f\u0066\u0066\u0073\u0065\u0074\u0073=\u0025\u002b\u0076\u000a"+"\u0009\u0078\u004f\u0066\u0066\u0073\u0065\u0074\u0073\u003d\u0025\u002b\u0076",_ecbbb ._agaf ,_ecbbb ._ebaab ,_edddc ,_fecga ,_ggeb (_fgbcb ),_ggeb (_ccd ),_fdef ,_gead );
};for _eeeb :=0;_eeeb < _ecbbb ._ebaab ;_eeeb ++{_fbdg :=_fdef [_eeeb ];for _bfgg :=0;_bfgg < _ecbbb ._agaf ;_bfgg ++{_cbbc :=_gead [_bfgg ];if _dgda {_cf .Printf ("\u0025\u0036\u0064\u002c %\u0032\u0064\u003a\u0020\u0078\u0030\u003d\u0025\u0064\u0020\u0079\u0030\u003d\u0025d\u000a",_bfgg ,_eeeb ,_cbbc ,_fbdg );
};_dcdedf ,_aacaa :=_ecbbb ._ecag [_fcgc (_bfgg ,_eeeb )];if !_aacaa {continue ;};_abbgf :=_dcdedf .split (_fgbcb [_eeeb ],_ccd [_bfgg ]);for _ffdf :=0;_ffdf < _abbgf ._ebaab ;_ffdf ++{for _bdcae :=0;_bdcae < _abbgf ._agaf ;_bdcae ++{_fefaa :=_abbgf .get (_bdcae ,_ffdf );
_fccb .put (_cbbc +_bdcae ,_fbdg +_ffdf ,_fefaa );if _dgda {_cf .Printf ("\u0025\u0038\u0064\u002c\u0020\u0025\u0032\u0064\u003a\u0020\u0025\u0073\u000a",_cbbc +_bdcae ,_fbdg +_ffdf ,_fefaa );};};};};};return _fccb ;};type lists []*list ;func (_eced *ruling )alignsPrimary (_dafcf *ruling )bool {return _eced ._gddac ==_dafcf ._gddac &&_ag .Abs (_eced ._cafa -_dafcf ._cafa )< _ggf *0.5;
};func (_begag paraList )writeText (_cebd _e .Writer ){for _afaa ,_bgec :=range _begag {if _bgec ._cdgcg {continue ;};_bgec .writeText (_cebd );if _afaa !=len (_begag )-1{if _fcbea (_bgec ,_begag [_afaa +1]){_cebd .Write ([]byte ("\u0020"));}else {_cebd .Write ([]byte ("\u000a"));
_cebd .Write ([]byte ("\u000a"));};};};_cebd .Write ([]byte ("\u000a"));_cebd .Write ([]byte ("\u000a"));};func _cgeae (_dgfab int ,_agcdcf map[int ][]float64 )([]int ,int ){_cgeaa :=make ([]int ,_dgfab );_gddad :=0;for _feecb :=0;_feecb < _dgfab ;_feecb ++{_cgeaa [_feecb ]=_gddad ;
_gddad +=len (_agcdcf [_feecb ])+1;};return _cgeaa ,_gddad ;};type paraList []*textPara ;func _aefa (_fdag map[int ][]float64 )[]int {_eccca :=make ([]int ,len (_fdag ));_fdfgc :=0;for _ggef :=range _fdag {_eccca [_fdfgc ]=_ggef ;_fdfgc ++;};_ba .Ints (_eccca );
return _eccca ;};func (_adgf *textObject )newTextMark (_fbfa string ,_daeea _cg .Matrix ,_fddb _cg .Point ,_fcaee float64 ,_cbdeb *_ea .PdfFont ,_ceddf float64 ,_cfbd ,_eafdb _d .Color ,_ggcc _ad .PdfObject ,_cfdab []string ,_bdgc int ,_egecb int )(textMark ,bool ){_bcgff :=_daeea .Angle ();
_dadfc :=_bffba (_bcgff ,_afdc );var _fagg float64 ;if _dadfc %180!=90{_fagg =_daeea .ScalingFactorY ();}else {_fagg =_daeea .ScalingFactorX ();};_eedde :=_daaf (_daeea );_efaf :=_ea .PdfRectangle {Llx :_eedde .X ,Lly :_eedde .Y ,Urx :_fddb .X ,Ury :_fddb .Y };
switch _dadfc %360{case 90:_efaf .Urx -=_fagg ;case 180:_efaf .Ury -=_fagg ;case 270:_efaf .Urx +=_fagg ;case 0:_efaf .Ury +=_fagg ;default:_dadfc =0;_efaf .Ury +=_fagg ;};if _efaf .Llx > _efaf .Urx {_efaf .Llx ,_efaf .Urx =_efaf .Urx ,_efaf .Llx ;};if _efaf .Lly > _efaf .Ury {_efaf .Lly ,_efaf .Ury =_efaf .Ury ,_efaf .Lly ;
};_abbc :=true ;if _adgf ._dbdb ._gdb .Width ()> 0{_egdc ,_gcfed :=_fcag (_efaf ,_adgf ._dbdb ._gdb );if !_gcfed {_abbc =false ;_fc .Log .Debug ("\u0054\u0065\u0078\u0074\u0020m\u0061\u0072\u006b\u0020\u006f\u0075\u0074\u0073\u0069\u0064\u0065\u0020\u0070a\u0067\u0065\u002e\u0020\u0062\u0062\u006f\u0078\u003d\u0025\u0067\u0020\u006d\u0065\u0064\u0069\u0061\u0042\u006f\u0078\u003d\u0025\u0067\u0020\u0074\u0065\u0078\u0074\u003d\u0025q",_efaf ,_adgf ._dbdb ._gdb ,_fbfa );
};_efaf =_egdc ;};_gedgb :=_efaf ;_babgb :=_adgf ._dbdb ._gdb ;switch _dadfc %360{case 90:_babgb .Urx ,_babgb .Ury =_babgb .Ury ,_babgb .Urx ;_gedgb =_ea .PdfRectangle {Llx :_babgb .Urx -_efaf .Ury ,Urx :_babgb .Urx -_efaf .Lly ,Lly :_efaf .Llx ,Ury :_efaf .Urx };
case 180:_gedgb =_ea .PdfRectangle {Llx :_babgb .Urx -_efaf .Llx ,Urx :_babgb .Urx -_efaf .Urx ,Lly :_babgb .Ury -_efaf .Lly ,Ury :_babgb .Ury -_efaf .Ury };case 270:_babgb .Urx ,_babgb .Ury =_babgb .Ury ,_babgb .Urx ;_gedgb =_ea .PdfRectangle {Llx :_efaf .Ury ,Urx :_efaf .Lly ,Lly :_babgb .Ury -_efaf .Llx ,Ury :_babgb .Ury -_efaf .Urx };
};if _gedgb .Llx > _gedgb .Urx {_gedgb .Llx ,_gedgb .Urx =_gedgb .Urx ,_gedgb .Llx ;};if _gedgb .Lly > _gedgb .Ury {_gedgb .Lly ,_gedgb .Ury =_gedgb .Ury ,_gedgb .Lly ;};_dabc :=textMark {_cddae :_fbfa ,PdfRectangle :_gedgb ,_ggac :_efaf ,_gggf :_cbdeb ,_afcb :_fagg ,_ggcf :_ceddf ,_babgc :_daeea ,_eaeb :_fddb ,_dggag :_dadfc ,_efcf :_cfbd ,_deba :_eafdb ,_ecffb :_ggcc ,_eegc :_cfdab ,Th :_adgf ._abcg ._cccc ,Tw :_adgf ._abcg ._aade ,_bfcfc :_egecb ,_cebee :_bdgc };
if _dbge {_fc .Log .Info ("n\u0065\u0077\u0054\u0065\u0078\u0074M\u0061\u0072\u006b\u003a\u0020\u0073t\u0061\u0072\u0074\u003d\u0025\u002e\u0032f\u0020\u0065\u006e\u0064\u003d\u0025\u002e\u0032\u0066\u0020%\u0073",_eedde ,_fddb ,_dabc .String ());};return _dabc ,_abbc ;
};func _cgcb (_dcfdf []*textLine ,_gbdf string )string {var _ceg _eb .Builder ;_gdcad :=0.0;for _gcbg ,_egfe :=range _dcfdf {_gcbb :=_egfe .text ();_deb :=_egfe ._fbgb ;if _gcbg < len (_dcfdf )-1{_gdcad =_dcfdf [_gcbg +1]._fbgb ;}else {_gdcad =0.0;};_ceg .WriteString (_gbdf );
_ceg .WriteString (_gcbb );if _gdcad !=_deb {_ceg .WriteString ("\u000a");}else {_ceg .WriteString ("\u0020");};};return _ceg .String ();};var _bce =[]string {"\u0041\u004e","\u0041\u004e","\u0041\u004e","\u0041\u004e","\u0041\u004e","\u0041\u004e","\u004f\u004e","\u004f\u004e","\u0041\u004c","\u0045\u0054","\u0045\u0054","\u0041\u004c","\u0043\u0053","\u0041\u004c","\u004f\u004e","\u004f\u004e","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u0041\u004c","\u0041\u004c","","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u0041\u004e","\u0041\u004e","\u0041\u004e","\u0041\u004e","\u0041\u004e","\u0041\u004e","\u0041\u004e","\u0041\u004e","\u0041\u004e","\u0041\u004e","\u0045\u0054","\u0041\u004e","\u0041\u004e","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u004e\u0053\u004d","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u0041\u004e","\u004f\u004e","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u0041\u004c","\u0041\u004c","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004f\u004e","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u0041\u004c","\u0041\u004c","\u0045\u004e","\u0045\u004e","\u0045\u004e","\u0045\u004e","\u0045\u004e","\u0045\u004e","\u0045\u004e","\u0045\u004e","\u0045\u004e","\u0045\u004e","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c"};
func (_bfdd *textLine )markWordBoundaries (){_egga :=_fff *_bfdd ._faee ;for _faeea ,_aeb :=range _bfdd ._bbada [1:]{if _fdbgb (_aeb ,_bfdd ._bbada [_faeea ])>=_egga {_aeb ._edfc =true ;};};};func (_gfded *textTable )bbox ()_ea .PdfRectangle {return _gfded .PdfRectangle };
func _dbgd (_ebbdc *wordBag ,_adea *textWord ,_egdf float64 )bool {return _ebbdc .Urx <=_adea .Llx &&_adea .Llx < _ebbdc .Urx +_egdf ;};

// String returns a description of `v`.
func (_abcff *ruling )String ()string {if _abcff ._gddac ==_badgc {return "\u004e\u004f\u0054\u0020\u0052\u0055\u004c\u0049\u004e\u0047";};_febc ,_bbceg :="\u0078","\u0079";if _abcff ._gddac ==_ecacd {_febc ,_bbceg ="\u0079","\u0078";};_aacg :="";if _abcff ._gcccd !=0.0{_aacg =_cf .Sprintf (" \u0077\u0069\u0064\u0074\u0068\u003d\u0025\u002e\u0032\u0066",_abcff ._gcccd );
};return _cf .Sprintf ("\u0025\u00310\u0073\u0020\u0025\u0073\u003d\u0025\u0036\u002e\u0032\u0066\u0020\u0025\u0073\u003d\u0025\u0036\u002e\u0032\u0066\u0020\u002d\u0020\u0025\u0036\u002e\u0032\u0066\u0020\u0028\u0025\u0036\u002e\u0032\u0066\u0029\u0020\u0025\u0073\u0020\u0025\u0076\u0025\u0073",_abcff ._gddac ,_febc ,_abcff ._cafa ,_bbceg ,_abcff ._fddc ,_abcff ._begad ,_abcff ._begad -_abcff ._fddc ,_abcff ._afbc ,_abcff .Color ,_aacg );
};func (_ebge paraList )sortReadingOrder (){_fc .Log .Trace ("\u0073\u006fr\u0074\u0052\u0065\u0061\u0064i\u006e\u0067\u004f\u0072\u0064e\u0072\u003a\u0020\u0070\u0061\u0072\u0061\u0073\u003d\u0025\u0064\u0020\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u0078\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d",len (_ebge ));
if len (_ebge )<=1{return ;};_ebge .computeEBBoxes ();_ba .Slice (_ebge ,func (_fcbeb ,_efcab int )bool {return _ecbc (_ebge [_fcbeb ],_ebge [_efcab ])<=0});};func (_cfccd gridTile )contains (_gbeg _ea .PdfRectangle )bool {if _cfccd .numBorders ()< 3{return false ;
};if _cfccd ._cafgb &&_gbeg .Llx < _cfccd .Llx -_begee {return false ;};if _cfccd ._gcgff &&_gbeg .Urx > _cfccd .Urx +_begee {return false ;};if _cfccd ._beag &&_gbeg .Lly < _cfccd .Lly -_begee {return false ;};if _cfccd ._ddba &&_gbeg .Ury > _cfccd .Ury +_begee {return false ;
};return true ;};func (_dcfg rulingList )primaries ()[]float64 {_gfddd :=make (map[float64 ]struct{},len (_dcfg ));for _ ,_cecf :=range _dcfg {_gfddd [_cecf ._cafa ]=struct{}{};};_afccf :=make ([]float64 ,len (_gfddd ));_bfcee :=0;for _afdf :=range _gfddd {_afccf [_bfcee ]=_afdf ;
_bfcee ++;};_ba .Float64s (_afccf );return _afccf ;};func _fgdc (_ffge map[int ][]float64 ){if len (_ffge )<=1{return ;};_dddg :=_aefa (_ffge );if _dgda {_fc .Log .Info ("\u0066i\u0078C\u0065\u006c\u006c\u0073\u003a \u006b\u0065y\u0073\u003d\u0025\u002b\u0076",_dddg );
};var _aaaag ,_acdeb int ;for _aaaag ,_acdeb =range _dddg {if _ffge [_acdeb ]!=nil {break ;};};for _bbca ,_cbade :=range _dddg [_aaaag :]{_dbcfe :=_ffge [_cbade ];if _dbcfe ==nil {continue ;};if _dgda {_cf .Printf ("\u0025\u0034\u0064\u003a\u0020\u006b\u0030\u003d\u0025\u0064\u0020\u006b1\u003d\u0025\u0064\u000a",_aaaag +_bbca ,_acdeb ,_cbade );
};_dgbfa :=_ffge [_cbade ];if _dgbfa [len (_dgbfa )-1]> _dbcfe [0]{_dgbfa [len (_dgbfa )-1]=_dbcfe [0];_ffge [_acdeb ]=_dgbfa ;};_acdeb =_cbade ;};};type cachedImage struct{_cff *_ea .Image ;_cag _ea .PdfColorspace ;};func (_fdfdb *textTable )emptyCompositeColumn (_efcef int )bool {for _dcda :=0;
_dcda < _fdfdb ._ebaab ;_dcda ++{if _ggggf ,_bcaega :=_fdfdb ._ecag [_fcgc (_efcef ,_dcda )];_bcaega {if len (_ggggf .paraList )> 0{return false ;};};};return true ;};func (_cgaccf rulingList )primMinMax ()(float64 ,float64 ){_aafed ,_fcda :=_cgaccf [0]._cafa ,_cgaccf [0]._cafa ;
for _ ,_aefef :=range _cgaccf [1:]{if _aefef ._cafa < _aafed {_aafed =_aefef ._cafa ;}else if _aefef ._cafa > _fcda {_fcda =_aefef ._cafa ;};};return _aafed ,_fcda ;};type stateStack []*textState ;func _bdcbb (_dafe ,_effb _bc .Image )_bc .Image {_gaga ,_abgg :=_effb .Bounds ().Size (),_dafe .Bounds ().Size ();
_ecbdf ,_ccff :=_gaga .X ,_gaga .Y ;if _abgg .X > _ecbdf {_ecbdf =_abgg .X ;};if _abgg .Y > _ccff {_ccff =_abgg .Y ;};_gcea :=_bc .Rect (0,0,_ecbdf ,_ccff );if _gaga .X !=_ecbdf ||_gaga .Y !=_ccff {_ceabg :=_bc .NewRGBA (_gcea );_gd .BiLinear .Scale (_ceabg ,_gcea ,_dafe ,_effb .Bounds (),_gd .Over ,nil );
_effb =_ceabg ;};if _abgg .X !=_ecbdf ||_abgg .Y !=_ccff {_ebgef :=_bc .NewRGBA (_gcea );_gd .BiLinear .Scale (_ebgef ,_gcea ,_dafe ,_dafe .Bounds (),_gd .Over ,nil );_dafe =_ebgef ;};_bacb :=_bc .NewRGBA (_gcea );_gd .DrawMask (_bacb ,_gcea ,_dafe ,_bc .Point {},_effb ,_bc .Point {},_gd .Over );
return _bacb ;};func (_feaf *textObject )setTextLeading (_edcb float64 ){if _feaf ==nil {return ;};_feaf ._abcg ._acge =_edcb ;};func _adgce (_bfgb _ea .PdfRectangle )*ruling {return &ruling {_gddac :_ecacd ,_cafa :_bfgb .Lly ,_fddc :_bfgb .Llx ,_begad :_bfgb .Urx };
};func (_badd pathSection )bbox ()_ea .PdfRectangle {_dffb :=_badd ._gdfd [0]._gfagc [0];_aegc :=_ea .PdfRectangle {Llx :_dffb .X ,Urx :_dffb .X ,Lly :_dffb .Y ,Ury :_dffb .Y };_fafb :=func (_ffee _cg .Point ){if _ffee .X < _aegc .Llx {_aegc .Llx =_ffee .X ;
}else if _ffee .X > _aegc .Urx {_aegc .Urx =_ffee .X ;};if _ffee .Y < _aegc .Lly {_aegc .Lly =_ffee .Y ;}else if _ffee .Y > _aegc .Ury {_aegc .Ury =_ffee .Y ;};};for _ ,_feg :=range _badd ._gdfd [0]._gfagc [1:]{_fafb (_feg );};for _ ,_dceb :=range _badd ._gdfd [1:]{for _ ,_daeg :=range _dceb ._gfagc {_fafb (_daeg );
};};return _aegc ;};func _fcgc (_bebaf ,_bedgc int )uint64 {return uint64 (_bebaf )*0x1000000+uint64 (_bedgc )};type subpath struct{_gfagc []_cg .Point ;_bge bool ;};func (_dec *textObject )checkOp (_egfa *_edb .ContentStreamOperation ,_cdeg int ,_fec bool )(_dbb bool ,_dfe error ){if _dec ==nil {var _gab []_ad .PdfObject ;
if _cdeg > 0{_gab =_egfa .Params ;if len (_gab )> _cdeg {_gab =_gab [:_cdeg ];};};_fc .Log .Debug ("\u0025\u0023q \u006f\u0070\u0065r\u0061\u006e\u0064\u0020out\u0073id\u0065\u0020\u0074\u0065\u0078\u0074\u002e p\u0061\u0072\u0061\u006d\u0073\u003d\u0025+\u0076",_egfa .Operand ,_gab );
};if _cdeg >=0{if len (_egfa .Params )!=_cdeg {if _fec {_dfe =_ed .New ("\u0069n\u0063\u006f\u0072\u0072e\u0063\u0074\u0020\u0070\u0061r\u0061m\u0065t\u0065\u0072\u0020\u0063\u006f\u0075\u006et");};_fc .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0025\u0023\u0071\u0020\u0073\u0068\u006f\u0075\u006c\u0064\u0020h\u0061\u0076\u0065\u0020\u0025\u0064\u0020i\u006e\u0070\u0075\u0074\u0020\u0070\u0061\u0072\u0061\u006d\u0073,\u0020\u0067\u006f\u0074\u0020\u0025\u0064\u0020\u0025\u002b\u0076",_egfa .Operand ,_cdeg ,len (_egfa .Params ),_egfa .Params );
return false ,_dfe ;};};return true ,nil ;};func (_ffca *textTable )emptyCompositeRow (_agdcb int )bool {for _dceg :=0;_dceg < _ffca ._agaf ;_dceg ++{if _eecc ,_fceb :=_ffca ._ecag [_fcgc (_dceg ,_agdcb )];_fceb {if len (_eecc .paraList )> 0{return false ;
};};};return true ;};

// PageImages represents extracted images on a PDF page with spatial information:
// display position and size.
type PageImages struct{Images []ImageMark ;};func (_fbbbd *textTable )depth ()float64 {_bbagd :=1e10;for _aaad :=0;_aaad < _fbbbd ._agaf ;_aaad ++{_gccdc :=_fbbbd .get (_aaad ,0);if _gccdc ==nil ||_gccdc ._cdgcg {continue ;};_bbagd =_ag .Min (_bbagd ,_gccdc .depth ());
};return _bbagd ;};func (_addbd *textPara )isAtom ()*textTable {_bcbg :=_addbd ;_cccad :=_addbd ._gccd ;_edfaeb :=_addbd ._aedgf ;if _cccad .taken ()||_edfaeb .taken (){return nil ;};_gddab :=_cccad ._aedgf ;if _gddab .taken ()||_gddab !=_edfaeb ._gccd {return nil ;
};return _ccbb (_bcbg ,_cccad ,_edfaeb ,_gddab );};func _eeaf (_ebegbb float64 )bool {return _ag .Abs (_ebegbb )< _abadg };func (_afcd *wordBag )depthIndexes ()[]int {if len (_afcd ._dfga )==0{return nil ;};_fefb :=make ([]int ,len (_afcd ._dfga ));_agf :=0;
for _bddfe :=range _afcd ._dfga {_fefb [_agf ]=_bddfe ;_agf ++;};_ba .Ints (_fefb );return _fefb ;};func _fgde (_geac ,_bcef _ea .PdfRectangle )_ea .PdfRectangle {return _ea .PdfRectangle {Llx :_ag .Min (_geac .Llx ,_bcef .Llx ),Lly :_ag .Min (_geac .Lly ,_bcef .Lly ),Urx :_ag .Max (_geac .Urx ,_bcef .Urx ),Ury :_ag .Max (_geac .Ury ,_bcef .Ury )};
};func _bdcee (_bageg _ea .PdfRectangle )*ruling {return &ruling {_gddac :_bgcg ,_cafa :_bageg .Llx ,_fddc :_bageg .Lly ,_begad :_bageg .Ury };};func _ggbc (_dgfdc ,_caada _ea .PdfRectangle )bool {return _cefd (_dgfdc ,_caada )&&_eedd (_dgfdc ,_caada );
};func _caff (_acdca *textWord ,_gcde float64 ,_baac ,_bege rulingList )*wordBag {_bcgc :=_ebeg (_acdca ._bbcgb );_gag :=[]*textWord {_acdca };_ffc :=wordBag {_dfga :map[int ][]*textWord {_bcgc :_gag },PdfRectangle :_acdca .PdfRectangle ,_ggc :_acdca ._geba ,_aagd :_gcde ,_feae :_baac ,_dabg :_bege };
return &_ffc ;};func _ebeg (_bacfb float64 )int {var _efce int ;if _bacfb >=0{_efce =int (_bacfb /_bcec );}else {_efce =int (_bacfb /_bcec )-1;};return _efce ;};func (_dacf *textObject )setHorizScaling (_cfce float64 ){if _dacf ==nil {return ;};_dacf ._abcg ._cccc =_cfce ;
};type bounded interface{bbox ()_ea .PdfRectangle };func (_badaf intSet )add (_cfff int ){_badaf [_cfff ]=struct{}{}};func _fbgg (_dbffa []*textLine )[]*textLine {_ecac :=[]*textLine {};for _ ,_feba :=range _dbffa {_addaf :=_feba .text ();_agbb :=_fccc .Find ([]byte (_addaf ));
if _agbb !=nil {_ecac =append (_ecac ,_feba );};};return _ecac ;};func _efae (_bgae []pathSection )rulingList {_egdeb (_bgae );if _gbbe {_fc .Log .Info ("\u006da\u006b\u0065\u0046\u0069l\u006c\u0052\u0075\u006c\u0069n\u0067s\u003a \u0025\u0064\u0020\u0066\u0069\u006c\u006cs",len (_bgae ));
};var _dacd rulingList ;for _ ,_bgcf :=range _bgae {for _ ,_cdfa :=range _bgcf ._gdfd {if !_cdfa .isQuadrilateral (){if _gbbe {_fc .Log .Error ("!\u0069s\u0051\u0075\u0061\u0064\u0072\u0069\u006c\u0061t\u0065\u0072\u0061\u006c: \u0025\u0073",_cdfa );};
continue ;};if _bcefg ,_dgef :=_cdfa .makeRectRuling (_bgcf .Color );_dgef {_dacd =append (_dacd ,_bcefg );}else {if _aceg {_fc .Log .Error ("\u0021\u006d\u0061\u006beR\u0065\u0063\u0074\u0052\u0075\u006c\u0069\u006e\u0067\u003a\u0020\u0025\u0073",_cdfa );
};};};};if _gbbe {_fc .Log .Info ("\u006d\u0061\u006b\u0065Fi\u006c\u006c\u0052\u0075\u006c\u0069\u006e\u0067\u0073\u003a\u0020\u0025\u0073",_dacd .String ());};return _dacd ;};func (_cdad *textObject )moveLP (_bcb ,_egd float64 ){_cdad ._acdcf .Concat (_cg .NewMatrix (1,0,0,1,_bcb ,_egd ));
_cdad ._bdfa =_cdad ._acdcf ;};

// ApplyArea processes the page text only within the specified area `bbox`.
// Each time ApplyArea is called, it updates the result set in `pt`.
// Can be called multiple times in a row with different bounding boxes.
func (_cdge *PageText )ApplyArea (bbox _ea .PdfRectangle ){_agd :=make ([]*textMark ,0,len (_cdge ._ageb ));for _ ,_edcf :=range _cdge ._ageb {if _ggbc (_edcf .bbox (),bbox ){_agd =append (_agd ,_edcf );};};var _eba paraList ;_eafa :=len (_agd );for _abcc :=0;
_abcc < 360&&_eafa > 0;_abcc +=90{_cebe :=make ([]*textMark ,0,len (_agd )-_eafa );for _ ,_caeba :=range _agd {if _caeba ._dggag ==_abcc {_cebe =append (_cebe ,_caeba );};};if len (_cebe )> 0{_edca :=_dbef (_cebe ,_cdge ._aaab ,nil ,nil ,_cdge ._fafc ._bdc );
_eba =append (_eba ,_edca ...);_eafa -=len (_cebe );};};_ddcb :=new (_gf .Buffer );_eba .writeText (_ddcb );_cdge ._cdb =_ddcb .String ();_cdge ._feeg =_eba .toTextMarks ();_cdge ._aeee =_eba .tables ();};func _eead (_gdba _cg .Point )_cg .Matrix {return _cg .TranslationMatrix (_gdba .X ,_gdba .Y )};
type compositeCell struct{_ea .PdfRectangle ;paraList ;};func (_ddcbg *textTable )computeBbox ()_ea .PdfRectangle {var _fgfaf _ea .PdfRectangle ;_cbceg :=false ;for _gdeaa :=0;_gdeaa < _ddcbg ._ebaab ;_gdeaa ++{for _edcbb :=0;_edcbb < _ddcbg ._agaf ;_edcbb ++{_acffe :=_ddcbg .get (_edcbb ,_gdeaa );
if _acffe ==nil {continue ;};if !_cbceg {_fgfaf =_acffe .PdfRectangle ;_cbceg =true ;}else {_fgfaf =_fgde (_fgfaf ,_acffe .PdfRectangle );};};};return _fgfaf ;};func (_ebed *textPara )depth ()float64 {if _ebed ._cdgcg {return -1.0;};if len (_ebed ._cebdg )> 0{return _ebed ._cebdg [0]._fbgb ;
};return _ebed ._ebdd .depth ();};func (_bba *Extractor )extractPageText (_cgc string ,_feb *_ea .PdfPageResources ,_dcde _cg .Matrix ,_gca int ,_ggbe bool )(*PageText ,int ,int ,error ){_fc .Log .Trace ("\u0065x\u0074\u0072\u0061\u0063t\u0050\u0061\u0067\u0065\u0054e\u0078t\u003a \u006c\u0065\u0076\u0065\u006c\u003d\u0025d",_gca );
_cfbf :=&PageText {_aaab :_bba ._gdb ,_acff :_bba ._fcgb ,_cfee :_bba ._ef };_cfc :=_gfb (_bba ._gdb );var _ffb stateStack ;_gedgd :=_efec (_bba ,_feb ,_edb .GraphicsState {},&_cfc ,&_ffb );_acgg :=shapesState {_cea :_dcde ,_cee :_cg .IdentityMatrix (),_gcce :_gedgd };
var _afd bool ;_ead :=-1;_gdg :="";if _gca > _cbad {_edbf :=_ed .New ("\u0066\u006f\u0072\u006d s\u0074\u0061\u0063\u006b\u0020\u006f\u0076\u0065\u0072\u0066\u006c\u006f\u0077");_fc .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a \u0065\u0078\u0074\u0072\u0061\u0063\u0074\u0050\u0061\u0067\u0065\u0054\u0065\u0078\u0074\u002e\u0020\u0072\u0065\u0063u\u0072\u0073\u0069\u006f\u006e\u0020\u006c\u0065\u0076\u0065\u006c\u003d\u0025\u0064 \u0065r\u0072\u003d\u0025\u0076",_gca ,_edbf );
return _cfbf ,_cfc ._febd ,_cfc ._dcee ,_edbf ;};_abcb :=_edb .NewContentStreamParser (_cgc );_eacg ,_dcfd :=_abcb .Parse ();if _dcfd !=nil {_fc .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020e\u0078\u0074\u0072a\u0063\u0074\u0050\u0061g\u0065\u0054\u0065\u0078\u0074\u0020\u0070\u0061\u0072\u0073\u0065\u0020\u0066\u0061\u0069\u006c\u0065\u0064\u002e\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_dcfd );
return _cfbf ,_cfc ._febd ,_cfc ._dcee ,_dcfd ;};_cfbf ._bbdaa =_eacg ;_afb :=_edb .NewContentStreamProcessor (*_eacg );_afb .AddHandler (_edb .HandlerConditionEnumAllOperands ,"",func (_caf *_edb .ContentStreamOperation ,_dcfa _edb .GraphicsState ,_fca *_ea .PdfPageResources )error {_bcaf :=_caf .Operand ;
if _dfge {_fc .Log .Info ("\u0026&\u0026\u0020\u006f\u0070\u003d\u0025s",_caf );};switch _bcaf {case "\u0071":if _dfcf {_fc .Log .Info ("\u0063\u0074\u006d\u003d\u0025\u0073",_acgg ._cee );};_ffb .push (&_cfc );case "\u0051":if !_ffb .empty (){_cfc =*_ffb .pop ();
};_acgg ._cee =_dcfa .CTM ;if _dfcf {_fc .Log .Info ("\u0063\u0074\u006d\u003d\u0025\u0073",_acgg ._cee );};case "\u0042\u0044\u0043":_eff ,_gaeb :=_ad .GetDict (_caf .Params [1]);if !_gaeb {_fc .Log .Debug ("\u0045\u0052\u0052O\u0052\u003a\u0020\u0042D\u0043\u0020\u006f\u0070\u003d\u0025\u0073 \u0047\u0065\u0074\u0044\u0069\u0063\u0074\u0020\u0066\u0061\u0069\u006c\u0065\u0064",_caf );
return _dcfd ;};_cbc :=_eff .Get ("\u004d\u0043\u0049\u0044");if _cbc !=nil {_ffa ,_ddd :=_ad .GetIntVal (_cbc );if !_ddd {_fc .Log .Debug ("\u0045R\u0052\u004fR\u003a\u0020\u0042\u0044C\u0020\u006f\u0070=\u0025\u0073\u002e\u0020\u0042\u0061\u0064\u0020\u006eum\u0065\u0072\u0069c\u0061\u006c \u006f\u0062\u006a\u0065\u0063\u0074.\u0020\u006f=\u0025\u0073",_caf ,_cbc );
};_ead =_ffa ;}else {_ead =-1;};_cac :=_eff .Get ("\u0041\u0063\u0074\u0075\u0061\u006c\u0054\u0065\u0078\u0074");if _cac !=nil {_gdg =_cac .String ();};case "\u0045\u004d\u0043":_ead =-1;_gdg ="";case "\u0042\u0054":if _afd {_fc .Log .Debug ("\u0042\u0054\u0020\u0063\u0061\u006c\u006c\u0065\u0064\u0020\u0077\u0068\u0069\u006c\u0065 \u0069n\u0020\u0061\u0020\u0074\u0065\u0078\u0074\u0020\u006f\u0062\u006a\u0065\u0063\u0074");
_cfbf ._ageb =append (_cfbf ._ageb ,_gedgd ._afgad ...);};_afd =true ;_cbcb :=_dcfa ;if _ggbe {_cbcb =_edb .GraphicsState {};_cbcb .CTM =_acgg ._cee ;};_cbcb .CTM =_dcde .Mult (_cbcb .CTM );_gedgd =_efec (_bba ,_fca ,_cbcb ,&_cfc ,&_ffb );_acgg ._gcce =_gedgd ;
case "\u0045\u0054":if !_afd {_fc .Log .Debug ("\u0045\u0054\u0020ca\u006c\u006c\u0065\u0064\u0020\u006f\u0075\u0074\u0073i\u0064e\u0020o\u0066 \u0061\u0020\u0074\u0065\u0078\u0074\u0020\u006f\u0062\u006a\u0065\u0063\u0074");};_afd =false ;_cfbf ._ageb =append (_cfbf ._ageb ,_gedgd ._afgad ...);
_gedgd .reset ();case "\u0054\u002a":_gedgd .nextLine ();case "\u0054\u0064":if _feaa ,_cafe :=_gedgd .checkOp (_caf ,2,true );!_feaa {_fc .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_cafe );return _cafe ;
};_aba ,_dfcc ,_eagb :=_ecaeg (_caf .Params );if _eagb !=nil {return _eagb ;};_gedgd .moveText (_aba ,_dfcc );case "\u0054\u0044":if _ccb ,_becf :=_gedgd .checkOp (_caf ,2,true );!_ccb {_fc .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_becf );
return _becf ;};_gdbc ,_gaf ,_cfaa :=_ecaeg (_caf .Params );if _cfaa !=nil {_fc .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_cfaa );return _cfaa ;};_gedgd .moveTextSetLeading (_gdbc ,_gaf );case "\u0054\u006a":if _aga ,_gea :=_gedgd .checkOp (_caf ,1,true );
!_aga {_fc .Log .Debug ("\u0045\u0052\u0052\u004fR:\u0020\u0054\u006a\u0020\u006f\u0070\u003d\u0025\u0073\u0020\u0065\u0072\u0072\u003d%\u0076",_caf ,_gea );return _gea ;};_dafg :=_ad .TraceToDirectObject (_caf .Params [0]);_fgg ,_ddg :=_ad .GetStringBytes (_dafg );
if !_ddg {_fc .Log .Debug ("\u0045\u0052R\u004f\u0052\u003a\u0020T\u006a\u0020o\u0070\u003d\u0025\u0073\u0020\u0047\u0065\u0074S\u0074\u0072\u0069\u006e\u0067\u0042\u0079\u0074\u0065\u0073\u0020\u0066a\u0069\u006c\u0065\u0064",_caf );return _ad .ErrTypeError ;
};return _gedgd .showText (_dafg ,_fgg ,_ead ,_gdg );case "\u0054\u004a":if _gge ,_fag :=_gedgd .checkOp (_caf ,1,true );!_gge {_fc .Log .Debug ("\u0045\u0052R\u004f\u0052\u003a \u0054\u004a\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_fag );return _fag ;
};_acd ,_bcfb :=_ad .GetArray (_caf .Params [0]);if !_bcfb {_fc .Log .Debug ("\u0045\u0052\u0052OR\u003a\u0020\u0054\u004a\u0020\u006f\u0070\u003d\u0025s\u0020G\u0065t\u0041r\u0072\u0061\u0079\u0056\u0061\u006c\u0020\u0066\u0061\u0069\u006c\u0065\u0064",_caf );
return _dcfd ;};return _gedgd .showTextAdjusted (_acd ,_ead ,_gdg );case "\u0027":if _bdg ,_cdf :=_gedgd .checkOp (_caf ,1,true );!_bdg {_fc .Log .Debug ("\u0045R\u0052O\u0052\u003a\u0020\u0027\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_cdf );return _cdf ;
};_cffe :=_ad .TraceToDirectObject (_caf .Params [0]);_dgaa ,_gcg :=_ad .GetStringBytes (_cffe );if !_gcg {_fc .Log .Debug ("\u0045\u0052RO\u0052\u003a\u0020'\u0020\u006f\u0070\u003d%s \u0047et\u0053\u0074\u0072\u0069\u006e\u0067\u0042yt\u0065\u0073\u0020\u0066\u0061\u0069\u006ce\u0064",_caf );
return _ad .ErrTypeError ;};_gedgd .nextLine ();return _gedgd .showText (_cffe ,_dgaa ,_ead ,_gdg );case "\u0022":if _dbdd ,_ccgd :=_gedgd .checkOp (_caf ,3,true );!_dbdd {_fc .Log .Debug ("\u0045R\u0052O\u0052\u003a\u0020\u0022\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_ccgd );
return _ccgd ;};_fcbe ,_faaf ,_gba :=_ecaeg (_caf .Params [:2]);if _gba !=nil {return _gba ;};_fga :=_ad .TraceToDirectObject (_caf .Params [2]);_daa ,_ebbg :=_ad .GetStringBytes (_fga );if !_ebbg {_fc .Log .Debug ("\u0045\u0052RO\u0052\u003a\u0020\"\u0020\u006f\u0070\u003d%s \u0047et\u0053\u0074\u0072\u0069\u006e\u0067\u0042yt\u0065\u0073\u0020\u0066\u0061\u0069\u006ce\u0064",_caf );
return _ad .ErrTypeError ;};_gedgd .setCharSpacing (_fcbe );_gedgd .setWordSpacing (_faaf );_gedgd .nextLine ();return _gedgd .showText (_fga ,_daa ,_ead ,_gdg );case "\u0054\u004c":_aab ,_cae :=_dgced (_caf );if _cae !=nil {_fc .Log .Debug ("\u0045\u0052R\u004f\u0052\u003a \u0054\u004c\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_cae );
return _cae ;};_gedgd .setTextLeading (_aab );case "\u0054\u0063":_dgb ,_dgd :=_dgced (_caf );if _dgd !=nil {_fc .Log .Debug ("\u0045\u0052R\u004f\u0052\u003a \u0054\u0063\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_dgd );return _dgd ;};_gedgd .setCharSpacing (_dgb );
case "\u0054\u0066":if _dcc ,_baa :=_gedgd .checkOp (_caf ,2,true );!_dcc {_fc .Log .Debug ("\u0045\u0052R\u004f\u0052\u003a \u0054\u0066\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_baa );return _baa ;};_fdgg ,_ebef :=_ad .GetNameVal (_caf .Params [0]);
if !_ebef {_fc .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a \u0054\u0066\u0020\u006f\u0070\u003d\u0025\u0073\u0020\u0047\u0065\u0074\u004ea\u006d\u0065\u0056\u0061\u006c\u0020\u0066a\u0069\u006c\u0065\u0064",_caf );return _ad .ErrTypeError ;};_ecgd ,_aee :=_ad .GetNumberAsFloat (_caf .Params [1]);
if !_ebef {_fc .Log .Debug ("\u0045\u0052\u0052O\u0052\u003a\u0020\u0054\u0066\u0020\u006f\u0070\u003d\u0025\u0073\u0020\u0047\u0065\u0074\u0046\u006c\u006f\u0061\u0074\u0056\u0061\u006c\u0020\u0066\u0061\u0069\u006c\u0065d\u002e\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_caf ,_aee );
return _aee ;};_aee =_gedgd .setFont (_fdgg ,_ecgd );_gedgd ._ecce =_ed .Is (_aee ,_ad .ErrNotSupported );if _aee !=nil &&!_gedgd ._ecce {return _aee ;};case "\u0054\u006d":if _gdc ,_fgeb :=_gedgd .checkOp (_caf ,6,true );!_gdc {_fc .Log .Debug ("\u0045\u0052R\u004f\u0052\u003a \u0054\u006d\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_fgeb );
return _fgeb ;};_dab ,_adb :=_ad .GetNumbersAsFloat (_caf .Params );if _adb !=nil {_fc .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_adb );return _adb ;};_gedgd .setTextMatrix (_dab );case "\u0054\u0072":if _efg ,_gga :=_gedgd .checkOp (_caf ,1,true );
!_efg {_fc .Log .Debug ("\u0045\u0052R\u004f\u0052\u003a \u0054\u0072\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_gga );return _gga ;};_ddf ,_ffg :=_ad .GetIntVal (_caf .Params [0]);if !_ffg {_fc .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0054\u0072\u0020\u006f\u0070\u003d\u0025\u0073 \u0047e\u0074\u0049\u006e\u0074\u0056\u0061\u006c\u0020\u0066\u0061\u0069\u006c\u0065\u0064",_caf );
return _ad .ErrTypeError ;};_gedgd .setTextRenderMode (_ddf );case "\u0054\u0073":if _dedf ,_bcea :=_gedgd .checkOp (_caf ,1,true );!_dedf {_fc .Log .Debug ("\u0045\u0052R\u004f\u0052\u003a \u0054\u0073\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_bcea );
return _bcea ;};_cdff ,_fcac :=_ad .GetNumberAsFloat (_caf .Params [0]);if _fcac !=nil {_fc .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_fcac );return _fcac ;};_gedgd .setTextRise (_cdff );case "\u0054\u0077":if _fde ,_eea :=_gedgd .checkOp (_caf ,1,true );
!_fde {_fc .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_eea );return _eea ;};_gbe ,_fad :=_ad .GetNumberAsFloat (_caf .Params [0]);if _fad !=nil {_fc .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_fad );
return _fad ;};_gedgd .setWordSpacing (_gbe );case "\u0054\u007a":if _babg ,_ebc :=_gedgd .checkOp (_caf ,1,true );!_babg {_fc .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_ebc );return _ebc ;};_bccd ,_faed :=_ad .GetNumberAsFloat (_caf .Params [0]);
if _faed !=nil {_fc .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_faed );return _faed ;};_gedgd .setHorizScaling (_bccd );case "\u0063\u006d":if !_ggbe {_acgg ._cee =_dcfa .CTM ;};if _acgg ._cee .Singular (){_bede :=_cg .IdentityMatrix ().Translate (_acgg ._cee .Translation ());
_fc .Log .Debug ("S\u0069n\u0067\u0075\u006c\u0061\u0072\u0020\u0063\u0074m\u003d\u0025\u0073\u2192%s",_acgg ._cee ,_bede );_acgg ._cee =_bede ;};if _dfcf {_fc .Log .Info ("\u0063\u0074\u006d\u003d\u0025\u0073",_acgg ._cee );};case "\u006d":if len (_caf .Params )!=2{_fc .Log .Debug ("\u0057\u0041\u0052\u004e\u003a\u0020\u0065\u0072\u0072o\u0072\u0020\u0077\u0068\u0069\u006c\u0065\u0020\u0070\u0072\u006f\u0063\u0065\u0073\u0073\u0069\u006e\u0067\u0020\u0060\u006d\u0060\u0020o\u0070\u0065r\u0061\u0074o\u0072\u003a\u0020\u0025\u0076\u002e\u0020\u004f\u0075\u0074\u0070\u0075\u0074 m\u0061\u0079\u0020\u0062\u0065\u0020\u0069\u006e\u0063o\u0072\u0072\u0065\u0063\u0074\u002e",_dedg );
return nil ;};_dcdc ,_acc :=_ad .GetNumbersAsFloat (_caf .Params );if _acc !=nil {return _acc ;};_acgg .moveTo (_dcdc [0],_dcdc [1]);case "\u006c":if len (_caf .Params )!=2{_fc .Log .Debug ("\u0057\u0041\u0052\u004e\u003a\u0020\u0065\u0072\u0072o\u0072\u0020\u0077\u0068\u0069\u006c\u0065\u0020\u0070\u0072\u006f\u0063\u0065\u0073\u0073\u0069\u006e\u0067\u0020\u0060\u006c\u0060\u0020o\u0070\u0065r\u0061\u0074o\u0072\u003a\u0020\u0025\u0076\u002e\u0020\u004f\u0075\u0074\u0070\u0075\u0074 m\u0061\u0079\u0020\u0062\u0065\u0020\u0069\u006e\u0063o\u0072\u0072\u0065\u0063\u0074\u002e",_dedg );
return nil ;};_gdbcf ,_ecd :=_ad .GetNumbersAsFloat (_caf .Params );if _ecd !=nil {return _ecd ;};_acgg .lineTo (_gdbcf [0],_gdbcf [1]);case "\u0063":if len (_caf .Params )!=6{return _dedg ;};_cbf ,_eee :=_ad .GetNumbersAsFloat (_caf .Params );if _eee !=nil {return _eee ;
};_fc .Log .Debug ("\u0043u\u0062\u0069\u0063\u0020b\u0065\u007a\u0069\u0065\u0072 \u0070a\u0072a\u006d\u0073\u003a\u0020\u0025\u002e\u0032f",_cbf );_acgg .cubicTo (_cbf [0],_cbf [1],_cbf [2],_cbf [3],_cbf [4],_cbf [5]);case "\u0076","\u0079":if len (_caf .Params )!=4{return _dedg ;
};_fbe ,_egba :=_ad .GetNumbersAsFloat (_caf .Params );if _egba !=nil {return _egba ;};_fc .Log .Debug ("\u0043u\u0062\u0069\u0063\u0020b\u0065\u007a\u0069\u0065\u0072 \u0070a\u0072a\u006d\u0073\u003a\u0020\u0025\u002e\u0032f",_fbe );_acgg .quadraticTo (_fbe [0],_fbe [1],_fbe [2],_fbe [3]);
case "\u0068":_acgg .closePath ();case "\u0072\u0065":if len (_caf .Params )!=4{return _dedg ;};_egad ,_defe :=_ad .GetNumbersAsFloat (_caf .Params );if _defe !=nil {return _defe ;};_acgg .drawRectangle (_egad [0],_egad [1],_egad [2],_egad [3]);_acgg .closePath ();
case "\u0053":_acgg .stroke (&_cfbf ._efda );_acgg .clearPath ();case "\u0073":_acgg .closePath ();_acgg .stroke (&_cfbf ._efda );_acgg .clearPath ();case "\u0046":_acgg .fill (&_cfbf ._dfea );_acgg .clearPath ();case "\u0066","\u0066\u002a":_acgg .closePath ();
_acgg .fill (&_cfbf ._dfea );_acgg .clearPath ();case "\u0042","\u0042\u002a":_acgg .fill (&_cfbf ._dfea );_acgg .stroke (&_cfbf ._efda );_acgg .clearPath ();case "\u0062","\u0062\u002a":_acgg .closePath ();_acgg .fill (&_cfbf ._dfea );_acgg .stroke (&_cfbf ._efda );
_acgg .clearPath ();case "\u006e":_acgg .clearPath ();case "\u0044\u006f":if len (_caf .Params )==0{_fc .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0065\u0078\u0070\u0065\u0063\u0074\u0065\u0064\u0020\u0058\u004fbj\u0065c\u0074\u0020\u006e\u0061\u006d\u0065\u0020\u006f\u0070\u0065\u0072\u0061n\u0064\u0020\u0066\u006f\u0072\u0020\u0044\u006f\u0020\u006f\u0070\u0065\u0072\u0061\u0074\u006f\u0072.\u0020\u0047\u006f\u0074\u0020\u0025\u002b\u0076\u002e",_caf .Params );
return _ad .ErrRangeError ;};_ccc ,_faga :=_ad .GetName (_caf .Params [0]);if !_faga {_fc .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0069\u006e\u0076\u0061l\u0069\u0064\u0020\u0044\u006f\u0020\u006f\u0070e\u0072a\u0074\u006f\u0072\u0020\u0058\u004f\u0062\u006a\u0065\u0063\u0074\u0020\u006e\u0061\u006d\u0065\u0020\u006fp\u0065\u0072\u0061\u006e\u0064\u003a\u0020\u0025\u002b\u0076\u002e",_caf .Params [0]);
return _ad .ErrTypeError ;};_ ,_fdgag :=_fca .GetXObjectByName (*_ccc );if _fdgag !=_ea .XObjectTypeForm {break ;};_eacf ,_faga :=_bba ._gb [_ccc .String ()];if !_faga {_cfbg ,_agg :=_fca .GetXObjectFormByName (*_ccc );if _agg !=nil {_fc .Log .Debug ("\u0045R\u0052\u004f\u0052\u003a\u0020\u0025v",_agg );
return _agg ;};_bac ,_agg :=_cfbg .GetContentStream ();if _agg !=nil {_fc .Log .Debug ("\u0045R\u0052\u004f\u0052\u003a\u0020\u0025v",_agg );return _agg ;};_cadbc :=_cfbg .Resources ;if _cadbc ==nil {_cadbc =_fca ;};_dgce :=_dcfa .CTM ;if _eab ,_dgdb :=_ad .GetArray (_cfbg .Matrix );
_dgdb {_cdd ,_gbeb :=_eab .GetAsFloat64Slice ();if _gbeb !=nil {return _gbeb ;};if len (_cdd )!=6{return _dedg ;};_bcd :=_cg .NewMatrix (_cdd [0],_cdd [1],_cdd [2],_cdd [3],_cdd [4],_cdd [5]);_dgce =_dcfa .CTM .Mult (_bcd );};_abg ,_aad ,_fce ,_agg :=_bba .extractPageText (string (_bac ),_cadbc ,_dcde .Mult (_dgce ),_gca +1,false );
if _agg !=nil {_fc .Log .Debug ("\u0045R\u0052\u004f\u0052\u003a\u0020\u0025v",_agg );return _agg ;};_eacf =textResult {*_abg ,_aad ,_fce };_bba ._gb [_ccc .String ()]=_eacf ;};_acgg ._cee =_dcfa .CTM ;if _dfcf {_fc .Log .Info ("\u0063\u0074\u006d\u003d\u0025\u0073",_acgg ._cee );
};_cfbf ._ageb =append (_cfbf ._ageb ,_eacf ._adbg ._ageb ...);_cfbf ._efda =append (_cfbf ._efda ,_eacf ._adbg ._efda ...);_cfbf ._dfea =append (_cfbf ._dfea ,_eacf ._adbg ._dfea ...);_cfc ._febd +=_eacf ._bcg ;_cfc ._dcee +=_eacf ._baab ;case "\u0072\u0067","\u0067","\u006b","\u0063\u0073","\u0073\u0063","\u0073\u0063\u006e":_gedgd ._ggda .ColorspaceNonStroking =_dcfa .ColorspaceNonStroking ;
_gedgd ._ggda .ColorNonStroking =_dcfa .ColorNonStroking ;case "\u0052\u0047","\u0047","\u004b","\u0043\u0053","\u0053\u0043","\u0053\u0043\u004e":_gedgd ._ggda .ColorspaceStroking =_dcfa .ColorspaceStroking ;_gedgd ._ggda .ColorStroking =_dcfa .ColorStroking ;
};return nil ;});_dcfd =_afb .Process (_feb );if _bba ._gbf !=nil &&_bba ._gbf .IncludeAnnotations &&!_ggbe {for _ ,_cada :=range _bba ._bfg {_gdff ,_dbc :=_ad .GetDict (_cada .AP );if !_dbc {continue ;};_eeeg ,_dbc :=_gdff .Get ("\u004e").(*_ad .PdfObjectStream );
if !_dbc {continue ;};_dde ,_fbed :=_ad .DecodeStream (_eeeg );if _fbed !=nil {_fc .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u006f\u006e\u0020\u0064\u0065c\u006f\u0064\u0065\u0020\u0073\u0074\u0072\u0065\u0061\u006d:\u0020\u0025\u0076",_fbed );
continue ;};_ccbc :=_eeeg .PdfObjectDictionary .Get ("\u0052e\u0073\u006f\u0075\u0072\u0063\u0065s");_bgca ,_fbed :=_ea .NewPdfPageResourcesFromDict (_ccbc .(*_ad .PdfObjectDictionary ));if _fbed !=nil {_fc .Log .Debug ("\u0045\u0072\u0072\u006f\u0072 \u006f\u006e\u0020\u0067\u0065\u0074\u0074\u0069\u006e\u0067\u0020\u0061\u006en\u006f\u0074\u0061\u0074\u0069\u006f\u006e\u0020\u0072\u0065\u0073\u006f\u0075\u0072\u0063\u0065\u0073\u003a\u0020\u0025\u0076",_fbed );
continue ;};_gfa :=_cg .IdentityMatrix ();_ggbd ,_dbc :=_eeeg .PdfObjectDictionary .Get ("\u004d\u0061\u0074\u0072\u0069\u0078").(*_ad .PdfObjectArray );if _dbc {_abdf ,_cageg :=_ggbd .GetAsFloat64Slice ();if _cageg !=nil {_fc .Log .Debug ("\u0045\u0072\u0072or\u0020\u006f\u006e\u0020\u0067\u0065\u0074\u0074\u0069n\u0067 \u0066l\u006fa\u0074\u0036\u0034\u0020\u0073\u006c\u0069\u0063\u0065\u003a\u0020\u0025\u0076",_cageg );
continue ;};if len (_abdf )!=6{_fc .Log .Debug ("I\u006e\u0076\u0061\u006c\u0069\u0064 \u006d\u0061\u0074\u0072\u0069\u0078\u0020\u0073\u006ci\u0063\u0065\u0020l\u0065n\u0067\u0074\u0068");continue ;};_gfa =_cg .NewMatrix (_abdf [0],_abdf [1],_abdf [2],_abdf [3],_abdf [4],_abdf [5]);
};_egcgf ,_dbc :=_bba ._ede [_eeeg .String ()];if !_dbc {_gfdbg ,_faf ,_cfgd ,_fdggd :=_bba .extractPageText (string (_dde ),_bgca ,_gfa ,_gca +1,true );if _fdggd !=nil {_fc .Log .Debug ("\u0045\u0052R\u004f\u0052\u0020\u0065x\u0074\u0072a\u0063\u0074\u0069\u006e\u0067\u0020\u0061\u006en\u006f\u0074\u0061\u0074\u0069\u006f\u006e\u0020\u0074\u0065\u0078\u0074s\u003a\u0020\u0025\u0076",_fdggd );
continue ;};_egcgf =textResult {*_gfdbg ,_faf ,_cfgd };_bba ._ede [_eeeg .String ()]=_egcgf ;};_cfbf ._ageb =append (_cfbf ._ageb ,_egcgf ._adbg ._ageb ...);_cfbf ._efda =append (_cfbf ._efda ,_egcgf ._adbg ._efda ...);_cfbf ._dfea =append (_cfbf ._dfea ,_egcgf ._adbg ._dfea ...);
_cfc ._febd +=_egcgf ._bcg ;_cfc ._dcee +=_egcgf ._baab ;};};return _cfbf ,_cfc ._febd ,_cfc ._dcee ,_dcfd ;};type textTable struct{_ea .PdfRectangle ;_agaf ,_ebaab int ;_agae bool ;_aaedb map[uint64 ]*textPara ;_ecag map[uint64 ]compositeCell ;};type textWord struct{_ea .PdfRectangle ;
_bbcgb float64 ;_cfdag string ;_eccf []*textMark ;_geba float64 ;_edfc bool ;};func _fggdd (_beba func (*wordBag ,*textWord ,float64 )bool ,_cdgf float64 )func (*wordBag ,*textWord )bool {return func (_bbad *wordBag ,_gfgg *textWord )bool {return _beba (_bbad ,_gfgg ,_cdgf )};
};func (_fgacc *textWord )absorb (_ddcgf *textWord ){_fgacc .PdfRectangle =_fgde (_fgacc .PdfRectangle ,_ddcgf .PdfRectangle );_fgacc ._eccf =append (_fgacc ._eccf ,_ddcgf ._eccf ...);};func (_cadc gridTiling )complete ()bool {for _ ,_cdgd :=range _cadc ._bafg {for _ ,_cffgg :=range _cdgd {if !_cffgg .complete (){return false ;
};};};return true ;};func (_ggaef compositeCell )String ()string {_bbce :="";if len (_ggaef .paraList )> 0{_bbce =_afbcec (_ggaef .paraList .merge ().text (),50);};return _cf .Sprintf ("\u0025\u0036\u002e\u0032\u0066\u0020\u0025\u0064\u0020\u0070\u0061\u0072a\u0073\u0020\u0025\u0071",_ggaef .PdfRectangle ,len (_ggaef .paraList ),_bbce );
};

// ToTextMark returns the public view of `tm`.
func (_aeea *textMark )ToTextMark ()TextMark {return TextMark {Text :_aeea ._cddae ,Original :_aeea ._aeef ,BBox :_aeea ._ggac ,Font :_aeea ._gggf ,FontSize :_aeea ._afcb ,FillColor :_aeea ._efcf ,StrokeColor :_aeea ._deba ,Orientation :_aeea ._dggag ,DirectObject :_aeea ._ecffb ,ObjString :_aeea ._eegc ,Tw :_aeea .Tw ,Th :_aeea .Th ,Tc :_aeea ._ggcf ,Index :_aeea ._cebee };
};func (_gdgd *shapesState )fill (_dbgg *[]pathSection ){_bbbed :=pathSection {_gdfd :_gdgd ._agbgb ,Color :_gdgd ._gcce .getFillColor ()};*_dbgg =append (*_dbgg ,_bbbed );if _gbbe {_edbe :=_bbbed .bbox ();_cf .Printf ("\u0020 \u0020\u0020\u0046\u0049\u004c\u004c\u003a %\u0032\u0064\u0020\u0066\u0069\u006c\u006c\u0073\u0020\u0028\u0025\u0064\u0020\u006ee\u0077\u0029 \u0073\u0073\u003d%\u0073\u0020\u0063\u006f\u006c\u006f\u0072\u003d\u0025\u0033\u0076\u0020\u0025\u0036\u002e\u0032f\u003d\u00256.\u0032\u0066\u0078%\u0036\u002e\u0032\u0066\u000a",len (*_dbgg ),len (_bbbed ._gdfd ),_gdgd ,_bbbed .Color ,_edbe ,_edbe .Width (),_edbe .Height ());
if _ccfea {for _gfag ,_bdd :=range _bbbed ._gdfd {_cf .Printf ("\u0025\u0038\u0064\u003a\u0020\u0025\u0073\u000a",_gfag ,_bdd );if _gfag ==10{break ;};};};};};func (_dfda *stateStack )push (_egabd *textState ){_geg :=*_egabd ;*_dfda =append (*_dfda ,&_geg )};
func _abfff (_bbbd *paraList )map[int ][]*textLine {_ccfb :=map[int ][]*textLine {};for _ ,_gfe :=range *_bbbd {for _ ,_adaa :=range _gfe ._cebdg {if !_ggdag (_adaa ){_fc .Log .Debug ("g\u0072\u006f\u0075p\u004c\u0069\u006e\u0065\u0073\u003a\u0020\u0054\u0068\u0065\u0020\u0074\u0065\u0078\u0074\u0020\u006c\u0069\u006e\u0065\u0020\u0063\u006f\u006e\u0074a\u0069\u006e\u0073 \u006d\u006f\u0072\u0065\u0020\u0074\u0068\u0061\u006e\u0020\u006f\u006e\u0065 \u006d\u0063\u0069\u0064 \u006e\u0075\u006d\u0062e\u0072\u002e\u0020\u0049\u0074\u0020\u0073\u0068\u006f\u0075\u006c\u0064\u0020\u0062\u0065\u0020\u0073p\u006c\u0069\u0074\u002e");
continue ;};_cgga :=_adaa ._bbada [0]._eccf [0]._bfcfc ;_ccfb [_cgga ]=append (_ccfb [_cgga ],_adaa );};if _gfe ._ebdd !=nil {_bffa :=_gfe ._ebdd ._aaedb ;for _ ,_eggc :=range _bffa {for _ ,_efb :=range _eggc ._cebdg {if !_ggdag (_efb ){_fc .Log .Debug ("g\u0072\u006f\u0075p\u004c\u0069\u006e\u0065\u0073\u003a\u0020\u0054\u0068\u0065\u0020\u0074\u0065\u0078\u0074\u0020\u006c\u0069\u006e\u0065\u0020\u0063\u006f\u006e\u0074a\u0069\u006e\u0073 \u006d\u006f\u0072\u0065\u0020\u0074\u0068\u0061\u006e\u0020\u006f\u006e\u0065 \u006d\u0063\u0069\u0064 \u006e\u0075\u006d\u0062e\u0072\u002e\u0020\u0049\u0074\u0020\u0073\u0068\u006f\u0075\u006c\u0064\u0020\u0062\u0065\u0020\u0073p\u006c\u0069\u0074\u002e");
continue ;};_ggae :=_efb ._bbada [0]._eccf [0]._bfcfc ;_ccfb [_ggae ]=append (_ccfb [_ggae ],_efb );};};};};return _ccfb ;};func (_fcfd rulingList )toGrids ()[]rulingList {if _gbbe {_fc .Log .Info ("t\u006f\u0047\u0072\u0069\u0064\u0073\u003a\u0020\u0025\u0073",_fcfd );
};_bgecg :=_fcfd .intersections ();if _gbbe {_fc .Log .Info ("\u0074\u006f\u0047r\u0069\u0064\u0073\u003a \u0076\u0065\u0063\u0073\u003d\u0025\u0064 \u0069\u006e\u0074\u0065\u0072\u0073\u0065\u0063\u0074\u0073\u003d\u0025\u0064\u0020",len (_fcfd ),len (_bgecg ));
for _ ,_fdge :=range _cfadf (_bgecg ){_cf .Printf ("\u00254\u0064\u003a\u0020\u0025\u002b\u0076\n",_fdge ,_bgecg [_fdge ]);};};_bcgbb :=make (map[int ]intSet ,len (_fcfd ));for _dagcb :=range _fcfd {_aebb :=_fcfd .connections (_bgecg ,_dagcb );if len (_aebb )> 0{_bcgbb [_dagcb ]=_aebb ;
};};if _gbbe {_fc .Log .Info ("t\u006fG\u0072\u0069\u0064\u0073\u003a\u0020\u0063\u006fn\u006e\u0065\u0063\u0074s=\u0025\u0064",len (_bcgbb ));for _ ,_aabg :=range _cfadf (_bcgbb ){_cf .Printf ("\u00254\u0064\u003a\u0020\u0025\u002b\u0076\n",_aabg ,_bcgbb [_aabg ]);
};};_bcbd :=_caefg (len (_fcfd ),func (_adgfe ,_gbga int )bool {_fgage ,_gecc :=len (_bcgbb [_adgfe ]),len (_bcgbb [_gbga ]);if _fgage !=_gecc {return _fgage > _gecc ;};return _fcfd .comp (_adgfe ,_gbga );});if _gbbe {_fc .Log .Info ("t\u006fG\u0072\u0069\u0064\u0073\u003a\u0020\u006f\u0072d\u0065\u0072\u0069\u006eg=\u0025\u0076",_bcbd );
};_egdff :=[][]int {{_bcbd [0]}};_ebgcc :for _ ,_gfgf :=range _bcbd [1:]{for _aecg ,_ebegd :=range _egdff {for _ ,_cbba :=range _ebegd {if _bcgbb [_cbba ].has (_gfgf ){_egdff [_aecg ]=append (_ebegd ,_gfgf );continue _ebgcc ;};};};_egdff =append (_egdff ,[]int {_gfgf });
};if _gbbe {_fc .Log .Info ("\u0074o\u0047r\u0069\u0064\u0073\u003a\u0020i\u0067\u0072i\u0064\u0073\u003d\u0025\u0076",_egdff );};_ba .SliceStable (_egdff ,func (_eged ,_fcbeg int )bool {return len (_egdff [_eged ])> len (_egdff [_fcbeg ])});for _ ,_ecbg :=range _egdff {_ba .Slice (_ecbg ,func (_abdae ,_cbfd int )bool {return _fcfd .comp (_ecbg [_abdae ],_ecbg [_cbfd ])});
};_egabg :=make ([]rulingList ,len (_egdff ));for _bdgb ,_dfad :=range _egdff {_fgeea :=make (rulingList ,len (_dfad ));for _efbb ,_ddfac :=range _dfad {_fgeea [_efbb ]=_fcfd [_ddfac ];};_egabg [_bdgb ]=_fgeea ;};if _gbbe {_fc .Log .Info ("\u0074o\u0047r\u0069\u0064\u0073\u003a\u0020g\u0072\u0069d\u0073\u003d\u0025\u002b\u0076",_egabg );
};var _cfdbd []rulingList ;for _ ,_ebdec :=range _egabg {if _ceegb ,_efbc :=_ebdec .isActualGrid ();_efbc {_ebdec =_ceegb ;_ebdec =_ebdec .snapToGroups ();_cfdbd =append (_cfdbd ,_ebdec );};};if _gbbe {_eggbc ("t\u006fG\u0072\u0069\u0064\u0073\u003a\u0020\u0061\u0063t\u0075\u0061\u006c\u0047ri\u0064\u0073",_cfdbd );
_fc .Log .Info ("\u0074\u006f\u0047\u0072\u0069\u0064\u0073\u003a\u0020\u0067\u0072\u0069\u0064\u0073\u003d%\u0064 \u0061\u0063\u0074\u0075\u0061\u006c\u0047\u0072\u0069\u0064\u0073\u003d\u0025\u0064",len (_egabg ),len (_cfdbd ));};return _cfdbd ;};func _bgcdg (_fdbd _ea .PdfRectangle )*ruling {return &ruling {_gddac :_bgcg ,_cafa :_fdbd .Urx ,_fddc :_fdbd .Lly ,_begad :_fdbd .Ury };
};func _eeddd (_gcgb ,_aefd _cg .Point )bool {_ecfac :=_ag .Abs (_gcgb .X -_aefd .X );_bbfac :=_ag .Abs (_gcgb .Y -_aefd .Y );return _dbaf (_ecfac ,_bbfac );};func _ccbb (_dfafc ,_cbecf ,_gceg ,_ecec *textPara )*textTable {_bfdce :=&textTable {_agaf :2,_ebaab :2,_aaedb :make (map[uint64 ]*textPara ,4)};
_bfdce .put (0,0,_dfafc );_bfdce .put (1,0,_cbecf );_bfdce .put (0,1,_gceg );_bfdce .put (1,1,_ecec );return _bfdce ;};func _ga (_bg int )bool {return (_bg &1)!=0};

// String returns a description of `p`.
func (_gaada *textPara )String ()string {if _gaada ._cdgcg {return _cf .Sprintf ("\u0025\u0036\u002e\u0032\u0066\u0020\u005b\u0045\u004d\u0050\u0054\u0059\u005d",_gaada .PdfRectangle );};_edfae :="";if _gaada ._ebdd !=nil {_edfae =_cf .Sprintf ("\u005b\u0025\u0064\u0078\u0025\u0064\u005d\u0020",_gaada ._ebdd ._agaf ,_gaada ._ebdd ._ebaab );
};return _cf .Sprintf ("\u0025\u0036\u002e\u0032f \u0025\u0073\u0025\u0064\u0020\u006c\u0069\u006e\u0065\u0073\u0020\u0025\u0071",_gaada .PdfRectangle ,_edfae ,len (_gaada ._cebdg ),_afbcec (_gaada .text (),50));};var _cfdb string ="\u0028\u003f\u0069\u0029\u005e\u0028\u004d\u007b\u0030\u002c\u0033\u007d\u0029\u0028\u0043\u0028?\u003a\u0044\u007cM\u0029\u007c\u0044\u003f\u0043{\u0030\u002c\u0033\u007d\u0029\u0028\u0058\u0028\u003f\u003a\u004c\u007c\u0043\u0029\u007cL\u003f\u0058\u007b\u0030\u002c\u0033}\u0029\u0028\u0049\u0028\u003f\u003a\u0056\u007c\u0058\u0029\u007c\u0056\u003f\u0049\u007b\u0030\u002c\u0033\u007d\u0029\u0028\u005c\u0029\u007c\u005c\u002e\u0029\u007c\u005e\u005c\u0028\u0028\u004d\u007b\u0030\u002c\u0033\u007d\u0029\u0028\u0043\u0028\u003f\u003aD\u007cM\u0029\u007c\u0044\u003f\u0043\u007b\u0030\u002c\u0033\u007d\u0029\u0028\u0058\u0028?\u003a\u004c\u007c\u0043\u0029\u007c\u004c?\u0058\u007b0\u002c\u0033\u007d\u0029(\u0049\u0028\u003f\u003a\u0056|\u0058\u0029\u007c\u0056\u003f\u0049\u007b\u0030\u002c\u0033\u007d\u0029\u005c\u0029";
func _cefd (_edcdg ,_ddfe _ea .PdfRectangle )bool {return _ddfe .Llx <=_edcdg .Urx &&_edcdg .Llx <=_ddfe .Urx ;};func _gdfe (_decbb ,_addbf *textPara )bool {return _cefd (_decbb ._eeada ,_addbf ._eeada )};func (_ebee *wordBag )firstReadingIndex (_ace int )int {_becfb :=_ebee .firstWord (_ace )._geba ;
_efgd :=float64 (_ace +1)*_bcec ;_eggb :=_efgd +_ccada *_becfb ;_cfcea :=_ace ;for _ ,_dcddd :=range _ebee .depthBand (_efgd ,_eggb ){if _cgfd (_ebee .firstWord (_dcddd ),_ebee .firstWord (_cfcea ))< 0{_cfcea =_dcddd ;};};return _cfcea ;};var (_aagcb =map[rune ]string {0x0060:"\u0300",0x02CB:"\u0300",0x0027:"\u0301",0x00B4:"\u0301",0x02B9:"\u0301",0x02CA:"\u0301",0x005E:"\u0302",0x02C6:"\u0302",0x007E:"\u0303",0x02DC:"\u0303",0x00AF:"\u0304",0x02C9:"\u0304",0x02D8:"\u0306",0x02D9:"\u0307",0x00A8:"\u0308",0x00B0:"\u030a",0x02DA:"\u030a",0x02BA:"\u030b",0x02DD:"\u030b",0x02C7:"\u030c",0x02C8:"\u030d",0x0022:"\u030e",0x02BB:"\u0312",0x02BC:"\u0313",0x0486:"\u0313",0x055A:"\u0313",0x02BD:"\u0314",0x0485:"\u0314",0x0559:"\u0314",0x02D4:"\u031d",0x02D5:"\u031e",0x02D6:"\u031f",0x02D7:"\u0320",0x02B2:"\u0321",0x00B8:"\u0327",0x02CC:"\u0329",0x02B7:"\u032b",0x02CD:"\u0331",0x005F:"\u0332",0x204E:"\u0359"};
);

// String returns a description of `w`.
func (_dfff *textWord )String ()string {return _cf .Sprintf ("\u0025\u002e2\u0066\u0020\u0025\u0036\u002e\u0032\u0066\u0020\u0066\u006f\u006e\u0074\u0073\u0069\u007a\u0065\u003d\u0025\u002e\u0032\u0066\u0020\"%\u0073\u0022",_dfff ._bbcgb ,_dfff .PdfRectangle ,_dfff ._geba ,_dfff ._cfdag );
};func (_abaf *textObject )getCurrentFont ()*_ea .PdfFont {_eeffe :=_abaf ._abcg ._egcgg ;if _eeffe ==nil {_fc .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u004e\u006f\u0020\u0066\u006f\u006e\u0074\u0020\u0064\u0065\u0066\u0069\u006e\u0065\u0064\u002e\u0020U\u0073\u0069\u006e\u0067\u0020d\u0065\u0066a\u0075\u006c\u0074\u002e");
return _ea .DefaultFont ();};return _eeffe ;};func _cecb (_eacfc ,_ddac _cg .Point )rulingKind {_cfaad :=_ag .Abs (_eacfc .X -_ddac .X );_aafd :=_ag .Abs (_eacfc .Y -_ddac .Y );return _daef (_cfaad ,_aafd ,_ddeg );};func _daaf (_defb _cg .Matrix )_cg .Point {_adg ,_edbb :=_defb .Translation ();
return _cg .Point {X :_adg ,Y :_edbb };};var _ecaa =_b .MustCompile ("\u005e\u005c\u0073\u002a\u0028\u005c\u0064\u002b\u005c\u002e\u003f|\u005b\u0049\u0069\u0076\u005d\u002b\u0029\u005c\u0073\u002a\\\u0029\u003f\u0024");func (_gggfa rulingList )snapToGroups ()rulingList {_aecb ,_cggg :=_gggfa .vertsHorzs ();
if len (_aecb )> 0{_aecb =_aecb .snapToGroupsDirection ();};if len (_cggg )> 0{_cggg =_cggg .snapToGroupsDirection ();};_efdac :=append (_aecb ,_cggg ...);_efdac .log ("\u0073\u006e\u0061p\u0054\u006f\u0047\u0072\u006f\u0075\u0070\u0073");return _efdac ;
};func _fcbea (_cdeae ,_gbag *textPara )bool {if _cdeae ._cdgcg ||_gbag ._cdgcg {return true ;};return _eeaf (_cdeae .depth ()-_gbag .depth ());};func _aegba (_ceefg _ad .PdfObject ,_fdfge _d .Color )(_bc .Image ,error ){_cfgg ,_ebcgf :=_ad .GetStream (_ceefg );
if !_ebcgf {return nil ,nil ;};_aeag ,_dcaef :=_ea .NewXObjectImageFromStream (_cfgg );if _dcaef !=nil {return nil ,_dcaef ;};_agbgbc ,_dcaef :=_aeag .ToImage ();if _dcaef !=nil {return nil ,_dcaef ;};return _bfda (_agbgbc ,_fdfge ),nil ;};func (_gfcde paraList )llyRange (_bbgdc []int ,_aeeaf ,_aecfg float64 )[]int {_bdfb :=len (_gfcde );
if _aecfg < _gfcde [_bbgdc [0]].Lly ||_aeeaf > _gfcde [_bbgdc [_bdfb -1]].Lly {return nil ;};_fagd :=_ba .Search (_bdfb ,func (_fdce int )bool {return _gfcde [_bbgdc [_fdce ]].Lly >=_aeeaf });_babeg :=_ba .Search (_bdfb ,func (_bafab int )bool {return _gfcde [_bbgdc [_bafab ]].Lly > _aecfg });
return _bbgdc [_fagd :_babeg ];};func (_egadd *wordBag )depthRange (_adfef ,_gacb int )[]int {var _efdd []int ;for _ebfb :=range _egadd ._dfga {if _adfef <=_ebfb &&_ebfb <=_gacb {_efdd =append (_efdd ,_ebfb );};};if len (_efdd )==0{return nil ;};_ba .Ints (_efdd );
return _efdd ;};func (_cddb *textObject )moveTextSetLeading (_ccad ,_cde float64 ){_cddb ._abcg ._acge =-_cde ;_cddb .moveLP (_ccad ,_cde );};

// BidiText represents a bidi text organized in its visual order
// with base direction of the text.
type BidiText struct{_df string ;_gc string ;};func (_dfdd *textTable )isExportable ()bool {if _dfdd ._agae {return true ;};_ddade :=func (_gefb int )bool {_ececa :=_dfdd .get (0,_gefb );if _ececa ==nil {return false ;};_ebfdb :=_ececa .text ();_cdade :=_a .RuneCountInString (_ebfdb );
_gagce :=_ecaa .MatchString (_ebfdb );return _cdade <=1||_gagce ;};for _gbdfe :=0;_gbdfe < _dfdd ._ebaab ;_gbdfe ++{if !_ddade (_gbdfe ){return true ;};};return false ;};func _aaade (_gefcd []*textWord ,_gagb *textWord )[]*textWord {for _fcdf ,_ecbe :=range _gefcd {if _ecbe ==_gagb {return _facda (_gefcd ,_fcdf );
};};_fc .Log .Error ("\u0072\u0065\u006d\u006f\u0076e\u0057\u006f\u0072\u0064\u003a\u0020\u0077\u006f\u0072\u0064\u0073\u0020\u0064o\u0065\u0073\u006e\u0027\u0074\u0020\u0063\u006f\u006e\u0074\u0061\u0069\u006e\u0020\u0077\u006f\u0072\u0064\u003d\u0025\u0073",_gagb );
return nil ;};

// String returns a human readable description of `s`.
func (_fdeee intSet )String ()string {var _abdd []int ;for _bdad :=range _fdeee {if _fdeee .has (_bdad ){_abdd =append (_abdd ,_bdad );};};_ba .Ints (_abdd );return _cf .Sprintf ("\u0025\u002b\u0076",_abdd );};type pathSection struct{_gdfd []*subpath ;
_d .Color ;};func (_cdde *wordBag )pullWord (_fadg *textWord ,_gaaac int ,_deca map[int ]map[*textWord ]struct{}){_cdde .PdfRectangle =_fgde (_cdde .PdfRectangle ,_fadg .PdfRectangle );if _fadg ._geba > _cdde ._ggc {_cdde ._ggc =_fadg ._geba ;};_cdde ._dfga [_gaaac ]=append (_cdde ._dfga [_gaaac ],_fadg );
_deca [_gaaac ][_fadg ]=struct{}{};};var _fccc *_b .Regexp =_b .MustCompile (_cfdb +"\u007c"+_bcdg );func (_fcga *textTable )compositeRowCorridors ()map[int ][]float64 {_bbfdf :=make (map[int ][]float64 ,_fcga ._ebaab );if _dgda {_fc .Log .Info ("c\u006f\u006d\u0070\u006f\u0073\u0069t\u0065\u0052\u006f\u0077\u0043\u006f\u0072\u0072\u0069d\u006f\u0072\u0073:\u0020h\u003d\u0025\u0064",_fcga ._ebaab );
};for _dfdda :=1;_dfdda < _fcga ._ebaab ;_dfdda ++{var _bgee []compositeCell ;for _gacbe :=0;_gacbe < _fcga ._agaf ;_gacbe ++{if _cgde ,_cdgg :=_fcga ._ecag [_fcgc (_gacbe ,_dfdda )];_cdgg {_bgee =append (_bgee ,_cgde );};};if len (_bgee )==0{continue ;
};_addg :=_cdeeg (_bgee );_bbfdf [_dfdda ]=_addg ;if _dgda {_cf .Printf ("\u0020\u0020\u0020\u0025\u0032\u0064\u003a\u0020\u00256\u002e\u0032\u0066\u000a",_dfdda ,_addg );};};return _bbfdf ;};func (_dbbc *subpath )close (){if !_cgdb (_dbbc ._gfagc [0],_dbbc .last ()){_dbbc .add (_dbbc ._gfagc [0]);
};_dbbc ._bge =true ;_dbbc .removeDuplicates ();};type gridTiling struct{_ea .PdfRectangle ;_bebae []float64 ;_edgab []float64 ;_bafg map[float64 ]map[float64 ]gridTile ;};func _cagg (_gbba []TextMark ,_degc *int ,_bcaeg string )[]TextMark {_gfdbc :=_ccbg ;
_gfdbc .Text =_bcaeg ;return _gcfd (_gbba ,_degc ,_gfdbc );};func (_ggbea *textTable )log (_bfeac string ){if !_dgda {return ;};_fc .Log .Info ("~\u007e\u007e\u0020\u0025\u0073\u003a \u0025\u0064\u0020\u0078\u0020\u0025d\u0020\u0067\u0072\u0069\u0064\u003d\u0025t\u000a\u0020\u0020\u0020\u0020\u0020\u0020\u0025\u0036\u002e2\u0066",_bfeac ,_ggbea ._agaf ,_ggbea ._ebaab ,_ggbea ._agae ,_ggbea .PdfRectangle );
for _fface :=0;_fface < _ggbea ._ebaab ;_fface ++{for _gebf :=0;_gebf < _ggbea ._agaf ;_gebf ++{_gbcc :=_ggbea .get (_gebf ,_fface );if _gbcc ==nil {continue ;};_cf .Printf ("%\u0034\u0064\u0020\u00252d\u003a \u0025\u0036\u002e\u0032\u0066 \u0025\u0071\u0020\u0025\u0064\u000a",_gebf ,_fface ,_gbcc .PdfRectangle ,_afbcec (_gbcc .text (),50),_a .RuneCountInString (_gbcc .text ()));
};};};func _decc (_cebdf map[float64 ]gridTile )[]float64 {_gdea :=make ([]float64 ,0,len (_cebdf ));for _ecdda :=range _cebdf {_gdea =append (_gdea ,_ecdda );};_ba .Float64s (_gdea );return _gdea ;};func _cdbbf (_aaca map[float64 ][]*textLine )[]float64 {_ffaa :=[]float64 {};
for _ddcd :=range _aaca {_ffaa =append (_ffaa ,_ddcd );};_ba .Float64s (_ffaa );return _ffaa ;};

// String returns a string describing `pt`.
func (_bfae PageText )String ()string {_becc :=_cf .Sprintf ("P\u0061\u0067\u0065\u0054ex\u0074:\u0020\u0025\u0064\u0020\u0065l\u0065\u006d\u0065\u006e\u0074\u0073",len (_bfae ._ageb ));_bcae :=[]string {"\u002d"+_becc };for _ ,_fggd :=range _bfae ._ageb {_bcae =append (_bcae ,_fggd .String ());
};_bcae =append (_bcae ,"\u002b"+_becc );return _eb .Join (_bcae ,"\u000a");};func (_effg *textObject )getFont (_ebfd string )(*_ea .PdfFont ,error ){if _effg ._dbdb ._fa !=nil {_cffg ,_edea :=_effg .getFontDict (_ebfd );if _edea !=nil {_fc .Log .Debug ("\u0045\u0052\u0052OR\u003a\u0020\u0067\u0065\u0074\u0046\u006f\u006e\u0074:\u0020n\u0061m\u0065=\u0025\u0073\u002c\u0020\u0065\u0072\u0072\u006f\u0072\u003a\u0020\u0025\u0073",_ebfd ,_edea .Error ());
return nil ,_edea ;};_effg ._dbdb ._gee ++;_dedfe ,_fcef :=_effg ._dbdb ._fa [_cffg .String ()];if _fcef {_dedfe ._abafd =_effg ._dbdb ._gee ;return _dedfe ._caeee ,nil ;};};_gafd ,_ggg :=_effg .getFontDict (_ebfd );if _ggg !=nil {return nil ,_ggg ;};_caaa ,_ggg :=_effg .getFontDirect (_ebfd );
if _ggg !=nil {return nil ,_ggg ;};if _effg ._dbdb ._fa !=nil {_dfef :=fontEntry {_caaa ,_effg ._dbdb ._gee };if len (_effg ._dbdb ._fa )>=_caad {var _fda []string ;for _dfab :=range _effg ._dbdb ._fa {_fda =append (_fda ,_dfab );};_ba .Slice (_fda ,func (_bcbb ,_ebcfg int )bool {return _effg ._dbdb ._fa [_fda [_bcbb ]]._abafd < _effg ._dbdb ._fa [_fda [_ebcfg ]]._abafd ;
});delete (_effg ._dbdb ._fa ,_fda [0]);};_effg ._dbdb ._fa [_gafd .String ()]=_dfef ;};return _caaa ,nil ;};func _caefg (_ddadea int ,_egege func (int ,int )bool )[]int {_dgddf :=make ([]int ,_ddadea );for _feab :=range _dgddf {_dgddf [_feab ]=_feab ;
};_ba .Slice (_dgddf ,func (_cgfc ,_fagae int )bool {return _egege (_dgddf [_cgfc ],_dgddf [_fagae ])});return _dgddf ;};func _ecaeg (_feabc []_ad .PdfObject )(_gcdb ,_gefcc float64 ,_ffbba error ){if len (_feabc )!=2{return 0,0,_cf .Errorf ("\u0069\u006e\u0076\u0061l\u0069\u0064\u0020\u006e\u0075\u006d\u0062\u0065\u0072\u0020o\u0066 \u0070\u0061\u0072\u0061\u006d\u0073\u003a \u0025\u0064",len (_feabc ));
};_aefc ,_ffbba :=_ad .GetNumbersAsFloat (_feabc );if _ffbba !=nil {return 0,0,_ffbba ;};return _aefc [0],_aefc [1],nil ;};func _afafc (_bafcb *textLine )float64 {return _bafcb ._bbada [0].Llx };func (_ddde *ruling )equals (_cccd *ruling )bool {return _ddde ._gddac ==_cccd ._gddac &&_ggaf (_ddde ._cafa ,_cccd ._cafa )&&_ggaf (_ddde ._fddc ,_cccd ._fddc )&&_ggaf (_ddde ._begad ,_cccd ._begad );
};

// Len returns the number of TextMarks in `ma`.
func (_dcdd *TextMarkArray )Len ()int {if _dcdd ==nil {return 0;};return len (_dcdd ._bag );};func (_fadgg *wordBag )absorb (_beb *wordBag ){_abba :=_beb .makeRemovals ();for _dfde ,_fefe :=range _beb ._dfga {for _ ,_bbdb :=range _fefe {_fadgg .pullWord (_bbdb ,_dfde ,_abba );
};};_beb .applyRemovals (_abba );};func _fbd (_bbcg ,_cdffd bounded )float64 {_fegc :=_cgfd (_bbcg ,_cdffd );if !_eeaf (_fegc ){return _fegc ;};return _eefd (_bbcg ,_cdffd );};func _bbgg (_ceacae ,_ccab float64 )string {_badg :=!_eeaf (_ceacae -_ccab );
if _badg {return "\u000a";};return "\u0020";};const _cbad =20;func _gbbde (_bgdg []TextMark ,_bcaa *int )[]TextMark {_deeae :=_bgdg [len (_bgdg )-1];_gacec :=[]rune (_deeae .Text );if len (_gacec )==1{_bgdg =_bgdg [:len (_bgdg )-1];_bdae :=_bgdg [len (_bgdg )-1];
*_bcaa =_bdae .Offset +len (_bdae .Text );}else {_bcbfd :=_fdbgc (_deeae .Text );*_bcaa +=len (_bcbfd )-len (_deeae .Text );_deeae .Text =_bcbfd ;};return _bgdg ;};func (_ada *PageFonts )extractPageResourcesToFont (_dbfa *_ea .PdfPageResources )error {if _dbfa .Font ==nil {return _ed .New (_cec );
};_dgc ,_cadb :=_ad .GetDict (_dbfa .Font );if !_cadb {return _ed .New (_dfd );};for _ ,_bfe :=range _dgc .Keys (){var (_ff =true ;_ggb []byte ;_bbb string ;);_ecc ,_gcb :=_dbfa .GetFontByName (_bfe );if !_gcb {return _ed .New (_dga );};_fea ,_dea :=_ea .NewPdfFontFromPdfObject (_ecc );
if _dea !=nil {return _dea ;};_dbfc :=_fea .FontDescriptor ();_cba :=_fea .FontDescriptor ().FontName .String ();_aea :=_fea .Subtype ();if _dag (_ada .Fonts ,_cba ){continue ;};if len (_fea .ToUnicode ())==0{_ff =false ;};if _dbfc .FontFile !=nil {if _bfga ,_bfge :=_ad .GetStream (_dbfc .FontFile );
_bfge {_ggb ,_dea =_ad .DecodeStream (_bfga );if _dea !=nil {return _dea ;};_bbb =_cba +"\u002e\u0070\u0066\u0062";};}else if _dbfc .FontFile2 !=nil {if _ade ,_gdd :=_ad .GetStream (_dbfc .FontFile2 );_gdd {_ggb ,_dea =_ad .DecodeStream (_ade );if _dea !=nil {return _dea ;
};_bbb =_cba +"\u002e\u0074\u0074\u0066";};}else if _dbfc .FontFile3 !=nil {if _fef ,_cca :=_ad .GetStream (_dbfc .FontFile3 );_cca {_ggb ,_dea =_ad .DecodeStream (_fef );if _dea !=nil {return _dea ;};_bbb =_cba +"\u002e\u0063\u0066\u0066";};};if len (_bbb )< 1{_fc .Log .Debug (_aca );
};_geeb :=Font {FontName :_cba ,PdfFont :_fea ,IsCID :_fea .IsCID (),IsSimple :_fea .IsSimple (),ToUnicode :_ff ,FontType :_aea ,FontData :_ggb ,FontFileName :_bbb ,FontDescriptor :_dbfc };_ada .Fonts =append (_ada .Fonts ,_geeb );};return nil ;};func (_abfe *shapesState )quadraticTo (_cbdb ,_cbea ,_cgcc ,_dgac float64 ){if _dfcf {_fc .Log .Info ("\u0071\u0075\u0061d\u0072\u0061\u0074\u0069\u0063\u0054\u006f\u003a");
};_abfe .addPoint (_cgcc ,_dgac );};func (_dceba rulingList )isActualGrid ()(rulingList ,bool ){_cgea ,_aaaa :=_dceba .augmentGrid ();if !(len (_cgea )>=_fcf +1&&len (_aaaa )>=_adda +1){if _gbbe {_fc .Log .Info ("\u0069s\u0041\u0063t\u0075\u0061\u006c\u0047r\u0069\u0064\u003a \u004e\u006f\u0074\u0020\u0061\u006c\u0069\u0067\u006eed\u002e\u0020\u0025d\u0020\u0078 \u0025\u0064\u0020\u003c\u0020\u0025d\u0020\u0078 \u0025\u0064",len (_cgea ),len (_aaaa ),_fcf +1,_adda +1);
};return nil ,false ;};if _gbbe {_fc .Log .Info ("\u0069\u0073\u0041\u0063\u0074\u0075a\u006c\u0047\u0072\u0069\u0064\u003a\u0020\u0025\u0073\u0020\u003a\u0020\u0025t\u0020\u0026\u0020\u0025\u0074\u0020\u2192 \u0025\u0074",_dceba ,len (_cgea )>=2,len (_aaaa )>=2,len (_cgea )>=2&&len (_aaaa )>=2);
for _cdcf ,_eaaa :=range _dceba {_cf .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0076\u000a",_cdcf ,_eaaa );};};if _ebfbd {_aeca ,_bcaea :=_cgea [0],_cgea [len (_cgea )-1];_bbga ,_bfega :=_aaaa [0],_aaaa [len (_aaaa )-1];if !(_bbaa (_aeca ._cafa -_bbga ._fddc )&&_bbaa (_bcaea ._cafa -_bbga ._begad )&&_bbaa (_bbga ._cafa -_aeca ._begad )&&_bbaa (_bfega ._cafa -_aeca ._fddc )){if _gbbe {_fc .Log .Info ("\u0069\u0073\u0041\u0063\u0074\u0075\u0061l\u0047\u0072\u0069d\u003a\u0020\u0020N\u006f\u0074 \u0061\u006c\u0069\u0067\u006e\u0065d\u002e\n\t\u0076\u0030\u003d\u0025\u0073\u000a\u0009\u0076\u0031\u003d\u0025\u0073\u000a\u0009\u0068\u0030\u003d\u0025\u0073\u000a\u0009\u0068\u0031\u003d\u0025\u0073",_aeca ,_bcaea ,_bbga ,_bfega );
};return nil ,false ;};}else {if !_cgea .aligned (){if _adaf {_fc .Log .Info ("i\u0073\u0041\u0063\u0074\u0075\u0061l\u0047\u0072\u0069\u0064\u003a\u0020N\u006f\u0074\u0020\u0061\u006c\u0069\u0067n\u0065\u0064\u0020\u0076\u0065\u0072\u0074\u0073\u002e\u0020%\u0064",len (_cgea ));
};return nil ,false ;};if !_aaaa .aligned (){if _gbbe {_fc .Log .Info ("i\u0073\u0041\u0063\u0074\u0075\u0061l\u0047\u0072\u0069\u0064\u003a\u0020N\u006f\u0074\u0020\u0061\u006c\u0069\u0067n\u0065\u0064\u0020\u0068\u006f\u0072\u007a\u0073\u002e\u0020%\u0064",len (_aaaa ));
};return nil ,false ;};};_gcfb :=append (_cgea ,_aaaa ...);return _gcfb ,true ;};func _egdeb (_acec []pathSection ){if _cbdf < 0.0{return ;};if _gbbe {_fc .Log .Info ("\u0067\u0072\u0061\u006e\u0075\u006c\u0061\u0072\u0069\u007a\u0065\u003a\u0020\u0025\u0064 \u0073u\u0062\u0070\u0061\u0074\u0068\u0020\u0073\u0065\u0063\u0074\u0069\u006f\u006e\u0073",len (_acec ));
};for _cabca ,_abeg :=range _acec {for _caacf ,_ccbga :=range _abeg ._gdfd {for _ccec ,_efdca :=range _ccbga ._gfagc {_ccbga ._gfagc [_ccec ]=_cg .Point {X :_dfcae (_efdca .X ),Y :_dfcae (_efdca .Y )};if _gbbe {_cfgec :=_ccbga ._gfagc [_ccec ];if !_cgdb (_efdca ,_cfgec ){_cafcg :=_cg .Point {X :_cfgec .X -_efdca .X ,Y :_cfgec .Y -_efdca .Y };
_cf .Printf ("\u0025\u0034d \u002d\u0020\u00254\u0064\u0020\u002d\u0020%4d\u003a %\u002e\u0032\u0066\u0020\u2192\u0020\u0025.2\u0066\u0020\u0028\u0025\u0067\u0029\u000a",_cabca ,_caacf ,_ccec ,_efdca ,_cfgec ,_cafcg );};};};};};};const (_dfd ="\u0045\u0052R\u004f\u0052\u003a\u0020\u0043\u0061\u006e\u0027\u0074\u0020\u0063\u006f\u006e\u0076\u0065\u0072\u0074\u0020\u0066\u006f\u006e\u0074\u0020\u006f\u0062\u006a\u0065\u0063\u0074\u002c\u0020\u0069\u006e\u0076\u0061\u006c\u0069\u0064\u0020\u0074\u0079\u0070\u0065";
_dga ="\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0043a\u006e\u0027\u0074 g\u0065\u0074\u0020\u0066\u006f\u006et\u0020\u0070\u0072\u006f\u0070\u0065\u0072\u0074\u0069\u0065\u0073\u002c\u0020\u0066\u006fn\u0074\u0020\u006e\u006f\u0074\u0020\u0066\u006fu\u006e\u0064";
_aca ="\u0045\u0052\u0052O\u0052\u003a\u0020\u0043\u0061\u006e\u0027\u0074\u0020\u0067\u0065\u0074\u0020\u0066\u006f\u006e\u0074\u0020\u0073\u0074\u0072\u0065\u0061\u006d\u002c\u0020\u0069\u006e\u0076a\u006c\u0069\u0064\u0020\u0074\u0079\u0070\u0065";_cec ="E\u0052R\u004f\u0052\u003a\u0020\u004e\u006f\u0020\u0066o\u006e\u0074\u0020\u0066ou\u006e\u0064";
);func _daef (_fdff ,_gfac ,_aegg float64 )rulingKind {if _fdff >=_aegg &&_dbaf (_gfac ,_fdff ){return _ecacd ;};if _gfac >=_aegg &&_dbaf (_fdff ,_gfac ){return _bgcg ;};return _badgc ;};type gridTile struct{_ea .PdfRectangle ;_ddba ,_cafgb ,_beag ,_gcgff bool ;
};func _aegb (_bdaf []pathSection )rulingList {_egdeb (_bdaf );if _gbbe {_fc .Log .Info ("\u006d\u0061k\u0065\u0053\u0074\u0072\u006f\u006b\u0065\u0052\u0075\u006c\u0069\u006e\u0067\u0073\u003a\u0020\u0025\u0064\u0020\u0073\u0074\u0072ok\u0065\u0073",len (_bdaf ));
};var _gfebc rulingList ;for _ ,_bade :=range _bdaf {for _ ,_aedd :=range _bade ._gdfd {if len (_aedd ._gfagc )< 2{continue ;};_dgbc :=_aedd ._gfagc [0];for _ ,_accf :=range _aedd ._gfagc [1:]{if _dcb ,_aefg :=_eeda (_dgbc ,_accf ,_bade .Color );_aefg {_gfebc =append (_gfebc ,_dcb );
};_dgbc =_accf ;};};};if _gbbe {_fc .Log .Info ("m\u0061\u006b\u0065\u0053tr\u006fk\u0065\u0052\u0075\u006c\u0069n\u0067\u0073\u003a\u0020\u0025\u0073",_gfebc );};return _gfebc ;};func (_geagg *subpath )add (_dafc ..._cg .Point ){_geagg ._gfagc =append (_geagg ._gfagc ,_dafc ...)};


// ExtractText processes and extracts all text data in content streams and returns as a string.
// It takes into account character encodings in the PDF file, which are decoded by
// CharcodeBytesToUnicode.
// Characters that can't be decoded are replaced with MissingCodeRune ('\ufffd' = �).
func (_dca *Extractor )ExtractText ()(string ,error ){_ecae ,_ ,_ ,_gbd :=_dca .ExtractTextWithStats ();return _ecae ,_gbd ;};func _dcae (_faae []*textLine ,_dbcb ,_daedc float64 )[]*textLine {var _cefc []*textLine ;for _ ,_fefa :=range _faae {if _dbcb ==-1{if _fefa ._fbgb > _daedc {_cefc =append (_cefc ,_fefa );
};}else {if _fefa ._fbgb > _daedc &&_fefa ._fbgb < _dbcb {_cefc =append (_cefc ,_fefa );};};};return _cefc ;};func (_agbbg *textTable )logComposite (_daae string ){if !_dgda {return ;};_fc .Log .Info ("\u007e~\u007eP\u0061\u0072\u0061\u0020\u0025d\u0020\u0078 \u0025\u0064\u0020\u0025\u0073",_agbbg ._agaf ,_agbbg ._ebaab ,_daae );
_cf .Printf ("\u0025\u0035\u0073 \u007c","");for _bgde :=0;_bgde < _agbbg ._agaf ;_bgde ++{_cf .Printf ("\u0025\u0033\u0064 \u007c",_bgde );};_cf .Println ("");_cf .Printf ("\u0025\u0035\u0073 \u002b","");for _cbegd :=0;_cbegd < _agbbg ._agaf ;_cbegd ++{_cf .Printf ("\u0025\u0033\u0073 \u002b","\u002d\u002d\u002d");
};_cf .Println ("");for _efba :=0;_efba < _agbbg ._ebaab ;_efba ++{_cf .Printf ("\u0025\u0035\u0064 \u007c",_efba );for _ffce :=0;_ffce < _agbbg ._agaf ;_ffce ++{_edbd ,_ :=_agbbg ._ecag [_fcgc (_ffce ,_efba )].parasBBox ();_cf .Printf ("\u0025\u0033\u0064 \u007c",len (_edbd ));
};_cf .Println ("");};_fc .Log .Info ("\u007e~\u007eT\u0065\u0078\u0074\u0020\u0025d\u0020\u0078 \u0025\u0064\u0020\u0025\u0073",_agbbg ._agaf ,_agbbg ._ebaab ,_daae );_cf .Printf ("\u0025\u0035\u0073 \u007c","");for _aedea :=0;_aedea < _agbbg ._agaf ;
_aedea ++{_cf .Printf ("\u0025\u0031\u0032\u0064\u0020\u007c",_aedea );};_cf .Println ("");_cf .Printf ("\u0025\u0035\u0073 \u002b","");for _efcd :=0;_efcd < _agbbg ._agaf ;_efcd ++{_cf .Print ("\u002d\u002d\u002d\u002d\u002d\u002d\u002d\u002d\u002d-\u002d\u002d\u002d\u002b");
};_cf .Println ("");for _dcaed :=0;_dcaed < _agbbg ._ebaab ;_dcaed ++{_cf .Printf ("\u0025\u0035\u0064 \u007c",_dcaed );for _abgdd :=0;_abgdd < _agbbg ._agaf ;_abgdd ++{_agaee ,_ :=_agbbg ._ecag [_fcgc (_abgdd ,_dcaed )].parasBBox ();_dccd :="";_dgdc :=_agaee .merge ();
if _dgdc !=nil {_dccd =_dgdc .text ();};_dccd =_cf .Sprintf ("\u0025\u0071",_afbcec (_dccd ,12));_dccd =_dccd [1:len (_dccd )-1];_cf .Printf ("\u0025\u0031\u0032\u0073\u0020\u007c",_dccd );};_cf .Println ("");};};func _ecdg (_agde _ea .PdfRectangle ,_gaad []*textLine )*textPara {return &textPara {PdfRectangle :_agde ,_cebdg :_gaad };
};func _eggbc (_begg string ,_cgcbb []rulingList ){_fc .Log .Info ("\u0024\u0024 \u0025\u0064\u0020g\u0072\u0069\u0064\u0073\u0020\u002d\u0020\u0025\u0073",len (_cgcbb ),_begg );for _gdgcb ,_dgbg :=range _cgcbb {_cf .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0073\u000a",_gdgcb ,_dgbg .String ());
};};func (_bgb *textObject )setTextRenderMode (_aae int ){if _bgb ==nil {return ;};_bgb ._abcg ._afbd =RenderMode (_aae );};

// String returns a description of `k`.
func (_ccgg markKind )String ()string {_bffd ,_bebc :=_feec [_ccgg ];if !_bebc {return _cf .Sprintf ("\u004e\u006f\u0074\u0020\u0061\u0020\u006d\u0061\u0072k\u003a\u0020\u0025\u0064",_ccgg );};return _bffd ;};func (_gdbf *structTreeRoot )parseStructTreeRoot (_bdcg _ad .PdfObject ){if _bdcg !=nil {_acdg ,_ccbe :=_ad .GetDict (_bdcg );
if !_ccbe {_fc .Log .Debug ("\u0070\u0061\u0072s\u0065\u0053\u0074\u0072\u0075\u0063\u0074\u0054\u0072\u0065\u0065\u0052\u006f\u006f\u0074\u003a\u0020\u0064\u0069\u0063\u0074\u0069\u006f\u006e\u0061\u0072\u0079\u0020\u006eo\u0074\u0020\u0066\u006f\u0075\u006e\u0064\u002e");
};K :=_acdg .Get ("\u004b");_eaag :=_acdg .Get ("\u0054\u0079\u0070\u0065").String ();var _caef *_ad .PdfObjectArray ;switch _ecfc :=K .(type ){case *_ad .PdfObjectArray :_caef =_ecfc ;case *_ad .PdfObjectReference :_caef =_ad .MakeArray (K );};_bcce :=[]structElement {};
for _ ,_gdag :=range _caef .Elements (){_fbge :=&structElement {};_fbge .parseStructElement (_gdag );_bcce =append (_bcce ,*_fbge );};_gdbf ._cce =_bcce ;_gdbf ._cagb =_eaag ;};};

// String returns a description of `t`.
func (_efcc *textTable )String ()string {return _cf .Sprintf ("\u0025\u0064\u0020\u0078\u0020\u0025\u0064\u0020\u0025\u0074",_efcc ._agaf ,_efcc ._ebaab ,_efcc ._agae );};func (_beed compositeCell )parasBBox ()(paraList ,_ea .PdfRectangle ){return _beed .paraList ,_beed .PdfRectangle ;
};func (_cggff intSet )has (_cbcg int )bool {_ ,_gdcbc :=_cggff [_cbcg ];return _gdcbc };func (_eccbe *textObject )reset (){_eccbe ._bdfa =_cg .IdentityMatrix ();_eccbe ._acdcf =_cg .IdentityMatrix ();_eccbe ._afgad =nil ;};func _fcag (_baca ,_fcca _ea .PdfRectangle )(_ea .PdfRectangle ,bool ){if !_ggbc (_baca ,_fcca ){return _ea .PdfRectangle {},false ;
};return _ea .PdfRectangle {Llx :_ag .Max (_baca .Llx ,_fcca .Llx ),Urx :_ag .Min (_baca .Urx ,_fcca .Urx ),Lly :_ag .Max (_baca .Lly ,_fcca .Lly ),Ury :_ag .Min (_baca .Ury ,_fcca .Ury )},true ;};func (_feafc *wordBag )depthBand (_ceddg ,_fagf float64 )[]int {if len (_feafc ._dfga )==0{return nil ;
};return _feafc .depthRange (_feafc .getDepthIdx (_ceddg ),_feafc .getDepthIdx (_fagf ));};const _fgaf =1.0/1000.0;func (_abfb *wordBag )text ()string {_ebea :=_abfb .allWords ();_aggg :=make ([]string ,len (_ebea ));for _acgc ,_eedca :=range _ebea {_aggg [_acgc ]=_eedca ._cfdag ;
};return _eb .Join (_aggg ,"\u0020");};

// Extractor stores and offers functionality for extracting content from PDF pages.
type Extractor struct{_acg string ;_daf *_ea .PdfPageResources ;_gdb _ea .PdfRectangle ;_ebe *_ea .PdfRectangle ;_fa map[string ]fontEntry ;_gb map[string ]textResult ;_ede map[string ]textResult ;_gee int64 ;_fge int ;_gbf *Options ;_fcgb *_ad .PdfObject ;
_ef _ad .PdfObject ;_bfg []*_ea .PdfAnnotation ;};func (_dgfa *TextMarkArray )exists (_ddbc TextMark )bool {for _ ,_abde :=range _dgfa .Elements (){if _ge .DeepEqual (_ddbc .DirectObject ,_abde .DirectObject )&&_ge .DeepEqual (_ddbc .BBox ,_abde .BBox )&&_abde .Text ==_ddbc .Text {return true ;
};};return false ;};func (_cgffg rectRuling )asRuling ()(*ruling ,bool ){_daab :=ruling {_gddac :_cgffg ._bfdc ,Color :_cgffg .Color ,_afbc :_eafad };switch _cgffg ._bfdc {case _bgcg :_daab ._cafa =0.5*(_cgffg .Llx +_cgffg .Urx );_daab ._fddc =_cgffg .Lly ;
_daab ._begad =_cgffg .Ury ;_edcac ,_fgad :=_cgffg .checkWidth (_cgffg .Llx ,_cgffg .Urx );if !_fgad {if _aceg {_fc .Log .Error ("\u0072\u0065\u0063\u0074\u0052\u0075l\u0069\u006e\u0067\u002e\u0061\u0073\u0052\u0075\u006c\u0069\u006e\u0067\u003a\u0020\u0072\u0075\u006c\u0069\u006e\u0067V\u0065\u0072\u0074\u0020\u0021\u0063\u0068\u0065\u0063\u006b\u0057\u0069\u0064\u0074h\u0020v\u003d\u0025\u002b\u0076",_cgffg );
};return nil ,false ;};_daab ._gcccd =_edcac ;case _ecacd :_daab ._cafa =0.5*(_cgffg .Lly +_cgffg .Ury );_daab ._fddc =_cgffg .Llx ;_daab ._begad =_cgffg .Urx ;_gaebg ,_daadd :=_cgffg .checkWidth (_cgffg .Lly ,_cgffg .Ury );if !_daadd {if _aceg {_fc .Log .Error ("\u0072\u0065\u0063\u0074\u0052\u0075l\u0069\u006e\u0067\u002e\u0061\u0073\u0052\u0075\u006c\u0069\u006e\u0067\u003a\u0020\u0072\u0075\u006c\u0069\u006e\u0067H\u006f\u0072\u007a\u0020\u0021\u0063\u0068\u0065\u0063\u006b\u0057\u0069\u0064\u0074h\u0020v\u003d\u0025\u002b\u0076",_cgffg );
};return nil ,false ;};_daab ._gcccd =_gaebg ;default:_fc .Log .Error ("\u0062\u0061\u0064\u0020pr\u0069\u006d\u0061\u0072\u0079\u0020\u006b\u0069\u006e\u0064\u003d\u0025\u0064",_cgffg ._bfdc );return nil ,false ;};return &_daab ,true ;};func (_fgcaf paraList )log (_aecc string ){if !_adbf {return ;
};_fc .Log .Info ("%\u0038\u0073\u003a\u0020\u0025\u0064 \u0070\u0061\u0072\u0061\u0073\u0020=\u003d\u003d\u003d\u003d\u003d\u003d\u002d-\u002d\u002d\u002d\u002d\u002d\u003d\u003d\u003d\u003d\u003d=\u003d",_aecc ,len (_fgcaf ));for _acdb ,_ecgge :=range _fgcaf {if _ecgge ==nil {continue ;
};_gcef :=_ecgge .text ();_aeeeg :="\u0020\u0020";if _ecgge ._ebdd !=nil {_aeeeg =_cf .Sprintf ("\u005b%\u0064\u0078\u0025\u0064\u005d",_ecgge ._ebdd ._agaf ,_ecgge ._ebdd ._ebaab );};_cf .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0036\u002e\u0032\u0066\u0020\u0025s\u0020\u0025\u0071\u000a",_acdb ,_ecgge .PdfRectangle ,_aeeeg ,_afbcec (_gcef ,50));
};};func (_cfaca *textPara )taken ()bool {return _cfaca ==nil ||_cfaca ._gfff };func _edbed (_gded *wordBag ,_fbga *textWord ,_begc float64 )bool {return _fbga .Llx < _gded .Urx +_begc &&_gded .Llx -_begc < _fbga .Urx ;};func (_fefge *subpath )isQuadrilateral ()bool {if len (_fefge ._gfagc )< 4||len (_fefge ._gfagc )> 5{return false ;
};if len (_fefge ._gfagc )==5{_bgeaf :=_fefge ._gfagc [0];_abedd :=_fefge ._gfagc [4];if _bgeaf .X !=_abedd .X ||_bgeaf .Y !=_abedd .Y {return false ;};};return true ;};

// String returns a description of `tm`.
func (_dccb *textMark )String ()string {return _cf .Sprintf ("\u0025\u002e\u0032f \u0066\u006f\u006e\u0074\u0073\u0069\u007a\u0065\u003d\u0025\u002e\u0032\u0066\u0020\u0022\u0025\u0073\u0022",_dccb .PdfRectangle ,_dccb ._afcb ,_dccb ._cddae );};

// Options extractor options.
type Options struct{

// DisableDocumentTags specifies whether to use the document tags during list extraction.
DisableDocumentTags bool ;

// ApplyCropBox will extract page text based on page cropbox if set to `true`.
ApplyCropBox bool ;

// UseSimplerExtractionProcess will skip topological text ordering and table processing.
//
// NOTE: While normally the extra processing is beneficial, it can also lead to problems when it does not work.
// Thus it is a flag to allow the user to control this process.
//
// Skipping some extraction processes would also lead to the reduced processing time.
UseSimplerExtractionProcess bool ;

// IncludeAnnotations specifies whether to include annotations in the extraction process, default value is `false`.
IncludeAnnotations bool ;};func (_dbfad rulingList )vertsHorzs ()(rulingList ,rulingList ){var _feccf ,_gfagg rulingList ;for _ ,_cdbf :=range _dbfad {switch _cdbf ._gddac {case _bgcg :_feccf =append (_feccf ,_cdbf );case _ecacd :_gfagg =append (_gfagg ,_cdbf );
};};return _feccf ,_gfagg ;};func (_edccc lineRuling )yMean ()float64 {return 0.5*(_edccc ._edfeg .Y +_edccc ._acdee .Y )};type intSet map[int ]struct{};func (_gcbcf *textTable )put (_bbfae ,_dafd int ,_dagee *textPara ){_gcbcf ._aaedb [_fcgc (_bbfae ,_dafd )]=_dagee ;
};func (_effab intSet )del (_effgb int ){delete (_effab ,_effgb )};

// ImageExtractOptions contains options for controlling image extraction from
// PDF pages.
type ImageExtractOptions struct{IncludeInlineStencilMasks bool ;};func _cefa (_ffdb []*wordBag )[]*wordBag {if len (_ffdb )<=1{return _ffdb ;};if _cadga {_fc .Log .Info ("\u006d\u0065\u0072\u0067\u0065\u0057\u006f\u0072\u0064B\u0061\u0067\u0073\u003a");
};_ba .Slice (_ffdb ,func (_fdfd ,_bfea int )bool {_gace ,_fcd :=_ffdb [_fdfd ],_ffdb [_bfea ];_abbg :=_gace .Width ()*_gace .Height ();_fcbed :=_fcd .Width ()*_fcd .Height ();if _abbg !=_fcbed {return _abbg > _fcbed ;};if _gace .Height ()!=_fcd .Height (){return _gace .Height ()> _fcd .Height ();
};return _fdfd < _bfea ;});var _ddfc []*wordBag ;_ccfe :=make (intSet );for _afbf :=0;_afbf < len (_ffdb );_afbf ++{if _ccfe .has (_afbf ){continue ;};_eeag :=_ffdb [_afbf ];for _cafc :=_afbf +1;_cafc < len (_ffdb );_cafc ++{if _ccfe .has (_afbf ){continue ;
};_cgbf :=_ffdb [_cafc ];_fdcb :=_eeag .PdfRectangle ;_fdcb .Llx -=_eeag ._ggc ;if _aafg (_fdcb ,_cgbf .PdfRectangle ){_eeag .absorb (_cgbf );_ccfe .add (_cafc );};};_ddfc =append (_ddfc ,_eeag );};if len (_ffdb )!=len (_ddfc )+len (_ccfe ){_fc .Log .Error ("\u006d\u0065\u0072ge\u0057\u006f\u0072\u0064\u0042\u0061\u0067\u0073\u003a \u0025d\u2192%\u0064 \u0061\u0062\u0073\u006f\u0072\u0062\u0065\u0064\u003d\u0025\u0064",len (_ffdb ),len (_ddfc ),len (_ccfe ));
};return _ddfc ;};func (_eddeb rulingList )intersections ()map[int ]intSet {var _added ,_eagbg []int ;for _edcda ,_agbff :=range _eddeb {switch _agbff ._gddac {case _bgcg :_added =append (_added ,_edcda );case _ecacd :_eagbg =append (_eagbg ,_edcda );};
};if len (_added )< _fcf +1||len (_eagbg )< _adda +1{return nil ;};if len (_added )+len (_eagbg )> _adgb {_fc .Log .Debug ("\u0069\u006e\u0074\u0065\u0072\u0073e\u0063\u0074\u0069\u006f\u006e\u0073\u003a\u0020\u0054\u004f\u004f\u0020\u004d\u0041\u004e\u0059\u0020\u0072\u0075\u006ci\u006e\u0067\u0073\u0020\u0076\u0065\u0063\u0073\u003d\u0025\u0064\u0020\u003d\u0020%\u0064 \u0078\u0020\u0025\u0064",len (_eddeb ),len (_added ),len (_eagbg ));
return nil ;};_bdedg :=make (map[int ]intSet ,len (_added )+len (_eagbg ));for _ ,_fcee :=range _added {for _ ,_gbge :=range _eagbg {if _eddeb [_fcee ].intersects (_eddeb [_gbge ]){if _ ,_dfgaf :=_bdedg [_fcee ];!_dfgaf {_bdedg [_fcee ]=make (intSet );
};if _ ,_dgcc :=_bdedg [_gbge ];!_dgcc {_bdedg [_gbge ]=make (intSet );};_bdedg [_fcee ].add (_gbge );_bdedg [_gbge ].add (_fcee );};};};return _bdedg ;};func _fecg (_eacad map[float64 ]map[float64 ]gridTile )[]float64 {_cdffb :=make ([]float64 ,0,len (_eacad ));
for _faeeg :=range _eacad {_cdffb =append (_cdffb ,_faeeg );};_ba .Float64s (_cdffb );_dcagg :=len (_cdffb );for _acdd :=0;_acdd < _dcagg /2;_acdd ++{_cdffb [_acdd ],_cdffb [_dcagg -1-_acdd ]=_cdffb [_dcagg -1-_acdd ],_cdffb [_acdd ];};return _cdffb ;};
func (_ecaca *textTable )getRight ()paraList {_dbagd :=make (paraList ,_ecaca ._ebaab );for _gcga :=0;_gcga < _ecaca ._ebaab ;_gcga ++{_ebbgd :=_ecaca .get (_ecaca ._agaf -1,_gcga )._gccd ;if _ebbgd .taken (){return nil ;};_dbagd [_gcga ]=_ebbgd ;};for _dfbee :=0;
_dfbee < _ecaca ._ebaab -1;_dfbee ++{if _dbagd [_dfbee ]._aedgf !=_dbagd [_dfbee +1]{return nil ;};};return _dbagd ;};func (_febbb rulingList )sortStrict (){_ba .Slice (_febbb ,func (_agddb ,_eaef int )bool {_dfgc ,_faegg :=_febbb [_agddb ],_febbb [_eaef ];
_bgbcb ,_gfgfa :=_dfgc ._gddac ,_faegg ._gddac ;if _bgbcb !=_gfgfa {return _bgbcb > _gfgfa ;};_ecba ,_cgbc :=_dfgc ._cafa ,_faegg ._cafa ;if !_eeaf (_ecba -_cgbc ){return _ecba < _cgbc ;};_ecba ,_cgbc =_dfgc ._fddc ,_faegg ._fddc ;if _ecba !=_cgbc {return _ecba < _cgbc ;
};return _dfgc ._begad < _faegg ._begad ;});};func (_bbdd *subpath )removeDuplicates (){if len (_bbdd ._gfagc )==0{return ;};_adcf :=[]_cg .Point {_bbdd ._gfagc [0]};for _ ,_eeca :=range _bbdd ._gfagc [1:]{if !_cgdb (_eeca ,_adcf [len (_adcf )-1]){_adcf =append (_adcf ,_eeca );
};};_bbdd ._gfagc =_adcf ;};func (_fbea paraList )addNeighbours (){_acegb :=func (_gcgef []int ,_bgdb *textPara )([]*textPara ,[]*textPara ){_gdbg :=make ([]*textPara ,0,len (_gcgef )-1);_caffb :=make ([]*textPara ,0,len (_gcgef )-1);for _ ,_efgfa :=range _gcgef {_fgecg :=_fbea [_efgfa ];
if _fgecg .Urx <=_bgdb .Llx {_gdbg =append (_gdbg ,_fgecg );}else if _fgecg .Llx >=_bgdb .Urx {_caffb =append (_caffb ,_fgecg );};};return _gdbg ,_caffb ;};_fccd :=func (_ddadc []int ,_aabgc *textPara )([]*textPara ,[]*textPara ){_ffae :=make ([]*textPara ,0,len (_ddadc )-1);
_dafb :=make ([]*textPara ,0,len (_ddadc )-1);for _ ,_gbedc :=range _ddadc {_ebbdb :=_fbea [_gbedc ];if _ebbdb .Ury <=_aabgc .Lly {_dafb =append (_dafb ,_ebbdb );}else if _ebbdb .Lly >=_aabgc .Ury {_ffae =append (_ffae ,_ebbdb );};};return _ffae ,_dafb ;
};_efgdd :=_fbea .yNeighbours (_gege );for _ ,_cdegd :=range _fbea {_dcfdb :=_efgdd [_cdegd ];if len (_dcfdb )==0{continue ;};_abcgd ,_bdffa :=_acegb (_dcfdb ,_cdegd );if len (_abcgd )==0&&len (_bdffa )==0{continue ;};if len (_abcgd )> 0{_deagc :=_abcgd [0];
for _ ,_ecdeb :=range _abcgd [1:]{if _ecdeb .Urx >=_deagc .Urx {_deagc =_ecdeb ;};};for _ ,_fgcaa :=range _abcgd {if _fgcaa !=_deagc &&_fgcaa .Urx > _deagc .Llx {_deagc =nil ;break ;};};if _deagc !=nil &&_eedd (_cdegd .PdfRectangle ,_deagc .PdfRectangle ){_cdegd ._dgad =_deagc ;
};};if len (_bdffa )> 0{_dafdc :=_bdffa [0];for _ ,_dbfg :=range _bdffa [1:]{if _dbfg .Llx <=_dafdc .Llx {_dafdc =_dbfg ;};};for _ ,_cfbca :=range _bdffa {if _cfbca !=_dafdc &&_cfbca .Llx < _dafdc .Urx {_dafdc =nil ;break ;};};if _dafdc !=nil &&_eedd (_cdegd .PdfRectangle ,_dafdc .PdfRectangle ){_cdegd ._gccd =_dafdc ;
};};};_efgdd =_fbea .xNeighbours (_cgbfc );for _ ,_fbbda :=range _fbea {_efgbf :=_efgdd [_fbbda ];if len (_efgbf )==0{continue ;};_afbeg ,_gfgd :=_fccd (_efgbf ,_fbbda );if len (_afbeg )==0&&len (_gfgd )==0{continue ;};if len (_gfgd )> 0{_eagg :=_gfgd [0];
for _ ,_eaabe :=range _gfgd [1:]{if _eaabe .Ury >=_eagg .Ury {_eagg =_eaabe ;};};for _ ,_fcdc :=range _gfgd {if _fcdc !=_eagg &&_fcdc .Ury > _eagg .Lly {_eagg =nil ;break ;};};if _eagg !=nil &&_cefd (_fbbda .PdfRectangle ,_eagg .PdfRectangle ){_fbbda ._aedgf =_eagg ;
};};if len (_afbeg )> 0{_dgedg :=_afbeg [0];for _ ,_fbgc :=range _afbeg [1:]{if _fbgc .Lly <=_dgedg .Lly {_dgedg =_fbgc ;};};for _ ,_dfabc :=range _afbeg {if _dfabc !=_dgedg &&_dfabc .Lly < _dgedg .Ury {_dgedg =nil ;break ;};};if _dgedg !=nil &&_cefd (_fbbda .PdfRectangle ,_dgedg .PdfRectangle ){_fbbda ._abbb =_dgedg ;
};};};for _ ,_gbage :=range _fbea {if _gbage ._dgad !=nil &&_gbage ._dgad ._gccd !=_gbage {_gbage ._dgad =nil ;};if _gbage ._abbb !=nil &&_gbage ._abbb ._aedgf !=_gbage {_gbage ._abbb =nil ;};if _gbage ._gccd !=nil &&_gbage ._gccd ._dgad !=_gbage {_gbage ._gccd =nil ;
};if _gbage ._aedgf !=nil &&_gbage ._aedgf ._abbb !=_gbage {_gbage ._aedgf =nil ;};};};func (_aedb gridTiling )log (_fbcc string ){if !_cafd {return ;};_fc .Log .Info ("\u0074i\u006ci\u006e\u0067\u003a\u0020\u0025d\u0020\u0078 \u0025\u0064\u0020\u0025\u0071",len (_aedb ._bebae ),len (_aedb ._edgab ),_fbcc );
_cf .Printf ("\u0020\u0020\u0020l\u006c\u0078\u003d\u0025\u002e\u0032\u0066\u000a",_aedb ._bebae );_cf .Printf ("\u0020\u0020\u0020l\u006c\u0079\u003d\u0025\u002e\u0032\u0066\u000a",_aedb ._edgab );for _acfec ,_aeeg :=range _aedb ._edgab {_bcbbg ,_ceegd :=_aedb ._bafg [_aeeg ];
if !_ceegd {continue ;};_cf .Printf ("%\u0034\u0064\u003a\u0020\u0025\u0036\u002e\u0032\u0066\u000a",_acfec ,_aeeg );for _bdcad ,_aaff :=range _aedb ._bebae {_aebe ,_bggb :=_bcbbg [_aaff ];if !_bggb {continue ;};_cf .Printf ("\u0025\u0038\u0064\u003a\u0020\u0025\u0073\u000a",_bdcad ,_aebe .String ());
};};};func _dbef (_gccef []*textMark ,_dcac _ea .PdfRectangle ,_bae rulingList ,_dadcc []gridTiling ,_dcec bool )paraList {_fc .Log .Trace ("\u006d\u0061\u006b\u0065\u0054\u0065\u0078\u0074\u0050\u0061\u0067\u0065\u003a \u0025\u0064\u0020\u0065\u006c\u0065m\u0065\u006e\u0074\u0073\u0020\u0070\u0061\u0067\u0065\u0053\u0069\u007a\u0065=\u0025\u002e\u0032\u0066",len (_gccef ),_dcac );
if len (_gccef )==0{return nil ;};_gfeb :=_gcadf (_gccef ,_dcac );if len (_gfeb )==0{return nil ;};_bae .log ("\u006d\u0061\u006be\u0054\u0065\u0078\u0074\u0050\u0061\u0067\u0065");_cbda ,_aafe :=_bae .vertsHorzs ();_daafg :=_gdda (_gfeb ,_dcac .Ury ,_cbda ,_aafe );
_fcgbe :=_fdcc (_daafg ,_dcac .Ury ,_cbda ,_aafe );_fcgbe =_cefa (_fcgbe );_cageb :=make (paraList ,0,len (_fcgbe ));for _ ,_ffbd :=range _fcgbe {_dffa :=_ffbd .arrangeText ();if _dffa !=nil {_cageb =append (_cageb ,_dffa );};};if !_dcec &&len (_cageb )>=_ebgd {_cageb =_cageb .extractTables (_dadcc );
};_cageb .sortReadingOrder ();if !_dcec {_cageb .sortTopoOrder ();};_cageb .log ("\u0073\u006f\u0072te\u0064\u0020\u0069\u006e\u0020\u0072\u0065\u0061\u0064\u0069\u006e\u0067\u0020\u006f\u0072\u0064\u0065\u0072");return _cageb ;};func (_facd *textWord )computeText ()string {_fdbf :=make ([]string ,len (_facd ._eccf ));
for _cbeb ,_fcge :=range _facd ._eccf {_fdbf [_cbeb ]=_fcge ._cddae ;};return _eb .Join (_fdbf ,"");};func (_ffbc *structElement )parseStructElement (_efff _ad .PdfObject ){_cbdd ,_aedc :=_ad .GetDict (_efff );if !_aedc {_fc .Log .Debug ("\u0070\u0061\u0072\u0073\u0065\u0053\u0074\u0072u\u0063\u0074\u0045le\u006d\u0065\u006e\u0074\u003a\u0020d\u0069\u0063\u0074\u0069\u006f\u006e\u0061\u0072\u0079\u0020\u006f\u0062\u006a\u0065\u0063t\u0020\u006e\u006f\u0074\u0020\u0066\u006f\u0075n\u0064\u002e");
return ;};_dfcfd :=_cbdd .Get ("\u0053");_gdcaf :=_cbdd .Get ("\u0050\u0067");_bdda :="";if _dfcfd !=nil {_bdda =_dfcfd .String ();};_fgfae :=_cbdd .Get ("\u004b");_ffbc ._bef =_bdda ;_ffbc ._ggcd =_gdcaf ;switch _abgb :=_fgfae .(type ){case *_ad .PdfObjectInteger :_ffbc ._bef =_bdda ;
_ffbc ._gcba =int64 (*_abgb );_ffbc ._ggcd =_gdcaf ;case *_ad .PdfObjectReference :_bfdbd :=*_ad .MakeArray (_abgb );var _eeae int64 =-1;_ffbc ._gcba =_eeae ;if _bfdbd .Len ()==1{_fbae :=_bfdbd .Elements ()[0];_dfabf ,_egef :=_fbae .(*_ad .PdfObjectInteger );
if _egef {_eeae =int64 (*_dfabf );_ffbc ._gcba =_eeae ;_ffbc ._bef =_bdda ;_ffbc ._ggcd =_gdcaf ;return ;};};_bcbf :=[]structElement {};for _ ,_cbbe :=range _bfdbd .Elements (){_dedc ,_dffbg :=_cbbe .(*_ad .PdfObjectInteger );if _dffbg {_eeae =int64 (*_dedc );
_ffbc ._gcba =_eeae ;_ffbc ._bef =_bdda ;}else {_cgacf :=&structElement {};_cgacf .parseStructElement (_cbbe );_bcbf =append (_bcbf ,*_cgacf );};_eeae =-1;};_ffbc ._cfae =_bcbf ;case *_ad .PdfObjectArray :_ceacg :=_fgfae .(*_ad .PdfObjectArray );var _dbged int64 =-1;
_ffbc ._gcba =_dbged ;if _ceacg .Len ()==1{_faag :=_ceacg .Elements ()[0];_bcdac ,_gce :=_faag .(*_ad .PdfObjectInteger );if _gce {_dbged =int64 (*_bcdac );_ffbc ._gcba =_dbged ;_ffbc ._bef =_bdda ;_ffbc ._ggcd =_gdcaf ;return ;};};_geda :=[]structElement {};
for _ ,_dfefa :=range _ceacg .Elements (){_dbe ,_agdd :=_dfefa .(*_ad .PdfObjectInteger );if _agdd {_dbged =int64 (*_dbe );_ffbc ._gcba =_dbged ;_ffbc ._bef =_bdda ;_ffbc ._ggcd =_gdcaf ;}else {_ggce :=&structElement {};_ggce .parseStructElement (_dfefa );
_geda =append (_geda ,*_ggce );};_dbged =-1;};_ffbc ._cfae =_geda ;};};

// PageTextOptions holds various options available in extraction process.
type PageTextOptions struct{_adee bool ;_bdc bool ;};type shapesState struct{_cee _cg .Matrix ;_cea _cg .Matrix ;_agbgb []*subpath ;_cdceb bool ;_efc _cg .Point ;_gcce *textObject ;};func (_aegab rulingList )log (_cgbfg string ){if !_gbbe {return ;};_fc .Log .Info ("\u0023\u0023\u0023\u0020\u0025\u0031\u0030\u0073\u003a\u0020\u0076\u0065c\u0073\u003d\u0025\u0073",_cgbfg ,_aegab .String ());
for _acgge ,_fgb :=range _aegab {_cf .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0073\u000a",_acgge ,_fgb .String ());};};func (_cffba *textTable )newTablePara ()*textPara {_afge :=_cffba .computeBbox ();_abfg :=&textPara {PdfRectangle :_afge ,_eeada :_afge ,_ebdd :_cffba };
if _dgda {_fc .Log .Info ("\u006e\u0065w\u0054\u0061\u0062l\u0065\u0050\u0061\u0072\u0061\u003a\u0020\u0025\u0073",_abfg );};return _abfg ;};func _gccg (_fbdcd *PageText )error {_cbbaf :=_db .GetLicenseKey ();if _cbbaf !=nil &&_cbbaf .IsLicensed ()||_bbda {return nil ;
};_cf .Printf ("\u0055\u006e\u006c\u0069\u0063\u0065\u006e\u0073\u0065\u0064\u0020c\u006f\u0070\u0079\u0020\u006f\u0066\u0020\u0055\u006e\u0069P\u0044\u0046\u000a");_cf .Println ("-\u0020\u0047\u0065\u0074\u0020\u0061\u0020\u0066\u0072e\u0065\u0020\u0074\u0072\u0069\u0061\u006c l\u0069\u0063\u0065\u006es\u0065\u0020\u006f\u006e\u0020\u0068\u0074\u0074\u0070s:\u002f\u002fu\u006e\u0069\u0064\u006f\u0063\u002e\u0069\u006f");
return _ed .New ("\u0075\u006e\u0069\u0070d\u0066\u0020\u006c\u0069\u0063\u0065\u006e\u0073\u0065\u0020c\u006fd\u0065\u0020\u0072\u0065\u0071\u0075\u0069r\u0065\u0064");};func _gcfd (_gbcd []TextMark ,_afcf *int ,_cbed TextMark )[]TextMark {_cbed .Offset =*_afcf ;
_gbcd =append (_gbcd ,_cbed );*_afcf +=len (_cbed .Text );return _gbcd ;};type list struct{_addb []*textLine ;_fdbe string ;_adgg []*list ;_eeefb string ;};func (_dddf *stateStack )size ()int {return len (*_dddf )};func _abd (_fdg string ,_bgg bool ,_abe bool )BidiText {_dfc :="\u006c\u0074\u0072";
if _abe {_dfc ="\u0074\u0074\u0062";}else if !_bgg {_dfc ="\u0072\u0074\u006c";};return BidiText {_df :_fdg ,_gc :_dfc };};func (_gdbd *structTreeRoot )buildList (_edg map[int ][]*textLine ,_fdac _ad .PdfObject )[]*list {if _gdbd ==nil {_fc .Log .Debug ("\u0062\u0075\u0069\u006c\u0064\u004c\u0069\u0073\u0074\u003a\u0020t\u0072\u0065\u0065\u0052\u006f\u006f\u0074\u0020\u0069\u0073 \u006e\u0069\u006c");
return nil ;};var _febf *structElement ;_ddbf :=[]structElement {};if len (_gdbd ._cce )==1{_edgb :=_gdbd ._cce [0]._bef ;if _edgb =="\u0044\u006f\u0063\u0075\u006d\u0065\u006e\u0074"||_edgb =="\u0053\u0065\u0063\u0074"||_edgb =="\u0050\u0061\u0072\u0074"||_edgb =="\u0044\u0069\u0076"||_edgb =="\u0041\u0072\u0074"{_febf =&_gdbd ._cce [0];
};}else {_febf =&structElement {_cfae :_gdbd ._cce ,_bef :_gdbd ._cagb };};if _febf ==nil {_fc .Log .Debug ("\u0062\u0075\u0069\u006cd\u004c\u0069\u0073\u0074\u003a\u0020\u0074\u006f\u0070\u0045l\u0065m\u0065\u006e\u0074\u0020\u0069\u0073\u0020n\u0069\u006c");
return nil ;};for _ ,_bee :=range _febf ._cfae {if _bee ._bef =="\u004c"{_ddbf =append (_ddbf ,_bee );}else if _bee ._bef =="\u0054\u0061\u0062l\u0065"{_gffec :=_afca (_bee );_ddbf =append (_ddbf ,_gffec ...);};};_afbb :=_gdfda (_ddbf ,_edg ,_fdac );var _abed []*list ;
for _ ,_gccbc :=range _afbb {_ebgc :=_gffb (_gccbc );_abed =append (_abed ,_ebgc ...);};return _abed ;};func _dbaf (_edgec ,_gcaaec float64 )bool {return _edgec /_ag .Max (_aacc ,_gcaaec )< _ddeg };type structElement struct{_bef string ;_cfae []structElement ;
_gcba int64 ;_ggcd _ad .PdfObject ;};func _ca (_ab []string ,_dfg int ,_dc int ){for _dd ,_de :=_dfg ,_dc -1;_dd < _de ;_dd ,_de =_dd +1,_de -1{_ded :=_ab [_dd ];_ab [_dd ]=_ab [_de ];_ab [_de ]=_ded ;};};func _gcadf (_bfdf []*textMark ,_gdee _ea .PdfRectangle )[]*textWord {var _ffba []*textWord ;
var _gdeaaa *textWord ;if _dbge {_fc .Log .Info ("\u006d\u0061\u006beT\u0065\u0078\u0074\u0057\u006f\u0072\u0064\u0073\u003a\u0020\u0025\u0064\u0020\u006d\u0061\u0072\u006b\u0073",len (_bfdf ));};_bfeae :=func (){if _gdeaaa !=nil {_fabc :=_gdeaaa .computeText ();
if !_cefad (_fabc ){_gdeaaa ._cfdag =_fabc ;_ffba =append (_ffba ,_gdeaaa );if _dbge {_fc .Log .Info ("\u0061\u0064\u0064Ne\u0077\u0057\u006f\u0072\u0064\u003a\u0020\u0025\u0064\u003a\u0020\u0077\u006f\u0072\u0064\u003d\u0025\u0073",len (_ffba )-1,_gdeaaa .String ());
for _decgc ,_begde :=range _gdeaaa ._eccf {_cf .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0073\u000a",_decgc ,_begde .String ());};};};_gdeaaa =nil ;};};for _ ,_facf :=range _bfdf {if _ebg &&_gdeaaa !=nil &&len (_gdeaaa ._eccf )> 0{_cdgea :=_gdeaaa ._eccf [len (_gdeaaa ._eccf )-1];
_efga ,_ebdc :=_fadc (_facf ._cddae );_fddcg ,_dddeg :=_fadc (_cdgea ._cddae );if _ebdc &&!_dddeg &&_cdgea .inDiacriticArea (_facf ){_gdeaaa .addDiacritic (_efga );continue ;};if _dddeg &&!_ebdc &&_facf .inDiacriticArea (_cdgea ){_gdeaaa ._eccf =_gdeaaa ._eccf [:len (_gdeaaa ._eccf )-1];
_gdeaaa .appendMark (_facf ,_gdee );_gdeaaa .addDiacritic (_fddcg );continue ;};};_agdfa :=_cefad (_facf ._cddae );if _agdfa {_bfeae ();continue ;};if _gdeaaa ==nil &&!_agdfa {_gdeaaa =_agbfa ([]*textMark {_facf },_gdee );continue ;};_gccda :=_gdeaaa ._geba ;
_egdef :=_ag .Abs (_cccf (_gdee ,_facf )-_gdeaaa ._bbcgb )/_gccda ;_gdeba :=_fdbgb (_facf ,_gdeaaa )/_gccda ;if _gdeba >=_begea ||!(-_ebegf <=_gdeba &&_egdef <=_fgee ){_bfeae ();_gdeaaa =_agbfa ([]*textMark {_facf },_gdee );continue ;};_gdeaaa .appendMark (_facf ,_gdee );
};_bfeae ();return _ffba ;};func (_eeff *TextMarkArray )getTextMarkAtOffset (_fdb int )*TextMark {for _ ,_fgab :=range _eeff ._bag {if _fgab .Offset ==_fdb {return &_fgab ;};};return nil ;};func (_becfd *compositeCell )updateBBox (){for _ ,_agcd :=range _becfd .paraList {_becfd .PdfRectangle =_fgde (_becfd .PdfRectangle ,_agcd .PdfRectangle );
};};

// New returns an Extractor instance for extracting content from the input PDF page.
func New (page *_ea .PdfPage )(*Extractor ,error ){return NewWithOptions (page ,nil )};func (_gfccf *textWord )appendMark (_cedda *textMark ,_cebb _ea .PdfRectangle ){_gfccf ._eccf =append (_gfccf ._eccf ,_cedda );_gfccf .PdfRectangle =_fgde (_gfccf .PdfRectangle ,_cedda .PdfRectangle );
if _cedda ._afcb > _gfccf ._geba {_gfccf ._geba =_cedda ._afcb ;};_gfccf ._bbcgb =_cebb .Ury -_gfccf .PdfRectangle .Lly ;};type structTreeRoot struct{_cce []structElement ;_cagb string ;};func (_cdga *wordBag )arrangeText ()*textPara {_cdga .sort ();if _dgcd {_cdga .removeDuplicates ();
};var _ffbdb []*textLine ;for _ ,_dffaf :=range _cdga .depthIndexes (){for !_cdga .empty (_dffaf ){_feacc :=_cdga .firstReadingIndex (_dffaf );_fafe :=_cdga .firstWord (_feacc );_fbbd :=_bgbc (_cdga ,_feacc );_cegg :=_fafe ._geba ;_bcbbb :=_fafe ._bbcgb -_fbac *_cegg ;
_ggfcf :=_fafe ._bbcgb +_fbac *_cegg ;_ggadg :=_ggbf *_cegg ;_ggecc :=_gbce *_cegg ;_caga :for {var _ccaae *textWord ;_abfa :=0;for _ ,_fbfea :=range _cdga .depthBand (_bcbbb ,_ggfcf ){_eabb :=_cdga .highestWord (_fbfea ,_bcbbb ,_ggfcf );if _eabb ==nil {continue ;
};_cedad :=_fdbgb (_eabb ,_fbbd ._bbada [len (_fbbd ._bbada )-1]);if _cedad < -_ggecc {break _caga ;};if _cedad > _ggadg {continue ;};if _ccaae !=nil &&_cgfd (_eabb ,_ccaae )>=0{continue ;};_ccaae =_eabb ;_abfa =_fbfea ;};if _ccaae ==nil {break ;};_fbbd .pullWord (_cdga ,_ccaae ,_abfa );
};_fbbd .markWordBoundaries ();_ffbdb =append (_ffbdb ,_fbbd );};};if len (_ffbdb )==0{return nil ;};_ba .Slice (_ffbdb ,func (_beccf ,_fefba int )bool {return _ecbc (_ffbdb [_beccf ],_ffbdb [_fefba ])< 0});_bgfd :=_ecdg (_cdga .PdfRectangle ,_ffbdb );
if _cadga {_fc .Log .Info ("\u0061\u0072\u0072an\u0067\u0065\u0054\u0065\u0078\u0074\u0020\u0021\u0021\u0021\u0020\u0070\u0061\u0072\u0061\u003d\u0025\u0073",_bgfd .String ());if _ggbef {for _bedbb ,_gfce :=range _bgfd ._cebdg {_cf .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0073\u000a",_bedbb ,_gfce .String ());
if _ecaf {for _gcaf ,_dedbd :=range _gfce ._bbada {_cf .Printf ("\u0025\u0038\u0064\u003a\u0020\u0025\u0073\u000a",_gcaf ,_dedbd .String ());for _afgc ,_gdbbb :=range _dedbd ._eccf {_cf .Printf ("\u00251\u0032\u0064\u003a\u0020\u0025\u0073\n",_afgc ,_gdbbb .String ());
};};};};};};return _bgfd ;};func (_ggba paraList )topoOrder ()[]int {if _adbf {_fc .Log .Info ("\u0074\u006f\u0070\u006f\u004f\u0072\u0064\u0065\u0072\u003a");};_fgebb :=len (_ggba );_ggeec :=make ([]bool ,_fgebb );_fcefg :=make ([]int ,0,_fgebb );_ecab :=_ggba .llyOrdering ();
var _cadgd func (_fbefd int );_cadgd =func (_fabf int ){_ggeec [_fabf ]=true ;for _bdgd :=0;_bdgd < _fgebb ;_bdgd ++{if !_ggeec [_bdgd ]{if _ggba .readBefore (_ecab ,_fabf ,_bdgd ){_cadgd (_bdgd );};};};_fcefg =append (_fcefg ,_fabf );};for _gcaae :=0;
_gcaae < _fgebb ;_gcaae ++{if !_ggeec [_gcaae ]{_cadgd (_gcaae );};};return _ggdea (_fcefg );};const _caad =10;

// TextMark represents extracted text on a page with information regarding both textual content,
// formatting (font and size) and positioning.
// It is the smallest unit of text on a PDF page, typically a single character.
//
// getBBox() in test_text.go shows how to compute bounding boxes of substrings of extracted text.
// The following code extracts the text on PDF page `page` into `text` then finds the bounding box
// `bbox` of substring `term` in `text`.
//
//	ex, _ := New(page)
//	// handle errors
//	pageText, _, _, err := ex.ExtractPageText()
//	// handle errors
//	text := pageText.Text()
//	textMarks := pageText.Marks()
//
//		start := strings.Index(text, term)
//	 end := start + len(term)
//	 spanMarks, err := textMarks.RangeOffset(start, end)
//	 // handle errors
//	 bbox, ok := spanMarks.BBox()
//	 // handle errors
type TextMark struct{

// Text is the extracted text.
Text string ;

// Original is the text in the PDF. It has not been decoded like `Text`.
Original string ;

// BBox is the bounding box of the text.
BBox _ea .PdfRectangle ;

// Font is the font the text was drawn with.
Font *_ea .PdfFont ;

// FontSize is the font size the text was drawn with.
FontSize float64 ;

// Offset is the offset of the start of TextMark.Text in the extracted text. If you do this
//   text, textMarks := pageText.Text(), pageText.Marks()
//   marks := textMarks.Elements()
// then marks[i].Offset is the offset of marks[i].Text in text.
Offset int ;

// Meta is set true for spaces and line breaks that we insert in the extracted text. We insert
// spaces (line breaks) when we see characters that are over a threshold horizontal (vertical)
//  distance  apart. See wordJoiner (lineJoiner) in PageText.computeViews().
Meta bool ;

// FillColor is the fill color of the text.
// The color is nil for spaces and line breaks (i.e. the Meta field is true).
FillColor _d .Color ;

// StrokeColor is the stroke color of the text.
// The color is nil for spaces and line breaks (i.e. the Meta field is true).
StrokeColor _d .Color ;

// Orientation is the text orientation
Orientation int ;

// DirectObject is the underlying PdfObject (Text Object) that represents the visible texts. This is introduced to get
// a simple access to the TextObject in case editing or replacment of some text is needed. E.g during redaction.
DirectObject _ad .PdfObject ;

// ObjString is a decoded string operand of a text-showing operator. It has the same value as `Text` attribute except
// when many glyphs are represented with the same Text Object that contains multiple length string operand in which case
// ObjString spans more than one character string that falls in different TextMark objects.
ObjString []string ;Tw float64 ;Th float64 ;Tc float64 ;Index int ;_fdbg bool ;_abea *TextTable ;};func (_eddd paraList )merge ()*textPara {_fc .Log .Trace ("\u006d\u0065\u0072\u0067\u0065:\u0020\u0070\u0061\u0072\u0061\u0073\u003d\u0025\u0064\u0020\u003d\u003d\u003d=\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u0078\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d",len (_eddd ));
if len (_eddd )==0{return nil ;};_eddd .sortReadingOrder ();_gdec :=_eddd [0].PdfRectangle ;_cgfdb :=_eddd [0]._cebdg ;for _ ,_gccac :=range _eddd [1:]{_gdec =_fgde (_gdec ,_gccac .PdfRectangle );_cgfdb =append (_cgfdb ,_gccac ._cebdg ...);};return _ecdg (_gdec ,_cgfdb );
};

// NewFromContents creates a new extractor from contents and page resources.
func NewFromContents (contents string ,resources *_ea .PdfPageResources )(*Extractor ,error ){const _cc ="\u0065x\u0074\u0072\u0061\u0063t\u006f\u0072\u002e\u004e\u0065w\u0046r\u006fm\u0043\u006f\u006e\u0074\u0065\u006e\u0074s";_cdg :=&Extractor {_acg :contents ,_daf :resources ,_fa :map[string ]fontEntry {},_gb :map[string ]textResult {}};
_db .TrackUse (_cc );return _cdg ,nil ;};func (_cggba *textTable )growTable (){_edag :=func (_agef paraList ){_cggba ._ebaab ++;for _bgcc :=0;_bgcc < _cggba ._agaf ;_bgcc ++{_efdcd :=_agef [_bgcc ];_cggba .put (_bgcc ,_cggba ._ebaab -1,_efdcd );};};_abab :=func (_cecdd paraList ){_cggba ._agaf ++;
for _aged :=0;_aged < _cggba ._ebaab ;_aged ++{_debde :=_cecdd [_aged ];_cggba .put (_cggba ._agaf -1,_aged ,_debde );};};if _gcff {_cggba .log ("\u0067r\u006f\u0077\u0054\u0061\u0062\u006ce");};for _ceab :=0;;_ceab ++{_begfe :=false ;_abadd :=_cggba .getDown ();
_cfdbe :=_cggba .getRight ();if _gcff {_cf .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0073\u000a",_ceab ,_cggba );_cf .Printf ("\u0020\u0020 \u0020\u0020\u0020 \u0020\u0064\u006f\u0077\u006e\u003d\u0025\u0073\u000a",_abadd );_cf .Printf ("\u0020\u0020 \u0020\u0020\u0020 \u0072\u0069\u0067\u0068\u0074\u003d\u0025\u0073\u000a",_cfdbe );
};if _abadd !=nil &&_cfdbe !=nil {_egde :=_abadd [len (_abadd )-1];if !_egde .taken ()&&_egde ==_cfdbe [len (_cfdbe )-1]{_edag (_abadd );if _cfdbe =_cggba .getRight ();_cfdbe !=nil {_abab (_cfdbe );_cggba .put (_cggba ._agaf -1,_cggba ._ebaab -1,_egde );
};_begfe =true ;};};if !_begfe &&_abadd !=nil {_edag (_abadd );_begfe =true ;};if !_begfe &&_cfdbe !=nil {_abab (_cfdbe );_begfe =true ;};if !_begfe {break ;};};};func (_gffd *imageExtractContext )extractXObjectImage (_gcfe *_ad .PdfObjectName ,_agbg _edb .GraphicsState ,_bga *_ea .PdfPageResources )error {_bfcf ,_ :=_bga .GetXObjectByName (*_gcfe );
if _bfcf ==nil {return nil ;};_cdc ,_fcbd :=_gffd ._bcfa [_bfcf ];if !_fcbd {_cfaf ,_ggd :=_bga .GetXObjectImageByName (*_gcfe );if _ggd !=nil {return _ggd ;};if _cfaf ==nil {return nil ;};_dgcg ,_ggd :=_cfaf .ToImage ();if _ggd !=nil {return _ggd ;};var _faa _bc .Image ;
if _cfaf .Mask !=nil {if _faa ,_ggd =_aegba (_cfaf .Mask ,_d .Opaque );_ggd !=nil {_fc .Log .Debug ("\u0057\u0041\u0052\u004e\u003a \u0063\u006f\u0075\u006c\u0064 \u006eo\u0074\u0020\u0067\u0065\u0074\u0020\u0065\u0078\u0070\u006c\u0069\u0063\u0069\u0074\u0020\u0069\u006d\u0061\u0067e\u0020\u006d\u0061\u0073\u006b\u002e\u0020\u004f\u0075\u0074\u0070\u0075\u0074\u0020\u006d\u0061\u0079\u0020\u0062\u0065\u0020\u0069\u006e\u0063o\u0072\u0072\u0065\u0063\u0074\u002e");
};}else if _cfaf .SMask !=nil {_faa ,_ggd =_beee (_cfaf .SMask ,_d .Opaque );if _ggd !=nil {_fc .Log .Debug ("W\u0041\u0052\u004e\u003a\u0020\u0063\u006f\u0075\u006c\u0064\u0020\u006e\u006f\u0074\u0020\u0067\u0065\u0074\u0020\u0073\u006f\u0066\u0074\u0020\u0069\u006da\u0067e\u0020\u006d\u0061\u0073k\u002e\u0020O\u0075\u0074\u0070\u0075\u0074\u0020\u006d\u0061\u0079\u0020\u0062\u0065\u0020\u0069\u006e\u0063\u006f\u0072\u0072\u0065\u0063\u0074\u002e");
};};if _faa !=nil {_cage ,_acac :=_dgcg .ToGoImage ();if _acac !=nil {return _acac ;};_cage =_bdcbb (_cage ,_faa );switch _cfaf .ColorSpace .String (){case "\u0044\u0065\u0076\u0069\u0063\u0065\u0047\u0072\u0061\u0079","\u0049n\u0064\u0065\u0078\u0065\u0064":_dgcg ,_acac =_ea .ImageHandling .NewGrayImageFromGoImage (_cage );
if _acac !=nil {return _acac ;};default:_dgcg ,_acac =_ea .ImageHandling .NewImageFromGoImage (_cage );if _acac !=nil {return _acac ;};};};_cdc =&cachedImage {_cff :_dgcg ,_cag :_cfaf .ColorSpace };_gffd ._bcfa [_bfcf ]=_cdc ;};_eefb :=_cdc ._cff ;_bca :=_cdc ._cag ;
_agba ,_fae :=_bca .ImageToRGB (*_eefb );if _fae !=nil {return _fae ;};_fc .Log .Debug ("@\u0044\u006f\u0020\u0043\u0054\u004d\u003a\u0020\u0025\u0073",_agbg .CTM .String ());_cga :=ImageMark {Image :&_agba ,Width :_agbg .CTM .ScalingFactorX (),Height :_agbg .CTM .ScalingFactorY (),Angle :_agbg .CTM .Angle ()};
_cga .X ,_cga .Y =_agbg .CTM .Translation ();_gffd ._cfd =append (_gffd ._cfd ,_cga );_gffd ._bdf ++;return nil ;};

// PageText represents the layout of text on a device page.
type PageText struct{_ageb []*textMark ;_cdb string ;_feeg []TextMark ;_aeee []TextTable ;_aaab _ea .PdfRectangle ;_efda []pathSection ;_dfea []pathSection ;_acff *_ad .PdfObject ;_cfee _ad .PdfObject ;_bbdaa *_edb .ContentStreamOperations ;_fafc PageTextOptions ;
};

// String returns a description of `b`.
func (_ceee *wordBag )String ()string {var _bdaca []string ;for _ ,_abfd :=range _ceee .depthIndexes (){_facb :=_ceee ._dfga [_abfd ];for _ ,_ggca :=range _facb {_bdaca =append (_bdaca ,_ggca ._cfdag );};};return _cf .Sprintf ("\u0025.\u0032\u0066\u0020\u0066\u006f\u006e\u0074\u0073\u0069\u007a\u0065=\u0025\u002e\u0032\u0066\u0020\u0025\u0064\u0020\u0025\u0071",_ceee .PdfRectangle ,_ceee ._ggc ,len (_bdaca ),_bdaca );
};func (_adff *PageText )computeViews (){_becd :=_adff .getParagraphs ();_afdb :=new (_gf .Buffer );_becd .writeText (_afdb );_adff ._cdb =_afdb .String ();_adff ._feeg =_becd .toTextMarks ();_adff ._aeee =_becd .tables ();if _dgda {_fc .Log .Info ("\u0063\u006f\u006dpu\u0074\u0065\u0056\u0069\u0065\u0077\u0073\u003a\u0020\u0074\u0061\u0062\u006c\u0065\u0073\u003d\u0025\u0064",len (_adff ._aeee ));
};};func (_ebgf *ruling )alignsSec (_abca *ruling )bool {const _bdfc =_ggf +1.0;return _ebgf ._fddc -_bdfc <=_abca ._begad &&_abca ._fddc -_bdfc <=_ebgf ._begad ;};func (_dfae *textTable )markCells (){for _dfcag :=0;_dfcag < _dfae ._ebaab ;_dfcag ++{for _bgba :=0;
_bgba < _dfae ._agaf ;_bgba ++{_daadb :=_dfae .get (_bgba ,_dfcag );if _daadb !=nil {_daadb ._gfff =true ;};};};};func (_gabg *shapesState )establishSubpath ()*subpath {_fgag ,_gbfa :=_gabg .lastpointEstablished ();if !_gbfa {_gabg ._agbgb =append (_gabg ._agbgb ,_agbf (_fgag ));
};if len (_gabg ._agbgb )==0{return nil ;};_gabg ._cdceb =false ;return _gabg ._agbgb [len (_gabg ._agbgb )-1];};func (_abcf *shapesState )lineTo (_geab ,_ecbd float64 ){if _dfcf {_fc .Log .Info ("\u006c\u0069\u006eeT\u006f\u0028\u0025\u002e\u0032\u0066\u002c\u0025\u002e\u0032\u0066\u0020\u0070\u003d\u0025\u002e\u0032\u0066",_geab ,_ecbd ,_abcf .devicePoint (_geab ,_ecbd ));
};_abcf .addPoint (_geab ,_ecbd );};func (_gbcdg *textTable )toTextTable ()TextTable {if _dgda {_fc .Log .Info ("t\u006fT\u0065\u0078\u0074\u0054\u0061\u0062\u006c\u0065:\u0020\u0025\u0064\u0020x \u0025\u0064",_gbcdg ._agaf ,_gbcdg ._ebaab );};_cdbc :=make ([][]TableCell ,_gbcdg ._ebaab );
for _gaec :=0;_gaec < _gbcdg ._ebaab ;_gaec ++{_cdbc [_gaec ]=make ([]TableCell ,_gbcdg ._agaf );for _aagceb :=0;_aagceb < _gbcdg ._agaf ;_aagceb ++{_aebef :=_gbcdg .get (_aagceb ,_gaec );if _aebef ==nil {continue ;};_fccfe (_aebef ._cebdg );if _dgda {_cf .Printf ("\u0025\u0034\u0064 \u0025\u0032\u0064\u003a\u0020\u0025\u0073\u000a",_aagceb ,_gaec ,_aebef );
};_cdbc [_gaec ][_aagceb ].Text =_aebef .text ();_afgcf :=0;_cdbc [_gaec ][_aagceb ].Marks ._bag =_aebef .toTextMarks (&_afgcf );};};_ffac :=TextTable {W :_gbcdg ._agaf ,H :_gbcdg ._ebaab ,Cells :_cdbc };_ffac .PdfRectangle =_gbcdg .bbox ();return _ffac ;
};type rectRuling struct{_bfdc rulingKind ;_fdba markKind ;_d .Color ;_ea .PdfRectangle ;};func _cced (_dacba ,_cfeeb int )int {if _dacba > _cfeeb {return _dacba ;};return _cfeeb ;};func (_ecbdc *shapesState )stroke (_ebac *[]pathSection ){_fbfe :=pathSection {_gdfd :_ecbdc ._agbgb ,Color :_ecbdc ._gcce .getStrokeColor ()};
*_ebac =append (*_ebac ,_fbfe );if _gbbe {_cf .Printf ("\u0020 \u0020\u0020S\u0054\u0052\u004fK\u0045\u003a\u0020\u0025\u0064\u0020\u0073t\u0072\u006f\u006b\u0065\u0073\u0020s\u0073\u003d\u0025\u0073\u0020\u0063\u006f\u006c\u006f\u0072\u003d%\u002b\u0076\u0020\u0025\u0036\u002e\u0032\u0066\u000a",len (*_ebac ),_ecbdc ,_ecbdc ._gcce .getStrokeColor (),_fbfe .bbox ());
if _ccfea {for _cgag ,_gdca :=range _ecbdc ._agbgb {_cf .Printf ("\u0025\u0038\u0064\u003a\u0020\u0025\u0073\u000a",_cgag ,_gdca );if _cgag ==10{break ;};};};};};func (_ddbce *textWord )toTextMarks (_bbbg *int )[]TextMark {var _fecbf []TextMark ;for _ ,_bddec :=range _ddbce ._eccf {_fecbf =_gcfd (_fecbf ,_bbbg ,_bddec .ToTextMark ());
};return _fecbf ;};func _bdeb (_acecb _ea .PdfColorspace ,_fafa _ea .PdfColor )_d .Color {if _acecb ==nil ||_fafa ==nil {return _d .Black ;};_bbec ,_dbed :=_acecb .ColorToRGB (_fafa );if _dbed !=nil {_fc .Log .Debug ("\u0057\u0041\u0052\u004e\u003a\u0020\u0063\u006fu\u006c\u0064\u0020no\u0074\u0020\u0063\u006f\u006e\u0076e\u0072\u0074\u0020\u0063\u006f\u006c\u006f\u0072\u0020\u0025\u0076\u0020\u0028\u0025\u0076)\u0020\u0074\u006f\u0020\u0052\u0047\u0042\u003a \u0025\u0073",_fafa ,_acecb ,_dbed );
return _d .Black ;};_dgbe ,_bbbgb :=_bbec .(*_ea .PdfColorDeviceRGB );if !_bbbgb {_fc .Log .Debug ("\u0057\u0041\u0052\u004e\u003a\u0020\u0063\u006f\u006e\u0076\u0065\u0072\u0074\u0065\u0064 \u0063\u006f\u006c\u006f\u0072\u0020\u0069\u0073\u0020\u006e\u006f\u0074\u0020i\u006e\u0020\u0074\u0068\u0065\u0020\u0052\u0047\u0042\u0020\u0063\u006flo\u0072\u0073\u0070\u0061\u0063\u0065\u003a\u0020\u0025\u0076",_bbec );
return _d .Black ;};return _d .NRGBA {R :uint8 (_dgbe .R ()*255),G :uint8 (_dgbe .G ()*255),B :uint8 (_dgbe .B ()*255),A :uint8 (255)};};func (_caab *textPara )writeCellText (_bgac _e .Writer ){for _edcc ,_agbgc :=range _caab ._cebdg {_fcbc :=_agbgc .text ();
_daca :=_fed &&_agbgc .endsInHyphen ()&&_edcc !=len (_caab ._cebdg )-1;if _daca {_fcbc =_fdbgc (_fcbc );};_bgac .Write ([]byte (_fcbc ));if !(_daca ||_edcc ==len (_caab ._cebdg )-1){_bgac .Write ([]byte (_bbgg (_agbgc ._fbgb ,_caab ._cebdg [_edcc +1]._fbgb )));
};};};func (_fedd compositeCell )hasLines (_cefb []*textLine )bool {for _gece ,_acfe :=range _cefb {_eafb :=_ggbc (_fedd .PdfRectangle ,_acfe .PdfRectangle );if _dgda {_cf .Printf ("\u0020\u0020\u0020\u0020\u0020\u0020\u005e\u005e\u005e\u0069\u006e\u0074\u0065\u0072\u0073e\u0063t\u0073\u003d\u0025\u0074\u0020\u0025\u0064\u0020\u006f\u0066\u0020\u0025\u0064\u000a",_eafb ,_gece ,len (_cefb ));
_cf .Printf ("\u0020\u0020\u0020\u0020  \u005e\u005e\u005e\u0063\u006f\u006d\u0070\u006f\u0073\u0069\u0074\u0065\u003d\u0025s\u000a",_fedd );_cf .Printf ("\u0020 \u0020 \u0020\u0020\u0020\u006c\u0069\u006e\u0065\u003d\u0025\u0073\u000a",_acfe );};if _eafb {return true ;
};};return false ;};func (_dgdf rulingList )augmentGrid ()(rulingList ,rulingList ){_eeaa ,_addf :=_dgdf .vertsHorzs ();if len (_eeaa )==0||len (_addf )==0{return _eeaa ,_addf ;};_fbeg ,_decg :=_eeaa ,_addf ;_efdde :=_eeaa .bbox ();_gdgc :=_addf .bbox ();
if _gbbe {_fc .Log .Info ("\u0061u\u0067\u006d\u0065\u006e\u0074\u0047\u0072\u0069\u0064\u003a\u0020b\u0062\u006f\u0078\u0056\u003d\u0025\u0036\u002e\u0032\u0066",_efdde );_fc .Log .Info ("\u0061u\u0067\u006d\u0065\u006e\u0074\u0047\u0072\u0069\u0064\u003a\u0020b\u0062\u006f\u0078\u0048\u003d\u0025\u0036\u002e\u0032\u0066",_gdgc );
};var _faff ,_gagd ,_aabe ,_gfgbb *ruling ;if _gdgc .Llx < _efdde .Llx -_bbfd {_faff =&ruling {_afbc :_baeg ,_gddac :_bgcg ,_cafa :_gdgc .Llx ,_fddc :_efdde .Lly ,_begad :_efdde .Ury };_eeaa =append (rulingList {_faff },_eeaa ...);};if _gdgc .Urx > _efdde .Urx +_bbfd {_gagd =&ruling {_afbc :_baeg ,_gddac :_bgcg ,_cafa :_gdgc .Urx ,_fddc :_efdde .Lly ,_begad :_efdde .Ury };
_eeaa =append (_eeaa ,_gagd );};if _efdde .Lly < _gdgc .Lly -_bbfd {_aabe =&ruling {_afbc :_baeg ,_gddac :_ecacd ,_cafa :_efdde .Lly ,_fddc :_gdgc .Llx ,_begad :_gdgc .Urx };_addf =append (rulingList {_aabe },_addf ...);};if _efdde .Ury > _gdgc .Ury +_bbfd {_gfgbb =&ruling {_afbc :_baeg ,_gddac :_ecacd ,_cafa :_efdde .Ury ,_fddc :_gdgc .Llx ,_begad :_gdgc .Urx };
_addf =append (_addf ,_gfgbb );};if len (_eeaa )+len (_addf )==len (_dgdf ){return _fbeg ,_decg ;};_caeg :=append (_eeaa ,_addf ...);_dgdf .log ("u\u006e\u0061\u0075\u0067\u006d\u0065\u006e\u0074\u0065\u0064");_caeg .log ("\u0061u\u0067\u006d\u0065\u006e\u0074\u0065d");
return _eeaa ,_addf ;};func (_gabe *wordBag )maxDepth ()float64 {return _gabe ._aagd -_gabe .Lly };func (_edgc *textTable )get (_aede ,_cfge int )*textPara {return _edgc ._aaedb [_fcgc (_aede ,_cfge )]};

// ExtractPageText returns the text contents of `e` (an Extractor for a page) as a PageText.
// TODO(peterwilliams97): The stats complicate this function signature and aren't very useful.
//
//	Replace with a function like Extract() (*PageText, error)
func (_egab *Extractor )ExtractPageText ()(*PageText ,int ,int ,error ){_egg ,_egce ,_dedb ,_afga :=_egab .extractPageText (_egab ._acg ,_egab ._daf ,_cg .IdentityMatrix (),0,false );if _afga !=nil &&_afga !=_ea .ErrColorOutOfRange {return nil ,0,0,_afga ;
};if _egab ._gbf !=nil {_egg ._fafc ._bdc =_egab ._gbf .UseSimplerExtractionProcess ;};_egg .computeViews ();_afga =_gccg (_egg );if _afga !=nil {return nil ,0,0,_afga ;};if _egab ._gbf !=nil {if _egab ._gbf .ApplyCropBox &&_egab ._ebe !=nil {_egg .ApplyArea (*_egab ._ebe );
};_egg ._fafc ._adee =_egab ._gbf .DisableDocumentTags ;};return _egg ,_egce ,_dedb ,nil ;};func _bbaa (_gfda float64 )bool {return _ag .Abs (_gfda )< _ggf };type rulingKind int ;func (_becfe compositeCell )split (_bfcec ,_gegff []float64 )*textTable {_bded :=len (_bfcec )+1;
_cbab :=len (_gegff )+1;if _dgda {_fc .Log .Info ("\u0063\u006f\u006d\u0070\u006f\u0073\u0069t\u0065\u0043\u0065l\u006c\u002e\u0073\u0070l\u0069\u0074\u003a\u0020\u0025\u0064\u0020\u0078\u0020\u0025\u0064\u000a\u0009\u0063\u006f\u006d\u0070\u006f\u0073\u0069\u0074\u0065\u003d\u0025\u0073\u000a"+"\u0009\u0072\u006f\u0077\u0043\u006f\u0072\u0072\u0069\u0064\u006f\u0072\u0073=\u0025\u0036\u002e\u0032\u0066\u000a\t\u0063\u006f\u006c\u0043\u006f\u0072\u0072\u0069\u0064\u006f\u0072\u0073\u003d%\u0036\u002e\u0032\u0066",_cbab ,_bded ,_becfe ,_bfcec ,_gegff );
_cf .Printf ("\u0020\u0020\u0020\u0020\u0025\u0064\u0020\u0070\u0061\u0072\u0061\u0073\u000a",len (_becfe .paraList ));for _acbg ,_aeacf :=range _becfe .paraList {_cf .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0073\u000a",_acbg ,_aeacf .String ());
};_cf .Printf ("\u0020\u0020\u0020\u0020\u0025\u0064\u0020\u006c\u0069\u006e\u0065\u0073\u000a",len (_becfe .lines ()));for _cgaca ,_fdadd :=range _becfe .lines (){_cf .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0073\u000a",_cgaca ,_fdadd );};};_bfcec =_fcfc (_bfcec ,_becfe .Ury ,_becfe .Lly );
_gegff =_fcfc (_gegff ,_becfe .Llx ,_becfe .Urx );_cdcb :=make (map[uint64 ]*textPara ,_cbab *_bded );_eabc :=textTable {_agaf :_cbab ,_ebaab :_bded ,_aaedb :_cdcb };_acfa :=_becfe .paraList ;_ba .Slice (_acfa ,func (_gaae ,_gacbfa int )bool {_dgbfe ,_cfad :=_acfa [_gaae ],_acfa [_gacbfa ];
_gbg ,_cdeab :=_dgbfe .Lly ,_cfad .Lly ;if _gbg !=_cdeab {return _gbg < _cdeab ;};return _dgbfe .Llx < _cfad .Llx ;});_aabb :=make (map[uint64 ]_ea .PdfRectangle ,_cbab *_bded );for _debd ,_ggffd :=range _bfcec [1:]{_gfde :=_bfcec [_debd ];for _dcgb ,_eebed :=range _gegff [1:]{_ceeg :=_gegff [_dcgb ];
_aabb [_fcgc (_dcgb ,_debd )]=_ea .PdfRectangle {Llx :_ceeg ,Urx :_eebed ,Lly :_ggffd ,Ury :_gfde };};};if _dgda {_fc .Log .Info ("\u0063\u006f\u006d\u0070\u006f\u0073\u0069\u0074\u0065\u0043\u0065l\u006c\u002e\u0073\u0070\u006c\u0069\u0074\u003a\u0020\u0072e\u0063\u0074\u0073");
_cf .Printf ("\u0020\u0020\u0020\u0020");for _egced :=0;_egced < _cbab ;_egced ++{_cf .Printf ("\u0025\u0033\u0030\u0064\u002c\u0020",_egced );};_cf .Println ();for _gbed :=0;_gbed < _bded ;_gbed ++{_cf .Printf ("\u0020\u0020\u0025\u0032\u0064\u003a",_gbed );
for _dceca :=0;_dceca < _cbab ;_dceca ++{_cf .Printf ("\u00256\u002e\u0032\u0066\u002c\u0020",_aabb [_fcgc (_dceca ,_gbed )]);};_cf .Println ();};};_bcag :=func (_cafdb *textLine )(int ,int ){for _fcec :=0;_fcec < _bded ;_fcec ++{for _fbff :=0;_fbff < _cbab ;
_fbff ++{if _aafg (_aabb [_fcgc (_fbff ,_fcec )],_cafdb .PdfRectangle ){return _fbff ,_fcec ;};};};return -1,-1;};_fbacf :=make (map[uint64 ][]*textLine ,_cbab *_bded );for _ ,_bdfda :=range _acfa .lines (){_cabg ,_ggdd :=_bcag (_bdfda );if _cabg < 0{continue ;
};_fbacf [_fcgc (_cabg ,_ggdd )]=append (_fbacf [_fcgc (_cabg ,_ggdd )],_bdfda );};for _afea :=0;_afea < len (_bfcec )-1;_afea ++{_eaeg :=_bfcec [_afea ];_efffe :=_bfcec [_afea +1];for _gdfgb :=0;_gdfgb < len (_gegff )-1;_gdfgb ++{_gdccc :=_gegff [_gdfgb ];
_dcgf :=_gegff [_gdfgb +1];_cgad :=_ea .PdfRectangle {Llx :_gdccc ,Urx :_dcgf ,Lly :_efffe ,Ury :_eaeg };_fbaea :=_fbacf [_fcgc (_gdfgb ,_afea )];if len (_fbaea )==0{continue ;};_eceb :=_ecdg (_cgad ,_fbaea );_eabc .put (_gdfgb ,_afea ,_eceb );};};return &_eabc ;
};func _cfadf (_gbde map[int ]intSet )[]int {_egbb :=make ([]int ,0,len (_gbde ));for _dacae :=range _gbde {_egbb =append (_egbb ,_dacae );};_ba .Ints (_egbb );return _egbb ;};func _fcfc (_ebdbb []float64 ,_cade ,_dafad float64 )[]float64 {_abcbe ,_daefg :=_cade ,_dafad ;
if _daefg < _abcbe {_abcbe ,_daefg =_daefg ,_abcbe ;};_bgeb :=make ([]float64 ,0,len (_ebdbb )+2);_bgeb =append (_bgeb ,_cade );for _ ,_dgcde :=range _ebdbb {if _dgcde <=_abcbe {continue ;}else if _dgcde >=_daefg {break ;};_bgeb =append (_bgeb ,_dgcde );
};_bgeb =append (_bgeb ,_dafad );return _bgeb ;};

// Text gets the extracted text contained in `l`.
func (_eebe *list )Text ()string {_deea :=&_eb .Builder {};_effgc :="";_bfb (_eebe ,_deea ,&_effgc );return _deea .String ();};func (_dgee paraList )xNeighbours (_acecd float64 )map[*textPara ][]int {_bbe :=make ([]event ,2*len (_dgee ));if _acecd ==0{for _gcgeb ,_eedcd :=range _dgee {_bbe [2*_gcgeb ]=event {_eedcd .Llx ,true ,_gcgeb };
_bbe [2*_gcgeb +1]=event {_eedcd .Urx ,false ,_gcgeb };};}else {for _dfgag ,_fbbeb :=range _dgee {_bbe [2*_dfgag ]=event {_fbbeb .Llx -_acecd *_fbbeb .fontsize (),true ,_dfgag };_bbe [2*_dfgag +1]=event {_fbbeb .Urx +_acecd *_fbbeb .fontsize (),false ,_dfgag };
};};return _dgee .eventNeighbours (_bbe );};func (_cefe *textObject )setTextRise (_ecb float64 ){if _cefe ==nil {return ;};_cefe ._abcg ._gbb =_ecb ;};func _bgbc (_geeg *wordBag ,_bffb int )*textLine {_dcgd :=_geeg .firstWord (_bffb );_cgfg :=textLine {PdfRectangle :_dcgd .PdfRectangle ,_faee :_dcgd ._geba ,_fbgb :_dcgd ._bbcgb };
_cgfg .pullWord (_geeg ,_dcgd ,_bffb );return &_cgfg ;};func (_gdef rulingList )mergePrimary ()float64 {_cgffc :=_gdef [0]._cafa ;for _ ,_fabdc :=range _gdef [1:]{_cgffc +=_fabdc ._cafa ;};return _cgffc /float64 (len (_gdef ));};func (_bccef paraList )findGridTables (_gggb []gridTiling )[]*textTable {if _dgda {_fc .Log .Info ("\u0066i\u006e\u0064\u0047\u0072\u0069\u0064\u0054\u0061\u0062\u006c\u0065s\u003a\u0020\u0025\u0064\u0020\u0070\u0061\u0072\u0061\u0073",len (_bccef ));
for _cbgdf ,_dfgec :=range _bccef {_cf .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0073\u000a",_cbgdf ,_dfgec );};};var _daedb []*textTable ;for _acbge ,_bdfeg :=range _gggb {_fdfe ,_eefbd :=_bccef .findTableGrid (_bdfeg );if _fdfe !=nil {_fdfe .log (_cf .Sprintf ("\u0066\u0069\u006e\u0064Ta\u0062\u006c\u0065\u0057\u0069\u0074\u0068\u0047\u0072\u0069\u0064\u0073\u003a\u0020%\u0064",_acbge ));
_daedb =append (_daedb ,_fdfe );_fdfe .markCells ();};for _abced :=range _eefbd {_abced ._gfff =true ;};};if _dgda {_fc .Log .Info ("\u0066i\u006e\u0064\u0047\u0072i\u0064\u0054\u0061\u0062\u006ce\u0073:\u0020%\u0064\u0020\u0074\u0061\u0062\u006c\u0065s",len (_daedb ));
};return _daedb ;};func (_dgggf rectRuling )checkWidth (_cegf ,_fgdbd float64 )(float64 ,bool ){_bacac :=_fgdbd -_cegf ;_bbdbc :=_bacac <=_ggf ;return _bacac ,_bbdbc ;};func (_cdgfc paraList )findTableGrid (_efaec gridTiling )(*textTable ,map[*textPara ]struct{}){_ddccd :=len (_efaec ._bebae );
_dgbd :=len (_efaec ._edgab );_afbg :=textTable {_agae :true ,_agaf :_ddccd ,_ebaab :_dgbd ,_aaedb :make (map[uint64 ]*textPara ,_ddccd *_dgbd ),_ecag :make (map[uint64 ]compositeCell ,_ddccd *_dgbd )};_afbg .PdfRectangle =_efaec .PdfRectangle ;_cfaaf :=make (map[*textPara ]struct{});
_fagfe :=int ((1.0-_fbcb )*float64 (_ddccd *_dgbd ));_ceadc :=0;if _cafd {_fc .Log .Info ("\u0066\u0069\u006e\u0064Ta\u0062\u006c\u0065\u0047\u0072\u0069\u0064\u003a\u0020\u0025\u0064\u0020\u0078\u0020%\u0064",_ddccd ,_dgbd );};for _aaeag ,_cggdbf :=range _efaec ._edgab {_aabf ,_dcbf :=_efaec ._bafg [_cggdbf ];
if !_dcbf {continue ;};for _gcbe ,_aaeb :=range _efaec ._bebae {_edbec ,_bgaf :=_aabf [_aaeb ];if !_bgaf {continue ;};_ddae :=_cdgfc .inTile (_edbec );if len (_ddae )==0{_ceadc ++;if _ceadc > _fagfe {if _cafd {_fc .Log .Info ("\u0021\u006e\u0075m\u0045\u006d\u0070\u0074\u0079\u003d\u0025\u0064",_ceadc );
};return nil ,nil ;};}else {_afbg .putComposite (_gcbe ,_aaeag ,_ddae ,_edbec .PdfRectangle );for _ ,_eeac :=range _ddae {_cfaaf [_eeac ]=struct{}{};};};};};_dbdce :=0;for _aggc :=0;_aggc < _ddccd ;_aggc ++{_agfcg :=_afbg .get (_aggc ,0);if _agfcg ==nil ||!_agfcg ._cdgcg {_dbdce ++;
};};if _dbdce ==0{if _cafd {_fc .Log .Info ("\u0021\u006e\u0075m\u0048\u0065\u0061\u0064\u0065\u0072\u003d\u0030");};return nil ,nil ;};_acffcf :=_afbg .reduceTiling (_efaec ,_fecc );_acffcf =_acffcf .subdivide ();return _acffcf ,_cfaaf ;};type textMark struct{_ea .PdfRectangle ;
_dggag int ;_cddae string ;_aeef string ;_gggf *_ea .PdfFont ;_afcb float64 ;_ggcf float64 ;_babgc _cg .Matrix ;_eaeb _cg .Point ;_ggac _ea .PdfRectangle ;_efcf _d .Color ;_deba _d .Color ;_ecffb _ad .PdfObject ;_eegc []string ;Tw float64 ;Th float64 ;
_bfcfc int ;_cebee int ;};func (_ddabf rulingList )connections (_gedaaf map[int ]intSet ,_fada int )intSet {_fbba :=make (intSet );_agcdc :=make (intSet );var _gdae func (int );_gdae =func (_ecead int ){if !_agcdc .has (_ecead ){_agcdc .add (_ecead );for _bfeab :=range _ddabf {if _gedaaf [_bfeab ].has (_ecead ){_fbba .add (_bfeab );
};};for _ceacad :=range _ddabf {if _fbba .has (_ceacad ){_gdae (_ceacad );};};};};_gdae (_fada );return _fbba ;};func _dcbae (_bbbef map[float64 ]map[float64 ]gridTile )[]float64 {_ccfd :=make ([]float64 ,0,len (_bbbef ));_faecf :=make (map[float64 ]struct{},len (_bbbef ));
for _ ,_gcaad :=range _bbbef {for _aeeeb :=range _gcaad {if _ ,_abbd :=_faecf [_aeeeb ];_abbd {continue ;};_ccfd =append (_ccfd ,_aeeeb );_faecf [_aeeeb ]=struct{}{};};};_ba .Float64s (_ccfd );return _ccfd ;};func _ggeb (_eegcc map[int ][]float64 )string {_dagdff :=_aefa (_eegcc );
_ccbeg :=make ([]string ,len (_eegcc ));for _cfeb ,_bdeg :=range _dagdff {_ccbeg [_cfeb ]=_cf .Sprintf ("\u0025\u0064\u003a\u0020\u0025\u002e\u0032\u0066",_bdeg ,_eegcc [_bdeg ]);};return _cf .Sprintf ("\u007b\u0025\u0073\u007d",_eb .Join (_ccbeg ,"\u002c\u0020"));
};func (_cggdb *textTable )getComposite (_dgffc ,_bebab int )(paraList ,_ea .PdfRectangle ){_dcfb ,_effa :=_cggdb ._ecag [_fcgc (_dgffc ,_bebab )];if _dgda {_cf .Printf ("\u0020\u0020\u0020\u0020\u0020\u0020\u0020\u0020\u0067\u0065\u0074\u0043\u006f\u006d\u0070o\u0073i\u0074\u0065\u0028\u0025\u0064\u002c\u0025\u0064\u0029\u002d\u003e\u0025\u0073\u000a",_dgffc ,_bebab ,_dcfb .String ());
};if !_effa {return nil ,_ea .PdfRectangle {};};return _dcfb .parasBBox ();};func _cdeeg (_bdedb []compositeCell )[]float64 {var _fdca []*textLine ;_dabac :=0;for _ ,_cege :=range _bdedb {_dabac +=len (_cege .paraList );_fdca =append (_fdca ,_cege .lines ()...);
};_ba .Slice (_fdca ,func (_ggceg ,_ggdc int )bool {_befa ,_bafca :=_fdca [_ggceg ],_fdca [_ggdc ];_gffff ,_gdfdf :=_befa ._fbgb ,_bafca ._fbgb ;if !_eeaf (_gffff -_gdfdf ){return _gffff < _gdfdf ;};return _befa .Llx < _bafca .Llx ;});if _dgda {_cf .Printf ("\u0020\u0020\u0020 r\u006f\u0077\u0042\u006f\u0072\u0064\u0065\u0072\u0073:\u0020%\u0064 \u0070a\u0072\u0061\u0073\u0020\u0025\u0064\u0020\u006c\u0069\u006e\u0065\u0073\u000a",_dabac ,len (_fdca ));
for _edcdac ,_aecbf :=range _fdca {_cf .Printf ("\u0025\u0038\u0064\u003a\u0020\u0025\u0073\u000a",_edcdac ,_aecbf );};};var _gcacb []float64 ;_egaf :=_fdca [0];var _ddcac [][]*textLine ;_afbce :=[]*textLine {_egaf };for _eaab ,_ebadf :=range _fdca [1:]{if _ebadf .Ury < _egaf .Lly {_fecd :=0.5*(_ebadf .Ury +_egaf .Lly );
if _dgda {_cf .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0036\u002e\u0032\u0066\u0020\u003c\u0020\u0025\u0036.\u0032f\u0020\u0062\u006f\u0072\u0064\u0065\u0072\u003d\u0025\u0036\u002e\u0032\u0066\u000a"+"\u0009\u0020\u0071\u003d\u0025\u0073\u000a\u0009\u0020p\u003d\u0025\u0073\u000a",_eaab ,_ebadf .Ury ,_egaf .Lly ,_fecd ,_egaf ,_ebadf );
};_gcacb =append (_gcacb ,_fecd );_ddcac =append (_ddcac ,_afbce );_afbce =nil ;};_afbce =append (_afbce ,_ebadf );if _ebadf .Lly < _egaf .Lly {_egaf =_ebadf ;};};if len (_afbce )> 0{_ddcac =append (_ddcac ,_afbce );};if _dgda {_cf .Printf (" \u0020\u0020\u0020\u0020\u0020\u0020 \u0072\u006f\u0077\u0043\u006f\u0072\u0072\u0069\u0064o\u0072\u0073\u003d%\u0036.\u0032\u0066\u000a",_gcacb );
};if _dgda {_fc .Log .Info ("\u0072\u006f\u0077\u003d\u0025\u0064",len (_bdedb ));for _cgca ,_cbcc :=range _bdedb {_cf .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0073\u000a",_cgca ,_cbcc );};_fc .Log .Info ("\u0067r\u006f\u0075\u0070\u0073\u003d\u0025d",len (_ddcac ));
for _cebfc ,_egaa :=range _ddcac {_cf .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0064\u000a",_cebfc ,len (_egaa ));for _dbee ,_bdbed :=range _egaa {_cf .Printf ("\u0025\u0038\u0064\u003a\u0020\u0025\u0073\u000a",_dbee ,_bdbed );};};};_edab :=true ;
for _ceaa ,_fbbec :=range _ddcac {_ccdf :=true ;for _addd ,_gdefe :=range _bdedb {if _dgda {_cf .Printf ("\u0020\u0020\u0020\u007e\u007e\u007e\u0067\u0072\u006f\u0075\u0070\u0020\u0025\u0064\u0020\u006f\u0066\u0020\u0025\u0064\u0020\u0063\u0065\u006cl\u0020\u0025\u0064\u0020\u006ff\u0020\u0025d\u0020\u0025\u0073\u000a",_ceaa ,len (_ddcac ),_addd ,len (_bdedb ),_gdefe );
};if !_gdefe .hasLines (_fbbec ){if _dgda {_cf .Printf ("\u0020\u0020\u0020\u0021\u0021\u0021\u0067\u0072\u006f\u0075\u0070\u0020\u0025d\u0020\u006f\u0066\u0020\u0025\u0064 \u0063\u0065\u006c\u006c\u0020\u0025\u0064\u0020\u006f\u0066\u0020\u0025\u0064 \u004f\u0055\u0054\u000a",_ceaa ,len (_ddcac ),_addd ,len (_bdedb ));
};_ccdf =false ;break ;};};if !_ccdf {_edab =false ;break ;};};if !_edab {if _dgda {_fc .Log .Info ("\u0072\u006f\u0077\u0020\u0063o\u0072\u0072\u0069\u0064\u006f\u0072\u0073\u0020\u0064\u006f\u006e\u0027\u0074 \u0073\u0070\u0061\u006e\u0020\u0061\u006c\u006c\u0020\u0063\u0065\u006c\u006c\u0073\u0020\u0069\u006e\u0020\u0072\u006f\u0077\u002e\u0020\u0069\u0067\u006e\u006f\u0072\u0069\u006eg");
};_gcacb =nil ;};if _dgda &&_gcacb !=nil {_cf .Printf ("\u0020\u0020\u0020\u0020\u0020\u0020\u0020\u0020\u002a\u002a*\u0072\u006f\u0077\u0043\u006f\u0072\u0072i\u0064\u006f\u0072\u0073\u003d\u0025\u0036\u002e\u0032\u0066\u000a",_gcacb );};return _gcacb ;
};func _agbf (_cafebd _cg .Point )*subpath {return &subpath {_gfagc :[]_cg .Point {_cafebd }}};func _fdcc (_beccb *wordBag ,_gdde float64 ,_bcfd ,_bacc rulingList )[]*wordBag {var _gaagc []*wordBag ;for _ ,_bfbd :=range _beccb .depthIndexes (){_gfcdd :=false ;
for !_beccb .empty (_bfbd ){_degg :=_beccb .firstReadingIndex (_bfbd );_gbac :=_beccb .firstWord (_degg );_baff :=_caff (_gbac ,_gdde ,_bcfd ,_bacc );_beccb .removeWord (_gbac ,_degg );if _efdff {_fc .Log .Info ("\u0066\u0069\u0072\u0073\u0074\u0057\u006f\u0072\u0064\u0020\u005e\u005e^\u005e\u0020\u0025\u0073",_gbac .String ());
};for _abecb :=true ;_abecb ;_abecb =_gfcdd {_gfcdd =false ;_fgec :=_gbbb *_baff ._ggc ;_ggdb :=_bafa *_baff ._ggc ;_gaca :=_gafdf *_baff ._ggc ;if _efdff {_fc .Log .Info ("\u0070a\u0072a\u0057\u006f\u0072\u0064\u0073\u0020\u0064\u0065\u0070\u0074\u0068 \u0025\u002e\u0032\u0066 \u002d\u0020\u0025\u002e\u0032f\u0020\u006d\u0061\u0078\u0049\u006e\u0074\u0072\u0061\u0044\u0065\u0070\u0074\u0068\u0047\u0061\u0070\u003d\u0025\u002e\u0032\u0066\u0020\u006d\u0061\u0078\u0049\u006e\u0074\u0072\u0061R\u0065\u0061\u0064\u0069\u006e\u0067\u0047\u0061p\u003d\u0025\u002e\u0032\u0066",_baff .minDepth (),_baff .maxDepth (),_gaca ,_ggdb );
};if _beccb .scanBand ("\u0076\u0065\u0072\u0074\u0069\u0063\u0061\u006c",_baff ,_fggdd (_edbed ,0),_baff .minDepth ()-_gaca ,_baff .maxDepth ()+_gaca ,_cfga ,false ,false )> 0{_gfcdd =true ;};if _beccb .scanBand ("\u0068\u006f\u0072\u0069\u007a\u006f\u006e\u0074\u0061\u006c",_baff ,_fggdd (_edbed ,_ggdb ),_baff .minDepth (),_baff .maxDepth (),_fgda ,false ,false )> 0{_gfcdd =true ;
};if _gfcdd {continue ;};_gfcf :=_beccb .scanBand ("",_baff ,_fggdd (_dbgd ,_fgec ),_baff .minDepth (),_baff .maxDepth (),_daag ,true ,false );if _gfcf > 0{_cgdg :=(_baff .maxDepth ()-_baff .minDepth ())/_baff ._ggc ;if (_gfcf > 1&&float64 (_gfcf )> 0.3*_cgdg )||_gfcf <=10{if _beccb .scanBand ("\u006f\u0074\u0068e\u0072",_baff ,_fggdd (_dbgd ,_fgec ),_baff .minDepth (),_baff .maxDepth (),_daag ,false ,true )> 0{_gfcdd =true ;
};};};};_gaagc =append (_gaagc ,_baff );};};return _gaagc ;};func (_bbgdg *stateStack )pop ()*textState {if _bbgdg .empty (){return nil ;};_dda :=*(*_bbgdg )[len (*_bbgdg )-1];*_bbgdg =(*_bbgdg )[:len (*_bbgdg )-1];return &_dda ;};

// String returns a description of `l`.
func (_ddcg *textLine )String ()string {return _cf .Sprintf ("\u0025\u002e2\u0066\u0020\u0025\u0036\u002e\u0032\u0066\u0020\u0066\u006f\u006e\u0074\u0073\u0069\u007a\u0065\u003d\u0025\u002e\u0032\u0066\u0020\"%\u0073\u0022",_ddcg ._fbgb ,_ddcg .PdfRectangle ,_ddcg ._faee ,_ddcg .text ());
};

// String returns a human readable description of `path`.
func (_aeac *subpath )String ()string {_efecg :=_aeac ._gfagc ;_bdcf :=len (_efecg );if _bdcf <=5{return _cf .Sprintf ("\u0025d\u003a\u0020\u0025\u0036\u002e\u0032f",_bdcf ,_efecg );};return _cf .Sprintf ("\u0025d\u003a\u0020\u0025\u0036.\u0032\u0066\u0020\u0025\u0036.\u0032f\u0020.\u002e\u002e\u0020\u0025\u0036\u002e\u0032f",_bdcf ,_efecg [0],_efecg [1],_efecg [_bdcf -1]);
};func (_afae *shapesState )devicePoint (_ebbe ,_adfe float64 )_cg .Point {_dbce :=_afae ._cea .Mult (_afae ._cee );_ebbe ,_adfe =_dbce .Transform (_ebbe ,_adfe );return _cg .NewPoint (_ebbe ,_adfe );};func (_edaga *textWord )bbox ()_ea .PdfRectangle {return _edaga .PdfRectangle };


// Tables returns the tables extracted from the page.
func (_cdea PageText )Tables ()[]TextTable {if _dgda {_fc .Log .Info ("\u0054\u0061\u0062\u006c\u0065\u0073\u003a\u0020\u0025\u0064",len (_cdea ._aeee ));};return _cdea ._aeee ;};func _gffb (_bfeff *list )[]*list {var _degf []*list ;for _ ,_befg :=range _bfeff ._adgg {switch _befg ._fdbe {case "\u004c\u0049":_fcbbf :=_dadc (_befg );
_ffffg :=_gffb (_befg );_edce :=_gaag (_fcbbf ,"\u0062\u0075\u006c\u006c\u0065\u0074",_ffffg );_dbffg :=_cgcb (_fcbbf ,"");_edce ._eeefb =_dbffg ;_degf =append (_degf ,_edce );case "\u004c\u0042\u006fd\u0079":return _gffb (_befg );case "\u004c":_bdbe :=_gffb (_befg );
_degf =append (_degf ,_bdbe ...);return _degf ;};};return _degf ;};

// PageFonts represents extracted fonts on a PDF page.
type PageFonts struct{Fonts []Font ;};

// NewWithOptions an Extractor instance for extracting content from the input PDF page with options.
func NewWithOptions (page *_ea .PdfPage ,options *Options )(*Extractor ,error ){const _eda ="\u0065x\u0074\u0072\u0061\u0063\u0074\u006f\u0072\u002e\u004e\u0065\u0077W\u0069\u0074\u0068\u004f\u0070\u0074\u0069\u006f\u006e\u0073";_cgb ,_fee :=page .GetAllContentStreams ();
if _fee !=nil {return nil ,_fee ;};_bed ,_eaf :=page .GetStructTreeRoot ();if !_eaf {_fc .Log .Debug ("T\u0068\u0065\u0020\u0070\u0064\u0066\u0020\u0064\u006f\u0063\u0075\u006d\u0065\u006e\u0074\u0020\u0069\u0073\u0020\u006e\u006f\u0074\u0020\u0074\u0061\u0067g\u0065d\u002e\u0020\u0053\u0074r\u0075\u0063t\u0054\u0072\u0065\u0065\u0052\u006f\u006f\u0074\u0020\u0064\u006f\u0065\u0073\u006e\u0027\u0074\u0020\u0065\u0078\u0069\u0073\u0074\u002e");
};_egb :=page .GetContainingPdfObject ();_dffc ,_fee :=page .GetMediaBox ();if _fee !=nil {return nil ,_cf .Errorf ("\u0065\u0078\u0074r\u0061\u0063\u0074\u006fr\u0020\u0072\u0065\u0071\u0075\u0069\u0072e\u0073\u0020\u006d\u0065\u0064\u0069\u0061\u0042\u006f\u0078\u002e\u0020\u0025\u0076",_fee );
};_cgf :=&Extractor {_acg :_cgb ,_daf :page .Resources ,_gdb :*_dffc ,_ebe :page .CropBox ,_fa :map[string ]fontEntry {},_gb :map[string ]textResult {},_ede :map[string ]textResult {},_gbf :options ,_fcgb :_bed ,_ef :_egb };if _cgf ._gdb .Llx > _cgf ._gdb .Urx {_fc .Log .Info ("\u004d\u0065\u0064\u0069\u0061\u0042o\u0078\u0020\u0068\u0061\u0073\u0020\u0058\u0020\u0063\u006f\u006f\u0072\u0064\u0069\u006e\u0061\u0074\u0065\u0073\u0020r\u0065\u0076\u0065\u0072\u0073\u0065\u0064\u002e\u0020\u0025\u002e\u0032\u0066\u0020F\u0069x\u0069\u006e\u0067\u002e",_cgf ._gdb );
_cgf ._gdb .Llx ,_cgf ._gdb .Urx =_cgf ._gdb .Urx ,_cgf ._gdb .Llx ;};if _cgf ._gdb .Lly > _cgf ._gdb .Ury {_fc .Log .Info ("\u004d\u0065\u0064\u0069\u0061\u0042o\u0078\u0020\u0068\u0061\u0073\u0020\u0059\u0020\u0063\u006f\u006f\u0072\u0064\u0069\u006e\u0061\u0074\u0065\u0073\u0020r\u0065\u0076\u0065\u0072\u0073\u0065\u0064\u002e\u0020\u0025\u002e\u0032\u0066\u0020F\u0069x\u0069\u006e\u0067\u002e",_cgf ._gdb );
_cgf ._gdb .Lly ,_cgf ._gdb .Ury =_cgf ._gdb .Ury ,_cgf ._gdb .Lly ;};if _cgf ._gbf !=nil {if _cgf ._gbf .IncludeAnnotations {_cgf ._bfg ,_fee =page .GetAnnotations ();if _fee !=nil {_fc .Log .Debug ("\u0045\u0072r\u006f\u0072\u0020\u0067\u0065\u0074\u0074\u0069\u006e\u0067\u0020\u0061\u006e\u006e\u006f\u0074\u0061\u0074\u0069\u006f\u006e\u0073: \u0025\u0076",_fee );
};};};_db .TrackUse (_eda );return _cgf ,nil ;};func (_efca *textLine )endsInHyphen ()bool {_ggfa :=_efca ._bbada [len (_efca ._bbada )-1];_cbfea :=_ggfa ._cfdag ;_defd ,_ggab :=_a .DecodeLastRuneInString (_cbfea );if _ggab <=0||!_g .Is (_g .Hyphen ,_defd ){return false ;
};if _ggfa ._edfc &&_agabf (_cbfea ){return true ;};return _agabf (_efca .text ());};func (_egcg *imageExtractContext )extractFormImages (_fead *_ad .PdfObjectName ,_abc _edb .GraphicsState ,_beaf *_ea .PdfPageResources )error {_ggbg ,_edcd :=_beaf .GetXObjectFormByName (*_fead );
if _edcd !=nil {return _edcd ;};if _ggbg ==nil {return nil ;};_efd ,_edcd :=_ggbg .GetContentStream ();if _edcd !=nil {return _edcd ;};_afg :=_ggbg .Resources ;if _afg ==nil {_afg =_beaf ;};_edcd =_egcg .extractContentStreamImages (string (_efd ),_afg );
if _edcd !=nil {return _edcd ;};_egcg ._dcg ++;return nil ;};func (_cbg *imageExtractContext )extractContentStreamImages (_bbgd string ,_bgc *_ea .PdfPageResources )error {_fcbb :=_edb .NewContentStreamParser (_bbgd );_dadf ,_acf :=_fcbb .Parse ();if _acf !=nil {return _acf ;
};if _cbg ._bcfa ==nil {_cbg ._bcfa =map[*_ad .PdfObjectStream ]*cachedImage {};};if _cbg ._cfb ==nil {_cbg ._cfb =&ImageExtractOptions {};};_acfd :=_edb .NewContentStreamProcessor (*_dadf );_acfd .AddHandler (_edb .HandlerConditionEnumAllOperands ,"",_cbg .processOperand );
return _acfd .Process (_bgc );};func (_fagb *textObject )setTextMatrix (_bbc []float64 ){if len (_bbc )!=6{_fc .Log .Debug ("\u0045\u0052\u0052OR\u003a\u0020\u006c\u0065\u006e\u0028\u0066\u0029\u0020\u0021\u003d\u0020\u0036\u0020\u0028\u0025\u0064\u0029",len (_bbc ));
return ;};_cab ,_dge ,_gec ,_accg ,_geag ,_dabf :=_bbc [0],_bbc [1],_bbc [2],_bbc [3],_bbc [4],_bbc [5];_fagb ._bdfa =_cg .NewMatrix (_cab ,_dge ,_gec ,_accg ,_geag ,_dabf );_fagb ._acdcf =_fagb ._bdfa ;};func _cccf (_gefgc _ea .PdfRectangle ,_ebcb bounded )float64 {return _gefgc .Ury -_ebcb .bbox ().Lly };
func (_fbf TextTable )getCellInfo (_badf TextMark )[][]int {for _abb ,_ddgb :=range _fbf .Cells {for _fbg :=range _ddgb {_dgbb :=&_ddgb [_fbg ].Marks ;if _dgbb .exists (_badf ){return [][]int {{_abb },{_fbg }};};};};return nil ;};func (_dfgg *shapesState )closePath (){if _dfgg ._cdceb {_dfgg ._agbgb =append (_dfgg ._agbgb ,_agbf (_dfgg ._efc ));
_dfgg ._cdceb =false ;}else if len (_dfgg ._agbgb )==0{if _dfcf {_fc .Log .Debug ("\u0063\u006c\u006f\u0073eP\u0061\u0074\u0068\u0020\u0077\u0069\u0074\u0068\u0020\u006e\u006f\u0020\u0070\u0061t\u0068");};_dfgg ._cdceb =false ;return ;};_dfgg ._agbgb [len (_dfgg ._agbgb )-1].close ();
if _dfcf {_fc .Log .Info ("\u0063\u006c\u006f\u0073\u0065\u0050\u0061\u0074\u0068\u003a\u0020\u0025\u0073",_dfgg );};};

// TableCell is a cell in a TextTable.
type TableCell struct{_ea .PdfRectangle ;

// Text is the extracted text.
Text string ;

// Marks returns the TextMarks corresponding to the text in Text.
Marks TextMarkArray ;};func (_ddfa *subpath )last ()_cg .Point {return _ddfa ._gfagc [len (_ddfa ._gfagc )-1]};func (_ffea *textPara )toTextMarks (_bffbd *int )[]TextMark {if _ffea ._ebdd ==nil {return _ffea .toCellTextMarks (_bffbd );};var _gcfc []TextMark ;
for _dfeab :=0;_dfeab < _ffea ._ebdd ._ebaab ;_dfeab ++{for _ceda :=0;_ceda < _ffea ._ebdd ._agaf ;_ceda ++{_bebf :=_ffea ._ebdd .get (_ceda ,_dfeab );if _bebf ==nil {_gcfc =_cagg (_gcfc ,_bffbd ,"\u0009");}else {_dacc :=_bebf .toCellTextMarks (_bffbd );
_gcfc =append (_gcfc ,_dacc ...);};_gcfc =_cagg (_gcfc ,_bffbd ,"\u0020");};if _dfeab < _ffea ._ebdd ._ebaab -1{_gcfc =_cagg (_gcfc ,_bffbd ,"\u000a");};};_dedbb :=_ffea ._ebdd ;if _dedbb .isExportable (){_cefed :=_dedbb .toTextTable ();_gcfc =_egdg (_gcfc ,&_cefed );
};return _gcfc ;};func (_eacef *ruling )gridIntersecting (_acbf *ruling )bool {return _ggaf (_eacef ._fddc ,_acbf ._fddc )&&_ggaf (_eacef ._begad ,_acbf ._begad );};func _facda (_eaegb []*textWord ,_fbbf int )[]*textWord {_acgb :=len (_eaegb );copy (_eaegb [_fbbf :],_eaegb [_fbbf +1:]);
return _eaegb [:_acgb -1];};func (_cdee *wordBag )getDepthIdx (_gffe float64 )int {_dafa :=_cdee .depthIndexes ();_agda :=_ebeg (_gffe );if _agda < _dafa [0]{return _dafa [0];};if _agda > _dafa [len (_dafa )-1]{return _dafa [len (_dafa )-1];};return _agda ;
};func (_eeed rulingList )aligned ()bool {if len (_eeed )< 2{return false ;};_fbde :=make (map[*ruling ]int );_fbde [_eeed [0]]=0;for _ ,_bdff :=range _eeed [1:]{_cffc :=false ;for _eccd :=range _fbde {if _bdff .gridIntersecting (_eccd ){_fbde [_eccd ]++;
_cffc =true ;break ;};};if !_cffc {_fbde [_bdff ]=0;};};_caac :=0;for _ ,_bbcca :=range _fbde {if _bbcca ==0{_caac ++;};};_gfdd :=float64 (_caac )/float64 (len (_eeed ));_cbeg :=_gfdd <=1.0-_ceag ;if _gbbe {_fc .Log .Info ("\u0061\u006c\u0069\u0067\u006e\u0065\u0064\u003d\u0025\u0074\u0020\u0075\u006em\u0061\u0074\u0063\u0068\u0065\u0064=\u0025\u002e\u0032\u0066\u003d\u0025\u0064\u002f\u0025\u0064\u0020\u0076\u0065c\u0073\u003d\u0025\u0073",_cbeg ,_gfdd ,_caac ,len (_eeed ),_eeed .String ());
};return _cbeg ;};func (_eddaa *textTable )reduceTiling (_bdaef gridTiling ,_gafdd float64 )*textTable {_gagg :=make ([]int ,0,_eddaa ._ebaab );_fcbcd :=make ([]int ,0,_eddaa ._agaf );_cecfc :=_bdaef ._bebae ;_gdggg :=_bdaef ._edgab ;for _deabb :=0;_deabb < _eddaa ._ebaab ;
_deabb ++{_gcecf :=_deabb > 0&&_ag .Abs (_gdggg [_deabb -1]-_gdggg [_deabb ])< _gafdd &&_eddaa .emptyCompositeRow (_deabb );if !_gcecf {_gagg =append (_gagg ,_deabb );};};for _debda :=0;_debda < _eddaa ._agaf ;_debda ++{_ffgee :=_debda < _eddaa ._agaf -1&&_ag .Abs (_cecfc [_debda +1]-_cecfc [_debda ])< _gafdd &&_eddaa .emptyCompositeColumn (_debda );
if !_ffgee {_fcbcd =append (_fcbcd ,_debda );};};if len (_gagg )==_eddaa ._ebaab &&len (_fcbcd )==_eddaa ._agaf {return _eddaa ;};_gbbeg :=textTable {_agae :_eddaa ._agae ,_agaf :len (_fcbcd ),_ebaab :len (_gagg ),_ecag :make (map[uint64 ]compositeCell ,len (_fcbcd )*len (_gagg ))};
if _dgda {_fc .Log .Info ("\u0072\u0065\u0064\u0075c\u0065\u0054\u0069\u006c\u0069\u006e\u0067\u003a\u0020\u0025d\u0078%\u0064\u0020\u002d\u003e\u0020\u0025\u0064x\u0025\u0064",_eddaa ._agaf ,_eddaa ._ebaab ,len (_fcbcd ),len (_gagg ));_fc .Log .Info ("\u0072\u0065d\u0075\u0063\u0065d\u0043\u006f\u006c\u0073\u003a\u0020\u0025\u002b\u0076",_fcbcd );
_fc .Log .Info ("\u0072\u0065d\u0075\u0063\u0065d\u0052\u006f\u0077\u0073\u003a\u0020\u0025\u002b\u0076",_gagg );};for _adeda ,_aadf :=range _gagg {for _bcfbc ,_dgca :=range _fcbcd {_gdebf ,_ecafe :=_eddaa .getComposite (_dgca ,_aadf );if len (_gdebf )==0{continue ;
};if _dgda {_cf .Printf ("\u0020 \u0025\u0032\u0064\u002c \u0025\u0032\u0064\u0020\u0028%\u0032d\u002c \u0025\u0032\u0064\u0029\u0020\u0025\u0071\n",_bcfbc ,_adeda ,_dgca ,_aadf ,_afbcec (_gdebf .merge ().text (),50));};_gbbeg .putComposite (_bcfbc ,_adeda ,_gdebf ,_ecafe );
};};return &_gbbeg ;};func (_dedac paraList )findTextTables ()[]*textTable {var _abefa []*textTable ;for _ ,_bbagc :=range _dedac {if _bbagc .taken ()||_bbagc .Width ()==0{continue ;};_fdgdf :=_bbagc .isAtom ();if _fdgdf ==nil {continue ;};_fdgdf .growTable ();
if _fdgdf ._agaf *_fdgdf ._ebaab < _ebgd {continue ;};_fdgdf .markCells ();_fdgdf .log ("\u0067\u0072\u006fw\u006e");_abefa =append (_abefa ,_fdgdf );};return _abefa ;};func (_gegd *textPara )text ()string {_agebe :=new (_gf .Buffer );_gegd .writeText (_agebe );
return _agebe .String ();};func _eefd (_bgdf ,_ffbbb bounded )float64 {return _ebfdg (_bgdf )-_ebfdg (_ffbbb )};func (_gbced *ruling )intersects (_ddce *ruling )bool {_fcce :=(_gbced ._gddac ==_bgcg &&_ddce ._gddac ==_ecacd )||(_ddce ._gddac ==_bgcg &&_gbced ._gddac ==_ecacd );
_cecbc :=func (_agdad ,_dgff *ruling )bool {return _agdad ._fddc -_bbfd <=_dgff ._cafa &&_dgff ._cafa <=_agdad ._begad +_bbfd ;};_begf :=_cecbc (_gbced ,_ddce );_efceg :=_cecbc (_ddce ,_gbced );if _gbbe {_cf .Printf ("\u0020\u0020\u0020\u0020\u0069\u006e\u0074\u0065\u0072\u0073\u0065\u0063\u0074\u0073\u003a\u0020\u0020\u006fr\u0074\u0068\u006f\u0067\u006f\u006e\u0061l\u003d\u0025\u0074\u0020\u006f\u0031\u003d\u0025\u0074\u0020\u006f2\u003d\u0025\u0074\u0020\u2192\u0020\u0025\u0074\u000a"+"\u0020\u0020\u0020 \u0020\u0020\u0020\u0076\u003d\u0025\u0073\u000a"+" \u0020\u0020\u0020\u0020\u0020\u0077\u003d\u0025\u0073\u000a",_fcce ,_begf ,_efceg ,_fcce &&_begf &&_efceg ,_gbced ,_ddce );
};return _fcce &&_begf &&_efceg ;};func (_bffg *textObject )setFont (_fgf string ,_ecfd float64 )error {if _bffg ==nil {return nil ;};_bffg ._abcg ._fgfa =_ecfd ;_egbd ,_cdce :=_bffg .getFont (_fgf );if _cdce !=nil {return _cdce ;};_bffg ._abcg ._egcgg =_egbd ;
return nil ;};func _bagfd (_gafc *_ea .Image ,_fgaeg _d .Color )_bc .Image {_cdab ,_cdeeb :=int (_gafc .Width ),int (_gafc .Height );_dgdg :=_bc .NewRGBA (_bc .Rect (0,0,_cdab ,_cdeeb ));for _eadb :=0;_eadb < _cdeeb ;_eadb ++{for _ccadd :=0;_ccadd < _cdab ;
_ccadd ++{_cgceg ,_cdgfcc :=_gafc .ColorAt (_ccadd ,_eadb );if _cdgfcc !=nil {_fc .Log .Debug ("\u0057\u0041\u0052\u004e\u003a\u0020\u0063o\u0075\u006c\u0064\u0020\u006e\u006f\u0074\u0020\u0072\u0065\u0074\u0072\u0069\u0065v\u0065 \u0069\u006d\u0061\u0067\u0065\u0020m\u0061\u0073\u006b\u0020\u0076\u0061\u006cu\u0065\u0020\u0061\u0074\u0020\u0028\u0025\u0064\u002c\u0020\u0025\u0064\u0029\u002e\u0020\u004f\u0075\u0074\u0070\u0075\u0074\u0020\u006da\u0079\u0020\u0062\u0065\u0020\u0069\u006e\u0063\u006f\u0072\u0072\u0065\u0063t\u002e",_ccadd ,_eadb );
continue ;};_cdbac ,_afde ,_dfeba ,_ :=_cgceg .RGBA ();var _fbfgb _d .Color ;if _cdbac +_afde +_dfeba ==0{_fbfgb =_d .Transparent ;}else {_fbfgb =_fgaeg ;};_dgdg .Set (_ccadd ,_eadb ,_fbfgb );};};return _dgdg ;};func (_bagdd *textPara )fontsize ()float64 {return _bagdd ._cebdg [0]._faee };
func (_cdae *wordBag )blocked (_adba *textWord )bool {if _adba .Urx < _cdae .Llx {_efed :=_bgcdg (_adba .PdfRectangle );_cggf :=_bdcee (_cdae .PdfRectangle );if _cdae ._feae .blocks (_efed ,_cggf ){if _gfbd {_fc .Log .Info ("\u0062\u006c\u006f\u0063ke\u0064\u0020\u2190\u0078\u003a\u0020\u0025\u0073\u0020\u0025\u0073",_adba ,_cdae );
};return true ;};}else if _cdae .Urx < _adba .Llx {_gaea :=_bgcdg (_cdae .PdfRectangle );_edeaa :=_bdcee (_adba .PdfRectangle );if _cdae ._feae .blocks (_gaea ,_edeaa ){if _gfbd {_fc .Log .Info ("b\u006co\u0063\u006b\u0065\u0064\u0020\u0078\u2192\u0020:\u0020\u0025\u0073\u0020%s",_adba ,_cdae );
};return true ;};};if _adba .Ury < _cdae .Lly {_cgce :=_daceb (_adba .PdfRectangle );_bbf :=_adgce (_cdae .PdfRectangle );if _cdae ._dabg .blocks (_cgce ,_bbf ){if _gfbd {_fc .Log .Info ("\u0062\u006c\u006f\u0063ke\u0064\u0020\u2190\u0079\u003a\u0020\u0025\u0073\u0020\u0025\u0073",_adba ,_cdae );
};return true ;};}else if _cdae .Ury < _adba .Lly {_adgc :=_daceb (_cdae .PdfRectangle );_dgg :=_adgce (_adba .PdfRectangle );if _cdae ._dabg .blocks (_adgc ,_dgg ){if _gfbd {_fc .Log .Info ("b\u006co\u0063\u006b\u0065\u0064\u0020\u0079\u2192\u0020:\u0020\u0025\u0073\u0020%s",_adba ,_cdae );
};return true ;};};return false ;};func _gfb (_adec _ea .PdfRectangle )textState {return textState {_cccc :100,_afbd :RenderModeFill ,_caa :_adec };};func _dace (_gdgf []*textLine ,_ffcb map[float64 ][]*textLine ,_gecf []float64 ,_dbcg int ,_cecg ,_cgdd float64 )[]*list {_ddbfb :=[]*list {};
_fgaeb :=_dbcg ;_dbcg =_dbcg +1;_dafcg :=_gecf [_fgaeb ];_bgfg :=_ffcb [_dafcg ];_caca :=_dcae (_bgfg ,_cgdd ,_cecg );for _geeee ,_ddfec :=range _caca {var _gcffd float64 ;_bcge :=[]*list {};_adaac :=_ddfec ._fbgb ;_ebbb :=_cgdd ;if _geeee < len (_caca )-1{_ebbb =_caca [_geeee +1]._fbgb ;
};if _dbcg < len (_gecf ){_bcge =_dace (_gdgf ,_ffcb ,_gecf ,_dbcg ,_adaac ,_ebbb );};_gcffd =_ebbb ;if len (_bcge )> 0{_fgdb :=_bcge [0];if len (_fgdb ._addb )> 0{_gcffd =_fgdb ._addb [0]._fbgb ;};};_dbba :=[]*textLine {_ddfec };_abeef :=_bdacfc (_ddfec ,_gdgf ,_gecf ,_adaac ,_gcffd );
_dbba =append (_dbba ,_abeef ...);_edeac :=_gaag (_dbba ,"\u0062\u0075\u006c\u006c\u0065\u0074",_bcge );_edeac ._eeefb =_cgcb (_dbba ,"");_ddbfb =append (_ddbfb ,_edeac );};return _ddbfb ;};func (_edgbd *textMark )bbox ()_ea .PdfRectangle {return _edgbd .PdfRectangle };
func _agbfa (_cfbbe []*textMark ,_edff _ea .PdfRectangle )*textWord {_ebeb :=_cfbbe [0].PdfRectangle ;_ddabfg :=_cfbbe [0]._afcb ;for _ ,_gbdeg :=range _cfbbe [1:]{_ebeb =_fgde (_ebeb ,_gbdeg .PdfRectangle );if _gbdeg ._afcb > _ddabfg {_ddabfg =_gbdeg ._afcb ;
};};return &textWord {PdfRectangle :_ebeb ,_eccf :_cfbbe ,_bbcgb :_edff .Ury -_ebeb .Lly ,_geba :_ddabfg };};const (RenderModeStroke RenderMode =1<<iota ;RenderModeFill ;RenderModeClip ;);func _fdbgc (_dbfb string )string {_ggff :=[]rune (_dbfb );return string (_ggff [:len (_ggff )-1])};


// ExtractFonts returns all font information from the page extractor, including
// font name, font type, the raw data of the embedded font file (if embedded), font descriptor and more.
//
// The argument `previousPageFonts` is used when trying to build a complete font catalog for multiple pages or the entire document.
// The entries from `previousPageFonts` are added to the returned result unless already included in the page, i.e. no duplicate entries.
//
// NOTE: If previousPageFonts is nil, all fonts from the page will be returned. Use it when building up a full list of fonts for a document or page range.
func (_gaa *Extractor )ExtractFonts (previousPageFonts *PageFonts )(*PageFonts ,error ){_ecg :=PageFonts {};_dbd :=_ecg .extractPageResourcesToFont (_gaa ._daf );if _dbd !=nil {return nil ,_dbd ;};if previousPageFonts !=nil {for _ ,_eef :=range previousPageFonts .Fonts {if !_dag (_ecg .Fonts ,_eef .FontName ){_ecg .Fonts =append (_ecg .Fonts ,_eef );
};};};return &PageFonts {Fonts :_ecg .Fonts },nil ;};func (_caabc *textPara )toCellTextMarks (_edga *int )[]TextMark {var _fgca []TextMark ;for _dgaag ,_dedad :=range _caabc ._cebdg {_gfcg :=_dedad .toTextMarks (_edga );_ceaf :=_fed &&_dedad .endsInHyphen ()&&_dgaag !=len (_caabc ._cebdg )-1;
if _ceaf {_gfcg =_gbbde (_gfcg ,_edga );};_fgca =append (_fgca ,_gfcg ...);if !(_ceaf ||_dgaag ==len (_caabc ._cebdg )-1){_fgca =_cagg (_fgca ,_edga ,_bbgg (_dedad ._fbgb ,_caabc ._cebdg [_dgaag +1]._fbgb ));};};return _fgca ;};

// ImageMark represents an image drawn on a page and its position in device coordinates.
// All coordinates are in device coordinates.
type ImageMark struct{Image *_ea .Image ;

// Dimensions of the image as displayed in the PDF.
Width float64 ;Height float64 ;

// Position of the image in PDF coordinates (lower left corner).
X float64 ;Y float64 ;

// Angle in degrees, if rotated.
Angle float64 ;};func _fdbgb (_eede ,_bfag bounded )float64 {return _eede .bbox ().Llx -_bfag .bbox ().Urx };func (_gbaf *textObject )showTextAdjusted (_ddge *_ad .PdfObjectArray ,_fdf int ,_febb string )error {_bgf :=false ;for _ ,_bedf :=range _ddge .Elements (){switch _bedf .(type ){case *_ad .PdfObjectFloat ,*_ad .PdfObjectInteger :_fbc ,_cafeb :=_ad .GetNumberAsFloat (_bedf );
if _cafeb !=nil {_fc .Log .Debug ("\u0045\u0052\u0052\u004fR\u003a\u0020\u0073\u0068\u006f\u0077\u0054\u0065\u0078t\u0041\u0064\u006a\u0075\u0073\u0074\u0065\u0064\u002e\u0020\u0042\u0061\u0064\u0020\u006e\u0075\u006d\u0065r\u0069\u0063\u0061\u006c\u0020a\u0072\u0067\u002e\u0020\u006f\u003d\u0025\u0073\u0020\u0061\u0072\u0067\u0073\u003d\u0025\u002b\u0076",_bedf ,_ddge );
return _cafeb ;};_cbec ,_fdc :=-_fbc *0.001*_gbaf ._abcg ._fgfa ,0.0;if _bgf {_fdc ,_cbec =_cbec ,_fdc ;};_afe :=_eead (_cg .Point {X :_cbec ,Y :_fdc });_gbaf ._bdfa .Concat (_afe );case *_ad .PdfObjectString :_bcad :=_ad .TraceToDirectObject (_bedf );
_cdgc ,_geee :=_ad .GetStringBytes (_bcad );if !_geee {_fc .Log .Trace ("s\u0068\u006f\u0077\u0054\u0065\u0078\u0074\u0041\u0064j\u0075\u0073\u0074\u0065\u0064\u003a\u0020Ba\u0064\u0020\u0073\u0074r\u0069\u006e\u0067\u0020\u0061\u0072\u0067\u002e\u0020o=\u0025\u0073 \u0061\u0072\u0067\u0073\u003d\u0025\u002b\u0076",_bedf ,_ddge );
return _ad .ErrTypeError ;};_gbaf .renderText (_bcad ,_cdgc ,_fdf ,_febb );default:_fc .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0073\u0068\u006f\u0077\u0054\u0065\u0078\u0074A\u0064\u006a\u0075\u0073\u0074\u0065\u0064\u002e\u0020\u0055\u006e\u0065\u0078p\u0065\u0063\u0074\u0065\u0064\u0020\u0074\u0079\u0070\u0065\u0020\u0028%T\u0029\u0020\u0061\u0072\u0067\u0073\u003d\u0025\u002b\u0076",_bedf ,_ddge );
return _ad .ErrTypeError ;};};return nil ;};

// String returns a human readable description of `vecs`.
func (_fagaf rulingList )String ()string {if len (_fagaf )==0{return "\u007b \u0045\u004d\u0050\u0054\u0059\u0020}";};_bfcdg ,_edaa :=_fagaf .vertsHorzs ();_fgbb :=len (_bfcdg );_gdac :=len (_edaa );if _fgbb ==0||_gdac ==0{return _cf .Sprintf ("\u007b%\u0064\u0020\u0078\u0020\u0025\u0064}",_fgbb ,_gdac );
};_bdec :=_ea .PdfRectangle {Llx :_bfcdg [0]._cafa ,Urx :_bfcdg [_fgbb -1]._cafa ,Lly :_edaa [_gdac -1]._cafa ,Ury :_edaa [0]._cafa };return _cf .Sprintf ("\u007b\u0025d\u0020\u0078\u0020%\u0064\u003a\u0020\u0025\u0036\u002e\u0032\u0066\u007d",_fgbb ,_gdac ,_bdec );
};func _accd (_ggabf ,_caccd _cg .Point )rulingKind {_cbge :=_ag .Abs (_ggabf .X -_caccd .X );_bebg :=_ag .Abs (_ggabf .Y -_caccd .Y );return _daef (_cbge ,_bebg ,_bdca );};

// List returns all the list objects detected on the page.
// It detects all the bullet point Lists from a given pdf page and builds a slice of bullet list objects.
// A given bullet list object has a tree structure.
// Each bullet point list is extracted with the text content it contains and all the sub lists found under it as children in the tree.
// The rest content of the pdf is ignored and only text in the bullet point lists are extracted.
// The list extraction is done in two ways.
// 1. If the document is tagged then the lists are extracted using the tags provided in the document.
// 2. Otherwise the bullet lists are extracted from the raw text using regex matching.
// By default the document tag is used if available.
// However this can be disabled using `DisableDocumentTags` in the `Options` object.
// Sometimes disabling document tags option might give a better bullet list extraction if the document was tagged incorrectly.
//
//	    options := &Options{
//		     DisableDocumentTags: false, // this means use document tag if available
//	    }
//	    ex, err := NewWithOptions(page, options)
//	    // handle error
//	    pageText, _, _, err := ex.ExtractPageText()
//	    // handle error
//	    lists := pageText.List()
//	    txt := lists.Text()
func (_fbfg PageText )List ()lists {_gcac :=!_fbfg ._fafc ._adee ;_fcacf :=_fbfg .getParagraphs ();_gbae :=true ;if _fbfg ._acff ==nil ||*_fbfg ._acff ==nil {_gbae =false ;};_eaea :=_fcacf .list ();if _gbae &&_gcac {_febab :=_abfff (&_fcacf );_afcc :=&structTreeRoot {};
_afcc .parseStructTreeRoot (*_fbfg ._acff );if _afcc ._cce ==nil {_fc .Log .Debug ("\u004c\u0069\u0073\u0074\u003a\u0020\u0073t\u0072\u0075\u0063\u0074\u0054\u0072\u0065\u0065\u0052\u006f\u006f\u0074\u0020\u0064\u006f\u0065\u0073\u006e'\u0074\u0020\u0068\u0061\u0076e\u0020\u0061\u006e\u0079\u0020\u0063\u006f\u006e\u0074e\u006e\u0074\u002c\u0020\u0075\u0073\u0069\u006e\u0067\u0020\u0074\u0065\u0078\u0074\u0020\u006d\u0061\u0074\u0063\u0068\u0069\u006e\u0067\u0020\u006d\u0065\u0074\u0068\u006f\u0064\u0020\u0069\u006e\u0073\u0074\u0065\u0061\u0064\u002e");
return _eaea ;};_eaea =_afcc .buildList (_febab ,_fbfg ._cfee );};return _eaea ;};func (_aceb rulingList )asTiling ()gridTiling {if _cafd {_fc .Log .Info ("r\u0075\u006ci\u006e\u0067\u004c\u0069\u0073\u0074\u002e\u0061\u0073\u0054\u0069\u006c\u0069\u006e\u0067\u003a\u0020\u0076\u0065\u0063s\u003d\u0025\u0064\u0020\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d=\u003d\u003d\u003d\u003d\u003d\u002b\u002b\u002b\u0020\u003d\u003d\u003d\u003d=\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d=\u003d",len (_aceb ));
};for _fbbb ,_accca :=range _aceb [1:]{_acfag :=_aceb [_fbbb ];if _acfag .alignsPrimary (_accca )&&_acfag .alignsSec (_accca ){_fc .Log .Error ("a\u0073\u0054\u0069\u006c\u0069\u006e\u0067\u003a\u0020\u0044\u0075\u0070\u006c\u0069\u0063\u0061\u0074\u0065 \u0072\u0075\u006c\u0069\u006e\u0067\u0073\u002e\u000a\u0009v=\u0025\u0073\u000a\t\u0077=\u0025\u0073",_accca ,_acfag );
};};_aceb .sortStrict ();_aceb .log ("\u0073n\u0061\u0070\u0070\u0065\u0064");_bagcde ,_bcff :=_aceb .vertsHorzs ();_faec :=_bagcde .primaries ();_aebc :=_bcff .primaries ();_egbdg :=len (_faec )-1;_aagce :=len (_aebc )-1;if _egbdg ==0||_aagce ==0{return gridTiling {};
};_cafae :=_ea .PdfRectangle {Llx :_faec [0],Urx :_faec [_egbdg ],Lly :_aebc [0],Ury :_aebc [_aagce ]};if _cafd {_fc .Log .Info ("\u0072\u0075l\u0069\u006e\u0067\u004c\u0069\u0073\u0074\u002e\u0061\u0073\u0054\u0069\u006c\u0069\u006e\u0067\u003a\u0020\u0076\u0065\u0072\u0074s=\u0025\u0064",len (_bagcde ));
for _abef ,_ggbab :=range _bagcde {_cf .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0073\u000a",_abef ,_ggbab );};_fc .Log .Info ("\u0072\u0075l\u0069\u006e\u0067\u004c\u0069\u0073\u0074\u002e\u0061\u0073\u0054\u0069\u006c\u0069\u006e\u0067\u003a\u0020\u0068\u006f\u0072\u007as=\u0025\u0064",len (_bcff ));
for _efag ,_fgeee :=range _bcff {_cf .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0073\u000a",_efag ,_fgeee );};_fc .Log .Info ("\u0072\u0075\u006c\u0069\u006eg\u004c\u0069\u0073\u0074\u002e\u0061\u0073\u0054\u0069\u006c\u0069\u006e\u0067:\u0020\u0020\u0077\u0078\u0068\u003d\u0025\u0064\u0078\u0025\u0064\u000a\u0009\u006c\u006c\u0078\u003d\u0025\u002e\u0032\u0066\u000a\u0009\u006c\u006c\u0079\u003d\u0025\u002e\u0032f",_egbdg ,_aagce ,_faec ,_aebc );
};_beea :=make ([]gridTile ,_egbdg *_aagce );for _aebcg :=_aagce -1;_aebcg >=0;_aebcg --{_aabbg :=_aebc [_aebcg ];_agcb :=_aebc [_aebcg +1];for _aggda :=0;_aggda < _egbdg ;_aggda ++{_cdfae :=_faec [_aggda ];_cfag :=_faec [_aggda +1];_ddca :=_bagcde .findPrimSec (_cdfae ,_aabbg );
_cebec :=_bagcde .findPrimSec (_cfag ,_aabbg );_fddd :=_bcff .findPrimSec (_aabbg ,_cdfae );_gfbg :=_bcff .findPrimSec (_agcb ,_cdfae );_cacae :=_ea .PdfRectangle {Llx :_cdfae ,Urx :_cfag ,Lly :_aabbg ,Ury :_agcb };_gfdbb :=_bbfb (_cacae ,_ddca ,_cebec ,_fddd ,_gfbg );
_beea [_aebcg *_egbdg +_aggda ]=_gfdbb ;if _cafd {_cf .Printf ("\u0020\u0020\u0078\u003d\u0025\u0032\u0064\u0020\u0079\u003d\u0025\u0032\u0064\u003a\u0020%\u0073 \u0025\u0036\u002e\u0032\u0066\u0020\u0078\u0020\u0025\u0036\u002e\u0032\u0066\u000a",_aggda ,_aebcg ,_gfdbb .String (),_gfdbb .Width (),_gfdbb .Height ());
};};};if _cafd {_fc .Log .Info ("r\u0075\u006c\u0069\u006e\u0067\u004c\u0069\u0073\u0074.\u0061\u0073\u0054\u0069\u006c\u0069\u006eg:\u0020\u0063\u006f\u0061l\u0065\u0073\u0063\u0065\u0020\u0068\u006f\u0072\u0069zo\u006e\u0074a\u006c\u002e\u0020\u0025\u0036\u002e\u0032\u0066",_cafae );
};_bffgc :=make ([]map[float64 ]gridTile ,_aagce );for _bddaf :=_aagce -1;_bddaf >=0;_bddaf --{if _cafd {_cf .Printf ("\u0020\u0020\u0079\u003d\u0025\u0032\u0064\u000a",_bddaf );};_bffgc [_bddaf ]=make (map[float64 ]gridTile ,_egbdg );for _faeb :=0;_faeb < _egbdg ;
_faeb ++{_cadaa :=_beea [_bddaf *_egbdg +_faeb ];if _cafd {_cf .Printf ("\u0020\u0020\u0025\u0034\u0064\u003a\u0020\u0025\u0073\u000a",_faeb ,_cadaa );};if !_cadaa ._cafgb {continue ;};_acccb :=_faeb ;for _aaaac :=_faeb +1;!_cadaa ._gcgff &&_aaaac < _egbdg ;
_aaaac ++{_fccad :=_beea [_bddaf *_egbdg +_aaaac ];_cadaa .Urx =_fccad .Urx ;_cadaa ._ddba =_cadaa ._ddba ||_fccad ._ddba ;_cadaa ._beag =_cadaa ._beag ||_fccad ._beag ;_cadaa ._gcgff =_fccad ._gcgff ;if _cafd {_cf .Printf ("\u0020 \u0020%\u0034\u0064\u003a\u0020\u0025s\u0020\u2192 \u0025\u0073\u000a",_aaaac ,_fccad ,_cadaa );
};_acccb =_aaaac ;};if _cafd {_cf .Printf (" \u0020 \u0025\u0032\u0064\u0020\u002d\u0020\u0025\u0032d\u0020\u2192\u0020\u0025s\n",_faeb ,_acccb ,_cadaa );};_faeb =_acccb ;_bffgc [_bddaf ][_cadaa .Llx ]=_cadaa ;};};_gefc :=make (map[float64 ]map[float64 ]gridTile ,_aagce );
_fgbc :=make (map[float64 ]map[float64 ]struct{},_aagce );for _cggb :=_aagce -1;_cggb >=0;_cggb --{_bcca :=_beea [_cggb *_egbdg ].Lly ;_gefc [_bcca ]=make (map[float64 ]gridTile ,_egbdg );_fgbc [_bcca ]=make (map[float64 ]struct{},_egbdg );};if _cafd {_fc .Log .Info ("\u0072u\u006c\u0069n\u0067\u004c\u0069s\u0074\u002e\u0061\u0073\u0054\u0069\u006ci\u006e\u0067\u003a\u0020\u0063\u006fa\u006c\u0065\u0073\u0063\u0065\u0020\u0076\u0065\u0072\u0074\u0069c\u0061\u006c\u002e\u0020\u0025\u0036\u002e\u0032\u0066",_cafae );
};for _afad :=_aagce -1;_afad >=0;_afad --{_dccbg :=_beea [_afad *_egbdg ].Lly ;_gdcff :=_bffgc [_afad ];if _cafd {_cf .Printf ("\u0020\u0020\u0079\u003d\u0025\u0032\u0064\u000a",_afad );};for _ ,_defg :=range _decc (_gdcff ){if _ ,_gecg :=_fgbc [_dccbg ][_defg ];
_gecg {continue ;};_deab :=_gdcff [_defg ];if _cafd {_cf .Printf (" \u0020\u0020\u0020\u0020\u0076\u0030\u003d\u0025\u0073\u000a",_deab .String ());};for _cdbd :=_afad -1;_cdbd >=0;_cdbd --{if _deab ._beag {break ;};_fbfd :=_bffgc [_cdbd ];_deeadb ,_eaaf :=_fbfd [_defg ];
if !_eaaf {break ;};if _deeadb .Urx !=_deab .Urx {break ;};_deab ._beag =_deeadb ._beag ;_deab .Lly =_deeadb .Lly ;if _cafd {_cf .Printf ("\u0020\u0020\u0020\u0020  \u0020\u0020\u0076\u003d\u0025\u0073\u0020\u0076\u0030\u003d\u0025\u0073\u000a",_deeadb .String (),_deab .String ());
};_fgbc [_deeadb .Lly ][_deeadb .Llx ]=struct{}{};};if _afad ==0{_deab ._beag =true ;};if _deab .complete (){_gefc [_dccbg ][_defg ]=_deab ;};};};_fagc :=gridTiling {PdfRectangle :_cafae ,_bebae :_dcbae (_gefc ),_edgab :_fecg (_gefc ),_bafg :_gefc };_fagc .log ("\u0043r\u0065\u0061\u0074\u0065\u0064");
return _fagc ;};