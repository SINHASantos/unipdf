//
// Copyright 2020 FoxyUtils ehf. All rights reserved.
//
// This is a commercial product and requires a license to operate.
// A trial license can be obtained at https://unidoc.io
//
// DO NOT EDIT: generated by unitwist Go source code obfuscator.
//
// Use of this source code is governed by the UniDoc End User License Agreement
// terms that can be accessed at https://unidoc.io/eula/

// Package extractor is used for quickly extracting PDF content through a simple interface.
// Currently offers functionality for extracting textual content.
package extractor ;import (_a "bytes";_cbb "errors";_be "fmt";_d "github.com/unidoc/unipdf/v4/common";_cb "github.com/unidoc/unipdf/v4/contentstream";_eec "github.com/unidoc/unipdf/v4/core";_b "github.com/unidoc/unipdf/v4/internal/license";_g "github.com/unidoc/unipdf/v4/internal/textencoding";
_fgb "github.com/unidoc/unipdf/v4/internal/transform";_da "github.com/unidoc/unipdf/v4/model";_f "golang.org/x/image/draw";_ee "golang.org/x/text/unicode/norm";_ad "image";_dd "image/color";_df "io";_fc "math";_dg "reflect";_fg "regexp";_ef "sort";_db "strings";
_cf "unicode";_c "unicode/utf8";);func (_fcc *wordBag )firstReadingIndex (_afbg int )int {_begbg :=_fcc .firstWord (_afbg )._gaadd ;_dfgd :=float64 (_afbg +1)*_cgef ;_ffab :=_dfgd +_dffg *_begbg ;_abdgc :=_afbg ;for _ ,_ggfbg :=range _fcc .depthBand (_dfgd ,_ffab ){if _efbe (_fcc .firstWord (_ggfbg ),_fcc .firstWord (_abdgc ))< 0{_abdgc =_ggfbg ;
};};return _abdgc ;};func (_ffae rulingList )toTilings ()(rulingList ,[]gridTiling ){_ffae .log ("\u0074o\u0054\u0069\u006c\u0069\u006e\u0067s");if len (_ffae )==0{return nil ,nil ;};_ffae =_ffae .tidied ("\u0061\u006c\u006c");_ffae .log ("\u0074\u0069\u0064\u0069\u0065\u0064");
_edcedg :=_ffae .toGrids ();_ffadf :=make ([]gridTiling ,len (_edcedg ));for _affcb ,_gdfcc :=range _edcedg {_ffadf [_affcb ]=_gdfcc .asTiling ();};return _ffae ,_ffadf ;};

// Match defines the structure for each match, including pattern, indexes, and locations.
type Match struct{Pattern string ;Indexes [][]int ;Locations []Box ;};func (_cdbg *textTable )reduce ()*textTable {_adgdd :=make ([]int ,0,_cdbg ._caed );_egcgb :=make ([]int ,0,_cdbg ._dgead );for _ccded :=0;_ccded < _cdbg ._caed ;_ccded ++{if !_cdbg .emptyCompositeRow (_ccded ){_adgdd =append (_adgdd ,_ccded );
};};for _fead :=0;_fead < _cdbg ._dgead ;_fead ++{if !_cdbg .emptyCompositeColumn (_fead ){_egcgb =append (_egcgb ,_fead );};};if len (_adgdd )==_cdbg ._caed &&len (_egcgb )==_cdbg ._dgead {return _cdbg ;};_agfeg :=textTable {_gdba :_cdbg ._gdba ,_dgead :len (_egcgb ),_caed :len (_adgdd ),_gbcde :make (map[uint64 ]*textPara ,len (_egcgb )*len (_adgdd ))};
if _dgbg {_d .Log .Info ("\u0072\u0065\u0064\u0075ce\u003a\u0020\u0025\u0064\u0078\u0025\u0064\u0020\u002d\u003e\u0020\u0025\u0064\u0078%\u0064",_cdbg ._dgead ,_cdbg ._caed ,len (_egcgb ),len (_adgdd ));_d .Log .Info ("\u0072\u0065d\u0075\u0063\u0065d\u0043\u006f\u006c\u0073\u003a\u0020\u0025\u002b\u0076",_egcgb );
_d .Log .Info ("\u0072\u0065d\u0075\u0063\u0065d\u0052\u006f\u0077\u0073\u003a\u0020\u0025\u002b\u0076",_adgdd );};for _edfbdf ,_fbacg :=range _adgdd {for _ddab ,_cagce :=range _egcgb {_bgfg ,_begdg :=_cdbg .getComposite (_cagce ,_fbacg );if _bgfg ==nil {continue ;
};if _dgbg {_be .Printf ("\u0020 \u0025\u0032\u0064\u002c \u0025\u0032\u0064\u0020\u0028%\u0032d\u002c \u0025\u0032\u0064\u0029\u0020\u0025\u0071\n",_ddab ,_edfbdf ,_cagce ,_fbacg ,_aagbb (_bgfg .merge ().text (),50));};_agfeg .putComposite (_ddab ,_edfbdf ,_bgfg ,_begdg );
};};return &_agfeg ;};func (_bgdg compositeCell )hasLines (_aeae []*textLine )bool {for _ecca ,_dcbfb :=range _aeae {_bbfd :=_aafgc (_bgdg .PdfRectangle ,_dcbfb .PdfRectangle );if _dgbg {_be .Printf ("\u0020\u0020\u0020\u0020\u0020\u0020\u005e\u005e\u005e\u0069\u006e\u0074\u0065\u0072\u0073e\u0063t\u0073\u003d\u0025\u0074\u0020\u0025\u0064\u0020\u006f\u0066\u0020\u0025\u0064\u000a",_bbfd ,_ecca ,len (_aeae ));
_be .Printf ("\u0020\u0020\u0020\u0020  \u005e\u005e\u005e\u0063\u006f\u006d\u0070\u006f\u0073\u0069\u0074\u0065\u003d\u0025s\u000a",_bgdg );_be .Printf ("\u0020 \u0020 \u0020\u0020\u0020\u006c\u0069\u006e\u0065\u003d\u0025\u0073\u000a",_dcbfb );};if _bbfd {return true ;
};};return false ;};

// Options extractor options.
type Options struct{

// DisableDocumentTags specifies whether to use the document tags during list extraction.
DisableDocumentTags bool ;

// ApplyCropBox will extract page text based on page cropbox if set to `true`.
ApplyCropBox bool ;

// Text extraction mode, default is ExtractionModeLayout.
ExtractionMode ExtractionMode ;

// IncludeAnnotations specifies whether to include annotations in the extraction process, default value is `false`.
IncludeAnnotations bool ;

// RelaxedMode specifies whether to use relaxed mode for processing the objects,
// If enabled UniPDF will automatically try to fix invalid parameters length and value.
// Default is `false`.
RelaxedMode bool ;};var _eace string ="\u0028\u003f\u0069\u0029\u005e\u0028\u004d\u007b\u0030\u002c\u0033\u007d\u0029\u0028\u0043\u0028?\u003a\u0044\u007cM\u0029\u007c\u0044\u003f\u0043{\u0030\u002c\u0033\u007d\u0029\u0028\u0058\u0028\u003f\u003a\u004c\u007c\u0043\u0029\u007cL\u003f\u0058\u007b\u0030\u002c\u0033}\u0029\u0028\u0049\u0028\u003f\u003a\u0056\u007c\u0058\u0029\u007c\u0056\u003f\u0049\u007b\u0030\u002c\u0033\u007d\u0029\u0028\u005c\u0029\u007c\u005c\u002e\u0029\u007c\u005e\u005c\u0028\u0028\u004d\u007b\u0030\u002c\u0033\u007d\u0029\u0028\u0043\u0028\u003f\u003aD\u007cM\u0029\u007c\u0044\u003f\u0043\u007b\u0030\u002c\u0033\u007d\u0029\u0028\u0058\u0028?\u003a\u004c\u007c\u0043\u0029\u007c\u004c?\u0058\u007b0\u002c\u0033\u007d\u0029(\u0049\u0028\u003f\u003a\u0056|\u0058\u0029\u007c\u0056\u003f\u0049\u007b\u0030\u002c\u0033\u007d\u0029\u005c\u0029";
func (_fdegfa rulingList )findPrimSec (_fcad ,_bada float64 )*ruling {for _ ,_ggae :=range _fdegfa {if _gcdba (_ggae ._dfga -_fcad )&&_ggae ._fbed -_agc <=_bada &&_bada <=_ggae ._edbbe +_agc {return _ggae ;};};return nil ;};func _gece (_agcc *list ,_cabda *_db .Builder ,_fbgb *string ){_aecg :=_edfb (_agcc ,_fbgb );
_cabda .WriteString (_aecg );for _ ,_fdd :=range _agcc ._bebaa {_afdd :=*_fbgb +"\u0020\u0020\u0020";_gece (_fdd ,_cabda ,&_afdd );};};func _aabg (_eeafe map[int ][]float64 )[]int {_cdecc :=make ([]int ,len (_eeafe ));_ffbge :=0;for _geff :=range _eeafe {_cdecc [_ffbge ]=_geff ;
_ffbge ++;};_ef .Ints (_cdecc );return _cdecc ;};func (_dbbf rulingList )primaries ()[]float64 {_ecabd :=make (map[float64 ]struct{},len (_dbbf ));for _ ,_ecaf :=range _dbbf {_ecabd [_ecaf ._dfga ]=struct{}{};};_cegea :=make ([]float64 ,len (_ecabd ));
_bfca :=0;for _gfabfd :=range _ecabd {_cegea [_bfca ]=_gfabfd ;_bfca ++;};_ef .Float64s (_cegea );return _cegea ;};

// String returns a description of `state`.
func (_adad *textState )String ()string {_fafe :="\u005bN\u004f\u0054\u0020\u0053\u0045\u0054]";if _adad ._abde !=nil {_fafe =_adad ._abde .BaseFont ();};return _be .Sprintf ("\u0074\u0063\u003d\u0025\u002e\u0032\u0066\u0020\u0074\u0077\u003d\u0025\u002e\u0032\u0066 \u0074f\u0073\u003d\u0025\u002e\u0032\u0066\u0020\u0066\u006f\u006e\u0074\u003d\u0025\u0071",_adad ._bgcg ,_adad ._gccd ,_adad ._beea ,_fafe );
};func (_gac compositeCell )parasBBox ()(paraList ,_da .PdfRectangle ){return _gac .paraList ,_gac .PdfRectangle ;};func _dbcb (_efbd *TextMarkArray ,_fcd *string ,_acb *int ,_gae string )error {var _babf TextMark ;for _ ,_cafg :=range _efbd .Elements (){_fed :=_cafg .Text ;
_gcdeb :=_cafg .Font ;_efbaf :="";_agda :=*_fcd ;if len (_agda )> *_acb {_efbaf =_agda [*_acb :*_acb +len (_fed )];}else if *_acb ==len (_gae )-1&&len (_agda )> *_acb {_efbaf =_agda [*_acb :];};_bef :=_cafg .DirectObject ;if _bef ==nil &&_cafg .Text =="\u0020"{_gcc :=_babf .ObjString ;
_gbca :=_gcc [len (_gcc )-1];if _gbca !=_cafg .Text {_bef =_babf .DirectObject ;_gcdeb =_babf .Font ;_bbg ,_geeb :=_eec .GetString (_bef );if !_geeb {return _be .Errorf ("\u0075n\u0061\u0062l\u0065\u0020\u0074\u006f \u0067\u0065\u0074 \u0073\u0074\u0072\u0069\u006e\u0067\u0020\u0042\u0079te\u0073\u0020\u0066r\u006f\u006d \u0064\u0069\u0072\u0065\u0063\u0074O\u0062\u006ae\u0063\u0074");
};_gbf ,_geeb :=_eec .GetStringBytes (_bef );if !_geeb {return _eec .ErrTypeError ;};_gcdf :=_eab (_gbf ,_gcdeb );_efbaf =_gcdf +_efbaf ;_befc (_bbg ,_efbaf ,_gcdeb );*_acb +=len (_fed );continue ;};};_cadb ,_fdb :=_eec .GetString (_bef );if !_fdb {return _be .Errorf ("\u0075n\u0061\u0062l\u0065\u0020\u0074\u006f \u0067\u0065\u0074 \u0073\u0074\u0072\u0069\u006e\u0067\u0020\u0042\u0079te\u0073\u0020\u0066r\u006f\u006d \u0064\u0069\u0072\u0065\u0063\u0074O\u0062\u006ae\u0063\u0074");
};_cfbg :="";_cgge ,_fdb :=_eec .GetStringBytes (_bef );if !_fdb {return _eec .ErrTypeError ;};_gbbf :=_eab (_cgge ,_gcdeb );_cfbg =_db .Replace (_gbbf ,_fed ,_efbaf ,1);_befc (_cadb ,_cfbg ,_gcdeb );*_acb +=len (_fed );_babf =_cafg ;};return nil ;};func (_acdeg paraList )findGridTables (_cafcb []gridTiling )[]*textTable {if _dgbg {_d .Log .Info ("\u0066i\u006e\u0064\u0047\u0072\u0069\u0064\u0054\u0061\u0062\u006c\u0065s\u003a\u0020\u0025\u0064\u0020\u0070\u0061\u0072\u0061\u0073",len (_acdeg ));
for _gefda ,_bdfed :=range _acdeg {_be .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0073\u000a",_gefda ,_bdfed );};};var _ecfg []*textTable ;for _fagb ,_bddc :=range _cafcb {_bffa ,_fgfede :=_acdeg .findTableGrid (_bddc );if _bffa !=nil {_bffa .log (_be .Sprintf ("\u0066\u0069\u006e\u0064Ta\u0062\u006c\u0065\u0057\u0069\u0074\u0068\u0047\u0072\u0069\u0064\u0073\u003a\u0020%\u0064",_fagb ));
_ecfg =append (_ecfg ,_bffa );_bffa .markCells ();};for _fdaeg :=range _fgfede {_fdaeg ._fgce =true ;};};if _dgbg {_d .Log .Info ("\u0066i\u006e\u0064\u0047\u0072i\u0064\u0054\u0061\u0062\u006ce\u0073:\u0020%\u0064\u0020\u0074\u0061\u0062\u006c\u0065s",len (_ecfg ));
};return _ecfg ;};func (_cccbg paraList )sortTopoOrder (){_abbga :=_cccbg .topoOrder ();_cccbg .reorder (_abbga )};type imageExtractContext struct{_eefc []ImageMark ;_cecc int ;_gfa int ;_bcbf int ;_bgb map[*_eec .PdfObjectStream ]*cachedImage ;_aec *ImageExtractOptions ;
_bga bool ;};func _dceb (_babaa bounded )float64 {return -_babaa .bbox ().Lly };func (_aagc *textLine )endsInHyphen ()bool {_eddd :=_aagc ._cdde [len (_aagc ._cdde )-1];_aagg :=_eddd ._gdcecg ;_ebda ,_gedd :=_c .DecodeLastRuneInString (_aagg );if _gedd <=0||!_cf .Is (_cf .Hyphen ,_ebda ){return false ;
};if _eddd ._edeb &&_fbfb (_aagg ){return true ;};return _fbfb (_aagc .text ());};func (_edccb paraList )findTableGrid (_bbee gridTiling )(*textTable ,map[*textPara ]struct{}){_ggfdc :=len (_bbee ._agaeb );_cbadf :=len (_bbee ._gbbd );_cggeg :=textTable {_gdba :true ,_dgead :_ggfdc ,_caed :_cbadf ,_gbcde :make (map[uint64 ]*textPara ,_ggfdc *_cbadf ),_cfee :make (map[uint64 ]compositeCell ,_ggfdc *_cbadf )};
_cggeg .PdfRectangle =_bbee .PdfRectangle ;_baefg :=make (map[*textPara ]struct{});_bace :=int ((1.0-_acdd )*float64 (_ggfdc *_cbadf ));_afgbf :=0;if _ceec {_d .Log .Info ("\u0066\u0069\u006e\u0064Ta\u0062\u006c\u0065\u0047\u0072\u0069\u0064\u003a\u0020\u0025\u0064\u0020\u0078\u0020%\u0064",_ggfdc ,_cbadf );
};for _fbcfe ,_becdd :=range _bbee ._gbbd {_adfeb ,_aeggad :=_bbee ._gbaa [_becdd ];if !_aeggad {continue ;};for _aeag ,_ecbea :=range _bbee ._agaeb {_ccgcc ,_gbfcce :=_adfeb [_ecbea ];if !_gbfcce {continue ;};_gabaa :=_edccb .inTile (_ccgcc );if len (_gabaa )==0{_afgbf ++;
if _afgbf > _bace {if _ceec {_d .Log .Info ("\u0021\u006e\u0075m\u0045\u006d\u0070\u0074\u0079\u003d\u0025\u0064",_afgbf );};return nil ,nil ;};}else {_cggeg .putComposite (_aeag ,_fbcfe ,_gabaa ,_ccgcc .PdfRectangle );for _ ,_ggde :=range _gabaa {_baefg [_ggde ]=struct{}{};
};};};};_abae :=0;for _aegbb :=0;_aegbb < _ggfdc ;_aegbb ++{_acege :=_cggeg .get (_aegbb ,0);if _acege ==nil ||!_acege ._eeaf {_abae ++;};};if _abae ==0{if _ceec {_d .Log .Info ("\u0021\u006e\u0075m\u0048\u0065\u0061\u0064\u0065\u0072\u003d\u0030");};return nil ,nil ;
};_egeef :=_cggeg .reduceTiling (_bbee ,_gfdc );_egeef =_egeef .subdivide ();return _egeef ,_baefg ;};type rectRuling struct{_edcgc rulingKind ;_eefa markKind ;_dd .Color ;_da .PdfRectangle ;};func (_gecdf *textTable )computeBbox ()_da .PdfRectangle {var _gbda _da .PdfRectangle ;
_fbccf :=false ;for _cbgdf :=0;_cbgdf < _gecdf ._caed ;_cbgdf ++{for _bfbef :=0;_bfbef < _gecdf ._dgead ;_bfbef ++{_fdga :=_gecdf .get (_bfbef ,_cbgdf );if _fdga ==nil {continue ;};if !_fbccf {_gbda =_fdga .PdfRectangle ;_fbccf =true ;}else {_gbda =_aea (_gbda ,_fdga .PdfRectangle );
};};};return _gbda ;};func (_baee *wordBag )absorb (_dfgg *wordBag ){_cbfd :=_dfgg .makeRemovals ();for _aaed ,_fged :=range _dfgg ._dgfd {for _ ,_acgc :=range _fged {_baee .pullWord (_acgc ,_aaed ,_cbfd );};};_dfgg .applyRemovals (_cbfd );};func (_bfcba *PageText )getText ()string {_daee :="";
_eedc :=len (_bfcba ._fefg );for _bcdf :=0;_bcdf < 360&&_eedc > 0;_bcdf +=90{_gagbf :=make ([]*textMark ,0,len (_bfcba ._fefg )-_eedc );for _ ,_bgde :=range _bfcba ._fefg {if _bgde ._gcbc ==_bcdf {_gagbf =append (_gagbf ,_bgde );};};if len (_gagbf )> 0{_daee +=_geed (_gagbf ,_bfcba ._ded );
_eedc -=len (_gagbf );};};return _daee ;};

// ToText returns the page text as a single string.
// Deprecated: This function is deprecated and will be removed in a future major version. Please use
// Text() instead.
func (_bbacc PageText )ToText ()string {return _bbacc .Text ()};func (_efab *Extractor )extractPageText (_aed string ,_feda *_da .PdfPageResources ,_bgcc _fgb .Matrix ,_fcg int ,_fegd bool )(*PageText ,int ,int ,error ){_d .Log .Trace ("\u0065x\u0074\u0072\u0061\u0063t\u0050\u0061\u0067\u0065\u0054e\u0078t\u003a \u006c\u0065\u0076\u0065\u006c\u003d\u0025d",_fcg );
_ddb :=&PageText {_ded :_efab ._ccd ,_ddbbb :_efab ._ffbg ,_edbf :_efab ._fde };_baf :=_aeggd (_efab ._ccd );var _fedg stateStack ;_gaff :=_cbce (_efab ,_feda ,_cb .GraphicsState {},&_baf ,&_fedg );_gaa :=shapesState {_effe :_bgcc ,_ggfd :_fgb .IdentityMatrix (),_bead :_gaff };
var _eeg bool ;_egg :=-1;_beb :="";if _fcg > _bbca {_bdeb :=_cbb .New ("\u0066\u006f\u0072\u006d s\u0074\u0061\u0063\u006b\u0020\u006f\u0076\u0065\u0072\u0066\u006c\u006f\u0077");_d .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a \u0065\u0078\u0074\u0072\u0061\u0063\u0074\u0050\u0061\u0067\u0065\u0054\u0065\u0078\u0074\u002e\u0020\u0072\u0065\u0063u\u0072\u0073\u0069\u006f\u006e\u0020\u006c\u0065\u0076\u0065\u006c\u003d\u0025\u0064 \u0065r\u0072\u003d\u0025\u0076",_fcg ,_bdeb );
return _ddb ,_baf ._agbd ,_baf ._bcdd ,_bdeb ;};_efg :=_cb .NewContentStreamParser (_aed );_fcba ,_gcca :=_efg .Parse ();if _gcca !=nil {_d .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020e\u0078\u0074\u0072a\u0063\u0074\u0050\u0061g\u0065\u0054\u0065\u0078\u0074\u0020\u0070\u0061\u0072\u0073\u0065\u0020\u0066\u0061\u0069\u006c\u0065\u0064\u002e\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_gcca );
return _ddb ,_baf ._agbd ,_baf ._bcdd ,_gcca ;};_ddb ._efae =_fcba ;_eabe :=_cb .NewContentStreamProcessor (*_fcba );if _efab ._affe !=nil {_eabe .SetRelaxedMode (_efab ._affe .RelaxedMode );};_eabe .AddHandler (_cb .HandlerConditionEnumAllOperands ,"",func (_ecf *_cb .ContentStreamOperation ,_eba _cb .GraphicsState ,_faa *_da .PdfPageResources )error {_dfb :=_ecf .Operand ;
if _cefd {_d .Log .Info ("\u0026&\u0026\u0020\u006f\u0070\u003d\u0025s",_ecf );};switch _dfb {case "\u0071":if _fbdb {_d .Log .Info ("\u0063\u0074\u006d\u003d\u0025\u0073",_gaa ._ggfd );};_fedg .push (&_baf );case "\u0051":if !_fedg .empty (){_baf =*_fedg .pop ();
};_gaa ._ggfd =_eba .CTM ;if _fbdb {_d .Log .Info ("\u0063\u0074\u006d\u003d\u0025\u0073",_gaa ._ggfd );};case "\u0042\u0044\u0043":_gga ,_faeg :=_eec .GetDict (_ecf .Params [1]);if !_faeg {_d .Log .Debug ("\u0045\u0052\u0052O\u0052\u003a\u0020\u0042D\u0043\u0020\u006f\u0070\u003d\u0025\u0073 \u0047\u0065\u0074\u0044\u0069\u0063\u0074\u0020\u0066\u0061\u0069\u006c\u0065\u0064",_ecf );
return _gcca ;};_bbb :=_gga .Get ("\u004d\u0043\u0049\u0044");if _bbb !=nil {_dad ,_gfbg :=_eec .GetIntVal (_bbb );if !_gfbg {_d .Log .Debug ("\u0045R\u0052\u004fR\u003a\u0020\u0042\u0044C\u0020\u006f\u0070=\u0025\u0073\u002e\u0020\u0042\u0061\u0064\u0020\u006eum\u0065\u0072\u0069c\u0061\u006c \u006f\u0062\u006a\u0065\u0063\u0074.\u0020\u006f=\u0025\u0073",_ecf ,_bbb );
};_egg =_dad ;}else {_egg =-1;};if _efab ._ffbg !=nil &&_egg !=-1&&_efab ._bag !=-1&&_efab ._ffbg .ParentTree !=nil {_fcff :=_efab ._bag ;var _dbfd func (_fdbc []*_da .KValue )bool ;_dbfd =func (_geg []*_da .KValue )bool {for _ ,_baba :=range _geg {if _gcf :=_baba .GetKDict ();
_gcf !=nil {_cdfg :=_gcf .GetChildren ();if len (_cdfg )==1&&_cdfg [0].GetMCID ()!=nil {if *_cdfg [0].GetMCID ()==_egg {if _gcf .ActualText !=nil {_beb =_db .TrimSpace (_gcf .ActualText .Str ());return true ;};return false ;};}else {return _dbfd (_cdfg );
};};};return false ;};if _bbbg :=_efab ._ffbg .ParentTree .Get ("\u004e\u0075\u006d\u0073");_bbbg !=nil {_bagg ,_aaa :=_eec .GetArray (_bbbg );if !_aaa {_d .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0042\u0044\u0043\u0020\u006f\u0070\u003d\u0025\u0073\u002e\u0020\u0042\u0061\u0064\u0020\u004e\u0075m\u0073\u0020\u0061\u0072\u0072a\u0079\u002e \u006f\u003d\u0025\u0073",_ecf ,_bbbg );
}else {for _ffd :=0;_ffd < _bagg .Len ();_ffd +=2{if _egga ,_gcff :=_eec .GetInt (_bagg .Get (_ffd ));_gcff {if int (*_egga )==_fcff {if _gaaa :=_bagg .Get (_ffd +1);_gaaa !=nil {if _fbg ,_gcg :=_eec .GetArray (_gaaa );_gcg {for _ ,_bdge :=range _fbg .Elements (){_ede ,_fbbd :=_da .NewKDictFromPdfObject (_bdge );
if _fbbd !=nil {_d .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a \u0042\u0044\u0043\u0020\u006f\u0070\u003d\u0025\u0073\u002e\u0020\u0042\u0061d\u0020\u004b\u0044\u0069\u0063\u0074\u002e \u006f\u003d\u0025\u0073",_ecf ,_bdge );continue ;};_fdc :=_ede .GetChildren ();
if len (_fdc )==1&&_fdc [0].GetMCID ()!=nil {if *_fdc [0].GetMCID ()==_egg {if _ede .ActualText !=nil {_beb =_db .TrimSpace (_ede .ActualText .Str ());};break ;}else if _dbfd (_fdc ){break ;};};};};};};};};};};};if _beb ==""{_begfc :=_gga .Get ("\u0041\u0063\u0074\u0075\u0061\u006c\u0054\u0065\u0078\u0074");
if _begfc !=nil {_beb =_db .TrimSpace (_begfc .String ());};};case "\u0045\u004d\u0043":_egg =-1;_beb ="";case "\u0042\u0054":if _eeg {_d .Log .Debug ("\u0042\u0054\u0020\u0063\u0061\u006c\u006c\u0065\u0064\u0020\u0077\u0068\u0069\u006c\u0065 \u0069n\u0020\u0061\u0020\u0074\u0065\u0078\u0074\u0020\u006f\u0062\u006a\u0065\u0063\u0074");
_ddb ._fefg =append (_ddb ._fefg ,_gaff ._ffeg ...);};_eeg =true ;_deg :=_eba ;if _fegd {_deg =_cb .GraphicsState {};_deg .CTM =_gaa ._ggfd ;};_deg .CTM =_bgcc .Mult (_deg .CTM );_gaff =_cbce (_efab ,_faa ,_deg ,&_baf ,&_fedg );_gaa ._bead =_gaff ;case "\u0045\u0054":if !_eeg {_d .Log .Debug ("\u0045\u0054\u0020ca\u006c\u006c\u0065\u0064\u0020\u006f\u0075\u0074\u0073i\u0064e\u0020o\u0066 \u0061\u0020\u0074\u0065\u0078\u0074\u0020\u006f\u0062\u006a\u0065\u0063\u0074");
};_eeg =false ;_ddb ._fefg =append (_ddb ._fefg ,_gaff ._ffeg ...);_gaff .reset ();case "\u0054\u002a":_gaff .nextLine ();case "\u0054\u0064":if _ebce ,_bff :=_gaff .checkOp (_ecf ,2,true );!_ebce {_d .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_bff );
return _bff ;};_bbac ,_fgdf ,_gage :=_dadba (_ecf .Params );if _gage !=nil {return _gage ;};_gaff .moveText (_bbac ,_fgdf );case "\u0054\u0044":if _afa ,_cggc :=_gaff .checkOp (_ecf ,2,true );!_afa {_d .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_cggc );
return _cggc ;};_eca ,_babc ,_agdg :=_dadba (_ecf .Params );if _agdg !=nil {_d .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_agdg );return _agdg ;};_gaff .moveTextSetLeading (_eca ,_babc );case "\u0054\u006a":if _bcff ,_cga :=_gaff .checkOp (_ecf ,1,true );
!_bcff {_d .Log .Debug ("\u0045\u0052\u0052\u004fR:\u0020\u0054\u006a\u0020\u006f\u0070\u003d\u0025\u0073\u0020\u0065\u0072\u0072\u003d%\u0076",_ecf ,_cga );return _cga ;};_egc :=_eec .TraceToDirectObject (_ecf .Params [0]);_bfea ,_cgfg :=_eec .GetStringBytes (_egc );
if !_cgfg {_d .Log .Debug ("\u0045\u0052R\u004f\u0052\u003a\u0020T\u006a\u0020o\u0070\u003d\u0025\u0073\u0020\u0047\u0065\u0074S\u0074\u0072\u0069\u006e\u0067\u0042\u0079\u0074\u0065\u0073\u0020\u0066a\u0069\u006c\u0065\u0064",_ecf );return _eec .ErrTypeError ;
};return _gaff .showText (_egc ,_bfea ,_egg ,_beb );case "\u0054\u004a":if _bgg ,_acdb :=_gaff .checkOp (_ecf ,1,true );!_bgg {_d .Log .Debug ("\u0045\u0052R\u004f\u0052\u003a \u0054\u004a\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_acdb );return _acdb ;
};_bcc ,_ecda :=_eec .GetArray (_ecf .Params [0]);if !_ecda {_d .Log .Debug ("\u0045\u0052\u0052OR\u003a\u0020\u0054\u004a\u0020\u006f\u0070\u003d\u0025s\u0020G\u0065t\u0041r\u0072\u0061\u0079\u0056\u0061\u006c\u0020\u0066\u0061\u0069\u006c\u0065\u0064",_ecf );
return _gcca ;};return _gaff .showTextAdjusted (_bcc ,_egg ,_beb );case "\u0027":if _gfbc ,_edf :=_gaff .checkOp (_ecf ,1,true );!_gfbc {_d .Log .Debug ("\u0045R\u0052O\u0052\u003a\u0020\u0027\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_edf );return _edf ;
};_fega :=_eec .TraceToDirectObject (_ecf .Params [0]);_ccgc ,_geca :=_eec .GetStringBytes (_fega );if !_geca {_d .Log .Debug ("\u0045\u0052RO\u0052\u003a\u0020'\u0020\u006f\u0070\u003d%s \u0047et\u0053\u0074\u0072\u0069\u006e\u0067\u0042yt\u0065\u0073\u0020\u0066\u0061\u0069\u006ce\u0064",_ecf );
return _eec .ErrTypeError ;};_gaff .nextLine ();return _gaff .showText (_fega ,_ccgc ,_egg ,_beb );case "\u0022":if _gbba ,_cagc :=_gaff .checkOp (_ecf ,3,true );!_gbba {_d .Log .Debug ("\u0045R\u0052O\u0052\u003a\u0020\u0022\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_cagc );
return _cagc ;};_cffc ,_cbfb ,_cea :=_dadba (_ecf .Params [:2]);if _cea !=nil {return _cea ;};_gde :=_eec .TraceToDirectObject (_ecf .Params [2]);_aaf ,_cbbb :=_eec .GetStringBytes (_gde );if !_cbbb {_d .Log .Debug ("\u0045\u0052RO\u0052\u003a\u0020\"\u0020\u006f\u0070\u003d%s \u0047et\u0053\u0074\u0072\u0069\u006e\u0067\u0042yt\u0065\u0073\u0020\u0066\u0061\u0069\u006ce\u0064",_ecf );
return _eec .ErrTypeError ;};_gaff .setCharSpacing (_cffc );_gaff .setWordSpacing (_cbfb );_gaff .nextLine ();return _gaff .showText (_gde ,_aaf ,_egg ,_beb );case "\u0054\u004c":_cggf ,_badg :=_fbd (_ecf );if _badg !=nil {_d .Log .Debug ("\u0045\u0052R\u004f\u0052\u003a \u0054\u004c\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_badg );
return _badg ;};_gaff .setTextLeading (_cggf );case "\u0054\u0063":_fbfd ,_cecg :=_fbd (_ecf );if _cecg !=nil {_d .Log .Debug ("\u0045\u0052R\u004f\u0052\u003a \u0054\u0063\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_cecg );return _cecg ;};_gaff .setCharSpacing (_fbfd );
case "\u0054\u0066":if _bfde ,_cdea :=_gaff .checkOp (_ecf ,2,true );!_bfde {_d .Log .Debug ("\u0045\u0052R\u004f\u0052\u003a \u0054\u0066\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_cdea );return _cdea ;};_ecde ,_ccfe :=_eec .GetNameVal (_ecf .Params [0]);
if !_ccfe {_d .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a \u0054\u0066\u0020\u006f\u0070\u003d\u0025\u0073\u0020\u0047\u0065\u0074\u004ea\u006d\u0065\u0056\u0061\u006c\u0020\u0066a\u0069\u006c\u0065\u0064",_ecf );return _eec .ErrTypeError ;};_fedf ,_bce :=_eec .GetNumberAsFloat (_ecf .Params [1]);
if !_ccfe {_d .Log .Debug ("\u0045\u0052\u0052O\u0052\u003a\u0020\u0054\u0066\u0020\u006f\u0070\u003d\u0025\u0073\u0020\u0047\u0065\u0074\u0046\u006c\u006f\u0061\u0074\u0056\u0061\u006c\u0020\u0066\u0061\u0069\u006c\u0065d\u002e\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_ecf ,_bce );
return _bce ;};_bce =_gaff .setFont (_ecde ,_fedf );_gaff ._dggf =_cbb .Is (_bce ,_eec .ErrNotSupported );if _bce !=nil &&!_gaff ._dggf {return _bce ;};case "\u0054\u006d":if _beaa ,_gbfc :=_gaff .checkOp (_ecf ,6,true );!_beaa {_d .Log .Debug ("\u0045\u0052R\u004f\u0052\u003a \u0054\u006d\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_gbfc );
return _gbfc ;};_add ,_affec :=_eec .GetNumbersAsFloat (_ecf .Params );if _affec !=nil {_d .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_affec );return _affec ;};_gaff .setTextMatrix (_add );case "\u0054\u0072":if _eaf ,_fgf :=_gaff .checkOp (_ecf ,1,true );
!_eaf {_d .Log .Debug ("\u0045\u0052R\u004f\u0052\u003a \u0054\u0072\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_fgf );return _fgf ;};_aegg ,_degd :=_eec .GetIntVal (_ecf .Params [0]);if !_degd {_d .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0054\u0072\u0020\u006f\u0070\u003d\u0025\u0073 \u0047e\u0074\u0049\u006e\u0074\u0056\u0061\u006c\u0020\u0066\u0061\u0069\u006c\u0065\u0064",_ecf );
return _eec .ErrTypeError ;};_gaff .setTextRenderMode (_aegg );case "\u0054\u0073":if _ccff ,_dfe :=_gaff .checkOp (_ecf ,1,true );!_ccff {_d .Log .Debug ("\u0045\u0052R\u004f\u0052\u003a \u0054\u0073\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_dfe );return _dfe ;
};_cfbda ,_ebca :=_eec .GetNumberAsFloat (_ecf .Params [0]);if _ebca !=nil {_d .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_ebca );return _ebca ;};_gaff .setTextRise (_cfbda );case "\u0054\u0077":if _bbag ,_dfdc :=_gaff .checkOp (_ecf ,1,true );
!_bbag {_d .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_dfdc );return _dfdc ;};_bbgc ,_cebg :=_eec .GetNumberAsFloat (_ecf .Params [0]);if _cebg !=nil {_d .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_cebg );
return _cebg ;};_gaff .setWordSpacing (_bbgc );case "\u0054\u007a":if _ead ,_eddg :=_gaff .checkOp (_ecf ,1,true );!_ead {_d .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_eddg );return _eddg ;};_gagc ,_daa :=_eec .GetNumberAsFloat (_ecf .Params [0]);
if _daa !=nil {_d .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_daa );return _daa ;};_gaff .setHorizScaling (_gagc );case "\u0063\u006d":if !_fegd {_gaa ._ggfd =_eba .CTM ;};if _gaa ._ggfd .Singular (){_cfgg :=_fgb .IdentityMatrix ().Translate (_gaa ._ggfd .Translation ());
_d .Log .Debug ("S\u0069n\u0067\u0075\u006c\u0061\u0072\u0020\u0063\u0074m\u003d\u0025\u0073\u2192%s",_gaa ._ggfd ,_cfgg );_gaa ._ggfd =_cfgg ;};if _fbdb {_d .Log .Info ("\u0063\u0074\u006d\u003d\u0025\u0073",_gaa ._ggfd );};case "\u006d":if len (_ecf .Params )!=2{_d .Log .Debug ("\u0057\u0041\u0052\u004e\u003a\u0020\u0065\u0072\u0072o\u0072\u0020\u0077\u0068\u0069\u006c\u0065\u0020\u0070\u0072\u006f\u0063\u0065\u0073\u0073\u0069\u006e\u0067\u0020\u0060\u006d\u0060\u0020o\u0070\u0065r\u0061\u0074o\u0072\u003a\u0020\u0025\u0076\u002e\u0020\u004f\u0075\u0074\u0070\u0075\u0074 m\u0061\u0079\u0020\u0062\u0065\u0020\u0069\u006e\u0063o\u0072\u0072\u0065\u0063\u0074\u002e",_aff );
return nil ;};_ffa ,_ebab :=_eec .GetNumbersAsFloat (_ecf .Params );if _ebab !=nil {return _ebab ;};_gaa .moveTo (_ffa [0],_ffa [1]);case "\u006c":if len (_ecf .Params )!=2{_d .Log .Debug ("\u0057\u0041\u0052\u004e\u003a\u0020\u0065\u0072\u0072o\u0072\u0020\u0077\u0068\u0069\u006c\u0065\u0020\u0070\u0072\u006f\u0063\u0065\u0073\u0073\u0069\u006e\u0067\u0020\u0060\u006c\u0060\u0020o\u0070\u0065r\u0061\u0074o\u0072\u003a\u0020\u0025\u0076\u002e\u0020\u004f\u0075\u0074\u0070\u0075\u0074 m\u0061\u0079\u0020\u0062\u0065\u0020\u0069\u006e\u0063o\u0072\u0072\u0065\u0063\u0074\u002e",_aff );
return nil ;};_cfgf ,_gfg :=_eec .GetNumbersAsFloat (_ecf .Params );if _gfg !=nil {return _gfg ;};_gaa .lineTo (_cfgf [0],_cfgf [1]);case "\u0063":if len (_ecf .Params )!=6{return _aff ;};_bdfe ,_gfd :=_eec .GetNumbersAsFloat (_ecf .Params );if _gfd !=nil {return _gfd ;
};_d .Log .Debug ("\u0043u\u0062\u0069\u0063\u0020b\u0065\u007a\u0069\u0065\u0072 \u0070a\u0072a\u006d\u0073\u003a\u0020\u0025\u002e\u0032f",_bdfe );_gaa .cubicTo (_bdfe [0],_bdfe [1],_bdfe [2],_bdfe [3],_bdfe [4],_bdfe [5]);case "\u0076","\u0079":if len (_ecf .Params )!=4{return _aff ;
};_cfbac ,_ggfg :=_eec .GetNumbersAsFloat (_ecf .Params );if _ggfg !=nil {return _ggfg ;};_d .Log .Debug ("\u0043u\u0062\u0069\u0063\u0020b\u0065\u007a\u0069\u0065\u0072 \u0070a\u0072a\u006d\u0073\u003a\u0020\u0025\u002e\u0032f",_cfbac );_gaa .quadraticTo (_cfbac [0],_cfbac [1],_cfbac [2],_cfbac [3]);
case "\u0068":_gaa .closePath ();case "\u0072\u0065":if len (_ecf .Params )!=4{return _aff ;};_fgbb ,_gfab :=_eec .GetNumbersAsFloat (_ecf .Params );if _gfab !=nil {return _gfab ;};_gaa .drawRectangle (_fgbb [0],_fgbb [1],_fgbb [2],_fgbb [3]);_gaa .closePath ();
case "\u0053":_gaa .stroke (&_ddb ._gagcd );_gaa .clearPath ();case "\u0073":_gaa .closePath ();_gaa .stroke (&_ddb ._gagcd );_gaa .clearPath ();case "\u0046":_gaa .fill (&_ddb ._dbgff );_gaa .clearPath ();case "\u0066","\u0066\u002a":_gaa .closePath ();
_gaa .fill (&_ddb ._dbgff );_gaa .clearPath ();case "\u0042","\u0042\u002a":_gaa .fill (&_ddb ._dbgff );_gaa .stroke (&_ddb ._gagcd );_gaa .clearPath ();case "\u0062","\u0062\u002a":_gaa .closePath ();_gaa .fill (&_ddb ._dbgff );_gaa .stroke (&_ddb ._gagcd );
_gaa .clearPath ();case "\u006e":_gaa .clearPath ();case "\u0044\u006f":if len (_ecf .Params )==0{_d .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0065\u0078\u0070\u0065\u0063\u0074\u0065\u0064\u0020\u0058\u004fbj\u0065c\u0074\u0020\u006e\u0061\u006d\u0065\u0020\u006f\u0070\u0065\u0072\u0061n\u0064\u0020\u0066\u006f\u0072\u0020\u0044\u006f\u0020\u006f\u0070\u0065\u0072\u0061\u0074\u006f\u0072.\u0020\u0047\u006f\u0074\u0020\u0025\u002b\u0076\u002e",_ecf .Params );
return _eec .ErrRangeError ;};_ddf ,_bedee :=_eec .GetName (_ecf .Params [0]);if !_bedee {_d .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0069\u006e\u0076\u0061l\u0069\u0064\u0020\u0044\u006f\u0020\u006f\u0070e\u0072a\u0074\u006f\u0072\u0020\u0058\u004f\u0062\u006a\u0065\u0063\u0074\u0020\u006e\u0061\u006d\u0065\u0020\u006fp\u0065\u0072\u0061\u006e\u0064\u003a\u0020\u0025\u002b\u0076\u002e",_ecf .Params [0]);
return _eec .ErrTypeError ;};_ ,_cbba :=_faa .GetXObjectByName (*_ddf );if _cbba !=_da .XObjectTypeForm {break ;};_ege ,_bedee :=_efab ._gaf [_ddf .String ()];if !_bedee {_gbcc ,_eaff :=_faa .GetXObjectFormByName (*_ddf );if _eaff !=nil {_d .Log .Debug ("\u0045R\u0052\u004f\u0052\u003a\u0020\u0025v",_eaff );
return _eaff ;};_bggb ,_eaff :=_gbcc .GetContentStream ();if _eaff !=nil {_d .Log .Debug ("\u0045R\u0052\u004f\u0052\u003a\u0020\u0025v",_eaff );return _eaff ;};_adee :=_gbcc .Resources ;if _adee ==nil {_adee =_faa ;};_eebg :=_eba .CTM ;if _gcge ,_cfge :=_eec .GetArray (_gbcc .Matrix );
_cfge {_addf ,_dced :=_gcge .GetAsFloat64Slice ();if _dced !=nil {return _dced ;};if len (_addf )!=6{return _aff ;};_ddaa :=_fgb .NewMatrix (_addf [0],_addf [1],_addf [2],_addf [3],_addf [4],_addf [5]);_eebg =_eba .CTM .Mult (_ddaa );};_eedg ,_bcgb ,_bbdg ,_eaff :=_efab .extractPageText (string (_bggb ),_adee ,_bgcc .Mult (_eebg ),_fcg +1,false );
if _eaff !=nil {_d .Log .Debug ("\u0045R\u0052\u004f\u0052\u003a\u0020\u0025v",_eaff );return _eaff ;};_ege =textResult {*_eedg ,_bcgb ,_bbdg };_efab ._gaf [_ddf .String ()]=_ege ;};_gaa ._ggfd =_eba .CTM ;if _fbdb {_d .Log .Info ("\u0063\u0074\u006d\u003d\u0025\u0073",_gaa ._ggfd );
};_ddb ._fefg =append (_ddb ._fefg ,_ege ._ggfb ._fefg ...);_ddb ._gagcd =append (_ddb ._gagcd ,_ege ._ggfb ._gagcd ...);_ddb ._dbgff =append (_ddb ._dbgff ,_ege ._ggfb ._dbgff ...);_baf ._agbd +=_ege ._gdcc ;_baf ._bcdd +=_ege ._fac ;case "\u0072\u0067","\u0067","\u006b","\u0063\u0073","\u0073\u0063","\u0073\u0063\u006e":_gaff ._edce .ColorspaceNonStroking =_eba .ColorspaceNonStroking ;
_gaff ._edce .ColorNonStroking =_eba .ColorNonStroking ;case "\u0052\u0047","\u0047","\u004b","\u0043\u0053","\u0053\u0043","\u0053\u0043\u004e":_gaff ._edce .ColorspaceStroking =_eba .ColorspaceStroking ;_gaff ._edce .ColorStroking =_eba .ColorStroking ;
};return nil ;});_gcca =_eabe .Process (_feda );if _efab ._affe !=nil &&_efab ._affe .IncludeAnnotations &&!_fegd {for _ ,_eagb :=range _efab ._ddd {_adab ,_ggfa :=_eec .GetDict (_eagb .AP );if !_ggfa {continue ;};_bebd ,_ggfa :=_adab .Get ("\u004e").(*_eec .PdfObjectStream );
if !_ggfa {continue ;};_ebec ,_cbbbc :=_eec .DecodeStream (_bebd );if _cbbbc !=nil {_d .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u006f\u006e\u0020\u0064\u0065c\u006f\u0064\u0065\u0020\u0073\u0074\u0072\u0065\u0061\u006d:\u0020\u0025\u0076",_cbbbc );
continue ;};_fedb :=_bebd .PdfObjectDictionary .Get ("\u0052e\u0073\u006f\u0075\u0072\u0063\u0065s");_dgff ,_cbbbc :=_da .NewPdfPageResourcesFromDict (_fedb .(*_eec .PdfObjectDictionary ));if _cbbbc !=nil {_d .Log .Debug ("\u0045\u0072\u0072\u006f\u0072 \u006f\u006e\u0020\u0067\u0065\u0074\u0074\u0069\u006e\u0067\u0020\u0061\u006en\u006f\u0074\u0061\u0074\u0069\u006f\u006e\u0020\u0072\u0065\u0073\u006f\u0075\u0072\u0063\u0065\u0073\u003a\u0020\u0025\u0076",_cbbbc );
continue ;};_beff :=_fgb .IdentityMatrix ();_ecb ,_ggfa :=_bebd .PdfObjectDictionary .Get ("\u004d\u0061\u0074\u0072\u0069\u0078").(*_eec .PdfObjectArray );if _ggfa {_eeabe ,_cbc :=_ecb .GetAsFloat64Slice ();if _cbc !=nil {_d .Log .Debug ("\u0045\u0072\u0072or\u0020\u006f\u006e\u0020\u0067\u0065\u0074\u0074\u0069n\u0067 \u0066l\u006fa\u0074\u0036\u0034\u0020\u0073\u006c\u0069\u0063\u0065\u003a\u0020\u0025\u0076",_cbc );
continue ;};if len (_eeabe )!=6{_d .Log .Debug ("I\u006e\u0076\u0061\u006c\u0069\u0064 \u006d\u0061\u0074\u0072\u0069\u0078\u0020\u0073\u006ci\u0063\u0065\u0020l\u0065n\u0067\u0074\u0068");continue ;};_beff =_fgb .NewMatrix (_eeabe [0],_eeabe [1],_eeabe [2],_eeabe [3],_eeabe [4],_eeabe [5]);
};_ffgf ,_ggfa :=_efab ._dff [_bebd .String ()];if !_ggfa {_bfcb ,_afg ,_ecdc ,_fdaa :=_efab .extractPageText (string (_ebec ),_dgff ,_beff ,_fcg +1,true );if _fdaa !=nil {_d .Log .Debug ("\u0045\u0052R\u004f\u0052\u0020\u0065x\u0074\u0072a\u0063\u0074\u0069\u006e\u0067\u0020\u0061\u006en\u006f\u0074\u0061\u0074\u0069\u006f\u006e\u0020\u0074\u0065\u0078\u0074s\u003a\u0020\u0025\u0076",_fdaa );
continue ;};_ffgf =textResult {*_bfcb ,_afg ,_ecdc };_efab ._dff [_bebd .String ()]=_ffgf ;};_ddb ._fefg =append (_ddb ._fefg ,_ffgf ._ggfb ._fefg ...);_ddb ._gagcd =append (_ddb ._gagcd ,_ffgf ._ggfb ._gagcd ...);_ddb ._dbgff =append (_ddb ._dbgff ,_ffgf ._ggfb ._dbgff ...);
_baf ._agbd +=_ffgf ._gdcc ;_baf ._bcdd +=_ffgf ._fac ;};};return _ddb ,_baf ._agbd ,_baf ._bcdd ,_gcca ;};func _aedc (_cafcd map[float64 ]gridTile )[]float64 {_bege :=make ([]float64 ,0,len (_cafcd ));for _cggfd :=range _cafcd {_bege =append (_bege ,_cggfd );
};_ef .Float64s (_bege );return _bege ;};func _gegdb (_egbd _da .PdfRectangle )rulingKind {_fabc :=_egbd .Width ();_egdfd :=_egbd .Height ();if _fabc > _egdfd {if _fabc >=_acgb {return _bbdc ;};}else {if _egdfd >=_acgb {return _deggg ;};};return _fdeb ;
};func _faga (_fbbdb []pathSection )rulingList {_dbgc (_fbbdb );if _bdbb {_d .Log .Info ("\u006d\u0061k\u0065\u0053\u0074\u0072\u006f\u006b\u0065\u0052\u0075\u006c\u0069\u006e\u0067\u0073\u003a\u0020\u0025\u0064\u0020\u0073\u0074\u0072ok\u0065\u0073",len (_fbbdb ));
};var _ecbg rulingList ;for _ ,_dgbc :=range _fbbdb {for _ ,_dafb :=range _dgbc ._abdb {if len (_dafb ._gadd )< 2{continue ;};_dedfe :=_dafb ._gadd [0];for _ ,_affg :=range _dafb ._gadd [1:]{if _gcage ,_gfabf :=_ebeg (_dedfe ,_affg ,_dgbc .Color );_gfabf {_ecbg =append (_ecbg ,_gcage );
};_dedfe =_affg ;};};};if _bdbb {_d .Log .Info ("m\u0061\u006b\u0065\u0053tr\u006fk\u0065\u0052\u0075\u006c\u0069n\u0067\u0073\u003a\u0020\u0025\u0073",_ecbg );};return _ecbg ;};func _ddaf (_fcceb ,_fcaf _fgb .Point )rulingKind {_fgccd :=_fc .Abs (_fcceb .X -_fcaf .X );
_cdfee :=_fc .Abs (_fcceb .Y -_fcaf .Y );return _cbcgd (_fgccd ,_cdfee ,_bebf );};func (_daaf *wordBag )depthIndexes ()[]int {if len (_daaf ._dgfd )==0{return nil ;};_dedf :=make ([]int ,len (_daaf ._dgfd ));_eedf :=0;for _dfgc :=range _daaf ._dgfd {_dedf [_eedf ]=_dfgc ;
_eedf ++;};_ef .Ints (_dedf );return _dedf ;};func (_eceb *wordBag )removeWord (_fdcc *textWord ,_fcgb int ){_edfeb :=_eceb ._dgfd [_fcgb ];_edfeb =_edadc (_edfeb ,_fdcc );if len (_edfeb )==0{delete (_eceb ._dgfd ,_fcgb );}else {_eceb ._dgfd [_fcgb ]=_edfeb ;
};};func _dabb (_ecdd []*wordBag )[]*wordBag {if len (_ecdd )<=1{return _ecdd ;};if _geae {_d .Log .Info ("\u006d\u0065\u0072\u0067\u0065\u0057\u006f\u0072\u0064B\u0061\u0067\u0073\u003a");};_ef .Slice (_ecdd ,func (_cggg ,_aad int )bool {_fgbc ,_bedg :=_ecdd [_cggg ],_ecdd [_aad ];
_fecg :=_fgbc .Width ()*_fgbc .Height ();_afca :=_bedg .Width ()*_bedg .Height ();if _fecg !=_afca {return _fecg > _afca ;};if _fgbc .Height ()!=_bedg .Height (){return _fgbc .Height ()> _bedg .Height ();};return _cggg < _aad ;});var _baed []*wordBag ;
_efdd :=make (intSet );for _dfef :=0;_dfef < len (_ecdd );_dfef ++{if _efdd .has (_dfef ){continue ;};_gcbab :=_ecdd [_dfef ];for _egda :=_dfef +1;_egda < len (_ecdd );_egda ++{if _efdd .has (_dfef ){continue ;};_dcca :=_ecdd [_egda ];_cfbf :=_gcbab .PdfRectangle ;
_cfbf .Llx -=_gcbab ._abad ;if _fffb (_cfbf ,_dcca .PdfRectangle ){_gcbab .absorb (_dcca );_efdd .add (_egda );};};_baed =append (_baed ,_gcbab );};if len (_ecdd )!=len (_baed )+len (_efdd ){_d .Log .Error ("\u006d\u0065\u0072ge\u0057\u006f\u0072\u0064\u0042\u0061\u0067\u0073\u003a \u0025d\u2192%\u0064 \u0061\u0062\u0073\u006f\u0072\u0062\u0065\u0064\u003d\u0025\u0064",len (_ecdd ),len (_baed ),len (_efdd ));
};return _baed ;};func (_dfea *textObject )setTextRise (_beab float64 ){if _dfea ==nil {return ;};_dfea ._eada ._aab =_beab ;};func (_egce *textPara )isAtom ()*textTable {_aagb :=_egce ;_eddac :=_egce ._ecdg ;_bdab :=_egce ._dgcb ;if _eddac .taken ()||_bdab .taken (){return nil ;
};_ceaeb :=_eddac ._dgcb ;if _ceaeb .taken ()||_ceaeb !=_bdab ._ecdg {return nil ;};return _gcedf (_aagb ,_eddac ,_bdab ,_ceaeb );};

// WriteToFile writes the edited content to `outputPath`.
func (_cbab *Editor )WriteToFile (outputPath string )error {_bcbe ,_cecf :=_cbab ._efaa .ToWriter (nil );if _cecf !=nil {return _be .Errorf ("\u0066\u0061\u0069\u006c\u0065\u0064\u0020\u0074\u006f\u0020c\u006f\u006e\u0076\u0065\u0072\u0074\u0020t\u006f\u0020\u0077\u0072\u0069\u0074\u0065\u0072\u0020\u0025\u0076",_cecf );
};_bcbe .WriteToFile (outputPath );return nil ;};func _fbba (_gfdedc int ,_fgecd func (int ,int )bool )[]int {_afgca :=make ([]int ,_gfdedc );for _becaf :=range _afgca {_afgca [_becaf ]=_becaf ;};_ef .Slice (_afgca ,func (_fgfd ,_ccdada int )bool {return _fgecd (_afgca [_fgfd ],_afgca [_ccdada ])});
return _afgca ;};func (_ecdcg *shapesState )quadraticTo (_fcggg ,_beac ,_geea ,_bcgae float64 ){if _fbdb {_d .Log .Info ("\u0071\u0075\u0061d\u0072\u0061\u0074\u0069\u0063\u0054\u006f\u003a");};_ecdcg .addPoint (_geea ,_bcgae );};func _dbfg (_edffe _eec .PdfObject ,_fagdg _dd .Color )(_ad .Image ,error ){_geebb ,_cccbgf :=_eec .GetStream (_edffe );
if !_cccbgf {return nil ,nil ;};_cfgda ,_dffe :=_da .NewXObjectImageFromStream (_geebb );if _dffe !=nil {return nil ,_dffe ;};_efdcdb ,_dffe :=_cfgda .ToImage ();if _dffe !=nil {return nil ,_dffe ;};return _begbd (_efdcdb ,_fagdg ),nil ;};func (_gfabg rulingList )primMinMax ()(float64 ,float64 ){_fggcf ,_effa :=_gfabg [0]._dfga ,_gfabg [0]._dfga ;
for _ ,_gdac :=range _gfabg [1:]{if _gdac ._dfga < _fggcf {_fggcf =_gdac ._dfga ;}else if _gdac ._dfga > _effa {_effa =_gdac ._dfga ;};};return _fggcf ,_effa ;};func (_gadf *textObject )nextLine (){_gadf .moveLP (0,-_gadf ._eada ._debg )};func (_bbbbc *shapesState )devicePoint (_fdbg ,_geag float64 )_fgb .Point {_gfe :=_bbbbc ._effe .Mult (_bbbbc ._ggfd );
_fdbg ,_geag =_gfe .Transform (_fdbg ,_geag );return _fgb .NewPoint (_fdbg ,_geag );};func (_abee *textPara )toCellTextMarks (_ggbe *int )[]TextMark {var _ddagc []TextMark ;for _aafed ,_bbdee :=range _abee ._bcfc {_bbeb :=_bbdee .toTextMarks (_ggbe );_eegd :=_aeecg &&_bbdee .endsInHyphen ()&&_aafed !=len (_abee ._bcfc )-1;
if _eegd {_bbeb =_bafb (_bbeb ,_ggbe );};_ddagc =append (_ddagc ,_bbeb ...);if !(_eegd ||_aafed ==len (_abee ._bcfc )-1){_ddagc =_gdecg (_ddagc ,_ggbe ,_becc (_bbdee ._bfdaf ,_abee ._bcfc [_aafed +1]._bfdaf ));};};return _ddagc ;};func _ddgc (_daea map[int ][]float64 ){if len (_daea )<=1{return ;
};_gadfg :=_aabg (_daea );if _dgbg {_d .Log .Info ("\u0066i\u0078C\u0065\u006c\u006c\u0073\u003a \u006b\u0065y\u0073\u003d\u0025\u002b\u0076",_gadfg );};var _dbbec ,_fbacd int ;for _dbbec ,_fbacd =range _gadfg {if _daea [_fbacd ]!=nil {break ;};};for _fefge ,_caabb :=range _gadfg [_dbbec :]{_aeba :=_daea [_caabb ];
if _aeba ==nil {continue ;};if _dgbg {_be .Printf ("\u0025\u0034\u0064\u003a\u0020\u006b\u0030\u003d\u0025\u0064\u0020\u006b1\u003d\u0025\u0064\u000a",_dbbec +_fefge ,_fbacd ,_caabb );};_bgbfa :=_daea [_caabb ];if _bgbfa [len (_bgbfa )-1]> _aeba [0]{_bgbfa [len (_bgbfa )-1]=_aeba [0];
_daea [_fbacd ]=_bgbfa ;};_fbacd =_caabb ;};};func _gdfcb (_afab string ,_dage []rulingList ){_d .Log .Info ("\u0024\u0024 \u0025\u0064\u0020g\u0072\u0069\u0064\u0073\u0020\u002d\u0020\u0025\u0073",len (_dage ),_afab );for _deeef ,_cbdga :=range _dage {_be .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0073\u000a",_deeef ,_cbdga .String ());
};};func (_dgeg rulingList )removeDuplicates ()rulingList {if len (_dgeg )==0{return nil ;};_dgeg .sort ();_bgcbg :=rulingList {_dgeg [0]};for _ ,_cagb :=range _dgeg [1:]{if _cagb .equals (_bgcbg [len (_bgcbg )-1]){continue ;};_bgcbg =append (_bgcbg ,_cagb );
};return _bgcbg ;};func (_eabb *stateStack )size ()int {return len (*_eabb )};func (_aaaec gridTile )numBorders ()int {_bgaf :=0;if _aaaec ._ddbde {_bgaf ++;};if _aaaec ._fcbc {_bgaf ++;};if _aaaec ._cdcbc {_bgaf ++;};if _aaaec ._cabbf {_bgaf ++;};return _bgaf ;
};func _afdge (_bbbga []*textLine ,_dbea ,_afba float64 )[]*textLine {var _ceagb []*textLine ;for _ ,_efac :=range _bbbga {if _dbea ==-1{if _efac ._bfdaf > _afba {_ceagb =append (_ceagb ,_efac );};}else {if _efac ._bfdaf > _afba &&_efac ._bfdaf < _dbea {_ceagb =append (_ceagb ,_efac );
};};};return _ceagb ;};func _aea (_aabb ,_adaa _da .PdfRectangle )_da .PdfRectangle {return _da .PdfRectangle {Llx :_fc .Min (_aabb .Llx ,_adaa .Llx ),Lly :_fc .Min (_aabb .Lly ,_adaa .Lly ),Urx :_fc .Max (_aabb .Urx ,_adaa .Urx ),Ury :_fc .Max (_aabb .Ury ,_adaa .Ury )};
};func (_eadg *wordBag )scanBand (_fbfdg string ,_eacg *wordBag ,_bebaf func (_agdgf *wordBag ,_bcdg *textWord )bool ,_aeea ,_gbed ,_gaee float64 ,_ecae ,_edga bool )int {_abbed :=_eacg ._abad ;var _ebceg map[int ]map[*textWord ]struct{};if !_ecae {_ebceg =_eadg .makeRemovals ();
};_cgga :=_efbbg *_abbed ;_eeaba :=0;for _ ,_bbbe :=range _eadg .depthBand (_aeea -_cgga ,_gbed +_cgga ){if len (_eadg ._dgfd [_bbbe ])==0{continue ;};for _ ,_aeec :=range _eadg ._dgfd [_bbbe ]{if !(_aeea -_cgga <=_aeec ._bfeg &&_aeec ._bfeg <=_gbed +_cgga ){continue ;
};if !_bebaf (_eacg ,_aeec ){continue ;};_cdfed :=2.0*_fc .Abs (_aeec ._gaadd -_eacg ._abad )/(_aeec ._gaadd +_eacg ._abad );_dfgb :=_fc .Max (_aeec ._gaadd /_eacg ._abad ,_eacg ._abad /_aeec ._gaadd );_cdga :=_fc .Min (_cdfed ,_dfgb );if _gaee > 0&&_cdga > _gaee {continue ;
};if _eacg .blocked (_aeec ){continue ;};if !_ecae {_eacg .pullWord (_aeec ,_bbbe ,_ebceg );};_eeaba ++;if !_edga {if _aeec ._bfeg < _aeea {_aeea =_aeec ._bfeg ;};if _aeec ._bfeg > _gbed {_gbed =_aeec ._bfeg ;};};if _ecae {break ;};};};if !_ecae {_eadg .applyRemovals (_ebceg );
};return _eeaba ;};func (_aaee *textTable )getRight ()paraList {_bgedd :=make (paraList ,_aaee ._caed );for _dbffb :=0;_dbffb < _aaee ._caed ;_dbffb ++{_dccaf :=_aaee .get (_aaee ._dgead -1,_dbffb )._ecdg ;if _dccaf .taken (){return nil ;};_bgedd [_dbffb ]=_dccaf ;
};for _gbaec :=0;_gbaec < _aaee ._caed -1;_gbaec ++{if _bgedd [_gbaec ]._dgcb !=_bgedd [_gbaec +1]{return nil ;};};return _bgedd ;};func _eaabf (_bfggb ,_bfff int )uint64 {return uint64 (_bfggb )*0x1000000+uint64 (_bfff )};type wordBag struct{_da .PdfRectangle ;
_abad float64 ;_aaecc ,_fdag rulingList ;_adfa float64 ;_dgfd map[int ][]*textWord ;};func (_dgaa *textTable )emptyCompositeRow (_gdcea int )bool {for _ffeeb :=0;_ffeeb < _dgaa ._dgead ;_ffeeb ++{if _decaa ,_eebfd :=_dgaa ._cfee [_eaabf (_ffeeb ,_gdcea )];
_eebfd {if len (_decaa .paraList )> 0{return false ;};};};return true ;};func (_ecc *imageExtractContext )extractInlineImage (_efbb *_cb .ContentStreamInlineImage ,_adb _cb .GraphicsState ,_adaf *_da .PdfPageResources )error {_dfg ,_faf :=_efbb .ToImage (_adaf );
if _faf !=nil {return _faf ;};_ebe ,_faf :=_efbb .GetColorSpace (_adaf );if _faf !=nil {return _faf ;};if _ebe ==nil {_ebe =_da .NewPdfColorspaceDeviceGray ();};_efc ,_faf :=_ebe .ImageToRGB (*_dfg );if _faf !=nil {return _faf ;};_eag :=ImageMark {Image :&_efc ,Width :_adb .CTM .ScalingFactorX (),Height :_adb .CTM .ScalingFactorY (),Angle :_adb .CTM .Angle ()};
_eag .X ,_eag .Y =_adb .CTM .Translation ();_ecc ._eefc =append (_ecc ._eefc ,_eag );_ecc ._cecc ++;return nil ;};func (_dbcc *shapesState )fill (_deag *[]pathSection ){_bfga :=pathSection {_abdb :_dbcc ._gdcce ,Color :_dbcc ._bead .getFillColor ()};*_deag =append (*_deag ,_bfga );
if _bdbb {_acab :=_bfga .bbox ();_be .Printf ("\u0020 \u0020\u0020\u0046\u0049\u004c\u004c\u003a %\u0032\u0064\u0020\u0066\u0069\u006c\u006c\u0073\u0020\u0028\u0025\u0064\u0020\u006ee\u0077\u0029 \u0073\u0073\u003d%\u0073\u0020\u0063\u006f\u006c\u006f\u0072\u003d\u0025\u0033\u0076\u0020\u0025\u0036\u002e\u0032f\u003d\u00256.\u0032\u0066\u0078%\u0036\u002e\u0032\u0066\u000a",len (*_deag ),len (_bfga ._abdb ),_dbcc ,_bfga .Color ,_acab ,_acab .Width (),_acab .Height ());
if _acebb {for _bbacd ,_bfead :=range _bfga ._abdb {_be .Printf ("\u0025\u0038\u0064\u003a\u0020\u0025\u0073\u000a",_bbacd ,_bfead );if _bbacd ==10{break ;};};};};};const (_aeecg =true ;_decdg =true ;_eefcf =true ;_dbgfa =false ;_ebcf =true ;_aefg =true ;
_fegf =true ;_dgaf =true ;_debf =false ;);func (_dagfe *textMark )inDiacriticArea (_bade *textMark )bool {_aace :=_dagfe .Llx -_bade .Llx ;_gbbfc :=_dagfe .Urx -_bade .Urx ;_aegggb :=_dagfe .Lly -_bade .Lly ;return _fc .Abs (_aace +_gbbfc )< _dagfe .Width ()*_ebcdab &&_fc .Abs (_aegggb )< _dagfe .Height ()*_ebcdab ;
};

// TextTable represents a table.
// Cells are ordered top-to-bottom, left-to-right.
// Cells[y] is the (0-offset) y'th row in the table.
// Cells[y][x] is the (0-offset) x'th column in the table.
type TextTable struct{_da .PdfRectangle ;W ,H int ;Cells [][]TableCell ;};func (_aag *stateStack )top ()*textState {if _aag .empty (){return nil ;};return (*_aag )[_aag .size ()-1];};func (_abfa rulingList )splitSec ()[]rulingList {_ef .Slice (_abfa ,func (_cbbgb ,_dbdgd int )bool {_cbcgg ,_eaabg :=_abfa [_cbbgb ],_abfa [_dbdgd ];
if _cbcgg ._fbed !=_eaabg ._fbed {return _cbcgg ._fbed < _eaabg ._fbed ;};return _cbcgg ._edbbe < _eaabg ._edbbe ;});_aacfe :=make (map[*ruling ]struct{},len (_abfa ));_afdbbc :=func (_ffgbf *ruling )rulingList {_caga :=rulingList {_ffgbf };_aacfe [_ffgbf ]=struct{}{};
for _ ,_edab :=range _abfa {if _ ,_aegeg :=_aacfe [_edab ];_aegeg {continue ;};for _ ,_gede :=range _caga {if _edab .alignsSec (_gede ){_caga =append (_caga ,_edab );_aacfe [_edab ]=struct{}{};break ;};};};return _caga ;};_ecgb :=[]rulingList {_afdbbc (_abfa [0])};
for _ ,_feba :=range _abfa [1:]{if _ ,_abfaf :=_aacfe [_feba ];_abfaf {continue ;};_ecgb =append (_ecgb ,_afdbbc (_feba ));};return _ecgb ;};func (_efedd rulingList )bbox ()_da .PdfRectangle {var _bfdgd _da .PdfRectangle ;if len (_efedd )==0{_d .Log .Error ("r\u0075\u006c\u0069\u006e\u0067\u004ci\u0073\u0074\u002e\u0062\u0062\u006f\u0078\u003a\u0020n\u006f\u0020\u0072u\u006ci\u006e\u0067\u0073");
return _da .PdfRectangle {};};if _efedd [0]._deaac ==_bbdc {_bfdgd .Llx ,_bfdgd .Urx =_efedd .secMinMax ();_bfdgd .Lly ,_bfdgd .Ury =_efedd .primMinMax ();}else {_bfdgd .Llx ,_bfdgd .Urx =_efedd .primMinMax ();_bfdgd .Lly ,_bfdgd .Ury =_efedd .secMinMax ();
};return _bfdgd ;};

// Append appends `mark` to the mark array.
func (_cbg *TextMarkArray )Append (mark TextMark ){_cbg ._dbdc =append (_cbg ._dbdc ,mark )};func (_dcda *shapesState )newSubPath (){_dcda .clearPath ();if _fbdb {_d .Log .Info ("\u006e\u0065\u0077\u0053\u0075\u0062\u0050\u0061\u0074h\u003a\u0020\u0025\u0073",_dcda );
};};func (_eecee *textTable )getDown ()paraList {_cccbc :=make (paraList ,_eecee ._dgead );for _efee :=0;_efee < _eecee ._dgead ;_efee ++{_fcbab :=_eecee .get (_efee ,_eecee ._caed -1)._dgcb ;if _fcbab .taken (){return nil ;};_cccbc [_efee ]=_fcbab ;};
for _acff :=0;_acff < _eecee ._dgead -1;_acff ++{if _cccbc [_acff ]._ecdg !=_cccbc [_acff +1]{return nil ;};};return _cccbc ;};func (_fcffg *textObject )getFontDirect (_adcd string )(*_da .PdfFont ,error ){_dfba ,_cdcaf :=_fcffg .getFontDict (_adcd );if _cdcaf !=nil {return nil ,_cdcaf ;
};_edefg ,_cdcaf :=_da .NewPdfFontFromPdfObject (_dfba );if _cdcaf !=nil {_d .Log .Debug ("\u0067\u0065\u0074\u0046\u006f\u006e\u0074\u0044\u0069\u0072\u0065\u0063\u0074\u003a\u0020\u004e\u0065\u0077Pd\u0066F\u006f\u006e\u0074\u0046\u0072\u006f\u006d\u0050\u0064\u0066\u004f\u0062j\u0065\u0063\u0074\u0020\u0066\u0061\u0069\u006c\u0065\u0064\u002e\u0020\u006e\u0061\u006d\u0065\u003d%\u0023\u0071\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_adcd ,_cdcaf );
};return _edefg ,_cdcaf ;};func (_dggfc *wordBag )depthRange (_acba ,_agfe int )[]int {var _babcd []int ;for _gafff :=range _dggfc ._dgfd {if _acba <=_gafff &&_gafff <=_agfe {_babcd =append (_babcd ,_gafff );};};if len (_babcd )==0{return nil ;};_ef .Ints (_babcd );
return _babcd ;};func (_bgfd *subpath )add (_eecc ..._fgb .Point ){_bgfd ._gadd =append (_bgfd ._gadd ,_eecc ...)};func _fdbaf (_fdgca ,_aadc _fgb .Point )rulingKind {_efadc :=_fc .Abs (_fdgca .X -_aadc .X );_fgea :=_fc .Abs (_fdgca .Y -_aadc .Y );return _cbcgd (_efadc ,_fgea ,_acgb );
};type textResult struct{_ggfb PageText ;_gdcc int ;_fac int ;};func (_cgc *PageFonts )extractPageResourcesToFont (_ffbb *_da .PdfPageResources )error {if _ffbb .Font ==nil {return _cbb .New (_fgd );};_bfg ,_gc :=_eec .GetDict (_ffbb .Font );if !_gc {return _cbb .New (_bba );
};for _ ,_bfad :=range _bfg .Keys (){var (_beca =true ;_gdc []byte ;_dcc string ;);_daf ,_gdb :=_ffbb .GetFontByName (_bfad );if !_gdb {return _cbb .New (_bfa );};_gfb ,_cfg :=_da .NewPdfFontFromPdfObject (_daf );if _cfg !=nil {return _cfg ;};_dddd :=_gfb .FontDescriptor ();
_efd :=_gfb .FontDescriptor ().FontName .String ();_dea :=_gfb .Subtype ();if _eae (_cgc .Fonts ,_efd ){continue ;};if len (_gfb .ToUnicode ())==0{_beca =false ;};if _dddd .FontFile !=nil {if _adgc ,_ccdb :=_eec .GetStream (_dddd .FontFile );_ccdb {_gdc ,_cfg =_eec .DecodeStream (_adgc );
if _cfg !=nil {return _cfg ;};_dcc =_efd +"\u002e\u0070\u0066\u0062";};}else if _dddd .FontFile2 !=nil {if _fgc ,_cad :=_eec .GetStream (_dddd .FontFile2 );_cad {_gdc ,_cfg =_eec .DecodeStream (_fgc );if _cfg !=nil {return _cfg ;};_dcc =_efd +"\u002e\u0074\u0074\u0066";
};}else if _dddd .FontFile3 !=nil {if _ggg ,_dcb :=_eec .GetStream (_dddd .FontFile3 );_dcb {_gdc ,_cfg =_eec .DecodeStream (_ggg );if _cfg !=nil {return _cfg ;};_dcc =_efd +"\u002e\u0063\u0066\u0066";};};if len (_dcc )< 1{_d .Log .Debug (_bad );};_cdg :=Font {FontName :_efd ,PdfFont :_gfb ,IsCID :_gfb .IsCID (),IsSimple :_gfb .IsSimple (),ToUnicode :_beca ,FontType :_dea ,FontData :_gdc ,FontFileName :_dcc ,FontDescriptor :_dddd };
_cgc .Fonts =append (_cgc .Fonts ,_cdg );};return nil ;};func (_gcedc paraList )llyRange (_fdeff []int ,_defg ,_fdac float64 )[]int {_gbcb :=len (_gcedc );if _fdac < _gcedc [_fdeff [0]].Lly ||_defg > _gcedc [_fdeff [_gbcb -1]].Lly {return nil ;};_daade :=_ef .Search (_gbcb ,func (_cbgb int )bool {return _gcedc [_fdeff [_cbgb ]].Lly >=_defg });
_gdafb :=_ef .Search (_gbcb ,func (_bdfgb int )bool {return _gcedc [_fdeff [_bdfgb ]].Lly > _fdac });return _fdeff [_daade :_gdafb ];};func (_dbfba *textTable )isExportable ()bool {if _dbfba ._gdba {return true ;};_bfedf :=func (_bbecbb int )bool {_dgbca :=_dbfba .get (0,_bbecbb );
if _dgbca ==nil {return false ;};_bggefb :=_dgbca .text ();_gabe :=_c .RuneCountInString (_bggefb );_gbdf :=_cgca .MatchString (_bggefb );return _gabe <=1||_gbdf ;};for _dfbab :=0;_dfbab < _dbfba ._caed ;_dfbab ++{if !_bfedf (_dfbab ){return true ;};};
return false ;};func _dadc (_cagga _da .PdfColorspace ,_ccdbg _da .PdfColor )_dd .Color {if _cagga ==nil ||_ccdbg ==nil {return _dd .Black ;};_cafa ,_fbcac :=_cagga .ColorToRGB (_ccdbg );if _fbcac !=nil {_d .Log .Debug ("\u0057\u0041\u0052\u004e\u003a\u0020\u0063\u006fu\u006c\u0064\u0020no\u0074\u0020\u0063\u006f\u006e\u0076e\u0072\u0074\u0020\u0063\u006f\u006c\u006f\u0072\u0020\u0025\u0076\u0020\u0028\u0025\u0076)\u0020\u0074\u006f\u0020\u0052\u0047\u0042\u003a \u0025\u0073",_ccdbg ,_cagga ,_fbcac );
return _dd .Black ;};_cfgd ,_ggaea :=_cafa .(*_da .PdfColorDeviceRGB );if !_ggaea {_d .Log .Debug ("\u0057\u0041\u0052\u004e\u003a\u0020\u0063\u006f\u006e\u0076\u0065\u0072\u0074\u0065\u0064 \u0063\u006f\u006c\u006f\u0072\u0020\u0069\u0073\u0020\u006e\u006f\u0074\u0020i\u006e\u0020\u0074\u0068\u0065\u0020\u0052\u0047\u0042\u0020\u0063\u006flo\u0072\u0073\u0070\u0061\u0063\u0065\u003a\u0020\u0025\u0076",_cafa );
return _dd .Black ;};return _dd .NRGBA {R :uint8 (_cfgd .R ()*255),G :uint8 (_cfgd .G ()*255),B :uint8 (_cfgd .B ()*255),A :uint8 (255)};};func (_accd *textTable )bbox ()_da .PdfRectangle {return _accd .PdfRectangle };func _baefa (_fdegb *list )[]*textLine {for _ ,_fggcd :=range _fdegb ._bebaa {switch _fggcd ._afgc {case "\u004c\u0042\u006fd\u0079":if len (_fggcd ._ccgac )!=0{return _fggcd ._ccgac ;
};return _baefa (_fggcd );case "\u0053\u0070\u0061\u006e":return _fggcd ._ccgac ;case "I\u006e\u006c\u0069\u006e\u0065\u0053\u0068\u0061\u0070\u0065":return _fggcd ._ccgac ;};};return nil ;};func (_fgg *imageExtractContext )processOperand (_ccb *_cb .ContentStreamOperation ,_efba _cb .GraphicsState ,_dcf *_da .PdfPageResources )error {if _ccb .Operand =="\u0042\u0049"&&len (_ccb .Params )==1{_cgf ,_cbe :=_ccb .Params [0].(*_cb .ContentStreamInlineImage );
if !_cbe {return nil ;};if _dbd ,_fb :=_eec .GetBoolVal (_cgf .ImageMask );_fb {if _dbd &&!_fgg ._aec .IncludeInlineStencilMasks {return nil ;};};return _fgg .extractInlineImage (_cgf ,_efba ,_dcf );}else if _ccb .Operand =="\u0044\u006f"&&len (_ccb .Params )==1{_fgec ,_bede :=_eec .GetName (_ccb .Params [0]);
if !_bede {_d .Log .Debug ("E\u0052\u0052\u004f\u0052\u003a\u0020\u0054\u0079\u0070\u0065");return _gdd ;};_ ,_ega :=_dcf .GetXObjectByName (*_fgec );switch _ega {case _da .XObjectTypeImage :return _fgg .extractXObjectImage (_fgec ,_efba ,_dcf );case _da .XObjectTypeForm :return _fgg .extractFormImages (_fgec ,_efba ,_dcf );
};}else if _fgg ._bga &&(_ccb .Operand =="\u0073\u0063\u006e"||_ccb .Operand =="\u0053\u0043\u004e")&&len (_ccb .Params )==1{_bbdd ,_fdea :=_eec .GetName (_ccb .Params [0]);if !_fdea {_d .Log .Debug ("E\u0052\u0052\u004f\u0052\u003a\u0020\u0054\u0079\u0070\u0065");
return _gdd ;};_gddd ,_fdea :=_dcf .GetPatternByName (*_bbdd );if !_fdea {_d .Log .Debug ("\u0045R\u0052\u004f\u0052\u003a\u0020\u0050\u0061\u0074\u0074\u0065\u0072n\u0020\u006e\u006f\u0074\u0020\u0066\u006f\u0075\u006e\u0064");return nil ;};if _gddd .IsTiling (){_ace :=_gddd .GetAsTilingPattern ();
_aca ,_fad :=_ace .GetContentStream ();if _fad !=nil {return _fad ;};_fad =_fgg .extractContentStreamImages (string (_aca ),_ace .Resources );if _fad !=nil {return _fad ;};};}else if (_ccb .Operand =="\u0063\u0073"||_ccb .Operand =="\u0043\u0053")&&len (_ccb .Params )>=1{_fgg ._bga =_ccb .Params [0].String ()=="\u0050a\u0074\u0074\u0065\u0072\u006e";
};return nil ;};func _eabbe (_gbbg *wordBag ,_fcce int )*textLine {_adadg :=_gbbg .firstWord (_fcce );_afbf :=textLine {PdfRectangle :_adadg .PdfRectangle ,_afdf :_adadg ._gaadd ,_bfdaf :_adadg ._bfeg };_afbf .pullWord (_gbbg ,_adadg ,_fcce );return &_afbf ;
};func _bagfg (_fcfg []float64 ,_bafe ,_cbfbc float64 )[]float64 {_fbca ,_bcef :=_bafe ,_cbfbc ;if _bcef < _fbca {_fbca ,_bcef =_bcef ,_fbca ;};_fdfe :=make ([]float64 ,0,len (_fcfg )+2);_fdfe =append (_fdfe ,_bafe );for _ ,_ffdf :=range _fcfg {if _ffdf <=_fbca {continue ;
}else if _ffdf >=_bcef {break ;};_fdfe =append (_fdfe ,_ffdf );};_fdfe =append (_fdfe ,_cbfbc );return _fdfe ;};func _ffddf (_gdbgf _fgb .Point )*subpath {return &subpath {_gadd :[]_fgb .Point {_gdbgf }}};func _cgeb (_dfdce string )string {_fdefa :=[]rune (_dfdce );
return string (_fdefa [:len (_fdefa )-1])};func _dbf (_ff []string ,_gb int ,_bbe int ,_ed string ){for _ffg :=_gb ;_ffg < _bbe ;_ffg ++{_ff [_ffg ]=_ed ;};};func (_bedd *shapesState )drawRectangle (_bggc ,_dcffg ,_ebg ,_cfdb float64 ){if _fbdb {_fce :=_bedd .devicePoint (_bggc ,_dcffg );
_efag :=_bedd .devicePoint (_bggc +_ebg ,_dcffg +_cfdb );_fdee :=_da .PdfRectangle {Llx :_fce .X ,Lly :_fce .Y ,Urx :_efag .X ,Ury :_efag .Y };_d .Log .Info ("d\u0072a\u0077\u0052\u0065\u0063\u0074\u0061\u006e\u0067l\u0065\u003a\u0020\u00256.\u0032\u0066",_fdee );
};_bedd .newSubPath ();_bedd .moveTo (_bggc ,_dcffg );_bedd .lineTo (_bggc +_ebg ,_dcffg );_bedd .lineTo (_bggc +_ebg ,_dcffg +_cfdb );_bedd .lineTo (_bggc ,_dcffg +_cfdb );_bedd .closePath ();};func (_ccgbb *wordBag )applyRemovals (_eedb map[int ]map[*textWord ]struct{}){for _eeag ,_dabde :=range _eedb {if len (_dabde )==0{continue ;
};_cageb :=_ccgbb ._dgfd [_eeag ];_ggca :=len (_cageb )-len (_dabde );if _ggca ==0{delete (_ccgbb ._dgfd ,_eeag );continue ;};_fcbf :=make ([]*textWord ,_ggca );_agbg :=0;for _ ,_faag :=range _cageb {if _ ,_cccg :=_dabde [_faag ];!_cccg {_fcbf [_agbg ]=_faag ;
_agbg ++;};};_ccgbb ._dgfd [_eeag ]=_fcbf ;};};func (_adgg *textObject )renderText (_ccba _eec .PdfObject ,_ggag []byte ,_cafgc int ,_dcg string )error {if _adgg ._dggf {_d .Log .Debug ("\u0072\u0065\u006e\u0064\u0065r\u0054\u0065\u0078\u0074\u003a\u0020\u0049\u006e\u0076\u0061\u006c\u0069\u0064 \u0066\u006f\u006e\u0074\u002e\u0020\u004e\u006f\u0074\u0020\u0070\u0072\u006f\u0063\u0065\u0073\u0073\u0069\u006e\u0067\u002e");
return nil ;};_gdbg :=_adgg .getCurrentFont ();_bgga :=_gdbg .BytesToCharcodes (_ggag );var (_adgf []string ;_gfde int ;_abag int ;);if _dcg !=""{_adgf =[]string {_eec .MakeString (_dcg ).Decoded ()};_gfde =1;}else {_adgf ,_gfde ,_abag =_gdbg .CharcodesToStrings (_bgga ,"");
if _abag > 0{_d .Log .Debug ("\u0072\u0065nd\u0065\u0072\u0054e\u0078\u0074\u003a\u0020num\u0043ha\u0072\u0073\u003d\u0025\u0064\u0020\u006eum\u004d\u0069\u0073\u0073\u0065\u0073\u003d%\u0064",_gfde ,_abag );};};_adgg ._eada ._agbd +=_gfde ;_adgg ._eada ._bcdd +=_abag ;
_eac :=_adgg ._eada ;_aabd :=_eac ._beea ;_bfed :=_eac ._ddeec /100.0;_gff :=_fef ;if _gdbg .Subtype ()=="\u0054\u0079\u0070e\u0033"{_gff =1;};_gbg ,_ffcf :=_gdbg .GetRuneMetrics (' ');if !_ffcf {_gbg ,_ffcf =_gdbg .GetCharMetrics (32);};if !_ffcf {_gbg ,_ =_da .DefaultFont ().GetRuneMetrics (' ');
};_fgbad :=_gbg .Wx *_gff ;_d .Log .Trace ("\u0073p\u0061\u0063e\u0057\u0069\u0064t\u0068\u003d\u0025\u002e\u0032\u0066\u0020t\u0065\u0078\u0074\u003d\u0025\u0071 \u0066\u006f\u006e\u0074\u003d\u0025\u0073\u0020\u0066\u006f\u006et\u0053\u0069\u007a\u0065\u003d\u0025\u002e\u0032\u0066",_fgbad ,_adgf ,_gdbg ,_aabd );
_cebd :=_fgb .NewMatrix (_aabd *_bfed ,0,0,_aabd ,0,_eac ._aab );if _gecce {_d .Log .Info ("\u0072\u0065\u006e\u0064\u0065\u0072T\u0065\u0078\u0074\u003a\u0020\u0025\u0064\u0020\u0063\u006f\u0064\u0065\u0073=\u0025\u002b\u0076\u0020\u0074\u0065\u0078t\u0073\u003d\u0025\u0071",len (_bgga ),_bgga ,_adgf );
};_d .Log .Trace ("\u0072\u0065\u006e\u0064\u0065\u0072T\u0065\u0078\u0074\u003a\u0020\u0025\u0064\u0020\u0063\u006f\u0064\u0065\u0073=\u0025\u002b\u0076\u0020\u0072\u0075\u006ee\u0073\u003d\u0025\u0071",len (_bgga ),_bgga ,len (_adgf ));_ecbe :=_adgg .getFillColor ();
_efca :=_adgg .getStrokeColor ();for _ccfg ,_affc :=range _adgf {_cafe :=[]rune (_affc );if len (_cafe )==1&&_cafe [0]=='\x00'{continue ;};_aef :=_bgga [_ccfg ];_edef :=_adgg ._edce .CTM .Mult (_adgg ._dccb ).Mult (_cebd );_dbdd :=0.0;if len (_cafe )==1&&_cafe [0]==32{_dbdd =_eac ._gccd ;
};_bbf ,_fabd :=_gdbg .GetCharMetrics (_aef );if !_fabd {_d .Log .Debug ("\u0045R\u0052\u004fR\u003a\u0020\u004e\u006f \u006d\u0065\u0074r\u0069\u0063\u0020\u0066\u006f\u0072\u0020\u0063\u006fde\u003d\u0025\u0064 \u0072\u003d0\u0078\u0025\u0030\u0034\u0078\u003d%\u002b\u0071 \u0025\u0073",_aef ,_cafe ,_cafe ,_gdbg );
return _be .Errorf ("\u006e\u006f\u0020\u0063\u0068\u0061\u0072\u0020\u006d\u0065\u0074\u0072\u0069\u0063\u0073:\u0020f\u006f\u006e\u0074\u003d\u0025\u0073\u0020\u0063\u006f\u0064\u0065\u003d\u0025\u0064",_gdbg .String (),_aef );};_bceb :=_fgb .Point {X :_bbf .Wx *_gff ,Y :_bbf .Wy *_gff };
_gffb :=_fgb .Point {X :(_bceb .X *_aabd +_dbdd )*_bfed };_efbad :=_fgb .Point {X :(_bceb .X *_aabd +_eac ._bgcg +_dbdd )*_bfed };if _gecce {_d .Log .Info ("\u0074\u0066\u0073\u003d\u0025\u002e\u0032\u0066\u0020\u0074\u0063\u003d\u0025\u002e\u0032f\u0020t\u0077\u003d\u0025\u002e\u0032\u0066\u0020\u0074\u0068\u003d\u0025\u002e\u0032\u0066",_aabd ,_eac ._bgcg ,_eac ._gccd ,_bfed );
_d .Log .Info ("\u0064x\u002c\u0064\u0079\u003d%\u002e\u0033\u0066\u0020\u00740\u003d%\u002e3\u0066\u0020\u0074\u003d\u0025\u002e\u0033f",_bceb ,_gffb ,_efbad );};_gef :=_bbba (_gffb );_bbgce :=_bbba (_efbad );_ffdg :=_adgg ._edce .CTM .Mult (_adgg ._dccb ).Mult (_gef );
if _cfgcc {_d .Log .Info ("e\u006e\u0064\u003a\u000a\tC\u0054M\u003d\u0025\u0073\u000a\u0009 \u0074\u006d\u003d\u0025\u0073\u000a"+"\u0009\u0020t\u0064\u003d\u0025s\u0020\u0078\u006c\u0061\u0074\u003d\u0025\u0073\u000a"+"\u0009t\u0064\u0030\u003d\u0025s\u000a\u0009\u0020\u0020\u2192 \u0025s\u0020x\u006c\u0061\u0074\u003d\u0025\u0073",_adgg ._edce .CTM ,_adgg ._dccb ,_bbgce ,_ceccc (_adgg ._edce .CTM .Mult (_adgg ._dccb ).Mult (_bbgce )),_gef ,_ffdg ,_ceccc (_ffdg ));
};_eegb ,_bbbb :=_adgg .newTextMark (_g .ExpandLigatures (_cafe ),_edef ,_ceccc (_ffdg ),_fc .Abs (_fgbad *_edef .ScalingFactorX ()),_gdbg ,_adgg ._eada ._bgcg ,_ecbe ,_efca ,_ccba ,_adgf ,_ccfg ,_cafgc );if !_bbbb {_d .Log .Debug ("\u0054\u0065\u0078\u0074\u0020\u006d\u0061\u0072\u006b\u0020\u006f\u0075\u0074\u0073\u0069d\u0065 \u0070\u0061\u0067\u0065\u002e\u0020\u0053\u006b\u0069\u0070\u0070\u0069\u006e\u0067");
continue ;};if _gdbg ==nil {_d .Log .Debug ("\u0045R\u0052O\u0052\u003a\u0020\u004e\u006f\u0020\u0066\u006f\u006e\u0074\u002e");}else if _gdbg .Encoder ()==nil {_d .Log .Debug ("E\u0052\u0052\u004f\u0052\u003a\u0020N\u006f\u0020\u0065\u006e\u0063\u006f\u0064\u0069\u006eg\u002e\u0020\u0066o\u006et\u003d\u0025\u0073",_gdbg );
}else {if _gffg ,_dgdca :=_gdbg .Encoder ().CharcodeToRune (_aef );_dgdca {_eegb ._eded =string (_gffg );};};_d .Log .Trace ("i\u003d\u0025\u0064\u0020\u0063\u006fd\u0065\u003d\u0025\u0064\u0020\u006d\u0061\u0072\u006b=\u0025\u0073\u0020t\u0072m\u003d\u0025\u0073",_ccfg ,_aef ,_eegb ,_edef );
_adgg ._ffeg =append (_adgg ._ffeg ,&_eegb );_adgg ._dccb .Concat (_bbgce );};return nil ;};func _ecfc (_befcd map[float64 ]map[float64 ]gridTile )[]float64 {_dgbcf :=make ([]float64 ,0,len (_befcd ));for _aggda :=range _befcd {_dgbcf =append (_dgbcf ,_aggda );
};_ef .Float64s (_dgbcf );_daab :=len (_dgbcf );for _egcgg :=0;_egcgg < _daab /2;_egcgg ++{_dgbcf [_egcgg ],_dgbcf [_daab -1-_egcgg ]=_dgbcf [_daab -1-_egcgg ],_dgbcf [_egcgg ];};return _dgbcf ;};func _cfga (_gfac []*textLine ){_ef .Slice (_gfac ,func (_fgff ,_cacfa int )bool {_bcebdb ,_cdee :=_gfac [_fgff ],_gfac [_cacfa ];
return _bcebdb ._bfdaf < _cdee ._bfdaf ;});};func (_bgdgd rulingList )snapToGroups ()rulingList {_gbdd ,_gfded :=_bgdgd .vertsHorzs ();if len (_gbdd )> 0{_gbdd =_gbdd .snapToGroupsDirection ();};if len (_gfded )> 0{_gfded =_gfded .snapToGroupsDirection ();
};_ededg :=append (_gbdd ,_gfded ...);_ededg .log ("\u0073\u006e\u0061p\u0054\u006f\u0047\u0072\u006f\u0075\u0070\u0073");return _ededg ;};func _ggbgg (_cbbf map[int ][]float64 )string {_fabdf :=_aabg (_cbbf );_aaff :=make ([]string ,len (_cbbf ));for _dafaa ,_gdbf :=range _fabdf {_aaff [_dafaa ]=_be .Sprintf ("\u0025\u0064\u003a\u0020\u0025\u002e\u0032\u0066",_gdbf ,_cbbf [_gdbf ]);
};return _be .Sprintf ("\u007b\u0025\u0073\u007d",_db .Join (_aaff ,"\u002c\u0020"));};func (_ddeb gridTile )complete ()bool {return _ddeb .numBorders ()==4};func (_aade *textPara )writeText (_fbac _df .Writer ){if _aade ._eaca ==nil {_aade .writeCellText (_fbac );
return ;};for _bccg :=0;_bccg < _aade ._eaca ._caed ;_bccg ++{for _fbcdd :=0;_fbcdd < _aade ._eaca ._dgead ;_fbcdd ++{_acadf :=_aade ._eaca .get (_fbcdd ,_bccg );if _acadf ==nil {_fbac .Write ([]byte ("\u0009"));}else {_cfga (_acadf ._bcfc );_acadf .writeCellText (_fbac );
};_fbac .Write ([]byte ("\u0020"));};if _bccg < _aade ._eaca ._caed -1{_fbac .Write ([]byte ("\u000a"));};};};func (_cace *subpath )removeDuplicates (){if len (_cace ._gadd )==0{return ;};_beef :=[]_fgb .Point {_cace ._gadd [0]};for _ ,_adge :=range _cace ._gadd [1:]{if !_cedf (_adge ,_beef [len (_beef )-1]){_beef =append (_beef ,_adge );
};};_cace ._gadd =_beef ;};func (_bdag paraList )computeEBBoxes (){if _cbbae {_d .Log .Info ("\u0063o\u006dp\u0075\u0074\u0065\u0045\u0042\u0042\u006f\u0078\u0065\u0073\u003a");};for _ ,_gccdg :=range _bdag {_gccdg ._eecdf =_gccdg .PdfRectangle ;};_dacc :=_bdag .yNeighbours (0);
for _ggfga ,_dabdea :=range _bdag {_dcfac :=_dabdea ._eecdf ;_cbeg ,_cgfe :=-1.0e9,+1.0e9;for _ ,_fccb :=range _dacc [_dabdea ]{_abdgb :=_bdag [_fccb ]._eecdf ;if _abdgb .Urx < _dcfac .Llx {_cbeg =_fc .Max (_cbeg ,_abdgb .Urx );}else if _dcfac .Urx < _abdgb .Llx {_cgfe =_fc .Min (_cgfe ,_abdgb .Llx );
};};for _cebgf ,_aceafd :=range _bdag {_cfag :=_aceafd ._eecdf ;if _ggfga ==_cebgf ||_cfag .Ury > _dcfac .Lly {continue ;};if _cbeg <=_cfag .Llx &&_cfag .Llx < _dcfac .Llx {_dcfac .Llx =_cfag .Llx ;}else if _cfag .Urx <=_cgfe &&_dcfac .Urx < _cfag .Urx {_dcfac .Urx =_cfag .Urx ;
};};if _cbbae {_be .Printf ("\u0025\u0034\u0064\u003a %\u0036\u002e\u0032\u0066\u2192\u0025\u0036\u002e\u0032\u0066\u0020\u0025\u0071\u000a",_ggfga ,_dabdea ._eecdf ,_dcfac ,_aagbb (_dabdea .text (),50));};_dabdea ._eecdf =_dcfac ;};if _dbgfa {for _ ,_becf :=range _bdag {_becf .PdfRectangle =_becf ._eecdf ;
};};};const (_cbbae =false ;_fgcge =false ;_cefd =false ;_cfgcc =false ;_fbdb =false ;_gecce =false ;_ffaf =false ;_faaf =false ;_geae =false ;_edaf =_geae &&true ;_cbddd =_edaf &&false ;_ddag =_geae &&true ;_dgbg =false ;_dacd =_dgbg &&false ;_afdb =_dgbg &&true ;
_bdbb =false ;_acebb =_bdbb &&false ;_def =_bdbb &&false ;_ceec =_bdbb &&true ;_dfaa =_bdbb &&false ;_cdgee =_bdbb &&false ;);const (RenderModeStroke RenderMode =1<<iota ;RenderModeFill ;RenderModeClip ;);func (_gdea TextTable )getCellInfo (_egcg TextMark )[][]int {for _dcfa ,_acgg :=range _gdea .Cells {for _aga :=range _acgg {_ccgb :=&_acgg [_aga ].Marks ;
if _ccgb .exists (_egcg ){return [][]int {{_dcfa },{_aga }};};};};return nil ;};

// Font represents the font properties on a PDF page.
type Font struct{PdfFont *_da .PdfFont ;

// FontName represents Font Name from font properties.
FontName string ;

// FontType represents Font Subtype entry in the font dictionary inside page resources.
// Examples : type0, Type1, MMType1, Type3, TrueType, CIDFont.
FontType string ;

// ToUnicode is true if font provides a `ToUnicode` mapping.
ToUnicode bool ;

// IsCID is true if underlying font is a composite font.
// Composite font is represented by a font dictionary whose Subtype is `Type0`
IsCID bool ;

// IsSimple is true if font is simple font.
// A simple font is limited to only 8 bit (255) character codes.
IsSimple bool ;

// FontData represents the raw data of the embedded font file.
// It can have format TrueType (TTF), PostScript Font (PFB) or Compact Font Format (CCF).
// FontData value can be indicates from `FontFile`, `FontFile2` or `FontFile3` inside Font Descriptor.
// At most, only one of `FontFile`, `FontFile2` or `FontFile3` will be FontData value.
FontData []byte ;

// FontFileName is a name representing the font. it has format:
// (Font Name) + (Font Type Extension), example: helvetica.ttf.
FontFileName string ;

// FontDescriptor represents metrics and other attributes inside font properties from PDF Structure (Font Descriptor).
FontDescriptor *_da .PdfFontDescriptor ;};

// TextMark represents extracted text on a page with information regarding both textual content,
// formatting (font and size) and positioning.
// It is the smallest unit of text on a PDF page, typically a single character.
//
// getBBox() in test_text.go shows how to compute bounding boxes of substrings of extracted text.
// The following code extracts the text on PDF page `page` into `text` then finds the bounding box
// `bbox` of substring `term` in `text`.
//
//	ex, _ := New(page)
//	// handle errors
//	pageText, _, _, err := ex.ExtractPageText()
//	// handle errors
//	text := pageText.Text()
//	textMarks := pageText.Marks()
//
//		start := strings.Index(text, term)
//	 end := start + len(term)
//	 spanMarks, err := textMarks.RangeOffset(start, end)
//	 // handle errors
//	 bbox, ok := spanMarks.BBox()
//	 // handle errors
type TextMark struct{

// Text is the extracted text.
Text string ;

// Original is the text in the PDF. It has not been decoded like `Text`.
Original string ;

// BBox is the bounding box of the text.
BBox _da .PdfRectangle ;

// Font is the font the text was drawn with.
Font *_da .PdfFont ;

// FontSize is the font size the text was drawn with.
FontSize float64 ;

// Offset is the offset of the start of TextMark.Text in the extracted text. If you do this
//   text, textMarks := pageText.Text(), pageText.Marks()
//   marks := textMarks.Elements()
// then marks[i].Offset is the offset of marks[i].Text in text.
Offset int ;

// Meta is set true for spaces and line breaks that we insert in the extracted text. We insert
// spaces (line breaks) when we see characters that are over a threshold horizontal (vertical)
//  distance  apart. See wordJoiner (lineJoiner) in PageText.computeViews().
Meta bool ;

// FillColor is the fill color of the text.
// The color is nil for spaces and line breaks (i.e. the Meta field is true).
FillColor _dd .Color ;

// StrokeColor is the stroke color of the text.
// The color is nil for spaces and line breaks (i.e. the Meta field is true).
StrokeColor _dd .Color ;

// Orientation is the text orientation
Orientation int ;

// DirectObject is the underlying PdfObject (Text Object) that represents the visible texts. This is introduced to get
// a simple access to the TextObject in case editing or replacment of some text is needed. E.g during redaction.
DirectObject _eec .PdfObject ;

// ObjString is a decoded string operand of a text-showing operator. It has the same value as `Text` attribute except
// when many glyphs are represented with the same Text Object that contains multiple length string operand in which case
// ObjString spans more than one character string that falls in different TextMark objects.
ObjString []string ;Tw float64 ;Th float64 ;Tc float64 ;Index int ;_edac bool ;_agfg *TextTable ;};func (_fbcf paraList )lines ()[]*textLine {var _bfge []*textLine ;for _ ,_fbgd :=range _fbcf {_bfge =append (_bfge ,_fbgd ._bcfc ...);};return _bfge ;};

// String returns a description of `k`.
func (_eefab markKind )String ()string {_deba ,_dfad :=_agccg [_eefab ];if !_dfad {return _be .Sprintf ("\u004e\u006f\u0074\u0020\u0061\u0020\u006d\u0061\u0072k\u003a\u0020\u0025\u0064",_eefab );};return _deba ;};func _fge (_fd []string ,_bac int ,_dc int ){for _eef ,_fe :=_bac ,_dc -1;
_eef < _fe ;_eef ,_fe =_eef +1,_fe -1{_bca :=_fd [_eef ];_fd [_eef ]=_fd [_fe ];_fd [_fe ]=_bca ;};};func _dcfc (_efcfb float64 )int {var _dbfc int ;if _efcfb >=0{_dbfc =int (_efcfb /_cgef );}else {_dbfc =int (_efcfb /_cgef )-1;};return _dbfc ;};type rulingList []*ruling ;
type lists []*list ;func (_ecbf *shapesState )stroke (_gafe *[]pathSection ){_dadf :=pathSection {_abdb :_ecbf ._gdcce ,Color :_ecbf ._bead .getStrokeColor ()};*_gafe =append (*_gafe ,_dadf );if _bdbb {_be .Printf ("\u0020 \u0020\u0020S\u0054\u0052\u004fK\u0045\u003a\u0020\u0025\u0064\u0020\u0073t\u0072\u006f\u006b\u0065\u0073\u0020s\u0073\u003d\u0025\u0073\u0020\u0063\u006f\u006c\u006f\u0072\u003d%\u002b\u0076\u0020\u0025\u0036\u002e\u0032\u0066\u000a",len (*_gafe ),_ecbf ,_ecbf ._bead .getStrokeColor (),_dadf .bbox ());
if _acebb {for _ffff ,_caa :=range _ecbf ._gdcce {_be .Printf ("\u0025\u0038\u0064\u003a\u0020\u0025\u0073\u000a",_ffff ,_caa );if _ffff ==10{break ;};};};};};func (_agde paraList )list ()[]*list {var _bcde []*textLine ;var _gfagg []*textLine ;for _ ,_fcfc :=range _agde {_gffa :=_fcfc .getListLines ();
_bcde =append (_bcde ,_gffa ...);_gfagg =append (_gfagg ,_fcfc ._bcfc ...);};_cdfea :=_ffee (_bcde );_gffad :=_gcfa (_gfagg ,_cdfea );return _gffad ;};func (_cfca *shapesState )lastpointEstablished ()(_fgb .Point ,bool ){if _cfca ._ddgd {return _cfca ._cdfcf ,false ;
};_ddfe :=len (_cfca ._gdcce );if _ddfe > 0&&_cfca ._gdcce [_ddfe -1]._dbba {return _cfca ._gdcce [_ddfe -1].last (),false ;};return _fgb .Point {},true ;};func (_aege *textObject )setTextRenderMode (_gdaa int ){if _aege ==nil {return ;};_aege ._eada ._eegg =RenderMode (_gdaa );
};func (_bdfeg *shapesState )moveTo (_ecfb ,_feec float64 ){_bdfeg ._ddgd =true ;_bdfeg ._cdfcf =_bdfeg .devicePoint (_ecfb ,_feec );if _fbdb {_d .Log .Info ("\u006d\u006fv\u0065\u0054\u006f\u003a\u0020\u0025\u002e\u0032\u0066\u002c\u0025\u002e\u0032\u0066\u0020\u0064\u0065\u0076\u0069\u0063\u0065\u003d%.\u0032\u0066",_ecfb ,_feec ,_bdfeg ._cdfcf );
};};

// Extractor stores and offers functionality for extracting content from PDF pages.
type Extractor struct{_cfd string ;_edd *_da .PdfPageResources ;_ccd _da .PdfRectangle ;_eg *_da .PdfRectangle ;_bag int ;_bcd map[string ]fontEntry ;_gaf map[string ]textResult ;_dff map[string ]textResult ;_bd int64 ;_affe *Options ;_ffbg *_da .StructTreeRoot ;
_fde _eec .PdfObject ;_ddd []*_da .PdfAnnotation ;};func (_cdec *textObject )getFontDict (_cagg string )(_afae _eec .PdfObject ,_afaeb error ){_ffgg :=_cdec ._ebbb ;if _ffgg ==nil {_d .Log .Debug ("g\u0065\u0074\u0046\u006f\u006e\u0074D\u0069\u0063\u0074\u002e\u0020\u004eo\u0020\u0072\u0065\u0073\u006f\u0075\u0072c\u0065\u0073\u002e\u0020\u006e\u0061\u006d\u0065\u003d\u0025#\u0071",_cagg );
return nil ,nil ;};_afae ,_cebf :=_ffgg .GetFontByName (_eec .PdfObjectName (_cagg ));if !_cebf {_d .Log .Debug ("\u0045R\u0052\u004fR\u003a\u0020\u0067\u0065t\u0046\u006f\u006et\u0044\u0069\u0063\u0074\u003a\u0020\u0046\u006f\u006et \u006e\u006f\u0074 \u0066\u006fu\u006e\u0064\u003a\u0020\u006e\u0061m\u0065\u003d%\u0023\u0071",_cagg );
return nil ,_cbb .New ("f\u006f\u006e\u0074\u0020no\u0074 \u0069\u006e\u0020\u0072\u0065s\u006f\u0075\u0072\u0063\u0065\u0073");};return _afae ,nil ;};func (_gcbge *textTable )get (_fdcdc ,_cdcc int )*textPara {return _gcbge ._gbcde [_eaabf (_fdcdc ,_cdcc )];
};func _acag (_caae *textLine )float64 {return _caae ._cdde [0].Llx };func (_fdgce *wordBag )empty (_gcdb int )bool {_ ,_facd :=_fdgce ._dgfd [_gcdb ];return !_facd };func _dgb (_aegf *TextMarkArray )[]*TextMarkArray {_dabd :=_aegf .Elements ();_cffd :=len (_dabd );
var _bcfd _eec .PdfObject ;_cbbg :=[]*TextMarkArray {};_feg :=&TextMarkArray {};_gba :=-1;for _cefg ,_gcd :=range _dabd {_dfd :=_gcd .DirectObject ;_gba =_gcd .Index ;if _dfd ==nil {_eea :=_dgf (_aegf ,_cefg );if _bcfd !=nil {if _eea ==-1||_eea > _cefg {_cbbg =append (_cbbg ,_feg );
_feg =&TextMarkArray {};};};}else if _bcfd ==nil {if _gba ==0&&_cefg > 0{_cbbg =append (_cbbg ,_feg );_feg =&TextMarkArray {};};}else {if _dfd !=_bcfd {_cbbg =append (_cbbg ,_feg );_feg =&TextMarkArray {};};};_bcfd =_dfd ;_feg .Append (_gcd );if _cefg ==(_cffd -1){_cbbg =append (_cbbg ,_feg );
};};return _cbbg ;};func (_becg *textObject )setTextMatrix (_bbea []float64 ){if len (_bbea )!=6{_d .Log .Debug ("\u0045\u0052\u0052OR\u003a\u0020\u006c\u0065\u006e\u0028\u0066\u0029\u0020\u0021\u003d\u0020\u0036\u0020\u0028\u0025\u0064\u0029",len (_bbea ));
return ;};_beba ,_edb ,_cgdf ,_cgae ,_fege ,_aece :=_bbea [0],_bbea [1],_bbea [2],_bbea [3],_bbea [4],_bbea [5];_becg ._dccb =_fgb .NewMatrix (_beba ,_edb ,_cgdf ,_cgae ,_fege ,_aece );_becg ._gaae =_becg ._dccb ;};const (_decb markKind =iota ;_gbce ;_adeeb ;
_bdfc ;);func _bfece (_abef ,_ecbec float64 )bool {return _fc .Abs (_abef -_ecbec )<=_agc };

// Len returns the number of TextMarks in `ma`.
func (_cbcd *TextMarkArray )Len ()int {if _cbcd ==nil {return 0;};return len (_cbcd ._dbdc );};func _ceccc (_ddge _fgb .Matrix )_fgb .Point {_gcae ,_gcb :=_ddge .Translation ();return _fgb .Point {X :_gcae ,Y :_gcb };};func (_fafefe rulingList )connections (_abegd map[int ]intSet ,_eaegg int )intSet {_cffcc :=make (intSet );
_bedea :=make (intSet );var _aaae func (int );_aaae =func (_afda int ){if !_bedea .has (_afda ){_bedea .add (_afda );for _ggee :=range _fafefe {if _abegd [_ggee ].has (_afda ){_cffcc .add (_ggee );};};for _geab :=range _fafefe {if _cffcc .has (_geab ){_aaae (_geab );
};};};};_aaae (_eaegg );return _cffcc ;};func _begbd (_egdff *_da .Image ,_gdda _dd .Color )_ad .Image {_fgfb ,_abggg :=int (_egdff .Width ),int (_egdff .Height );_dgec :=_ad .NewRGBA (_ad .Rect (0,0,_fgfb ,_abggg ));for _ebbda :=0;_ebbda < _abggg ;_ebbda ++{for _dcgff :=0;
_dcgff < _fgfb ;_dcgff ++{_ddfa ,_bgfdf :=_egdff .ColorAt (_dcgff ,_ebbda );if _bgfdf !=nil {_d .Log .Debug ("\u0057\u0041\u0052\u004e\u003a\u0020\u0063o\u0075\u006c\u0064\u0020\u006e\u006f\u0074\u0020\u0072\u0065\u0074\u0072\u0069\u0065v\u0065 \u0069\u006d\u0061\u0067\u0065\u0020m\u0061\u0073\u006b\u0020\u0076\u0061\u006cu\u0065\u0020\u0061\u0074\u0020\u0028\u0025\u0064\u002c\u0020\u0025\u0064\u0029\u002e\u0020\u004f\u0075\u0074\u0070\u0075\u0074\u0020\u006da\u0079\u0020\u0062\u0065\u0020\u0069\u006e\u0063\u006f\u0072\u0072\u0065\u0063t\u002e",_dcgff ,_ebbda );
continue ;};_bbfcd ,_afcaad ,_bdee ,_ :=_ddfa .RGBA ();var _aeaebb _dd .Color ;if _bbfcd +_afcaad +_bdee ==0{_aeaebb =_dd .Transparent ;}else {_aeaebb =_gdda ;};_dgec .Set (_dcgff ,_ebbda ,_aeaebb );};};return _dgec ;};func (_bdgf rulingList )intersections ()map[int ]intSet {var _caced ,_agee []int ;
for _ffbde ,_ecebg :=range _bdgf {switch _ecebg ._deaac {case _deggg :_caced =append (_caced ,_ffbde );case _bbdc :_agee =append (_agee ,_ffbde );};};if len (_caced )< _adag +1||len (_agee )< _egaf +1{return nil ;};if len (_caced )+len (_agee )> _ffga {_d .Log .Debug ("\u0069\u006e\u0074\u0065\u0072\u0073e\u0063\u0074\u0069\u006f\u006e\u0073\u003a\u0020\u0054\u004f\u004f\u0020\u004d\u0041\u004e\u0059\u0020\u0072\u0075\u006ci\u006e\u0067\u0073\u0020\u0076\u0065\u0063\u0073\u003d\u0025\u0064\u0020\u003d\u0020%\u0064 \u0078\u0020\u0025\u0064",len (_bdgf ),len (_caced ),len (_agee ));
return nil ;};_geaa :=make (map[int ]intSet ,len (_caced )+len (_agee ));for _ ,_aecd :=range _caced {for _ ,_fdeffb :=range _agee {if _bdgf [_aecd ].intersects (_bdgf [_fdeffb ]){if _ ,_gfdb :=_geaa [_aecd ];!_gfdb {_geaa [_aecd ]=make (intSet );};if _ ,_cfecg :=_geaa [_fdeffb ];
!_cfecg {_geaa [_fdeffb ]=make (intSet );};_geaa [_aecd ].add (_fdeffb );_geaa [_fdeffb ].add (_aecd );};};};return _geaa ;};

// String returns a human readable description of `path`.
func (_adgd *subpath )String ()string {_cadc :=_adgd ._gadd ;_ggbg :=len (_cadc );if _ggbg <=5{return _be .Sprintf ("\u0025d\u003a\u0020\u0025\u0036\u002e\u0032f",_ggbg ,_cadc );};return _be .Sprintf ("\u0025d\u003a\u0020\u0025\u0036.\u0032\u0066\u0020\u0025\u0036.\u0032f\u0020.\u002e\u002e\u0020\u0025\u0036\u002e\u0032f",_ggbg ,_cadc [0],_cadc [1],_cadc [_ggbg -1]);
};func (_ccdgc rulingList )aligned ()bool {if len (_ccdgc )< 2{return false ;};_efdcd :=make (map[*ruling ]int );_efdcd [_ccdgc [0]]=0;for _ ,_cfcb :=range _ccdgc [1:]{_adgcd :=false ;for _ebgg :=range _efdcd {if _cfcb .gridIntersecting (_ebgg ){_efdcd [_ebgg ]++;
_adgcd =true ;break ;};};if !_adgcd {_efdcd [_cfcb ]=0;};};_dgea :=0;for _ ,_cccbe :=range _efdcd {if _cccbe ==0{_dgea ++;};};_abbeb :=float64 (_dgea )/float64 (len (_ccdgc ));_gbgag :=_abbeb <=1.0-_agad ;if _bdbb {_d .Log .Info ("\u0061\u006c\u0069\u0067\u006e\u0065\u0064\u003d\u0025\u0074\u0020\u0075\u006em\u0061\u0074\u0063\u0068\u0065\u0064=\u0025\u002e\u0032\u0066\u003d\u0025\u0064\u002f\u0025\u0064\u0020\u0076\u0065c\u0073\u003d\u0025\u0073",_gbgag ,_abbeb ,_dgea ,len (_ccdgc ),_ccdgc .String ());
};return _gbgag ;};func _beeae (_aceeb ,_aebga bounded )float64 {_fdef :=_efbe (_aceeb ,_aebga );if !_gcdba (_fdef ){return _fdef ;};return _caab (_aceeb ,_aebga );};func _cfb (_cd int )bool {return (_cd &1)!=0};func (_bbcb *textLine )appendWord (_agca *textWord ){_bbcb ._cdde =append (_bbcb ._cdde ,_agca );
_bbcb .PdfRectangle =_aea (_bbcb .PdfRectangle ,_agca .PdfRectangle );if _agca ._gaadd > _bbcb ._afdf {_bbcb ._afdf =_agca ._gaadd ;};if _agca ._bfeg > _bbcb ._bfdaf {_bbcb ._bfdaf =_agca ._bfeg ;};};var _dace =TextMark {Text :"\u005b\u0058\u005d",Original :"\u0020",Meta :true ,FillColor :_dd .White ,StrokeColor :_dd .White };
func _caab (_bega ,_eeda bounded )float64 {return _dceb (_bega )-_dceb (_eeda )};

// Text gets the extracted text contained in `l`.
func (_aaca *list )Text ()string {_ffbbg :=&_db .Builder {};_bfeb :="";_gece (_aaca ,_ffbbg ,&_bfeb );return _ffbbg .String ();};func (_edecb *textMark )bbox ()_da .PdfRectangle {return _edecb .PdfRectangle };

// ExtractPageText returns the text contents of `e` (an Extractor for a page) as a PageText.
// TODO(peterwilliams97): The stats complicate this function signature and aren't very useful.
//
//	Replace with a function like Extract() (*PageText, error)
func (_dfc *Extractor )ExtractPageText ()(*PageText ,int ,int ,error ){_dcaa ,_aegff ,_bgd ,_eda :=_dfc .extractPageText (_dfc ._cfd ,_dfc ._edd ,_fgb .IdentityMatrix (),0,false );if _eda !=nil &&_eda !=_da .ErrColorOutOfRange {return nil ,0,0,_eda ;};
if _dfc ._affe !=nil {_dcaa ._cggd ._adga =_dfc ._affe .ExtractionMode ;};_dcaa .computeViews ();_eda =_gffd (_dcaa );if _eda !=nil {return nil ,0,0,_eda ;};if _dfc ._affe !=nil {if _dfc ._affe .ApplyCropBox &&_dfc ._eg !=nil {_dcaa .ApplyArea (*_dfc ._eg );
};_dcaa ._cggd ._bagca =_dfc ._affe .DisableDocumentTags ;};return _dcaa ,_aegff ,_bgd ,nil ;};func _edfb (_dacg *list ,_affa *string )string {_dcgee :=_db .Split (_dacg ._dggg ,"\u000a");_fedgf :=&_db .Builder {};for _ ,_dge :=range _dcgee {if _dge !=""{_fedgf .WriteString (*_affa );
_fedgf .WriteString (_dge );_fedgf .WriteString ("\u000a");};};return _fedgf .String ();};func (_bda *textObject )moveText (_ddfd ,_edag float64 ){_bda .moveLP (_ddfd ,_edag )};var _bfbb *_fg .Regexp =_fg .MustCompile (_eace +"\u007c"+_dfag );func _ebdf (_bfeag ,_gddgg _da .PdfRectangle )bool {return _gddgg .Llx <=_bfeag .Urx &&_bfeag .Llx <=_gddgg .Urx ;
};

// String returns a string descibing `i`.
func (_fddbc gridTile )String ()string {_gggbd :=func (_ccdfa bool ,_daca string )string {if _ccdfa {return _daca ;};return "\u005f";};return _be .Sprintf ("\u00256\u002e2\u0066\u0020\u0025\u0031\u0073%\u0031\u0073%\u0031\u0073\u0025\u0031\u0073",_fddbc .PdfRectangle ,_gggbd (_fddbc ._ddbde ,"\u004c"),_gggbd (_fddbc ._fcbc ,"\u0052"),_gggbd (_fddbc ._cdcbc ,"\u0042"),_gggbd (_fddbc ._cabbf ,"\u0054"));
};func _ffee (_deaa []*textLine )map[float64 ][]*textLine {_ef .Slice (_deaa ,func (_eeec ,_gdcb int )bool {return _deaa [_eeec ]._bfdaf < _deaa [_gdcb ]._bfdaf });_fbfe :=map[float64 ][]*textLine {};for _ ,_gegf :=range _deaa {_agbc :=_acag (_gegf );_agbc =_fc .Round (_agbc );
_fbfe [_agbc ]=append (_fbfe [_agbc ],_gegf );};return _fbfe ;};type subpath struct{_gadd []_fgb .Point ;_dbba bool ;};func _edadc (_debag []*textWord ,_egddc *textWord )[]*textWord {for _edbgg ,_ffbf :=range _debag {if _ffbf ==_egddc {return _eebbg (_debag ,_edbgg );
};};_d .Log .Error ("\u0072\u0065\u006d\u006f\u0076e\u0057\u006f\u0072\u0064\u003a\u0020\u0077\u006f\u0072\u0064\u0073\u0020\u0064o\u0065\u0073\u006e\u0027\u0074\u0020\u0063\u006f\u006e\u0074\u0061\u0069\u006e\u0020\u0077\u006f\u0072\u0064\u003d\u0025\u0073",_egddc );
return nil ;};func (_bfdc *wordBag )getDepthIdx (_degf float64 )int {_gbfcc :=_bfdc .depthIndexes ();_cgfd :=_dcfc (_degf );if _cgfd < _gbfcc [0]{return _gbfcc [0];};if _cgfd > _gbfcc [len (_gbfcc )-1]{return _gbfcc [len (_gbfcc )-1];};return _cgfd ;};
var _agccg =map[markKind ]string {_gbce :"\u0073\u0074\u0072\u006f\u006b\u0065",_adeeb :"\u0066\u0069\u006c\u006c",_bdfc :"\u0061u\u0067\u006d\u0065\u006e\u0074"};func _gcag (_ceae []TextMark ,_fdcd *int ,_fcae TextMark )[]TextMark {_fcae .Offset =*_fdcd ;
_ceae =append (_ceae ,_fcae );*_fdcd +=len (_fcae .Text );return _ceae ;};

// TableInfo gets table information of the textmark `tm`.
func (_ccc *TextMark )TableInfo ()(*TextTable ,[][]int ){if !_ccc ._edac {return nil ,nil ;};_gcda :=_ccc ._agfg ;_aage :=_gcda .getCellInfo (*_ccc );return _gcda ,_aage ;};func (_gdff *wordBag )sort (){for _ ,_adabe :=range _gdff ._dgfd {_ef .Slice (_adabe ,func (_gcee ,_ecdef int )bool {return _efbe (_adabe [_gcee ],_adabe [_ecdef ])< 0});
};};

// ExtractText processes and extracts all text data in content streams and returns as a string.
// It takes into account character encodings in the PDF file, which are decoded by
// CharcodeBytesToUnicode.
// Characters that can't be decoded are replaced with MissingCodeRune ('\ufffd' = �).
func (_agbb *Extractor )ExtractText ()(string ,error ){_bgcb ,_ ,_ ,_acdc :=_agbb .ExtractTextWithStats ();return _bgcb ,_acdc ;};func _eab (_gdad []byte ,_ggf *_da .PdfFont )string {_bbc :=_ggf .BytesToCharcodes (_gdad );_efe ,_cbeb ,_gbbc :=_ggf .CharcodesToStrings (_bbc ,"");
if _gbbc > 0{_d .Log .Debug ("\u0072\u0065nd\u0065\u0072\u0054e\u0078\u0074\u003a\u0020num\u0043ha\u0072\u0073\u003d\u0025\u0064\u0020\u006eum\u004d\u0069\u0073\u0073\u0065\u0073\u003d%\u0064",_cbeb ,_gbbc );};_fdgc :=_db .Join (_efe ,"");return _fdgc ;
};func (_bcdba paraList )reorder (_bged []int ){_gcbd :=make (paraList ,len (_bcdba ));for _bcbee ,_ecade :=range _bged {_gcbd [_bcbee ]=_bcdba [_ecade ];};copy (_bcdba ,_gcbd );};func (_feb *textObject )setCharSpacing (_dgdb float64 ){if _feb ==nil {return ;
};_feb ._eada ._bgcg =_dgdb ;if _gecce {_d .Log .Info ("\u0073\u0065t\u0043\u0068\u0061\u0072\u0053\u0070\u0061\u0063\u0069\u006e\u0067\u003a\u0020\u0025\u002e\u0032\u0066\u0020\u0073\u0074\u0061\u0074e=\u0025\u0073",_dgdb ,_feb ._eada .String ());};};
func (_aac *imageExtractContext )extractContentStreamImages (_dbb string ,_fdeg *_da .PdfPageResources )error {_dab :=_cb .NewContentStreamParser (_dbb );_gec ,_bdf :=_dab .Parse ();if _bdf !=nil {return _bdf ;};if _aac ._bgb ==nil {_aac ._bgb =map[*_eec .PdfObjectStream ]*cachedImage {};
};if _aac ._aec ==nil {_aac ._aec =&ImageExtractOptions {};};_cef :=_cb .NewContentStreamProcessor (*_gec );_cef .AddHandler (_cb .HandlerConditionEnumAllOperands ,"",_aac .processOperand );return _cef .Process (_fdeg );};func (_aecc *textTable )putComposite (_cbdaae ,_ceba int ,_gcbfd paraList ,_fcded _da .PdfRectangle ){if len (_gcbfd )==0{_d .Log .Error ("\u0074\u0065xt\u0054\u0061\u0062l\u0065\u0029\u0020\u0070utC\u006fmp\u006f\u0073\u0069\u0074\u0065\u003a\u0020em\u0070\u0074\u0079\u0020\u0070\u0061\u0072a\u0073");
return ;};_eeeg :=compositeCell {PdfRectangle :_fcded ,paraList :_gcbfd };if _dgbg {_be .Printf ("\u0020\u0020\u0020\u0020\u0020\u0020\u0020\u0020\u0070\u0075\u0074\u0043\u006f\u006d\u0070o\u0073i\u0074\u0065\u0028\u0025\u0064\u002c\u0025\u0064\u0029\u003c\u002d\u0025\u0073\u000a",_cbdaae ,_ceba ,_eeeg .String ());
};_eeeg .updateBBox ();_aecc ._cfee [_eaabf (_cbdaae ,_ceba )]=_eeeg ;};func (_aaeeg *textTable )toTextTable ()TextTable {if _dgbg {_d .Log .Info ("t\u006fT\u0065\u0078\u0074\u0054\u0061\u0062\u006c\u0065:\u0020\u0025\u0064\u0020x \u0025\u0064",_aaeeg ._dgead ,_aaeeg ._caed );
};_babb :=make ([][]TableCell ,_aaeeg ._caed );for _fedcf :=0;_fedcf < _aaeeg ._caed ;_fedcf ++{_babb [_fedcf ]=make ([]TableCell ,_aaeeg ._dgead );for _bcegc :=0;_bcegc < _aaeeg ._dgead ;_bcegc ++{_edbab :=_aaeeg .get (_bcegc ,_fedcf );if _edbab ==nil {continue ;
};_cfga (_edbab ._bcfc );if _dgbg {_be .Printf ("\u0025\u0034\u0064 \u0025\u0032\u0064\u003a\u0020\u0025\u0073\u000a",_bcegc ,_fedcf ,_edbab );};_babb [_fedcf ][_bcegc ].Text =_edbab .text ();_aeaff :=0;_babb [_fedcf ][_bcegc ].Marks ._dbdc =_edbab .toTextMarks (&_aeaff );
};};_fgfcf :=TextTable {W :_aaeeg ._dgead ,H :_aaeeg ._caed ,Cells :_babb };_fgfcf .PdfRectangle =_aaeeg .bbox ();return _fgfcf ;};func _bbfc (_gcfb []*textMark ,_bcaa _da .PdfRectangle ,_dfdb rulingList ,_cdgd []gridTiling ,_bcea bool )paraList {_d .Log .Trace ("\u006d\u0061\u006b\u0065\u0054\u0065\u0078\u0074\u0050\u0061\u0067\u0065\u003a \u0025\u0064\u0020\u0065\u006c\u0065m\u0065\u006e\u0074\u0073\u0020\u0070\u0061\u0067\u0065\u0053\u0069\u007a\u0065=\u0025\u002e\u0032\u0066",len (_gcfb ),_bcaa );
if len (_gcfb )==0{return nil ;};_cbeba :=_ddbdg (_gcfb ,_bcaa ,false );if len (_cbeba )==0{return nil ;};_dfdb .log ("\u006d\u0061\u006be\u0054\u0065\u0078\u0074\u0050\u0061\u0067\u0065");_daag ,_eddbg :=_dfdb .vertsHorzs ();_ddfec :=_cbdg (_cbeba ,_bcaa .Ury ,_daag ,_eddbg );
_eefb :=_daedg (_ddfec ,_bcaa .Ury ,_daag ,_eddbg ,_bcea );_eefb =_dabb (_eefb );_dgbe :=make (paraList ,0,len (_eefb ));for _ ,_gbbb :=range _eefb {_bebg :=_gbbb .arrangeText (_bcea );if _bebg !=nil {_dgbe =append (_dgbe ,_bebg );};};if len (_dgbe )>=_aeeb {_dgbe =_dgbe .extractTables (_cdgd );
};_dgbe .sortReadingOrder ();_dgbe .sortTopoOrder ();_dgbe .log ("\u0073\u006f\u0072te\u0064\u0020\u0069\u006e\u0020\u0072\u0065\u0061\u0064\u0069\u006e\u0067\u0020\u006f\u0072\u0064\u0065\u0072");return _dgbe ;};

// PageTextOptions holds various options available in extraction process.
type PageTextOptions struct{_bagca bool ;_adga ExtractionMode ;};type stateStack []*textState ;func _gffd (_eabed *PageText )error {_bfac :=_b .GetLicenseKey ();if _bfac !=nil &&_bfac .IsLicensed ()||_abb {return nil ;};_be .Printf ("\u0055\u006e\u006c\u0069\u0063\u0065\u006e\u0073\u0065\u0064\u0020c\u006f\u0070\u0079\u0020\u006f\u0066\u0020\u0055\u006e\u0069P\u0044\u0046\u000a");
_be .Println ("-\u0020\u0047\u0065\u0074\u0020\u0061\u0020\u0066\u0072e\u0065\u0020\u0074\u0072\u0069\u0061\u006c l\u0069\u0063\u0065\u006es\u0065\u0020\u006f\u006e\u0020\u0068\u0074\u0074\u0070s:\u002f\u002fu\u006e\u0069\u0064\u006f\u0063\u002e\u0069\u006f");
return _cbb .New ("\u0075\u006e\u0069\u0070d\u0066\u0020\u006c\u0069\u0063\u0065\u006e\u0073\u0065\u0020c\u006fd\u0065\u0020\u0072\u0065\u0071\u0075\u0069r\u0065\u0064");};type lineRuling struct{_bgda rulingKind ;_bdagf markKind ;_dd .Color ;_gbag ,_bffbc _fgb .Point ;
};func _adbfd (_fgdec []int )[]int {_abgg :=make ([]int ,len (_fgdec ));for _bafg ,_fccd :=range _fgdec {_abgg [len (_fgdec )-1-_bafg ]=_fccd ;};return _abgg ;};func _bcdbe (_aeafg int ,_ccde map[int ][]float64 )([]int ,int ){_cccba :=make ([]int ,_aeafg );
_gbabd :=0;for _cgcbc :=0;_cgcbc < _aeafg ;_cgcbc ++{_cccba [_cgcbc ]=_gbabd ;_gbabd +=len (_ccde [_cgcbc ])+1;};return _cccba ,_gbabd ;};func (_fbbe paraList )merge ()*textPara {_d .Log .Trace ("\u006d\u0065\u0072\u0067\u0065:\u0020\u0070\u0061\u0072\u0061\u0073\u003d\u0025\u0064\u0020\u003d\u003d\u003d=\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u0078\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d",len (_fbbe ));
if len (_fbbe )==0{return nil ;};_fbbe .sortReadingOrder ();_ddeg :=_fbbe [0].PdfRectangle ;_ccdg :=_fbbe [0]._bcfc ;for _ ,_ecga :=range _fbbe [1:]{_ddeg =_aea (_ddeg ,_ecga .PdfRectangle );_ccdg =append (_ccdg ,_ecga ._bcfc ...);};return _bfdd (_ddeg ,_ccdg );
};func _edcg (_aafd *wordBag ,_aafe *textWord ,_afcf float64 )bool {return _aafe .Llx < _aafd .Urx +_afcf &&_aafd .Llx -_afcf < _aafe .Urx ;};func (_bbcf gridTiling )complete ()bool {for _ ,_gccdb :=range _bbcf ._gbaa {for _ ,_bfeda :=range _gccdb {if !_bfeda .complete (){return false ;
};};};return true ;};var _abb =false ;

// TableCell is a cell in a TextTable.
type TableCell struct{_da .PdfRectangle ;

// Text is the extracted text.
Text string ;

// Marks returns the TextMarks corresponding to the text in Text.
Marks TextMarkArray ;};

// String returns a human readable description of `s`.
func (_ggacc intSet )String ()string {var _bdfcc []int ;for _ecaaf :=range _ggacc {if _ggacc .has (_ecaaf ){_bdfcc =append (_bdfcc ,_ecaaf );};};_ef .Ints (_bdfcc );return _be .Sprintf ("\u0025\u002b\u0076",_bdfcc );};func (_fdegf paraList )sortReadingOrder (){_d .Log .Trace ("\u0073\u006fr\u0074\u0052\u0065\u0061\u0064i\u006e\u0067\u004f\u0072\u0064e\u0072\u003a\u0020\u0070\u0061\u0072\u0061\u0073\u003d\u0025\u0064\u0020\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u0078\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d",len (_fdegf ));
if len (_fdegf )<=1{return ;};_fdegf .computeEBBoxes ();_ef .Slice (_fdegf ,func (_ffdeb ,_egaa int )bool {return _babe (_fdegf [_ffdeb ],_fdegf [_egaa ])<=0});};func (_affcg paraList )tables ()[]TextTable {var _ffebb []TextTable ;if _dgbg {_d .Log .Info ("\u0070\u0061\u0072\u0061\u0073\u002e\u0074\u0061\u0062\u006c\u0065\u0073\u003a");
};for _ ,_afcd :=range _affcg {_ebge :=_afcd ._eaca ;if _ebge !=nil &&_ebge .isExportable (){_ffebb =append (_ffebb ,_ebge .toTextTable ());};};return _ffebb ;};func (_caaf rulingList )sortStrict (){_ef .Slice (_caaf ,func (_bdbf ,_fface int )bool {_abegf ,_adcde :=_caaf [_bdbf ],_caaf [_fface ];
_bdda ,_gaba :=_abegf ._deaac ,_adcde ._deaac ;if _bdda !=_gaba {return _bdda > _gaba ;};_aegffg ,_cagbf :=_abegf ._dfga ,_adcde ._dfga ;if !_gcdba (_aegffg -_cagbf ){return _aegffg < _cagbf ;};_aegffg ,_cagbf =_abegf ._fbed ,_adcde ._fbed ;if _aegffg !=_cagbf {return _aegffg < _cagbf ;
};return _abegf ._edbbe < _adcde ._edbbe ;});};

// Replace takes a pattern and replaces all the texts that much the pattern with `replacement`.
func (_aeb *Editor )Replace (pattern string ,replacement string ,pages []int )error {_eece :=map[int ]Match {};for _ ,_ddcd :=range pages {_edc ,_dcd :=_aeb ._efaa .GetPage (_ddcd );if _dcd !=nil {return _dcd ;};_acee ,_dcd :=New (_edc );if _dcd !=nil {return _dcd ;
};_fcf ,_ ,_ ,_dcd :=_acee .ExtractPageText ();if _dcd !=nil {return _dcd ;};_cdca :="";_acf :=_fcf .Text ();_dbeb ,_dcd :=_adf (pattern ,_acf );if _dcd !=nil {return _dcd ;};_fab :=_fcf .Marks ();_cde :=[]Box {};for _ ,_fage :=range _dbeb {_adbf ,_bfcc ,_fcbd :=_afd (_fage ,_fab ,pattern );
if _fcbd !=nil {return _fcbd ;};_ffe :=_dgb (_adbf );_cde =append (_cde ,_bfcc );replacement ,_fcbd =_cab (_ffe ,replacement ,pattern );if _fcbd !=nil {return _fcbd ;};};_cdca =_fcf .GetContentStreamOps ().String ();_cgd :=Match {Pattern :pattern ,Indexes :_dbeb ,Locations :_cde };
_edc .SetContentStreams ([]string {_cdca },_eec .NewFlateEncoder ());_eece [_ddcd ]=_cgd ;};return nil ;};func (_dbdgc *wordBag )allWords ()[]*textWord {var _cacf []*textWord ;for _ ,_cgfge :=range _dbdgc ._dgfd {_cacf =append (_cacf ,_cgfge ...);};return _cacf ;
};func (_bbdbe *textLine )bbox ()_da .PdfRectangle {return _bbdbe .PdfRectangle };

// String returns a description of `k`.
func (_aedf rulingKind )String ()string {_bbda ,_dcfbc :=_afdc [_aedf ];if !_dcfbc {return _be .Sprintf ("\u004e\u006ft\u0020\u0061\u0020r\u0075\u006c\u0069\u006e\u0067\u003a\u0020\u0025\u0064",_aedf );};return _bbda ;};func (_eggfe rulingList )merge ()*ruling {_bfbed :=_eggfe [0]._dfga ;
_cbge :=_eggfe [0]._fbed ;_dagd :=_eggfe [0]._edbbe ;for _ ,_bfccc :=range _eggfe [1:]{_bfbed +=_bfccc ._dfga ;if _bfccc ._fbed < _cbge {_cbge =_bfccc ._fbed ;};if _bfccc ._edbbe > _dagd {_dagd =_bfccc ._edbbe ;};};_cceg :=&ruling {_deaac :_eggfe [0]._deaac ,_cbbbb :_eggfe [0]._cbbbb ,Color :_eggfe [0].Color ,_dfga :_bfbed /float64 (len (_eggfe )),_fbed :_cbge ,_edbbe :_dagd };
if _def {_d .Log .Info ("\u006de\u0072g\u0065\u003a\u0020\u0025\u0032d\u0020\u0076e\u0063\u0073\u0020\u0025\u0073",len (_eggfe ),_cceg );for _fgfed ,_bfdaa :=range _eggfe {_be .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0073\u000a",_fgfed ,_bfdaa );
};};return _cceg ;};func (_fcgg *textObject )showText (_efea _eec .PdfObject ,_dec []byte ,_egee int ,_daffg string )error {return _fcgg .renderText (_efea ,_dec ,_egee ,_daffg );};type list struct{_ccgac []*textLine ;_afgc string ;_bebaa []*list ;_dggg string ;
};func _gdgea (_afgg ,_bbbf *textPara )bool {if _afgg ._eeaf ||_bbbf ._eeaf {return true ;};return _gcdba (_afgg .depth ()-_bbbf .depth ());};func (_cfff *wordBag )arrangeText (_cabc bool )*textPara {_cfff .sort ();if _decdg {_cfff .removeDuplicates ();
};var _ddgee []*textLine ;for _ ,_cfcdc :=range _cfff .depthIndexes (){for !_cfff .empty (_cfcdc ){_gfae :=_cfff .firstReadingIndex (_cfcdc );_ffdgb :=_cfff .firstWord (_gfae );_bbce :=_eabbe (_cfff ,_gfae );_dcfbd :=_ffdgb ._gaadd ;if _dcfbd < _abce {_dcfbd =_abce ;
};_cbdaa :=_ffdgb ._bfeg -_efbbg *_dcfbd ;_ceac :=_ffdgb ._bfeg +_efbbg *_dcfbd ;_gdde :=_gbga *_dcfbd ;_cbcgf :=_bcdb *_dcfbd ;_bcgag :for {var _edeea *textWord ;_fga :=0;for _ ,_baff :=range _cfff .depthBand (_cbdaa ,_ceac ){_eadc :=_cfff .highestWord (_baff ,_cbdaa ,_ceac );
if _eadc ==nil {continue ;};_cecgf :=_gfcg (_eadc ,_bbce ._cdde [len (_bbce ._cdde )-1]);if _cecgf < -_cbcgf {break _bcgag ;};if !_cabc &&_cecgf > _gdde {continue ;};if _edeea !=nil &&_efbe (_eadc ,_edeea )>=0{continue ;};_edeea =_eadc ;_fga =_baff ;};
if _edeea ==nil {break ;};_bbce .pullWord (_cfff ,_edeea ,_fga );};_bbce .markWordBoundaries ();_ddgee =append (_ddgee ,_bbce );};};if len (_ddgee )==0{return nil ;};_ef .Slice (_ddgee ,func (_agdd ,_egdf int )bool {return _babe (_ddgee [_agdd ],_ddgee [_egdf ])< 0});
_fcgf :=_bfdd (_cfff .PdfRectangle ,_ddgee );if _geae {_d .Log .Info ("\u0061\u0072\u0072an\u0067\u0065\u0054\u0065\u0078\u0074\u0020\u0021\u0021\u0021\u0020\u0070\u0061\u0072\u0061\u003d\u0025\u0073",_fcgf .String ());if _edaf {for _dgdf ,_ggcb :=range _fcgf ._bcfc {_be .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0073\u000a",_dgdf ,_ggcb .String ());
if _cbddd {for _baedd ,_dfdcd :=range _ggcb ._cdde {_be .Printf ("\u0025\u0038\u0064\u003a\u0020\u0025\u0073\u000a",_baedd ,_dfdcd .String ());for _bcegd ,_ebbdc :=range _dfdcd ._gaada {_be .Printf ("\u00251\u0032\u0064\u003a\u0020\u0025\u0073\n",_bcegd ,_ebbdc .String ());
};};};};};};return _fcgf ;};func (_fffc paraList )writeText (_afbgc _df .Writer ){for _afbgcg ,_bfedc :=range _fffc {if _bfedc ._eeaf {continue ;};_bfedc .writeText (_afbgc );if _afbgcg !=len (_fffc )-1{if _gdgea (_bfedc ,_fffc [_afbgcg +1]){_afbgc .Write ([]byte ("\u0020"));
}else {_afbgc .Write ([]byte ("\u000a"));_afbgc .Write ([]byte ("\u000a"));};};};_afbgc .Write ([]byte ("\u000a"));_afbgc .Write ([]byte ("\u000a"));};func (_cbdcf gridTiling )log (_fcfdg string ){if !_ceec {return ;};_d .Log .Info ("\u0074i\u006ci\u006e\u0067\u003a\u0020\u0025d\u0020\u0078 \u0025\u0064\u0020\u0025\u0071",len (_cbdcf ._agaeb ),len (_cbdcf ._gbbd ),_fcfdg );
_be .Printf ("\u0020\u0020\u0020l\u006c\u0078\u003d\u0025\u002e\u0032\u0066\u000a",_cbdcf ._agaeb );_be .Printf ("\u0020\u0020\u0020l\u006c\u0079\u003d\u0025\u002e\u0032\u0066\u000a",_cbdcf ._gbbd );for _deeg ,_agbda :=range _cbdcf ._gbbd {_afbe ,_gdga :=_cbdcf ._gbaa [_agbda ];
if !_gdga {continue ;};_be .Printf ("%\u0034\u0064\u003a\u0020\u0025\u0036\u002e\u0032\u0066\u000a",_deeg ,_agbda );for _dgfgc ,_gfdef :=range _cbdcf ._agaeb {_deea ,_ddca :=_afbe [_gfdef ];if !_ddca {continue ;};_be .Printf ("\u0025\u0038\u0064\u003a\u0020\u0025\u0073\u000a",_dgfgc ,_deea .String ());
};};};func (_ccce *shapesState )cubicTo (_bagce ,_afc ,_dfeb ,_fdfc ,_ebcda ,_ffeb float64 ){if _fbdb {_d .Log .Info ("\u0063\u0075\u0062\u0069\u0063\u0054\u006f\u003a");};_ccce .addPoint (_ebcda ,_ffeb );};type textObject struct{_fabg *Extractor ;_ebbb *_da .PdfPageResources ;
_edce _cb .GraphicsState ;_eada *textState ;_edec *stateStack ;_dccb _fgb .Matrix ;_gaae _fgb .Matrix ;_ffeg []*textMark ;_dggf bool ;};func (_dbce *ruling )equals (_dffa *ruling )bool {return _dbce ._deaac ==_dffa ._deaac &&_bfece (_dbce ._dfga ,_dffa ._dfga )&&_bfece (_dbce ._fbed ,_dffa ._fbed )&&_bfece (_dbce ._edbbe ,_dffa ._edbbe );
};func (_cbebe *textTable )subdivide ()*textTable {_cbebe .logComposite ("\u0073u\u0062\u0064\u0069\u0076\u0069\u0064e");_acec :=_cbebe .compositeRowCorridors ();_fcgbe :=_cbebe .compositeColCorridors ();if _dgbg {_d .Log .Info ("\u0073u\u0062\u0064i\u0076\u0069\u0064\u0065:\u000a\u0009\u0072o\u0077\u0043\u006f\u0072\u0072\u0069\u0064\u006f\u0072s=\u0025\u0073\u000a\t\u0063\u006fl\u0043\u006f\u0072\u0072\u0069\u0064o\u0072\u0073=\u0025\u0073",_ggbgg (_acec ),_ggbgg (_fcgbe ));
};if len (_acec )==0||len (_fcgbe )==0{return _cbebe ;};_ddgc (_acec );_ddgc (_fcgbe );if _dgbg {_d .Log .Info ("\u0073\u0075\u0062\u0064\u0069\u0076\u0069\u0064\u0065\u0020\u0066\u0069\u0078\u0065\u0064\u003a\u000a\u0009r\u006f\u0077\u0043\u006f\u0072\u0072\u0069d\u006f\u0072\u0073\u003d\u0025\u0073\u000a\u0009\u0063\u006f\u006cC\u006f\u0072\u0072\u0069\u0064\u006f\u0072\u0073\u003d\u0025\u0073",_ggbgg (_acec ),_ggbgg (_fcgbe ));
};_afcaa ,_gbbfb :=_bcdbe (_cbebe ._caed ,_acec );_afaee ,_afee :=_bcdbe (_cbebe ._dgead ,_fcgbe );_afgfd :=make (map[uint64 ]*textPara ,_afee *_gbbfb );_bgbb :=&textTable {PdfRectangle :_cbebe .PdfRectangle ,_gdba :_cbebe ._gdba ,_caed :_gbbfb ,_dgead :_afee ,_gbcde :_afgfd };
if _dgbg {_d .Log .Info ("\u0073\u0075b\u0064\u0069\u0076\u0069\u0064\u0065\u003a\u0020\u0063\u006f\u006d\u0070\u006f\u0073\u0069\u0074\u0065\u0020\u003d\u0020\u0025\u0064\u0020\u0078\u0020\u0025\u0064\u0020\u0063\u0065\u006c\u006c\u0073\u003d\u0020\u0025\u0064\u0020\u0078\u0020\u0025\u0064\u000a"+"\u0009\u0072\u006f\u0077\u0043\u006f\u0072\u0072\u0069\u0064\u006f\u0072s\u003d\u0025\u0073\u000a"+"\u0009\u0063\u006f\u006c\u0043\u006f\u0072\u0072\u0069\u0064\u006f\u0072s\u003d\u0025\u0073\u000a"+"\u0009\u0079\u004f\u0066\u0066\u0073\u0065\u0074\u0073=\u0025\u002b\u0076\u000a"+"\u0009\u0078\u004f\u0066\u0066\u0073\u0065\u0074\u0073\u003d\u0025\u002b\u0076",_cbebe ._dgead ,_cbebe ._caed ,_afee ,_gbbfb ,_ggbgg (_acec ),_ggbgg (_fcgbe ),_afcaa ,_afaee );
};for _bbdbc :=0;_bbdbc < _cbebe ._caed ;_bbdbc ++{_cbff :=_afcaa [_bbdbc ];for _egef :=0;_egef < _cbebe ._dgead ;_egef ++{_eccfb :=_afaee [_egef ];if _dgbg {_be .Printf ("\u0025\u0036\u0064\u002c %\u0032\u0064\u003a\u0020\u0078\u0030\u003d\u0025\u0064\u0020\u0079\u0030\u003d\u0025d\u000a",_egef ,_bbdbc ,_eccfb ,_cbff );
};_cegeg ,_aadfd :=_cbebe ._cfee [_eaabf (_egef ,_bbdbc )];if !_aadfd {continue ;};_dgcaf :=_cegeg .split (_acec [_bbdbc ],_fcgbe [_egef ]);for _adbbe :=0;_adbbe < _dgcaf ._caed ;_adbbe ++{for _dfaac :=0;_dfaac < _dgcaf ._dgead ;_dfaac ++{_gfdeg :=_dgcaf .get (_dfaac ,_adbbe );
_bgbb .put (_eccfb +_dfaac ,_cbff +_adbbe ,_gfdeg );if _dgbg {_be .Printf ("\u0025\u0038\u0064\u002c\u0020\u0025\u0032\u0064\u003a\u0020\u0025\u0073\u000a",_eccfb +_dfaac ,_cbff +_adbbe ,_gfdeg );};};};};};return _bgbb ;};func _eegce (_adggg []*textLine )[]*textLine {_gfdgb :=[]*textLine {};
for _ ,_fdcb :=range _adggg {_eaaa :=_fdcb .text ();_decf :=_bfbb .Find ([]byte (_eaaa ));if _decf !=nil {_gfdgb =append (_gfdgb ,_fdcb );};};return _gfdgb ;};var (_gbbcc =map[rune ]string {0x0060:"\u0300",0x02CB:"\u0300",0x0027:"\u0301",0x00B4:"\u0301",0x02B9:"\u0301",0x02CA:"\u0301",0x005E:"\u0302",0x02C6:"\u0302",0x007E:"\u0303",0x02DC:"\u0303",0x00AF:"\u0304",0x02C9:"\u0304",0x02D8:"\u0306",0x02D9:"\u0307",0x00A8:"\u0308",0x00B0:"\u030a",0x02DA:"\u030a",0x02BA:"\u030b",0x02DD:"\u030b",0x02C7:"\u030c",0x02C8:"\u030d",0x0022:"\u030e",0x02BB:"\u0312",0x02BC:"\u0313",0x0486:"\u0313",0x055A:"\u0313",0x02BD:"\u0314",0x0485:"\u0314",0x0559:"\u0314",0x02D4:"\u031d",0x02D5:"\u031e",0x02D6:"\u031f",0x02D7:"\u0320",0x02B2:"\u0321",0x00B8:"\u0327",0x02CC:"\u0329",0x02B7:"\u032b",0x02CD:"\u0331",0x005F:"\u0332",0x204E:"\u0359"};
);func (_dbeg *textLine )text ()string {var _edad []string ;for _ ,_ecbd :=range _dbeg ._cdde {if _ecbd ._edeb {_edad =append (_edad ,"\u0020");};_edad =append (_edad ,_ecbd ._gdcecg );};_ebfce :=_db .Join (_edad ,"");_dbed :=_ga ([]rune (_ebfce ));return _dbed ._ba ;
};func _geed (_fdec []*textMark ,_debd _da .PdfRectangle )string {_d .Log .Trace ("\u006d\u0061\u006b\u0065\u0053i\u006d\u0070\u006c\u0065\u0054\u0065\u0078\u0074\u003a\u0020\u0025\u0064\u0020e\u006c\u0065\u006d\u0065\u006e\u0074\u0073\u0020\u0070\u0061\u0067\u0065\u0053\u0069\u007a\u0065\u003d\u0025\u002e\u0032\u0066",len (_fdec ),_debd );
_abff :="";if len (_fdec )==0{return _abff ;};_fbcd :=_ddbdg (_fdec ,_debd ,true );if len (_fbcd )==0{return _abff ;};_ddfcc :=0.0;_fdbab :=true ;_aadb :="";for _ ,_dgca :=range _fbcd {_afge :=_dgca ._gaadd ;if _afge > _abce {_afge =_abce ;};if (_dgca ._bfeg -_ddfcc > _efbbg *_afge &&_ddfcc !=0.0)||(_ddfcc -_dgca ._bfeg > _afge *10){_afdbc :=_ga ([]rune (_aadb ));
_aadb =_afdbc ._ba ;_aadb +="\u000a";_abff +=_aadb ;_aadb ="";}else {if !_fdbab {_aadb +="\u0020";};};_aadb +=_dgca ._gdcecg ;_fdbab =false ;_ddfcc =_dgca ._bfeg ;};if _aadb !=""{_ffcg :=_ga ([]rune (_aadb ));_aadb =_ffcg ._ba ;_aadb +="\u000a";_abff +=_aadb ;
};return _abff ;};func _gdafc (_efbff []TextMark ,_cedc *TextTable )[]TextMark {var _bdcgg []TextMark ;for _ ,_gcefb :=range _efbff {_gcefb ._edac =true ;_gcefb ._agfg =_cedc ;_bdcgg =append (_bdcgg ,_gcefb );};return _bdcgg ;};func (_abdbe *ruling )alignsSec (_agccd *ruling )bool {const _dddg =_abbef +1.0;
return _abdbe ._fbed -_dddg <=_agccd ._edbbe &&_agccd ._fbed -_dddg <=_abdbe ._edbbe ;};func _afdbd (_begd map[float64 ]map[float64 ]gridTile )[]float64 {_afbfe :=make ([]float64 ,0,len (_begd ));_gdcec :=make (map[float64 ]struct{},len (_begd ));for _ ,_adeb :=range _begd {for _bdebf :=range _adeb {if _ ,_dffga :=_gdcec [_bdebf ];
_dffga {continue ;};_afbfe =append (_afbfe ,_bdebf );_gdcec [_bdebf ]=struct{}{};};};_ef .Float64s (_afbfe );return _afbfe ;};func _cbad (_feecd []*textLine ,_edcc string ,_gefdd []*list )*list {return &list {_ccgac :_feecd ,_afgc :_edcc ,_bebaa :_gefdd };
};type event struct{_cfddf float64 ;_fdecc bool ;_ddceb int ;};func _gdecg (_dbfa []TextMark ,_fagg *int ,_ebdc string )[]TextMark {_deecc :=_dace ;_deecc .Text =_ebdc ;return _gcag (_dbfa ,_fagg ,_deecc );};func _debaf (_bbad _da .PdfRectangle ,_eceg ,_dcaaed ,_aadfc ,_ddac *ruling )gridTile {_gdae :=_bbad .Llx ;
_bgdef :=_bbad .Urx ;_addc :=_bbad .Lly ;_dabe :=_bbad .Ury ;return gridTile {PdfRectangle :_bbad ,_ddbde :_eceg !=nil &&_eceg .encloses (_addc ,_dabe ),_fcbc :_dcaaed !=nil &&_dcaaed .encloses (_addc ,_dabe ),_cdcbc :_aadfc !=nil &&_aadfc .encloses (_gdae ,_bgdef ),_cabbf :_ddac !=nil &&_ddac .encloses (_gdae ,_bgdef )};
};func (_ecfa *textTable )growTable (){_gagcc :=func (_ffgbb paraList ){_ecfa ._caed ++;for _efdg :=0;_efdg < _ecfa ._dgead ;_efdg ++{_bbae :=_ffgbb [_efdg ];_ecfa .put (_efdg ,_ecfa ._caed -1,_bbae );};};_cgee :=func (_dbedb paraList ){_ecfa ._dgead ++;
for _bcbab :=0;_bcbab < _ecfa ._caed ;_bcbab ++{_afeg :=_dbedb [_bcbab ];_ecfa .put (_ecfa ._dgead -1,_bcbab ,_afeg );};};if _dacd {_ecfa .log ("\u0067r\u006f\u0077\u0054\u0061\u0062\u006ce");};for _fceg :=0;;_fceg ++{_ecfge :=false ;_acbc :=_ecfa .getDown ();
_eeea :=_ecfa .getRight ();if _dacd {_be .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0073\u000a",_fceg ,_ecfa );_be .Printf ("\u0020\u0020 \u0020\u0020\u0020 \u0020\u0064\u006f\u0077\u006e\u003d\u0025\u0073\u000a",_acbc );_be .Printf ("\u0020\u0020 \u0020\u0020\u0020 \u0072\u0069\u0067\u0068\u0074\u003d\u0025\u0073\u000a",_eeea );
};if _acbc !=nil &&_eeea !=nil {_gbbeb :=_acbc [len (_acbc )-1];if !_gbbeb .taken ()&&_gbbeb ==_eeea [len (_eeea )-1]{_gagcc (_acbc );if _eeea =_ecfa .getRight ();_eeea !=nil {_cgee (_eeea );_ecfa .put (_ecfa ._dgead -1,_ecfa ._caed -1,_gbbeb );};_ecfge =true ;
};};if !_ecfge &&_acbc !=nil {_gagcc (_acbc );_ecfge =true ;};if !_ecfge &&_eeea !=nil {_cgee (_eeea );_ecfge =true ;};if !_ecfge {break ;};};};func (_eefad *textTable )getComposite (_agbcg ,_feaaf int )(paraList ,_da .PdfRectangle ){_gcgb ,_affecf :=_eefad ._cfee [_eaabf (_agbcg ,_feaaf )];
if _dgbg {_be .Printf ("\u0020\u0020\u0020\u0020\u0020\u0020\u0020\u0020\u0067\u0065\u0074\u0043\u006f\u006d\u0070o\u0073i\u0074\u0065\u0028\u0025\u0064\u002c\u0025\u0064\u0029\u002d\u003e\u0025\u0073\u000a",_agbcg ,_feaaf ,_gcgb .String ());};if !_affecf {return nil ,_da .PdfRectangle {};
};return _gcgb .parasBBox ();};func _dbgc (_aggg []pathSection ){if _gfdf < 0.0{return ;};if _bdbb {_d .Log .Info ("\u0067\u0072\u0061\u006e\u0075\u006c\u0061\u0072\u0069\u007a\u0065\u003a\u0020\u0025\u0064 \u0073u\u0062\u0070\u0061\u0074\u0068\u0020\u0073\u0065\u0063\u0074\u0069\u006f\u006e\u0073",len (_aggg ));
};for _ddacb ,_bagcag :=range _aggg {for _bagd ,_acce :=range _bagcag ._abdb {for _ebaag ,_eadb :=range _acce ._gadd {_acce ._gadd [_ebaag ]=_fgb .Point {X :_aead (_eadb .X ),Y :_aead (_eadb .Y )};if _bdbb {_dgce :=_acce ._gadd [_ebaag ];if !_cedf (_eadb ,_dgce ){_ddea :=_fgb .Point {X :_dgce .X -_eadb .X ,Y :_dgce .Y -_eadb .Y };
_be .Printf ("\u0025\u0034d \u002d\u0020\u00254\u0064\u0020\u002d\u0020%4d\u003a %\u002e\u0032\u0066\u0020\u2192\u0020\u0025.2\u0066\u0020\u0028\u0025\u0067\u0029\u000a",_ddacb ,_bagd ,_ebaag ,_eadb ,_dgce ,_ddea );};};};};};};

// New returns an Extractor instance for extracting content from the input PDF page.
func New (page *_da .PdfPage )(*Extractor ,error ){return NewWithOptions (page ,nil )};

// PageImages represents extracted images on a PDF page with spatial information:
// display position and size.
type PageImages struct{Images []ImageMark ;};func (_aaec *shapesState )clearPath (){_aaec ._gdcce =nil ;_aaec ._ddgd =false ;if _fbdb {_d .Log .Info ("\u0043\u004c\u0045A\u0052\u003a\u0020\u0073\u0073\u003d\u0025\u0073",_aaec );};};func _babe (_ffgfb ,_ddddg bounded )float64 {_eede :=_caab (_ffgfb ,_ddddg );
if !_gcdba (_eede ){return _eede ;};return _efbe (_ffgfb ,_ddddg );};func _afcad (_dcga ,_agbbb _fgb .Point )bool {_bfbe :=_fc .Abs (_dcga .X -_agbbb .X );_eefcb :=_fc .Abs (_dcga .Y -_agbbb .Y );return _cggee (_eefcb ,_bfbe );};func (_dddde rulingList )comp (_bfbd ,_cefed int )bool {_eccfg ,_agecb :=_dddde [_bfbd ],_dddde [_cefed ];
_cfad ,_cbdc :=_eccfg ._deaac ,_agecb ._deaac ;if _cfad !=_cbdc {return _cfad > _cbdc ;};if _cfad ==_fdeb {return false ;};_edaaf :=func (_afef bool )bool {if _cfad ==_bbdc {return _afef ;};return !_afef ;};_abgf ,_fbdg :=_eccfg ._dfga ,_agecb ._dfga ;
if _abgf !=_fbdg {return _edaaf (_abgf > _fbdg );};_abgf ,_fbdg =_eccfg ._fbed ,_agecb ._fbed ;if _abgf !=_fbdg {return _edaaf (_abgf < _fbdg );};return _edaaf (_eccfg ._edbbe < _agecb ._edbbe );};

// ToTextMark returns the public view of `tm`.
func (_ccdfg *textMark )ToTextMark ()TextMark {return TextMark {Text :_ccdfg ._bbdbeb ,Original :_ccdfg ._eded ,BBox :_ccdfg ._deddc ,Font :_ccdfg ._ebdfb ,FontSize :_ccdfg ._abeg ,FillColor :_ccdfg ._cgaa ,StrokeColor :_ccdfg ._afbfc ,Orientation :_ccdfg ._gcbc ,DirectObject :_ccdfg ._dafc ,ObjString :_ccdfg ._cdbc ,Tw :_ccdfg .Tw ,Th :_ccdfg .Th ,Tc :_ccdfg ._fbbc ,Index :_ccdfg ._cgcc };
};

// String returns a string describing `ma`.
func (_afac TextMarkArray )String ()string {_beed :=len (_afac ._dbdc );if _beed ==0{return "\u0045\u004d\u0050T\u0059";};_dgcg :=_afac ._dbdc [0];_bdcb :=_afac ._dbdc [_beed -1];return _be .Sprintf ("\u007b\u0054\u0045\u0058\u0054\u004d\u0041\u0052K\u0041\u0052\u0052AY\u003a\u0020\u0025\u0064\u0020\u0065l\u0065\u006d\u0065\u006e\u0074\u0073\u000a\u0009\u0066\u0069\u0072\u0073\u0074\u003d\u0025s\u000a\u0009\u0020\u006c\u0061\u0073\u0074\u003d%\u0073\u007d",_beed ,_dgcg ,_bdcb );
};func _ag (_ac string ,_dbc bool ,_cc bool )BidiText {_bg :="\u006c\u0074\u0072";if _cc {_bg ="\u0074\u0074\u0062";}else if !_dbc {_bg ="\u0072\u0074\u006c";};return BidiText {_ba :_ac ,_bf :_bg };};func (_cfdab paraList )log (_fgda string ){if !_faaf {return ;
};_d .Log .Info ("%\u0038\u0073\u003a\u0020\u0025\u0064 \u0070\u0061\u0072\u0061\u0073\u0020=\u003d\u003d\u003d\u003d\u003d\u003d\u002d-\u002d\u002d\u002d\u002d\u002d\u003d\u003d\u003d\u003d\u003d=\u003d",_fgda ,len (_cfdab ));for _ggdb ,_bdca :=range _cfdab {if _bdca ==nil {continue ;
};_geegg :=_bdca .text ();_gaac :="\u0020\u0020";if _bdca ._eaca !=nil {_gaac =_be .Sprintf ("\u005b%\u0064\u0078\u0025\u0064\u005d",_bdca ._eaca ._dgead ,_bdca ._eaca ._caed );};_be .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0036\u002e\u0032\u0066\u0020\u0025s\u0020\u0025\u0071\u000a",_ggdb ,_bdca .PdfRectangle ,_gaac ,_aagbb (_geegg ,50));
};};func (_edaa compositeCell )String ()string {_aeca :="";if len (_edaa .paraList )> 0{_aeca =_aagbb (_edaa .paraList .merge ().text (),50);};return _be .Sprintf ("\u0025\u0036\u002e\u0032\u0066\u0020\u0025\u0064\u0020\u0070\u0061\u0072a\u0073\u0020\u0025\u0071",_edaa .PdfRectangle ,len (_edaa .paraList ),_aeca );
};func (_bbde paraList )topoOrder ()[]int {if _faaf {_d .Log .Info ("\u0074\u006f\u0070\u006f\u004f\u0072\u0064\u0065\u0072\u003a");};_ddbbe :=len (_bbde );_gfec :=make ([]bool ,_ddbbe );_baab :=make ([]int ,0,_ddbbe );_fcgc :=_bbde .llyOrdering ();var _bgadf func (_aadfe int );
_bgadf =func (_gedbb int ){_gfec [_gedbb ]=true ;for _eecb :=0;_eecb < _ddbbe ;_eecb ++{if !_gfec [_eecb ]{if _bbde .readBefore (_fcgc ,_gedbb ,_eecb ){_bgadf (_eecb );};};};_baab =append (_baab ,_gedbb );};for _cadeg :=0;_cadeg < _ddbbe ;_cadeg ++{if !_gfec [_cadeg ]{_bgadf (_cadeg );
};};return _adbfd (_baab );};func (_becaa intSet )add (_dadb int ){_becaa [_dadb ]=struct{}{}};func _gfdbe (_efgaa _eec .PdfObject ,_ebff _dd .Color )(_ad .Image ,error ){_dfbc ,_dabc :=_eec .GetStream (_efgaa );if !_dabc {return nil ,nil ;};_dbcdg ,_bfddg :=_da .NewXObjectImageFromStream (_dfbc );
if _bfddg !=nil {return nil ,_bfddg ;};_cgfc ,_bfddg :=_dbcdg .ToImage ();if _bfddg !=nil {return nil ,_bfddg ;};return _acbga (_cgfc ,_ebff ),nil ;};func (_fbfed *textTable )newTablePara ()*textPara {_cada :=_fbfed .computeBbox ();_cgab :=&textPara {PdfRectangle :_cada ,_eecdf :_cada ,_eaca :_fbfed };
if _dgbg {_d .Log .Info ("\u006e\u0065w\u0054\u0061\u0062l\u0065\u0050\u0061\u0072\u0061\u003a\u0020\u0025\u0073",_cgab );};return _cgab ;};type paraList []*textPara ;func (_afcg *textPara )bbox ()_da .PdfRectangle {return _afcg .PdfRectangle };

// String returns a description of `p`.
func (_bcbad *textPara )String ()string {if _bcbad ._eeaf {return _be .Sprintf ("\u0025\u0036\u002e\u0032\u0066\u0020\u005b\u0045\u004d\u0050\u0054\u0059\u005d",_bcbad .PdfRectangle );};_adggd :="";if _bcbad ._eaca !=nil {_adggd =_be .Sprintf ("\u005b\u0025\u0064\u0078\u0025\u0064\u005d\u0020",_bcbad ._eaca ._dgead ,_bcbad ._eaca ._caed );
};return _be .Sprintf ("\u0025\u0036\u002e\u0032f \u0025\u0073\u0025\u0064\u0020\u006c\u0069\u006e\u0065\u0073\u0020\u0025\u0071",_bcbad .PdfRectangle ,_adggd ,len (_bcbad ._bcfc ),_aagbb (_bcbad .text (),50));};func _becc (_acace ,_dadd float64 )string {_edde :=!_gcdba (_acace -_dadd );
if _edde {return "\u000a";};return "\u0020";};func _dbec (_ggfac *list )[]*list {var _bfdcd []*list ;for _ ,_aced :=range _ggfac ._bebaa {switch _aced ._afgc {case "\u004c\u0049":_abaa :=_baefa (_aced );_cfbfc :=_dbec (_aced );_acad :=_cbad (_abaa ,"\u0062\u0075\u006c\u006c\u0065\u0074",_cfbfc );
_cgea :=_caff (_abaa ,"");_acad ._dggg =_cgea ;_bfdcd =append (_bfdcd ,_acad );case "\u004c\u0042\u006fd\u0079":return _dbec (_aced );case "\u004c":_efcaa :=_dbec (_aced );_bfdcd =append (_bfdcd ,_efcaa ...);return _bfdcd ;};};return _bfdcd ;};func (_fcbb rulingList )log (_bcdc string ){if !_bdbb {return ;
};_d .Log .Info ("\u0023\u0023\u0023\u0020\u0025\u0031\u0030\u0073\u003a\u0020\u0076\u0065c\u0073\u003d\u0025\u0073",_bcdc ,_fcbb .String ());for _dgdbb ,_eccc :=range _fcbb {_be .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0073\u000a",_dgdbb ,_eccc .String ());
};};func (_edacf paraList )readBefore (_daeef []int ,_daba ,_gbdb int )bool {_gdecd ,_cdcafb :=_edacf [_daba ],_edacf [_gbdb ];if _agce (_gdecd ,_cdcafb )&&_gdecd .Lly > _cdcafb .Lly {return true ;};if !(_gdecd ._eecdf .Urx < _cdcafb ._eecdf .Llx ){return false ;
};_bbfgf ,_bafd :=_gdecd .Lly ,_cdcafb .Lly ;if _bbfgf > _bafd {_bafd ,_bbfgf =_bbfgf ,_bafd ;};_cfae :=_fc .Max (_gdecd ._eecdf .Llx ,_cdcafb ._eecdf .Llx );_dfefe :=_fc .Min (_gdecd ._eecdf .Urx ,_cdcafb ._eecdf .Urx );_cdac :=_edacf .llyRange (_daeef ,_bbfgf ,_bafd );
for _ ,_gdfdg :=range _cdac {if _gdfdg ==_daba ||_gdfdg ==_gbdb {continue ;};_dfbbb :=_edacf [_gdfdg ];if _dfbbb ._eecdf .Llx <=_dfefe &&_cfae <=_dfbbb ._eecdf .Urx {return false ;};};return true ;};const (_bba ="\u0045\u0052R\u004f\u0052\u003a\u0020\u0043\u0061\u006e\u0027\u0074\u0020\u0063\u006f\u006e\u0076\u0065\u0072\u0074\u0020\u0066\u006f\u006e\u0074\u0020\u006f\u0062\u006a\u0065\u0063\u0074\u002c\u0020\u0069\u006e\u0076\u0061\u006c\u0069\u0064\u0020\u0074\u0079\u0070\u0065";
_bfa ="\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0043a\u006e\u0027\u0074 g\u0065\u0074\u0020\u0066\u006f\u006et\u0020\u0070\u0072\u006f\u0070\u0065\u0072\u0074\u0069\u0065\u0073\u002c\u0020\u0066\u006fn\u0074\u0020\u006e\u006f\u0074\u0020\u0066\u006fu\u006e\u0064";
_bad ="\u0045\u0052\u0052O\u0052\u003a\u0020\u0043\u0061\u006e\u0027\u0074\u0020\u0067\u0065\u0074\u0020\u0066\u006f\u006e\u0074\u0020\u0073\u0074\u0072\u0065\u0061\u006d\u002c\u0020\u0069\u006e\u0076a\u006c\u0069\u0064\u0020\u0074\u0079\u0070\u0065";_fgd ="E\u0052R\u004f\u0052\u003a\u0020\u004e\u006f\u0020\u0066o\u006e\u0074\u0020\u0066ou\u006e\u0064";
);type pathSection struct{_abdb []*subpath ;_dd .Color ;};type compositeCell struct{_da .PdfRectangle ;paraList ;};

// NewEditor returns a new Editor object
func NewEditor (reader *_da .PdfReader )*Editor {return &Editor {_efaa :reader }};func (_facg *TextMarkArray )exists (_ffdd TextMark )bool {for _ ,_bfdg :=range _facg .Elements (){if _dg .DeepEqual (_ffdd .DirectObject ,_bfdg .DirectObject )&&_dg .DeepEqual (_ffdd .BBox ,_bfdg .BBox )&&_bfdg .Text ==_ffdd .Text {return true ;
};};return false ;};func (_ggcbe *textWord )toTextMarks (_agab *int )[]TextMark {var _eaaab []TextMark ;for _ ,_egbe :=range _ggcbe ._gaada {_eaaab =_gcag (_eaaab ,_agab ,_egbe .ToTextMark ());};return _eaaab ;};func (_bae *subpath )clear (){*_bae =subpath {}};


// String returns a string describing `pt`.
func (_aegb PageText )String ()string {_eecd :=_be .Sprintf ("P\u0061\u0067\u0065\u0054ex\u0074:\u0020\u0025\u0064\u0020\u0065l\u0065\u006d\u0065\u006e\u0074\u0073",len (_aegb ._fefg ));_gbgf :=[]string {"\u002d"+_eecd };for _ ,_bdad :=range _aegb ._fefg {_gbgf =append (_gbgf ,_bdad .String ());
};_gbgf =append (_gbgf ,"\u002b"+_eecd );return _db .Join (_gbgf ,"\u000a");};const (ExtractionModeLayout =iota ;ExtractionModePlain ;ExtractionModeLayoutNoBreaks ;);

// GetContentStreamOps returns the contentStreamOps field of `pt`.
func (_gcbe *PageText )GetContentStreamOps ()*_cb .ContentStreamOperations {return _gcbe ._efae };func (_gbfg paraList )extractTables (_aeeg []gridTiling )paraList {if _dgbg {_d .Log .Debug ("\u0065\u0078\u0074r\u0061\u0063\u0074\u0054\u0061\u0062\u006c\u0065\u0073\u003d\u0025\u0064\u0020\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u0078\u003d\u003d\u003d\u003d=\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d",len (_gbfg ));
};if len (_gbfg )< _aeeb {return _gbfg ;};_dedb :=_gbfg .findTables (_aeeg );if _dgbg {_d .Log .Info ("c\u006f\u006d\u0062\u0069\u006e\u0065d\u0020\u0074\u0061\u0062\u006c\u0065s\u0020\u0025\u0064\u0020\u003d\u003d\u003d=\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d=\u003d",len (_dedb ));
for _ffggb ,_ebdb :=range _dedb {_ebdb .log (_be .Sprintf ("c\u006f\u006d\u0062\u0069\u006e\u0065\u0064\u0020\u0025\u0064",_ffggb ));};};return _gbfg .applyTables (_dedb );};func _fdegg (_baef byte )bool {for _ ,_aeda :=range _ffag {if []byte (_aeda )[0]==_baef {return true ;
};};return false ;};type fontEntry struct{_ebfc *_da .PdfFont ;_abcb int64 ;};type ruling struct{_deaac rulingKind ;_cbbbb markKind ;_dd .Color ;_dfga float64 ;_fbed float64 ;_edbbe float64 ;_gedc float64 ;};func (_geba *shapesState )establishSubpath ()*subpath {_abgd ,_aebg :=_geba .lastpointEstablished ();
if !_aebg {_geba ._gdcce =append (_geba ._gdcce ,_ffddf (_abgd ));};if len (_geba ._gdcce )==0{return nil ;};_geba ._ddgd =false ;return _geba ._gdcce [len (_geba ._gdcce )-1];};type textLine struct{_da .PdfRectangle ;_bfdaf float64 ;_cdde []*textWord ;
_afdf float64 ;};

// BidiText represents a bidi text organized in its visual order
// with base direction of the text.
type BidiText struct{_ba string ;_bf string ;};type textMark struct{_da .PdfRectangle ;_gcbc int ;_bbdbeb string ;_eded string ;_ebdfb *_da .PdfFont ;_abeg float64 ;_fbbc float64 ;_ddbd _fgb .Matrix ;_gafb _fgb .Point ;_deddc _da .PdfRectangle ;_cgaa _dd .Color ;
_afbfc _dd .Color ;_dafc _eec .PdfObject ;_cdbc []string ;Tw float64 ;Th float64 ;_bfgc int ;_cgcc int ;};func (_cggcb *subpath )close (){if !_cedf (_cggcb ._gadd [0],_cggcb .last ()){_cggcb .add (_cggcb ._gadd [0]);};_cggcb ._dbba =true ;_cggcb .removeDuplicates ();
};func (_gddg *textObject )getFont (_bdgd string )(*_da .PdfFont ,error ){if _gddg ._fabg ._bcd !=nil {_fcdb ,_cdce :=_gddg .getFontDict (_bdgd );if _cdce !=nil {_d .Log .Debug ("\u0045\u0052\u0052OR\u003a\u0020\u0067\u0065\u0074\u0046\u006f\u006e\u0074:\u0020n\u0061m\u0065=\u0025\u0073\u002c\u0020\u0065\u0072\u0072\u006f\u0072\u003a\u0020\u0025\u0073",_bdgd ,_cdce .Error ());
return nil ,_cdce ;};_gddg ._fabg ._bd ++;_dfcg ,_dccf :=_gddg ._fabg ._bcd [_fcdb .String ()];if _dccf {_dfcg ._abcb =_gddg ._fabg ._bd ;return _dfcg ._ebfc ,nil ;};};_dggd ,_ddbg :=_gddg .getFontDict (_bdgd );if _ddbg !=nil {return nil ,_ddbg ;};_cfgc ,_ddbg :=_gddg .getFontDirect (_bdgd );
if _ddbg !=nil {return nil ,_ddbg ;};if _gddg ._fabg ._bcd !=nil {_bfab :=fontEntry {_cfgc ,_gddg ._fabg ._bd };if len (_gddg ._fabg ._bcd )>=_geeg {var _cdb []string ;for _decd :=range _gddg ._fabg ._bcd {_cdb =append (_cdb ,_decd );};_ef .Slice (_cdb ,func (_ceag ,_dded int )bool {return _gddg ._fabg ._bcd [_cdb [_ceag ]]._abcb < _gddg ._fabg ._bcd [_cdb [_dded ]]._abcb ;
});delete (_gddg ._fabg ._bcd ,_cdb [0]);};_gddg ._fabg ._bcd [_dggd .String ()]=_bfab ;};return _cfgc ,nil ;};

// PageText represents the layout of text on a device page.
type PageText struct{_fefg []*textMark ;_gbbcb string ;_edbb []TextMark ;_egd []TextTable ;_ded _da .PdfRectangle ;_gagcd []pathSection ;_dbgff []pathSection ;_ddbbb *_da .StructTreeRoot ;_edbf _eec .PdfObject ;_efae *_cb .ContentStreamOperations ;_cggd PageTextOptions ;
};func _gcdba (_aacda float64 )bool {return _fc .Abs (_aacda )< _gdge };type intSet map[int ]struct{};func (_aceb *wordBag )makeRemovals ()map[int ]map[*textWord ]struct{}{_edefe :=make (map[int ]map[*textWord ]struct{},len (_aceb ._dgfd ));for _afb :=range _aceb ._dgfd {_edefe [_afb ]=make (map[*textWord ]struct{});
};return _edefe ;};func (_cddb *textObject )setWordSpacing (_egf float64 ){if _cddb ==nil {return ;};_cddb ._eada ._gccd =_egf ;};

// Box represents the bounding box of a given textMark on pdf page.
// This might be used for different kinds of high lighting after doing the search
type Box struct{BBox _da .PdfRectangle ;};func _dabdc (_cecb ,_eaffd int )int {if _cecb < _eaffd {return _cecb ;};return _eaffd ;};func _ccga (_ggfc ,_adadf _da .PdfRectangle )bool {return _ggfc .Lly <=_adadf .Ury &&_adadf .Lly <=_ggfc .Ury ;};type textPara struct{_da .PdfRectangle ;
_eecdf _da .PdfRectangle ;_bcfc []*textLine ;_eaca *textTable ;_fgce bool ;_eeaf bool ;_fgfc *textPara ;_ecdg *textPara ;_dabg *textPara ;_dgcb *textPara ;_bgff []list ;};var _afdc =map[rulingKind ]string {_fdeb :"\u006e\u006f\u006e\u0065",_bbdc :"\u0068\u006f\u0072\u0069\u007a\u006f\u006e\u0074\u0061\u006c",_deggg :"\u0076\u0065\u0072\u0074\u0069\u0063\u0061\u006c"};
func (_adbfdd intSet )has (_eeegg int )bool {_ ,_fcebe :=_adbfdd [_eeegg ];return _fcebe };func (_fdaab paraList )llyOrdering ()[]int {_beeag :=make ([]int ,len (_fdaab ));for _dcad :=range _fdaab {_beeag [_dcad ]=_dcad ;};_ef .SliceStable (_beeag ,func (_efdae ,_cffba int )bool {_beee ,_adcgf :=_beeag [_efdae ],_beeag [_cffba ];
return _fdaab [_beee ].Lly < _fdaab [_adcgf ].Lly ;});return _beeag ;};const (_fdeb rulingKind =iota ;_bbdc ;_deggg ;);func (_gcdg *textTable )compositeColCorridors ()map[int ][]float64 {_bagfd :=make (map[int ][]float64 ,_gcdg ._dgead );if _dgbg {_d .Log .Info ("\u0063\u006f\u006d\u0070o\u0073\u0069\u0074\u0065\u0043\u006f\u006c\u0043\u006f\u0072r\u0069d\u006f\u0072\u0073\u003a\u0020\u0077\u003d%\u0064\u0020",_gcdg ._dgead );
};for _cfeeg :=0;_cfeeg < _gcdg ._dgead ;_cfeeg ++{_bagfd [_cfeeg ]=nil ;};return _bagfd ;};func (_deee *textPara )depth ()float64 {if _deee ._eeaf {return -1.0;};if len (_deee ._bcfc )> 0{return _deee ._bcfc [0]._bfdaf ;};return _deee ._eaca .depth ();
};func (_edddb paraList )inTile (_ebbbe gridTile )paraList {var _bbfgfa paraList ;for _ ,_bdeg :=range _edddb {if _ebbbe .contains (_bdeg .PdfRectangle ){_bbfgfa =append (_bbfgfa ,_bdeg );};};if _dgbg {_be .Printf ("\u0020 \u0020\u0069\u006e\u0054i\u006c\u0065\u003a\u0020\u0020%\u0073 \u0069n\u0073\u0069\u0064\u0065\u003d\u0025\u0064\n",_ebbbe ,len (_bbfgfa ));
for _fffbd ,_efbbf :=range _bbfgfa {_be .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0073\u000a",_fffbd ,_efbbf );};_be .Println ("");};return _bbfgfa ;};func (_dcbc *wordBag )removeDuplicates (){if _ddag {_d .Log .Info ("r\u0065m\u006f\u0076\u0065\u0044\u0075\u0070\u006c\u0069c\u0061\u0074\u0065\u0073: \u0025\u0071",_dcbc .text ());
};for _ ,_dacda :=range _dcbc .depthIndexes (){if len (_dcbc ._dgfd [_dacda ])==0{continue ;};_ggfcb :=_dcbc ._dgfd [_dacda ][0];_bccd :=_bbfg *_ggfcb ._gaadd ;_bgcf :=_ggfcb ._bfeg ;for _ ,_ffdc :=range _dcbc .depthBand (_bgcf ,_bgcf +_bccd ){_eefbe :=map[*textWord ]struct{}{};
_abdgf :=_dcbc ._dgfd [_ffdc ];for _ ,_affd :=range _abdgf {if _ ,_gbae :=_eefbe [_affd ];_gbae {continue ;};for _ ,_dgfec :=range _abdgf {if _ ,_daeeg :=_eefbe [_dgfec ];_daeeg {continue ;};if _dgfec !=_affd &&_dgfec ._gdcecg ==_affd ._gdcecg &&_fc .Abs (_dgfec .Llx -_affd .Llx )< _bccd &&_fc .Abs (_dgfec .Urx -_affd .Urx )< _bccd &&_fc .Abs (_dgfec .Lly -_affd .Lly )< _bccd &&_fc .Abs (_dgfec .Ury -_affd .Ury )< _bccd {_eefbe [_dgfec ]=struct{}{};
};};};if len (_eefbe )> 0{_dcadf :=0;for _ ,_bbcc :=range _abdgf {if _ ,_feaf :=_eefbe [_bbcc ];!_feaf {_abdgf [_dcadf ]=_bbcc ;_dcadf ++;};};_dcbc ._dgfd [_ffdc ]=_abdgf [:len (_abdgf )-len (_eefbe )];if len (_dcbc ._dgfd [_ffdc ])==0{delete (_dcbc ._dgfd ,_ffdc );
};};};};};func _gfcg (_aadg ,_bagb bounded )float64 {return _aadg .bbox ().Llx -_bagb .bbox ().Urx };func _agce (_decdd ,_fedbc *textPara )bool {return _ebdf (_decdd ._eecdf ,_fedbc ._eecdf )};func (_bdac *subpath )makeRectRuling (_fafg _dd .Color )(*ruling ,bool ){if _dfaa {_d .Log .Info ("\u006d\u0061\u006beR\u0065\u0063\u0074\u0052\u0075\u006c\u0069\u006e\u0067\u003a\u0020\u0070\u0061\u0074\u0068\u003d\u0025\u0076",_bdac );
};_fedgc :=_bdac ._gadd [:4];_bfgb :=make (map[int ]rulingKind ,len (_fedgc ));for _agec ,_abaff :=range _fedgc {_eacec :=_bdac ._gadd [(_agec +1)%4];_bfgb [_agec ]=_ddaf (_abaff ,_eacec );if _dfaa {_be .Printf ("\u0025\u0034\u0064: \u0025\u0073\u0020\u003d\u0020\u0025\u0036\u002e\u0032\u0066\u0020\u002d\u0020\u0025\u0036\u002e\u0032\u0066",_agec ,_bfgb [_agec ],_abaff ,_eacec );
};};if _dfaa {_be .Printf ("\u0020\u0020\u0020\u006b\u0069\u006e\u0064\u0073\u003d\u0025\u002b\u0076\u000a",_bfgb );};var _caad ,_gebd []int ;for _aacfb ,_acgf :=range _bfgb {switch _acgf {case _bbdc :_gebd =append (_gebd ,_aacfb );case _deggg :_caad =append (_caad ,_aacfb );
};};if _dfaa {_be .Printf ("\u0020\u0020 \u0068\u006f\u0072z\u0073\u003d\u0025\u0064\u0020\u0025\u002b\u0076\u000a",len (_gebd ),_gebd );_be .Printf ("\u0020\u0020 \u0076\u0065\u0072t\u0073\u003d\u0025\u0064\u0020\u0025\u002b\u0076\u000a",len (_caad ),_caad );
};_faega :=(len (_gebd )==2&&len (_caad )==2)||(len (_gebd )==2&&len (_caad )==0&&_afcad (_fedgc [_gebd [0]],_fedgc [_gebd [1]]))||(len (_caad )==2&&len (_gebd )==0&&_gcceg (_fedgc [_caad [0]],_fedgc [_caad [1]]));if _dfaa {_be .Printf (" \u0020\u0020\u0068\u006f\u0072\u007as\u003d\u0025\u0064\u0020\u0076\u0065\u0072\u0074\u0073=\u0025\u0064\u0020o\u006b=\u0025\u0074\u000a",len (_gebd ),len (_caad ),_faega );
};if !_faega {if _dfaa {_d .Log .Error ("\u0021!\u006d\u0061\u006b\u0065R\u0065\u0063\u0074\u0052\u0075l\u0069n\u0067:\u0020\u0070\u0061\u0074\u0068\u003d\u0025v",_bdac );_be .Printf (" \u0020\u0020\u0068\u006f\u0072\u007as\u003d\u0025\u0064\u0020\u0076\u0065\u0072\u0074\u0073=\u0025\u0064\u0020o\u006b=\u0025\u0074\u000a",len (_gebd ),len (_caad ),_faega );
};return &ruling {},false ;};if len (_caad )==0{for _caea ,_bbcbe :=range _bfgb {if _bbcbe !=_bbdc {_caad =append (_caad ,_caea );};};};if len (_gebd )==0{for _bcddg ,_dcbe :=range _bfgb {if _dcbe !=_deggg {_gebd =append (_gebd ,_bcddg );};};};if _dfaa {_d .Log .Info ("\u006da\u006b\u0065R\u0065\u0063\u0074\u0052u\u006c\u0069\u006eg\u003a\u0020\u0068\u006f\u0072\u007a\u0073\u003d\u0025d \u0076\u0065\u0072t\u0073\u003d%\u0064\u0020\u0070\u006f\u0069\u006et\u0073\u003d%\u0064\u000a"+"\u0009\u0020\u0068o\u0072\u007a\u0073\u003d\u0025\u002b\u0076\u000a"+"\u0009\u0020\u0076e\u0072\u0074\u0073\u003d\u0025\u002b\u0076\u000a"+"\t\u0070\u006f\u0069\u006e\u0074\u0073\u003d\u0025\u002b\u0076",len (_gebd ),len (_caad ),len (_fedgc ),_gebd ,_caad ,_fedgc );
};var _gaad ,_dcba ,_bgec ,_bcfge _fgb .Point ;if _fedgc [_gebd [0]].Y > _fedgc [_gebd [1]].Y {_bgec ,_bcfge =_fedgc [_gebd [0]],_fedgc [_gebd [1]];}else {_bgec ,_bcfge =_fedgc [_gebd [1]],_fedgc [_gebd [0]];};if _fedgc [_caad [0]].X > _fedgc [_caad [1]].X {_gaad ,_dcba =_fedgc [_caad [0]],_fedgc [_caad [1]];
}else {_gaad ,_dcba =_fedgc [_caad [1]],_fedgc [_caad [0]];};_gbcaf :=_da .PdfRectangle {Llx :_gaad .X ,Urx :_dcba .X ,Lly :_bcfge .Y ,Ury :_bgec .Y };if _gbcaf .Llx > _gbcaf .Urx {_gbcaf .Llx ,_gbcaf .Urx =_gbcaf .Urx ,_gbcaf .Llx ;};if _gbcaf .Lly > _gbcaf .Ury {_gbcaf .Lly ,_gbcaf .Ury =_gbcaf .Ury ,_gbcaf .Lly ;
};_cfcad :=rectRuling {PdfRectangle :_gbcaf ,_edcgc :_gegdb (_gbcaf ),Color :_fafg };if _cfcad ._edcgc ==_fdeb {if _dfaa {_d .Log .Error ("\u006da\u006b\u0065\u0052\u0065\u0063\u0074\u0052\u0075\u006c\u0069\u006eg\u003a\u0020\u006b\u0069\u006e\u0064\u003d\u006e\u0069\u006c");
};return nil ,false ;};_gfba ,_cdcb :=_cfcad .asRuling ();if !_cdcb {if _dfaa {_d .Log .Error ("\u006da\u006b\u0065\u0052\u0065c\u0074\u0052\u0075\u006c\u0069n\u0067:\u0020!\u0069\u0073\u0052\u0075\u006c\u0069\u006eg");};return nil ,false ;};if _bdbb {_be .Printf ("\u0020\u0020\u0020\u0072\u003d\u0025\u0073\u000a",_gfba .String ());
};return _gfba ,true ;};func _fbd (_daeb *_cb .ContentStreamOperation )(float64 ,error ){if len (_daeb .Params )!=1{_egad :=_cbb .New ("\u0069n\u0063\u006f\u0072\u0072e\u0063\u0074\u0020\u0070\u0061r\u0061m\u0065t\u0065\u0072\u0020\u0063\u006f\u0075\u006et");
_d .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0025\u0023\u0071\u0020\u0073\u0068\u006f\u0075\u006c\u0064\u0020h\u0061\u0076\u0065\u0020\u0025\u0064\u0020i\u006e\u0070\u0075\u0074\u0020\u0070\u0061\u0072\u0061\u006d\u0073,\u0020\u0067\u006f\u0074\u0020\u0025\u0064\u0020\u0025\u002b\u0076",_daeb .Operand ,1,len (_daeb .Params ),_daeb .Params );
return 0.0,_egad ;};return _eec .GetNumberAsFloat (_daeb .Params [0]);};func (_efef *textPara )toTextMarks (_eaeb *int )[]TextMark {if _efef ._eaca ==nil {return _efef .toCellTextMarks (_eaeb );};var _ebcc []TextMark ;for _fabb :=0;_fabb < _efef ._eaca ._caed ;
_fabb ++{for _agaa :=0;_agaa < _efef ._eaca ._dgead ;_agaa ++{_cbbaeg :=_efef ._eaca .get (_agaa ,_fabb );if _cbbaeg ==nil {_ebcc =_gdecg (_ebcc ,_eaeb ,"\u0009");}else {_dcbf :=_cbbaeg .toCellTextMarks (_eaeb );_ebcc =append (_ebcc ,_dcbf ...);};_ebcc =_gdecg (_ebcc ,_eaeb ,"\u0020");
};if _fabb < _efef ._eaca ._caed -1{_ebcc =_gdecg (_ebcc ,_eaeb ,"\u000a");};};_efgf :=_efef ._eaca ;if _efgf .isExportable (){_aded :=_efgf .toTextTable ();_ebcc =_gdafc (_ebcc ,&_aded );};return _ebcc ;};func _bc (_ea []string ,_dbg int ,_ab string )int {_aa :=_dbg ;
for ;_aa < len (_ea );_aa ++{if _ea [_aa ]!=_ab {return _aa ;};};return _aa ;};func (_cdfd *subpath )isQuadrilateral ()bool {if len (_cdfd ._gadd )< 4||len (_cdfd ._gadd )> 5{return false ;};if len (_cdfd ._gadd )==5{_gecad :=_cdfd ._gadd [0];_fbae :=_cdfd ._gadd [4];
if _gecad .X !=_fbae .X ||_gecad .Y !=_fbae .Y {return false ;};};return true ;};func (_edefed rectRuling )asRuling ()(*ruling ,bool ){_feedg :=ruling {_deaac :_edefed ._edcgc ,Color :_edefed .Color ,_cbbbb :_adeeb };switch _edefed ._edcgc {case _deggg :_feedg ._dfga =0.5*(_edefed .Llx +_edefed .Urx );
_feedg ._fbed =_edefed .Lly ;_feedg ._edbbe =_edefed .Ury ;_adbd ,_agbag :=_edefed .checkWidth (_edefed .Llx ,_edefed .Urx );if !_agbag {if _dfaa {_d .Log .Error ("\u0072\u0065\u0063\u0074\u0052\u0075l\u0069\u006e\u0067\u002e\u0061\u0073\u0052\u0075\u006c\u0069\u006e\u0067\u003a\u0020\u0072\u0075\u006c\u0069\u006e\u0067V\u0065\u0072\u0074\u0020\u0021\u0063\u0068\u0065\u0063\u006b\u0057\u0069\u0064\u0074h\u0020v\u003d\u0025\u002b\u0076",_edefed );
};return nil ,false ;};_feedg ._gedc =_adbd ;case _bbdc :_feedg ._dfga =0.5*(_edefed .Lly +_edefed .Ury );_feedg ._fbed =_edefed .Llx ;_feedg ._edbbe =_edefed .Urx ;_efbc ,_dddbb :=_edefed .checkWidth (_edefed .Lly ,_edefed .Ury );if !_dddbb {if _dfaa {_d .Log .Error ("\u0072\u0065\u0063\u0074\u0052\u0075l\u0069\u006e\u0067\u002e\u0061\u0073\u0052\u0075\u006c\u0069\u006e\u0067\u003a\u0020\u0072\u0075\u006c\u0069\u006e\u0067H\u006f\u0072\u007a\u0020\u0021\u0063\u0068\u0065\u0063\u006b\u0057\u0069\u0064\u0074h\u0020v\u003d\u0025\u002b\u0076",_edefed );
};return nil ,false ;};_feedg ._gedc =_efbc ;default:_d .Log .Error ("\u0062\u0061\u0064\u0020pr\u0069\u006d\u0061\u0072\u0079\u0020\u006b\u0069\u006e\u0064\u003d\u0025\u0064",_edefed ._edcgc );return nil ,false ;};return &_feedg ,true ;};func _bafb (_fbef []TextMark ,_bebac *int )[]TextMark {_aedac :=_fbef [len (_fbef )-1];
_afff :=[]rune (_aedac .Text );if len (_afff )==1{_fbef =_fbef [:len (_fbef )-1];_aggc :=_fbef [len (_fbef )-1];*_bebac =_aggc .Offset +len (_aggc .Text );}else {_ebdde :=_cgeb (_aedac .Text );*_bebac +=len (_ebdde )-len (_aedac .Text );_aedac .Text =_ebdde ;
};return _fbef ;};type cachedImage struct{_gad *_da .Image ;_ada _da .PdfColorspace ;};func _cggee (_edagb ,_caef float64 )bool {return _edagb /_fc .Max (_adabb ,_caef )< _bebf };func _afd (_fgde []int ,_agdf *TextMarkArray ,_bgf string )(*TextMarkArray ,Box ,error ){_fee :=Box {};
_eff :=_fgde [0];_gdfd :=_fgde [1];_ddcc :=len (_bgf )-len (_db .TrimLeft (_bgf ,"\u0020"));_dccd :=len (_bgf )-len (_db .TrimRight (_bgf ,"\u0020\u000a"));_eff =_eff +_ddcc ;_gdfd =_gdfd -_dccd ;_dgfe ,_cgdb :=_agdf .RangeOffset (_eff ,_gdfd );if _cgdb !=nil {return nil ,_fee ,_cgdb ;
};_fffe ,_ddga :=_dgfe .BBox ();if !_ddga {return nil ,_fee ,_be .Errorf ("\u0073\u0070\u0061\u006e\u004d\u0061\u0072\u006bs\u002e\u0042\u0042ox\u0020\u0068\u0061\u0073\u0020\u006eo\u0020\u0062\u006f\u0075\u006e\u0064\u0069\u006e\u0067\u0020\u0062\u006f\u0078\u002e\u0020s\u0070\u0061\u006e\u004d\u0061\u0072\u006b\u0073=\u0025\u0073",_dgfe );
};_fee =Box {BBox :_fffe };return _dgfe ,_fee ,nil ;};func (_gfff *textLine )markWordBoundaries (){_ebbd :=_acabd *_gfff ._afdf ;for _egge ,_dcfd :=range _gfff ._cdde [1:]{if _gfcg (_dcfd ,_gfff ._cdde [_egge ])>=_ebbd {_dcfd ._edeb =true ;};};};func (_aeaf *textTable )markCells (){for _dbcbc :=0;
_dbcbc < _aeaf ._caed ;_dbcbc ++{for _fdgfc :=0;_fdgfc < _aeaf ._dgead ;_fdgfc ++{_aebf :=_aeaf .get (_fdgfc ,_dbcbc );if _aebf !=nil {_aebf ._fgce =true ;};};};};func _aead (_afce float64 )float64 {return _gfdf *_fc .Round (_afce /_gfdf )};var _cgca =_fg .MustCompile ("\u005e\u005c\u0073\u002a\u0028\u005c\u0064\u002b\u005c\u002e\u003f|\u005b\u0049\u0069\u0076\u005d\u002b\u0029\u005c\u0073\u002a\\\u0029\u003f\u0024");
func (_dcbb *compositeCell )updateBBox (){for _ ,_dfdd :=range _dcbb .paraList {_dcbb .PdfRectangle =_aea (_dcbb .PdfRectangle ,_dfdd .PdfRectangle );};};func _eabf (_ffgb func (*wordBag ,*textWord ,float64 )bool ,_fdba float64 )func (*wordBag ,*textWord )bool {return func (_faff *wordBag ,_fbff *textWord )bool {return _ffgb (_faff ,_fbff ,_fdba )};
};func _gcedf (_bbbef ,_agaee ,_cfbe ,_ggbc *textPara )*textTable {_fdab :=&textTable {_dgead :2,_caed :2,_gbcde :make (map[uint64 ]*textPara ,4)};_fdab .put (0,0,_bbbef );_fdab .put (1,0,_agaee );_fdab .put (0,1,_cfbe );_fdab .put (1,1,_ggbc );return _fdab ;
};func (_dbag *wordBag )minDepth ()float64 {return _dbag ._adfa -(_dbag .Ury -_dbag ._abad )};func (_cafc *textPara )writeCellText (_edcbc _df .Writer ){for _gbacd ,_ccbgg :=range _cafc ._bcfc {_gfgf :=_ccbgg .text ();_edee :=_aeecg &&_ccbgg .endsInHyphen ()&&_gbacd !=len (_cafc ._bcfc )-1;
if _edee {_gfgf =_cgeb (_gfgf );};_edcbc .Write ([]byte (_gfgf ));if !(_edee ||_gbacd ==len (_cafc ._bcfc )-1){_edcbc .Write ([]byte (_becc (_ccbgg ._bfdaf ,_cafc ._bcfc [_gbacd +1]._bfdaf )));};};};func _abg (_ccg *TextMarkArray )string {_fbc :="";for _ ,_cdd :=range _ccg .Elements (){_fbc +=_cdd .Text ;
};return _fbc ;};func (_adade rulingList )asTiling ()gridTiling {if _ceec {_d .Log .Info ("r\u0075\u006ci\u006e\u0067\u004c\u0069\u0073\u0074\u002e\u0061\u0073\u0054\u0069\u006c\u0069\u006e\u0067\u003a\u0020\u0076\u0065\u0063s\u003d\u0025\u0064\u0020\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d=\u003d\u003d\u003d\u003d\u003d\u002b\u002b\u002b\u0020\u003d\u003d\u003d\u003d=\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d=\u003d",len (_adade ));
};for _dfda ,_befa :=range _adade [1:]{_bedgab :=_adade [_dfda ];if _bedgab .alignsPrimary (_befa )&&_bedgab .alignsSec (_befa ){_d .Log .Error ("a\u0073\u0054\u0069\u006c\u0069\u006e\u0067\u003a\u0020\u0044\u0075\u0070\u006c\u0069\u0063\u0061\u0074\u0065 \u0072\u0075\u006c\u0069\u006e\u0067\u0073\u002e\u000a\u0009v=\u0025\u0073\u000a\t\u0077=\u0025\u0073",_befa ,_bedgab );
};};_adade .sortStrict ();_adade .log ("\u0073n\u0061\u0070\u0070\u0065\u0064");_beccg ,_bggef :=_adade .vertsHorzs ();_bbggg :=_beccg .primaries ();_daadfa :=_bggef .primaries ();_abddb :=len (_bbggg )-1;_gfbf :=len (_daadfa )-1;if _abddb ==0||_gfbf ==0{return gridTiling {};
};_dafad :=_da .PdfRectangle {Llx :_bbggg [0],Urx :_bbggg [_abddb ],Lly :_daadfa [0],Ury :_daadfa [_gfbf ]};if _ceec {_d .Log .Info ("\u0072\u0075l\u0069\u006e\u0067\u004c\u0069\u0073\u0074\u002e\u0061\u0073\u0054\u0069\u006c\u0069\u006e\u0067\u003a\u0020\u0076\u0065\u0072\u0074s=\u0025\u0064",len (_beccg ));
for _gbaf ,_dabf :=range _beccg {_be .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0073\u000a",_gbaf ,_dabf );};_d .Log .Info ("\u0072\u0075l\u0069\u006e\u0067\u004c\u0069\u0073\u0074\u002e\u0061\u0073\u0054\u0069\u006c\u0069\u006e\u0067\u003a\u0020\u0068\u006f\u0072\u007as=\u0025\u0064",len (_bggef ));
for _bcffa ,_cbege :=range _bggef {_be .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0073\u000a",_bcffa ,_cbege );};_d .Log .Info ("\u0072\u0075\u006c\u0069\u006eg\u004c\u0069\u0073\u0074\u002e\u0061\u0073\u0054\u0069\u006c\u0069\u006e\u0067:\u0020\u0020\u0077\u0078\u0068\u003d\u0025\u0064\u0078\u0025\u0064\u000a\u0009\u006c\u006c\u0078\u003d\u0025\u002e\u0032\u0066\u000a\u0009\u006c\u006c\u0079\u003d\u0025\u002e\u0032f",_abddb ,_gfbf ,_bbggg ,_daadfa );
};_efcge :=make ([]gridTile ,_abddb *_gfbf );for _ceea :=_gfbf -1;_ceea >=0;_ceea --{_gfee :=_daadfa [_ceea ];_ebgee :=_daadfa [_ceea +1];for _ggbd :=0;_ggbd < _abddb ;_ggbd ++{_gbab :=_bbggg [_ggbd ];_gada :=_bbggg [_ggbd +1];_egeeg :=_beccg .findPrimSec (_gbab ,_gfee );
_fadg :=_beccg .findPrimSec (_gada ,_gfee );_ffdef :=_bggef .findPrimSec (_gfee ,_gbab );_cbefc :=_bggef .findPrimSec (_ebgee ,_gbab );_abcd :=_da .PdfRectangle {Llx :_gbab ,Urx :_gada ,Lly :_gfee ,Ury :_ebgee };_cgead :=_debaf (_abcd ,_egeeg ,_fadg ,_ffdef ,_cbefc );
_efcge [_ceea *_abddb +_ggbd ]=_cgead ;if _ceec {_be .Printf ("\u0020\u0020\u0078\u003d\u0025\u0032\u0064\u0020\u0079\u003d\u0025\u0032\u0064\u003a\u0020%\u0073 \u0025\u0036\u002e\u0032\u0066\u0020\u0078\u0020\u0025\u0036\u002e\u0032\u0066\u000a",_ggbd ,_ceea ,_cgead .String (),_cgead .Width (),_cgead .Height ());
};};};if _ceec {_d .Log .Info ("r\u0075\u006c\u0069\u006e\u0067\u004c\u0069\u0073\u0074.\u0061\u0073\u0054\u0069\u006c\u0069\u006eg:\u0020\u0063\u006f\u0061l\u0065\u0073\u0063\u0065\u0020\u0068\u006f\u0072\u0069zo\u006e\u0074a\u006c\u002e\u0020\u0025\u0036\u002e\u0032\u0066",_dafad );
};_dfcgf :=make ([]map[float64 ]gridTile ,_gfbf );for _afbd :=_gfbf -1;_afbd >=0;_afbd --{if _ceec {_be .Printf ("\u0020\u0020\u0079\u003d\u0025\u0032\u0064\u000a",_afbd );};_dfcgf [_afbd ]=make (map[float64 ]gridTile ,_abddb );for _bgbf :=0;_bgbf < _abddb ;
_bgbf ++{_edfbd :=_efcge [_afbd *_abddb +_bgbf ];if _ceec {_be .Printf ("\u0020\u0020\u0025\u0034\u0064\u003a\u0020\u0025\u0073\u000a",_bgbf ,_edfbd );};if !_edfbd ._ddbde {continue ;};_efage :=_bgbf ;for _bbfbf :=_bgbf +1;!_edfbd ._fcbc &&_bbfbf < _abddb ;
_bbfbf ++{_gadbf :=_efcge [_afbd *_abddb +_bbfbf ];_edfbd .Urx =_gadbf .Urx ;_edfbd ._cabbf =_edfbd ._cabbf ||_gadbf ._cabbf ;_edfbd ._cdcbc =_edfbd ._cdcbc ||_gadbf ._cdcbc ;_edfbd ._fcbc =_gadbf ._fcbc ;if _ceec {_be .Printf ("\u0020 \u0020%\u0034\u0064\u003a\u0020\u0025s\u0020\u2192 \u0025\u0073\u000a",_bbfbf ,_gadbf ,_edfbd );
};_efage =_bbfbf ;};if _ceec {_be .Printf (" \u0020 \u0025\u0032\u0064\u0020\u002d\u0020\u0025\u0032d\u0020\u2192\u0020\u0025s\n",_bgbf ,_efage ,_edfbd );};_bgbf =_efage ;_dfcgf [_afbd ][_edfbd .Llx ]=_edfbd ;};};_gedf :=make (map[float64 ]map[float64 ]gridTile ,_gfbf );
_fcgfc :=make (map[float64 ]map[float64 ]struct{},_gfbf );for _eedea :=_gfbf -1;_eedea >=0;_eedea --{_cddg :=_efcge [_eedea *_abddb ].Lly ;_gedf [_cddg ]=make (map[float64 ]gridTile ,_abddb );_fcgfc [_cddg ]=make (map[float64 ]struct{},_abddb );};if _ceec {_d .Log .Info ("\u0072u\u006c\u0069n\u0067\u004c\u0069s\u0074\u002e\u0061\u0073\u0054\u0069\u006ci\u006e\u0067\u003a\u0020\u0063\u006fa\u006c\u0065\u0073\u0063\u0065\u0020\u0076\u0065\u0072\u0074\u0069c\u0061\u006c\u002e\u0020\u0025\u0036\u002e\u0032\u0066",_dafad );
};for _aedg :=_gfbf -1;_aedg >=0;_aedg --{_ecdgf :=_efcge [_aedg *_abddb ].Lly ;_bbfgg :=_dfcgf [_aedg ];if _ceec {_be .Printf ("\u0020\u0020\u0079\u003d\u0025\u0032\u0064\u000a",_aedg );};for _ ,_ebfbd :=range _aedc (_bbfgg ){if _ ,_adfd :=_fcgfc [_ecdgf ][_ebfbd ];
_adfd {continue ;};_fggb :=_bbfgg [_ebfbd ];if _ceec {_be .Printf (" \u0020\u0020\u0020\u0020\u0076\u0030\u003d\u0025\u0073\u000a",_fggb .String ());};for _deca :=_aedg -1;_deca >=0;_deca --{if _fggb ._cdcbc {break ;};_aegc :=_dfcgf [_deca ];_fggd ,_ffed :=_aegc [_ebfbd ];
if !_ffed {break ;};if _fggd .Urx !=_fggb .Urx {break ;};_fggb ._cdcbc =_fggd ._cdcbc ;_fggb .Lly =_fggd .Lly ;if _ceec {_be .Printf ("\u0020\u0020\u0020\u0020  \u0020\u0020\u0076\u003d\u0025\u0073\u0020\u0076\u0030\u003d\u0025\u0073\u000a",_fggd .String (),_fggb .String ());
};_fcgfc [_fggd .Lly ][_fggd .Llx ]=struct{}{};};if _aedg ==0{_fggb ._cdcbc =true ;};if _fggb .complete (){_gedf [_ecdgf ][_ebfbd ]=_fggb ;};};};_bbbc :=gridTiling {PdfRectangle :_dafad ,_agaeb :_afdbd (_gedf ),_gbbd :_ecfc (_gedf ),_gbaa :_gedf };_bbbc .log ("\u0043r\u0065\u0061\u0074\u0065\u0064");
return _bbbc ;};func (_gdfg rulingList )mergePrimary ()float64 {_cfdf :=_gdfg [0]._dfga ;for _ ,_dcgaf :=range _gdfg [1:]{_cfdf +=_dcgaf ._dfga ;};return _cfdf /float64 (len (_gdfg ));};func (_adbfc rulingList )augmentGrid ()(rulingList ,rulingList ){_gcggc ,_gbcff :=_adbfc .vertsHorzs ();
if len (_gcggc )==0||len (_gbcff )==0{return _gcggc ,_gbcff ;};_eccf ,_aabf :=_gcggc ,_gbcff ;_fefga :=_gcggc .bbox ();_egacb :=_gbcff .bbox ();if _bdbb {_d .Log .Info ("\u0061u\u0067\u006d\u0065\u006e\u0074\u0047\u0072\u0069\u0064\u003a\u0020b\u0062\u006f\u0078\u0056\u003d\u0025\u0036\u002e\u0032\u0066",_fefga );
_d .Log .Info ("\u0061u\u0067\u006d\u0065\u006e\u0074\u0047\u0072\u0069\u0064\u003a\u0020b\u0062\u006f\u0078\u0048\u003d\u0025\u0036\u002e\u0032\u0066",_egacb );};var _edfbb ,_bebdb ,_fcee ,_cedb *ruling ;if _egacb .Llx < _fefga .Llx -_agc {_edfbb =&ruling {_cbbbb :_bdfc ,_deaac :_deggg ,_dfga :_egacb .Llx ,_fbed :_fefga .Lly ,_edbbe :_fefga .Ury };
_gcggc =append (rulingList {_edfbb },_gcggc ...);};if _egacb .Urx > _fefga .Urx +_agc {_bebdb =&ruling {_cbbbb :_bdfc ,_deaac :_deggg ,_dfga :_egacb .Urx ,_fbed :_fefga .Lly ,_edbbe :_fefga .Ury };_gcggc =append (_gcggc ,_bebdb );};if _fefga .Lly < _egacb .Lly -_agc {_fcee =&ruling {_cbbbb :_bdfc ,_deaac :_bbdc ,_dfga :_fefga .Lly ,_fbed :_egacb .Llx ,_edbbe :_egacb .Urx };
_gbcff =append (rulingList {_fcee },_gbcff ...);};if _fefga .Ury > _egacb .Ury +_agc {_cedb =&ruling {_cbbbb :_bdfc ,_deaac :_bbdc ,_dfga :_fefga .Ury ,_fbed :_egacb .Llx ,_edbbe :_egacb .Urx };_gbcff =append (_gbcff ,_cedb );};if len (_gcggc )+len (_gbcff )==len (_adbfc ){return _eccf ,_aabf ;
};_aefge :=append (_gcggc ,_gbcff ...);_adbfc .log ("u\u006e\u0061\u0075\u0067\u006d\u0065\u006e\u0074\u0065\u0064");_aefge .log ("\u0061u\u0067\u006d\u0065\u006e\u0074\u0065d");return _gcggc ,_gbcff ;};func _efed (_gebag _da .PdfRectangle )*ruling {return &ruling {_deaac :_bbdc ,_dfga :_gebag .Ury ,_fbed :_gebag .Llx ,_edbbe :_gebag .Urx };
};func (_gged paraList )addNeighbours (){_fcaeb :=func (_fdegc []int ,_bfgag *textPara )([]*textPara ,[]*textPara ){_fefa :=make ([]*textPara ,0,len (_fdegc )-1);_fagbb :=make ([]*textPara ,0,len (_fdegc )-1);for _ ,_adcdeg :=range _fdegc {_ebba :=_gged [_adcdeg ];
if _ebba .Urx <=_bfgag .Llx {_fefa =append (_fefa ,_ebba );}else if _ebba .Llx >=_bfgag .Urx {_fagbb =append (_fagbb ,_ebba );};};return _fefa ,_fagbb ;};_edbed :=func (_fegaf []int ,_bfdf *textPara )([]*textPara ,[]*textPara ){_eacf :=make ([]*textPara ,0,len (_fegaf )-1);
_deedc :=make ([]*textPara ,0,len (_fegaf )-1);for _ ,_fbeda :=range _fegaf {_feaae :=_gged [_fbeda ];if _feaae .Ury <=_bfdf .Lly {_deedc =append (_deedc ,_feaae );}else if _feaae .Lly >=_bfdf .Ury {_eacf =append (_eacf ,_feaae );};};return _eacf ,_deedc ;
};_eadgd :=_gged .yNeighbours (_eaeg );for _ ,_cccf :=range _gged {_bcag :=_eadgd [_cccf ];if len (_bcag )==0{continue ;};_cagf ,_ggedg :=_fcaeb (_bcag ,_cccf );if len (_cagf )==0&&len (_ggedg )==0{continue ;};if len (_cagf )> 0{_befg :=_cagf [0];for _ ,_gedded :=range _cagf [1:]{if _gedded .Urx >=_befg .Urx {_befg =_gedded ;
};};for _ ,_dabaa :=range _cagf {if _dabaa !=_befg &&_dabaa .Urx > _befg .Llx {_befg =nil ;break ;};};if _befg !=nil &&_ccga (_cccf .PdfRectangle ,_befg .PdfRectangle ){_cccf ._fgfc =_befg ;};};if len (_ggedg )> 0{_fbde :=_ggedg [0];for _ ,_egefa :=range _ggedg [1:]{if _egefa .Llx <=_fbde .Llx {_fbde =_egefa ;
};};for _ ,_gabc :=range _ggedg {if _gabc !=_fbde &&_gabc .Llx < _fbde .Urx {_fbde =nil ;break ;};};if _fbde !=nil &&_ccga (_cccf .PdfRectangle ,_fbde .PdfRectangle ){_cccf ._ecdg =_fbde ;};};};_eadgd =_gged .xNeighbours (_dafe );for _ ,_cbabc :=range _gged {_efdaf :=_eadgd [_cbabc ];
if len (_efdaf )==0{continue ;};_addg ,_ceaf :=_edbed (_efdaf ,_cbabc );if len (_addg )==0&&len (_ceaf )==0{continue ;};if len (_ceaf )> 0{_ffabc :=_ceaf [0];for _ ,_gfcgc :=range _ceaf [1:]{if _gfcgc .Ury >=_ffabc .Ury {_ffabc =_gfcgc ;};};for _ ,_aebfa :=range _ceaf {if _aebfa !=_ffabc &&_aebfa .Ury > _ffabc .Lly {_ffabc =nil ;
break ;};};if _ffabc !=nil &&_ebdf (_cbabc .PdfRectangle ,_ffabc .PdfRectangle ){_cbabc ._dgcb =_ffabc ;};};if len (_addg )> 0{_aabge :=_addg [0];for _ ,_gfbce :=range _addg [1:]{if _gfbce .Lly <=_aabge .Lly {_aabge =_gfbce ;};};for _ ,_fagbe :=range _addg {if _fagbe !=_aabge &&_fagbe .Lly < _aabge .Ury {_aabge =nil ;
break ;};};if _aabge !=nil &&_ebdf (_cbabc .PdfRectangle ,_aabge .PdfRectangle ){_cbabc ._dabg =_aabge ;};};};for _ ,_cadag :=range _gged {if _cadag ._fgfc !=nil &&_cadag ._fgfc ._ecdg !=_cadag {_cadag ._fgfc =nil ;};if _cadag ._dabg !=nil &&_cadag ._dabg ._dgcb !=_cadag {_cadag ._dabg =nil ;
};if _cadag ._ecdg !=nil &&_cadag ._ecdg ._fgfc !=_cadag {_cadag ._ecdg =nil ;};if _cadag ._dgcb !=nil &&_cadag ._dgcb ._dabg !=_cadag {_cadag ._dgcb =nil ;};};};func _aagbb (_bgecg string ,_gfgg int )string {if len (_bgecg )< _gfgg {return _bgecg ;};return _bgecg [:_gfgg ];
};func (_efagd *textPara )fontsize ()float64 {return _efagd ._bcfc [0]._afdf };type textTable struct{_da .PdfRectangle ;_dgead ,_caed int ;_gdba bool ;_gbcde map[uint64 ]*textPara ;_cfee map[uint64 ]compositeCell ;};func (_abdd *wordBag )blocked (_abfc *textWord )bool {if _abfc .Urx < _abdd .Llx {_cfda :=_eccd (_abfc .PdfRectangle );
_ffbc :=_gegdg (_abdd .PdfRectangle );if _abdd ._aaecc .blocks (_cfda ,_ffbc ){if _cdgee {_d .Log .Info ("\u0062\u006c\u006f\u0063ke\u0064\u0020\u2190\u0078\u003a\u0020\u0025\u0073\u0020\u0025\u0073",_abfc ,_abdd );};return true ;};}else if _abdd .Urx < _abfc .Llx {_gcbg :=_eccd (_abdd .PdfRectangle );
_dcce :=_gegdg (_abfc .PdfRectangle );if _abdd ._aaecc .blocks (_gcbg ,_dcce ){if _cdgee {_d .Log .Info ("b\u006co\u0063\u006b\u0065\u0064\u0020\u0078\u2192\u0020:\u0020\u0025\u0073\u0020%s",_abfc ,_abdd );};return true ;};};if _abfc .Ury < _abdd .Lly {_fea :=_efed (_abfc .PdfRectangle );
_gbef :=_gcgf (_abdd .PdfRectangle );if _abdd ._fdag .blocks (_fea ,_gbef ){if _cdgee {_d .Log .Info ("\u0062\u006c\u006f\u0063ke\u0064\u0020\u2190\u0079\u003a\u0020\u0025\u0073\u0020\u0025\u0073",_abfc ,_abdd );};return true ;};}else if _abdd .Ury < _abfc .Lly {_gebg :=_efed (_abdd .PdfRectangle );
_bdcg :=_gcgf (_abfc .PdfRectangle );if _abdd ._fdag .blocks (_gebg ,_bdcg ){if _cdgee {_d .Log .Info ("b\u006co\u0063\u006b\u0065\u0064\u0020\u0079\u2192\u0020:\u0020\u0025\u0073\u0020%s",_abfc ,_abdd );};return true ;};};return false ;};type markKind int ;
func (_bebgg lineRuling )yMean ()float64 {return 0.5*(_bebgg ._gbag .Y +_bebgg ._bffbc .Y )};func _dbcd (_ebfcg []rulingList )(rulingList ,rulingList ){var _ebee rulingList ;for _ ,_bacb :=range _ebfcg {_ebee =append (_ebee ,_bacb ...);};return _ebee .vertsHorzs ();
};func _adcf (_edefge ,_daeec _da .PdfRectangle )(_da .PdfRectangle ,bool ){if !_aafgc (_edefge ,_daeec ){return _da .PdfRectangle {},false ;};return _da .PdfRectangle {Llx :_fc .Max (_edefge .Llx ,_daeec .Llx ),Urx :_fc .Min (_edefge .Urx ,_daeec .Urx ),Lly :_fc .Max (_edefge .Lly ,_daeec .Lly ),Ury :_fc .Min (_edefge .Ury ,_daeec .Ury )},true ;
};func (_egea *textObject )setHorizScaling (_ddbb float64 ){if _egea ==nil {return ;};_egea ._eada ._ddeec =_ddbb ;};

// String returns a description of `t`.
func (_eadge *textTable )String ()string {return _be .Sprintf ("\u0025\u0064\u0020\u0078\u0020\u0025\u0064\u0020\u0025\u0074",_eadge ._dgead ,_eadge ._caed ,_eadge ._gdba );};func (_ddebg paraList )yNeighbours (_fdeba float64 )map[*textPara ][]int {_dcada :=make ([]event ,2*len (_ddebg ));
if _fdeba ==0{for _aafcc ,_eage :=range _ddebg {_dcada [2*_aafcc ]=event {_eage .Lly ,true ,_aafcc };_dcada [2*_aafcc +1]=event {_eage .Ury ,false ,_aafcc };};}else {for _edgg ,_eedad :=range _ddebg {_dcada [2*_edgg ]=event {_eedad .Lly -_fdeba *_eedad .fontsize (),true ,_edgg };
_dcada [2*_edgg +1]=event {_eedad .Ury +_fdeba *_eedad .fontsize (),false ,_edgg };};};return _ddebg .eventNeighbours (_dcada );};const _bbca =20;func _efbf (_aacd map[float64 ][]*textLine )[]float64 {_cefe :=[]float64 {};for _dgdbc :=range _aacd {_cefe =append (_cefe ,_dgdbc );
};_ef .Float64s (_cefe );return _cefe ;};func (_deed *textObject )moveTextSetLeading (_ddae ,_fafd float64 ){_deed ._eada ._debg =-_fafd ;_deed .moveLP (_ddae ,_fafd );};func _gcfa (_bbgca []*textLine ,_ecebe map[float64 ][]*textLine )[]*list {_cccb :=_efbf (_ecebe );
_fgee :=[]*list {};if len (_cccb )==0{return _fgee ;};_ebbef :=_cccb [0];_ebfb :=1;_bage :=_ecebe [_ebbef ];for _egab ,_beeb :=range _bage {var _eeac float64 ;_fbe :=[]*list {};_bfbaf :=_beeb ._bfdaf ;_dgfge :=-1.0;if _egab < len (_bage )-1{_dgfge =_bage [_egab +1]._bfdaf ;
};if _ebfb < len (_cccb ){_fbe =_dcgd (_bbgca ,_ecebe ,_cccb ,_ebfb ,_bfbaf ,_dgfge );};_eeac =_dgfge ;if len (_fbe )> 0{_cbdgf :=_fbe [0];if len (_cbdgf ._ccgac )> 0{_eeac =_cbdgf ._ccgac [0]._bfdaf ;};};_gceg :=[]*textLine {_beeb };_gbcf :=_aaeb (_beeb ,_bbgca ,_bfbaf ,_eeac );
_gceg =append (_gceg ,_gbcf ...);_aggb :=_cbad (_gceg ,"\u0062\u0075\u006c\u006c\u0065\u0074",_fbe );_aggb ._dggg =_caff (_gceg ,"");_fgee =append (_fgee ,_aggb );};return _fgee ;};func _fabdb (_effeb []compositeCell )[]float64 {var _gebc []*textLine ;
_ceff :=0;for _ ,_acbe :=range _effeb {_ceff +=len (_acbe .paraList );_gebc =append (_gebc ,_acbe .lines ()...);};_ef .Slice (_gebc ,func (_fdeffc ,_eefgg int )bool {_feaa ,_adebb :=_gebc [_fdeffc ],_gebc [_eefgg ];_ageg ,_adbc :=_feaa ._bfdaf ,_adebb ._bfdaf ;
if !_gcdba (_ageg -_adbc ){return _ageg < _adbc ;};return _feaa .Llx < _adebb .Llx ;});if _dgbg {_be .Printf ("\u0020\u0020\u0020 r\u006f\u0077\u0042\u006f\u0072\u0064\u0065\u0072\u0073:\u0020%\u0064 \u0070a\u0072\u0061\u0073\u0020\u0025\u0064\u0020\u006c\u0069\u006e\u0065\u0073\u000a",_ceff ,len (_gebc ));
for _dcbff ,_bbbd :=range _gebc {_be .Printf ("\u0025\u0038\u0064\u003a\u0020\u0025\u0073\u000a",_dcbff ,_bbbd );};};var _aaac []float64 ;_edbba :=_gebc [0];var _bbdf [][]*textLine ;_geaf :=[]*textLine {_edbba };for _cdecd ,_egcc :=range _gebc [1:]{if _egcc .Ury < _edbba .Lly {_dfbge :=0.5*(_egcc .Ury +_edbba .Lly );
if _dgbg {_be .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0036\u002e\u0032\u0066\u0020\u003c\u0020\u0025\u0036.\u0032f\u0020\u0062\u006f\u0072\u0064\u0065\u0072\u003d\u0025\u0036\u002e\u0032\u0066\u000a"+"\u0009\u0020\u0071\u003d\u0025\u0073\u000a\u0009\u0020p\u003d\u0025\u0073\u000a",_cdecd ,_egcc .Ury ,_edbba .Lly ,_dfbge ,_edbba ,_egcc );
};_aaac =append (_aaac ,_dfbge );_bbdf =append (_bbdf ,_geaf );_geaf =nil ;};_geaf =append (_geaf ,_egcc );if _egcc .Lly < _edbba .Lly {_edbba =_egcc ;};};if len (_geaf )> 0{_bbdf =append (_bbdf ,_geaf );};if _dgbg {_be .Printf (" \u0020\u0020\u0020\u0020\u0020\u0020 \u0072\u006f\u0077\u0043\u006f\u0072\u0072\u0069\u0064o\u0072\u0073\u003d%\u0036.\u0032\u0066\u000a",_aaac );
};if _dgbg {_d .Log .Info ("\u0072\u006f\u0077\u003d\u0025\u0064",len (_effeb ));for _fcgce ,_acfg :=range _effeb {_be .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0073\u000a",_fcgce ,_acfg );};_d .Log .Info ("\u0067r\u006f\u0075\u0070\u0073\u003d\u0025d",len (_bbdf ));
for _fdabf ,_gfage :=range _bbdf {_be .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0064\u000a",_fdabf ,len (_gfage ));for _aefb ,_abcc :=range _gfage {_be .Printf ("\u0025\u0038\u0064\u003a\u0020\u0025\u0073\u000a",_aefb ,_abcc );};};};_fadd :=true ;
for _eaee ,_efcb :=range _bbdf {_afed :=true ;for _gdgde ,_dbbb :=range _effeb {if _dgbg {_be .Printf ("\u0020\u0020\u0020\u007e\u007e\u007e\u0067\u0072\u006f\u0075\u0070\u0020\u0025\u0064\u0020\u006f\u0066\u0020\u0025\u0064\u0020\u0063\u0065\u006cl\u0020\u0025\u0064\u0020\u006ff\u0020\u0025d\u0020\u0025\u0073\u000a",_eaee ,len (_bbdf ),_gdgde ,len (_effeb ),_dbbb );
};if !_dbbb .hasLines (_efcb ){if _dgbg {_be .Printf ("\u0020\u0020\u0020\u0021\u0021\u0021\u0067\u0072\u006f\u0075\u0070\u0020\u0025d\u0020\u006f\u0066\u0020\u0025\u0064 \u0063\u0065\u006c\u006c\u0020\u0025\u0064\u0020\u006f\u0066\u0020\u0025\u0064 \u004f\u0055\u0054\u000a",_eaee ,len (_bbdf ),_gdgde ,len (_effeb ));
};_afed =false ;break ;};};if !_afed {_fadd =false ;break ;};};if !_fadd {if _dgbg {_d .Log .Info ("\u0072\u006f\u0077\u0020\u0063o\u0072\u0072\u0069\u0064\u006f\u0072\u0073\u0020\u0064\u006f\u006e\u0027\u0074 \u0073\u0070\u0061\u006e\u0020\u0061\u006c\u006c\u0020\u0063\u0065\u006c\u006c\u0073\u0020\u0069\u006e\u0020\u0072\u006f\u0077\u002e\u0020\u0069\u0067\u006e\u006f\u0072\u0069\u006eg");
};_aaac =nil ;};if _dgbg &&_aaac !=nil {_be .Printf ("\u0020\u0020\u0020\u0020\u0020\u0020\u0020\u0020\u002a\u002a*\u0072\u006f\u0077\u0043\u006f\u0072\u0072i\u0064\u006f\u0072\u0073\u003d\u0025\u0036\u002e\u0032\u0066\u000a",_aaac );};return _aaac ;};


// Text returns the text content of the `bulletLists`.
func (_ebbe *lists )Text ()string {_cdeg :=&_db .Builder {};for _ ,_fbgg :=range *_ebbe {_fcffga :=_fbgg .Text ();_cdeg .WriteString (_fcffga );};return _cdeg .String ();};func _ddbdg (_cefbb []*textMark ,_gdddb _da .PdfRectangle ,_cgbd bool )[]*textWord {var _gefdb []*textWord ;
var _ffaee *textWord ;if _fgcge {_d .Log .Info ("\u006d\u0061\u006beT\u0065\u0078\u0074\u0057\u006f\u0072\u0064\u0073\u003a\u0020\u0025\u0064\u0020\u006d\u0061\u0072\u006b\u0073",len (_cefbb ));};_gddb :=func (){if _ffaee !=nil {_acabg :=_ffaee .computeText ();
if !_bccgd (_acabg ){_ffaee ._gdcecg =_acabg ;_gefdb =append (_gefdb ,_ffaee );if _fgcge {_d .Log .Info ("\u0061\u0064\u0064Ne\u0077\u0057\u006f\u0072\u0064\u003a\u0020\u0025\u0064\u003a\u0020\u0077\u006f\u0072\u0064\u003d\u0025\u0073",len (_gefdb )-1,_ffaee .String ());
for _ffddb ,_ffgae :=range _ffaee ._gaada {_be .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0073\u000a",_ffddb ,_ffgae .String ());};};};_ffaee =nil ;};};for _ ,_ecge :=range _cefbb {if _eefcf &&_ffaee !=nil &&len (_ffaee ._gaada )> 0{_gcbbc :=_ffaee ._gaada [len (_ffaee ._gaada )-1];
_bgccg ,_bcgff :=_aedag (_ecge ._bbdbeb );_ccbe ,_aedgc :=_aedag (_gcbbc ._bbdbeb );if _bcgff &&!_aedgc &&_gcbbc .inDiacriticArea (_ecge ){_ffaee .addDiacritic (_bgccg );continue ;};if _aedgc &&!_bcgff &&_ecge .inDiacriticArea (_gcbbc ){_ffaee ._gaada =_ffaee ._gaada [:len (_ffaee ._gaada )-1];
_ffaee .appendMark (_ecge ,_gdddb );_ffaee .addDiacritic (_ccbe );continue ;};};_ccdab :=_bccgd (_ecge ._bbdbeb );if _ccdab {_gddb ();continue ;};if _ffaee ==nil &&!_ccdab {_ffaee =_cfecb ([]*textMark {_ecge },_gdddb );continue ;};_acfgg :=_ffaee ._gaadd ;
_efbfb :=_fc .Abs (_bbdb (_gdddb ,_ecge )-_ffaee ._bfeg )/_acfgg ;_ggegg :=_gfcg (_ecge ,_ffaee )/_acfgg ;_abcg :=_ffaee .Width ()+_ecge .Width ();if _cgbd &&_ecge ._ddbd .Angle ()!=0.0{_ggfce :=_fc .Abs (_abcg *_fc .Tan (_ecge ._ddbd .Angle ())/_acfgg );
if _efbfb > _ggfce {_efbfb -=_ggfce ;}else {_efbfb =0.0;};};if _ggegg >=_eeee ||!(-_gbcca <=_ggegg &&_efbfb <=_dcec ){_gddb ();_ffaee =_cfecb ([]*textMark {_ecge },_gdddb );continue ;};_ffaee .appendMark (_ecge ,_gdddb );};_gddb ();return _gefdb ;};func _gcceg (_gfdac ,_gfea _fgb .Point )bool {_eabg :=_fc .Abs (_gfdac .X -_gfea .X );
_fffbg :=_fc .Abs (_gfdac .Y -_gfea .Y );return _cggee (_eabg ,_fffbg );};func (_dfbee *shapesState )closePath (){if _dfbee ._ddgd {_dfbee ._gdcce =append (_dfbee ._gdcce ,_ffddf (_dfbee ._cdfcf ));_dfbee ._ddgd =false ;}else if len (_dfbee ._gdcce )==0{if _fbdb {_d .Log .Debug ("\u0063\u006c\u006f\u0073eP\u0061\u0074\u0068\u0020\u0077\u0069\u0074\u0068\u0020\u006e\u006f\u0020\u0070\u0061t\u0068");
};_dfbee ._ddgd =false ;return ;};_dfbee ._gdcce [len (_dfbee ._gdcce )-1].close ();if _fbdb {_d .Log .Info ("\u0063\u006c\u006f\u0073\u0065\u0050\u0061\u0074\u0068\u003a\u0020\u0025\u0073",_dfbee );};};

// ExtractionMode defines different types of extraction mode.
type ExtractionMode int ;func (_gecb *textTable )compositeRowCorridors ()map[int ][]float64 {_cfbgf :=make (map[int ][]float64 ,_gecb ._caed );if _dgbg {_d .Log .Info ("c\u006f\u006d\u0070\u006f\u0073\u0069t\u0065\u0052\u006f\u0077\u0043\u006f\u0072\u0072\u0069d\u006f\u0072\u0073:\u0020h\u003d\u0025\u0064",_gecb ._caed );
};for _agff :=1;_agff < _gecb ._caed ;_agff ++{var _efdge []compositeCell ;for _aeded :=0;_aeded < _gecb ._dgead ;_aeded ++{if _fadb ,_fcacg :=_gecb ._cfee [_eaabf (_aeded ,_agff )];_fcacg {_efdge =append (_efdge ,_fadb );};};if len (_efdge )==0{continue ;
};_dfggg :=_fabdb (_efdge );_cfbgf [_agff ]=_dfggg ;if _dgbg {_be .Printf ("\u0020\u0020\u0020\u0025\u0032\u0064\u003a\u0020\u00256\u002e\u0032\u0066\u000a",_agff ,_dfggg );};};return _cfbgf ;};func _fede (_ddgb string ,_begb ,_dde int ,_cbf string )string {if _dde > len (_ddgb )-1{return _ddgb [:_begb ]+_cbf ;
};return _ddgb [:_begb ]+_cbf +_ddgb [_dde :];};type gridTile struct{_da .PdfRectangle ;_cabbf ,_ddbde ,_cdcbc ,_fcbc bool ;};

// String returns a description of `w`.
func (_edgd *textWord )String ()string {return _be .Sprintf ("\u0025\u002e2\u0066\u0020\u0025\u0036\u002e\u0032\u0066\u0020\u0066\u006f\u006e\u0074\u0073\u0069\u007a\u0065\u003d\u0025\u002e\u0032\u0066\u0020\"%\u0073\u0022",_edgd ._bfeg ,_edgd .PdfRectangle ,_edgd ._gaadd ,_edgd ._gdcecg );
};func _eebbg (_gcgd []*textWord ,_gecgd int )[]*textWord {_fcdedg :=len (_gcgd );copy (_gcgd [_gecgd :],_gcgd [_gecgd +1:]);return _gcgd [:_fcdedg -1];};func _egbb (_bdec []*_da .KValue ,_edea map[int ][]*textLine ,_ffffb _eec .PdfObject )[]*list {_cdead :=[]*list {};
for _ ,_afaf :=range _bdec {_feee :=_afaf .GetKDict ();_cca :=_feee .GetChildren ();_bgdc :=[]*textLine {};_deec :=[]*list {};_cdcg :=_feee .S .(*_eec .PdfObjectName ).String ();_fbbf :=_cca [0];_dcaae :=_fbbf .GetMCID ();if len (_cca )==1&&_dcaae !=nil &&*_dcaae !=-1{if _feee .Pg ==_ffffb {_bgdc =_edea [*_dcaae ];
};}else {_deec =_egbb (_cca ,_edea ,_ffffb );};_bgab :=_cbad (_bgdc ,_cdcg ,_deec );_cdead =append (_cdead ,_bgab );};return _cdead ;};func _ga (_bcb []rune )BidiText {_ca :=-1;_dbe :=false ;_cff :=true ;_de :=len (_bcb );_bec :=make ([]string ,_de );_bcbd :=make ([]string ,_de );
if _de ==0||_dbe {return _ag (string (_bcb ),_cff ,_dbe );};_efa :=0;for _eb ,_adg :=range _bcb {_bec [_eb ]=string (_adg );_gf :="\u004c";if _adg <=0x00ff{_gf =_bb [_adg ];}else if 0x0590<=_adg &&_adg <=0x05f4{_gf ="\u0052";}else if 0x0600<=_adg &&_adg <=0x06ff{_cbd :=_adg &0xff;
if int (_cbd )>=len (_ce ){_d .Log .Debug ("\u0042\u0069\u0064\u0069\u003a\u0020\u0069\u006e\u0076\u0061\u006c\u0069\u0064\u0020\u0055n\u0069c\u006f\u0064\u0065\u0020\u0063\u0068\u0061\u0072\u0061\u0063\u0074\u0065\u0072\u0020"+string (_adg ));};_gf =_ce [_adg &0xff];
}else if (0x0700<=_adg &&_adg <=0x08ac)||(0xfb50<=_adg &&_adg <=0xfdff)||(0xfe70<=_adg &&_adg <=0xfeff){_gf ="\u0041\u004c";};if _gf =="\u0052"||_gf =="\u0041\u004c"||_gf =="\u0041\u004e"{_efa ++;};_bcbd [_eb ]=_gf ;};if _efa ==0{_cff =true ;return _ag (string (_bcb ),_cff ,false );
};if _ca ==-1{if float64 (_efa )/float64 (_de )< 0.3&&_de > 4{_cff =true ;_ca =0;}else {_cff =false ;_ca =1;};};var _agg []int ;for range _bcb {_agg =append (_agg ,_ca );};_fdg :="\u004c";if _cfb (_ca ){_fdg ="\u0052";};_fdf :=_fdg ;_gg :=_fdf ;_dee :=_fdf ;
for _eeb :=range _bcb {if _bcbd [_eeb ]=="\u004e\u0053\u004d"{_bcbd [_eeb ]=_dee ;}else {_dee =_bcbd [_eeb ];};};_dee =_fdf ;var _ge string ;for _cdf :=range _bcb {_ge =_bcbd [_cdf ];if _ge =="\u0045\u004e"{if _dee =="\u0041\u004c"{_bcbd [_cdf ]="\u0041\u004e";
}else {_bcbd [_cdf ]="\u0045\u004e";};}else if _ge =="\u0052"||_ge =="\u004c"||_ge =="\u0041\u004c"{_dee =_ge ;};};for _gd :=range _bcb {_bfc :=_bcbd [_gd ];if _bfc =="\u0041\u004c"{_bcbd [_gd ]="\u0052";};};for _gbe :=1;_gbe < (len (_bcb )-1);_gbe ++{if _bcbd [_gbe ]=="\u0045\u0053"&&_bcbd [_gbe -1]=="\u0045\u004e"&&_bcbd [_gbe +1]=="\u0045\u004e"{_bcbd [_gbe ]="\u0045\u004e";
};if _bcbd [_gbe ]=="\u0043\u0053"&&(_bcbd [_gbe -1]=="\u0045\u004e"||_bcbd [_gbe -1]=="\u0041\u004e")&&_bcbd [_gbe +1]==_bcbd [_gbe -1]{_bcbd [_gbe ]=_bcbd [_gbe -1];};};for _dgc :=range _bcb {if _bcbd [_dgc ]=="\u0045\u004e"{for _fda :=_dgc -1;_fda >=0;
_fda --{if _bcbd [_fda ]!="\u0045\u0054"{break ;};_bcbd [_fda ]="\u0045\u004e";};for _cec :=_dgc +1;_cec < _de ;_cec ++{if _bcbd [_cec ]!="\u0045\u0054"{break ;};_bcbd [_cec ]="\u0045\u004e";};};};for _ddg :=range _bcb {_ece :=_bcbd [_ddg ];if _ece =="\u0057\u0053"||_ece =="\u0045\u0053"||_ece =="\u0045\u0054"||_ece =="\u0043\u0053"{_bcbd [_ddg ]="\u004f\u004e";
};};_dee ="\u0073\u006f\u0072";for _cg :=range _bcb {_af :=_bcbd [_cg ];if _af =="\u0045\u004e"{if _dee =="\u004c"{_bcbd [_cg ]="\u004c";}else {_bcbd [_cg ]="\u0045\u004e";};}else if _af =="\u0052"||_af =="\u004c"{_dee =_af ;};};for _cge :=0;_cge < len (_bcb );
_cge ++{if _bcbd [_cge ]=="\u004f\u004e"{_bea :=_bc (_bcbd ,_cge +1,"\u004f\u004e");_cag :=_gg ;if _cge > 0{_cag =_bcbd [_cge -1];};_bfe :=_gg ;if _bea +1< _de {_bfe =_bcbd [_bea +1];};if _cag !="\u004c"{_cag ="\u0052";};if _bfe !="\u004c"{_bfe ="\u0052";
};if _cag ==_bfe {_dbf (_bcbd ,_cge ,_bea ,_cag );};_cge =_bea -1;};};for _dfa :=range _bcb {if _bcbd [_dfa ]=="\u004f\u004e"{_bcbd [_dfa ]=_fdg ;};};for _cce :=range _bcb {_cdc :=_bcbd [_cce ];if _ec (_agg [_cce ]){if _cdc =="\u0052"{_agg [_cce ]++;}else if _cdc =="\u0041\u004e"||_cdc =="\u0045\u004e"{_agg [_cce ]+=2;
};}else if _cdc =="\u004c"||_cdc =="\u0041\u004e"||_cdc =="\u0045\u004e"{_agg [_cce ]++;};};_gee :=-1;_fa :=99;var _dba int ;for _ggc :=0;_ggc < len (_agg );_ggc ++{_dba =_agg [_ggc ];if _gee < _dba {_gee =_dba ;};if _fa > _dba &&_cfb (_dba ){_fa =_dba ;
};};for _bbd :=_gee ;_bbd >=_fa ;_bbd --{_ffb :=-1;for _cbdf :=0;_cbdf < len (_agg );_cbdf ++{if _agg [_cbdf ]< _bbd {if _ffb >=0{_fge (_bec ,_ffb ,_cbdf );_ffb =-1;};}else if _ffb < 0{_ffb =_cbdf ;};};if _ffb >=0{_fge (_bec ,_ffb ,len (_agg ));};};for _ecea :=0;
_ecea < len (_bec );_ecea ++{_ecec :=_bec [_ecea ];if _ecec =="\u003c"||_ecec =="\u003e"{_bec [_ecea ]="";};};return _ag (_db .Join (_bec ,""),_cff ,false );};func (_agbgf paraList )findTables (_ecafe []gridTiling )[]*textTable {_agbgf .addNeighbours ();
_ef .Slice (_agbgf ,func (_dfgf ,_fdffe int )bool {return _beeae (_agbgf [_dfgf ],_agbgf [_fdffe ])< 0});var _dagbf []*textTable ;if _ebcf {_gdaag :=_agbgf .findGridTables (_ecafe );_dagbf =append (_dagbf ,_gdaag ...);};if _aefg {_dcebb :=_agbgf .findTextTables ();
_dagbf =append (_dagbf ,_dcebb ...);};return _dagbf ;};func (_ffbe *textObject )setFont (_dbgf string ,_cffb float64 )error {if _ffbe ==nil {return nil ;};_ffbe ._eada ._beea =_cffb ;_bfb ,_afad :=_ffbe .getFont (_dbgf );if _afad !=nil {return _afad ;};
_ffbe ._eada ._abde =_bfb ;return nil ;};func (_dbef paraList )applyTables (_adggdg []*textTable )paraList {var _feeg paraList ;for _ ,_eefg :=range _adggdg {_feeg =append (_feeg ,_eefg .newTablePara ());};for _ ,_fefe :=range _dbef {if _fefe ._fgce {continue ;
};_feeg =append (_feeg ,_fefe );};return _feeg ;};func (_eebb *textObject )setTextLeading (_gdgd float64 ){if _eebb ==nil {return ;};_eebb ._eada ._debg =_gdgd ;};

// String returns a description of `v`.
func (_eacd *ruling )String ()string {if _eacd ._deaac ==_fdeb {return "\u004e\u004f\u0054\u0020\u0052\u0055\u004c\u0049\u004e\u0047";};_caee ,_dbfb :="\u0078","\u0079";if _eacd ._deaac ==_bbdc {_caee ,_dbfb ="\u0079","\u0078";};_efde :="";if _eacd ._gedc !=0.0{_efde =_be .Sprintf (" \u0077\u0069\u0064\u0074\u0068\u003d\u0025\u002e\u0032\u0066",_eacd ._gedc );
};return _be .Sprintf ("\u0025\u00310\u0073\u0020\u0025\u0073\u003d\u0025\u0036\u002e\u0032\u0066\u0020\u0025\u0073\u003d\u0025\u0036\u002e\u0032\u0066\u0020\u002d\u0020\u0025\u0036\u002e\u0032\u0066\u0020\u0028\u0025\u0036\u002e\u0032\u0066\u0029\u0020\u0025\u0073\u0020\u0025\u0076\u0025\u0073",_eacd ._deaac ,_caee ,_eacd ._dfga ,_dbfb ,_eacd ._fbed ,_eacd ._edbbe ,_eacd ._edbbe -_eacd ._fbed ,_eacd ._cbbbb ,_eacd .Color ,_efde );
};func _aafgc (_daed ,_bagf _da .PdfRectangle )bool {return _ebdf (_daed ,_bagf )&&_ccga (_daed ,_bagf )};func (_dfbe *textObject )getCurrentFont ()*_da .PdfFont {_bdgc :=_dfbe ._eada ._abde ;if _bdgc ==nil {_d .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u004e\u006f\u0020\u0066\u006f\u006e\u0074\u0020\u0064\u0065\u0066\u0069\u006e\u0065\u0064\u002e\u0020U\u0073\u0069\u006e\u0067\u0020d\u0065\u0066a\u0075\u006c\u0074\u002e");
return _da .DefaultFont ();};return _bdgc ;};

// TextMarkArray is a collection of TextMarks.
type TextMarkArray struct{_dbdc []TextMark };func _edcbf (_aged *_da .StructTreeRoot ,_ggeg map[int ][]*textLine ,_gab _eec .PdfObject )[]*list {if _aged ==nil {_d .Log .Debug ("\u0062\u0075\u0069\u006c\u0064\u004c\u0069\u0073\u0074\u003a\u0020t\u0072\u0065\u0065\u0052\u006f\u006f\u0074\u0020\u0069\u0073 \u006e\u0069\u006c");
return nil ;};_afgb :=[]*_da .KValue {};var _fbfg func (_becd *_da .KValue );_fbfg =func (_bedga *_da .KValue ){if _cfcg :=_bedga .GetKDict ();_cfcg !=nil {if _cfcg .S .String ()=="\u004c"{_afgb =append (_afgb ,_bedga );}else {for _ ,_adacd :=range _cfcg .GetChildren (){_fbfg (_adacd );
};};};};for _ ,_cabf :=range _aged .K {_cdgc :=_da .NewKValue ();_cdgc .SetKDict (_cabf );_fbfg (_cdgc );};_cfec :=_egbb (_afgb ,_ggeg ,_gab );var _dgfg []*list ;for _ ,_effee :=range _cfec {_ddfed :=_dbec (_effee );_dgfg =append (_dgfg ,_ddfed ...);};
return _dgfg ;};func (_edaeb intSet )del (_fgac int ){delete (_edaeb ,_fgac )};func (_geeba *textWord )computeText ()string {_gacc :=make ([]string ,len (_geeba ._gaada ));for _fdbgb ,_dfafd :=range _geeba ._gaada {_gacc [_fdbgb ]=_dfafd ._bbdbeb ;};return _db .Join (_gacc ,"");
};func (_fgcc *textPara )text ()string {_bfcg :=new (_a .Buffer );_fgcc .writeText (_bfcg );return _bfcg .String ();};

// ExtractPageImages returns the image contents of the page extractor, including data
// and position, size information for each image.
// A set of options to control page image extraction can be passed in. The options
// parameter can be nil for the default options. By default, inline stencil masks
// are not extracted.
func (_bgc *Extractor )ExtractPageImages (options *ImageExtractOptions )(*PageImages ,error ){_cee :=&imageExtractContext {_aec :options };_ggcf :=_cee .extractContentStreamImages (_bgc ._cfd ,_bgc ._edd );if _ggcf !=nil {return nil ,_ggcf ;};return &PageImages {Images :_cee ._eefc },nil ;
};func _cbce (_cdfc *Extractor ,_bgcae *_da .PdfPageResources ,_eggf _cb .GraphicsState ,_gcef *textState ,_bagc *stateStack )*textObject {return &textObject {_fabg :_cdfc ,_ebbb :_bgcae ,_edce :_eggf ,_edec :_bagc ,_eada :_gcef ,_dccb :_fgb .IdentityMatrix (),_gaae :_fgb .IdentityMatrix ()};
};

// String returns a string describing `tm`.
func (_ddccf TextMark )String ()string {_cafeg :=_ddccf .BBox ;var _fadc string ;if _ddccf .Font !=nil {_fadc =_ddccf .Font .String ();if len (_fadc )> 50{_fadc =_fadc [:50]+"\u002e\u002e\u002e";};};var _febc string ;if _ddccf .Meta {_febc ="\u0020\u002a\u004d\u002a";
};return _be .Sprintf ("\u007b\u0054\u0065\u0078t\u004d\u0061\u0072\u006b\u003a\u0020\u0025\u0064\u0020%\u0071\u003d\u0025\u0030\u0032\u0078\u0020\u0028\u0025\u0036\u002e\u0032\u0066\u002c\u0020\u0025\u0036\u002e2\u0066\u0029\u0020\u0028\u00256\u002e\u0032\u0066\u002c\u0020\u0025\u0036\u002e\u0032\u0066\u0029\u0020\u0025\u0073\u0025\u0073\u007d",_ddccf .Offset ,_ddccf .Text ,[]rune (_ddccf .Text ),_cafeg .Llx ,_cafeg .Lly ,_cafeg .Urx ,_cafeg .Ury ,_fadc ,_febc );
};func (_bgeb rulingList )tidied (_ebbcg string )rulingList {_gfbe :=_bgeb .removeDuplicates ();_gfbe .log ("\u0075n\u0069\u0071\u0075\u0065\u0073");_fabbd :=_gfbe .snapToGroups ();if _fabbd ==nil {return nil ;};_fabbd .sort ();if _bdbb {_d .Log .Info ("\u0074\u0069\u0064i\u0065\u0064\u003a\u0020\u0025\u0071\u0020\u0076\u0065\u0063\u0073\u003d\u0025\u0064\u0020\u0075\u006e\u0069\u0071\u0075\u0065\u0073\u003d\u0025\u0064\u0020\u0063\u006f\u0061l\u0065\u0073\u0063\u0065\u0064\u003d\u0025\u0064",_ebbcg ,len (_bgeb ),len (_gfbe ),len (_fabbd ));
};_fabbd .log ("\u0063o\u0061\u006c\u0065\u0073\u0063\u0065d");return _fabbd ;};func (_cbac *textWord )absorb (_dcbce *textWord ){_cbac .PdfRectangle =_aea (_cbac .PdfRectangle ,_dcbce .PdfRectangle );_cbac ._gaada =append (_cbac ._gaada ,_dcbce ._gaada ...);
};func (_baa *PageText )getParagraphs ()paraList {var _bdd rulingList ;if _fegf {_age :=_faga (_baa ._gagcd );_bdd =append (_bdd ,_age ...);};if _dgaf {_gaef :=_bacd (_baa ._dbgff );_bdd =append (_bdd ,_gaef ...);};_bdd ,_deedf :=_bdd .toTilings ();var _edda paraList ;
_bdcd :=len (_baa ._fefg );for _acdbe :=0;_acdbe < 360&&_bdcd > 0;_acdbe +=90{_fdgdc :=make ([]*textMark ,0,len (_baa ._fefg )-_bdcd );for _ ,_edced :=range _baa ._fefg {if _edced ._gcbc ==_acdbe {_fdgdc =append (_fdgdc ,_edced );};};if len (_fdgdc )> 0{_fffa :=_bbfc (_fdgdc ,_baa ._ded ,_bdd ,_deedf ,_baa ._cggd ._adga ==ExtractionModeLayoutNoBreaks );
_edda =append (_edda ,_fffa ...);_bdcd -=len (_fdgdc );};};return _edda ;};func _bfdd (_ffacg _da .PdfRectangle ,_fedga []*textLine )*textPara {return &textPara {PdfRectangle :_ffacg ,_bcfc :_fedga };};func (_bgdf *PageText )computeViews (){if _bgdf ._cggd ._adga ==ExtractionModePlain {_bgdf ._gbbcb =_bgdf .getText ();
return ;};_ebbf :=_bgdf .getParagraphs ();_degg :=new (_a .Buffer );_ebbf .writeText (_degg );_bgdf ._gbbcb =_degg .String ();_bgdf ._edbb =_ebbf .toTextMarks ();_bgdf ._egd =_ebbf .tables ();if _dgbg {_d .Log .Info ("\u0063\u006f\u006dpu\u0074\u0065\u0056\u0069\u0065\u0077\u0073\u003a\u0020\u0074\u0061\u0062\u006c\u0065\u0073\u003d\u0025\u0064",len (_bgdf ._egd ));
};};func (_gea *shapesState )lineTo (_bcgf ,_bbcg float64 ){if _fbdb {_d .Log .Info ("\u006c\u0069\u006eeT\u006f\u0028\u0025\u002e\u0032\u0066\u002c\u0025\u002e\u0032\u0066\u0020\u0070\u003d\u0025\u002e\u0032\u0066",_bcgf ,_bbcg ,_gea .devicePoint (_bcgf ,_bbcg ));
};_gea .addPoint (_bcgf ,_bbcg );};var _ffag =[]string {"\u2756","\u27a2","\u2713","\u2022","\uf0a7","\u25a1","\u2212","\u25a0","\u25aa","\u006f"};func (_bgbe *textObject )reset (){_bgbe ._dccb =_fgb .IdentityMatrix ();_bgbe ._gaae =_fgb .IdentityMatrix ();
_bgbe ._ffeg =nil ;};func _dadba (_cceca []_eec .PdfObject )(_aecac ,_fgcb float64 ,_caegb error ){if len (_cceca )!=2{return 0,0,_be .Errorf ("\u0069\u006e\u0076\u0061l\u0069\u0064\u0020\u006e\u0075\u006d\u0062\u0065\u0072\u0020o\u0066 \u0070\u0061\u0072\u0061\u006d\u0073\u003a \u0025\u0064",len (_cceca ));
};_fbccc ,_caegb :=_eec .GetNumbersAsFloat (_cceca );if _caegb !=nil {return 0,0,_caegb ;};return _fbccc [0],_fbccc [1],nil ;};func (_egac compositeCell )split (_ggea ,_gcfc []float64 )*textTable {_dbgd :=len (_ggea )+1;_ggfe :=len (_gcfc )+1;if _dgbg {_d .Log .Info ("\u0063\u006f\u006d\u0070\u006f\u0073\u0069t\u0065\u0043\u0065l\u006c\u002e\u0073\u0070l\u0069\u0074\u003a\u0020\u0025\u0064\u0020\u0078\u0020\u0025\u0064\u000a\u0009\u0063\u006f\u006d\u0070\u006f\u0073\u0069\u0074\u0065\u003d\u0025\u0073\u000a"+"\u0009\u0072\u006f\u0077\u0043\u006f\u0072\u0072\u0069\u0064\u006f\u0072\u0073=\u0025\u0036\u002e\u0032\u0066\u000a\t\u0063\u006f\u006c\u0043\u006f\u0072\u0072\u0069\u0064\u006f\u0072\u0073\u003d%\u0036\u002e\u0032\u0066",_ggfe ,_dbgd ,_egac ,_ggea ,_gcfc );
_be .Printf ("\u0020\u0020\u0020\u0020\u0025\u0064\u0020\u0070\u0061\u0072\u0061\u0073\u000a",len (_egac .paraList ));for _gcega ,_gfaf :=range _egac .paraList {_be .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0073\u000a",_gcega ,_gfaf .String ());};
_be .Printf ("\u0020\u0020\u0020\u0020\u0025\u0064\u0020\u006c\u0069\u006e\u0065\u0073\u000a",len (_egac .lines ()));for _dagb ,_ccef :=range _egac .lines (){_be .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0073\u000a",_dagb ,_ccef );};};_ggea =_bagfg (_ggea ,_egac .Ury ,_egac .Lly );
_gcfc =_bagfg (_gcfc ,_egac .Llx ,_egac .Urx );_acddd :=make (map[uint64 ]*textPara ,_ggfe *_dbgd );_ggge :=textTable {_dgead :_ggfe ,_caed :_dbgd ,_gbcde :_acddd };_gcce :=_egac .paraList ;_ef .Slice (_gcce ,func (_aafc ,_efddb int )bool {_ddgec ,_cgegc :=_gcce [_aafc ],_gcce [_efddb ];
_eccae ,_bffb :=_ddgec .Lly ,_cgegc .Lly ;if _eccae !=_bffb {return _eccae < _bffb ;};return _ddgec .Llx < _cgegc .Llx ;});_gebgd :=make (map[uint64 ]_da .PdfRectangle ,_ggfe *_dbgd );for _ecbc ,_ebde :=range _ggea [1:]{_eacgb :=_ggea [_ecbc ];for _fedc ,_gfda :=range _gcfc [1:]{_fdeef :=_gcfc [_fedc ];
_gebgd [_eaabf (_fedc ,_ecbc )]=_da .PdfRectangle {Llx :_fdeef ,Urx :_gfda ,Lly :_ebde ,Ury :_eacgb };};};if _dgbg {_d .Log .Info ("\u0063\u006f\u006d\u0070\u006f\u0073\u0069\u0074\u0065\u0043\u0065l\u006c\u002e\u0073\u0070\u006c\u0069\u0074\u003a\u0020\u0072e\u0063\u0074\u0073");
_be .Printf ("\u0020\u0020\u0020\u0020");for _agba :=0;_agba < _ggfe ;_agba ++{_be .Printf ("\u0025\u0033\u0030\u0064\u002c\u0020",_agba );};_be .Println ();for _gbeed :=0;_gbeed < _dbgd ;_gbeed ++{_be .Printf ("\u0020\u0020\u0025\u0032\u0064\u003a",_gbeed );
for _ggdf :=0;_ggdf < _ggfe ;_ggdf ++{_be .Printf ("\u00256\u002e\u0032\u0066\u002c\u0020",_gebgd [_eaabf (_ggdf ,_gbeed )]);};_be .Println ();};};_ccbggf :=func (_fcgfd *textLine )(int ,int ){for _defe :=0;_defe < _dbgd ;_defe ++{for _gbgb :=0;_gbgb < _ggfe ;
_gbgb ++{if _fffb (_gebgd [_eaabf (_gbgb ,_defe )],_fcgfd .PdfRectangle ){return _gbgb ,_defe ;};};};return -1,-1;};_ecac :=make (map[uint64 ][]*textLine ,_ggfe *_dbgd );for _ ,_dfde :=range _gcce .lines (){_agbbf ,_cgaf :=_ccbggf (_dfde );if _agbbf < 0{continue ;
};_ecac [_eaabf (_agbbf ,_cgaf )]=append (_ecac [_eaabf (_agbbf ,_cgaf )],_dfde );};for _dfcde :=0;_dfcde < len (_ggea )-1;_dfcde ++{_fafef :=_ggea [_dfcde ];_ddce :=_ggea [_dfcde +1];for _ceaca :=0;_ceaca < len (_gcfc )-1;_ceaca ++{_egfa :=_gcfc [_ceaca ];
_fdff :=_gcfc [_ceaca +1];_bdbed :=_da .PdfRectangle {Llx :_egfa ,Urx :_fdff ,Lly :_ddce ,Ury :_fafef };_adfc :=_ecac [_eaabf (_ceaca ,_dfcde )];if len (_adfc )==0{continue ;};_bgba :=_bfdd (_bdbed ,_adfc );_ggge .put (_ceaca ,_dfcde ,_bgba );};};return &_ggge ;
};func _aaeb (_aecgd *textLine ,_cgag []*textLine ,_aceg ,_bbgad float64 )[]*textLine {_acdf :=[]*textLine {};for _ ,_cdffb :=range _cgag {if _cdffb ._bfdaf >=_aceg {if _bbgad !=-1&&_cdffb ._bfdaf < _bbgad {if _cdffb .text ()!=_aecgd .text (){if _fc .Round (_cdffb .Llx )< _fc .Round (_aecgd .Llx ){break ;
};_acdf =append (_acdf ,_cdffb );};}else if _bbgad ==-1{if _cdffb ._bfdaf ==_aecgd ._bfdaf {if _cdffb .text ()!=_aecgd .text (){_acdf =append (_acdf ,_cdffb );};continue ;};_bbddab :=_ebbc (_aecgd ,_cgag );if _bbddab !=-1&&_cdffb ._bfdaf <=_bbddab {_acdf =append (_acdf ,_cdffb );
};};};};return _acdf ;};

// String returns a description of `l`.
func (_dfbag *textLine )String ()string {return _be .Sprintf ("\u0025\u002e2\u0066\u0020\u0025\u0036\u002e\u0032\u0066\u0020\u0066\u006f\u006e\u0074\u0073\u0069\u007a\u0065\u003d\u0025\u002e\u0032\u0066\u0020\"%\u0073\u0022",_dfbag ._bfdaf ,_dfbag .PdfRectangle ,_dfbag ._afdf ,_dfbag .text ());
};

// String returns a human readable description of `vecs`.
func (_dacb rulingList )String ()string {if len (_dacb )==0{return "\u007b \u0045\u004d\u0050\u0054\u0059\u0020}";};_geda ,_fbccb :=_dacb .vertsHorzs ();_ecdda :=len (_geda );_cgafg :=len (_fbccb );if _ecdda ==0||_cgafg ==0{return _be .Sprintf ("\u007b%\u0064\u0020\u0078\u0020\u0025\u0064}",_ecdda ,_cgafg );
};_abbge :=_da .PdfRectangle {Llx :_geda [0]._dfga ,Urx :_geda [_ecdda -1]._dfga ,Lly :_fbccb [_cgafg -1]._dfga ,Ury :_fbccb [0]._dfga };return _be .Sprintf ("\u007b\u0025d\u0020\u0078\u0020%\u0064\u003a\u0020\u0025\u0036\u002e\u0032\u0066\u007d",_ecdda ,_cgafg ,_abbge );
};func (_ddee *textObject )showTextAdjusted (_gggb *_eec .PdfObjectArray ,_bfgg int ,_dcac string )error {_ecdcb :=false ;for _ ,_cead :=range _gggb .Elements (){switch _cead .(type ){case *_eec .PdfObjectFloat ,*_eec .PdfObjectInteger :_bcga ,_fbbg :=_eec .GetNumberAsFloat (_cead );
if _fbbg !=nil {_d .Log .Debug ("\u0045\u0052\u0052\u004fR\u003a\u0020\u0073\u0068\u006f\u0077\u0054\u0065\u0078t\u0041\u0064\u006a\u0075\u0073\u0074\u0065\u0064\u002e\u0020\u0042\u0061\u0064\u0020\u006e\u0075\u006d\u0065r\u0069\u0063\u0061\u006c\u0020a\u0072\u0067\u002e\u0020\u006f\u003d\u0025\u0073\u0020\u0061\u0072\u0067\u0073\u003d\u0025\u002b\u0076",_cead ,_gggb );
return _fbbg ;};_gbbe ,_gagb :=-_bcga *0.001*_ddee ._eada ._beea ,0.0;if _ecdcb {_gagb ,_gbbe =_gbbe ,_gagb ;};_dddf :=_bbba (_fgb .Point {X :_gbbe ,Y :_gagb });_ddee ._dccb .Concat (_dddf );case *_eec .PdfObjectString :_egeg :=_eec .TraceToDirectObject (_cead );
_fagd ,_edg :=_eec .GetStringBytes (_egeg );if !_edg {_d .Log .Trace ("s\u0068\u006f\u0077\u0054\u0065\u0078\u0074\u0041\u0064j\u0075\u0073\u0074\u0065\u0064\u003a\u0020Ba\u0064\u0020\u0073\u0074r\u0069\u006e\u0067\u0020\u0061\u0072\u0067\u002e\u0020o=\u0025\u0073 \u0061\u0072\u0067\u0073\u003d\u0025\u002b\u0076",_cead ,_gggb );
return _eec .ErrTypeError ;};_ddee .renderText (_egeg ,_fagd ,_bfgg ,_dcac );default:_d .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0073\u0068\u006f\u0077\u0054\u0065\u0078\u0074A\u0064\u006a\u0075\u0073\u0074\u0065\u0064\u002e\u0020\u0055\u006e\u0065\u0078p\u0065\u0063\u0074\u0065\u0064\u0020\u0074\u0079\u0070\u0065\u0020\u0028%T\u0029\u0020\u0061\u0072\u0067\u0073\u003d\u0025\u002b\u0076",_cead ,_gggb );
return _eec .ErrTypeError ;};};return nil ;};func (_efda paraList )toTextMarks ()[]TextMark {_ebgd :=0;var _eebf []TextMark ;for _cdcgb ,_bgeg :=range _efda {if _bgeg ._eeaf {continue ;};_ffeae :=_bgeg .toTextMarks (&_ebgd );_eebf =append (_eebf ,_ffeae ...);
if _cdcgb !=len (_efda )-1{if _gdgea (_bgeg ,_efda [_cdcgb +1]){_eebf =_gdecg (_eebf ,&_ebgd ,"\u0020");}else {_eebf =_gdecg (_eebf ,&_ebgd ,"\u000a");_eebf =_gdecg (_eebf ,&_ebgd ,"\u000a");};};};_eebf =_gdecg (_eebf ,&_ebgd ,"\u000a");_eebf =_gdecg (_eebf ,&_ebgd ,"\u000a");
return _eebf ;};func (_fgdag *textTable )log (_fgbg string ){if !_dgbg {return ;};_d .Log .Info ("~\u007e\u007e\u0020\u0025\u0073\u003a \u0025\u0064\u0020\u0078\u0020\u0025d\u0020\u0067\u0072\u0069\u0064\u003d\u0025t\u000a\u0020\u0020\u0020\u0020\u0020\u0020\u0025\u0036\u002e2\u0066",_fgbg ,_fgdag ._dgead ,_fgdag ._caed ,_fgdag ._gdba ,_fgdag .PdfRectangle );
for _cebge :=0;_cebge < _fgdag ._caed ;_cebge ++{for _gaeb :=0;_gaeb < _fgdag ._dgead ;_gaeb ++{_dafac :=_fgdag .get (_gaeb ,_cebge );if _dafac ==nil {continue ;};_be .Printf ("%\u0034\u0064\u0020\u00252d\u003a \u0025\u0036\u002e\u0032\u0066 \u0025\u0071\u0020\u0025\u0064\u000a",_gaeb ,_cebge ,_dafac .PdfRectangle ,_aagbb (_dafac .text (),50),_c .RuneCountInString (_dafac .text ()));
};};};func (_gafbe rulingList )sort (){_ef .Slice (_gafbe ,_gafbe .comp )};

// RangeOffset returns the TextMarks in `ma` that overlap text[start:end] in the extracted text.
// These are tm: `start` <= tm.Offset + len(tm.Text) && tm.Offset < `end` where
// `start` and `end` are offsets in the extracted text.
// NOTE: TextMarks can contain multiple characters. e.g. "ffi" for the ﬃ ligature so the first and
// last elements of the returned TextMarkArray may only partially overlap text[start:end].
func (_gcafc *TextMarkArray )RangeOffset (start ,end int )(*TextMarkArray ,error ){if _gcafc ==nil {return nil ,_cbb .New ("\u006da\u003d\u003d\u006e\u0069\u006c");};if end < start {return nil ,_be .Errorf ("\u0065\u006e\u0064\u0020\u003c\u0020\u0073\u0074\u0061\u0072\u0074\u002e\u0020\u0052\u0061n\u0067\u0065\u004f\u0066\u0066\u0073\u0065\u0074\u0020\u006e\u006f\u0074\u0020d\u0065\u0066\u0069\u006e\u0065\u0064\u002e\u0020\u0073\u0074\u0061\u0072t=\u0025\u0064\u0020\u0065\u006e\u0064\u003d\u0025\u0064\u0020",start ,end );
};_gadba :=len (_gcafc ._dbdc );if _gadba ==0{return _gcafc ,nil ;};if start < _gcafc ._dbdc [0].Offset {start =_gcafc ._dbdc [0].Offset ;};if end > _gcafc ._dbdc [_gadba -1].Offset +1{end =_gcafc ._dbdc [_gadba -1].Offset +1;};_fgfe :=_ef .Search (_gadba ,func (_bbddc int )bool {return _gcafc ._dbdc [_bbddc ].Offset +len (_gcafc ._dbdc [_bbddc ].Text )-1>=start });
if !(0<=_fgfe &&_fgfe < _gadba ){_ccdf :=_be .Errorf ("\u004f\u0075\u0074\u0020\u006f\u0066\u0020\u0072\u0061\u006e\u0067\u0065\u002e\u0020\u0073\u0074\u0061\u0072\u0074\u003d%\u0064\u0020\u0069\u0053\u0074\u0061\u0072\u0074\u003d\u0025\u0064\u0020\u006c\u0065\u006e\u003d\u0025\u0064\u000a\u0009\u0066\u0069\u0072\u0073\u0074\u003d\u0025\u0076\u000a\u0009 \u006c\u0061\u0073\u0074\u003d%\u0076",start ,_fgfe ,_gadba ,_gcafc ._dbdc [0],_gcafc ._dbdc [_gadba -1]);
return nil ,_ccdf ;};_ccfea :=_ef .Search (_gadba ,func (_fcfb int )bool {return _gcafc ._dbdc [_fcfb ].Offset > end -1});if !(0<=_ccfea &&_ccfea < _gadba ){_cdcd :=_be .Errorf ("\u004f\u0075\u0074\u0020\u006f\u0066\u0020r\u0061\u006e\u0067e\u002e\u0020\u0065n\u0064\u003d%\u0064\u0020\u0069\u0045\u006e\u0064=\u0025d \u006c\u0065\u006e\u003d\u0025\u0064\u000a\u0009\u0066\u0069\u0072\u0073\u0074\u003d\u0025\u0076\u000a\u0009\u0020\u006c\u0061\u0073\u0074\u003d\u0025\u0076",end ,_ccfea ,_gadba ,_gcafc ._dbdc [0],_gcafc ._dbdc [_gadba -1]);
return nil ,_cdcd ;};if _ccfea <=_fgfe {return nil ,_be .Errorf ("\u0069\u0045\u006e\u0064\u0020\u003c=\u0020\u0069\u0053\u0074\u0061\u0072\u0074\u003a\u0020\u0073\u0074\u0061\u0072\u0074\u003d\u0025\u0064\u0020\u0065\u006ed\u003d\u0025\u0064\u0020\u0069\u0053\u0074\u0061\u0072\u0074\u003d\u0025\u0064\u0020i\u0045n\u0064\u003d\u0025\u0064",start ,end ,_fgfe ,_ccfea );
};return &TextMarkArray {_dbdc :_gcafc ._dbdc [_fgfe :_ccfea ]},nil ;};func _ec (_ecd int )bool {return (_ecd &1)==0};func (_egafb *textPara )taken ()bool {return _egafb ==nil ||_egafb ._fgce };func (_gafg *Editor )getMatches (_bee string ,_bgca []int )(map[int ]Match ,map[int ][]*TextMarkArray ,error ){_bcad :=map[int ]Match {};
_begf :=map[int ][]*TextMarkArray {};for _ ,_deb :=range _bgca {_gca ,_adbe :=_gafg ._efaa .GetPage (_deb );if _adbe !=nil {return nil ,nil ,_adbe ;};_acg ,_adbe :=New (_gca );if _adbe !=nil {return nil ,nil ,_adbe ;};_gdf ,_ ,_ ,_adbe :=_acg .ExtractPageText ();
if _adbe !=nil {return nil ,nil ,_adbe ;};_dbde :=_gdf .Text ();_caeg ,_adbe :=_adf (_bee ,_dbde );if _adbe !=nil {return nil ,nil ,_adbe ;};if len (_caeg )==0{_d .Log .Info ("\u004e\u006f\u0020\u006d\u0061\u0074\u0063\u0068\u0020\u0066\u006f\u0075\u006e\u0064\u0020f\u006fr\u0020\u0025\u0073\u0020\u006f\u006e\u0020\u0070\u0061\u0067\u0065\u0020\u0025\u0064",_bee ,_deb );
};_dda :=_gdf .Marks ();_eeba :=[]Box {};for _ ,_ged :=range _caeg {_ ,_ade ,_gbac :=_afd (_ged ,_dda ,_bee );if _gbac !=nil {return nil ,nil ,_gbac ;};_eeba =append (_eeba ,_ade );};_cba :=Match {Pattern :_bee ,Indexes :_caeg ,Locations :_eeba };_bcad [_deb ]=_cba ;
};return _bcad ,_begf ,nil ;};func _aedag (_eefae string )(string ,bool ){_gagg :=[]rune (_eefae );if len (_gagg )!=1{return "",false ;};_gdbb ,_ddgcg :=_gbbcc [_gagg [0]];return _gdbb ,_ddgcg ;};type rulingKind int ;func _cedf (_ccgca ,_egec _fgb .Point )bool {return _ccgca .X ==_egec .X &&_ccgca .Y ==_egec .Y };
func _dcgd (_ecadg []*textLine ,_ddgdf map[float64 ][]*textLine ,_gdbc []float64 ,_gdaf int ,_bfef ,_fbgce float64 )[]*list {_cfbc :=[]*list {};_acadd :=_gdaf ;_gdaf =_gdaf +1;_bge :=_gdbc [_acadd ];_afgd :=_ddgdf [_bge ];_efbdfg :=_afdge (_afgd ,_fbgce ,_bfef );
for _debe ,_dedd :=range _efbdfg {var _cbedb float64 ;_acde :=[]*list {};_ebeb :=_dedd ._bfdaf ;_afde :=_fbgce ;if _debe < len (_efbdfg )-1{_afde =_efbdfg [_debe +1]._bfdaf ;};if _gdaf < len (_gdbc ){_acde =_dcgd (_ecadg ,_ddgdf ,_gdbc ,_gdaf ,_ebeb ,_afde );
};_cbedb =_afde ;if len (_acde )> 0{_adcc :=_acde [0];if len (_adcc ._ccgac )> 0{_cbedb =_adcc ._ccgac [0]._bfdaf ;};};_cbbbf :=[]*textLine {_dedd };_fcbe :=_aaeb (_dedd ,_ecadg ,_ebeb ,_cbedb );_cbbbf =append (_cbbbf ,_fcbe ...);_dfed :=_cbad (_cbbbf ,"\u0062\u0075\u006c\u006c\u0065\u0074",_acde );
_dfed ._dggg =_caff (_cbbbf ,"");_cfbc =append (_cfbc ,_dfed );};return _cfbc ;};func (_eegcd lineRuling )xMean ()float64 {return 0.5*(_eegcd ._gbag .X +_eegcd ._bffbc .X )};func (_fded *textWord )appendMark (_efeag *textMark ,_gfeb _da .PdfRectangle ){_fded ._gaada =append (_fded ._gaada ,_efeag );
_fded .PdfRectangle =_aea (_fded .PdfRectangle ,_efeag .PdfRectangle );if _efeag ._abeg > _fded ._gaadd {_fded ._gaadd =_efeag ._abeg ;};_fded ._bfeg =_gfeb .Ury -_fded .PdfRectangle .Lly ;};

// Text returns the extracted page text.
func (_gdgdc PageText )Text ()string {return _gdgdc ._gbbcb };func (_ddef *textTable )logComposite (_dfcf string ){if !_dgbg {return ;};_d .Log .Info ("\u007e~\u007eP\u0061\u0072\u0061\u0020\u0025d\u0020\u0078 \u0025\u0064\u0020\u0025\u0073",_ddef ._dgead ,_ddef ._caed ,_dfcf );
_be .Printf ("\u0025\u0035\u0073 \u007c","");for _gfcc :=0;_gfcc < _ddef ._dgead ;_gfcc ++{_be .Printf ("\u0025\u0033\u0064 \u007c",_gfcc );};_be .Println ("");_be .Printf ("\u0025\u0035\u0073 \u002b","");for _efaca :=0;_efaca < _ddef ._dgead ;_efaca ++{_be .Printf ("\u0025\u0033\u0073 \u002b","\u002d\u002d\u002d");
};_be .Println ("");for _cccd :=0;_cccd < _ddef ._caed ;_cccd ++{_be .Printf ("\u0025\u0035\u0064 \u007c",_cccd );for _edbfc :=0;_edbfc < _ddef ._dgead ;_edbfc ++{_eebd ,_ :=_ddef ._cfee [_eaabf (_edbfc ,_cccd )].parasBBox ();_be .Printf ("\u0025\u0033\u0064 \u007c",len (_eebd ));
};_be .Println ("");};_d .Log .Info ("\u007e~\u007eT\u0065\u0078\u0074\u0020\u0025d\u0020\u0078 \u0025\u0064\u0020\u0025\u0073",_ddef ._dgead ,_ddef ._caed ,_dfcf );_be .Printf ("\u0025\u0035\u0073 \u007c","");for _eebcf :=0;_eebcf < _ddef ._dgead ;_eebcf ++{_be .Printf ("\u0025\u0031\u0032\u0064\u0020\u007c",_eebcf );
};_be .Println ("");_be .Printf ("\u0025\u0035\u0073 \u002b","");for _gbeb :=0;_gbeb < _ddef ._dgead ;_gbeb ++{_be .Print ("\u002d\u002d\u002d\u002d\u002d\u002d\u002d\u002d\u002d-\u002d\u002d\u002d\u002b");};_be .Println ("");for _fbccd :=0;_fbccd < _ddef ._caed ;
_fbccd ++{_be .Printf ("\u0025\u0035\u0064 \u007c",_fbccd );for _caec :=0;_caec < _ddef ._dgead ;_caec ++{_egcgc ,_ :=_ddef ._cfee [_eaabf (_caec ,_fbccd )].parasBBox ();_fccc :="";_fbce :=_egcgc .merge ();if _fbce !=nil {_fccc =_fbce .text ();};_fccc =_be .Sprintf ("\u0025\u0071",_aagbb (_fccc ,12));
_fccc =_fccc [1:len (_fccc )-1];_be .Printf ("\u0025\u0031\u0032\u0073\u0020\u007c",_fccc );};_be .Println ("");};};func (_effca rulingList )vertsHorzs ()(rulingList ,rulingList ){var _fageg ,_gcbea rulingList ;for _ ,_dfaga :=range _effca {switch _dfaga ._deaac {case _deggg :_fageg =append (_fageg ,_dfaga );
case _bbdc :_gcbea =append (_gcbea ,_dfaga );};};return _fageg ,_gcbea ;};const _fef =1.0/1000.0;func _bdfd (_edcgb float64 ,_fgdd int )int {if _fgdd ==0{_fgdd =1;};_dged :=float64 (_fgdd );return int (_fc .Round (_edcgb /_dged )*_dged );};func _caff (_ggagd []*textLine ,_cegb string )string {var _befd _db .Builder ;
_gedbf :=0.0;for _fagf ,_gdec :=range _ggagd {_eecg :=_gdec .text ();_bbecb :=_gdec ._bfdaf ;if _fagf < len (_ggagd )-1{_gedbf =_ggagd [_fagf +1]._bfdaf ;}else {_gedbf =0.0;};_befd .WriteString (_cegb );_befd .WriteString (_eecg );if _gedbf !=_bbecb {_befd .WriteString ("\u000a");
}else {_befd .WriteString ("\u0020");};};return _befd .String ();};func (_fcge paraList )eventNeighbours (_eaga []event )map[*textPara ][]int {_ef .Slice (_eaga ,func (_cebfb ,_aefa int )bool {_gdag ,_cggb :=_eaga [_cebfb ],_eaga [_aefa ];_ggfeb ,_egecf :=_gdag ._cfddf ,_cggb ._cfddf ;
if _ggfeb !=_egecf {return _ggfeb < _egecf ;};if _gdag ._fdecc !=_cggb ._fdecc {return _gdag ._fdecc ;};return _cebfb < _aefa ;});_bagfe :=make (map[int ]intSet );_afaec :=make (intSet );for _ ,_dcece :=range _eaga {if _dcece ._fdecc {_bagfe [_dcece ._ddceb ]=make (intSet );
for _eacgc :=range _afaec {if _eacgc !=_dcece ._ddceb {_bagfe [_dcece ._ddceb ].add (_eacgc );_bagfe [_eacgc ].add (_dcece ._ddceb );};};_afaec .add (_dcece ._ddceb );}else {_afaec .del (_dcece ._ddceb );};};_efeea :=map[*textPara ][]int {};for _eccce ,_cgccg :=range _bagfe {_cdfb :=_fcge [_eccce ];
if len (_cgccg )==0{_efeea [_cdfb ]=nil ;continue ;};_bfbad :=make ([]int ,len (_cgccg ));_bfdb :=0;for _badb :=range _cgccg {_bfbad [_bfdb ]=_badb ;_bfdb ++;};_efeea [_cdfb ]=_bfbad ;};return _efeea ;};

// Tables returns the tables extracted from the page.
func (_aae PageText )Tables ()[]TextTable {if _dgbg {_d .Log .Info ("\u0054\u0061\u0062\u006c\u0065\u0073\u003a\u0020\u0025\u0064",len (_aae ._egd ));};return _aae ._egd ;};var _ce =[]string {"\u0041\u004e","\u0041\u004e","\u0041\u004e","\u0041\u004e","\u0041\u004e","\u0041\u004e","\u004f\u004e","\u004f\u004e","\u0041\u004c","\u0045\u0054","\u0045\u0054","\u0041\u004c","\u0043\u0053","\u0041\u004c","\u004f\u004e","\u004f\u004e","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u0041\u004c","\u0041\u004c","","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u0041\u004e","\u0041\u004e","\u0041\u004e","\u0041\u004e","\u0041\u004e","\u0041\u004e","\u0041\u004e","\u0041\u004e","\u0041\u004e","\u0041\u004e","\u0045\u0054","\u0041\u004e","\u0041\u004e","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u004e\u0053\u004d","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u0041\u004e","\u004f\u004e","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u0041\u004c","\u0041\u004c","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004f\u004e","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u0041\u004c","\u0041\u004c","\u0045\u004e","\u0045\u004e","\u0045\u004e","\u0045\u004e","\u0045\u004e","\u0045\u004e","\u0045\u004e","\u0045\u004e","\u0045\u004e","\u0045\u004e","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c"};
func _ebeg (_ffdca ,_efdc _fgb .Point ,_fddb _dd .Color )(*ruling ,bool ){_afbc :=lineRuling {_gbag :_ffdca ,_bffbc :_efdc ,_bgda :_fdbaf (_ffdca ,_efdc ),Color :_fddb };if _afbc ._bgda ==_fdeb {return nil ,false ;};return _afbc .asRuling ();};func _aeggd (_cfbacc _da .PdfRectangle )textState {return textState {_ddeec :100,_eegg :RenderModeFill ,_cac :_cfbacc };
};

// String returns a description of `tm`.
func (_bcebd *textMark )String ()string {return _be .Sprintf ("\u0025\u002e\u0032f \u0066\u006f\u006e\u0074\u0073\u0069\u007a\u0065\u003d\u0025\u002e\u0032\u0066\u0020\u0022\u0025\u0073\u0022",_bcebd .PdfRectangle ,_bcebd ._abeg ,_bcebd ._bbdbeb );};func (_ddfg *stateStack )empty ()bool {return len (*_ddfg )==0};
func _ffcd (_bffc *textWord ,_bfada float64 ,_fbgc ,_gccab rulingList )*wordBag {_adac :=_dcfc (_bffc ._bfeg );_cdbb :=[]*textWord {_bffc };_ecad :=wordBag {_dgfd :map[int ][]*textWord {_adac :_cdbb },PdfRectangle :_bffc .PdfRectangle ,_abad :_bffc ._gaadd ,_adfa :_bfada ,_aaecc :_fbgc ,_fdag :_gccab };
return &_ecad ;};func _efbdg (_ggef ,_ceed _ad .Image )_ad .Image {_acfb ,_gabg :=_ceed .Bounds ().Size (),_ggef .Bounds ().Size ();_agaba ,_abgb :=_acfb .X ,_acfb .Y ;if _gabg .X > _agaba {_agaba =_gabg .X ;};if _gabg .Y > _abgb {_abgb =_gabg .Y ;};_fgeaa :=_ad .Rect (0,0,_agaba ,_abgb );
if _acfb .X !=_agaba ||_acfb .Y !=_abgb {_ccfb :=_ad .NewRGBA (_fgeaa );_f .BiLinear .Scale (_ccfb ,_fgeaa ,_ggef ,_ceed .Bounds (),_f .Over ,nil );_ceed =_ccfb ;};if _gabg .X !=_agaba ||_gabg .Y !=_abgb {_bgagg :=_ad .NewRGBA (_fgeaa );_f .BiLinear .Scale (_bgagg ,_fgeaa ,_ggef ,_ggef .Bounds (),_f .Over ,nil );
_ggef =_bgagg ;};_fbefa :=_ad .NewRGBA (_fgeaa );_f .DrawMask (_fbefa ,_fgeaa ,_ggef ,_ad .Point {},_ceed ,_ad .Point {},_f .Over );return _fbefa ;};

// ExtractFonts returns all font information from the page extractor, including
// font name, font type, the raw data of the embedded font file (if embedded), font descriptor and more.
//
// The argument `previousPageFonts` is used when trying to build a complete font catalog for multiple pages or the entire document.
// The entries from `previousPageFonts` are added to the returned result unless already included in the page, i.e. no duplicate entries.
//
// NOTE: If previousPageFonts is nil, all fonts from the page will be returned. Use it when building up a full list of fonts for a document or page range.
func (_afe *Extractor )ExtractFonts (previousPageFonts *PageFonts )(*PageFonts ,error ){_bcba :=PageFonts {};_bacc :=_bcba .extractPageResourcesToFont (_afe ._edd );if _bacc !=nil {return nil ,_bacc ;};if previousPageFonts !=nil {for _ ,_ae :=range previousPageFonts .Fonts {if !_eae (_bcba .Fonts ,_ae .FontName ){_bcba .Fonts =append (_bcba .Fonts ,_ae );
};};};return &PageFonts {Fonts :_bcba .Fonts },nil ;};func (_ageee *ruling )gridIntersecting (_aggd *ruling )bool {return _bfece (_ageee ._fbed ,_aggd ._fbed )&&_bfece (_ageee ._edbbe ,_aggd ._edbbe );};func _fffg (_aeceb *wordBag ,_deef *textWord ,_cdgf float64 )bool {return _aeceb .Urx <=_deef .Llx &&_deef .Llx < _aeceb .Urx +_cdgf ;
};func _bbba (_gfc _fgb .Point )_fgb .Matrix {return _fgb .TranslationMatrix (_gfc .X ,_gfc .Y )};func (_fdbb *textPara )getListLines ()[]*textLine {var _cacc []*textLine ;_fbbb :=_eegce (_fdbb ._bcfc );for _ ,_bceg :=range _fdbb ._bcfc {_dfab :=_bceg ._cdde [0]._gdcecg [0];
if _fdegg (_dfab ){_cacc =append (_cacc ,_bceg );};};_cacc =append (_cacc ,_fbbb ...);return _cacc ;};func _eccd (_bfadd _da .PdfRectangle )*ruling {return &ruling {_deaac :_deggg ,_dfga :_bfadd .Urx ,_fbed :_bfadd .Lly ,_edbbe :_bfadd .Ury };};

// NewFromContents creates a new extractor from contents and page resources.
func NewFromContents (contents string ,resources *_da .PdfPageResources )(*Extractor ,error ){const _dae ="\u0065x\u0074\u0072\u0061\u0063t\u006f\u0072\u002e\u004e\u0065w\u0046r\u006fm\u0043\u006f\u006e\u0074\u0065\u006e\u0074s";_agd :=&Extractor {_cfd :contents ,_edd :resources ,_bcd :map[string ]fontEntry {},_gaf :map[string ]textResult {}};
_b .TrackUse (_dae );return _agd ,nil ;};func (_eeff lineRuling )asRuling ()(*ruling ,bool ){_cccc :=ruling {_deaac :_eeff ._bgda ,Color :_eeff .Color ,_cbbbb :_gbce };switch _eeff ._bgda {case _deggg :_cccc ._dfga =_eeff .xMean ();_cccc ._fbed =_fc .Min (_eeff ._gbag .Y ,_eeff ._bffbc .Y );
_cccc ._edbbe =_fc .Max (_eeff ._gbag .Y ,_eeff ._bffbc .Y );case _bbdc :_cccc ._dfga =_eeff .yMean ();_cccc ._fbed =_fc .Min (_eeff ._gbag .X ,_eeff ._bffbc .X );_cccc ._edbbe =_fc .Max (_eeff ._gbag .X ,_eeff ._bffbc .X );default:_d .Log .Error ("\u0062\u0061\u0064\u0020pr\u0069\u006d\u0061\u0072\u0079\u0020\u006b\u0069\u006e\u0064\u003d\u0025\u0064",_eeff ._bgda );
return nil ,false ;};return &_cccc ,true ;};func (_aede *textObject )getStrokeColor ()_dd .Color {return _dadc (_aede ._edce .ColorspaceStroking ,_aede ._edce .ColorStroking );};

// PageFonts represents extracted fonts on a PDF page.
type PageFonts struct{Fonts []Font ;};

// ExtractTextWithStats works like ExtractText but returns the number of characters in the output
// (`numChars`) and the number of characters that were not decoded (`numMisses`).
func (_ebcd *Extractor )ExtractTextWithStats ()(_abd string ,_abc int ,_deae int ,_gdbd error ){_fca ,_abc ,_deae ,_gdbd :=_ebcd .ExtractPageText ();if _gdbd !=nil {return "",_abc ,_deae ,_gdbd ;};return _fca .Text (),_abc ,_deae ,nil ;};func (_fdbce *wordBag )depthBand (_gced ,_aafg float64 )[]int {if len (_fdbce ._dgfd )==0{return nil ;
};return _fdbce .depthRange (_fdbce .getDepthIdx (_gced ),_fdbce .getDepthIdx (_aafg ));};

// NewWithOptions an Extractor instance for extracting content from the input PDF page with options.
func NewWithOptions (page *_da .PdfPage ,options *Options )(*Extractor ,error ){const _bed ="\u0065x\u0074\u0072\u0061\u0063\u0074\u006f\u0072\u002e\u004e\u0065\u0077W\u0069\u0074\u0068\u004f\u0070\u0074\u0069\u006f\u006e\u0073";_bab ,_eed :=page .GetAllContentStreams ();
if _eed !=nil {return nil ,_eed ;};var _cae *_da .StructTreeRoot ;_ebf ,_bcf :=page .GetStructTreeRoot ();if !_bcf {_d .Log .Debug ("T\u0068\u0065\u0020\u0070\u0064\u0066\u0020\u0064\u006f\u0063\u0075\u006d\u0065\u006e\u0074\u0020\u0069\u0073\u0020\u006e\u006f\u0074\u0020\u0074\u0061\u0067g\u0065d\u002e\u0020\u0053\u0074r\u0075\u0063t\u0054\u0072\u0065\u0065\u0052\u006f\u006f\u0074\u0020\u0064\u006f\u0065\u0073\u006e\u0027\u0074\u0020\u0065\u0078\u0069\u0073\u0074\u002e");
}else {_cae ,_eed =_da .NewStructTreeRootFromPdfObject (*_ebf );if _eed !=nil {return nil ,_be .Errorf ("\u0065\u0072\u0072or\u0020\u006c\u006f\u0061\u0064\u0069\u006e\u0067\u0020s\u0074r\u0075c\u0074 \u0074\u0072\u0065\u0065\u0020\u0072\u006f\u006f\u0074\u003a\u0020\u0025\u0076",_eed );
};};_efb :=page .GetContainingPdfObject ();_ddc ,_eed :=page .GetMediaBox ();if _eed !=nil {return nil ,_be .Errorf ("\u0065\u0078\u0074r\u0061\u0063\u0074\u006fr\u0020\u0072\u0065\u0071\u0075\u0069\u0072e\u0073\u0020\u006d\u0065\u0064\u0069\u0061\u0042\u006f\u0078\u002e\u0020\u0025\u0076",_eed );
};_fdgd :=&Extractor {_cfd :_bab ,_edd :page .Resources ,_ccd :*_ddc ,_eg :page .CropBox ,_bag :page .GetStructParentsKey (),_bcd :map[string ]fontEntry {},_gaf :map[string ]textResult {},_dff :map[string ]textResult {},_affe :options ,_ffbg :_cae ,_fde :_efb };
if _fdgd ._ccd .Llx > _fdgd ._ccd .Urx {_d .Log .Info ("\u004d\u0065\u0064\u0069\u0061\u0042o\u0078\u0020\u0068\u0061\u0073\u0020\u0058\u0020\u0063\u006f\u006f\u0072\u0064\u0069\u006e\u0061\u0074\u0065\u0073\u0020r\u0065\u0076\u0065\u0072\u0073\u0065\u0064\u002e\u0020\u0025\u002e\u0032\u0066\u0020F\u0069x\u0069\u006e\u0067\u002e",_fdgd ._ccd );
_fdgd ._ccd .Llx ,_fdgd ._ccd .Urx =_fdgd ._ccd .Urx ,_fdgd ._ccd .Llx ;};if _fdgd ._ccd .Lly > _fdgd ._ccd .Ury {_d .Log .Info ("\u004d\u0065\u0064\u0069\u0061\u0042o\u0078\u0020\u0068\u0061\u0073\u0020\u0059\u0020\u0063\u006f\u006f\u0072\u0064\u0069\u006e\u0061\u0074\u0065\u0073\u0020r\u0065\u0076\u0065\u0072\u0073\u0065\u0064\u002e\u0020\u0025\u002e\u0032\u0066\u0020F\u0069x\u0069\u006e\u0067\u002e",_fdgd ._ccd );
_fdgd ._ccd .Lly ,_fdgd ._ccd .Ury =_fdgd ._ccd .Ury ,_fdgd ._ccd .Lly ;};if _fdgd ._affe !=nil {if _fdgd ._affe .IncludeAnnotations {_fdgd ._ddd ,_eed =page .GetAnnotations ();if _eed !=nil {_d .Log .Debug ("\u0045\u0072r\u006f\u0072\u0020\u0067\u0065\u0074\u0074\u0069\u006e\u0067\u0020\u0061\u006e\u006e\u006f\u0074\u0061\u0074\u0069\u006f\u006e\u0073: \u0025\u0076",_eed );
};};};_b .TrackUse (_bed );return _fdgd ,nil ;};func _dgf (_agb *TextMarkArray ,_daff int )int {_ffgd :=_agb .Elements ();_ececc :=_daff -1;_dbdg :=_daff +1;_cbefe :=-1;if _ececc >=0{_cgba :=_ffgd [_ececc ];_acc :=_cgba .ObjString ;_bcg :=len (_acc );_dgd :=_cgba .Index ;
if _dgd +1< _bcg {return _ececc ;};};if _dbdg < len (_ffgd ){_gdce :=_ffgd [_dbdg ];_cfe :=_gdce .ObjString ;if _cfe [0]!=_gdce .Text {return _dbdg ;};};if _cbefe ==-1&&_ffgd [_daff ].Text =="\u0020"{return _ececc ;};return _cbefe ;};func (_gadgc paraList )xNeighbours (_fecb float64 )map[*textPara ][]int {_cggcbg :=make ([]event ,2*len (_gadgc ));
if _fecb ==0{for _ggcd ,_bfecf :=range _gadgc {_cggcbg [2*_ggcd ]=event {_bfecf .Llx ,true ,_ggcd };_cggcbg [2*_ggcd +1]=event {_bfecf .Urx ,false ,_ggcd };};}else {for _gcggg ,_bcddd :=range _gadgc {_cggcbg [2*_gcggg ]=event {_bcddd .Llx -_fecb *_bcddd .fontsize (),true ,_gcggg };
_cggcbg [2*_gcggg +1]=event {_bcddd .Urx +_fecb *_bcddd .fontsize (),false ,_gcggg };};};return _gadgc .eventNeighbours (_cggcbg );};

// Search searches the pages specified by `pages`.
func (_eeab *Editor )Search (pattern string ,pages []int )(map[int ]Match ,error ){_bbec ,_ ,_agfb :=_eeab .getMatches (pattern ,pages );return _bbec ,_agfb ;};func _cbdg (_eafg []*textWord ,_eecdg float64 ,_bgdec ,_abbe rulingList )*wordBag {_agag :=_ffcd (_eafg [0],_eecdg ,_bgdec ,_abbe );
for _ ,_fcde :=range _eafg [1:]{_abaf :=_dcfc (_fcde ._bfeg );_agag ._dgfd [_abaf ]=append (_agag ._dgfd [_abaf ],_fcde );_agag .PdfRectangle =_aea (_agag .PdfRectangle ,_fcde .PdfRectangle );};_agag .sort ();return _agag ;};func (_dabfc *textTable )reduceTiling (_cdecca gridTiling ,_gaeff float64 )*textTable {_gefdg :=make ([]int ,0,_dabfc ._caed );
_fgeae :=make ([]int ,0,_dabfc ._dgead );_aaba :=_cdecca ._agaeb ;_dffdf :=_cdecca ._gbbd ;for _ddaab :=0;_ddaab < _dabfc ._caed ;_ddaab ++{_ceccd :=_ddaab > 0&&_fc .Abs (_dffdf [_ddaab -1]-_dffdf [_ddaab ])< _gaeff &&_dabfc .emptyCompositeRow (_ddaab );
if !_ceccd {_gefdg =append (_gefdg ,_ddaab );};};for _bgega :=0;_bgega < _dabfc ._dgead ;_bgega ++{_abcce :=_bgega < _dabfc ._dgead -1&&_fc .Abs (_aaba [_bgega +1]-_aaba [_bgega ])< _gaeff &&_dabfc .emptyCompositeColumn (_bgega );if !_abcce {_fgeae =append (_fgeae ,_bgega );
};};if len (_gefdg )==_dabfc ._caed &&len (_fgeae )==_dabfc ._dgead {return _dabfc ;};_fcgbd :=textTable {_gdba :_dabfc ._gdba ,_dgead :len (_fgeae ),_caed :len (_gefdg ),_cfee :make (map[uint64 ]compositeCell ,len (_fgeae )*len (_gefdg ))};if _dgbg {_d .Log .Info ("\u0072\u0065\u0064\u0075c\u0065\u0054\u0069\u006c\u0069\u006e\u0067\u003a\u0020\u0025d\u0078%\u0064\u0020\u002d\u003e\u0020\u0025\u0064x\u0025\u0064",_dabfc ._dgead ,_dabfc ._caed ,len (_fgeae ),len (_gefdg ));
_d .Log .Info ("\u0072\u0065d\u0075\u0063\u0065d\u0043\u006f\u006c\u0073\u003a\u0020\u0025\u002b\u0076",_fgeae );_d .Log .Info ("\u0072\u0065d\u0075\u0063\u0065d\u0052\u006f\u0077\u0073\u003a\u0020\u0025\u002b\u0076",_gefdg );};for _bcgd ,_bdede :=range _gefdg {for _edaec ,_dffae :=range _fgeae {_faec ,_edfbdg :=_dabfc .getComposite (_dffae ,_bdede );
if len (_faec )==0{continue ;};if _dgbg {_be .Printf ("\u0020 \u0025\u0032\u0064\u002c \u0025\u0032\u0064\u0020\u0028%\u0032d\u002c \u0025\u0032\u0064\u0029\u0020\u0025\u0071\n",_edaec ,_bcgd ,_dffae ,_bdede ,_aagbb (_faec .merge ().text (),50));};_fcgbd .putComposite (_edaec ,_bcgd ,_faec ,_edfbdg );
};};return &_fcgbd ;};func (_abe *TextMarkArray )getTextMarkAtOffset (_dcaf int )*TextMark {for _ ,_abagb :=range _abe ._dbdc {if _abagb .Offset ==_dcaf {return &_abagb ;};};return nil ;};func (_edca gridTile )contains (_eeef _da .PdfRectangle )bool {if _edca .numBorders ()< 3{return false ;
};if _edca ._ddbde &&_eeef .Llx < _edca .Llx -_ggcc {return false ;};if _edca ._fcbc &&_eeef .Urx > _edca .Urx +_ggcc {return false ;};if _edca ._cdcbc &&_eeef .Lly < _edca .Lly -_ggcc {return false ;};if _edca ._cabbf &&_eeef .Ury > _edca .Ury +_ggcc {return false ;
};return true ;};func (_gcba pathSection )bbox ()_da .PdfRectangle {_aee :=_gcba ._abdb [0]._gadd [0];_edae :=_da .PdfRectangle {Llx :_aee .X ,Urx :_aee .X ,Lly :_aee .Y ,Ury :_aee .Y };_fba :=func (_fcda _fgb .Point ){if _fcda .X < _edae .Llx {_edae .Llx =_fcda .X ;
}else if _fcda .X > _edae .Urx {_edae .Urx =_fcda .X ;};if _fcda .Y < _edae .Lly {_edae .Lly =_fcda .Y ;}else if _fcda .Y > _edae .Ury {_edae .Ury =_fcda .Y ;};};for _ ,_adbb :=range _gcba ._abdb [0]._gadd [1:]{_fba (_adbb );};for _ ,_ebcg :=range _gcba ._abdb [1:]{for _ ,_fdad :=range _ebcg ._gadd {_fba (_fdad );
};};return _edae ;};func _cfecb (_deeca []*textMark ,_cgde _da .PdfRectangle )*textWord {_cffdf :=_deeca [0].PdfRectangle ;_bceac :=_deeca [0]._abeg ;for _ ,_fbec :=range _deeca [1:]{_cffdf =_aea (_cffdf ,_fbec .PdfRectangle );if _fbec ._abeg > _bceac {_bceac =_fbec ._abeg ;
};};return &textWord {PdfRectangle :_cffdf ,_gaada :_deeca ,_bfeg :_cgde .Ury -_cffdf .Lly ,_gaadd :_bceac };};func _fff (_adffg *TextMarkArray ,_efcf *string ,_eceag *int ,_acd string )error {_bbecc :=_adffg .Elements ()[0].DirectObject ;_bdbe ,_bfda :=_eec .GetString (_bbecc );
if !_bfda {return _be .Errorf ("\u0075n\u0061\u0062l\u0065\u0020\u0074\u006f \u0067\u0065\u0074 \u0073\u0074\u0072\u0069\u006e\u0067\u0020\u0042\u0079te\u0073\u0020\u0066r\u006f\u006d \u0064\u0069\u0072\u0065\u0063\u0074O\u0062\u006ae\u0063\u0074");};_fgcg :=_abg (_adffg );
_gce ,_bfda :=_eec .GetStringBytes (_bbecc );if !_bfda {return _eec .ErrTypeError ;};_acfd :=_adffg .Elements ()[0].Font ;_dcff :=_eab (_gce ,_acfd );_geef :="";_egb :=*_efcf ;if len (_egb )> *_eceag {_geef =_egb [*_eceag :*_eceag +len (_fgcg )];}else if *_eceag ==len (_acd )-1&&len (_egb )> *_eceag {_geef =_egb [*_eceag :];
};_ccf :="";_gdab :=_db .Split (_dcff ,"\u0020");_ffc :=_gdab [len (_gdab )-1];if _ffc ==_fgcg &&*_eceag ==0{_ggb :=_db .LastIndex (_dcff ,_fgcg );_ccf =_fede (_dcff ,_ggb ,len (_fgcg )+_ggb ,_geef );}else if *_eceag ==len (_acd )-1&&len (_egb )> *_eceag {_ccf =_db .Replace (_dcff ,_fgcg ,_egb [*_eceag :],-1);
}else {_ccf =_db .Replace (_dcff ,_fgcg ,_geef ,1);};_befc (_bdbe ,_ccf ,_acfd );*_eceag +=len (_fgcg );return nil ;};

// String returns a string describing the current state of the textState stack.
func (_ebd *stateStack )String ()string {_abge :=[]string {_be .Sprintf ("\u002d\u002d\u002d\u002d f\u006f\u006e\u0074\u0020\u0073\u0074\u0061\u0063\u006b\u003a\u0020\u0025\u0064",len (*_ebd ))};for _faad ,_ddgba :=range *_ebd {_feca :="\u003c\u006e\u0069l\u003e";
if _ddgba !=nil {_feca =_ddgba .String ();};_abge =append (_abge ,_be .Sprintf ("\u0009\u0025\u0032\u0064\u003a\u0020\u0025\u0073",_faad ,_feca ));};return _db .Join (_abge ,"\u000a");};type textState struct{_bgcg float64 ;_gccd float64 ;_ddeec float64 ;
_debg float64 ;_beea float64 ;_eegg RenderMode ;_aab float64 ;_abde *_da .PdfFont ;_cac _da .PdfRectangle ;_agbd int ;_bcdd int ;};func _fffb (_dcedc ,_eaa _da .PdfRectangle )bool {return _dcedc .Llx <=_eaa .Llx &&_eaa .Urx <=_dcedc .Urx &&_dcedc .Lly <=_eaa .Lly &&_eaa .Ury <=_dcedc .Ury ;
};

// RenderMode specifies the text rendering mode (Tmode), which determines whether showing text shall cause
// glyph outlines to be  stroked, filled, used as a clipping boundary, or some combination of the three.
// Stroking, filling, and clipping shall have the same effects for a text object as they do for a path object
// (see 8.5.3, "Path-Painting Operators" and 8.5.4, "Clipping Path Operators").
type RenderMode int ;func (_dag *shapesState )addPoint (_egdd ,_abbf float64 ){_cfcc :=_dag .establishSubpath ();_ffea :=_dag .devicePoint (_egdd ,_abbf );if _cfcc ==nil {_dag ._ddgd =true ;_dag ._cdfcf =_ffea ;}else {_cfcc .add (_ffea );};};

// Marks returns the TextMark collection for a page. It represents all the text on the page.
func (_bdfg PageText )Marks ()*TextMarkArray {return &TextMarkArray {_dbdc :_bdfg ._edbb }};func (_efbdf *textLine )toTextMarks (_dgba *int )[]TextMark {var _cfac []TextMark ;for _ ,_dfbb :=range _efbdf ._cdde {if _dfbb ._edeb {_cfac =_gdecg (_cfac ,_dgba ,"\u0020");
};_dbega :=_dfbb .toTextMarks (_dgba );_cfac =append (_cfac ,_dbega ...);};return _cfac ;};func _fgfeg (_effc *textLine )bool {_fdaef :=true ;_fdfg :=-1;for _ ,_gdeb :=range _effc ._cdde {for _ ,_gedbd :=range _gdeb ._gaada {_cabd :=_gedbd ._bfgc ;if _fdfg ==-1{_fdfg =_cabd ;
}else {if _fdfg !=_cabd {_fdaef =false ;break ;};};};};return _fdaef ;};func _bccgd (_gfffb string )bool {for _ ,_eddbf :=range _gfffb {if !_cf .IsSpace (_eddbf ){return false ;};};return true ;};func _befc (_cbdd *_eec .PdfObjectString ,_aacf string ,_gdfe *_da .PdfFont ){_geb ,_efbbd :=_gdfe .StringToCharcodeBytes (_aacf );
if _efbbd !=0{_d .Log .Debug ("\u0057\u0041\u0052\u004e\u003a\u0020\u0073\u006fm\u0065\u0020\u0072un\u0065\u0073\u0020\u0063\u006f\u0075l\u0064\u0020\u006e\u006f\u0074\u0020\u0062\u0065\u0020\u0065\u006e\u0063\u006f\u0064\u0065d\u002e\u000a\u0009\u0025\u0073\u0020\u002d\u003e \u0025\u0076",_aacf ,_geb );
};_bbgg :=_eec .MakeStringFromBytes (_geb );*_cbdd =*_bbgg ;};func _egddg (_aadf *paraList )map[int ][]*textLine {_bfba :=map[int ][]*textLine {};for _ ,_bgcd :=range *_aadf {for _ ,_acfa :=range _bgcd ._bcfc {if !_fgfeg (_acfa ){_d .Log .Debug ("g\u0072\u006f\u0075p\u004c\u0069\u006e\u0065\u0073\u003a\u0020\u0054\u0068\u0065\u0020\u0074\u0065\u0078\u0074\u0020\u006c\u0069\u006e\u0065\u0020\u0063\u006f\u006e\u0074a\u0069\u006e\u0073 \u006d\u006f\u0072\u0065\u0020\u0074\u0068\u0061\u006e\u0020\u006f\u006e\u0065 \u006d\u0063\u0069\u0064 \u006e\u0075\u006d\u0062e\u0072\u002e\u0020\u0049\u0074\u0020\u0073\u0068\u006f\u0075\u006c\u0064\u0020\u0062\u0065\u0020\u0073p\u006c\u0069\u0074\u002e");
continue ;};_gbee :=_acfa ._cdde [0]._gaada [0]._bfgc ;_bfba [_gbee ]=append (_bfba [_gbee ],_acfa );};if _bgcd ._eaca !=nil {_bfcd :=_bgcd ._eaca ._gbcde ;for _ ,_bafa :=range _bfcd {for _ ,_afaa :=range _bafa ._bcfc {if !_fgfeg (_afaa ){_d .Log .Debug ("g\u0072\u006f\u0075p\u004c\u0069\u006e\u0065\u0073\u003a\u0020\u0054\u0068\u0065\u0020\u0074\u0065\u0078\u0074\u0020\u006c\u0069\u006e\u0065\u0020\u0063\u006f\u006e\u0074a\u0069\u006e\u0073 \u006d\u006f\u0072\u0065\u0020\u0074\u0068\u0061\u006e\u0020\u006f\u006e\u0065 \u006d\u0063\u0069\u0064 \u006e\u0075\u006d\u0062e\u0072\u002e\u0020\u0049\u0074\u0020\u0073\u0068\u006f\u0075\u006c\u0064\u0020\u0062\u0065\u0020\u0073p\u006c\u0069\u0074\u002e");
continue ;};_aceaf :=_afaa ._cdde [0]._gaada [0]._bfgc ;_bfba [_aceaf ]=append (_bfba [_aceaf ],_afaa );};};};};return _bfba ;};func (_gaefd *ruling )alignsPrimary (_ceade *ruling )bool {return _gaefd ._deaac ==_ceade ._deaac &&_fc .Abs (_gaefd ._dfga -_ceade ._dfga )< _abbef *0.5;
};func (_ccec paraList )findTextTables ()[]*textTable {var _daddc []*textTable ;for _ ,_fagfbe :=range _ccec {if _fagfbe .taken ()||_fagfbe .Width ()==0{continue ;};_gedde :=_fagfbe .isAtom ();if _gedde ==nil {continue ;};_gedde .growTable ();if _gedde ._dgead *_gedde ._caed < _aeeb {continue ;
};_gedde .markCells ();_gedde .log ("\u0067\u0072\u006fw\u006e");_daddc =append (_daddc ,_gedde );};return _daddc ;};func _bbdb (_eabbg _da .PdfRectangle ,_cdff bounded )float64 {return _eabbg .Ury -_cdff .bbox ().Lly };func _adf (_accb string ,_bdb string )([][]int ,error ){_fag ,_fdega :=_fg .Compile (_accb );
if _fdega !=nil {return nil ,_be .Errorf ("\u0065\u0072\u0072\u006f\u0072\u0020c\u006f\u006d\u0070\u0069\u006c\u0069\u006e\u0067\u0020\u0072\u0065\u0067\u0065x\u0020\u0070\u0061\u0074\u0074\u0065\u0072n\u003a\u0020\u0025\u0077",_fdega );};_cgcb :=_fag .FindAllStringIndex (_bdb ,-1);
return _cgcb ,nil ;};func (_fdaegd *textWord )addDiacritic (_fceeg string ){_ggbb :=_fdaegd ._gaada [len (_fdaegd ._gaada )-1];_ggbb ._bbdbeb +=_fceeg ;_ggbb ._bbdbeb =_ee .NFKC .String (_ggbb ._bbdbeb );};var (_gdd =_cbb .New ("\u0074\u0079p\u0065\u0020\u0063h\u0065\u0063\u006b\u0020\u0065\u0072\u0072\u006f\u0072");
_aff =_cbb .New ("\u0072\u0061\u006e\u0067\u0065\u0020\u0063\u0068\u0065\u0063\u006b\u0020e\u0072\u0072\u006f\u0072"););func _ggce (_fegac float64 )bool {return _fc .Abs (_fegac )< _abbef };func (_fade *textObject )getFillColor ()_dd .Color {return _dadc (_fade ._edce .ColorspaceNonStroking ,_fade ._edce .ColorNonStroking );
};func (_gefc *wordBag )pullWord (_dedc *textWord ,_dbad int ,_deage map[int ]map[*textWord ]struct{}){_gefc .PdfRectangle =_aea (_gefc .PdfRectangle ,_dedc .PdfRectangle );if _dedc ._gaadd > _gefc ._abad {_gefc ._abad =_dedc ._gaadd ;};_gefc ._dgfd [_dbad ]=append (_gefc ._dgfd [_dbad ],_dedc );
_deage [_dbad ][_dedc ]=struct{}{};};func (_gecg *subpath )last ()_fgb .Point {return _gecg ._gadd [len (_gecg ._gadd )-1]};func (_ecdeg *textObject )checkOp (_bgdb *_cb .ContentStreamOperation ,_ecg int ,_eefd bool )(_aecb bool ,_abdg error ){if _ecdeg ==nil {var _dgdc []_eec .PdfObject ;
if _ecg > 0{_dgdc =_bgdb .Params ;if len (_dgdc )> _ecg {_dgdc =_dgdc [:_ecg ];};};_d .Log .Debug ("\u0025\u0023q \u006f\u0070\u0065r\u0061\u006e\u0064\u0020out\u0073id\u0065\u0020\u0074\u0065\u0078\u0074\u002e p\u0061\u0072\u0061\u006d\u0073\u003d\u0025+\u0076",_bgdb .Operand ,_dgdc );
};if _ecg >=0{if len (_bgdb .Params )!=_ecg {if _eefd {_abdg =_cbb .New ("\u0069n\u0063\u006f\u0072\u0072e\u0063\u0074\u0020\u0070\u0061r\u0061m\u0065t\u0065\u0072\u0020\u0063\u006f\u0075\u006et");};_d .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0025\u0023\u0071\u0020\u0073\u0068\u006f\u0075\u006c\u0064\u0020h\u0061\u0076\u0065\u0020\u0025\u0064\u0020i\u006e\u0070\u0075\u0074\u0020\u0070\u0061\u0072\u0061\u006d\u0073,\u0020\u0067\u006f\u0074\u0020\u0025\u0064\u0020\u0025\u002b\u0076",_bgdb .Operand ,_ecg ,len (_bgdb .Params ),_bgdb .Params );
return false ,_abdg ;};};return true ,nil ;};func (_gecd *wordBag )maxDepth ()float64 {return _gecd ._adfa -_gecd .Lly };func _ebbc (_bfec *textLine ,_bgge []*textLine )float64 {var _gbbag float64 =-1;for _ ,_bdef :=range _bgge {if _bdef ._bfdaf > _bfec ._bfdaf {if _fc .Round (_bdef .Llx )>=_fc .Round (_bfec .Llx ){_gbbag =_bdef ._bfdaf ;
}else {break ;};};};return _gbbag ;};func _gcgf (_fcfd _da .PdfRectangle )*ruling {return &ruling {_deaac :_bbdc ,_dfga :_fcfd .Lly ,_fbed :_fcfd .Llx ,_edbbe :_fcfd .Urx };};

// ImageExtractOptions contains options for controlling image extraction from
// PDF pages.
type ImageExtractOptions struct{IncludeInlineStencilMasks bool ;};func (_caf *imageExtractContext )extractFormImages (_fcb *_eec .PdfObjectName ,_fae _cb .GraphicsState ,_dce *_da .PdfPageResources )error {_bdcc ,_dac :=_dce .GetXObjectFormByName (*_fcb );
if _dac !=nil {return _dac ;};if _bdcc ==nil {return nil ;};_aeg ,_dac :=_bdcc .GetContentStream ();if _dac !=nil {return _dac ;};_gag :=_bdcc .Resources ;if _gag ==nil {_gag =_dce ;};_dac =_caf .extractContentStreamImages (string (_aeg ),_gag );if _dac !=nil {return _dac ;
};_caf ._bcbf ++;return nil ;};func _fbfb (_eegc string )bool {if _c .RuneCountInString (_eegc )< _bbeg {return false ;};_eebe ,_dafa :=_c .DecodeLastRuneInString (_eegc );if _dafa <=0||!_cf .Is (_cf .Hyphen ,_eebe ){return false ;};_eebe ,_dafa =_c .DecodeLastRuneInString (_eegc [:len (_eegc )-_dafa ]);
return _dafa > 0&&!_cf .IsSpace (_eebe );};

// Editor represents a document editor object
type Editor struct{_efaa *_da .PdfReader };

// String returns a human readable description of `ss`.
func (_gbd *shapesState )String ()string {return _be .Sprintf ("\u007b\u0025\u0064\u0020su\u0062\u0070\u0061\u0074\u0068\u0073\u0020\u0066\u0072\u0065\u0073\u0068\u003d\u0025t\u007d",len (_gbd ._gdcce ),_gbd ._ddgd );};func _bbdgd (_beebe map[int ]intSet )[]int {_cfeec :=make ([]int ,0,len (_beebe ));
for _fdaefa :=range _beebe {_cfeec =append (_cfeec ,_fdaefa );};_ef .Ints (_cfeec );return _cfeec ;};

// Elements returns the TextMarks in `ma`.
func (_cfc *TextMarkArray )Elements ()[]TextMark {return _cfc ._dbdc };func (_fdcg *stateStack )pop ()*textState {if _fdcg .empty (){return nil ;};_addb :=*(*_fdcg )[len (*_fdcg )-1];*_fdcg =(*_fdcg )[:len (*_fdcg )-1];return &_addb ;};

// ImageMark represents an image drawn on a page and its position in device coordinates.
// All coordinates are in device coordinates.
type ImageMark struct{Image *_da .Image ;

// Dimensions of the image as displayed in the PDF.
Width float64 ;Height float64 ;

// Position of the image in PDF coordinates (lower left corner).
X float64 ;Y float64 ;

// Angle in degrees, if rotated.
Angle float64 ;};func _acbga (_fffce *_da .Image ,_adaea _dd .Color )_ad .Image {_edff ,_fbbag :=int (_fffce .Width ),int (_fffce .Height );_dggb :=_ad .NewRGBA (_ad .Rect (0,0,_edff ,_fbbag ));for _adgag :=0;_adgag < _fbbag ;_adgag ++{for _ggbeb :=0;_ggbeb < _edff ;
_ggbeb ++{_dabfb ,_fafbd :=_fffce .ColorAt (_ggbeb ,_adgag );if _fafbd !=nil {_d .Log .Debug ("\u0057\u0041\u0052\u004e\u003a\u0020\u0063o\u0075\u006c\u0064\u0020\u006e\u006f\u0074\u0020\u0072\u0065\u0074\u0072\u0069\u0065v\u0065 \u0069\u006d\u0061\u0067\u0065\u0020m\u0061\u0073\u006b\u0020\u0076\u0061\u006cu\u0065\u0020\u0061\u0074\u0020\u0028\u0025\u0064\u002c\u0020\u0025\u0064\u0029\u002e\u0020\u004f\u0075\u0074\u0070\u0075\u0074\u0020\u006da\u0079\u0020\u0062\u0065\u0020\u0069\u006e\u0063\u006f\u0072\u0072\u0065\u0063t\u002e",_ggbeb ,_adgag );
continue ;};_bdegb ,_cggbc ,_gbedg ,_ :=_dabfb .RGBA ();var _cadeb _dd .Color ;if _bdegb +_cggbc +_gbedg ==0{_cadeb =_adaea ;}else {_cadeb =_dd .Transparent ;};_dggb .Set (_ggbeb ,_adgag ,_cadeb );};};return _dggb ;};func _daedg (_adeg *wordBag ,_gdca float64 ,_edbfb ,_dfcd rulingList ,_ffacc bool )[]*wordBag {var _edba []*wordBag ;
for _ ,_dfbg :=range _adeg .depthIndexes (){_ggad :=false ;for !_adeg .empty (_dfbg ){_ebdd :=_adeg .firstReadingIndex (_dfbg );_fgcga :=_adeg .firstWord (_ebdd );_ebfd :=_ffcd (_fgcga ,_gdca ,_edbfb ,_dfcd );_adeg .removeWord (_fgcga ,_ebdd );if _ffaf {_d .Log .Info ("\u0066\u0069\u0072\u0073\u0074\u0057\u006f\u0072\u0064\u0020\u005e\u005e^\u005e\u0020\u0025\u0073",_fgcga .String ());
};for _dadff :=true ;_dadff ;_dadff =_ggad {_ggad =false ;_gbgff :=_bccb *_ebfd ._abad ;_gcgg :=_acac *_ebfd ._abad ;if _ffacc {_gcgg =_fc .MaxFloat64 ;};_eagd :=_aeggg *_ebfd ._abad ;if _ffaf {_d .Log .Info ("\u0070a\u0072a\u0057\u006f\u0072\u0064\u0073\u0020\u0064\u0065\u0070\u0074\u0068 \u0025\u002e\u0032\u0066 \u002d\u0020\u0025\u002e\u0032f\u0020\u006d\u0061\u0078\u0049\u006e\u0074\u0072\u0061\u0044\u0065\u0070\u0074\u0068\u0047\u0061\u0070\u003d\u0025\u002e\u0032\u0066\u0020\u006d\u0061\u0078\u0049\u006e\u0074\u0072\u0061R\u0065\u0061\u0064\u0069\u006e\u0067\u0047\u0061p\u003d\u0025\u002e\u0032\u0066",_ebfd .minDepth (),_ebfd .maxDepth (),_eagd ,_gcgg );
};if _adeg .scanBand ("\u0076\u0065\u0072\u0074\u0069\u0063\u0061\u006c",_ebfd ,_eabf (_edcg ,0),_ebfd .minDepth ()-_eagd ,_ebfd .maxDepth ()+_eagd ,_gfdg ,false ,false )> 0{_ggad =true ;};if _adeg .scanBand ("\u0068\u006f\u0072\u0069\u007a\u006f\u006e\u0074\u0061\u006c",_ebfd ,_eabf (_edcg ,_gcgg ),_ebfd .minDepth (),_ebfd .maxDepth (),_edfa ,false ,false )> 0{_ggad =true ;
};if _ggad {continue ;};_afcac :=_adeg .scanBand ("",_ebfd ,_eabf (_fffg ,_gbgff ),_ebfd .minDepth (),_ebfd .maxDepth (),_dafg ,true ,false );if _afcac > 0{_bbff :=(_ebfd .maxDepth ()-_ebfd .minDepth ())/_ebfd ._abad ;if (_afcac > 1&&float64 (_afcac )> 0.3*_bbff )||_afcac <=10{if _adeg .scanBand ("\u006f\u0074\u0068e\u0072",_ebfd ,_eabf (_fffg ,_gbgff ),_ebfd .minDepth (),_ebfd .maxDepth (),_dafg ,false ,true )> 0{_ggad =true ;
};};};};_edba =append (_edba ,_ebfd );};};return _edba ;};func (_ebcgf rulingList )secMinMax ()(float64 ,float64 ){_cbadg ,_dfead :=_ebcgf [0]._fbed ,_ebcgf [0]._edbbe ;for _ ,_bfgbb :=range _ebcgf [1:]{if _bfgbb ._fbed < _cbadg {_cbadg =_bfgbb ._fbed ;
};if _bfgbb ._edbbe > _dfead {_dfead =_bfgbb ._edbbe ;};};return _cbadg ,_dfead ;};type gridTiling struct{_da .PdfRectangle ;_agaeb []float64 ;_gbbd []float64 ;_gbaa map[float64 ]map[float64 ]gridTile ;};type bounded interface{bbox ()_da .PdfRectangle };
func (_bgad *imageExtractContext )extractXObjectImage (_dgg *_eec .PdfObjectName ,_cda _cb .GraphicsState ,_cdfe *_da .PdfPageResources )error {_dbff ,_ :=_cdfe .GetXObjectByName (*_dgg );if _dbff ==nil {return nil ;};_fdgf ,_ceb :=_bgad ._bgb [_dbff ];
if !_ceb {_aba ,_gge :=_cdfe .GetXObjectImageByName (*_dgg );if _gge !=nil {return _gge ;};if _aba ==nil {return nil ;};_bde ,_gge :=_aba .ToImage ();if _gge !=nil {return _gge ;};var _agf _ad .Image ;if _aba .Mask !=nil {if _agf ,_gge =_gfdbe (_aba .Mask ,_dd .Opaque );
_gge !=nil {_d .Log .Debug ("\u0057\u0041\u0052\u004e\u003a \u0063\u006f\u0075\u006c\u0064 \u006eo\u0074\u0020\u0067\u0065\u0074\u0020\u0065\u0078\u0070\u006c\u0069\u0063\u0069\u0074\u0020\u0069\u006d\u0061\u0067e\u0020\u006d\u0061\u0073\u006b\u002e\u0020\u004f\u0075\u0074\u0070\u0075\u0074\u0020\u006d\u0061\u0079\u0020\u0062\u0065\u0020\u0069\u006e\u0063o\u0072\u0072\u0065\u0063\u0074\u002e");
};}else if _aba .SMask !=nil {_agf ,_gge =_dbfg (_aba .SMask ,_dd .Opaque );if _gge !=nil {_d .Log .Debug ("W\u0041\u0052\u004e\u003a\u0020\u0063\u006f\u0075\u006c\u0064\u0020\u006e\u006f\u0074\u0020\u0067\u0065\u0074\u0020\u0073\u006f\u0066\u0074\u0020\u0069\u006da\u0067e\u0020\u006d\u0061\u0073k\u002e\u0020O\u0075\u0074\u0070\u0075\u0074\u0020\u006d\u0061\u0079\u0020\u0062\u0065\u0020\u0069\u006e\u0063\u006f\u0072\u0072\u0065\u0063\u0074\u002e");
};};if _agf !=nil {_cage ,_efad :=_bde .ToGoImage ();if _efad !=nil {return _efad ;};_cage =_efbdg (_cage ,_agf );switch _aba .ColorSpace .String (){case "\u0044\u0065\u0076\u0069\u0063\u0065\u0047\u0072\u0061\u0079","\u0049n\u0064\u0065\u0078\u0065\u0064":_bde ,_efad =_da .ImageHandling .NewGrayImageFromGoImage (_cage );
if _efad !=nil {return _efad ;};default:_bde ,_efad =_da .ImageHandling .NewImageFromGoImage (_cage );if _efad !=nil {return _efad ;};};};_fdgf =&cachedImage {_gad :_bde ,_ada :_aba .ColorSpace };_bgad ._bgb [_dbff ]=_fdgf ;};_ggd :=_fdgf ._gad ;_cgb :=_fdgf ._ada ;
_bfcf ,_cbef :=_cgb .ImageToRGB (*_ggd );if _cbef !=nil {return _cbef ;};_d .Log .Debug ("@\u0044\u006f\u0020\u0043\u0054\u004d\u003a\u0020\u0025\u0073",_cda .CTM .String ());_cfbd :=ImageMark {Image :&_bfcf ,Width :_cda .CTM .ScalingFactorX (),Height :_cda .CTM .ScalingFactorY (),Angle :_cda .CTM .Angle ()};
_cfbd .X ,_cfbd .Y =_cda .CTM .Translation ();_bgad ._eefc =append (_bgad ._eefc ,_cfbd );_bgad ._gfa ++;return nil ;};var _dfag string ="\u005e\u005b\u0061\u002d\u007a\u0041\u002dZ\u005d\u0028\u005c)\u007c\u005c\u002e)\u007c\u005e[\u005c\u0064\u005d\u002b\u0028\u005c)\u007c\\.\u0029\u007c\u005e\u005c\u0028\u005b\u0061\u002d\u007a\u0041\u002d\u005a\u005d\u005c\u0029\u007c\u005e\u005c\u0028\u005b\u005c\u0064\u005d\u002b\u005c\u0029";


// List returns all the list objects detected on the page.
// It detects all the bullet point Lists from a given pdf page and builds a slice of bullet list objects.
// A given bullet list object has a tree structure.
// Each bullet point list is extracted with the text content it contains and all the sub lists found under it as children in the tree.
// The rest content of the pdf is ignored and only text in the bullet point lists are extracted.
// The list extraction is done in two ways.
// 1. If the document is tagged then the lists are extracted using the tags provided in the document.
// 2. Otherwise the bullet lists are extracted from the raw text using regex matching.
// By default the document tag is used if available.
// However this can be disabled using `DisableDocumentTags` in the `Options` object.
// Sometimes disabling document tags option might give a better bullet list extraction if the document was tagged incorrectly.
//
//	    options := &Options{
//		     DisableDocumentTags: false, // this means use document tag if available
//	    }
//	    ex, err := NewWithOptions(page, options)
//	    // handle error
//	    pageText, _, _, err := ex.ExtractPageText()
//	    // handle error
//	    lists := pageText.List()
//	    txt := lists.Text()
func (_dcfda PageText )List ()lists {_bcec :=!_dcfda ._cggd ._bagca ;_ccceb :=_dcfda .getParagraphs ();_aedb :=_ccceb .list ();if _dcfda ._ddbbb !=nil &&_bcec {_gegd :=_egddg (&_ccceb );if len (_dcfda ._ddbbb .K )==0{_d .Log .Debug ("\u004c\u0069\u0073\u0074\u003a\u0020\u0073t\u0072\u0075\u0063\u0074\u0054\u0072\u0065\u0065\u0052\u006f\u006f\u0074\u0020\u0064\u006f\u0065\u0073\u006e'\u0074\u0020\u0068\u0061\u0076e\u0020\u0061\u006e\u0079\u0020\u0063\u006f\u006e\u0074e\u006e\u0074\u002c\u0020\u0075\u0073\u0069\u006e\u0067\u0020\u0074\u0065\u0078\u0074\u0020\u006d\u0061\u0074\u0063\u0068\u0069\u006e\u0067\u0020\u006d\u0065\u0074\u0068\u006f\u0064\u0020\u0069\u006e\u0073\u0074\u0065\u0061\u0064\u002e");
return _aedb ;};_aedb =_edcbf (_dcfda ._ddbbb ,_gegd ,_dcfda ._edbf );};return _aedb ;};

// ApplyArea processes the page text only within the specified area `bbox`.
// Each time ApplyArea is called, it updates the result set in `pt`.
// Can be called multiple times in a row with different bounding boxes.
func (_eaffb *PageText )ApplyArea (bbox _da .PdfRectangle ){_edcb :=make ([]*textMark ,0,len (_eaffb ._fefg ));for _ ,_febf :=range _eaffb ._fefg {if _aafgc (_febf .bbox (),bbox ){_edcb =append (_edcb ,_febf );};};var _ecaa paraList ;_bbdda :="";_abab :=len (_edcb );
for _efaf :=0;_efaf < 360&&_abab > 0;_efaf +=90{_gcbf :=make ([]*textMark ,0,len (_edcb )-_abab );for _ ,_gbec :=range _edcb {if _gbec ._gcbc ==_efaf {_gcbf =append (_gcbf ,_gbec );};};if len (_gcbf )> 0{if _eaffb ._cggd ._adga ==ExtractionModePlain {_bbdda +=_geed (_gcbf ,_eaffb ._ded );
}else {_begbc :=_bbfc (_gcbf ,_eaffb ._ded ,nil ,nil ,_eaffb ._cggd ._adga ==ExtractionModeLayoutNoBreaks );_ecaa =append (_ecaa ,_begbc ...);};_abab -=len (_gcbf );};};if _eaffb ._cggd ._adga ==ExtractionModePlain {_eaffb ._gbbcb =_bbdda ;}else {_edgf :=new (_a .Buffer );
_ecaa .writeText (_edgf );_eaffb ._gbbcb =_edgf .String ();_eaffb ._edbb =_ecaa .toTextMarks ();_eaffb ._egd =_ecaa .tables ();};};var _bb =[]string {"\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0053","\u0042","\u0053","\u0057\u0053","\u0042","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042","\u0042","\u0042","\u0053","\u0057\u0053","\u004f\u004e","\u004f\u004e","\u0045\u0054","\u0045\u0054","\u0045\u0054","\u004f\u004e","\u004f\u004e","\u004f\u004e","\u004f\u004e","\u004f\u004e","\u0045\u0053","\u0043\u0053","\u0045\u0053","\u0043\u0053","\u0043\u0053","\u0045\u004e","\u0045\u004e","\u0045\u004e","\u0045\u004e","\u0045\u004e","\u0045\u004e","\u0045\u004e","\u0045\u004e","\u0045\u004e","\u0045\u004e","\u0043\u0053","\u004f\u004e","\u004f\u004e","\u004f\u004e","\u004f\u004e","\u004f\u004e","\u004f\u004e","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004f\u004e","\u004f\u004e","\u004f\u004e","\u004f\u004e","\u004f\u004e","\u004f\u004e","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004f\u004e","\u004f\u004e","\u004f\u004e","\u004f\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0043\u0053","\u004f\u004e","\u0045\u0054","\u0045\u0054","\u0045\u0054","\u0045\u0054","\u004f\u004e","\u004f\u004e","\u004f\u004e","\u004f\u004e","\u004c","\u004f\u004e","\u004f\u004e","\u0042\u004e","\u004f\u004e","\u004f\u004e","\u0045\u0054","\u0045\u0054","\u0045\u004e","\u0045\u004e","\u004f\u004e","\u004c","\u004f\u004e","\u004f\u004e","\u004f\u004e","\u0045\u004e","\u004c","\u004f\u004e","\u004f\u004e","\u004f\u004e","\u004f\u004e","\u004f\u004e","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004f\u004e","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004f\u004e","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c"};
func (_eafgc *wordBag )firstWord (_fceb int )*textWord {return _eafgc ._dgfd [_fceb ][0]};func (_ecaded *textTable )emptyCompositeColumn (_beebg int )bool {for _afcc :=0;_afcc < _ecaded ._caed ;_afcc ++{if _cadab ,_dceg :=_ecaded ._cfee [_eaabf (_beebg ,_afcc )];
_dceg {if len (_cadab .paraList )> 0{return false ;};};};return true ;};func (_gccf *ruling )intersects (_fbea *ruling )bool {_affef :=(_gccf ._deaac ==_deggg &&_fbea ._deaac ==_bbdc )||(_fbea ._deaac ==_deggg &&_gccf ._deaac ==_bbdc );_fagfb :=func (_gfbdg ,_fddc *ruling )bool {return _gfbdg ._fbed -_agc <=_fddc ._dfga &&_fddc ._dfga <=_gfbdg ._edbbe +_agc ;
};_badgf :=_fagfb (_gccf ,_fbea );_fcadg :=_fagfb (_fbea ,_gccf );if _bdbb {_be .Printf ("\u0020\u0020\u0020\u0020\u0069\u006e\u0074\u0065\u0072\u0073\u0065\u0063\u0074\u0073\u003a\u0020\u0020\u006fr\u0074\u0068\u006f\u0067\u006f\u006e\u0061l\u003d\u0025\u0074\u0020\u006f\u0031\u003d\u0025\u0074\u0020\u006f2\u003d\u0025\u0074\u0020\u2192\u0020\u0025\u0074\u000a"+"\u0020\u0020\u0020 \u0020\u0020\u0020\u0076\u003d\u0025\u0073\u000a"+" \u0020\u0020\u0020\u0020\u0020\u0077\u003d\u0025\u0073\u000a",_affef ,_badgf ,_fcadg ,_affef &&_badgf &&_fcadg ,_gccf ,_fbea );
};return _affef &&_badgf &&_fcadg ;};type textWord struct{_da .PdfRectangle ;_bfeg float64 ;_gdcecg string ;_gaada []*textMark ;_gaadd float64 ;_edeb bool ;};func (_gedb *stateStack )push (_eddb *textState ){_gcaf :=*_eddb ;*_gedb =append (*_gedb ,&_gcaf )};
func (_gbea rulingList )snapToGroupsDirection ()rulingList {_gbea .sortStrict ();_gacg :=make (map[*ruling ]rulingList ,len (_gbea ));_ddgbd :=_gbea [0];_ebcab :=func (_babcf *ruling ){_ddgbd =_babcf ;_gacg [_ddgbd ]=rulingList {_babcf }};_ebcab (_gbea [0]);
for _ ,_cgdbc :=range _gbea [1:]{if _cgdbc ._dfga < _ddgbd ._dfga -_gdge {_d .Log .Error ("\u0073\u006e\u0061\u0070T\u006f\u0047\u0072\u006f\u0075\u0070\u0073\u0044\u0069r\u0065\u0063\u0074\u0069\u006f\u006e\u003a\u0020\u0057\u0072\u006f\u006e\u0067\u0020\u0070\u0072\u0069\u006da\u0072\u0079\u0020\u006f\u0072d\u0065\u0072\u002e\u000a\u0009\u0076\u0030\u003d\u0025\u0073\u000a\u0009\u0020\u0076\u003d\u0025\u0073",_ddgbd ,_cgdbc );
};if _cgdbc ._dfga > _ddgbd ._dfga +_abbef {_ebcab (_cgdbc );}else {_gacg [_ddgbd ]=append (_gacg [_ddgbd ],_cgdbc );};};_ecegc :=make (map[*ruling ]float64 ,len (_gacg ));_ffbgf :=make (map[*ruling ]*ruling ,len (_gbea ));for _gffcb ,_baeff :=range _gacg {_ecegc [_gffcb ]=_baeff .mergePrimary ();
for _ ,_cdaf :=range _baeff {_ffbgf [_cdaf ]=_gffcb ;};};for _ ,_cfbb :=range _gbea {_cfbb ._dfga =_ecegc [_ffbgf [_cfbb ]];};_cgbf :=make (rulingList ,0,len (_gbea ));for _ ,_fcbcc :=range _gacg {_bfbdf :=_fcbcc .splitSec ();for _afdbb ,_ebege :=range _bfbdf {_fgead :=_ebege .merge ();
if len (_cgbf )> 0{_dgdd :=_cgbf [len (_cgbf )-1];if _dgdd .alignsPrimary (_fgead )&&_dgdd .alignsSec (_fgead ){_d .Log .Error ("\u0073\u006e\u0061\u0070\u0054\u006fG\u0072\u006f\u0075\u0070\u0073\u0044\u0069\u0072\u0065\u0063\u0074\u0069\u006f\u006e\u003a\u0020\u0044\u0075\u0070\u006ci\u0063\u0061\u0074\u0065\u0020\u0069\u003d\u0025\u0064\u000a\u0009\u0077\u003d\u0025s\u000a\t\u0076\u003d\u0025\u0073",_afdbb ,_dgdd ,_fgead );
continue ;};};_cgbf =append (_cgbf ,_fgead );};};_cgbf .sortStrict ();return _cgbf ;};func (_caabe *textTable )depth ()float64 {_ebegg :=1e10;for _fcdbf :=0;_fcdbf < _caabe ._dgead ;_fcdbf ++{_aabdf :=_caabe .get (_fcdbf ,0);if _aabdf ==nil ||_aabdf ._eeaf {continue ;
};_ebegg =_fc .Min (_ebegg ,_aabdf .depth ());};return _ebegg ;};func (_ebeaf rulingList )toGrids ()[]rulingList {if _bdbb {_d .Log .Info ("t\u006f\u0047\u0072\u0069\u0064\u0073\u003a\u0020\u0025\u0073",_ebeaf );};_bfeff :=_ebeaf .intersections ();if _bdbb {_d .Log .Info ("\u0074\u006f\u0047r\u0069\u0064\u0073\u003a \u0076\u0065\u0063\u0073\u003d\u0025\u0064 \u0069\u006e\u0074\u0065\u0072\u0073\u0065\u0063\u0074\u0073\u003d\u0025\u0064\u0020",len (_ebeaf ),len (_bfeff ));
for _ ,_aafb :=range _bbdgd (_bfeff ){_be .Printf ("\u00254\u0064\u003a\u0020\u0025\u002b\u0076\n",_aafb ,_bfeff [_aafb ]);};};_afcaf :=make (map[int ]intSet ,len (_ebeaf ));for _bgadff :=range _ebeaf {_fbfa :=_ebeaf .connections (_bfeff ,_bgadff );if len (_fbfa )> 0{_afcaf [_bgadff ]=_fbfa ;
};};if _bdbb {_d .Log .Info ("t\u006fG\u0072\u0069\u0064\u0073\u003a\u0020\u0063\u006fn\u006e\u0065\u0063\u0074s=\u0025\u0064",len (_afcaf ));for _ ,_abbfdf :=range _bbdgd (_afcaf ){_be .Printf ("\u00254\u0064\u003a\u0020\u0025\u002b\u0076\n",_abbfdf ,_afcaf [_abbfdf ]);
};};_dece :=_fbba (len (_ebeaf ),func (_fedad ,_bbfb int )bool {_cbbc ,_efdda :=len (_afcaf [_fedad ]),len (_afcaf [_bbfb ]);if _cbbc !=_efdda {return _cbbc > _efdda ;};return _ebeaf .comp (_fedad ,_bbfb );});if _bdbb {_d .Log .Info ("t\u006fG\u0072\u0069\u0064\u0073\u003a\u0020\u006f\u0072d\u0065\u0072\u0069\u006eg=\u0025\u0076",_dece );
};_ccbge :=[][]int {{_dece [0]}};_ececg :for _ ,_dffc :=range _dece [1:]{for _bgcgb ,_dgbf :=range _ccbge {for _ ,_fbad :=range _dgbf {if _afcaf [_fbad ].has (_dffc ){_ccbge [_bgcgb ]=append (_dgbf ,_dffc );continue _ececg ;};};};_ccbge =append (_ccbge ,[]int {_dffc });
};if _bdbb {_d .Log .Info ("\u0074o\u0047r\u0069\u0064\u0073\u003a\u0020i\u0067\u0072i\u0064\u0073\u003d\u0025\u0076",_ccbge );};_ef .SliceStable (_ccbge ,func (_fcab ,_gfdee int )bool {return len (_ccbge [_fcab ])> len (_ccbge [_gfdee ])});for _ ,_edbe :=range _ccbge {_ef .Slice (_edbe ,func (_bgfa ,_fced int )bool {return _ebeaf .comp (_edbe [_bgfa ],_edbe [_fced ])});
};_abagc :=make ([]rulingList ,len (_ccbge ));for _dgcba ,_ceadf :=range _ccbge {_gffc :=make (rulingList ,len (_ceadf ));for _cgdd ,_egfbd :=range _ceadf {_gffc [_cgdd ]=_ebeaf [_egfbd ];};_abagc [_dgcba ]=_gffc ;};if _bdbb {_d .Log .Info ("\u0074o\u0047r\u0069\u0064\u0073\u003a\u0020g\u0072\u0069d\u0073\u003d\u0025\u002b\u0076",_abagc );
};var _egadf []rulingList ;for _ ,_bddf :=range _abagc {if _gegb ,_beeeg :=_bddf .isActualGrid ();_beeeg {_bddf =_gegb ;_bddf =_bddf .snapToGroups ();_egadf =append (_egadf ,_bddf );};};if _bdbb {_gdfcb ("t\u006fG\u0072\u0069\u0064\u0073\u003a\u0020\u0061\u0063t\u0075\u0061\u006c\u0047ri\u0064\u0073",_egadf );
_d .Log .Info ("\u0074\u006f\u0047\u0072\u0069\u0064\u0073\u003a\u0020\u0067\u0072\u0069\u0064\u0073\u003d%\u0064 \u0061\u0063\u0074\u0075\u0061\u006c\u0047\u0072\u0069\u0064\u0073\u003d\u0025\u0064",len (_abagc ),len (_egadf ));};return _egadf ;};

// String returns a description of `b`.
func (_aegd *wordBag )String ()string {var _bbga []string ;for _ ,_dbbe :=range _aegd .depthIndexes (){_ceg :=_aegd ._dgfd [_dbbe ];for _ ,_ggac :=range _ceg {_bbga =append (_bbga ,_ggac ._gdcecg );};};return _be .Sprintf ("\u0025.\u0032\u0066\u0020\u0066\u006f\u006e\u0074\u0073\u0069\u007a\u0065=\u0025\u002e\u0032\u0066\u0020\u0025\u0064\u0020\u0025\u0071",_aegd .PdfRectangle ,_aegd ._abad ,len (_bbga ),_bbga );
};func (_gbgc *textObject )moveLP (_gadb ,_ddeeb float64 ){_gbgc ._gaae .Concat (_fgb .NewMatrix (1,0,0,1,_gadb ,_ddeeb ));_gbgc ._dccb =_gbgc ._gaae ;};func _cab (_bfd []*TextMarkArray ,_dca ,_fbf string )(string ,error ){_cfba :=0;for _ ,_ecdb :=range _bfd {_cbda :=_ecdb ._dbdc [0].DirectObject ;
if _cbda ==nil {continue ;};_eee :=_cbda .String ();if len (_eee )> 1{_adff :=_fff (_ecdb ,&_dca ,&_cfba ,_fbf );if _adff !=nil {return _dca ,_adff ;};}else if len (_eee )==1{_gcde :=_dbcb (_ecdb ,&_dca ,&_cfba ,_fbf );if _gcde !=nil {return _dca ,_gcde ;
};};};return _dca ,nil ;};func (_dcbcd rectRuling )checkWidth (_gega ,_gdee float64 )(float64 ,bool ){_ffbda :=_gdee -_gega ;_acdce :=_ffbda <=_abbef ;return _ffbda ,_acdce ;};func _cbcgd (_eadcc ,_aeaeb ,_ccfa float64 )rulingKind {if _eadcc >=_ccfa &&_cggee (_aeaeb ,_eadcc ){return _bbdc ;
};if _aeaeb >=_ccfa &&_cggee (_eadcc ,_aeaeb ){return _deggg ;};return _fdeb ;};func (_debb *wordBag )highestWord (_cced int ,_egbc ,_eafd float64 )*textWord {for _ ,_adae :=range _debb ._dgfd [_cced ]{if _egbc <=_adae ._bfeg &&_adae ._bfeg <=_eafd {return _adae ;
};};return nil ;};func (_afdg *wordBag )text ()string {_adcg :=_afdg .allWords ();_bgbg :=make ([]string ,len (_adcg ));for _fdae ,_ffabg :=range _adcg {_bgbg [_fdae ]=_ffabg ._gdcecg ;};return _db .Join (_bgbg ,"\u0020");};func (_bdce rulingList )blocks (_defd ,_caeac *ruling )bool {if _defd ._fbed > _caeac ._edbbe ||_caeac ._fbed > _defd ._edbbe {return false ;
};_acaa :=_fc .Max (_defd ._fbed ,_caeac ._fbed );_agae :=_fc .Min (_defd ._edbbe ,_caeac ._edbbe );if _defd ._dfga > _caeac ._dfga {_defd ,_caeac =_caeac ,_defd ;};for _ ,_ecef :=range _bdce {if _defd ._dfga <=_ecef ._dfga +_abbef &&_ecef ._dfga <=_caeac ._dfga +_abbef &&_ecef ._fbed <=_agae &&_acaa <=_ecef ._edbbe {return true ;
};};return false ;};type shapesState struct{_ggfd _fgb .Matrix ;_effe _fgb .Matrix ;_gdcce []*subpath ;_ddgd bool ;_cdfcf _fgb .Point ;_bead *textObject ;};func _gegdg (_bcfg _da .PdfRectangle )*ruling {return &ruling {_deaac :_deggg ,_dfga :_bcfg .Llx ,_fbed :_bcfg .Lly ,_edbbe :_bcfg .Ury };
};func (_daad *textObject )newTextMark (_gbbaa string ,_ffbd _fgb .Matrix ,_dedfd _fgb .Point ,_gbgg float64 ,_feag *_da .PdfFont ,_bgcgc float64 ,_ggga ,_ffcb _dd .Color ,_ffde _eec .PdfObject ,_dfeg []string ,_gfag int ,_gcegf int )(textMark ,bool ){_dbdb :=_ffbd .Angle ();
_ecaaa :=_bdfd (_dbdb ,_acbaa );var _edfg float64 ;if _ecaaa %180!=90{_edfg =_ffbd .ScalingFactorY ();}else {_edfg =_ffbd .ScalingFactorX ();};_ggda :=_ceccc (_ffbd );_dcfb :=_da .PdfRectangle {Llx :_ggda .X ,Lly :_ggda .Y ,Urx :_dedfd .X ,Ury :_dedfd .Y };
switch _ecaaa %360{case 90:_dcfb .Urx -=_edfg ;case 180:_dcfb .Ury -=_edfg ;case 270:_dcfb .Urx +=_edfg ;case 0:_dcfb .Ury +=_edfg ;default:_ecaaa =0;_dcfb .Ury +=_edfg ;};if _dcfb .Llx > _dcfb .Urx {_dcfb .Llx ,_dcfb .Urx =_dcfb .Urx ,_dcfb .Llx ;};if _dcfb .Lly > _dcfb .Ury {_dcfb .Lly ,_dcfb .Ury =_dcfb .Ury ,_dcfb .Lly ;
};_ffbgc :=true ;if _daad ._fabg ._ccd .Width ()> 0{_cbccg ,_gadg :=_adcf (_dcfb ,_daad ._fabg ._ccd );if !_gadg {_ffbgc =false ;_d .Log .Debug ("\u0054\u0065\u0078\u0074\u0020m\u0061\u0072\u006b\u0020\u006f\u0075\u0074\u0073\u0069\u0064\u0065\u0020\u0070a\u0067\u0065\u002e\u0020\u0062\u0062\u006f\u0078\u003d\u0025\u0067\u0020\u006d\u0065\u0064\u0069\u0061\u0042\u006f\u0078\u003d\u0025\u0067\u0020\u0074\u0065\u0078\u0074\u003d\u0025q",_dcfb ,_daad ._fabg ._ccd ,_gbbaa );
};_dcfb =_cbccg ;};_ecgg :=_dcfb ;_ggdc :=_daad ._fabg ._ccd ;switch _ecaaa %360{case 90:_ggdc .Urx ,_ggdc .Ury =_ggdc .Ury ,_ggdc .Urx ;_ecgg =_da .PdfRectangle {Llx :_ggdc .Urx -_dcfb .Ury ,Urx :_ggdc .Urx -_dcfb .Lly ,Lly :_dcfb .Llx ,Ury :_dcfb .Urx };
case 180:_ecgg =_da .PdfRectangle {Llx :_ggdc .Urx -_dcfb .Llx ,Urx :_ggdc .Urx -_dcfb .Urx ,Lly :_ggdc .Ury -_dcfb .Lly ,Ury :_ggdc .Ury -_dcfb .Ury };case 270:_ggdc .Urx ,_ggdc .Ury =_ggdc .Ury ,_ggdc .Urx ;_ecgg =_da .PdfRectangle {Llx :_dcfb .Ury ,Urx :_dcfb .Lly ,Lly :_ggdc .Ury -_dcfb .Llx ,Ury :_ggdc .Ury -_dcfb .Urx };
};if _ecgg .Llx > _ecgg .Urx {_ecgg .Llx ,_ecgg .Urx =_ecgg .Urx ,_ecgg .Llx ;};if _ecgg .Lly > _ecgg .Ury {_ecgg .Lly ,_ecgg .Ury =_ecgg .Ury ,_ecgg .Lly ;};_decg :=textMark {_bbdbeb :_gbbaa ,PdfRectangle :_ecgg ,_deddc :_dcfb ,_ebdfb :_feag ,_abeg :_edfg ,_fbbc :_bgcgc ,_ddbd :_ffbd ,_gafb :_dedfd ,_gcbc :_ecaaa ,_cgaa :_ggga ,_afbfc :_ffcb ,_dafc :_ffde ,_cdbc :_dfeg ,Th :_daad ._eada ._ddeec ,Tw :_daad ._eada ._gccd ,_bfgc :_gcegf ,_cgcc :_gfag };
if _fgcge {_d .Log .Info ("n\u0065\u0077\u0054\u0065\u0078\u0074M\u0061\u0072\u006b\u003a\u0020\u0073t\u0061\u0072\u0074\u003d\u0025\u002e\u0032f\u0020\u0065\u006e\u0064\u003d\u0025\u002e\u0032\u0066\u0020%\u0073",_ggda ,_dedfd ,_decg .String ());};return _decg ,_ffbgc ;
};func _bdedeg (_dfaf ,_fcebc int )int {if _dfaf > _fcebc {return _dfaf ;};return _fcebc ;};const _geeg =10;func (_bdfa *textLine )pullWord (_fabgc *wordBag ,_cbcc *textWord ,_dcde int ){_bdfa .appendWord (_cbcc );_fabgc .removeWord (_cbcc ,_dcde );};func (_fdfcg *textTable )put (_dcgf ,_bgdge int ,_cdbga *textPara ){_fdfcg ._gbcde [_eaabf (_dcgf ,_bgdge )]=_cdbga ;
};const (_gdge =1.0e-6;_gfdf =1.0e-4;_acbaa =10;_cgef =6;_efbbg =0.5;_eeee =0.12;_gbcca =0.19;_dcec =0.04;_aeggg =1.0;_gfdg =0.04;_abce =12;_acac =0.4;_edfa =0.7;_bccb =1.0;_dafg =0.1;_gbga =1.4;_bcdb =0.46;_acabd =0.02;_bbfg =0.2;_ebcdab =0.5;_bbeg =4;
_dffg =4.0;_aeeb =6;_acdd =0.3;_dafe =0.01;_eaeg =0.02;_adag =2;_egaf =2;_ffga =500;_acgb =4.0;_bebf =0.05;_adabb =0.1;_agc =2.0;_abbef =2.0;_ggcc =1.5;_gfdc =3.0;_agad =0.25;);func _efbe (_dagf ,_cebfc bounded )float64 {return _dagf .bbox ().Llx -_cebfc .bbox ().Llx };
func (_fadgf *ruling )encloses (_gfdd ,_edbg float64 )bool {return _fadgf ._fbed -_agc <=_gfdd &&_edbg <=_fadgf ._edbbe +_agc ;};

// BBox returns the smallest axis-aligned rectangle that encloses all the TextMarks in `ma`.
func (_cdge *TextMarkArray )BBox ()(_da .PdfRectangle ,bool ){var _dgffe _da .PdfRectangle ;_dgcd :=false ;for _ ,_fecd :=range _cdge ._dbdc {if _fecd .Meta ||_bccgd (_fecd .Text ){continue ;};if _dgcd {_dgffe =_aea (_dgffe ,_fecd .BBox );}else {_dgffe =_fecd .BBox ;
_dgcd =true ;};};return _dgffe ,_dgcd ;};func (_daadf rulingList )isActualGrid ()(rulingList ,bool ){_cdbf ,_fgegg :=_daadf .augmentGrid ();if !(len (_cdbf )>=_adag +1&&len (_fgegg )>=_egaf +1){if _bdbb {_d .Log .Info ("\u0069s\u0041\u0063t\u0075\u0061\u006c\u0047r\u0069\u0064\u003a \u004e\u006f\u0074\u0020\u0061\u006c\u0069\u0067\u006eed\u002e\u0020\u0025d\u0020\u0078 \u0025\u0064\u0020\u003c\u0020\u0025d\u0020\u0078 \u0025\u0064",len (_cdbf ),len (_fgegg ),_adag +1,_egaf +1);
};return nil ,false ;};if _bdbb {_d .Log .Info ("\u0069\u0073\u0041\u0063\u0074\u0075a\u006c\u0047\u0072\u0069\u0064\u003a\u0020\u0025\u0073\u0020\u003a\u0020\u0025t\u0020\u0026\u0020\u0025\u0074\u0020\u2192 \u0025\u0074",_daadf ,len (_cdbf )>=2,len (_fgegg )>=2,len (_cdbf )>=2&&len (_fgegg )>=2);
for _efga ,_gdbcb :=range _daadf {_be .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0076\u000a",_efga ,_gdbcb );};};if _debf {_aeef ,_cbgd :=_cdbf [0],_cdbf [len (_cdbf )-1];_gagba ,_fbfdd :=_fgegg [0],_fgegg [len (_fgegg )-1];if !(_ggce (_aeef ._dfga -_gagba ._fbed )&&_ggce (_cbgd ._dfga -_gagba ._edbbe )&&_ggce (_gagba ._dfga -_aeef ._edbbe )&&_ggce (_fbfdd ._dfga -_aeef ._fbed )){if _bdbb {_d .Log .Info ("\u0069\u0073\u0041\u0063\u0074\u0075\u0061l\u0047\u0072\u0069d\u003a\u0020\u0020N\u006f\u0074 \u0061\u006c\u0069\u0067\u006e\u0065d\u002e\n\t\u0076\u0030\u003d\u0025\u0073\u000a\u0009\u0076\u0031\u003d\u0025\u0073\u000a\u0009\u0068\u0030\u003d\u0025\u0073\u000a\u0009\u0068\u0031\u003d\u0025\u0073",_aeef ,_cbgd ,_gagba ,_fbfdd );
};return nil ,false ;};}else {if !_cdbf .aligned (){if _def {_d .Log .Info ("i\u0073\u0041\u0063\u0074\u0075\u0061l\u0047\u0072\u0069\u0064\u003a\u0020N\u006f\u0074\u0020\u0061\u006c\u0069\u0067n\u0065\u0064\u0020\u0076\u0065\u0072\u0074\u0073\u002e\u0020%\u0064",len (_cdbf ));
};return nil ,false ;};if !_fgegg .aligned (){if _bdbb {_d .Log .Info ("i\u0073\u0041\u0063\u0074\u0075\u0061l\u0047\u0072\u0069\u0064\u003a\u0020N\u006f\u0074\u0020\u0061\u006c\u0069\u0067n\u0065\u0064\u0020\u0068\u006f\u0072\u007a\u0073\u002e\u0020%\u0064",len (_fgegg ));
};return nil ,false ;};};_feeed :=append (_cdbf ,_fgegg ...);return _feeed ,true ;};func (_dege *textWord )bbox ()_da .PdfRectangle {return _dege .PdfRectangle };func _eae (_dddb []Font ,_dga string )bool {for _ ,_cfa :=range _dddb {if _cfa .FontName ==_dga {return true ;
};};return false ;};func _bacd (_cfed []pathSection )rulingList {_dbgc (_cfed );if _bdbb {_d .Log .Info ("\u006da\u006b\u0065\u0046\u0069l\u006c\u0052\u0075\u006c\u0069n\u0067s\u003a \u0025\u0064\u0020\u0066\u0069\u006c\u006cs",len (_cfed ));};var _cebdb rulingList ;
for _ ,_cadf :=range _cfed {for _ ,_dffd :=range _cadf ._abdb {if !_dffd .isQuadrilateral (){if _bdbb {_d .Log .Error ("!\u0069s\u0051\u0075\u0061\u0064\u0072\u0069\u006c\u0061t\u0065\u0072\u0061\u006c: \u0025\u0073",_dffd );};continue ;};if _egeab ,_dbge :=_dffd .makeRectRuling (_cadf .Color );
_dbge {_cebdb =append (_cebdb ,_egeab );}else {if _dfaa {_d .Log .Error ("\u0021\u006d\u0061\u006beR\u0065\u0063\u0074\u0052\u0075\u006c\u0069\u006e\u0067\u003a\u0020\u0025\u0073",_dffd );};};};};if _bdbb {_d .Log .Info ("\u006d\u0061\u006b\u0065Fi\u006c\u006c\u0052\u0075\u006c\u0069\u006e\u0067\u0073\u003a\u0020\u0025\u0073",_cebdb .String ());
};return _cebdb ;};