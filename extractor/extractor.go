//
// Copyright 2020 FoxyUtils ehf. All rights reserved.
//
// This is a commercial product and requires a license to operate.
// A trial license can be obtained at https://unidoc.io
//
// DO NOT EDIT: generated by unitwist Go source code obfuscator.
//
// Use of this source code is governed by the UniDoc End User License Agreement
// terms that can be accessed at https://unidoc.io/eula/

// Package extractor is used for quickly extracting PDF content through a simple interface.
// Currently offers functionality for extracting textual content.
package extractor ;import (_ga "bytes";_agb "errors";_gb "fmt";_a "github.com/unidoc/unipdf/v4/common";_ec "github.com/unidoc/unipdf/v4/contentstream";_fe "github.com/unidoc/unipdf/v4/core";_ae "github.com/unidoc/unipdf/v4/internal/license";_cc "github.com/unidoc/unipdf/v4/internal/textencoding";
_aeg "github.com/unidoc/unipdf/v4/internal/transform";_acf "github.com/unidoc/unipdf/v4/model";_d "golang.org/x/image/draw";_ag "golang.org/x/text/unicode/norm";_ce "image";_fd "image/color";_ac "io";_f "math";_eb "reflect";_dc "regexp";_g "sort";_cg "strings";
_ca "unicode";_c "unicode/utf8";);func (_abbgg paraList )extractTables (_gbfc []gridTiling )paraList {if _ccdc {_a .Log .Debug ("\u0065\u0078\u0074r\u0061\u0063\u0074\u0054\u0061\u0062\u006c\u0065\u0073\u003d\u0025\u0064\u0020\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u0078\u003d\u003d\u003d\u003d=\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d",len (_abbgg ));
};if len (_abbgg )< _egca {return _abbgg ;};_gdbee :=_abbgg .findTables (_gbfc );if _ccdc {_a .Log .Info ("c\u006f\u006d\u0062\u0069\u006e\u0065d\u0020\u0074\u0061\u0062\u006c\u0065s\u0020\u0025\u0064\u0020\u003d\u003d\u003d=\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d=\u003d",len (_gdbee ));
for _edfa ,_cadcbe :=range _gdbee {_cadcbe .log (_gb .Sprintf ("c\u006f\u006d\u0062\u0069\u006e\u0065\u0064\u0020\u0025\u0064",_edfa ));};};return _abbgg .applyTables (_gdbee );};func (_bgfca gridTiling )complete ()bool {for _ ,_dedf :=range _bgfca ._bddfg {for _ ,_agefb :=range _dedf {if !_agefb .complete (){return false ;
};};};return true ;};func (_eed *PageFonts )extractPageResourcesToFont (_bce *_acf .PdfPageResources )error {if _bce .Font ==nil {return _agb .New (_af );};_bed ,_gef :=_fe .GetDict (_bce .Font );if !_gef {return _agb .New (_dfda );};for _ ,_egfb :=range _bed .Keys (){var (_ecg =true ;
_fa []byte ;_fbd string ;);_aec ,_bad :=_bce .GetFontByName (_egfb );if !_bad {return _agb .New (_egf );};_cga ,_gcd :=_acf .NewPdfFontFromPdfObject (_aec );if _gcd !=nil {return _gcd ;};_aed :=_cga .FontDescriptor ();_dfbb :=_cga .FontDescriptor ().FontName .String ();
_fee :=_cga .Subtype ();if _ggf (_eed .Fonts ,_dfbb ){continue ;};if len (_cga .ToUnicode ())==0{_ecg =false ;};if _aed .FontFile !=nil {if _dee ,_gaf :=_fe .GetStream (_aed .FontFile );_gaf {_fa ,_gcd =_fe .DecodeStream (_dee );if _gcd !=nil {return _gcd ;
};_fbd =_dfbb +"\u002e\u0070\u0066\u0062";};}else if _aed .FontFile2 !=nil {if _caa ,_ccd :=_fe .GetStream (_aed .FontFile2 );_ccd {_fa ,_gcd =_fe .DecodeStream (_caa );if _gcd !=nil {return _gcd ;};_fbd =_dfbb +"\u002e\u0074\u0074\u0066";};}else if _aed .FontFile3 !=nil {if _bedc ,_fbbd :=_fe .GetStream (_aed .FontFile3 );
_fbbd {_fa ,_gcd =_fe .DecodeStream (_bedc );if _gcd !=nil {return _gcd ;};_fbd =_dfbb +"\u002e\u0063\u0066\u0066";};};if len (_fbd )< 1{_a .Log .Debug (_aac );};_bae :=Font {FontName :_dfbb ,PdfFont :_cga ,IsCID :_cga .IsCID (),IsSimple :_cga .IsSimple (),ToUnicode :_ecg ,FontType :_fee ,FontData :_fa ,FontFileName :_fbd ,FontDescriptor :_aed };
_eed .Fonts =append (_eed .Fonts ,_bae );};return nil ;};

// Elements returns the TextMarks in `ma`.
func (_bgcc *TextMarkArray )Elements ()[]TextMark {return _bgcc ._bcea };func _dcba (_eefc []int )[]int {_fagb :=make ([]int ,len (_eefc ));for _ebdaa ,_gfba :=range _eefc {_fagb [len (_eefc )-1-_ebdaa ]=_gfba ;};return _fagb ;};func _dg (_fg []string ,_ed int ,_ace int ,_ecd string ){for _geg :=_ed ;
_geg < _ace ;_geg ++{_fg [_geg ]=_ecd ;};};func _edfg (_bfdf ,_dabd _acf .PdfRectangle )(_acf .PdfRectangle ,bool ){if !_faab (_bfdf ,_dabd ){return _acf .PdfRectangle {},false ;};return _acf .PdfRectangle {Llx :_f .Max (_bfdf .Llx ,_dabd .Llx ),Urx :_f .Min (_bfdf .Urx ,_dabd .Urx ),Lly :_f .Max (_bfdf .Lly ,_dabd .Lly ),Ury :_f .Min (_bfdf .Ury ,_dabd .Ury )},true ;
};func (_eggbd *textTable )log (_efcdd string ){if !_ccdc {return ;};_a .Log .Info ("~\u007e\u007e\u0020\u0025\u0073\u003a \u0025\u0064\u0020\u0078\u0020\u0025d\u0020\u0067\u0072\u0069\u0064\u003d\u0025t\u000a\u0020\u0020\u0020\u0020\u0020\u0020\u0025\u0036\u002e2\u0066",_efcdd ,_eggbd ._bdea ,_eggbd ._acdga ,_eggbd ._fgae ,_eggbd .PdfRectangle );
for _gacc :=0;_gacc < _eggbd ._acdga ;_gacc ++{for _adecf :=0;_adecf < _eggbd ._bdea ;_adecf ++{_eebcd :=_eggbd .get (_adecf ,_gacc );if _eebcd ==nil {continue ;};_gb .Printf ("%\u0034\u0064\u0020\u00252d\u003a \u0025\u0036\u002e\u0032\u0066 \u0025\u0071\u0020\u0025\u0064\u000a",_adecf ,_gacc ,_eebcd .PdfRectangle ,_gbcgb (_eebcd .text (),50),_c .RuneCountInString (_eebcd .text ()));
};};};func _cf (_ab string ,_ef bool ,_gf bool )BidiText {_df :="\u006c\u0074\u0072";if _gf {_df ="\u0074\u0074\u0062";}else if !_ef {_df ="\u0072\u0074\u006c";};return BidiText {_de :_ab ,_cgf :_df };};func (_feedc lineRuling )xMean ()float64 {return 0.5*(_feedc ._gbcde .X +_feedc ._eaaeg .X )};
func (_geda paraList )writeText (_fefbf _ac .Writer ){for _faaae ,_degce :=range _geda {if _degce ._ffgb {continue ;};_degce .writeText (_fefbf );if _faaae !=len (_geda )-1{if _bbgd (_degce ,_geda [_faaae +1]){_fefbf .Write ([]byte ("\u0020"));}else {_fefbf .Write ([]byte ("\u000a"));
_fefbf .Write ([]byte ("\u000a"));};};};_fefbf .Write ([]byte ("\u000a"));_fefbf .Write ([]byte ("\u000a"));};func (_defb *textTable )getComposite (_faaf ,_gebcf int )(paraList ,_acf .PdfRectangle ){_dgffb ,_deead :=_defb ._dgbef [_egeeg (_faaf ,_gebcf )];
if _ccdc {_gb .Printf ("\u0020\u0020\u0020\u0020\u0020\u0020\u0020\u0020\u0067\u0065\u0074\u0043\u006f\u006d\u0070o\u0073i\u0074\u0065\u0028\u0025\u0064\u002c\u0025\u0064\u0029\u002d\u003e\u0025\u0073\u000a",_faaf ,_gebcf ,_dgffb .String ());};if !_deead {return nil ,_acf .PdfRectangle {};
};return _dgffb .parasBBox ();};type pathSection struct{_dbe []*subpath ;_fd .Color ;};func (_agcfeb paraList )tables ()[]TextTable {var _eaffcd []TextTable ;if _ccdc {_a .Log .Info ("\u0070\u0061\u0072\u0061\u0073\u002e\u0074\u0061\u0062\u006c\u0065\u0073\u003a");
};for _ ,_fdagd :=range _agcfeb {_bagdd :=_fdagd ._bcff ;if _bagdd !=nil &&_bagdd .isExportable (){_eaffcd =append (_eaffcd ,_bagdd .toTextTable ());};};return _eaffcd ;};

// New returns an Extractor instance for extracting content from the input PDF page.
func New (page *_acf .PdfPage )(*Extractor ,error ){return NewWithOptions (page ,nil )};type list struct{_bccf []*textLine ;_dbfbg string ;_feddf []*list ;_abbb string ;};func (_fdec rulingList )connections (_bfbbg map[int ]intSet ,_efeag int )intSet {_fafff :=make (intSet );
_gaae :=make (intSet );var _cdfge func (int );_cdfge =func (_fagc int ){if !_gaae .has (_fagc ){_gaae .add (_fagc );for _acfdd :=range _fdec {if _bfbbg [_acfdd ].has (_fagc ){_fafff .add (_acfdd );};};for _abd :=range _fdec {if _fafff .has (_abd ){_cdfge (_abd );
};};};};_cdfge (_efeag );return _fafff ;};func _abad (_ecafe []*textWord ,_dadeg *textWord )[]*textWord {for _efdee ,_ccec :=range _ecafe {if _ccec ==_dadeg {return _fbdg (_ecafe ,_efdee );};};_a .Log .Error ("\u0072\u0065\u006d\u006f\u0076e\u0057\u006f\u0072\u0064\u003a\u0020\u0077\u006f\u0072\u0064\u0073\u0020\u0064o\u0065\u0073\u006e\u0027\u0074\u0020\u0063\u006f\u006e\u0074\u0061\u0069\u006e\u0020\u0077\u006f\u0072\u0064\u003d\u0025\u0073",_dadeg );
return nil ;};func _ffbcb (_deee ,_fgagb float64 )bool {return _f .Abs (_deee -_fgagb )<=_bgffd };

// String returns a string describing `tm`.
func (_aceg TextMark )String ()string {_aaea :=_aceg .BBox ;var _dgegc string ;if _aceg .Font !=nil {_dgegc =_aceg .Font .String ();if len (_dgegc )> 50{_dgegc =_dgegc [:50]+"\u002e\u002e\u002e";};};var _ccdaea string ;if _aceg .Meta {_ccdaea ="\u0020\u002a\u004d\u002a";
};return _gb .Sprintf ("\u007b\u0054\u0065\u0078t\u004d\u0061\u0072\u006b\u003a\u0020\u0025\u0064\u0020%\u0071\u003d\u0025\u0030\u0032\u0078\u0020\u0028\u0025\u0036\u002e\u0032\u0066\u002c\u0020\u0025\u0036\u002e2\u0066\u0029\u0020\u0028\u00256\u002e\u0032\u0066\u002c\u0020\u0025\u0036\u002e\u0032\u0066\u0029\u0020\u0025\u0073\u0025\u0073\u007d",_aceg .Offset ,_aceg .Text ,[]rune (_aceg .Text ),_aaea .Llx ,_aaea .Lly ,_aaea .Urx ,_aaea .Ury ,_dgegc ,_ccdaea );
};func _cee (_faa *TextMarkArray ,_edee *string ,_cbde *int ,_baeg string )error {var _edac TextMark ;for _ ,_fdag :=range _faa .Elements (){_bbge :=_fdag .Text ;_ged :=_fdag .Font ;_cfcb :="";_cecc :=*_edee ;if len (_cecc )> *_cbde {_cfcb =_cecc [*_cbde :*_cbde +len (_bbge )];
}else if *_cbde ==len (_baeg )-1&&len (_cecc )> *_cbde {_cfcb =_cecc [*_cbde :];};_eaa :=_fdag .DirectObject ;if _eaa ==nil &&_fdag .Text =="\u0020"{_agcfg :=_edac .ObjString ;_adea :=_agcfg [len (_agcfg )-1];if _adea !=_fdag .Text {_eaa =_edac .DirectObject ;
_ged =_edac .Font ;_fdga ,_dgaa :=_fe .GetString (_eaa );if !_dgaa {return _gb .Errorf ("\u0075n\u0061\u0062l\u0065\u0020\u0074\u006f \u0067\u0065\u0074 \u0073\u0074\u0072\u0069\u006e\u0067\u0020\u0042\u0079te\u0073\u0020\u0066r\u006f\u006d \u0064\u0069\u0072\u0065\u0063\u0074O\u0062\u006ae\u0063\u0074");
};_edd ,_dgaa :=_fe .GetStringBytes (_eaa );if !_dgaa {return _fe .ErrTypeError ;};_eaeb :=_aad (_edd ,_ged );_cfcb =_eaeb +_cfcb ;_gbbef (_fdga ,_cfcb ,_ged );*_cbde +=len (_bbge );continue ;};};_bbc ,_aab :=_fe .GetString (_eaa );if !_aab {return _gb .Errorf ("\u0075n\u0061\u0062l\u0065\u0020\u0074\u006f \u0067\u0065\u0074 \u0073\u0074\u0072\u0069\u006e\u0067\u0020\u0042\u0079te\u0073\u0020\u0066r\u006f\u006d \u0064\u0069\u0072\u0065\u0063\u0074O\u0062\u006ae\u0063\u0074");
};_dgfa :="";_fgdg ,_aab :=_fe .GetStringBytes (_eaa );if !_aab {return _fe .ErrTypeError ;};_baf :=_aad (_fgdg ,_ged );_dgfa =_cg .Replace (_baf ,_bbge ,_cfcb ,1);_gbbef (_bbc ,_dgfa ,_ged );*_cbde +=len (_bbge );_edac =_fdag ;};return nil ;};

// ExtractPageImages returns the image contents of the page extractor, including data
// and position, size information for each image.
// A set of options to control page image extraction can be passed in. The options
// parameter can be nil for the default options. By default, inline stencil masks
// are not extracted.
func (_efe *Extractor )ExtractPageImages (options *ImageExtractOptions )(*PageImages ,error ){_gece :=&imageExtractContext {_gcda :options };_fgd :=_gece .extractContentStreamImages (_efe ._dfg ,_efe ._cda );if _fgd !=nil {return nil ,_fgd ;};return &PageImages {Images :_gece ._aef },nil ;
};

// Match defines the structure for each match, including pattern, indexes, and locations.
type Match struct{Pattern string ;Indexes [][]int ;Locations []Box ;};

// String returns a string describing `ma`.
func (_fdaac TextMarkArray )String ()string {_bcdf :=len (_fdaac ._bcea );if _bcdf ==0{return "\u0045\u004d\u0050T\u0059";};_dffg :=_fdaac ._bcea [0];_agdd :=_fdaac ._bcea [_bcdf -1];return _gb .Sprintf ("\u007b\u0054\u0045\u0058\u0054\u004d\u0041\u0052K\u0041\u0052\u0052AY\u003a\u0020\u0025\u0064\u0020\u0065l\u0065\u006d\u0065\u006e\u0074\u0073\u000a\u0009\u0066\u0069\u0072\u0073\u0074\u003d\u0025s\u000a\u0009\u0020\u006c\u0061\u0073\u0074\u003d%\u0073\u007d",_bcdf ,_dffg ,_agdd );
};func (_efedc gridTile )contains (_dedc _acf .PdfRectangle )bool {if _efedc .numBorders ()< 3{return false ;};if _efedc ._gefgb &&_dedc .Llx < _efedc .Llx -_ebgfa {return false ;};if _efedc ._gdec &&_dedc .Urx > _efedc .Urx +_ebgfa {return false ;};if _efedc ._gfddc &&_dedc .Lly < _efedc .Lly -_ebgfa {return false ;
};if _efedc ._bdba &&_dedc .Ury > _efedc .Ury +_ebgfa {return false ;};return true ;};func (_aegae rulingList )toTilings ()(rulingList ,[]gridTiling ){_aegae .log ("\u0074o\u0054\u0069\u006c\u0069\u006e\u0067s");if len (_aegae )==0{return nil ,nil ;};_aegae =_aegae .tidied ("\u0061\u006c\u006c");
_aegae .log ("\u0074\u0069\u0064\u0069\u0065\u0064");_gfbf :=_aegae .toGrids ();_baea :=make ([]gridTiling ,len (_gfbf ));for _febfc ,_bbeg :=range _gfbf {_baea [_febfc ]=_bbeg .asTiling ();};return _aegae ,_baea ;};

// PageImages represents extracted images on a PDF page with spatial information:
// display position and size.
type PageImages struct{Images []ImageMark ;};func _caacf (_aabgd []TextMark ,_cdafa *int ,_cbcgf string )[]TextMark {_fbac :=_eabb ;_fbac .Text =_cbcgf ;return _egbf (_aabgd ,_cdafa ,_fbac );};func (_cbee gridTile )numBorders ()int {_fdgab :=0;if _cbee ._gefgb {_fdgab ++;
};if _cbee ._gdec {_fdgab ++;};if _cbee ._gfddc {_fdgab ++;};if _cbee ._bdba {_fdgab ++;};return _fdgab ;};

// String returns a human readable description of `ss`.
func (_adaa *shapesState )String ()string {return _gb .Sprintf ("\u007b\u0025\u0064\u0020su\u0062\u0070\u0061\u0074\u0068\u0073\u0020\u0066\u0072\u0065\u0073\u0068\u003d\u0025t\u007d",len (_adaa ._feae ),_adaa ._dec );};func (_aaef paraList )eventNeighbours (_dfdcf []event )map[*textPara ][]int {_g .Slice (_dfdcf ,func (_adcbe ,_bdcbf int )bool {_bdeea ,_bbae :=_dfdcf [_adcbe ],_dfdcf [_bdcbf ];
_fefbd ,_ggabd :=_bdeea ._dbdcc ,_bbae ._dbdcc ;if _fefbd !=_ggabd {return _fefbd < _ggabd ;};if _bdeea ._fgec !=_bbae ._fgec {return _bdeea ._fgec ;};return _adcbe < _bdcbf ;});_ecedc :=make (map[int ]intSet );_facbc :=make (intSet );for _ ,_cabgf :=range _dfdcf {if _cabgf ._fgec {_ecedc [_cabgf ._bfgd ]=make (intSet );
for _dceeg :=range _facbc {if _dceeg !=_cabgf ._bfgd {_ecedc [_cabgf ._bfgd ].add (_dceeg );_ecedc [_dceeg ].add (_cabgf ._bfgd );};};_facbc .add (_cabgf ._bfgd );}else {_facbc .del (_cabgf ._bfgd );};};_cecce :=map[*textPara ][]int {};for _ggcb ,_cbdff :=range _ecedc {_abff :=_aaef [_ggcb ];
if len (_cbdff )==0{_cecce [_abff ]=nil ;continue ;};_dcgag :=make ([]int ,len (_cbdff ));_bdae :=0;for _fgdbcb :=range _cbdff {_dcgag [_bdae ]=_fgdbcb ;_bdae ++;};_cecce [_abff ]=_dcgag ;};return _cecce ;};func (_deege *compositeCell )updateBBox (){for _ ,_fgggf :=range _deege .paraList {_deege .PdfRectangle =_fccd (_deege .PdfRectangle ,_fgggf .PdfRectangle );
};};func _addc (_gcaf *wordBag ,_fegc *textWord ,_dffe float64 )bool {return _gcaf .Urx <=_fegc .Llx &&_fegc .Llx < _gcaf .Urx +_dffe ;};func (_faff *PageText )computeViews (){if _faff ._dfdb ._eabg ==ExtractionModePlain {_faff ._dfge =_faff .getText ();
return ;};_daba :=_faff .getParagraphs ();_cegd :=new (_ga .Buffer );_daba .writeText (_cegd );_faff ._dfge =_cegd .String ();_faff ._bece =_daba .toTextMarks ();_faff ._eddg =_daba .tables ();if _ccdc {_a .Log .Info ("\u0063\u006f\u006dpu\u0074\u0065\u0056\u0069\u0065\u0077\u0073\u003a\u0020\u0074\u0061\u0062\u006c\u0065\u0073\u003d\u0025\u0064",len (_faff ._eddg ));
};};func _aad (_dade []byte ,_afa *_acf .PdfFont )string {_egcb :=_afa .BytesToCharcodes (_dade );_egfe ,_cdbe ,_egaa :=_afa .CharcodesToStrings (_egcb ,"");if _egaa > 0{_a .Log .Debug ("\u0072\u0065nd\u0065\u0072\u0054e\u0078\u0074\u003a\u0020num\u0043ha\u0072\u0073\u003d\u0025\u0064\u0020\u006eum\u004d\u0069\u0073\u0073\u0065\u0073\u003d%\u0064",_cdbe ,_egaa );
};_eeeb :=_cg .Join (_egfe ,"");return _eeeb ;};func _edcec (_eagedb string )bool {for _ ,_cfcbf :=range _eagedb {if !_ca .IsSpace (_cfcbf ){return false ;};};return true ;};func (_daade rulingList )primaries ()[]float64 {_bgca :=make (map[float64 ]struct{},len (_daade ));
for _ ,_ddde :=range _daade {_bgca [_ddde ._eeac ]=struct{}{};};_dcec :=make ([]float64 ,len (_bgca ));_cbdf :=0;for _gfbff :=range _bgca {_dcec [_cbdf ]=_gfbff ;_cbdf ++;};_g .Float64s (_dcec );return _dcec ;};type rulingKind int ;func (_fagdda *wordBag )applyRemovals (_adce map[int ]map[*textWord ]struct{}){for _dda ,_bgfa :=range _adce {if len (_bgfa )==0{continue ;
};_gedb :=_fagdda ._ceea [_dda ];_edaae :=len (_gedb )-len (_bgfa );if _edaae ==0{delete (_fagdda ._ceea ,_dda );continue ;};_daab :=make ([]*textWord ,_edaae );_faed :=0;for _ ,_gagad :=range _gedb {if _ ,_fcg :=_bgfa [_gagad ];!_fcg {_daab [_faed ]=_gagad ;
_faed ++;};};_fagdda ._ceea [_dda ]=_daab ;};};type textMark struct{_acf .PdfRectangle ;_dgff int ;_gadb string ;_fdaef string ;_dfdga *_acf .PdfFont ;_gfgd float64 ;_daad float64 ;_fefbg _aeg .Matrix ;_bcag _aeg .Point ;_bfbe _acf .PdfRectangle ;_fcecb _fd .Color ;
_aedf _fd .Color ;_dcga _fe .PdfObject ;_dgcd []string ;Tw float64 ;Th float64 ;_cgfg int ;_fgbaa int ;};func (_ebef *TextMarkArray )getTextMarkAtOffset (_efae int )*TextMark {for _ ,_dccce :=range _ebef ._bcea {if _dccce .Offset ==_efae {return &_dccce ;
};};return nil ;};func (_baaag *textTable )depth ()float64 {_gabfb :=1e10;for _defcfd :=0;_defcfd < _baaag ._bdea ;_defcfd ++{_ccba :=_baaag .get (_defcfd ,0);if _ccba ==nil ||_ccba ._ffgb {continue ;};_gabfb =_f .Min (_gabfb ,_ccba .depth ());};return _gabfb ;
};

// ExtractFonts returns all font information from the page extractor, including
// font name, font type, the raw data of the embedded font file (if embedded), font descriptor and more.
//
// The argument `previousPageFonts` is used when trying to build a complete font catalog for multiple pages or the entire document.
// The entries from `previousPageFonts` are added to the returned result unless already included in the page, i.e. no duplicate entries.
//
// NOTE: If previousPageFonts is nil, all fonts from the page will be returned. Use it when building up a full list of fonts for a document or page range.
func (_adg *Extractor )ExtractFonts (previousPageFonts *PageFonts )(*PageFonts ,error ){_bf :=PageFonts {};_feb :=_bf .extractPageResourcesToFont (_adg ._cda );if _feb !=nil {return nil ,_feb ;};if previousPageFonts !=nil {for _ ,_acb :=range previousPageFonts .Fonts {if !_ggf (_bf .Fonts ,_acb .FontName ){_bf .Fonts =append (_bf .Fonts ,_acb );
};};};return &PageFonts {Fonts :_bf .Fonts },nil ;};func _gdfga (_dabcc *_acf .Image ,_cbbb _fd .Color )_ce .Image {_eebg ,_acfdc :=int (_dabcc .Width ),int (_dabcc .Height );_bead :=_ce .NewRGBA (_ce .Rect (0,0,_eebg ,_acfdc ));for _gbbfea :=0;_gbbfea < _acfdc ;
_gbbfea ++{for _caee :=0;_caee < _eebg ;_caee ++{_efcdc ,_aefcc :=_dabcc .ColorAt (_caee ,_gbbfea );if _aefcc !=nil {_a .Log .Debug ("\u0057\u0041\u0052\u004e\u003a\u0020\u0063o\u0075\u006c\u0064\u0020\u006e\u006f\u0074\u0020\u0072\u0065\u0074\u0072\u0069\u0065v\u0065 \u0069\u006d\u0061\u0067\u0065\u0020m\u0061\u0073\u006b\u0020\u0076\u0061\u006cu\u0065\u0020\u0061\u0074\u0020\u0028\u0025\u0064\u002c\u0020\u0025\u0064\u0029\u002e\u0020\u004f\u0075\u0074\u0070\u0075\u0074\u0020\u006da\u0079\u0020\u0062\u0065\u0020\u0069\u006e\u0063\u006f\u0072\u0072\u0065\u0063t\u002e",_caee ,_gbbfea );
continue ;};_cbbg ,_gcbf ,_dfdefe ,_ :=_efcdc .RGBA ();var _dbdab _fd .Color ;if _cbbg +_gcbf +_dfdefe ==0{_dbdab =_fd .Transparent ;}else {_dbdab =_cbbb ;};_bead .Set (_caee ,_gbbfea ,_dbdab );};};return _bead ;};func _egbf (_fcfd []TextMark ,_cdbaf *int ,_gfffe TextMark )[]TextMark {_gfffe .Offset =*_cdbaf ;
_fcfd =append (_fcfd ,_gfffe );*_cdbaf +=len (_gfffe .Text );return _fcfd ;};func (_bdbeb *textPara )text ()string {_fcedd :=new (_ga .Buffer );_bdbeb .writeText (_fcedd );return _fcedd .String ();};func (_bggae paraList )llyRange (_ffbf []int ,_effd ,_ffce float64 )[]int {_eabec :=len (_bggae );
if _ffce < _bggae [_ffbf [0]].Lly ||_effd > _bggae [_ffbf [_eabec -1]].Lly {return nil ;};_dcaead :=_g .Search (_eabec ,func (_cadc int )bool {return _bggae [_ffbf [_cadc ]].Lly >=_effd });_ddca :=_g .Search (_eabec ,func (_geea int )bool {return _bggae [_ffbf [_geea ]].Lly > _ffce });
return _ffbf [_dcaead :_ddca ];};const (ExtractionModeLayout =iota ;ExtractionModePlain ;ExtractionModeLayoutNoBreaks ;);func _aee (_fgdc []*textLine ,_gfac map[float64 ][]*textLine )[]*list {_efefa :=_bbgeg (_gfac );_ccgg :=[]*list {};if len (_efefa )==0{return _ccgg ;
};_eecg :=_efefa [0];_egdb :=1;_fbea :=_gfac [_eecg ];for _afff ,_fdedg :=range _fbea {var _abea float64 ;_edcga :=[]*list {};_cgfc :=_fdedg ._dgda ;_gedg :=-1.0;if _afff < len (_fbea )-1{_gedg =_fbea [_afff +1]._dgda ;};if _egdb < len (_efefa ){_edcga =_efcd (_fgdc ,_gfac ,_efefa ,_egdb ,_cgfc ,_gedg );
};_abea =_gedg ;if len (_edcga )> 0{_fcgef :=_edcga [0];if len (_fcgef ._bccf )> 0{_abea =_fcgef ._bccf [0]._dgda ;};};_ddcddd :=[]*textLine {_fdedg };_cdgd :=_cdda (_fdedg ,_fgdc ,_cgfc ,_abea );_ddcddd =append (_ddcddd ,_cdgd ...);_cdge :=_eafb (_ddcddd ,"\u0062\u0075\u006c\u006c\u0065\u0074",_edcga );
_cdge ._abbb =_gcde (_ddcddd ,"");_ccgg =append (_ccgg ,_cdge );};return _ccgg ;};func _acfa (_fdbe *Extractor ,_eddf *_acf .PdfPageResources ,_cfaf _ec .GraphicsState ,_ffaa *textState ,_cdfgc *stateStack )*textObject {return &textObject {_ccgf :_fdbe ,_accb :_eddf ,_dbc :_cfaf ,_dae :_cdfgc ,_eea :_ffaa ,_fcda :_aeg .IdentityMatrix (),_fgeb :_aeg .IdentityMatrix ()};
};func (_gcdd *textTable )subdivide ()*textTable {_gcdd .logComposite ("\u0073u\u0062\u0064\u0069\u0076\u0069\u0064e");_cgfff :=_gcdd .compositeRowCorridors ();_bcbb :=_gcdd .compositeColCorridors ();if _ccdc {_a .Log .Info ("\u0073u\u0062\u0064i\u0076\u0069\u0064\u0065:\u000a\u0009\u0072o\u0077\u0043\u006f\u0072\u0072\u0069\u0064\u006f\u0072s=\u0025\u0073\u000a\t\u0063\u006fl\u0043\u006f\u0072\u0072\u0069\u0064o\u0072\u0073=\u0025\u0073",_bfbc (_cgfff ),_bfbc (_bcbb ));
};if len (_cgfff )==0||len (_bcbb )==0{return _gcdd ;};_gecdb (_cgfff );_gecdb (_bcbb );if _ccdc {_a .Log .Info ("\u0073\u0075\u0062\u0064\u0069\u0076\u0069\u0064\u0065\u0020\u0066\u0069\u0078\u0065\u0064\u003a\u000a\u0009r\u006f\u0077\u0043\u006f\u0072\u0072\u0069d\u006f\u0072\u0073\u003d\u0025\u0073\u000a\u0009\u0063\u006f\u006cC\u006f\u0072\u0072\u0069\u0064\u006f\u0072\u0073\u003d\u0025\u0073",_bfbc (_cgfff ),_bfbc (_bcbb ));
};_agdgd ,_faegg :=_bbedb (_gcdd ._acdga ,_cgfff );_aacba ,_facea :=_bbedb (_gcdd ._bdea ,_bcbb );_ggedd :=make (map[uint64 ]*textPara ,_facea *_faegg );_ffeag :=&textTable {PdfRectangle :_gcdd .PdfRectangle ,_fgae :_gcdd ._fgae ,_acdga :_faegg ,_bdea :_facea ,_cdefa :_ggedd };
if _ccdc {_a .Log .Info ("\u0073\u0075b\u0064\u0069\u0076\u0069\u0064\u0065\u003a\u0020\u0063\u006f\u006d\u0070\u006f\u0073\u0069\u0074\u0065\u0020\u003d\u0020\u0025\u0064\u0020\u0078\u0020\u0025\u0064\u0020\u0063\u0065\u006c\u006c\u0073\u003d\u0020\u0025\u0064\u0020\u0078\u0020\u0025\u0064\u000a"+"\u0009\u0072\u006f\u0077\u0043\u006f\u0072\u0072\u0069\u0064\u006f\u0072s\u003d\u0025\u0073\u000a"+"\u0009\u0063\u006f\u006c\u0043\u006f\u0072\u0072\u0069\u0064\u006f\u0072s\u003d\u0025\u0073\u000a"+"\u0009\u0079\u004f\u0066\u0066\u0073\u0065\u0074\u0073=\u0025\u002b\u0076\u000a"+"\u0009\u0078\u004f\u0066\u0066\u0073\u0065\u0074\u0073\u003d\u0025\u002b\u0076",_gcdd ._bdea ,_gcdd ._acdga ,_facea ,_faegg ,_bfbc (_cgfff ),_bfbc (_bcbb ),_agdgd ,_aacba );
};for _daeba :=0;_daeba < _gcdd ._acdga ;_daeba ++{_bgaeg :=_agdgd [_daeba ];for _dbcdg :=0;_dbcdg < _gcdd ._bdea ;_dbcdg ++{_gfad :=_aacba [_dbcdg ];if _ccdc {_gb .Printf ("\u0025\u0036\u0064\u002c %\u0032\u0064\u003a\u0020\u0078\u0030\u003d\u0025\u0064\u0020\u0079\u0030\u003d\u0025d\u000a",_dbcdg ,_daeba ,_gfad ,_bgaeg );
};_fdaec ,_fbcef :=_gcdd ._dgbef [_egeeg (_dbcdg ,_daeba )];if !_fbcef {continue ;};_egbga :=_fdaec .split (_cgfff [_daeba ],_bcbb [_dbcdg ]);for _edae :=0;_edae < _egbga ._acdga ;_edae ++{for _adcde :=0;_adcde < _egbga ._bdea ;_adcde ++{_edab :=_egbga .get (_adcde ,_edae );
_ffeag .put (_gfad +_adcde ,_bgaeg +_edae ,_edab );if _ccdc {_gb .Printf ("\u0025\u0038\u0064\u002c\u0020\u0025\u0032\u0064\u003a\u0020\u0025\u0073\u000a",_gfad +_adcde ,_bgaeg +_edae ,_edab );};};};};};return _ffeag ;};type fontEntry struct{_cgeb *_acf .PdfFont ;
_acegd int64 ;};

// ExtractPageText returns the text contents of `e` (an Extractor for a page) as a PageText.
// TODO(peterwilliams97): The stats complicate this function signature and aren't very useful.
//
//	Replace with a function like Extract() (*PageText, error)
func (_gac *Extractor )ExtractPageText ()(*PageText ,int ,int ,error ){_bebe ,_eeda ,_fge ,_abe :=_gac .extractPageText (_gac ._dfg ,_gac ._cda ,_aeg .IdentityMatrix (),0,false );if _abe !=nil &&_abe !=_acf .ErrColorOutOfRange {return nil ,0,0,_abe ;};
if _gac ._cdad !=nil {_bebe ._dfdb ._eabg =_gac ._cdad .ExtractionMode ;};_bebe .computeViews ();_abe =_bdec (_bebe );if _abe !=nil {return nil ,0,0,_abe ;};if _gac ._cdad !=nil {if _gac ._cdad .ApplyCropBox &&_gac ._dfb !=nil {_bebe .ApplyArea (*_gac ._dfb );
};_bebe ._dfdb ._aebg =_gac ._cdad .DisableDocumentTags ;};return _bebe ,_eeda ,_fge ,nil ;};func _eaag (_eggaa []*textLine ,_cedbf ,_ebfdf float64 )[]*textLine {var _facfb []*textLine ;for _ ,_addfb :=range _eggaa {if _cedbf ==-1{if _addfb ._dgda > _ebfdf {_facfb =append (_facfb ,_addfb );
};}else {if _addfb ._dgda > _ebfdf &&_addfb ._dgda < _cedbf {_facfb =append (_facfb ,_addfb );};};};return _facfb ;};func (_bagb rulingList )toGrids ()[]rulingList {if _eagg {_a .Log .Info ("t\u006f\u0047\u0072\u0069\u0064\u0073\u003a\u0020\u0025\u0073",_bagb );
};_agacf :=_bagb .intersections ();if _eagg {_a .Log .Info ("\u0074\u006f\u0047r\u0069\u0064\u0073\u003a \u0076\u0065\u0063\u0073\u003d\u0025\u0064 \u0069\u006e\u0074\u0065\u0072\u0073\u0065\u0063\u0074\u0073\u003d\u0025\u0064\u0020",len (_bagb ),len (_agacf ));
for _ ,_gbgbd :=range _faaff (_agacf ){_gb .Printf ("\u00254\u0064\u003a\u0020\u0025\u002b\u0076\n",_gbgbd ,_agacf [_gbgbd ]);};};_agee :=make (map[int ]intSet ,len (_bagb ));for _aaebc :=range _bagb {_beccf :=_bagb .connections (_agacf ,_aaebc );if len (_beccf )> 0{_agee [_aaebc ]=_beccf ;
};};if _eagg {_a .Log .Info ("t\u006fG\u0072\u0069\u0064\u0073\u003a\u0020\u0063\u006fn\u006e\u0065\u0063\u0074s=\u0025\u0064",len (_agee ));for _ ,_bgfb :=range _faaff (_agee ){_gb .Printf ("\u00254\u0064\u003a\u0020\u0025\u002b\u0076\n",_bgfb ,_agee [_bgfb ]);
};};_cbadd :=_acgfb (len (_bagb ),func (_cffbd ,_bcdfe int )bool {_bbec ,_cefb :=len (_agee [_cffbd ]),len (_agee [_bcdfe ]);if _bbec !=_cefb {return _bbec > _cefb ;};return _bagb .comp (_cffbd ,_bcdfe );});if _eagg {_a .Log .Info ("t\u006fG\u0072\u0069\u0064\u0073\u003a\u0020\u006f\u0072d\u0065\u0072\u0069\u006eg=\u0025\u0076",_cbadd );
};_gcdg :=[][]int {{_cbadd [0]}};_gaeed :for _ ,_bbcg :=range _cbadd [1:]{for _gcaeg ,_eebdf :=range _gcdg {for _ ,_ggbc :=range _eebdf {if _agee [_ggbc ].has (_bbcg ){_gcdg [_gcaeg ]=append (_eebdf ,_bbcg );continue _gaeed ;};};};_gcdg =append (_gcdg ,[]int {_bbcg });
};if _eagg {_a .Log .Info ("\u0074o\u0047r\u0069\u0064\u0073\u003a\u0020i\u0067\u0072i\u0064\u0073\u003d\u0025\u0076",_gcdg );};_g .SliceStable (_gcdg ,func (_dgae ,_aead int )bool {return len (_gcdg [_dgae ])> len (_gcdg [_aead ])});for _ ,_fgcc :=range _gcdg {_g .Slice (_fgcc ,func (_gbdba ,_adgbc int )bool {return _bagb .comp (_fgcc [_gbdba ],_fgcc [_adgbc ])});
};_dcaab :=make ([]rulingList ,len (_gcdg ));for _bdef ,_bddb :=range _gcdg {_eeebb :=make (rulingList ,len (_bddb ));for _facgd ,_bfdbc :=range _bddb {_eeebb [_facgd ]=_bagb [_bfdbc ];};_dcaab [_bdef ]=_eeebb ;};if _eagg {_a .Log .Info ("\u0074o\u0047r\u0069\u0064\u0073\u003a\u0020g\u0072\u0069d\u0073\u003d\u0025\u002b\u0076",_dcaab );
};var _agaaa []rulingList ;for _ ,_dbga :=range _dcaab {if _ebaef ,_dggc :=_dbga .isActualGrid ();_dggc {_dbga =_ebaef ;_dbga =_dbga .snapToGroups ();_agaaa =append (_agaaa ,_dbga );};};if _eagg {_aadg ("t\u006fG\u0072\u0069\u0064\u0073\u003a\u0020\u0061\u0063t\u0075\u0061\u006c\u0047ri\u0064\u0073",_agaaa );
_a .Log .Info ("\u0074\u006f\u0047\u0072\u0069\u0064\u0073\u003a\u0020\u0067\u0072\u0069\u0064\u0073\u003d%\u0064 \u0061\u0063\u0074\u0075\u0061\u006c\u0047\u0072\u0069\u0064\u0073\u003d\u0025\u0064",len (_dcaab ),len (_agaaa ));};return _agaaa ;};type subpath struct{_adcb []_aeg .Point ;
_aaca bool ;};func (_gfbg paraList )findGridTables (_fcgb []gridTiling )[]*textTable {if _ccdc {_a .Log .Info ("\u0066i\u006e\u0064\u0047\u0072\u0069\u0064\u0054\u0061\u0062\u006c\u0065s\u003a\u0020\u0025\u0064\u0020\u0070\u0061\u0072\u0061\u0073",len (_gfbg ));
for _ggef ,_bbbgf :=range _gfbg {_gb .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0073\u000a",_ggef ,_bbbgf );};};var _gcdgb []*textTable ;for _bdgc ,_dfbd :=range _fcgb {_fcaad ,_gecfa :=_gfbg .findTableGrid (_dfbd );if _fcaad !=nil {_fcaad .log (_gb .Sprintf ("\u0066\u0069\u006e\u0064Ta\u0062\u006c\u0065\u0057\u0069\u0074\u0068\u0047\u0072\u0069\u0064\u0073\u003a\u0020%\u0064",_bdgc ));
_gcdgb =append (_gcdgb ,_fcaad );_fcaad .markCells ();};for _fdbef :=range _gecfa {_fdbef ._bfcgd =true ;};};if _ccdc {_a .Log .Info ("\u0066i\u006e\u0064\u0047\u0072i\u0064\u0054\u0061\u0062\u006ce\u0073:\u0020%\u0064\u0020\u0074\u0061\u0062\u006c\u0065s",len (_gcdgb ));
};return _gcdgb ;};func (_facfd rectRuling )checkWidth (_cfeg ,_ceee float64 )(float64 ,bool ){_dabea :=_ceee -_cfeg ;_cegdb :=_dabea <=_cadg ;return _dabea ,_cegdb ;};

// Text returns the text content of the `bulletLists`.
func (_feaac *lists )Text ()string {_bbfe :=&_cg .Builder {};for _ ,_bbbd :=range *_feaac {_cgga :=_bbbd .Text ();_bbfe .WriteString (_cgga );};return _bbfe .String ();};func (_dbbb *textTable )toTextTable ()TextTable {if _ccdc {_a .Log .Info ("t\u006fT\u0065\u0078\u0074\u0054\u0061\u0062\u006c\u0065:\u0020\u0025\u0064\u0020x \u0025\u0064",_dbbb ._bdea ,_dbbb ._acdga );
};_gfddb :=make ([][]TableCell ,_dbbb ._acdga );for _gcfcg :=0;_gcfcg < _dbbb ._acdga ;_gcfcg ++{_gfddb [_gcfcg ]=make ([]TableCell ,_dbbb ._bdea );for _fceef :=0;_fceef < _dbbb ._bdea ;_fceef ++{_dbae :=_dbbb .get (_fceef ,_gcfcg );if _dbae ==nil {continue ;
};_cdggf (_dbae ._ggfbe );if _ccdc {_gb .Printf ("\u0025\u0034\u0064 \u0025\u0032\u0064\u003a\u0020\u0025\u0073\u000a",_fceef ,_gcfcg ,_dbae );};_gfddb [_gcfcg ][_fceef ].Text =_dbae .text ();_cadgg :=0;_gfddb [_gcfcg ][_fceef ].Marks ._bcea =_dbae .toTextMarks (&_cadgg );
};};_bbab :=TextTable {W :_dbbb ._bdea ,H :_dbbb ._acdga ,Cells :_gfddb };_bbab .PdfRectangle =_dbbb .bbox ();return _bbab ;};func _cd (_cec []string ,_ad int ,_agg int ){for _gce ,_gg :=_ad ,_agg -1;_gce < _gg ;_gce ,_gg =_gce +1,_gg -1{_gbe :=_cec [_gce ];
_cec [_gce ]=_cec [_gg ];_cec [_gg ]=_gbe ;};};

// NewEditor returns a new Editor object
func NewEditor (reader *_acf .PdfReader )*Editor {return &Editor {_bbg :reader }};func (_ddbfd *textPara )bbox ()_acf .PdfRectangle {return _ddbfd .PdfRectangle };var _egdec =map[rulingKind ]string {_fgdf :"\u006e\u006f\u006e\u0065",_bgbc :"\u0068\u006f\u0072\u0069\u007a\u006f\u006e\u0074\u0061\u006c",_ffgdf :"\u0076\u0065\u0072\u0074\u0069\u0063\u0061\u006c"};
func (_baed *stateStack )empty ()bool {return len (*_baed )==0};func _edb (_aabf string ,_cade ,_fgf int ,_dca string )string {if _fgf > len (_aabf )-1{return _aabf [:_cade ]+_dca ;};return _aabf [:_cade ]+_dca +_aabf [_fgf :];};func _cace (_ffeca ,_afgc int )int {if _ffeca < _afgc {return _ffeca ;
};return _afgc ;};func (_acbec *PageText )getText ()string {_gbeeb :="";_adeb :=len (_acbec ._effb );for _ffee :=0;_ffee < 360&&_adeb > 0;_ffee +=90{_fgde :=make ([]*textMark ,0,len (_acbec ._effb )-_adeb );for _ ,_dfgaf :=range _acbec ._effb {if _dfgaf ._dgff ==_ffee {_fgde =append (_fgde ,_dfgaf );
};};if len (_fgde )> 0{_gbeeb +=_eggb (_fgde ,_acbec ._ddfe );_adeb -=len (_fgde );};};return _gbeeb ;};func (_bfc *textObject )moveText (_cdaa ,_debga float64 ){_bfc .moveLP (_cdaa ,_debga )};

// Extractor stores and offers functionality for extracting content from PDF pages.
type Extractor struct{_dfg string ;_cda *_acf .PdfPageResources ;_ffe _acf .PdfRectangle ;_dfb *_acf .PdfRectangle ;_dgaf int ;_cea map[string ]fontEntry ;_dfd map[string ]textResult ;_ggd map[string ]textResult ;_gda int64 ;_cdad *Options ;_dbf *_acf .StructTreeRoot ;
_fbb _fe .PdfObject ;_aae []*_acf .PdfAnnotation ;};func (_accbg rulingList )findPrimSec (_gffea ,_gfcg float64 )*ruling {for _ ,_dggbd :=range _accbg {if _edfea (_dggbd ._eeac -_gffea )&&_dggbd ._feded -_bgffd <=_gfcg &&_gfcg <=_dggbd ._bbebb +_bgffd {return _dggbd ;
};};return nil ;};func (_cbcc TextTable )getCellInfo (_dcg TextMark )[][]int {for _bfbg ,_fgdbc :=range _cbcc .Cells {for _efabf :=range _fgdbc {_ecbb :=&_fgdbc [_efabf ].Marks ;if _ecbb .exists (_dcg ){return [][]int {{_bfbg },{_efabf }};};};};return nil ;
};func _gfg (_bdaf *paraList )map[int ][]*textLine {_fagdg :=map[int ][]*textLine {};for _ ,_gbff :=range *_bdaf {for _ ,_bedd :=range _gbff ._ggfbe {if !_cddcf (_bedd ){_a .Log .Debug ("g\u0072\u006f\u0075p\u004c\u0069\u006e\u0065\u0073\u003a\u0020\u0054\u0068\u0065\u0020\u0074\u0065\u0078\u0074\u0020\u006c\u0069\u006e\u0065\u0020\u0063\u006f\u006e\u0074a\u0069\u006e\u0073 \u006d\u006f\u0072\u0065\u0020\u0074\u0068\u0061\u006e\u0020\u006f\u006e\u0065 \u006d\u0063\u0069\u0064 \u006e\u0075\u006d\u0062e\u0072\u002e\u0020\u0049\u0074\u0020\u0073\u0068\u006f\u0075\u006c\u0064\u0020\u0062\u0065\u0020\u0073p\u006c\u0069\u0074\u002e");
continue ;};_bgbb :=_bedd ._cfec [0]._eaee [0]._cgfg ;_fagdg [_bgbb ]=append (_fagdg [_bgbb ],_bedd );};if _gbff ._bcff !=nil {_gaefb :=_gbff ._bcff ._cdefa ;for _ ,_dbdb :=range _gaefb {for _ ,_ggeab :=range _dbdb ._ggfbe {if !_cddcf (_ggeab ){_a .Log .Debug ("g\u0072\u006f\u0075p\u004c\u0069\u006e\u0065\u0073\u003a\u0020\u0054\u0068\u0065\u0020\u0074\u0065\u0078\u0074\u0020\u006c\u0069\u006e\u0065\u0020\u0063\u006f\u006e\u0074a\u0069\u006e\u0073 \u006d\u006f\u0072\u0065\u0020\u0074\u0068\u0061\u006e\u0020\u006f\u006e\u0065 \u006d\u0063\u0069\u0064 \u006e\u0075\u006d\u0062e\u0072\u002e\u0020\u0049\u0074\u0020\u0073\u0068\u006f\u0075\u006c\u0064\u0020\u0062\u0065\u0020\u0073p\u006c\u0069\u0074\u002e");
continue ;};_bcae :=_ggeab ._cfec [0]._eaee [0]._cgfg ;_fagdg [_bcae ]=append (_fagdg [_bcae ],_ggeab );};};};};return _fagdg ;};func (_dfga *stateStack )size ()int {return len (*_dfga )};func (_fbbe rulingList )bbox ()_acf .PdfRectangle {var _ggca _acf .PdfRectangle ;
if len (_fbbe )==0{_a .Log .Error ("r\u0075\u006c\u0069\u006e\u0067\u004ci\u0073\u0074\u002e\u0062\u0062\u006f\u0078\u003a\u0020n\u006f\u0020\u0072u\u006ci\u006e\u0067\u0073");return _acf .PdfRectangle {};};if _fbbe [0]._becca ==_bgbc {_ggca .Llx ,_ggca .Urx =_fbbe .secMinMax ();
_ggca .Lly ,_ggca .Ury =_fbbe .primMinMax ();}else {_ggca .Llx ,_ggca .Urx =_fbbe .primMinMax ();_ggca .Lly ,_ggca .Ury =_fbbe .secMinMax ();};return _ggca ;};func _dfe (_eg []rune )BidiText {_ebb :=-1;_caf :=false ;_ea :=true ;_cfb :=len (_eg );_fdd :=make ([]string ,_cfb );
_gga :=make ([]string ,_cfb );if _cfb ==0||_caf {return _cf (string (_eg ),_ea ,_caf );};_cecd :=0;for _fcd ,_gba :=range _eg {_fdd [_fcd ]=string (_gba );_gd :="\u004c";if _gba <=0x00ff{_gd =_ge [_gba ];}else if 0x0590<=_gba &&_gba <=0x05f4{_gd ="\u0052";
}else if 0x0600<=_gba &&_gba <=0x06ff{_cb :=_gba &0xff;if int (_cb )>=len (_gee ){_a .Log .Debug ("\u0042\u0069\u0064\u0069\u003a\u0020\u0069\u006e\u0076\u0061\u006c\u0069\u0064\u0020\u0055n\u0069c\u006f\u0064\u0065\u0020\u0063\u0068\u0061\u0072\u0061\u0063\u0074\u0065\u0072\u0020"+string (_gba ));
};_gd =_gee [_gba &0xff];}else if (0x0700<=_gba &&_gba <=0x08ac)||(0xfb50<=_gba &&_gba <=0xfdff)||(0xfe70<=_gba &&_gba <=0xfeff){_gd ="\u0041\u004c";};if _gd =="\u0052"||_gd =="\u0041\u004c"||_gd =="\u0041\u004e"{_cecd ++;};_gga [_fcd ]=_gd ;};if _cecd ==0{_ea =true ;
return _cf (string (_eg ),_ea ,false );};if _ebb ==-1{if float64 (_cecd )/float64 (_cfb )< 0.3&&_cfb > 4{_ea =true ;_ebb =0;}else {_ea =false ;_ebb =1;};};var _fddd []int ;for range _eg {_fddd =append (_fddd ,_ebb );};_ff :="\u004c";if _b (_ebb ){_ff ="\u0052";
};_cba :=_ff ;_aca :=_cba ;_bg :=_cba ;for _bc :=range _eg {if _gga [_bc ]=="\u004e\u0053\u004d"{_gga [_bc ]=_bg ;}else {_bg =_gga [_bc ];};};_bg =_cba ;var _fed string ;for _ee :=range _eg {_fed =_gga [_ee ];if _fed =="\u0045\u004e"{if _bg =="\u0041\u004c"{_gga [_ee ]="\u0041\u004e";
}else {_gga [_ee ]="\u0045\u004e";};}else if _fed =="\u0052"||_fed =="\u004c"||_fed =="\u0041\u004c"{_bg =_fed ;};};for _fb :=range _eg {_dce :=_gga [_fb ];if _dce =="\u0041\u004c"{_gga [_fb ]="\u0052";};};for _ffa :=1;_ffa < (len (_eg )-1);_ffa ++{if _gga [_ffa ]=="\u0045\u0053"&&_gga [_ffa -1]=="\u0045\u004e"&&_gga [_ffa +1]=="\u0045\u004e"{_gga [_ffa ]="\u0045\u004e";
};if _gga [_ffa ]=="\u0043\u0053"&&(_gga [_ffa -1]=="\u0045\u004e"||_gga [_ffa -1]=="\u0041\u004e")&&_gga [_ffa +1]==_gga [_ffa -1]{_gga [_ffa ]=_gga [_ffa -1];};};for _gbd :=range _eg {if _gga [_gbd ]=="\u0045\u004e"{for _bd :=_gbd -1;_bd >=0;_bd --{if _gga [_bd ]!="\u0045\u0054"{break ;
};_gga [_bd ]="\u0045\u004e";};for _fdg :=_gbd +1;_fdg < _cfb ;_fdg ++{if _gga [_fdg ]!="\u0045\u0054"{break ;};_gga [_fdg ]="\u0045\u004e";};};};for _dgf :=range _eg {_abg :=_gga [_dgf ];if _abg =="\u0057\u0053"||_abg =="\u0045\u0053"||_abg =="\u0045\u0054"||_abg =="\u0043\u0053"{_gga [_dgf ]="\u004f\u004e";
};};_bg ="\u0073\u006f\u0072";for _cff :=range _eg {_agd :=_gga [_cff ];if _agd =="\u0045\u004e"{if _bg =="\u004c"{_gga [_cff ]="\u004c";}else {_gga [_cff ]="\u0045\u004e";};}else if _agd =="\u0052"||_agd =="\u004c"{_bg =_agd ;};};for _dba :=0;_dba < len (_eg );
_dba ++{if _gga [_dba ]=="\u004f\u004e"{_eff :=_db (_gga ,_dba +1,"\u004f\u004e");_gbf :=_aca ;if _dba > 0{_gbf =_gga [_dba -1];};_ead :=_aca ;if _eff +1< _cfb {_ead =_gga [_eff +1];};if _gbf !="\u004c"{_gbf ="\u0052";};if _ead !="\u004c"{_ead ="\u0052";
};if _gbf ==_ead {_dg (_gga ,_dba ,_eff ,_gbf );};_dba =_eff -1;};};for _geb :=range _eg {if _gga [_geb ]=="\u004f\u004e"{_gga [_geb ]=_ff ;};};for _bgd :=range _eg {_cfe :=_gga [_bgd ];if _acd (_fddd [_bgd ]){if _cfe =="\u0052"{_fddd [_bgd ]++;}else if _cfe =="\u0041\u004e"||_cfe =="\u0045\u004e"{_fddd [_bgd ]+=2;
};}else if _cfe =="\u004c"||_cfe =="\u0041\u004e"||_cfe =="\u0045\u004e"{_fddd [_bgd ]++;};};_ba :=-1;_bec :=99;var _bga int ;for _gdc :=0;_gdc < len (_fddd );_gdc ++{_bga =_fddd [_gdc ];if _ba < _bga {_ba =_bga ;};if _bec > _bga &&_b (_bga ){_bec =_bga ;
};};for _agc :=_ba ;_agc >=_bec ;_agc --{_dga :=-1;for _cbg :=0;_cbg < len (_fddd );_cbg ++{if _fddd [_cbg ]< _agc {if _dga >=0{_cd (_fdd ,_dga ,_cbg );_dga =-1;};}else if _dga < 0{_dga =_cbg ;};};if _dga >=0{_cd (_fdd ,_dga ,len (_fddd ));};};for _eab :=0;
_eab < len (_fdd );_eab ++{_ceb :=_fdd [_eab ];if _ceb =="\u003c"||_ceb =="\u003e"{_fdd [_eab ]="";};};return _cf (_cg .Join (_fdd ,""),_ea ,false );};func (_bbbg paraList )sortTopoOrder (){_fedf :=_bbbg .topoOrder ();_bbbg .reorder (_fedf )};func (_ebba *imageExtractContext )extractFormImages (_cbb *_fe .PdfObjectName ,_cce _ec .GraphicsState ,_gge *_acf .PdfPageResources )error {_acdc ,_afg :=_gge .GetXObjectFormByName (*_cbb );
if _afg !=nil {return _afg ;};if _acdc ==nil {return nil ;};_adec ,_afg :=_acdc .GetContentStream ();if _afg !=nil {return _afg ;};_bced :=_acdc .Resources ;if _bced ==nil {_bced =_gge ;};_afg =_ebba .extractContentStreamImages (string (_adec ),_bced );
if _afg !=nil {return _afg ;};_ebba ._gfd ++;return nil ;};

// String returns a human readable description of `path`.
func (_ebbe *subpath )String ()string {_babc :=_ebbe ._adcb ;_cadd :=len (_babc );if _cadd <=5{return _gb .Sprintf ("\u0025d\u003a\u0020\u0025\u0036\u002e\u0032f",_cadd ,_babc );};return _gb .Sprintf ("\u0025d\u003a\u0020\u0025\u0036.\u0032\u0066\u0020\u0025\u0036.\u0032f\u0020.\u002e\u002e\u0020\u0025\u0036\u002e\u0032f",_cadd ,_babc [0],_babc [1],_babc [_cadd -1]);
};const _ccc =10;type rectRuling struct{_dffec rulingKind ;_ccfa markKind ;_fd .Color ;_acf .PdfRectangle ;};func _gaefg (_ecgdc _acf .PdfRectangle )*ruling {return &ruling {_becca :_ffgdf ,_eeac :_ecgdc .Llx ,_feded :_ecgdc .Lly ,_bbebb :_ecgdc .Ury };
};func (_cafb *textLine )endsInHyphen ()bool {_aabe :=_cafb ._cfec [len (_cafb ._cfec )-1];_ddfea :=_aabe ._cdffa ;_cgba ,_acfe :=_c .DecodeLastRuneInString (_ddfea );if _acfe <=0||!_ca .Is (_ca .Hyphen ,_cgba ){return false ;};if _aabe ._agdf &&_bada (_ddfea ){return true ;
};return _bada (_cafb .text ());};type textTable struct{_acf .PdfRectangle ;_bdea ,_acdga int ;_fgae bool ;_cdefa map[uint64 ]*textPara ;_dgbef map[uint64 ]compositeCell ;};func _bada (_bcc string )bool {if _c .RuneCountInString (_bcc )< _ccdaef {return false ;
};_cced ,_ffda :=_c .DecodeLastRuneInString (_bcc );if _ffda <=0||!_ca .Is (_ca .Hyphen ,_cced ){return false ;};_cced ,_ffda =_c .DecodeLastRuneInString (_bcc [:len (_bcc )-_ffda ]);return _ffda > 0&&!_ca .IsSpace (_cced );};func (_caaa *textObject )getFont (_dcea string )(*_acf .PdfFont ,error ){if _caaa ._ccgf ._cea !=nil {_bfbf ,_gage :=_caaa .getFontDict (_dcea );
if _gage !=nil {_a .Log .Debug ("\u0045\u0052\u0052OR\u003a\u0020\u0067\u0065\u0074\u0046\u006f\u006e\u0074:\u0020n\u0061m\u0065=\u0025\u0073\u002c\u0020\u0065\u0072\u0072\u006f\u0072\u003a\u0020\u0025\u0073",_dcea ,_gage .Error ());return nil ,_gage ;
};_caaa ._ccgf ._gda ++;_eafd ,_ffaaa :=_caaa ._ccgf ._cea [_bfbf .String ()];if _ffaaa {_eafd ._acegd =_caaa ._ccgf ._gda ;return _eafd ._cgeb ,nil ;};};_eage ,_ddda :=_caaa .getFontDict (_dcea );if _ddda !=nil {return nil ,_ddda ;};_bebc ,_ddda :=_caaa .getFontDirect (_dcea );
if _ddda !=nil {return nil ,_ddda ;};if _caaa ._ccgf ._cea !=nil {_ebfe :=fontEntry {_bebc ,_caaa ._ccgf ._gda };if len (_caaa ._ccgf ._cea )>=_ccc {var _ebfg []string ;for _effe :=range _caaa ._ccgf ._cea {_ebfg =append (_ebfg ,_effe );};_g .Slice (_ebfg ,func (_edaa ,_cafa int )bool {return _caaa ._ccgf ._cea [_ebfg [_edaa ]]._acegd < _caaa ._ccgf ._cea [_ebfg [_cafa ]]._acegd ;
});delete (_caaa ._ccgf ._cea ,_ebfg [0]);};_caaa ._ccgf ._cea [_eage .String ()]=_ebfe ;};return _bebc ,nil ;};

// Search searches the pages specified by `pages`.
func (_acc *Editor )Search (pattern string ,pages []int )(map[int ]Match ,error ){_bac ,_ ,_aaa :=_acc .getMatches (pattern ,pages );return _bac ,_aaa ;};func (_becad *wordBag )scanBand (_bceb string ,_dbeg *wordBag ,_fdggc func (_fded *wordBag ,_cafg *textWord )bool ,_agad ,_cccb ,_bgae float64 ,_adcd ,_caafd bool )int {_fbcc :=_dbeg ._aacag ;
var _gcfb map[int ]map[*textWord ]struct{};if !_adcd {_gcfb =_becad .makeRemovals ();};_deca :=_bgfe *_fbcc ;_gdbg :=0;for _ ,_agdbf :=range _becad .depthBand (_agad -_deca ,_cccb +_deca ){if len (_becad ._ceea [_agdbf ])==0{continue ;};for _ ,_geab :=range _becad ._ceea [_agdbf ]{if !(_agad -_deca <=_geab ._dbbagg &&_geab ._dbbagg <=_cccb +_deca ){continue ;
};if !_fdggc (_dbeg ,_geab ){continue ;};_dcfa :=2.0*_f .Abs (_geab ._facbbf -_dbeg ._aacag )/(_geab ._facbbf +_dbeg ._aacag );_afdf :=_f .Max (_geab ._facbbf /_dbeg ._aacag ,_dbeg ._aacag /_geab ._facbbf );_ccbc :=_f .Min (_dcfa ,_afdf );if _bgae > 0&&_ccbc > _bgae {continue ;
};if _dbeg .blocked (_geab ){continue ;};if !_adcd {_dbeg .pullWord (_geab ,_agdbf ,_gcfb );};_gdbg ++;if !_caafd {if _geab ._dbbagg < _agad {_agad =_geab ._dbbagg ;};if _geab ._dbbagg > _cccb {_cccb =_geab ._dbbagg ;};};if _adcd {break ;};};};if !_adcd {_becad .applyRemovals (_gcfb );
};return _gdbg ;};func (_dfdc paraList )yNeighbours (_bcgcae float64 )map[*textPara ][]int {_gfdac :=make ([]event ,2*len (_dfdc ));if _bcgcae ==0{for _gdcecc ,_ffgfc :=range _dfdc {_gfdac [2*_gdcecc ]=event {_ffgfc .Lly ,true ,_gdcecc };_gfdac [2*_gdcecc +1]=event {_ffgfc .Ury ,false ,_gdcecc };
};}else {for _fefg ,_cfac :=range _dfdc {_gfdac [2*_fefg ]=event {_cfac .Lly -_bcgcae *_cfac .fontsize (),true ,_fefg };_gfdac [2*_fefg +1]=event {_cfac .Ury +_bcgcae *_cfac .fontsize (),false ,_fefg };};};return _dfdc .eventNeighbours (_gfdac );};var _eabb =TextMark {Text :"\u005b\u0058\u005d",Original :"\u0020",Meta :true ,FillColor :_fd .White ,StrokeColor :_fd .White };
func _eafff (_fgge _acf .PdfRectangle )*ruling {return &ruling {_becca :_bgbc ,_eeac :_fgge .Lly ,_feded :_fgge .Llx ,_bbebb :_fgge .Urx };};func (_gffb *shapesState )closePath (){if _gffb ._dec {_gffb ._feae =append (_gffb ._feae ,_ffgd (_gffb ._fgba ));
_gffb ._dec =false ;}else if len (_gffb ._feae )==0{if _bdbeg {_a .Log .Debug ("\u0063\u006c\u006f\u0073eP\u0061\u0074\u0068\u0020\u0077\u0069\u0074\u0068\u0020\u006e\u006f\u0020\u0070\u0061t\u0068");};_gffb ._dec =false ;return ;};_gffb ._feae [len (_gffb ._feae )-1].close ();
if _bdbeg {_a .Log .Info ("\u0063\u006c\u006f\u0073\u0065\u0050\u0061\u0074\u0068\u003a\u0020\u0025\u0073",_gffb );};};const (_dfda ="\u0045\u0052R\u004f\u0052\u003a\u0020\u0043\u0061\u006e\u0027\u0074\u0020\u0063\u006f\u006e\u0076\u0065\u0072\u0074\u0020\u0066\u006f\u006e\u0074\u0020\u006f\u0062\u006a\u0065\u0063\u0074\u002c\u0020\u0069\u006e\u0076\u0061\u006c\u0069\u0064\u0020\u0074\u0079\u0070\u0065";
_egf ="\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0043a\u006e\u0027\u0074 g\u0065\u0074\u0020\u0066\u006f\u006et\u0020\u0070\u0072\u006f\u0070\u0065\u0072\u0074\u0069\u0065\u0073\u002c\u0020\u0066\u006fn\u0074\u0020\u006e\u006f\u0074\u0020\u0066\u006fu\u006e\u0064";
_aac ="\u0045\u0052\u0052O\u0052\u003a\u0020\u0043\u0061\u006e\u0027\u0074\u0020\u0067\u0065\u0074\u0020\u0066\u006f\u006e\u0074\u0020\u0073\u0074\u0072\u0065\u0061\u006d\u002c\u0020\u0069\u006e\u0076a\u006c\u0069\u0064\u0020\u0074\u0079\u0070\u0065";_af ="E\u0052R\u004f\u0052\u003a\u0020\u004e\u006f\u0020\u0066o\u006e\u0074\u0020\u0066ou\u006e\u0064";
);func _fabe (_bbaee []*textMark ,_faaac _acf .PdfRectangle )*textWord {_fdff :=_bbaee [0].PdfRectangle ;_facga :=_bbaee [0]._gfgd ;for _ ,_ffbgg :=range _bbaee [1:]{_fdff =_fccd (_fdff ,_ffbgg .PdfRectangle );if _ffbgg ._gfgd > _facga {_facga =_ffbgg ._gfgd ;
};};return &textWord {PdfRectangle :_fdff ,_eaee :_bbaee ,_dbbagg :_faaac .Ury -_fdff .Lly ,_facbbf :_facga };};func (_edeb *textTable )logComposite (_cagc string ){if !_ccdc {return ;};_a .Log .Info ("\u007e~\u007eP\u0061\u0072\u0061\u0020\u0025d\u0020\u0078 \u0025\u0064\u0020\u0025\u0073",_edeb ._bdea ,_edeb ._acdga ,_cagc );
_gb .Printf ("\u0025\u0035\u0073 \u007c","");for _egedb :=0;_egedb < _edeb ._bdea ;_egedb ++{_gb .Printf ("\u0025\u0033\u0064 \u007c",_egedb );};_gb .Println ("");_gb .Printf ("\u0025\u0035\u0073 \u002b","");for _cgdfb :=0;_cgdfb < _edeb ._bdea ;_cgdfb ++{_gb .Printf ("\u0025\u0033\u0073 \u002b","\u002d\u002d\u002d");
};_gb .Println ("");for _cbac :=0;_cbac < _edeb ._acdga ;_cbac ++{_gb .Printf ("\u0025\u0035\u0064 \u007c",_cbac );for _fbfd :=0;_fbfd < _edeb ._bdea ;_fbfd ++{_debec ,_ :=_edeb ._dgbef [_egeeg (_fbfd ,_cbac )].parasBBox ();_gb .Printf ("\u0025\u0033\u0064 \u007c",len (_debec ));
};_gb .Println ("");};_a .Log .Info ("\u007e~\u007eT\u0065\u0078\u0074\u0020\u0025d\u0020\u0078 \u0025\u0064\u0020\u0025\u0073",_edeb ._bdea ,_edeb ._acdga ,_cagc );_gb .Printf ("\u0025\u0035\u0073 \u007c","");for _gcccbc :=0;_gcccbc < _edeb ._bdea ;_gcccbc ++{_gb .Printf ("\u0025\u0031\u0032\u0064\u0020\u007c",_gcccbc );
};_gb .Println ("");_gb .Printf ("\u0025\u0035\u0073 \u002b","");for _gbcg :=0;_gbcg < _edeb ._bdea ;_gbcg ++{_gb .Print ("\u002d\u002d\u002d\u002d\u002d\u002d\u002d\u002d\u002d-\u002d\u002d\u002d\u002b");};_gb .Println ("");for _abebgf :=0;_abebgf < _edeb ._acdga ;
_abebgf ++{_gb .Printf ("\u0025\u0035\u0064 \u007c",_abebgf );for _gadba :=0;_gadba < _edeb ._bdea ;_gadba ++{_gbdd ,_ :=_edeb ._dgbef [_egeeg (_gadba ,_abebgf )].parasBBox ();_bbgfg :="";_cgbac :=_gbdd .merge ();if _cgbac !=nil {_bbgfg =_cgbac .text ();
};_bbgfg =_gb .Sprintf ("\u0025\u0071",_gbcgb (_bbgfg ,12));_bbgfg =_bbgfg [1:len (_bbgfg )-1];_gb .Printf ("\u0025\u0031\u0032\u0073\u0020\u007c",_bbgfg );};_gb .Println ("");};};

// TextMarkArray is a collection of TextMarks.
type TextMarkArray struct{_bcea []TextMark };func _efcd (_gebga []*textLine ,_bbcba map[float64 ][]*textLine ,_dadaa []float64 ,_caegda int ,_bcebe ,_bfdb float64 )[]*list {_dfca :=[]*list {};_ddbe :=_caegda ;_caegda =_caegda +1;_fgef :=_dadaa [_ddbe ];
_dega :=_bbcba [_fgef ];_gffe :=_eaag (_dega ,_bfdb ,_bcebe );for _aede ,_ecce :=range _gffe {var _cebe float64 ;_dgga :=[]*list {};_cfeefe :=_ecce ._dgda ;_adga :=_bfdb ;if _aede < len (_gffe )-1{_adga =_gffe [_aede +1]._dgda ;};if _caegda < len (_dadaa ){_dgga =_efcd (_gebga ,_bbcba ,_dadaa ,_caegda ,_cfeefe ,_adga );
};_cebe =_adga ;if len (_dgga )> 0{_acaf :=_dgga [0];if len (_acaf ._bccf )> 0{_cebe =_acaf ._bccf [0]._dgda ;};};_cdege :=[]*textLine {_ecce };_gdgc :=_cdda (_ecce ,_gebga ,_cfeefe ,_cebe );_cdege =append (_cdege ,_gdgc ...);_beed :=_eafb (_cdege ,"\u0062\u0075\u006c\u006c\u0065\u0074",_dgga );
_beed ._abbb =_gcde (_cdege ,"");_dfca =append (_dfca ,_beed );};return _dfca ;};

// PageFonts represents extracted fonts on a PDF page.
type PageFonts struct{Fonts []Font ;};func _cdggf (_cgddb []*textLine ){_g .Slice (_cgddb ,func (_cfaeg ,_ggdde int )bool {_gcccb ,_ccggb :=_cgddb [_cfaeg ],_cgddb [_ggdde ];return _gcccb ._dgda < _ccggb ._dgda ;});};func (_caabf *ruling )alignsSec (_faaag *ruling )bool {const _dadfg =_cadg +1.0;
return _caabf ._feded -_dadfg <=_faaag ._bbebb &&_faaag ._feded -_dadfg <=_caabf ._bbebb ;};

// String returns a description of `state`.
func (_bfed *textState )String ()string {_eced :="\u005bN\u004f\u0054\u0020\u0053\u0045\u0054]";if _bfed ._cdfg !=nil {_eced =_bfed ._cdfg .BaseFont ();};return _gb .Sprintf ("\u0074\u0063\u003d\u0025\u002e\u0032\u0066\u0020\u0074\u0077\u003d\u0025\u002e\u0032\u0066 \u0074f\u0073\u003d\u0025\u002e\u0032\u0066\u0020\u0066\u006f\u006e\u0074\u003d\u0025\u0071",_bfed ._edg ,_bfed ._abc ,_bfed ._cfad ,_eced );
};

// TableCell is a cell in a TextTable.
type TableCell struct{_acf .PdfRectangle ;

// Text is the extracted text.
Text string ;

// Marks returns the TextMarks corresponding to the text in Text.
Marks TextMarkArray ;};func (_daeg *wordBag )empty (_bcdb int )bool {_ ,_acbg :=_daeg ._ceea [_bcdb ];return !_acbg };var _gee =[]string {"\u0041\u004e","\u0041\u004e","\u0041\u004e","\u0041\u004e","\u0041\u004e","\u0041\u004e","\u004f\u004e","\u004f\u004e","\u0041\u004c","\u0045\u0054","\u0045\u0054","\u0041\u004c","\u0043\u0053","\u0041\u004c","\u004f\u004e","\u004f\u004e","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u0041\u004c","\u0041\u004c","","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u0041\u004e","\u0041\u004e","\u0041\u004e","\u0041\u004e","\u0041\u004e","\u0041\u004e","\u0041\u004e","\u0041\u004e","\u0041\u004e","\u0041\u004e","\u0045\u0054","\u0041\u004e","\u0041\u004e","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u004e\u0053\u004d","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u0041\u004e","\u004f\u004e","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u0041\u004c","\u0041\u004c","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004f\u004e","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u0041\u004c","\u0041\u004c","\u0045\u004e","\u0045\u004e","\u0045\u004e","\u0045\u004e","\u0045\u004e","\u0045\u004e","\u0045\u004e","\u0045\u004e","\u0045\u004e","\u0045\u004e","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c"};
func (_gcaa *wordBag )depthRange (_fcce ,_dgfc int )[]int {var _edcg []int ;for _fbfg :=range _gcaa ._ceea {if _fcce <=_fbfg &&_fbfg <=_dgfc {_edcg =append (_edcg ,_fbfg );};};if len (_edcg )==0{return nil ;};_g .Ints (_edcg );return _edcg ;};type intSet map[int ]struct{};
func _eafb (_bacfe []*textLine ,_fdbd string ,_ffdg []*list )*list {return &list {_bccf :_bacfe ,_dbfbg :_fdbd ,_feddf :_ffdg };};func (_cdbf *shapesState )newSubPath (){_cdbf .clearPath ();if _bdbeg {_a .Log .Info ("\u006e\u0065\u0077\u0053\u0075\u0062\u0050\u0061\u0074h\u003a\u0020\u0025\u0073",_cdbf );
};};func _aged (_gcfa bounded )float64 {return -_gcfa .bbox ().Lly };func (_dcfg *textObject )getFontDict (_abbg string )(_cdae _fe .PdfObject ,_gaeca error ){_dcbg :=_dcfg ._accb ;if _dcbg ==nil {_a .Log .Debug ("g\u0065\u0074\u0046\u006f\u006e\u0074D\u0069\u0063\u0074\u002e\u0020\u004eo\u0020\u0072\u0065\u0073\u006f\u0075\u0072c\u0065\u0073\u002e\u0020\u006e\u0061\u006d\u0065\u003d\u0025#\u0071",_abbg );
return nil ,nil ;};_cdae ,_fbae :=_dcbg .GetFontByName (_fe .PdfObjectName (_abbg ));if !_fbae {_a .Log .Debug ("\u0045R\u0052\u004fR\u003a\u0020\u0067\u0065t\u0046\u006f\u006et\u0044\u0069\u0063\u0074\u003a\u0020\u0046\u006f\u006et \u006e\u006f\u0074 \u0066\u006fu\u006e\u0064\u003a\u0020\u006e\u0061m\u0065\u003d%\u0023\u0071",_abbg );
return nil ,_agb .New ("f\u006f\u006e\u0074\u0020no\u0074 \u0069\u006e\u0020\u0072\u0065s\u006f\u0075\u0072\u0063\u0065\u0073");};return _cdae ,nil ;};func _geaed (_efgc float64 )bool {return _f .Abs (_efgc )< _cadg };func (_gegd *textObject )getStrokeColor ()_fd .Color {return _acda (_gegd ._dbc .ColorspaceStroking ,_gegd ._dbc .ColorStroking );
};func _deaf (_cbfc float64 )int {var _gegc int ;if _cbfc >=0{_gegc =int (_cbfc /_fbfbb );}else {_gegc =int (_cbfc /_fbfbb )-1;};return _gegc ;};

// ApplyArea processes the page text only within the specified area `bbox`.
// Each time ApplyArea is called, it updates the result set in `pt`.
// Can be called multiple times in a row with different bounding boxes.
func (_dgb *PageText )ApplyArea (bbox _acf .PdfRectangle ){_ddcd :=make ([]*textMark ,0,len (_dgb ._effb ));for _ ,_gdfa :=range _dgb ._effb {if _faab (_gdfa .bbox (),bbox ){_ddcd =append (_ddcd ,_gdfa );};};var _gfcb paraList ;_fdcb :="";_bge :=len (_ddcd );
for _degfd :=0;_degfd < 360&&_bge > 0;_degfd +=90{_dafa :=make ([]*textMark ,0,len (_ddcd )-_bge );for _ ,_fbfb :=range _ddcd {if _fbfb ._dgff ==_degfd {_dafa =append (_dafa ,_fbfb );};};if len (_dafa )> 0{if _dgb ._dfdb ._eabg ==ExtractionModePlain {_fdcb +=_eggb (_dafa ,_dgb ._ddfe );
}else {_daed :=_baeb (_dafa ,_dgb ._ddfe ,nil ,nil ,_dgb ._dfdb ._eabg ==ExtractionModeLayoutNoBreaks );_gfcb =append (_gfcb ,_daed ...);};_bge -=len (_dafa );};};if _dgb ._dfdb ._eabg ==ExtractionModePlain {_dgb ._dfge =_fdcb ;}else {_fbbff :=new (_ga .Buffer );
_gfcb .writeText (_fbbff );_dgb ._dfge =_fbbff .String ();_dgb ._bece =_gfcb .toTextMarks ();_dgb ._eddg =_gfcb .tables ();};};func (_gdd *imageExtractContext )extractXObjectImage (_bgdf *_fe .PdfObjectName ,_gffd _ec .GraphicsState ,_caab *_acf .PdfPageResources )error {_gad ,_ :=_caab .GetXObjectByName (*_bgdf );
if _gad ==nil {return nil ;};_bdc ,_fbe :=_gdd ._afc [_gad ];if !_fbe {_ade ,_fcdf :=_caab .GetXObjectImageByName (*_bgdf );if _fcdf !=nil {return _fcdf ;};if _ade ==nil {return nil ;};_cfc ,_fcdf :=_ade .ToImage ();if _fcdf !=nil {return _fcdf ;};var _bgf _ce .Image ;
if _ade .Mask !=nil {if _bgf ,_fcdf =_abfff (_ade .Mask ,_fd .Opaque );_fcdf !=nil {_a .Log .Debug ("\u0057\u0041\u0052\u004e\u003a \u0063\u006f\u0075\u006c\u0064 \u006eo\u0074\u0020\u0067\u0065\u0074\u0020\u0065\u0078\u0070\u006c\u0069\u0063\u0069\u0074\u0020\u0069\u006d\u0061\u0067e\u0020\u006d\u0061\u0073\u006b\u002e\u0020\u004f\u0075\u0074\u0070\u0075\u0074\u0020\u006d\u0061\u0079\u0020\u0062\u0065\u0020\u0069\u006e\u0063o\u0072\u0072\u0065\u0063\u0074\u002e");
};}else if _ade .SMask !=nil {_bgf ,_fcdf =_eaaca (_ade .SMask ,_fd .Opaque );if _fcdf !=nil {_a .Log .Debug ("W\u0041\u0052\u004e\u003a\u0020\u0063\u006f\u0075\u006c\u0064\u0020\u006e\u006f\u0074\u0020\u0067\u0065\u0074\u0020\u0073\u006f\u0066\u0074\u0020\u0069\u006da\u0067e\u0020\u006d\u0061\u0073k\u002e\u0020O\u0075\u0074\u0070\u0075\u0074\u0020\u006d\u0061\u0079\u0020\u0062\u0065\u0020\u0069\u006e\u0063\u006f\u0072\u0072\u0065\u0063\u0074\u002e");
};};if _bgf !=nil {_gdff ,_bcd :=_cfc .ToGoImage ();if _bcd !=nil {return _bcd ;};_gdff =_bcdg (_gdff ,_bgf );switch _ade .ColorSpace .String (){case "\u0044\u0065\u0076\u0069\u0063\u0065\u0047\u0072\u0061\u0079","\u0049n\u0064\u0065\u0078\u0065\u0064":_cfc ,_bcd =_acf .ImageHandling .NewGrayImageFromGoImage (_gdff );
if _bcd !=nil {return _bcd ;};default:_cfc ,_bcd =_acf .ImageHandling .NewImageFromGoImage (_gdff );if _bcd !=nil {return _bcd ;};};};_bdc =&cachedImage {_cgb :_cfc ,_aefg :_ade .ColorSpace };_gdd ._afc [_gad ]=_bdc ;};_agcf :=_bdc ._cgb ;_cdb :=_bdc ._aefg ;
_eec ,_efc :=_cdb .ImageToRGB (*_agcf );if _efc !=nil {return _efc ;};_a .Log .Debug ("@\u0044\u006f\u0020\u0043\u0054\u004d\u003a\u0020\u0025\u0073",_gffd .CTM .String ());_dcb :=ImageMark {Image :&_eec ,Width :_gffd .CTM .ScalingFactorX (),Height :_gffd .CTM .ScalingFactorY (),Angle :_gffd .CTM .Angle ()};
_dcb .X ,_dcb .Y =_gffd .CTM .Translation ();_gdd ._aef =append (_gdd ._aef ,_dcb );_gdd ._abf ++;return nil ;};func (_edfce rulingList )sortStrict (){_g .Slice (_edfce ,func (_feea ,_bfafe int )bool {_cadga ,_fbgf :=_edfce [_feea ],_edfce [_bfafe ];_cdgc ,_gcdcb :=_cadga ._becca ,_fbgf ._becca ;
if _cdgc !=_gcdcb {return _cdgc > _gcdcb ;};_baee ,_egae :=_cadga ._eeac ,_fbgf ._eeac ;if !_edfea (_baee -_egae ){return _baee < _egae ;};_baee ,_egae =_cadga ._feded ,_fbgf ._feded ;if _baee !=_egae {return _baee < _egae ;};return _cadga ._bbebb < _fbgf ._bbebb ;
});};func (_cgaec *textTable )reduce ()*textTable {_fgfag :=make ([]int ,0,_cgaec ._acdga );_dbec :=make ([]int ,0,_cgaec ._bdea );for _eaebg :=0;_eaebg < _cgaec ._acdga ;_eaebg ++{if !_cgaec .emptyCompositeRow (_eaebg ){_fgfag =append (_fgfag ,_eaebg );
};};for _eacb :=0;_eacb < _cgaec ._bdea ;_eacb ++{if !_cgaec .emptyCompositeColumn (_eacb ){_dbec =append (_dbec ,_eacb );};};if len (_fgfag )==_cgaec ._acdga &&len (_dbec )==_cgaec ._bdea {return _cgaec ;};_feecc :=textTable {_fgae :_cgaec ._fgae ,_bdea :len (_dbec ),_acdga :len (_fgfag ),_cdefa :make (map[uint64 ]*textPara ,len (_dbec )*len (_fgfag ))};
if _ccdc {_a .Log .Info ("\u0072\u0065\u0064\u0075ce\u003a\u0020\u0025\u0064\u0078\u0025\u0064\u0020\u002d\u003e\u0020\u0025\u0064\u0078%\u0064",_cgaec ._bdea ,_cgaec ._acdga ,len (_dbec ),len (_fgfag ));_a .Log .Info ("\u0072\u0065d\u0075\u0063\u0065d\u0043\u006f\u006c\u0073\u003a\u0020\u0025\u002b\u0076",_dbec );
_a .Log .Info ("\u0072\u0065d\u0075\u0063\u0065d\u0052\u006f\u0077\u0073\u003a\u0020\u0025\u002b\u0076",_fgfag );};for _gdece ,_beedf :=range _fgfag {for _adccc ,_gfbc :=range _dbec {_ecda ,_fccbf :=_cgaec .getComposite (_gfbc ,_beedf );if _ecda ==nil {continue ;
};if _ccdc {_gb .Printf ("\u0020 \u0025\u0032\u0064\u002c \u0025\u0032\u0064\u0020\u0028%\u0032d\u002c \u0025\u0032\u0064\u0029\u0020\u0025\u0071\n",_adccc ,_gdece ,_gfbc ,_beedf ,_gbcgb (_ecda .merge ().text (),50));};_feecc .putComposite (_adccc ,_gdece ,_ecda ,_fccbf );
};};return &_feecc ;};func (_caad *shapesState )devicePoint (_dcaea ,_fade float64 )_aeg .Point {_adee :=_caad ._fbg .Mult (_caad ._fabc );_dcaea ,_fade =_adee .Transform (_dcaea ,_fade );return _aeg .NewPoint (_dcaea ,_fade );};

// PageText represents the layout of text on a device page.
type PageText struct{_effb []*textMark ;_dfge string ;_bece []TextMark ;_eddg []TextTable ;_ddfe _acf .PdfRectangle ;_fege []pathSection ;_gaaab []pathSection ;_gddgb *_acf .StructTreeRoot ;_daea _fe .PdfObject ;_gbad *_ec .ContentStreamOperations ;_dfdb PageTextOptions ;
};type wordBag struct{_acf .PdfRectangle ;_aacag float64 ;_geccb ,_afee rulingList ;_gefb float64 ;_ceea map[int ][]*textWord ;};func _bbgeg (_dege map[float64 ][]*textLine )[]float64 {_egcag :=[]float64 {};for _fbbb :=range _dege {_egcag =append (_egcag ,_fbbb );
};_g .Float64s (_egcag );return _egcag ;};func (_bcaa rulingList )augmentGrid ()(rulingList ,rulingList ){_ebeec ,_efebd :=_bcaa .vertsHorzs ();if len (_ebeec )==0||len (_efebd )==0{return _ebeec ,_efebd ;};_gfecd ,_cccd :=_ebeec ,_efebd ;_dgdf :=_ebeec .bbox ();
_edgg :=_efebd .bbox ();if _eagg {_a .Log .Info ("\u0061u\u0067\u006d\u0065\u006e\u0074\u0047\u0072\u0069\u0064\u003a\u0020b\u0062\u006f\u0078\u0056\u003d\u0025\u0036\u002e\u0032\u0066",_dgdf );_a .Log .Info ("\u0061u\u0067\u006d\u0065\u006e\u0074\u0047\u0072\u0069\u0064\u003a\u0020b\u0062\u006f\u0078\u0048\u003d\u0025\u0036\u002e\u0032\u0066",_edgg );
};var _baedfa ,_dede ,_efdd ,_fbeag *ruling ;if _edgg .Llx < _dgdf .Llx -_bgffd {_baedfa =&ruling {_fgaa :_ebdd ,_becca :_ffgdf ,_eeac :_edgg .Llx ,_feded :_dgdf .Lly ,_bbebb :_dgdf .Ury };_ebeec =append (rulingList {_baedfa },_ebeec ...);};if _edgg .Urx > _dgdf .Urx +_bgffd {_dede =&ruling {_fgaa :_ebdd ,_becca :_ffgdf ,_eeac :_edgg .Urx ,_feded :_dgdf .Lly ,_bbebb :_dgdf .Ury };
_ebeec =append (_ebeec ,_dede );};if _dgdf .Lly < _edgg .Lly -_bgffd {_efdd =&ruling {_fgaa :_ebdd ,_becca :_bgbc ,_eeac :_dgdf .Lly ,_feded :_edgg .Llx ,_bbebb :_edgg .Urx };_efebd =append (rulingList {_efdd },_efebd ...);};if _dgdf .Ury > _edgg .Ury +_bgffd {_fbeag =&ruling {_fgaa :_ebdd ,_becca :_bgbc ,_eeac :_dgdf .Ury ,_feded :_edgg .Llx ,_bbebb :_edgg .Urx };
_efebd =append (_efebd ,_fbeag );};if len (_ebeec )+len (_efebd )==len (_bcaa ){return _gfecd ,_cccd ;};_eada :=append (_ebeec ,_efebd ...);_bcaa .log ("u\u006e\u0061\u0075\u0067\u006d\u0065\u006e\u0074\u0065\u0064");_eada .log ("\u0061u\u0067\u006d\u0065\u006e\u0074\u0065d");
return _ebeec ,_efebd ;};func _fgded (_adgb ,_ffde bounded )float64 {_cedg :=_dfffg (_adgb ,_ffde );if !_edfea (_cedg ){return _cedg ;};return _acdg (_adgb ,_ffde );};

// String returns a description of `l`.
func (_egcbd *textLine )String ()string {return _gb .Sprintf ("\u0025\u002e2\u0066\u0020\u0025\u0036\u002e\u0032\u0066\u0020\u0066\u006f\u006e\u0074\u0073\u0069\u007a\u0065\u003d\u0025\u002e\u0032\u0066\u0020\"%\u0073\u0022",_egcbd ._dgda ,_egcbd .PdfRectangle ,_egcbd ._aebd ,_egcbd .text ());
};func (_ebgc *subpath )clear (){*_ebgc =subpath {}};var _bebda =map[markKind ]string {_gdga :"\u0073\u0074\u0072\u006f\u006b\u0065",_ccgee :"\u0066\u0069\u006c\u006c",_ebdd :"\u0061u\u0067\u006d\u0065\u006e\u0074"};

// Font represents the font properties on a PDF page.
type Font struct{PdfFont *_acf .PdfFont ;

// FontName represents Font Name from font properties.
FontName string ;

// FontType represents Font Subtype entry in the font dictionary inside page resources.
// Examples : type0, Type1, MMType1, Type3, TrueType, CIDFont.
FontType string ;

// ToUnicode is true if font provides a `ToUnicode` mapping.
ToUnicode bool ;

// IsCID is true if underlying font is a composite font.
// Composite font is represented by a font dictionary whose Subtype is `Type0`
IsCID bool ;

// IsSimple is true if font is simple font.
// A simple font is limited to only 8 bit (255) character codes.
IsSimple bool ;

// FontData represents the raw data of the embedded font file.
// It can have format TrueType (TTF), PostScript Font (PFB) or Compact Font Format (CCF).
// FontData value can be indicates from `FontFile`, `FontFile2` or `FontFile3` inside Font Descriptor.
// At most, only one of `FontFile`, `FontFile2` or `FontFile3` will be FontData value.
FontData []byte ;

// FontFileName is a name representing the font. it has format:
// (Font Name) + (Font Type Extension), example: helvetica.ttf.
FontFileName string ;

// FontDescriptor represents metrics and other attributes inside font properties from PDF Structure (Font Descriptor).
FontDescriptor *_acf .PdfFontDescriptor ;};func _ffag (_egcf map[float64 ]map[float64 ]gridTile )[]float64 {_bdgdc :=make ([]float64 ,0,len (_egcf ));for _cedcf :=range _egcf {_bdgdc =append (_bdgdc ,_cedcf );};_g .Float64s (_bdgdc );_ebcbe :=len (_bdgdc );
for _efccf :=0;_efccf < _ebcbe /2;_efccf ++{_bdgdc [_efccf ],_bdgdc [_ebcbe -1-_efccf ]=_bdgdc [_ebcbe -1-_efccf ],_bdgdc [_efccf ];};return _bdgdc ;};func (_fcbec *textMark )inDiacriticArea (_gcffe *textMark )bool {_gcggc :=_fcbec .Llx -_gcffe .Llx ;_gefe :=_fcbec .Urx -_gcffe .Urx ;
_fbce :=_fcbec .Lly -_gcffe .Lly ;return _f .Abs (_gcggc +_gefe )< _fcbec .Width ()*_dada &&_f .Abs (_fbce )< _fcbec .Height ()*_dada ;};func _gbccb (_eacaaf []_fe .PdfObject )(_dafgb ,_gabgea float64 ,_dcff error ){if len (_eacaaf )!=2{return 0,0,_gb .Errorf ("\u0069\u006e\u0076\u0061l\u0069\u0064\u0020\u006e\u0075\u006d\u0062\u0065\u0072\u0020o\u0066 \u0070\u0061\u0072\u0061\u006d\u0073\u003a \u0025\u0064",len (_eacaaf ));
};_ceebb ,_dcff :=_fe .GetNumbersAsFloat (_eacaaf );if _dcff !=nil {return 0,0,_dcff ;};return _ceebb [0],_ceebb [1],nil ;};func (_fgda *ruling )intersects (_bccb *ruling )bool {_eeafe :=(_fgda ._becca ==_ffgdf &&_bccb ._becca ==_bgbc )||(_bccb ._becca ==_ffgdf &&_fgda ._becca ==_bgbc );
_geae :=func (_babe ,_gbcc *ruling )bool {return _babe ._feded -_bgffd <=_gbcc ._eeac &&_gbcc ._eeac <=_babe ._bbebb +_bgffd ;};_ebfaa :=_geae (_fgda ,_bccb );_fcgc :=_geae (_bccb ,_fgda );if _eagg {_gb .Printf ("\u0020\u0020\u0020\u0020\u0069\u006e\u0074\u0065\u0072\u0073\u0065\u0063\u0074\u0073\u003a\u0020\u0020\u006fr\u0074\u0068\u006f\u0067\u006f\u006e\u0061l\u003d\u0025\u0074\u0020\u006f\u0031\u003d\u0025\u0074\u0020\u006f2\u003d\u0025\u0074\u0020\u2192\u0020\u0025\u0074\u000a"+"\u0020\u0020\u0020 \u0020\u0020\u0020\u0076\u003d\u0025\u0073\u000a"+" \u0020\u0020\u0020\u0020\u0020\u0077\u003d\u0025\u0073\u000a",_eeafe ,_ebfaa ,_fcgc ,_eeafe &&_ebfaa &&_fcgc ,_fgda ,_bccb );
};return _eeafe &&_ebfaa &&_fcgc ;};func _faaff (_cddaf map[int ]intSet )[]int {_acedae :=make ([]int ,0,len (_cddaf ));for _eagdg :=range _cddaf {_acedae =append (_acedae ,_eagdg );};_g .Ints (_acedae );return _acedae ;};func _dcacd (_efcf *list )[]*textLine {for _ ,_edbf :=range _efcf ._feddf {switch _edbf ._dbfbg {case "\u004c\u0042\u006fd\u0079":if len (_edbf ._bccf )!=0{return _edbf ._bccf ;
};return _dcacd (_edbf );case "\u0053\u0070\u0061\u006e":return _edbf ._bccf ;case "I\u006e\u006c\u0069\u006e\u0065\u0053\u0068\u0061\u0070\u0065":return _edbf ._bccf ;};};return nil ;};func _bdec (_efefag *PageText )error {_egcba :=_ae .GetLicenseKey ();
if _egcba !=nil &&_egcba .IsLicensed ()||_ecb {return nil ;};_gb .Printf ("\u0055\u006e\u006c\u0069\u0063\u0065\u006e\u0073\u0065\u0064\u0020c\u006f\u0070\u0079\u0020\u006f\u0066\u0020\u0055\u006e\u0069P\u0044\u0046\u000a");_gb .Println ("-\u0020\u0047\u0065\u0074\u0020\u0061\u0020\u0066\u0072e\u0065\u0020\u0074\u0072\u0069\u0061\u006c l\u0069\u0063\u0065\u006es\u0065\u0020\u006f\u006e\u0020\u0068\u0074\u0074\u0070s:\u002f\u002fu\u006e\u0069\u0064\u006f\u0063\u002e\u0069\u006f");
return _agb .New ("\u0075\u006e\u0069\u0070d\u0066\u0020\u006c\u0069\u0063\u0065\u006e\u0073\u0065\u0020c\u006fd\u0065\u0020\u0072\u0065\u0071\u0075\u0069r\u0065\u0064");};func (_ggdg *TextMarkArray )exists (_caag TextMark )bool {for _ ,_egfd :=range _ggdg .Elements (){if _eb .DeepEqual (_caag .DirectObject ,_egfd .DirectObject )&&_eb .DeepEqual (_caag .BBox ,_egfd .BBox )&&_egfd .Text ==_caag .Text {return true ;
};};return false ;};func (_effec *wordBag )allWords ()[]*textWord {var _bdb []*textWord ;for _ ,_bdbe :=range _effec ._ceea {_bdb =append (_bdb ,_bdbe ...);};return _bdb ;};func (_bbagg *textPara )toTextMarks (_cbec *int )[]TextMark {if _bbagg ._bcff ==nil {return _bbagg .toCellTextMarks (_cbec );
};var _cgfbf []TextMark ;for _ceda :=0;_ceda < _bbagg ._bcff ._acdga ;_ceda ++{for _bggbf :=0;_bggbf < _bbagg ._bcff ._bdea ;_bggbf ++{_gdbea :=_bbagg ._bcff .get (_bggbf ,_ceda );if _gdbea ==nil {_cgfbf =_caacf (_cgfbf ,_cbec ,"\u0009");}else {_ebfcf :=_gdbea .toCellTextMarks (_cbec );
_cgfbf =append (_cgfbf ,_ebfcf ...);};_cgfbf =_caacf (_cgfbf ,_cbec ,"\u0020");};if _ceda < _bbagg ._bcff ._acdga -1{_cgfbf =_caacf (_cgfbf ,_cbec ,"\u000a");};};_cege :=_bbagg ._bcff ;if _cege .isExportable (){_aecg :=_cege .toTextTable ();_cgfbf =_gbge (_cgfbf ,&_aecg );
};return _cgfbf ;};func (_agdg *textObject )setHorizScaling (_beca float64 ){if _agdg ==nil {return ;};_agdg ._eea ._dgad =_beca ;};func (_cgge *textObject )renderText (_faad _fe .PdfObject ,_dged []byte ,_agac int ,_dceb string )error {if _cgge ._fdabb {_a .Log .Debug ("\u0072\u0065\u006e\u0064\u0065r\u0054\u0065\u0078\u0074\u003a\u0020\u0049\u006e\u0076\u0061\u006c\u0069\u0064 \u0066\u006f\u006e\u0074\u002e\u0020\u004e\u006f\u0074\u0020\u0070\u0072\u006f\u0063\u0065\u0073\u0073\u0069\u006e\u0067\u002e");
return nil ;};_fdgg :=_cgge .getCurrentFont ();_fgcd :=_fdgg .BytesToCharcodes (_dged );var (_ggad []string ;_fdca int ;_dacc int ;);if _dceb !=""{_ggad =[]string {_fe .MakeString (_dceb ).Decoded ()};_fdca =1;}else {_ggad ,_fdca ,_dacc =_fdgg .CharcodesToStrings (_fgcd ,"");
if _dacc > 0{_a .Log .Debug ("\u0072\u0065nd\u0065\u0072\u0054e\u0078\u0074\u003a\u0020num\u0043ha\u0072\u0073\u003d\u0025\u0064\u0020\u006eum\u004d\u0069\u0073\u0073\u0065\u0073\u003d%\u0064",_fdca ,_dacc );};};_cgge ._eea ._abga +=_fdca ;_cgge ._eea ._ceaa +=_dacc ;
_cbgf :=_cgge ._eea ;_dfc :=_cbgf ._cfad ;_ffdd :=_cbgf ._dgad /100.0;_cebb :=_fefd ;if _fdgg .Subtype ()=="\u0054\u0079\u0070e\u0033"{_cebb =1;};_dab ,_dgd :=_fdgg .GetRuneMetrics (' ');if !_dgd {_dab ,_dgd =_fdgg .GetCharMetrics (32);};if !_dgd {_dab ,_ =_acf .DefaultFont ().GetRuneMetrics (' ');
};_fccce :=_dab .Wx *_cebb ;_a .Log .Trace ("\u0073p\u0061\u0063e\u0057\u0069\u0064t\u0068\u003d\u0025\u002e\u0032\u0066\u0020t\u0065\u0078\u0074\u003d\u0025\u0071 \u0066\u006f\u006e\u0074\u003d\u0025\u0073\u0020\u0066\u006f\u006et\u0053\u0069\u007a\u0065\u003d\u0025\u002e\u0032\u0066",_fccce ,_ggad ,_fdgg ,_dfc );
_fedd :=_aeg .NewMatrix (_dfc *_ffdd ,0,0,_dfc ,0,_cbgf ._bfag );if _becg {_a .Log .Info ("\u0072\u0065\u006e\u0064\u0065\u0072T\u0065\u0078\u0074\u003a\u0020\u0025\u0064\u0020\u0063\u006f\u0064\u0065\u0073=\u0025\u002b\u0076\u0020\u0074\u0065\u0078t\u0073\u003d\u0025\u0071",len (_fgcd ),_fgcd ,_ggad );
};_a .Log .Trace ("\u0072\u0065\u006e\u0064\u0065\u0072T\u0065\u0078\u0074\u003a\u0020\u0025\u0064\u0020\u0063\u006f\u0064\u0065\u0073=\u0025\u002b\u0076\u0020\u0072\u0075\u006ee\u0073\u003d\u0025\u0071",len (_fgcd ),_fgcd ,len (_ggad ));_ceag :=_cgge .getFillColor ();
_dddg :=_cgge .getStrokeColor ();for _gfcd ,_ebda :=range _ggad {_dbgfg :=[]rune (_ebda );if len (_dbgfg )==1&&_dbgfg [0]=='\x00'{continue ;};_egdd :=_fgcd [_gfcd ];_dgg :=_cgge ._dbc .CTM .Mult (_cgge ._fcda ).Mult (_fedd );_fecd :=0.0;if len (_dbgfg )==1&&_dbgfg [0]==32{_fecd =_cbgf ._abc ;
};_cebg ,_facg :=_fdgg .GetCharMetrics (_egdd );if !_facg {_a .Log .Debug ("\u0045R\u0052\u004fR\u003a\u0020\u004e\u006f \u006d\u0065\u0074r\u0069\u0063\u0020\u0066\u006f\u0072\u0020\u0063\u006fde\u003d\u0025\u0064 \u0072\u003d0\u0078\u0025\u0030\u0034\u0078\u003d%\u002b\u0071 \u0025\u0073",_egdd ,_dbgfg ,_dbgfg ,_fdgg );
return _gb .Errorf ("\u006e\u006f\u0020\u0063\u0068\u0061\u0072\u0020\u006d\u0065\u0074\u0072\u0069\u0063\u0073:\u0020f\u006f\u006e\u0074\u003d\u0025\u0073\u0020\u0063\u006f\u0064\u0065\u003d\u0025\u0064",_fdgg .String (),_egdd );};_cefc :=_aeg .Point {X :_cebg .Wx *_cebb ,Y :_cebg .Wy *_cebb };
_efbd :=_aeg .Point {X :(_cefc .X *_dfc +_fecd )*_ffdd };_fbf :=_aeg .Point {X :(_cefc .X *_dfc +_cbgf ._edg +_fecd )*_ffdd };if _becg {_a .Log .Info ("\u0074\u0066\u0073\u003d\u0025\u002e\u0032\u0066\u0020\u0074\u0063\u003d\u0025\u002e\u0032f\u0020t\u0077\u003d\u0025\u002e\u0032\u0066\u0020\u0074\u0068\u003d\u0025\u002e\u0032\u0066",_dfc ,_cbgf ._edg ,_cbgf ._abc ,_ffdd );
_a .Log .Info ("\u0064x\u002c\u0064\u0079\u003d%\u002e\u0033\u0066\u0020\u00740\u003d%\u002e3\u0066\u0020\u0074\u003d\u0025\u002e\u0033f",_cefc ,_efbd ,_fbf );};_cgcd :=_agdb (_efbd );_aecd :=_agdb (_fbf );_cdff :=_cgge ._dbc .CTM .Mult (_cgge ._fcda ).Mult (_cgcd );
if _acbd {_a .Log .Info ("e\u006e\u0064\u003a\u000a\tC\u0054M\u003d\u0025\u0073\u000a\u0009 \u0074\u006d\u003d\u0025\u0073\u000a"+"\u0009\u0020t\u0064\u003d\u0025s\u0020\u0078\u006c\u0061\u0074\u003d\u0025\u0073\u000a"+"\u0009t\u0064\u0030\u003d\u0025s\u000a\u0009\u0020\u0020\u2192 \u0025s\u0020x\u006c\u0061\u0074\u003d\u0025\u0073",_cgge ._dbc .CTM ,_cgge ._fcda ,_aecd ,_eccg (_cgge ._dbc .CTM .Mult (_cgge ._fcda ).Mult (_aecd )),_cgcd ,_cdff ,_eccg (_cdff ));
};_adac ,_eecf :=_cgge .newTextMark (_cc .ExpandLigatures (_dbgfg ),_dgg ,_eccg (_cdff ),_f .Abs (_fccce *_dgg .ScalingFactorX ()),_fdgg ,_cgge ._eea ._edg ,_ceag ,_dddg ,_faad ,_ggad ,_gfcd ,_agac );if !_eecf {_a .Log .Debug ("\u0054\u0065\u0078\u0074\u0020\u006d\u0061\u0072\u006b\u0020\u006f\u0075\u0074\u0073\u0069d\u0065 \u0070\u0061\u0067\u0065\u002e\u0020\u0053\u006b\u0069\u0070\u0070\u0069\u006e\u0067");
continue ;};if _fdgg ==nil {_a .Log .Debug ("\u0045R\u0052O\u0052\u003a\u0020\u004e\u006f\u0020\u0066\u006f\u006e\u0074\u002e");}else if _fdgg .Encoder ()==nil {_a .Log .Debug ("E\u0052\u0052\u004f\u0052\u003a\u0020N\u006f\u0020\u0065\u006e\u0063\u006f\u0064\u0069\u006eg\u002e\u0020\u0066o\u006et\u003d\u0025\u0073",_fdgg );
}else {if _gded ,_abaa :=_fdgg .Encoder ().CharcodeToRune (_egdd );_abaa {_adac ._fdaef =string (_gded );};};_a .Log .Trace ("i\u003d\u0025\u0064\u0020\u0063\u006fd\u0065\u003d\u0025\u0064\u0020\u006d\u0061\u0072\u006b=\u0025\u0073\u0020t\u0072m\u003d\u0025\u0073",_gfcd ,_egdd ,_adac ,_dgg );
_cgge ._cggfb =append (_cgge ._cggfb ,&_adac );_cgge ._fcda .Concat (_aecd );};return nil ;};type gridTiling struct{_acf .PdfRectangle ;_aeba []float64 ;_dead []float64 ;_bddfg map[float64 ]map[float64 ]gridTile ;};func (_dace *subpath )close (){if !_gagac (_dace ._adcb [0],_dace .last ()){_dace .add (_dace ._adcb [0]);
};_dace ._aaca =true ;_dace .removeDuplicates ();};func _faebe (_fbaa *textLine )float64 {return _fbaa ._cfec [0].Llx };func (_dgef *wordBag )pullWord (_fcge *textWord ,_ccdd int ,_cfcc map[int ]map[*textWord ]struct{}){_dgef .PdfRectangle =_fccd (_dgef .PdfRectangle ,_fcge .PdfRectangle );
if _fcge ._facbbf > _dgef ._aacag {_dgef ._aacag =_fcge ._facbbf ;};_dgef ._ceea [_ccdd ]=append (_dgef ._ceea [_ccdd ],_fcge );_cfcc [_ccdd ][_fcge ]=struct{}{};};

// Box represents the bounding box of a given textMark on pdf page.
// This might be used for different kinds of high lighting after doing the search
type Box struct{BBox _acf .PdfRectangle ;};func (_ecff *textTable )putComposite (_bcged ,_cebee int ,_gfebg paraList ,_gbae _acf .PdfRectangle ){if len (_gfebg )==0{_a .Log .Error ("\u0074\u0065xt\u0054\u0061\u0062l\u0065\u0029\u0020\u0070utC\u006fmp\u006f\u0073\u0069\u0074\u0065\u003a\u0020em\u0070\u0074\u0079\u0020\u0070\u0061\u0072a\u0073");
return ;};_ffaaef :=compositeCell {PdfRectangle :_gbae ,paraList :_gfebg };if _ccdc {_gb .Printf ("\u0020\u0020\u0020\u0020\u0020\u0020\u0020\u0020\u0070\u0075\u0074\u0043\u006f\u006d\u0070o\u0073i\u0074\u0065\u0028\u0025\u0064\u002c\u0025\u0064\u0029\u003c\u002d\u0025\u0073\u000a",_bcged ,_cebee ,_ffaaef .String ());
};_ffaaef .updateBBox ();_ecff ._dgbef [_egeeg (_bcged ,_cebee )]=_ffaaef ;};func (_bgdg *textObject )setTextMatrix (_adca []float64 ){if len (_adca )!=6{_a .Log .Debug ("\u0045\u0052\u0052OR\u003a\u0020\u006c\u0065\u006e\u0028\u0066\u0029\u0020\u0021\u003d\u0020\u0036\u0020\u0028\u0025\u0064\u0029",len (_adca ));
return ;};_deea ,_dadc ,_ecef ,_ddfd ,_aaaba ,_adde :=_adca [0],_adca [1],_adca [2],_adca [3],_adca [4],_adca [5];_bgdg ._fcda =_aeg .NewMatrix (_deea ,_dadc ,_ecef ,_ddfd ,_aaaba ,_adde );_bgdg ._fgeb =_bgdg ._fcda ;};func _aada (_eaafe []*textLine )map[float64 ][]*textLine {_g .Slice (_eaafe ,func (_ggfc ,_adacd int )bool {return _eaafe [_ggfc ]._dgda < _eaafe [_adacd ]._dgda });
_gaagg :=map[float64 ][]*textLine {};for _ ,_bdga :=range _eaafe {_fcff :=_faebe (_bdga );_fcff =_f .Round (_fcff );_gaagg [_fcff ]=append (_gaagg [_fcff ],_bdga );};return _gaagg ;};func (_eedbf *textTable )isExportable ()bool {if _eedbf ._fgae {return true ;
};_ddff :=func (_eaggf int )bool {_cfgfg :=_eedbf .get (0,_eaggf );if _cfgfg ==nil {return false ;};_eaabe :=_cfgfg .text ();_bfdgf :=_c .RuneCountInString (_eaabe );_ddgg :=_ccagb .MatchString (_eaabe );return _bfdgf <=1||_ddgg ;};for _gdcg :=0;_gdcg < _eedbf ._acdga ;
_gdcg ++{if !_ddff (_gdcg ){return true ;};};return false ;};func (_eeffe paraList )findTableGrid (_dgdb gridTiling )(*textTable ,map[*textPara ]struct{}){_dbded :=len (_dgdb ._aeba );_dfcab :=len (_dgdb ._dead );_ffeg :=textTable {_fgae :true ,_bdea :_dbded ,_acdga :_dfcab ,_cdefa :make (map[uint64 ]*textPara ,_dbded *_dfcab ),_dgbef :make (map[uint64 ]compositeCell ,_dbded *_dfcab )};
_ffeg .PdfRectangle =_dgdb .PdfRectangle ;_eceg :=make (map[*textPara ]struct{});_bggbd :=int ((1.0-_egedg )*float64 (_dbded *_dfcab ));_gbec :=0;if _caegd {_a .Log .Info ("\u0066\u0069\u006e\u0064Ta\u0062\u006c\u0065\u0047\u0072\u0069\u0064\u003a\u0020\u0025\u0064\u0020\u0078\u0020%\u0064",_dbded ,_dfcab );
};for _aagf ,_bggd :=range _dgdb ._dead {_fccfb ,_bbcfg :=_dgdb ._bddfg [_bggd ];if !_bbcfg {continue ;};for _ffadg ,_ebedfd :=range _dgdb ._aeba {_ceeeb ,_dece :=_fccfb [_ebedfd ];if !_dece {continue ;};_dggfb :=_eeffe .inTile (_ceeeb );if len (_dggfb )==0{_gbec ++;
if _gbec > _bggbd {if _caegd {_a .Log .Info ("\u0021\u006e\u0075m\u0045\u006d\u0070\u0074\u0079\u003d\u0025\u0064",_gbec );};return nil ,nil ;};}else {_ffeg .putComposite (_ffadg ,_aagf ,_dggfb ,_ceeeb .PdfRectangle );for _ ,_agfc :=range _dggfb {_eceg [_agfc ]=struct{}{};
};};};};_aaabe :=0;for _ceaaa :=0;_ceaaa < _dbded ;_ceaaa ++{_cccf :=_ffeg .get (_ceaaa ,0);if _cccf ==nil ||!_cccf ._ffgb {_aaabe ++;};};if _aaabe ==0{if _caegd {_a .Log .Info ("\u0021\u006e\u0075m\u0048\u0065\u0061\u0064\u0065\u0072\u003d\u0030");};return nil ,nil ;
};_dggfe :=_ffeg .reduceTiling (_dgdb ,_accea );_dggfe =_dggfe .subdivide ();return _dggfe ,_eceg ;};func _gfeb (_abbc ,_fcccd _aeg .Point )bool {_aeac :=_f .Abs (_abbc .X -_fcccd .X );_bcda :=_f .Abs (_abbc .Y -_fcccd .Y );return _ceca (_aeac ,_bcda );
};func (_gbacg *textWord )absorb (_gdcdb *textWord ){_gbacg .PdfRectangle =_fccd (_gbacg .PdfRectangle ,_gdcdb .PdfRectangle );_gbacg ._eaee =append (_gbacg ._eaee ,_gdcdb ._eaee ...);};func _dfffg (_dafg ,_agea bounded )float64 {return _aged (_dafg )-_aged (_agea )};
var _ecb =false ;func (_ccg *textObject )setTextRise (_gffdc float64 ){if _ccg ==nil {return ;};_ccg ._eea ._bfag =_gffdc ;};

// String returns a description of `k`.
func (_afda markKind )String ()string {_ccde ,_bdfd :=_bebda [_afda ];if !_bdfd {return _gb .Sprintf ("\u004e\u006f\u0074\u0020\u0061\u0020\u006d\u0061\u0072k\u003a\u0020\u0025\u0064",_afda );};return _ccde ;};func (_cccbe *wordBag )sort (){for _ ,_cebbd :=range _cccbe ._ceea {_g .Slice (_cebbd ,func (_agaa ,_fggg int )bool {return _acdg (_cebbd [_agaa ],_cebbd [_fggg ])< 0});
};};func _acgec (_efec *list ,_deag *_cg .Builder ,_addce *string ){_cabea :=_ddbb (_efec ,_addce );_deag .WriteString (_cabea );for _ ,_gebgf :=range _efec ._feddf {_cgdc :=*_addce +"\u0020\u0020\u0020";_acgec (_gebgf ,_deag ,&_cgdc );};};func (_bccbe *textTable )put (_deaff ,_agdba int ,_dceec *textPara ){_bccbe ._cdefa [_egeeg (_deaff ,_agdba )]=_dceec ;
};func (_agag rulingList )secMinMax ()(float64 ,float64 ){_dagef ,_fcfb :=_agag [0]._feded ,_agag [0]._bbebb ;for _ ,_eeeac :=range _agag [1:]{if _eeeac ._feded < _dagef {_dagef =_eeeac ._feded ;};if _eeeac ._bbebb > _fcfb {_fcfb =_eeeac ._bbebb ;};};return _dagef ,_fcfb ;
};func (_gbda *subpath )removeDuplicates (){if len (_gbda ._adcb )==0{return ;};_ebae :=[]_aeg .Point {_gbda ._adcb [0]};for _ ,_ffbg :=range _gbda ._adcb [1:]{if !_gagac (_ffbg ,_ebae [len (_ebae )-1]){_ebae =append (_ebae ,_ffbg );};};_gbda ._adcb =_ebae ;
};type imageExtractContext struct{_aef []ImageMark ;_eag int ;_abf int ;_gfd int ;_afc map[*_fe .PdfObjectStream ]*cachedImage ;_gcda *ImageExtractOptions ;_acg bool ;};

// Text gets the extracted text contained in `l`.
func (_aeag *list )Text ()string {_bdgd :=&_cg .Builder {};_eefbg :="";_acgec (_aeag ,_bdgd ,&_eefbg );return _bdgd .String ();};const (_deef =1.0e-6;_bdff =1.0e-4;_bbfbc =10;_fbfbb =6;_bgfe =0.5;_cabd =0.12;_gfdd =0.19;_cfgf =0.04;_fbdf =1.0;_cdba =0.04;
_gfcbc =12;_afag =0.4;_gcfc =0.7;_dgba =1.0;_agef =0.1;_eaga =1.4;_dacg =0.46;_cbbf =0.02;_eacd =0.2;_dada =0.5;_ccdaef =4;_badc =4.0;_egca =6;_egedg =0.3;_bdee =0.01;_cbad =0.02;_ageb =2;_aaeb =2;_eadg =500;_dbff =4.0;_afcg =0.05;_afdc =0.1;_bgffd =2.0;
_cadg =2.0;_ebgfa =1.5;_accea =3.0;_dedb =0.25;);func (_fcfg *textTable )compositeColCorridors ()map[int ][]float64 {_ecagc :=make (map[int ][]float64 ,_fcfg ._bdea );if _ccdc {_a .Log .Info ("\u0063\u006f\u006d\u0070o\u0073\u0069\u0074\u0065\u0043\u006f\u006c\u0043\u006f\u0072r\u0069d\u006f\u0072\u0073\u003a\u0020\u0077\u003d%\u0064\u0020",_fcfg ._bdea );
};for _ddaea :=0;_ddaea < _fcfg ._bdea ;_ddaea ++{_ecagc [_ddaea ]=nil ;};return _ecagc ;};func _faab (_afef ,_fffa _acf .PdfRectangle )bool {return _bgeb (_afef ,_fffa )&&_cage (_afef ,_fffa )};func (_ddgd *textObject )reset (){_ddgd ._fcda =_aeg .IdentityMatrix ();
_ddgd ._fgeb =_aeg .IdentityMatrix ();_ddgd ._cggfb =nil ;};

// String returns a string describing `pt`.
func (_cac PageText )String ()string {_efcc :=_gb .Sprintf ("P\u0061\u0067\u0065\u0054ex\u0074:\u0020\u0025\u0064\u0020\u0065l\u0065\u006d\u0065\u006e\u0074\u0073",len (_cac ._effb ));_ccdae :=[]string {"\u002d"+_efcc };for _ ,_dbfe :=range _cac ._effb {_ccdae =append (_ccdae ,_dbfe .String ());
};_ccdae =append (_ccdae ,"\u002b"+_efcc );return _cg .Join (_ccdae ,"\u000a");};func (_cad *imageExtractContext )extractInlineImage (_efd *_ec .ContentStreamInlineImage ,_fddc _ec .GraphicsState ,_fedc *_acf .PdfPageResources )error {_eef ,_beea :=_efd .ToImage (_fedc );
if _beea !=nil {return _beea ;};_cbc ,_beea :=_efd .GetColorSpace (_fedc );if _beea !=nil {return _beea ;};if _cbc ==nil {_cbc =_acf .NewPdfColorspaceDeviceGray ();};_bggc ,_beea :=_cbc .ImageToRGB (*_eef );if _beea !=nil {return _beea ;};_cge :=ImageMark {Image :&_bggc ,Width :_fddc .CTM .ScalingFactorX (),Height :_fddc .CTM .ScalingFactorY (),Angle :_fddc .CTM .Angle ()};
_cge .X ,_cge .Y =_fddc .CTM .Translation ();_cad ._aef =append (_cad ._aef ,_cge );_cad ._eag ++;return nil ;};func (_eeea *textLine )pullWord (_bcbd *wordBag ,_cbedb *textWord ,_bceg int ){_eeea .appendWord (_cbedb );_bcbd .removeWord (_cbedb ,_bceg );
};func _cedc (_dfgc []*textWord ,_fadb float64 ,_acfd ,_bedg rulingList )*wordBag {_abeb :=_gecg (_dfgc [0],_fadb ,_acfd ,_bedg );for _ ,_eadf :=range _dfgc [1:]{_eagc :=_deaf (_eadf ._dbbagg );_abeb ._ceea [_eagc ]=append (_abeb ._ceea [_eagc ],_eadf );
_abeb .PdfRectangle =_fccd (_abeb .PdfRectangle ,_eadf .PdfRectangle );};_abeb .sort ();return _abeb ;};func _bddbb (_ebeg *_acf .Image ,_eedd _fd .Color )_ce .Image {_bceac ,_bdag :=int (_ebeg .Width ),int (_ebeg .Height );_fdce :=_ce .NewRGBA (_ce .Rect (0,0,_bceac ,_bdag ));
for _fgeg :=0;_fgeg < _bdag ;_fgeg ++{for _bedab :=0;_bedab < _bceac ;_bedab ++{_egfgg ,_bbcea :=_ebeg .ColorAt (_bedab ,_fgeg );if _bbcea !=nil {_a .Log .Debug ("\u0057\u0041\u0052\u004e\u003a\u0020\u0063o\u0075\u006c\u0064\u0020\u006e\u006f\u0074\u0020\u0072\u0065\u0074\u0072\u0069\u0065v\u0065 \u0069\u006d\u0061\u0067\u0065\u0020m\u0061\u0073\u006b\u0020\u0076\u0061\u006cu\u0065\u0020\u0061\u0074\u0020\u0028\u0025\u0064\u002c\u0020\u0025\u0064\u0029\u002e\u0020\u004f\u0075\u0074\u0070\u0075\u0074\u0020\u006da\u0079\u0020\u0062\u0065\u0020\u0069\u006e\u0063\u006f\u0072\u0072\u0065\u0063t\u002e",_bedab ,_fgeg );
continue ;};_adfab ,_ddbeb ,_geaa ,_ :=_egfgg .RGBA ();var _bgbg _fd .Color ;if _adfab +_ddbeb +_geaa ==0{_bgbg =_eedd ;}else {_bgbg =_fd .Transparent ;};_fdce .Set (_bedab ,_fgeg ,_bgbg );};};return _fdce ;};

// ExtractionMode defines different types of extraction mode.
type ExtractionMode int ;

// BidiText represents a bidi text organized in its visual order
// with base direction of the text.
type BidiText struct{_de string ;_cgf string ;};type lists []*list ;func (_acce pathSection )bbox ()_acf .PdfRectangle {_gaag :=_acce ._dbe [0]._adcb [0];_afaef :=_acf .PdfRectangle {Llx :_gaag .X ,Urx :_gaag .X ,Lly :_gaag .Y ,Ury :_gaag .Y };_egbcc :=func (_febe _aeg .Point ){if _febe .X < _afaef .Llx {_afaef .Llx =_febe .X ;
}else if _febe .X > _afaef .Urx {_afaef .Urx =_febe .X ;};if _febe .Y < _afaef .Lly {_afaef .Lly =_febe .Y ;}else if _febe .Y > _afaef .Ury {_afaef .Ury =_febe .Y ;};};for _ ,_febef :=range _acce ._dbe [0]._adcb [1:]{_egbcc (_febef );};for _ ,_cebc :=range _acce ._dbe [1:]{for _ ,_ffff :=range _cebc ._adcb {_egbcc (_ffff );
};};return _afaef ;};func (_da *Editor )getMatches (_cae string ,_cfeef []int )(map[int ]Match ,map[int ][]*TextMarkArray ,error ){_age :=map[int ]Match {};_ede :=map[int ][]*TextMarkArray {};for _ ,_efg :=range _cfeef {_ece ,_fce :=_da ._bbg .GetPage (_efg );
if _fce !=nil {return nil ,nil ,_fce ;};_efeb ,_fce :=New (_ece );if _fce !=nil {return nil ,nil ,_fce ;};_fgc ,_ ,_ ,_fce :=_efeb .ExtractPageText ();if _fce !=nil {return nil ,nil ,_fce ;};_dge :=_fgc .Text ();_dfgdg ,_fce :=_aefe (_cae ,_dge );if _fce !=nil {return nil ,nil ,_fce ;
};if len (_dfgdg )==0{_a .Log .Info ("\u004e\u006f\u0020\u006d\u0061\u0074\u0063\u0068\u0020\u0066\u006f\u0075\u006e\u0064\u0020f\u006fr\u0020\u0025\u0073\u0020\u006f\u006e\u0020\u0070\u0061\u0067\u0065\u0020\u0025\u0064",_cae ,_efg );};_afcb :=_fgc .Marks ();
_dcc :=[]Box {};for _ ,_gae :=range _dfgdg {_ ,_efff ,_fdbc :=_ffdf (_gae ,_afcb ,_cae );if _fdbc !=nil {return nil ,nil ,_fdbc ;};_dcc =append (_dcc ,_efff );};_gggd :=Match {Pattern :_cae ,Indexes :_dfgdg ,Locations :_dcc };_age [_efg ]=_gggd ;};return _age ,_ede ,nil ;
};func (_cggdf *subpath )isQuadrilateral ()bool {if len (_cggdf ._adcb )< 4||len (_cggdf ._adcb )> 5{return false ;};if len (_cggdf ._adcb )==5{_fcaa :=_cggdf ._adcb [0];_acgb :=_cggdf ._adcb [4];if _fcaa .X !=_acgb .X ||_fcaa .Y !=_acgb .Y {return false ;
};};return true ;};

// WriteToFile writes the edited content to `outputPath`.
func (_caac *Editor )WriteToFile (outputPath string )error {_beb ,_cgff :=_caac ._bbg .ToWriter (nil );if _cgff !=nil {return _gb .Errorf ("\u0066\u0061\u0069\u006c\u0065\u0064\u0020\u0074\u006f\u0020c\u006f\u006e\u0076\u0065\u0072\u0074\u0020t\u006f\u0020\u0077\u0072\u0069\u0074\u0065\u0072\u0020\u0025\u0076",_cgff );
};_beb .WriteToFile (outputPath );return nil ;};type stateStack []*textState ;const (_facbb markKind =iota ;_gdga ;_ccgee ;_ebdd ;);func _gdda (_gbacc ,_fcfdd _aeg .Point )rulingKind {_ffef :=_f .Abs (_gbacc .X -_fcfdd .X );_fbge :=_f .Abs (_gbacc .Y -_fcfdd .Y );
return _agdec (_ffef ,_fbge ,_dbff );};func (_efaa rulingList )mergePrimary ()float64 {_dgdg :=_efaa [0]._eeac ;for _ ,_aaaad :=range _efaa [1:]{_dgdg +=_aaaad ._eeac ;};return _dgdg /float64 (len (_efaa ));};func _dddc (_dgeed []*textMark ,_fgdd _acf .PdfRectangle ,_abbbg bool )[]*textWord {var _agdda []*textWord ;
var _fdabcb *textWord ;if _bfcb {_a .Log .Info ("\u006d\u0061\u006beT\u0065\u0078\u0074\u0057\u006f\u0072\u0064\u0073\u003a\u0020\u0025\u0064\u0020\u006d\u0061\u0072\u006b\u0073",len (_dgeed ));};_gbced :=func (){if _fdabcb !=nil {_fdeeb :=_fdabcb .computeText ();
if !_edcec (_fdeeb ){_fdabcb ._cdffa =_fdeeb ;_agdda =append (_agdda ,_fdabcb );if _bfcb {_a .Log .Info ("\u0061\u0064\u0064Ne\u0077\u0057\u006f\u0072\u0064\u003a\u0020\u0025\u0064\u003a\u0020\u0077\u006f\u0072\u0064\u003d\u0025\u0073",len (_agdda )-1,_fdabcb .String ());
for _fegfc ,_bcfeg :=range _fdabcb ._eaee {_gb .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0073\u000a",_fegfc ,_bcfeg .String ());};};};_fdabcb =nil ;};};for _ ,_abeaa :=range _dgeed {if _fefdd &&_fdabcb !=nil &&len (_fdabcb ._eaee )> 0{_feeff :=_fdabcb ._eaee [len (_fdabcb ._eaee )-1];
_acgg ,_fbaad :=_ebffg (_abeaa ._gadb );_cefcdc ,_beaf :=_ebffg (_feeff ._gadb );if _fbaad &&!_beaf &&_feeff .inDiacriticArea (_abeaa ){_fdabcb .addDiacritic (_acgg );continue ;};if _beaf &&!_fbaad &&_abeaa .inDiacriticArea (_feeff ){_fdabcb ._eaee =_fdabcb ._eaee [:len (_fdabcb ._eaee )-1];
_fdabcb .appendMark (_abeaa ,_fgdd );_fdabcb .addDiacritic (_cefcdc );continue ;};};_caaae :=_edcec (_abeaa ._gadb );if _caaae {_gbced ();continue ;};if _fdabcb ==nil &&!_caaae {_fdabcb =_fabe ([]*textMark {_abeaa },_fgdd );continue ;};_baebe :=_fdabcb ._facbbf ;
_cbbe :=_f .Abs (_ccfd (_fgdd ,_abeaa )-_fdabcb ._dbbagg )/_baebe ;_gegff :=_bbca (_abeaa ,_fdabcb )/_baebe ;_ddgc :=_fdabcb .Width ()+_abeaa .Width ();if _abbbg &&_abeaa ._fefbg .Angle ()!=0.0{_aeagd :=_f .Abs (_ddgc *_f .Tan (_abeaa ._fefbg .Angle ())/_baebe );
if _cbbe > _aeagd {_cbbe -=_aeagd ;}else {_cbbe =0.0;};};if _gegff >=_cabd ||!(-_gfdd <=_gegff &&_cbbe <=_cfgf ){_gbced ();_fdabcb =_fabe ([]*textMark {_abeaa },_fgdd );continue ;};_fdabcb .appendMark (_abeaa ,_fgdd );};_gbced ();return _agdda ;};func _gdef (_gbdab ,_fggb _acf .PdfRectangle )bool {return _gbdab .Llx <=_fggb .Llx &&_fggb .Urx <=_gbdab .Urx &&_gbdab .Lly <=_fggb .Lly &&_fggb .Ury <=_gbdab .Ury ;
};func (_fgfa compositeCell )hasLines (_ffgc []*textLine )bool {for _gddc ,_eabge :=range _ffgc {_ceeag :=_faab (_fgfa .PdfRectangle ,_eabge .PdfRectangle );if _ccdc {_gb .Printf ("\u0020\u0020\u0020\u0020\u0020\u0020\u005e\u005e\u005e\u0069\u006e\u0074\u0065\u0072\u0073e\u0063t\u0073\u003d\u0025\u0074\u0020\u0025\u0064\u0020\u006f\u0066\u0020\u0025\u0064\u000a",_ceeag ,_gddc ,len (_ffgc ));
_gb .Printf ("\u0020\u0020\u0020\u0020  \u005e\u005e\u005e\u0063\u006f\u006d\u0070\u006f\u0073\u0069\u0074\u0065\u003d\u0025s\u000a",_fgfa );_gb .Printf ("\u0020 \u0020 \u0020\u0020\u0020\u006c\u0069\u006e\u0065\u003d\u0025\u0073\u000a",_eabge );};if _ceeag {return true ;
};};return false ;};func (_gdgf *textMark )bbox ()_acf .PdfRectangle {return _gdgf .PdfRectangle };func _bgeb (_abcf ,_ggbd _acf .PdfRectangle )bool {return _ggbd .Llx <=_abcf .Urx &&_abcf .Llx <=_ggbd .Urx ;};func (_befce *textTable )growTable (){_gaaae :=func (_eaccb paraList ){_befce ._acdga ++;
for _aaegd :=0;_aaegd < _befce ._bdea ;_aaegd ++{_cfeag :=_eaccb [_aaegd ];_befce .put (_aaegd ,_befce ._acdga -1,_cfeag );};};_cdaec :=func (_dbdbb paraList ){_befce ._bdea ++;for _afbg :=0;_afbg < _befce ._acdga ;_afbg ++{_bgbae :=_dbdbb [_afbg ];_befce .put (_befce ._bdea -1,_afbg ,_bgbae );
};};if _eefb {_befce .log ("\u0067r\u006f\u0077\u0054\u0061\u0062\u006ce");};for _daeb :=0;;_daeb ++{_cgcf :=false ;_daeac :=_befce .getDown ();_dbcfe :=_befce .getRight ();if _eefb {_gb .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0073\u000a",_daeb ,_befce );
_gb .Printf ("\u0020\u0020 \u0020\u0020\u0020 \u0020\u0064\u006f\u0077\u006e\u003d\u0025\u0073\u000a",_daeac );_gb .Printf ("\u0020\u0020 \u0020\u0020\u0020 \u0072\u0069\u0067\u0068\u0074\u003d\u0025\u0073\u000a",_dbcfe );};if _daeac !=nil &&_dbcfe !=nil {_bbcf :=_daeac [len (_daeac )-1];
if !_bbcf .taken ()&&_bbcf ==_dbcfe [len (_dbcfe )-1]{_gaaae (_daeac );if _dbcfe =_befce .getRight ();_dbcfe !=nil {_cdaec (_dbcfe );_befce .put (_befce ._bdea -1,_befce ._acdga -1,_bbcf );};_cgcf =true ;};};if !_cgcf &&_daeac !=nil {_gaaae (_daeac );_cgcf =true ;
};if !_cgcf &&_dbcfe !=nil {_cdaec (_dbcfe );_cgcf =true ;};if !_cgcf {break ;};};};func (_gebg *textObject )setTextLeading (_cbcd float64 ){if _gebg ==nil {return ;};_gebg ._eea ._agbg =_cbcd ;};

// Editor represents a document editor object
type Editor struct{_bbg *_acf .PdfReader };func (_deeg paraList )merge ()*textPara {_a .Log .Trace ("\u006d\u0065\u0072\u0067\u0065:\u0020\u0070\u0061\u0072\u0061\u0073\u003d\u0025\u0064\u0020\u003d\u003d\u003d=\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u0078\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d",len (_deeg ));
if len (_deeg )==0{return nil ;};_deeg .sortReadingOrder ();_eeec :=_deeg [0].PdfRectangle ;_dbca :=_deeg [0]._ggfbe ;for _ ,_badg :=range _deeg [1:]{_eeec =_fccd (_eeec ,_badg .PdfRectangle );_dbca =append (_dbca ,_badg ._ggfbe ...);};return _bfaa (_eeec ,_dbca );
};func _cdda (_bcfdc *textLine ,_defd []*textLine ,_cddga ,_cded float64 )[]*textLine {_fcdg :=[]*textLine {};for _ ,_adb :=range _defd {if _adb ._dgda >=_cddga {if _cded !=-1&&_adb ._dgda < _cded {if _adb .text ()!=_bcfdc .text (){if _f .Round (_adb .Llx )< _f .Round (_bcfdc .Llx ){break ;
};_fcdg =append (_fcdg ,_adb );};}else if _cded ==-1{if _adb ._dgda ==_bcfdc ._dgda {if _adb .text ()!=_bcfdc .text (){_fcdg =append (_fcdg ,_adb );};continue ;};_acea :=_dbda (_bcfdc ,_defd );if _acea !=-1&&_adb ._dgda <=_acea {_fcdg =append (_fcdg ,_adb );
};};};};return _fcdg ;};func _ddc (_cbfg *TextMarkArray ,_faea *string ,_cfed *int ,_bebg string )error {_afe :=_cbfg .Elements ()[0].DirectObject ;_dcfc ,_dbdf :=_fe .GetString (_afe );if !_dbdf {return _gb .Errorf ("\u0075n\u0061\u0062l\u0065\u0020\u0074\u006f \u0067\u0065\u0074 \u0073\u0074\u0072\u0069\u006e\u0067\u0020\u0042\u0079te\u0073\u0020\u0066r\u006f\u006d \u0064\u0069\u0072\u0065\u0063\u0074O\u0062\u006ae\u0063\u0074");
};_cdd :=_dbfa (_cbfg );_cfd ,_dbdf :=_fe .GetStringBytes (_afe );if !_dbdf {return _fe .ErrTypeError ;};_ebee :=_cbfg .Elements ()[0].Font ;_egab :=_aad (_cfd ,_ebee );_fcec :="";_cdf :=*_faea ;if len (_cdf )> *_cfed {_fcec =_cdf [*_cfed :*_cfed +len (_cdd )];
}else if *_cfed ==len (_bebg )-1&&len (_cdf )> *_cfed {_fcec =_cdf [*_cfed :];};_cfgd :="";_gdab :=_cg .Split (_egab ,"\u0020");_dfa :=_gdab [len (_gdab )-1];if _dfa ==_cdd &&*_cfed ==0{_edfc :=_cg .LastIndex (_egab ,_cdd );_cfgd =_edb (_egab ,_edfc ,len (_cdd )+_edfc ,_fcec );
}else if *_cfed ==len (_bebg )-1&&len (_cdf )> *_cfed {_cfgd =_cg .Replace (_egab ,_cdd ,_cdf [*_cfed :],-1);}else {_cfgd =_cg .Replace (_egab ,_cdd ,_fcec ,1);};_gbbef (_dcfc ,_cfgd ,_ebee );*_cfed +=len (_cdd );return nil ;};func _baeb (_bdaad []*textMark ,_gfec _acf .PdfRectangle ,_fedb rulingList ,_ecde []gridTiling ,_eeaeg bool )paraList {_a .Log .Trace ("\u006d\u0061\u006b\u0065\u0054\u0065\u0078\u0074\u0050\u0061\u0067\u0065\u003a \u0025\u0064\u0020\u0065\u006c\u0065m\u0065\u006e\u0074\u0073\u0020\u0070\u0061\u0067\u0065\u0053\u0069\u007a\u0065=\u0025\u002e\u0032\u0066",len (_bdaad ),_gfec );
if len (_bdaad )==0{return nil ;};_dgbc :=_dddc (_bdaad ,_gfec ,false );if len (_dgbc )==0{return nil ;};_fedb .log ("\u006d\u0061\u006be\u0054\u0065\u0078\u0074\u0050\u0061\u0067\u0065");_gfcdb ,_adbc :=_fedb .vertsHorzs ();_beac :=_cedc (_dgbc ,_gfec .Ury ,_gfcdb ,_adbc );
_dgcg :=_dfeb (_beac ,_gfec .Ury ,_gfcdb ,_adbc ,_eeaeg );_dgcg =_aced (_dgcg );_gdbe :=make (paraList ,0,len (_dgcg ));for _ ,_fabg :=range _dgcg {_ebfde :=_fabg .arrangeText (_eeaeg );if _ebfde !=nil {_gdbe =append (_gdbe ,_ebfde );};};if len (_gdbe )>=_egca {_gdbe =_gdbe .extractTables (_ecde );
};_gdbe .sortReadingOrder ();_gdbe .sortTopoOrder ();_gdbe .log ("\u0073\u006f\u0072te\u0064\u0020\u0069\u006e\u0020\u0072\u0065\u0061\u0064\u0069\u006e\u0067\u0020\u006f\u0072\u0064\u0065\u0072");return _gdbe ;};func (_cddf *textObject )setWordSpacing (_aebb float64 ){if _cddf ==nil {return ;
};_cddf ._eea ._abc =_aebb ;};func (_cdcba *textTable )getDown ()paraList {_cdfe :=make (paraList ,_cdcba ._bdea );for _ceef :=0;_ceef < _cdcba ._bdea ;_ceef ++{_bcef :=_cdcba .get (_ceef ,_cdcba ._acdga -1)._caaaf ;if _bcef .taken (){return nil ;};_cdfe [_ceef ]=_bcef ;
};for _daaeb :=0;_daaeb < _cdcba ._bdea -1;_daaeb ++{if _cdfe [_daaeb ]._cdfcc !=_cdfe [_daaeb +1]{return nil ;};};return _cdfe ;};func (_cefd *shapesState )quadraticTo (_bcadf ,_gdb ,_bedcd ,_ebff float64 ){if _bdbeg {_a .Log .Info ("\u0071\u0075\u0061d\u0072\u0061\u0074\u0069\u0063\u0054\u006f\u003a");
};_cefd .addPoint (_bedcd ,_ebff );};func _ebedf (_becee _acf .PdfRectangle )rulingKind {_dfgbd :=_becee .Width ();_ffec :=_becee .Height ();if _dfgbd > _ffec {if _dfgbd >=_dbff {return _bgbc ;};}else {if _ffec >=_dbff {return _ffgdf ;};};return _fgdf ;
};func (_adcf *wordBag )absorb (_bgge *wordBag ){_cfea :=_bgge .makeRemovals ();for _ebeed ,_faeb :=range _bgge ._ceea {for _ ,_ffgda :=range _faeb {_adcf .pullWord (_ffgda ,_ebeed ,_cfea );};};_bgge .applyRemovals (_cfea );};func (_adfa *textLine )toTextMarks (_gccc *int )[]TextMark {var _dbdc []TextMark ;
for _ ,_acga :=range _adfa ._cfec {if _acga ._agdf {_dbdc =_caacf (_dbdc ,_gccc ,"\u0020");};_dbcd :=_acga .toTextMarks (_gccc );_dbdc =append (_dbdc ,_dbcd ...);};return _dbdc ;};func _egeeg (_aegd ,_fada int )uint64 {return uint64 (_aegd )*0x1000000+uint64 (_fada )};
func _ffc (_eeff *TextMarkArray )[]*TextMarkArray {_ebc :=_eeff .Elements ();_fdb :=len (_ebc );var _egc _fe .PdfObject ;_cbcf :=[]*TextMarkArray {};_cgfa :=&TextMarkArray {};_cgea :=-1;for _aea ,_bca :=range _ebc {_dd :=_bca .DirectObject ;_cgea =_bca .Index ;
if _dd ==nil {_cabe :=_cdcb (_eeff ,_aea );if _egc !=nil {if _cabe ==-1||_cabe > _aea {_cbcf =append (_cbcf ,_cgfa );_cgfa =&TextMarkArray {};};};}else if _egc ==nil {if _cgea ==0&&_aea > 0{_cbcf =append (_cbcf ,_cgfa );_cgfa =&TextMarkArray {};};}else {if _dd !=_egc {_cbcf =append (_cbcf ,_cgfa );
_cgfa =&TextMarkArray {};};};_egc =_dd ;_cgfa .Append (_bca );if _aea ==(_fdb -1){_cbcf =append (_cbcf ,_cgfa );};};return _cbcf ;};type lineRuling struct{_afbb rulingKind ;_bebd markKind ;_fd .Color ;_gbcde ,_eaaeg _aeg .Point ;};func (_adaae paraList )findTables (_badaf []gridTiling )[]*textTable {_adaae .addNeighbours ();
_g .Slice (_adaae ,func (_fgbac ,_fcega int )bool {return _dbed (_adaae [_fgbac ],_adaae [_fcega ])< 0});var _egea []*textTable ;if _feaf {_daeeb :=_adaae .findGridTables (_badaf );_egea =append (_egea ,_daeeb ...);};if _cbcg {_eacc :=_adaae .findTextTables ();
_egea =append (_egea ,_eacc ...);};return _egea ;};func _fbdg (_afgg []*textWord ,_bbgfb int )[]*textWord {_aaadc :=len (_afgg );copy (_afgg [_bbgfb :],_afgg [_bbgfb +1:]);return _afgg [:_aaadc -1];};func (_ccae *textWord )appendMark (_bfdcde *textMark ,_bfdeg _acf .PdfRectangle ){_ccae ._eaee =append (_ccae ._eaee ,_bfdcde );
_ccae .PdfRectangle =_fccd (_ccae .PdfRectangle ,_bfdcde .PdfRectangle );if _bfdcde ._gfgd > _ccae ._facbbf {_ccae ._facbbf =_bfdcde ._gfgd ;};_ccae ._dbbagg =_bfdeg .Ury -_ccae .PdfRectangle .Lly ;};func (_ecgc *imageExtractContext )processOperand (_gbbe *_ec .ContentStreamOperation ,_cabb _ec .GraphicsState ,_cca *_acf .PdfPageResources )error {if _gbbe .Operand =="\u0042\u0049"&&len (_gbbe .Params )==1{_bb ,_cdac :=_gbbe .Params [0].(*_ec .ContentStreamInlineImage );
if !_cdac {return nil ;};if _cfg ,_dfgd :=_fe .GetBoolVal (_bb .ImageMask );_dfgd {if _cfg &&!_ecgc ._gcda .IncludeInlineStencilMasks {return nil ;};};return _ecgc .extractInlineImage (_bb ,_cabb ,_cca );}else if _gbbe .Operand =="\u0044\u006f"&&len (_gbbe .Params )==1{_gbfa ,_fcbd :=_fe .GetName (_gbbe .Params [0]);
if !_fcbd {_a .Log .Debug ("E\u0052\u0052\u004f\u0052\u003a\u0020\u0054\u0079\u0070\u0065");return _ffg ;};_ ,_bedcc :=_cca .GetXObjectByName (*_gbfa );switch _bedcc {case _acf .XObjectTypeImage :return _ecgc .extractXObjectImage (_gbfa ,_cabb ,_cca );
case _acf .XObjectTypeForm :return _ecgc .extractFormImages (_gbfa ,_cabb ,_cca );};}else if _ecgc ._acg &&(_gbbe .Operand =="\u0073\u0063\u006e"||_gbbe .Operand =="\u0053\u0043\u004e")&&len (_gbbe .Params )==1{_bba ,_gff :=_fe .GetName (_gbbe .Params [0]);
if !_gff {_a .Log .Debug ("E\u0052\u0052\u004f\u0052\u003a\u0020\u0054\u0079\u0070\u0065");return _ffg ;};_cfae ,_gff :=_cca .GetPatternByName (*_bba );if !_gff {_a .Log .Debug ("\u0045R\u0052\u004f\u0052\u003a\u0020\u0050\u0061\u0074\u0074\u0065\u0072n\u0020\u006e\u006f\u0074\u0020\u0066\u006f\u0075\u006e\u0064");
return nil ;};if _cfae .IsTiling (){_ced :=_cfae .GetAsTilingPattern ();_bee ,_bgg :=_ced .GetContentStream ();if _bgg !=nil {return _bgg ;};_bgg =_ecgc .extractContentStreamImages (string (_bee ),_ced .Resources );if _bgg !=nil {return _bgg ;};};}else if (_gbbe .Operand =="\u0063\u0073"||_gbbe .Operand =="\u0043\u0053")&&len (_gbbe .Params )>=1{_ecgc ._acg =_gbbe .Params [0].String ()=="\u0050a\u0074\u0074\u0065\u0072\u006e";
};return nil ;};func (_bdcc *shapesState )lastpointEstablished ()(_aeg .Point ,bool ){if _bdcc ._dec {return _bdcc ._fgba ,false ;};_adf :=len (_bdcc ._feae );if _adf > 0&&_bdcc ._feae [_adf -1]._aaca {return _bdcc ._feae [_adf -1].last (),false ;};return _aeg .Point {},true ;
};

// StrokePath is a stroked path.
type StrokePath struct{Points []_aeg .Point ;_fd .Color ;};func _decb (_gbgb *_acf .StructTreeRoot ,_gcgg map[int ][]*textLine ,_fdabc _fe .PdfObject )[]*list {if _gbgb ==nil {_a .Log .Debug ("\u0062\u0075\u0069\u006c\u0064\u004c\u0069\u0073\u0074\u003a\u0020t\u0072\u0065\u0065\u0052\u006f\u006f\u0074\u0020\u0069\u0073 \u006e\u0069\u006c");
return nil ;};_cdcc :=[]*_acf .KValue {};var _ceac func (_cedce *_acf .KValue );_ceac =func (_cggb *_acf .KValue ){if _cbcfa :=_cggb .GetKDict ();_cbcfa !=nil {if _cbcfa .S .String ()=="\u004c"{_cdcc =append (_cdcc ,_cggb );}else {for _ ,_bfeb :=range _cbcfa .GetChildren (){_ceac (_bfeb );
};};};};for _ ,_egfcc :=range _gbgb .K {_gcge :=_acf .NewKValue ();_gcge .SetKDict (_egfcc );_ceac (_gcge );};_ffcg :=_agff (_cdcc ,_gcgg ,_fdabc );var _edgb []*list ;for _ ,_eaffc :=range _ffcg {_adfe :=_gagf (_eaffc );_edgb =append (_edgb ,_adfe ...);
};return _edgb ;};func (_dafcb *textTable )bbox ()_acf .PdfRectangle {return _dafcb .PdfRectangle };func _db (_be []string ,_cef int ,_aa string )int {_fc :=_cef ;for ;_fc < len (_be );_fc ++{if _be [_fc ]!=_aa {return _fc ;};};return _fc ;};func _bbedb (_gbce int ,_cceef map[int ][]float64 )([]int ,int ){_cadgc :=make ([]int ,_gbce );
_defe :=0;for _abcfc :=0;_abcfc < _gbce ;_abcfc ++{_cadgc [_abcfc ]=_defe ;_defe +=len (_cceef [_abcfc ])+1;};return _cadgc ,_defe ;};func (_cfeaf intSet )has (_eeegf int )bool {_ ,_daefc :=_cfeaf [_eeegf ];return _daefc };func _bbgd (_dgaae ,_agebb *textPara )bool {if _dgaae ._ffgb ||_agebb ._ffgb {return true ;
};return _edfea (_dgaae .depth ()-_agebb .depth ());};func (_ecbba *textPara )fontsize ()float64 {return _ecbba ._ggfbe [0]._aebd };func (_faeg *subpath )last ()_aeg .Point {return _faeg ._adcb [len (_faeg ._adcb )-1]};func _gbbef (_ddf *_fe .PdfObjectString ,_acgd string ,_gecb *_acf .PdfFont ){_cabg ,_becc :=_gecb .StringToCharcodeBytes (_acgd );
if _becc !=0{_a .Log .Debug ("\u0057\u0041\u0052\u004e\u003a\u0020\u0073\u006fm\u0065\u0020\u0072un\u0065\u0073\u0020\u0063\u006f\u0075l\u0064\u0020\u006e\u006f\u0074\u0020\u0062\u0065\u0020\u0065\u006e\u0063\u006f\u0064\u0065d\u002e\u000a\u0009\u0025\u0073\u0020\u002d\u003e \u0025\u0076",_acgd ,_cabg );
};_eeg :=_fe .MakeStringFromBytes (_cabg );*_ddf =*_eeg ;};type textResult struct{_gaec PageText ;_eecd int ;_ecc int ;};func _dbda (_aggb *textLine ,_bcgd []*textLine )float64 {var _dbfg float64 =-1;for _ ,_cgad :=range _bcgd {if _cgad ._dgda > _aggb ._dgda {if _f .Round (_cgad .Llx )>=_f .Round (_aggb .Llx ){_dbfg =_cgad ._dgda ;
}else {break ;};};};return _dbfg ;};var _dffeb *_dc .Regexp =_dc .MustCompile (_fdfc +"\u007c"+_dadb );func _ccfg (_febfg []pathSection )rulingList {_eacbg (_febfg );if _eagg {_a .Log .Info ("\u006d\u0061k\u0065\u0053\u0074\u0072\u006f\u006b\u0065\u0052\u0075\u006c\u0069\u006e\u0067\u0073\u003a\u0020\u0025\u0064\u0020\u0073\u0074\u0072ok\u0065\u0073",len (_febfg ));
};var _badag rulingList ;for _ ,_gedf :=range _febfg {for _ ,_gcdab :=range _gedf ._dbe {if len (_gcdab ._adcb )< 2{continue ;};_gaefe :=_gcdab ._adcb [0];for _ ,_bedgb :=range _gcdab ._adcb [1:]{if _gffbc ,_efbbb :=_becae (_gaefe ,_bedgb ,_gedf .Color );
_efbbb {_badag =append (_badag ,_gffbc );};_gaefe =_bedgb ;};};};if _eagg {_a .Log .Info ("m\u0061\u006b\u0065\u0053tr\u006fk\u0065\u0052\u0075\u006c\u0069n\u0067\u0073\u003a\u0020\u0025\u0073",_badag );};return _badag ;};func (_afae *stateStack )push (_eegb *textState ){_ggdb :=*_eegb ;
*_afae =append (*_afae ,&_ggdb )};func _fecdf (_fafaf []pathSection )rulingList {_eacbg (_fafaf );if _eagg {_a .Log .Info ("\u006da\u006b\u0065\u0046\u0069l\u006c\u0052\u0075\u006c\u0069n\u0067s\u003a \u0025\u0064\u0020\u0066\u0069\u006c\u006cs",len (_fafaf ));
};var _ageg rulingList ;for _ ,_ceedc :=range _fafaf {for _ ,_gcae :=range _ceedc ._dbe {if !_gcae .isQuadrilateral (){if _eagg {_a .Log .Error ("!\u0069s\u0051\u0075\u0061\u0064\u0072\u0069\u006c\u0061t\u0065\u0072\u0061\u006c: \u0025\u0073",_gcae );};
continue ;};if _bfbba ,_ffeaa :=_gcae .makeRectRuling (_ceedc .Color );_ffeaa {_ageg =append (_ageg ,_bfbba );}else {if _dbfec {_a .Log .Error ("\u0021\u006d\u0061\u006beR\u0065\u0063\u0074\u0052\u0075\u006c\u0069\u006e\u0067\u003a\u0020\u0025\u0073",_gcae );
};};};};if _eagg {_a .Log .Info ("\u006d\u0061\u006b\u0065Fi\u006c\u006c\u0052\u0075\u006c\u0069\u006e\u0067\u0073\u003a\u0020\u0025\u0073",_ageg .String ());};return _ageg ;};

// RangeOffset returns the TextMarks in `ma` that overlap text[start:end] in the extracted text.
// These are tm: `start` <= tm.Offset + len(tm.Text) && tm.Offset < `end` where
// `start` and `end` are offsets in the extracted text.
// NOTE: TextMarks can contain multiple characters. e.g. "ffi" for the ﬃ ligature so the first and
// last elements of the returned TextMarkArray may only partially overlap text[start:end].
func (_eafce *TextMarkArray )RangeOffset (start ,end int )(*TextMarkArray ,error ){if _eafce ==nil {return nil ,_agb .New ("\u006da\u003d\u003d\u006e\u0069\u006c");};if end < start {return nil ,_gb .Errorf ("\u0065\u006e\u0064\u0020\u003c\u0020\u0073\u0074\u0061\u0072\u0074\u002e\u0020\u0052\u0061n\u0067\u0065\u004f\u0066\u0066\u0073\u0065\u0074\u0020\u006e\u006f\u0074\u0020d\u0065\u0066\u0069\u006e\u0065\u0064\u002e\u0020\u0073\u0074\u0061\u0072t=\u0025\u0064\u0020\u0065\u006e\u0064\u003d\u0025\u0064\u0020",start ,end );
};_egbc :=len (_eafce ._bcea );if _egbc ==0{return _eafce ,nil ;};if start < _eafce ._bcea [0].Offset {start =_eafce ._bcea [0].Offset ;};if end > _eafce ._bcea [_egbc -1].Offset +1{end =_eafce ._bcea [_egbc -1].Offset +1;};_efab :=_g .Search (_egbc ,func (_gfdg int )bool {return _eafce ._bcea [_gfdg ].Offset +len (_eafce ._bcea [_gfdg ].Text )-1>=start });
if !(0<=_efab &&_efab < _egbc ){_aaff :=_gb .Errorf ("\u004f\u0075\u0074\u0020\u006f\u0066\u0020\u0072\u0061\u006e\u0067\u0065\u002e\u0020\u0073\u0074\u0061\u0072\u0074\u003d%\u0064\u0020\u0069\u0053\u0074\u0061\u0072\u0074\u003d\u0025\u0064\u0020\u006c\u0065\u006e\u003d\u0025\u0064\u000a\u0009\u0066\u0069\u0072\u0073\u0074\u003d\u0025\u0076\u000a\u0009 \u006c\u0061\u0073\u0074\u003d%\u0076",start ,_efab ,_egbc ,_eafce ._bcea [0],_eafce ._bcea [_egbc -1]);
return nil ,_aaff ;};_cbcfd :=_g .Search (_egbc ,func (_ggdd int )bool {return _eafce ._bcea [_ggdd ].Offset > end -1});if !(0<=_cbcfd &&_cbcfd < _egbc ){_cfeda :=_gb .Errorf ("\u004f\u0075\u0074\u0020\u006f\u0066\u0020r\u0061\u006e\u0067e\u002e\u0020\u0065n\u0064\u003d%\u0064\u0020\u0069\u0045\u006e\u0064=\u0025d \u006c\u0065\u006e\u003d\u0025\u0064\u000a\u0009\u0066\u0069\u0072\u0073\u0074\u003d\u0025\u0076\u000a\u0009\u0020\u006c\u0061\u0073\u0074\u003d\u0025\u0076",end ,_cbcfd ,_egbc ,_eafce ._bcea [0],_eafce ._bcea [_egbc -1]);
return nil ,_cfeda ;};if _cbcfd <=_efab {return nil ,_gb .Errorf ("\u0069\u0045\u006e\u0064\u0020\u003c=\u0020\u0069\u0053\u0074\u0061\u0072\u0074\u003a\u0020\u0073\u0074\u0061\u0072\u0074\u003d\u0025\u0064\u0020\u0065\u006ed\u003d\u0025\u0064\u0020\u0069\u0053\u0074\u0061\u0072\u0074\u003d\u0025\u0064\u0020i\u0045n\u0064\u003d\u0025\u0064",start ,end ,_efab ,_cbcfd );
};return &TextMarkArray {_bcea :_eafce ._bcea [_efab :_cbcfd ]},nil ;};func _aabfc (_acef _acf .PdfRectangle )textState {return textState {_dgad :100,_ecfc :RenderModeFill ,_cggf :_acef };};func (_ddae paraList )computeEBBoxes (){if _bacf {_a .Log .Info ("\u0063o\u006dp\u0075\u0074\u0065\u0045\u0042\u0042\u006f\u0078\u0065\u0073\u003a");
};for _ ,_dggb :=range _ddae {_dggb ._dfcaa =_dggb .PdfRectangle ;};_ffdgc :=_ddae .yNeighbours (0);for _dbebg ,_edbd :=range _ddae {_aded :=_edbd ._dfcaa ;_baaa ,_ggbg :=-1.0e9,+1.0e9;for _ ,_aecfc :=range _ffdgc [_edbd ]{_cdga :=_ddae [_aecfc ]._dfcaa ;
if _cdga .Urx < _aded .Llx {_baaa =_f .Max (_baaa ,_cdga .Urx );}else if _aded .Urx < _cdga .Llx {_ggbg =_f .Min (_ggbg ,_cdga .Llx );};};for _efga ,_gdede :=range _ddae {_deeb :=_gdede ._dfcaa ;if _dbebg ==_efga ||_deeb .Ury > _aded .Lly {continue ;};
if _baaa <=_deeb .Llx &&_deeb .Llx < _aded .Llx {_aded .Llx =_deeb .Llx ;}else if _deeb .Urx <=_ggbg &&_aded .Urx < _deeb .Urx {_aded .Urx =_deeb .Urx ;};};if _bacf {_gb .Printf ("\u0025\u0034\u0064\u003a %\u0036\u002e\u0032\u0066\u2192\u0025\u0036\u002e\u0032\u0066\u0020\u0025\u0071\u000a",_dbebg ,_edbd ._dfcaa ,_aded ,_gbcgb (_edbd .text (),50));
};_edbd ._dfcaa =_aded ;};if _cbge {for _ ,_bbda :=range _ddae {_bbda .PdfRectangle =_bbda ._dfcaa ;};};};func _aecge (_dbgae map[float64 ]gridTile )[]float64 {_gefag :=make ([]float64 ,0,len (_dbgae ));for _gcabg :=range _dbgae {_gefag =append (_gefag ,_gcabg );
};_g .Float64s (_gefag );return _gefag ;};type markKind int ;func (_dddb *ruling )alignsPrimary (_edbb *ruling )bool {return _dddb ._becca ==_edbb ._becca &&_f .Abs (_dddb ._eeac -_edbb ._eeac )< _cadg *0.5;};func (_ccbe *textObject )checkOp (_ecad *_ec .ContentStreamOperation ,_ecee int ,_gebc bool )(_fcee bool ,_facf error ){if _ccbe ==nil {var _bcab []_fe .PdfObject ;
if _ecee > 0{_bcab =_ecad .Params ;if len (_bcab )> _ecee {_bcab =_bcab [:_ecee ];};};_a .Log .Debug ("\u0025\u0023q \u006f\u0070\u0065r\u0061\u006e\u0064\u0020out\u0073id\u0065\u0020\u0074\u0065\u0078\u0074\u002e p\u0061\u0072\u0061\u006d\u0073\u003d\u0025+\u0076",_ecad .Operand ,_bcab );
};if _ecee >=0{if len (_ecad .Params )!=_ecee {if _gebc {_facf =_agb .New ("\u0069n\u0063\u006f\u0072\u0072e\u0063\u0074\u0020\u0070\u0061r\u0061m\u0065t\u0065\u0072\u0020\u0063\u006f\u0075\u006et");};_a .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0025\u0023\u0071\u0020\u0073\u0068\u006f\u0075\u006c\u0064\u0020h\u0061\u0076\u0065\u0020\u0025\u0064\u0020i\u006e\u0070\u0075\u0074\u0020\u0070\u0061\u0072\u0061\u006d\u0073,\u0020\u0067\u006f\u0074\u0020\u0025\u0064\u0020\u0025\u002b\u0076",_ecad .Operand ,_ecee ,len (_ecad .Params ),_ecad .Params );
return false ,_facf ;};};return true ,nil ;};

// ExtractText processes and extracts all text data in content streams and returns as a string.
// It takes into account character encodings in the PDF file, which are decoded by
// CharcodeBytesToUnicode.
// Characters that can't be decoded are replaced with MissingCodeRune ('\ufffd' = �).
func (_eebcc *Extractor )ExtractText ()(string ,error ){_dbag ,_ ,_ ,_gcc :=_eebcc .ExtractTextWithStats ();return _dbag ,_gcc ;};func (_fdbf paraList )inTile (_bgfaf gridTile )paraList {var _aebf paraList ;for _ ,_aggca :=range _fdbf {if _bgfaf .contains (_aggca .PdfRectangle ){_aebf =append (_aebf ,_aggca );
};};if _ccdc {_gb .Printf ("\u0020 \u0020\u0069\u006e\u0054i\u006c\u0065\u003a\u0020\u0020%\u0073 \u0069n\u0073\u0069\u0064\u0065\u003d\u0025\u0064\n",_bgfaf ,len (_aebf ));for _gafb ,_dfffe :=range _aebf {_gb .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0073\u000a",_gafb ,_dfffe );
};_gb .Println ("");};return _aebf ;};func (_aggc rulingList )aligned ()bool {if len (_aggc )< 2{return false ;};_eaac :=make (map[*ruling ]int );_eaac [_aggc [0]]=0;for _ ,_aeff :=range _aggc [1:]{_gceaa :=false ;for _gcga :=range _eaac {if _aeff .gridIntersecting (_gcga ){_eaac [_gcga ]++;
_gceaa =true ;break ;};};if !_gceaa {_eaac [_aeff ]=0;};};_fceed :=0;for _ ,_fedeg :=range _eaac {if _fedeg ==0{_fceed ++;};};_cfga :=float64 (_fceed )/float64 (len (_aggc ));_ggdc :=_cfga <=1.0-_dedb ;if _eagg {_a .Log .Info ("\u0061\u006c\u0069\u0067\u006e\u0065\u0064\u003d\u0025\u0074\u0020\u0075\u006em\u0061\u0074\u0063\u0068\u0065\u0064=\u0025\u002e\u0032\u0066\u003d\u0025\u0064\u002f\u0025\u0064\u0020\u0076\u0065c\u0073\u003d\u0025\u0073",_ggdc ,_cfga ,_fceed ,len (_aggc ),_aggc .String ());
};return _ggdc ;};func _acdg (_ddcdf ,_ggea bounded )float64 {return _ddcdf .bbox ().Llx -_ggea .bbox ().Llx };func (_feda *textPara )depth ()float64 {if _feda ._ffgb {return -1.0;};if len (_feda ._ggfbe )> 0{return _feda ._ggfbe [0]._dgda ;};return _feda ._bcff .depth ();
};

// Tables returns the tables extracted from the page.
func (_cde PageText )Tables ()[]TextTable {if _ccdc {_a .Log .Info ("\u0054\u0061\u0062\u006c\u0065\u0073\u003a\u0020\u0025\u0064",len (_cde ._eddg ));};return _cde ._eddg ;};func (_cbbdd *textWord )computeText ()string {_dafb :=make ([]string ,len (_cbbdd ._eaee ));
for _caacb ,_agfd :=range _cbbdd ._eaee {_dafb [_caacb ]=_agfd ._gadb ;};return _cg .Join (_dafb ,"");};func (_dadce *wordBag )blocked (_faead *textWord )bool {if _faead .Urx < _dadce .Llx {_ddcdd :=_eceaf (_faead .PdfRectangle );_bcfd :=_gaefg (_dadce .PdfRectangle );
if _dadce ._geccb .blocks (_ddcdd ,_bcfd ){if _gbeec {_a .Log .Info ("\u0062\u006c\u006f\u0063ke\u0064\u0020\u2190\u0078\u003a\u0020\u0025\u0073\u0020\u0025\u0073",_faead ,_dadce );};return true ;};}else if _dadce .Urx < _faead .Llx {_abcg :=_eceaf (_dadce .PdfRectangle );
_bgaag :=_gaefg (_faead .PdfRectangle );if _dadce ._geccb .blocks (_abcg ,_bgaag ){if _gbeec {_a .Log .Info ("b\u006co\u0063\u006b\u0065\u0064\u0020\u0078\u2192\u0020:\u0020\u0025\u0073\u0020%s",_faead ,_dadce );};return true ;};};if _faead .Ury < _dadce .Lly {_ddeg :=_cfcd (_faead .PdfRectangle );
_gffg :=_eafff (_dadce .PdfRectangle );if _dadce ._afee .blocks (_ddeg ,_gffg ){if _gbeec {_a .Log .Info ("\u0062\u006c\u006f\u0063ke\u0064\u0020\u2190\u0079\u003a\u0020\u0025\u0073\u0020\u0025\u0073",_faead ,_dadce );};return true ;};}else if _dadce .Ury < _faead .Lly {_bgb :=_cfcd (_dadce .PdfRectangle );
_dgde :=_eafff (_faead .PdfRectangle );if _dadce ._afee .blocks (_bgb ,_dgde ){if _gbeec {_a .Log .Info ("b\u006co\u0063\u006b\u0065\u0064\u0020\u0079\u2192\u0020:\u0020\u0025\u0073\u0020%s",_faead ,_dadce );};return true ;};};return false ;};func (_edfee *textPara )isAtom ()*textTable {_gaced :=_edfee ;
_edba :=_edfee ._cdfcc ;_cfbf :=_edfee ._caaaf ;if _edba .taken ()||_cfbf .taken (){return nil ;};_cefcd :=_edba ._caaaf ;if _cefcd .taken ()||_cefcd !=_cfbf ._cdfcc {return nil ;};return _cfddg (_gaced ,_edba ,_cfbf ,_cefcd );};var _ge =[]string {"\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0053","\u0042","\u0053","\u0057\u0053","\u0042","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042","\u0042","\u0042","\u0053","\u0057\u0053","\u004f\u004e","\u004f\u004e","\u0045\u0054","\u0045\u0054","\u0045\u0054","\u004f\u004e","\u004f\u004e","\u004f\u004e","\u004f\u004e","\u004f\u004e","\u0045\u0053","\u0043\u0053","\u0045\u0053","\u0043\u0053","\u0043\u0053","\u0045\u004e","\u0045\u004e","\u0045\u004e","\u0045\u004e","\u0045\u004e","\u0045\u004e","\u0045\u004e","\u0045\u004e","\u0045\u004e","\u0045\u004e","\u0043\u0053","\u004f\u004e","\u004f\u004e","\u004f\u004e","\u004f\u004e","\u004f\u004e","\u004f\u004e","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004f\u004e","\u004f\u004e","\u004f\u004e","\u004f\u004e","\u004f\u004e","\u004f\u004e","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004f\u004e","\u004f\u004e","\u004f\u004e","\u004f\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0043\u0053","\u004f\u004e","\u0045\u0054","\u0045\u0054","\u0045\u0054","\u0045\u0054","\u004f\u004e","\u004f\u004e","\u004f\u004e","\u004f\u004e","\u004c","\u004f\u004e","\u004f\u004e","\u0042\u004e","\u004f\u004e","\u004f\u004e","\u0045\u0054","\u0045\u0054","\u0045\u004e","\u0045\u004e","\u004f\u004e","\u004c","\u004f\u004e","\u004f\u004e","\u004f\u004e","\u0045\u004e","\u004c","\u004f\u004e","\u004f\u004e","\u004f\u004e","\u004f\u004e","\u004f\u004e","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004f\u004e","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004f\u004e","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c"};
func _bddf (_cgbf ,_adgf _aeg .Point )rulingKind {_dbge :=_f .Abs (_cgbf .X -_adgf .X );_geeb :=_f .Abs (_cgbf .Y -_adgf .Y );return _agdec (_dbge ,_geeb ,_afcg );};

// ToTextMark returns the public view of `tm`.
func (_bded *textMark )ToTextMark ()TextMark {return TextMark {Text :_bded ._gadb ,Original :_bded ._fdaef ,BBox :_bded ._bfbe ,Font :_bded ._dfdga ,FontSize :_bded ._gfgd ,FillColor :_bded ._fcecb ,StrokeColor :_bded ._aedf ,Orientation :_bded ._dgff ,DirectObject :_bded ._dcga ,ObjString :_bded ._dgcd ,Tw :_bded .Tw ,Th :_bded .Th ,Tc :_bded ._daad ,Index :_bded ._fgbaa };
};func (_aeec *textWord )bbox ()_acf .PdfRectangle {return _aeec .PdfRectangle };func (_ggge *ruling )equals (_bgggd *ruling )bool {return _ggge ._becca ==_bgggd ._becca &&_ffbcb (_ggge ._eeac ,_bgggd ._eeac )&&_ffbcb (_ggge ._feded ,_bgggd ._feded )&&_ffbcb (_ggge ._bbebb ,_bgggd ._bbebb );
};func (_cddgd *shapesState )addPoint (_bagd ,_ebcb float64 ){_cdef :=_cddgd .establishSubpath ();_eccb :=_cddgd .devicePoint (_bagd ,_ebcb );if _cdef ==nil {_cddgd ._dec =true ;_cddgd ._fgba =_eccb ;}else {_cdef .add (_eccb );};};

// ExtractStrokePaths processes and extracts all stroke paths in content streams.
func (_cbdc *Extractor )ExtractStrokePaths ()([]StrokePath ,error ){_gbbg ,_ ,_ ,_gecd :=_cbdc .ExtractPageText ();if _gecd !=nil {return nil ,_gecd ;};_dgc :=[]StrokePath {};for _ ,_cbgg :=range _gbbg ._fege {_caef :=StrokePath {Color :_cbgg .Color ,Points :[]_aeg .Point {}};
for _ ,_ecfe :=range _cbgg ._dbe {_caef .Points =append (_caef .Points ,_ecfe ._adcb ...);};_dgc =append (_dgc ,_caef );};return _dgc ,nil ;};func (_ebfdc paraList )sortReadingOrder (){_a .Log .Trace ("\u0073\u006fr\u0074\u0052\u0065\u0061\u0064i\u006e\u0067\u004f\u0072\u0064e\u0072\u003a\u0020\u0070\u0061\u0072\u0061\u0073\u003d\u0025\u0064\u0020\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u0078\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d",len (_ebfdc ));
if len (_ebfdc )<=1{return ;};_ebfdc .computeEBBoxes ();_g .Slice (_ebfdc ,func (_bcgca ,_afde int )bool {return _fgded (_ebfdc [_bcgca ],_ebfdc [_afde ])<=0});};

// TextMark represents extracted text on a page with information regarding both textual content,
// formatting (font and size) and positioning.
// It is the smallest unit of text on a PDF page, typically a single character.
//
// getBBox() in test_text.go shows how to compute bounding boxes of substrings of extracted text.
// The following code extracts the text on PDF page `page` into `text` then finds the bounding box
// `bbox` of substring `term` in `text`.
//
//	ex, _ := New(page)
//	// handle errors
//	pageText, _, _, err := ex.ExtractPageText()
//	// handle errors
//	text := pageText.Text()
//	textMarks := pageText.Marks()
//
//		start := strings.Index(text, term)
//	 end := start + len(term)
//	 spanMarks, err := textMarks.RangeOffset(start, end)
//	 // handle errors
//	 bbox, ok := spanMarks.BBox()
//	 // handle errors
type TextMark struct{

// Text is the extracted text.
Text string ;

// Original is the text in the PDF. It has not been decoded like `Text`.
Original string ;

// BBox is the bounding box of the text.
BBox _acf .PdfRectangle ;

// Font is the font the text was drawn with.
Font *_acf .PdfFont ;

// FontSize is the font size the text was drawn with.
FontSize float64 ;

// Offset is the offset of the start of TextMark.Text in the extracted text. If you do this
//   text, textMarks := pageText.Text(), pageText.Marks()
//   marks := textMarks.Elements()
// then marks[i].Offset is the offset of marks[i].Text in text.
Offset int ;

// Meta is set true for spaces and line breaks that we insert in the extracted text. We insert
// spaces (line breaks) when we see characters that are over a threshold horizontal (vertical)
//  distance  apart. See wordJoiner (lineJoiner) in PageText.computeViews().
Meta bool ;

// FillColor is the fill color of the text.
// The color is nil for spaces and line breaks (i.e. the Meta field is true).
FillColor _fd .Color ;

// StrokeColor is the stroke color of the text.
// The color is nil for spaces and line breaks (i.e. the Meta field is true).
StrokeColor _fd .Color ;

// Orientation is the text orientation
Orientation int ;

// DirectObject is the underlying PdfObject (Text Object) that represents the visible texts. This is introduced to get
// a simple access to the TextObject in case editing or replacment of some text is needed. E.g during redaction.
DirectObject _fe .PdfObject ;

// ObjString is a decoded string operand of a text-showing operator. It has the same value as `Text` attribute except
// when many glyphs are represented with the same Text Object that contains multiple length string operand in which case
// ObjString spans more than one character string that falls in different TextMark objects.
ObjString []string ;Tw float64 ;Th float64 ;Tc float64 ;Index int ;_addf bool ;_fddcb *TextTable ;};func (_badda rulingList )blocks (_caba ,_dddda *ruling )bool {if _caba ._feded > _dddda ._bbebb ||_dddda ._feded > _caba ._bbebb {return false ;};_cecf :=_f .Max (_caba ._feded ,_dddda ._feded );
_cdgg :=_f .Min (_caba ._bbebb ,_dddda ._bbebb );if _caba ._eeac > _dddda ._eeac {_caba ,_dddda =_dddda ,_caba ;};for _ ,_fgdga :=range _badda {if _caba ._eeac <=_fgdga ._eeac +_cadg &&_fgdga ._eeac <=_dddda ._eeac +_cadg &&_fgdga ._feded <=_cdgg &&_cecf <=_fgdga ._bbebb {return true ;
};};return false ;};func (_bbfbe *textLine )bbox ()_acf .PdfRectangle {return _bbfbe .PdfRectangle };

// String returns a human readable description of `s`.
func (_cbca intSet )String ()string {var _gfaf []int ;for _efbdf :=range _cbca {if _cbca .has (_efbdf ){_gfaf =append (_gfaf ,_efbdf );};};_g .Ints (_gfaf );return _gb .Sprintf ("\u0025\u002b\u0076",_gfaf );};

// ToText returns the page text as a single string.
// Deprecated: This function is deprecated and will be removed in a future major version. Please use
// Text() instead.
func (_bcg PageText )ToText ()string {return _bcg .Text ()};func (_bcaf *textPara )toCellTextMarks (_aaccf *int )[]TextMark {var _eece []TextMark ;for _cbdcb ,_dacb :=range _bcaf ._ggfbe {_gfgc :=_dacb .toTextMarks (_aaccf );_cdcd :=_gdeg &&_dacb .endsInHyphen ()&&_cbdcb !=len (_bcaf ._ggfbe )-1;
if _cdcd {_gfgc =_gagef (_gfgc ,_aaccf );};_eece =append (_eece ,_gfgc ...);if !(_cdcd ||_cbdcb ==len (_bcaf ._ggfbe )-1){_eece =_caacf (_eece ,_aaccf ,_bdce (_dacb ._dgda ,_bcaf ._ggfbe [_cbdcb +1]._dgda ));};};return _eece ;};func _gecg (_eeaa *textWord ,_fdbg float64 ,_abebg ,_effc rulingList )*wordBag {_aefgg :=_deaf (_eeaa ._dbbagg );
_dfgad :=[]*textWord {_eeaa };_eegf :=wordBag {_ceea :map[int ][]*textWord {_aefgg :_dfgad },PdfRectangle :_eeaa .PdfRectangle ,_aacag :_eeaa ._facbbf ,_gefb :_fdbg ,_geccb :_abebg ,_afee :_effc };return &_eegf ;};func (_ccef *textObject )nextLine (){_ccef .moveLP (0,-_ccef ._eea ._agbg )};
func (_bdbdc rulingList )splitSec ()[]rulingList {_g .Slice (_bdbdc ,func (_gbadd ,_gedag int )bool {_daegb ,_afad :=_bdbdc [_gbadd ],_bdbdc [_gedag ];if _daegb ._feded !=_afad ._feded {return _daegb ._feded < _afad ._feded ;};return _daegb ._bbebb < _afad ._bbebb ;
});_fbdff :=make (map[*ruling ]struct{},len (_bdbdc ));_aabgc :=func (_ccfgb *ruling )rulingList {_ccag :=rulingList {_ccfgb };_fbdff [_ccfgb ]=struct{}{};for _ ,_cffgd :=range _bdbdc {if _ ,_adge :=_fbdff [_cffgd ];_adge {continue ;};for _ ,_cagad :=range _ccag {if _cffgd .alignsSec (_cagad ){_ccag =append (_ccag ,_cffgd );
_fbdff [_cffgd ]=struct{}{};break ;};};};return _ccag ;};_eebbd :=[]rulingList {_aabgc (_bdbdc [0])};for _ ,_ggff :=range _bdbdc [1:]{if _ ,_gfge :=_fbdff [_ggff ];_gfge {continue ;};_eebbd =append (_eebbd ,_aabgc (_ggff ));};return _eebbd ;};func _abfff (_bcfg _fe .PdfObject ,_gbged _fd .Color )(_ce .Image ,error ){_gffdb ,_gfdab :=_fe .GetStream (_bcfg );
if !_gfdab {return nil ,nil ;};_cfab ,_ecfb :=_acf .NewXObjectImageFromStream (_gffdb );if _ecfb !=nil {return nil ,_ecfb ;};_cbceb ,_ecfb :=_cfab .ToImage ();if _ecfb !=nil {return nil ,_ecfb ;};return _bddbb (_cbceb ,_gbged ),nil ;};func (_fbga *wordBag )highestWord (_gead int ,_gace ,_befa float64 )*textWord {for _ ,_dabad :=range _fbga ._ceea [_gead ]{if _gace <=_dabad ._dbbagg &&_dabad ._dbbagg <=_befa {return _dabad ;
};};return nil ;};func (_caage *subpath )makeRectRuling (_afefe _fd .Color )(*ruling ,bool ){if _dbfec {_a .Log .Info ("\u006d\u0061\u006beR\u0065\u0063\u0074\u0052\u0075\u006c\u0069\u006e\u0067\u003a\u0020\u0070\u0061\u0074\u0068\u003d\u0025\u0076",_caage );
};_babce :=_caage ._adcb [:4];_eeaf :=make (map[int ]rulingKind ,len (_babce ));for _ffaeg ,_ebeeb :=range _babce {_cfefa :=_caage ._adcb [(_ffaeg +1)%4];_eeaf [_ffaeg ]=_bddf (_ebeeb ,_cfefa );if _dbfec {_gb .Printf ("\u0025\u0034\u0064: \u0025\u0073\u0020\u003d\u0020\u0025\u0036\u002e\u0032\u0066\u0020\u002d\u0020\u0025\u0036\u002e\u0032\u0066",_ffaeg ,_eeaf [_ffaeg ],_ebeeb ,_cfefa );
};};if _dbfec {_gb .Printf ("\u0020\u0020\u0020\u006b\u0069\u006e\u0064\u0073\u003d\u0025\u002b\u0076\u000a",_eeaf );};var _gebcc ,_bgad []int ;for _gcegb ,_cgbca :=range _eeaf {switch _cgbca {case _bgbc :_bgad =append (_bgad ,_gcegb );case _ffgdf :_gebcc =append (_gebcc ,_gcegb );
};};if _dbfec {_gb .Printf ("\u0020\u0020 \u0068\u006f\u0072z\u0073\u003d\u0025\u0064\u0020\u0025\u002b\u0076\u000a",len (_bgad ),_bgad );_gb .Printf ("\u0020\u0020 \u0076\u0065\u0072t\u0073\u003d\u0025\u0064\u0020\u0025\u002b\u0076\u000a",len (_gebcc ),_gebcc );
};_bdgf :=(len (_bgad )==2&&len (_gebcc )==2)||(len (_bgad )==2&&len (_gebcc )==0&&_bff (_babce [_bgad [0]],_babce [_bgad [1]]))||(len (_gebcc )==2&&len (_bgad )==0&&_gfeb (_babce [_gebcc [0]],_babce [_gebcc [1]]));if _dbfec {_gb .Printf (" \u0020\u0020\u0068\u006f\u0072\u007as\u003d\u0025\u0064\u0020\u0076\u0065\u0072\u0074\u0073=\u0025\u0064\u0020o\u006b=\u0025\u0074\u000a",len (_bgad ),len (_gebcc ),_bdgf );
};if !_bdgf {if _dbfec {_a .Log .Error ("\u0021!\u006d\u0061\u006b\u0065R\u0065\u0063\u0074\u0052\u0075l\u0069n\u0067:\u0020\u0070\u0061\u0074\u0068\u003d\u0025v",_caage );_gb .Printf (" \u0020\u0020\u0068\u006f\u0072\u007as\u003d\u0025\u0064\u0020\u0076\u0065\u0072\u0074\u0073=\u0025\u0064\u0020o\u006b=\u0025\u0074\u000a",len (_bgad ),len (_gebcc ),_bdgf );
};return &ruling {},false ;};if len (_gebcc )==0{for _cbgff ,_dedbf :=range _eeaf {if _dedbf !=_bgbc {_gebcc =append (_gebcc ,_cbgff );};};};if len (_bgad )==0{for _aaeaa ,_bfaacb :=range _eeaf {if _bfaacb !=_ffgdf {_bgad =append (_bgad ,_aaeaa );};};};
if _dbfec {_a .Log .Info ("\u006da\u006b\u0065R\u0065\u0063\u0074\u0052u\u006c\u0069\u006eg\u003a\u0020\u0068\u006f\u0072\u007a\u0073\u003d\u0025d \u0076\u0065\u0072t\u0073\u003d%\u0064\u0020\u0070\u006f\u0069\u006et\u0073\u003d%\u0064\u000a"+"\u0009\u0020\u0068o\u0072\u007a\u0073\u003d\u0025\u002b\u0076\u000a"+"\u0009\u0020\u0076e\u0072\u0074\u0073\u003d\u0025\u002b\u0076\u000a"+"\t\u0070\u006f\u0069\u006e\u0074\u0073\u003d\u0025\u002b\u0076",len (_bgad ),len (_gebcc ),len (_babce ),_bgad ,_gebcc ,_babce );
};var _eceafe ,_ecdf ,_gdbgc ,_gffcg _aeg .Point ;if _babce [_bgad [0]].Y > _babce [_bgad [1]].Y {_gdbgc ,_gffcg =_babce [_bgad [0]],_babce [_bgad [1]];}else {_gdbgc ,_gffcg =_babce [_bgad [1]],_babce [_bgad [0]];};if _babce [_gebcc [0]].X > _babce [_gebcc [1]].X {_eceafe ,_ecdf =_babce [_gebcc [0]],_babce [_gebcc [1]];
}else {_eceafe ,_ecdf =_babce [_gebcc [1]],_babce [_gebcc [0]];};_babd :=_acf .PdfRectangle {Llx :_eceafe .X ,Urx :_ecdf .X ,Lly :_gffcg .Y ,Ury :_gdbgc .Y };if _babd .Llx > _babd .Urx {_babd .Llx ,_babd .Urx =_babd .Urx ,_babd .Llx ;};if _babd .Lly > _babd .Ury {_babd .Lly ,_babd .Ury =_babd .Ury ,_babd .Lly ;
};_eaffg :=rectRuling {PdfRectangle :_babd ,_dffec :_ebedf (_babd ),Color :_afefe };if _eaffg ._dffec ==_fgdf {if _dbfec {_a .Log .Error ("\u006da\u006b\u0065\u0052\u0065\u0063\u0074\u0052\u0075\u006c\u0069\u006eg\u003a\u0020\u006b\u0069\u006e\u0064\u003d\u006e\u0069\u006c");
};return nil ,false ;};_fafg ,_cgab :=_eaffg .asRuling ();if !_cgab {if _dbfec {_a .Log .Error ("\u006da\u006b\u0065\u0052\u0065c\u0074\u0052\u0075\u006c\u0069n\u0067:\u0020!\u0069\u0073\u0052\u0075\u006c\u0069\u006eg");};return nil ,false ;};if _eagg {_gb .Printf ("\u0020\u0020\u0020\u0072\u003d\u0025\u0073\u000a",_fafg .String ());
};return _fafg ,true ;};

// String returns a string describing the current state of the textState stack.
func (_efce *stateStack )String ()string {_dcbc :=[]string {_gb .Sprintf ("\u002d\u002d\u002d\u002d f\u006f\u006e\u0074\u0020\u0073\u0074\u0061\u0063\u006b\u003a\u0020\u0025\u0064",len (*_efce ))};for _cdbb ,_ebde :=range *_efce {_gbg :="\u003c\u006e\u0069l\u003e";
if _ebde !=nil {_gbg =_ebde .String ();};_dcbc =append (_dcbc ,_gb .Sprintf ("\u0009\u0025\u0032\u0064\u003a\u0020\u0025\u0073",_cdbb ,_gbg ));};return _cg .Join (_dcbc ,"\u000a");};func _cage (_ecea ,_fged _acf .PdfRectangle )bool {return _ecea .Lly <=_fged .Ury &&_fged .Lly <=_ecea .Ury ;
};

// String returns a description of `b`.
func (_faade *wordBag )String ()string {var _edfe []string ;for _ ,_bcgc :=range _faade .depthIndexes (){_adcgf :=_faade ._ceea [_bcgc ];for _ ,_becd :=range _adcgf {_edfe =append (_edfe ,_becd ._cdffa );};};return _gb .Sprintf ("\u0025.\u0032\u0066\u0020\u0066\u006f\u006e\u0074\u0073\u0069\u007a\u0065=\u0025\u002e\u0032\u0066\u0020\u0025\u0064\u0020\u0025\u0071",_faade .PdfRectangle ,_faade ._aacag ,len (_edfe ),_edfe );
};func (_eac *imageExtractContext )extractContentStreamImages (_gdf string ,_acdf *_acf .PdfPageResources )error {_bfb :=_ec .NewContentStreamParser (_gdf );_bcee ,_ege :=_bfb .Parse ();if _ege !=nil {return _ege ;};if _eac ._afc ==nil {_eac ._afc =map[*_fe .PdfObjectStream ]*cachedImage {};
};if _eac ._gcda ==nil {_eac ._gcda =&ImageExtractOptions {};};_ffd :=_ec .NewContentStreamProcessor (*_bcee );_ffd .AddHandler (_ec .HandlerConditionEnumAllOperands ,"",_eac .processOperand );return _ffd .Process (_acdf );};func _fccd (_feace ,_egga _acf .PdfRectangle )_acf .PdfRectangle {return _acf .PdfRectangle {Llx :_f .Min (_feace .Llx ,_egga .Llx ),Lly :_f .Min (_feace .Lly ,_egga .Lly ),Urx :_f .Max (_feace .Urx ,_egga .Urx ),Ury :_f .Max (_feace .Ury ,_egga .Ury )};
};func _eda (_gfb []*TextMarkArray ,_ebe ,_cabc string )(string ,error ){_efa :=0;for _ ,_fcbdg :=range _gfb {_ebd :=_fcbdg ._bcea [0].DirectObject ;if _ebd ==nil {continue ;};_ega :=_ebd .String ();if len (_ega )> 1{_gecc :=_ddc (_fcbdg ,&_ebe ,&_efa ,_cabc );
if _gecc !=nil {return _ebe ,_gecc ;};}else if len (_ega )==1{_egd :=_cee (_fcbdg ,&_ebe ,&_efa ,_cabc );if _egd !=nil {return _ebe ,_egd ;};};};return _ebe ,nil ;};func (_babbd *wordBag )text ()string {_gfae :=_babbd .allWords ();_aecf :=make ([]string ,len (_gfae ));
for _gged ,_aafg :=range _gfae {_aecf [_gged ]=_aafg ._cdffa ;};return _cg .Join (_aecf ,"\u0020");};func _gfgf (_ggded []compositeCell )[]float64 {var _fcba []*textLine ;_adgbe :=0;for _ ,_eeaff :=range _ggded {_adgbe +=len (_eeaff .paraList );_fcba =append (_fcba ,_eeaff .lines ()...);
};_g .Slice (_fcba ,func (_baedg ,_agdga int )bool {_ccagd ,_agadc :=_fcba [_baedg ],_fcba [_agdga ];_fega ,_ebfcb :=_ccagd ._dgda ,_agadc ._dgda ;if !_edfea (_fega -_ebfcb ){return _fega < _ebfcb ;};return _ccagd .Llx < _agadc .Llx ;});if _ccdc {_gb .Printf ("\u0020\u0020\u0020 r\u006f\u0077\u0042\u006f\u0072\u0064\u0065\u0072\u0073:\u0020%\u0064 \u0070a\u0072\u0061\u0073\u0020\u0025\u0064\u0020\u006c\u0069\u006e\u0065\u0073\u000a",_adgbe ,len (_fcba ));
for _ecfcg ,_cead :=range _fcba {_gb .Printf ("\u0025\u0038\u0064\u003a\u0020\u0025\u0073\u000a",_ecfcg ,_cead );};};var _befg []float64 ;_cdgga :=_fcba [0];var _fefab [][]*textLine ;_cfdca :=[]*textLine {_cdgga };for _dbbag ,_dfad :=range _fcba [1:]{if _dfad .Ury < _cdgga .Lly {_gbdg :=0.5*(_dfad .Ury +_cdgga .Lly );
if _ccdc {_gb .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0036\u002e\u0032\u0066\u0020\u003c\u0020\u0025\u0036.\u0032f\u0020\u0062\u006f\u0072\u0064\u0065\u0072\u003d\u0025\u0036\u002e\u0032\u0066\u000a"+"\u0009\u0020\u0071\u003d\u0025\u0073\u000a\u0009\u0020p\u003d\u0025\u0073\u000a",_dbbag ,_dfad .Ury ,_cdgga .Lly ,_gbdg ,_cdgga ,_dfad );
};_befg =append (_befg ,_gbdg );_fefab =append (_fefab ,_cfdca );_cfdca =nil ;};_cfdca =append (_cfdca ,_dfad );if _dfad .Lly < _cdgga .Lly {_cdgga =_dfad ;};};if len (_cfdca )> 0{_fefab =append (_fefab ,_cfdca );};if _ccdc {_gb .Printf (" \u0020\u0020\u0020\u0020\u0020\u0020 \u0072\u006f\u0077\u0043\u006f\u0072\u0072\u0069\u0064o\u0072\u0073\u003d%\u0036.\u0032\u0066\u000a",_befg );
};if _ccdc {_a .Log .Info ("\u0072\u006f\u0077\u003d\u0025\u0064",len (_ggded ));for _gcggf ,_fccca :=range _ggded {_gb .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0073\u000a",_gcggf ,_fccca );};_a .Log .Info ("\u0067r\u006f\u0075\u0070\u0073\u003d\u0025d",len (_fefab ));
for _fagf ,_daag :=range _fefab {_gb .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0064\u000a",_fagf ,len (_daag ));for _gbbfe ,_aaffc :=range _daag {_gb .Printf ("\u0025\u0038\u0064\u003a\u0020\u0025\u0073\u000a",_gbbfe ,_aaffc );};};};_fceca :=true ;
for _cbag ,_gcgfa :=range _fefab {_gbbeb :=true ;for _agdbfd ,_ccedd :=range _ggded {if _ccdc {_gb .Printf ("\u0020\u0020\u0020\u007e\u007e\u007e\u0067\u0072\u006f\u0075\u0070\u0020\u0025\u0064\u0020\u006f\u0066\u0020\u0025\u0064\u0020\u0063\u0065\u006cl\u0020\u0025\u0064\u0020\u006ff\u0020\u0025d\u0020\u0025\u0073\u000a",_cbag ,len (_fefab ),_agdbfd ,len (_ggded ),_ccedd );
};if !_ccedd .hasLines (_gcgfa ){if _ccdc {_gb .Printf ("\u0020\u0020\u0020\u0021\u0021\u0021\u0067\u0072\u006f\u0075\u0070\u0020\u0025d\u0020\u006f\u0066\u0020\u0025\u0064 \u0063\u0065\u006c\u006c\u0020\u0025\u0064\u0020\u006f\u0066\u0020\u0025\u0064 \u004f\u0055\u0054\u000a",_cbag ,len (_fefab ),_agdbfd ,len (_ggded ));
};_gbbeb =false ;break ;};};if !_gbbeb {_fceca =false ;break ;};};if !_fceca {if _ccdc {_a .Log .Info ("\u0072\u006f\u0077\u0020\u0063o\u0072\u0072\u0069\u0064\u006f\u0072\u0073\u0020\u0064\u006f\u006e\u0027\u0074 \u0073\u0070\u0061\u006e\u0020\u0061\u006c\u006c\u0020\u0063\u0065\u006c\u006c\u0073\u0020\u0069\u006e\u0020\u0072\u006f\u0077\u002e\u0020\u0069\u0067\u006e\u006f\u0072\u0069\u006eg");
};_befg =nil ;};if _ccdc &&_befg !=nil {_gb .Printf ("\u0020\u0020\u0020\u0020\u0020\u0020\u0020\u0020\u002a\u002a*\u0072\u006f\u0077\u0043\u006f\u0072\u0072i\u0064\u006f\u0072\u0073\u003d\u0025\u0036\u002e\u0032\u0066\u000a",_befg );};return _befg ;};


// BBox returns the smallest axis-aligned rectangle that encloses all the TextMarks in `ma`.
func (_ffba *TextMarkArray )BBox ()(_acf .PdfRectangle ,bool ){var _aeaa _acf .PdfRectangle ;_aaege :=false ;for _ ,_eba :=range _ffba ._bcea {if _eba .Meta ||_edcec (_eba .Text ){continue ;};if _aaege {_aeaa =_fccd (_aeaa ,_eba .BBox );}else {_aeaa =_eba .BBox ;
_aaege =true ;};};return _aeaa ,_aaege ;};

// Append appends `mark` to the mark array.
func (_ffb *TextMarkArray )Append (mark TextMark ){_ffb ._bcea =append (_ffb ._bcea ,mark )};func _gfgcb (_ecbbg map[int ][]float64 )[]int {_decff :=make ([]int ,len (_ecbbg ));_fgdee :=0;for _gggg :=range _ecbbg {_decff [_fgdee ]=_gggg ;_fgdee ++;};_g .Ints (_decff );
return _decff ;};

// String returns a description of `w`.
func (_afdec *textWord )String ()string {return _gb .Sprintf ("\u0025\u002e2\u0066\u0020\u0025\u0036\u002e\u0032\u0066\u0020\u0066\u006f\u006e\u0074\u0073\u0069\u007a\u0065\u003d\u0025\u002e\u0032\u0066\u0020\"%\u0073\u0022",_afdec ._dbbagg ,_afdec .PdfRectangle ,_afdec ._facbbf ,_afdec ._cdffa );
};type textObject struct{_ccgf *Extractor ;_accb *_acf .PdfPageResources ;_dbc _ec .GraphicsState ;_eea *textState ;_dae *stateStack ;_fcda _aeg .Matrix ;_fgeb _aeg .Matrix ;_cggfb []*textMark ;_fdabb bool ;};

// String returns a description of `t`.
func (_cfgdf *textTable )String ()string {return _gb .Sprintf ("\u0025\u0064\u0020\u0078\u0020\u0025\u0064\u0020\u0025\u0074",_cfgdf ._bdea ,_cfgdf ._acdga ,_cfgdf ._fgae );};func _dadfb (_acbdg []*textLine )[]*textLine {_agdge :=[]*textLine {};for _ ,_baba :=range _acbdg {_bgdgb :=_baba .text ();
_edca :=_dffeb .Find ([]byte (_bgdgb ));if _edca !=nil {_agdge =append (_agdge ,_baba );};};return _agdge ;};func (_abgag rulingList )isActualGrid ()(rulingList ,bool ){_cfegf ,_eabd :=_abgag .augmentGrid ();if !(len (_cfegf )>=_ageb +1&&len (_eabd )>=_aaeb +1){if _eagg {_a .Log .Info ("\u0069s\u0041\u0063t\u0075\u0061\u006c\u0047r\u0069\u0064\u003a \u004e\u006f\u0074\u0020\u0061\u006c\u0069\u0067\u006eed\u002e\u0020\u0025d\u0020\u0078 \u0025\u0064\u0020\u003c\u0020\u0025d\u0020\u0078 \u0025\u0064",len (_cfegf ),len (_eabd ),_ageb +1,_aaeb +1);
};return nil ,false ;};if _eagg {_a .Log .Info ("\u0069\u0073\u0041\u0063\u0074\u0075a\u006c\u0047\u0072\u0069\u0064\u003a\u0020\u0025\u0073\u0020\u003a\u0020\u0025t\u0020\u0026\u0020\u0025\u0074\u0020\u2192 \u0025\u0074",_abgag ,len (_cfegf )>=2,len (_eabd )>=2,len (_cfegf )>=2&&len (_eabd )>=2);
for _fegb ,_eccbf :=range _abgag {_gb .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0076\u000a",_fegb ,_eccbf );};};if _fbgb {_deagg ,_dbba :=_cfegf [0],_cfegf [len (_cfegf )-1];_bfde ,_daef :=_eabd [0],_eabd [len (_eabd )-1];if !(_geaed (_deagg ._eeac -_bfde ._feded )&&_geaed (_dbba ._eeac -_bfde ._bbebb )&&_geaed (_bfde ._eeac -_deagg ._bbebb )&&_geaed (_daef ._eeac -_deagg ._feded )){if _eagg {_a .Log .Info ("\u0069\u0073\u0041\u0063\u0074\u0075\u0061l\u0047\u0072\u0069d\u003a\u0020\u0020N\u006f\u0074 \u0061\u006c\u0069\u0067\u006e\u0065d\u002e\n\t\u0076\u0030\u003d\u0025\u0073\u000a\u0009\u0076\u0031\u003d\u0025\u0073\u000a\u0009\u0068\u0030\u003d\u0025\u0073\u000a\u0009\u0068\u0031\u003d\u0025\u0073",_deagg ,_dbba ,_bfde ,_daef );
};return nil ,false ;};}else {if !_cfegf .aligned (){if _dgea {_a .Log .Info ("i\u0073\u0041\u0063\u0074\u0075\u0061l\u0047\u0072\u0069\u0064\u003a\u0020N\u006f\u0074\u0020\u0061\u006c\u0069\u0067n\u0065\u0064\u0020\u0076\u0065\u0072\u0074\u0073\u002e\u0020%\u0064",len (_cfegf ));
};return nil ,false ;};if !_eabd .aligned (){if _eagg {_a .Log .Info ("i\u0073\u0041\u0063\u0074\u0075\u0061l\u0047\u0072\u0069\u0064\u003a\u0020N\u006f\u0074\u0020\u0061\u006c\u0069\u0067n\u0065\u0064\u0020\u0068\u006f\u0072\u007a\u0073\u002e\u0020%\u0064",len (_eabd ));
};return nil ,false ;};};_dabc :=append (_cfegf ,_eabd ...);return _dabc ,true ;};func (_facfbb paraList )addNeighbours (){_agcd :=func (_gdabd []int ,_ffaag *textPara )([]*textPara ,[]*textPara ){_dabb :=make ([]*textPara ,0,len (_gdabd )-1);_cgebg :=make ([]*textPara ,0,len (_gdabd )-1);
for _ ,_dbgb :=range _gdabd {_eaged :=_facfbb [_dbgb ];if _eaged .Urx <=_ffaag .Llx {_dabb =append (_dabb ,_eaged );}else if _eaged .Llx >=_ffaag .Urx {_cgebg =append (_cgebg ,_eaged );};};return _dabb ,_cgebg ;};_acafd :=func (_aebbf []int ,_bgfcg *textPara )([]*textPara ,[]*textPara ){_bgab :=make ([]*textPara ,0,len (_aebbf )-1);
_aceb :=make ([]*textPara ,0,len (_aebbf )-1);for _ ,_ecbfd :=range _aebbf {_accg :=_facfbb [_ecbfd ];if _accg .Ury <=_bgfcg .Lly {_aceb =append (_aceb ,_accg );}else if _accg .Lly >=_bgfcg .Ury {_bgab =append (_bgab ,_accg );};};return _bgab ,_aceb ;};
_bbbag :=_facfbb .yNeighbours (_cbad );for _ ,_cegf :=range _facfbb {_eafdf :=_bbbag [_cegf ];if len (_eafdf )==0{continue ;};_deade ,_aaec :=_agcd (_eafdf ,_cegf );if len (_deade )==0&&len (_aaec )==0{continue ;};if len (_deade )> 0{_eadd :=_deade [0];
for _ ,_bdeec :=range _deade [1:]{if _bdeec .Urx >=_eadd .Urx {_eadd =_bdeec ;};};for _ ,_gecee :=range _deade {if _gecee !=_eadd &&_gecee .Urx > _eadd .Llx {_eadd =nil ;break ;};};if _eadd !=nil &&_cage (_cegf .PdfRectangle ,_eadd .PdfRectangle ){_cegf ._eefa =_eadd ;
};};if len (_aaec )> 0{_dcgg :=_aaec [0];for _ ,_afdg :=range _aaec [1:]{if _afdg .Llx <=_dcgg .Llx {_dcgg =_afdg ;};};for _ ,_eadgd :=range _aaec {if _eadgd !=_dcgg &&_eadgd .Llx < _dcgg .Urx {_dcgg =nil ;break ;};};if _dcgg !=nil &&_cage (_cegf .PdfRectangle ,_dcgg .PdfRectangle ){_cegf ._cdfcc =_dcgg ;
};};};_bbbag =_facfbb .xNeighbours (_bdee );for _ ,_cbega :=range _facfbb {_ebaeb :=_bbbag [_cbega ];if len (_ebaeb )==0{continue ;};_ebac ,_ecdbd :=_acafd (_ebaeb ,_cbega );if len (_ebac )==0&&len (_ecdbd )==0{continue ;};if len (_ecdbd )> 0{_bbcd :=_ecdbd [0];
for _ ,_cacc :=range _ecdbd [1:]{if _cacc .Ury >=_bbcd .Ury {_bbcd =_cacc ;};};for _ ,_fcaf :=range _ecdbd {if _fcaf !=_bbcd &&_fcaf .Ury > _bbcd .Lly {_bbcd =nil ;break ;};};if _bbcd !=nil &&_bgeb (_cbega .PdfRectangle ,_bbcd .PdfRectangle ){_cbega ._caaaf =_bbcd ;
};};if len (_ebac )> 0{_cbff :=_ebac [0];for _ ,_afea :=range _ebac [1:]{if _afea .Lly <=_cbff .Lly {_cbff =_afea ;};};for _ ,_bfbbe :=range _ebac {if _bfbbe !=_cbff &&_bfbbe .Lly < _cbff .Ury {_cbff =nil ;break ;};};if _cbff !=nil &&_bgeb (_cbega .PdfRectangle ,_cbff .PdfRectangle ){_cbega ._gabf =_cbff ;
};};};for _ ,_bbffd :=range _facfbb {if _bbffd ._eefa !=nil &&_bbffd ._eefa ._cdfcc !=_bbffd {_bbffd ._eefa =nil ;};if _bbffd ._gabf !=nil &&_bbffd ._gabf ._caaaf !=_bbffd {_bbffd ._gabf =nil ;};if _bbffd ._cdfcc !=nil &&_bbffd ._cdfcc ._eefa !=_bbffd {_bbffd ._cdfcc =nil ;
};if _bbffd ._caaaf !=nil &&_bbffd ._caaaf ._gabf !=_bbffd {_bbffd ._caaaf =nil ;};};};func _eaaca (_geeaf _fe .PdfObject ,_dfbc _fd .Color )(_ce .Image ,error ){_eaaa ,_gbca :=_fe .GetStream (_geeaf );if !_gbca {return nil ,nil ;};_gbbc ,_dgbdf :=_acf .NewXObjectImageFromStream (_eaaa );
if _dgbdf !=nil {return nil ,_dgbdf ;};_dcdg ,_dgbdf :=_gbbc .ToImage ();if _dgbdf !=nil {return nil ,_dgbdf ;};return _gdfga (_dcdg ,_dfbc ),nil ;};

// List returns all the list objects detected on the page.
// It detects all the bullet point Lists from a given pdf page and builds a slice of bullet list objects.
// A given bullet list object has a tree structure.
// Each bullet point list is extracted with the text content it contains and all the sub lists found under it as children in the tree.
// The rest content of the pdf is ignored and only text in the bullet point lists are extracted.
// The list extraction is done in two ways.
// 1. If the document is tagged then the lists are extracted using the tags provided in the document.
// 2. Otherwise the bullet lists are extracted from the raw text using regex matching.
// By default the document tag is used if available.
// However this can be disabled using `DisableDocumentTags` in the `Options` object.
// Sometimes disabling document tags option might give a better bullet list extraction if the document was tagged incorrectly.
//
//	    options := &Options{
//		     DisableDocumentTags: false, // this means use document tag if available
//	    }
//	    ex, err := NewWithOptions(page, options)
//	    // handle error
//	    pageText, _, _, err := ex.ExtractPageText()
//	    // handle error
//	    lists := pageText.List()
//	    txt := lists.Text()
func (_dadg PageText )List ()lists {_cdgf :=!_dadg ._dfdb ._aebg ;_fcca :=_dadg .getParagraphs ();_fdgf :=_fcca .list ();if _dadg ._gddgb !=nil &&_cdgf {_aegaa :=_gfg (&_fcca );if len (_dadg ._gddgb .K )==0{_a .Log .Debug ("\u004c\u0069\u0073\u0074\u003a\u0020\u0073t\u0072\u0075\u0063\u0074\u0054\u0072\u0065\u0065\u0052\u006f\u006f\u0074\u0020\u0064\u006f\u0065\u0073\u006e'\u0074\u0020\u0068\u0061\u0076e\u0020\u0061\u006e\u0079\u0020\u0063\u006f\u006e\u0074e\u006e\u0074\u002c\u0020\u0075\u0073\u0069\u006e\u0067\u0020\u0074\u0065\u0078\u0074\u0020\u006d\u0061\u0074\u0063\u0068\u0069\u006e\u0067\u0020\u006d\u0065\u0074\u0068\u006f\u0064\u0020\u0069\u006e\u0073\u0074\u0065\u0061\u0064\u002e");
return _fdgf ;};_fdgf =_decb (_dadg ._gddgb ,_aegaa ,_dadg ._daea );};return _fdgf ;};func (_caaag *textPara )getListLines ()[]*textLine {var _gdcec []*textLine ;_dgag :=_dadfb (_caaag ._ggfbe );for _ ,_aacb :=range _caaag ._ggfbe {_bfab :=_aacb ._cfec [0]._cdffa [0];
if _deab (_bfab ){_gdcec =append (_gdcec ,_aacb );};};_gdcec =append (_gdcec ,_dgag ...);return _gdcec ;};func _bff (_gdbgg ,_fcgg _aeg .Point )bool {_adebb :=_f .Abs (_gdbgg .X -_fcgg .X );_acgf :=_f .Abs (_gdbgg .Y -_fcgg .Y );return _ceca (_acgf ,_adebb );
};func _eedf (_ecbd _acf .PdfRectangle ,_bbffa ,_gbbf ,_fcbef ,_fcbdab *ruling )gridTile {_ecaff :=_ecbd .Llx ;_geee :=_ecbd .Urx ;_ddac :=_ecbd .Lly ;_ecec :=_ecbd .Ury ;return gridTile {PdfRectangle :_ecbd ,_gefgb :_bbffa !=nil &&_bbffa .encloses (_ddac ,_ecec ),_gdec :_gbbf !=nil &&_gbbf .encloses (_ddac ,_ecec ),_gfddc :_fcbef !=nil &&_fcbef .encloses (_ecaff ,_geee ),_bdba :_fcbdab !=nil &&_fcbdab .encloses (_ecaff ,_geee )};
};func (_eeee paraList )log (_aeage string ){if !_dfdd {return ;};_a .Log .Info ("%\u0038\u0073\u003a\u0020\u0025\u0064 \u0070\u0061\u0072\u0061\u0073\u0020=\u003d\u003d\u003d\u003d\u003d\u003d\u002d-\u002d\u002d\u002d\u002d\u002d\u003d\u003d\u003d\u003d\u003d=\u003d",_aeage ,len (_eeee ));
for _dacba ,_afge :=range _eeee {if _afge ==nil {continue ;};_dabe :=_afge .text ();_cgae :="\u0020\u0020";if _afge ._bcff !=nil {_cgae =_gb .Sprintf ("\u005b%\u0064\u0078\u0025\u0064\u005d",_afge ._bcff ._bdea ,_afge ._bcff ._acdga );};_gb .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0036\u002e\u0032\u0066\u0020\u0025s\u0020\u0025\u0071\u000a",_dacba ,_afge .PdfRectangle ,_cgae ,_gbcgb (_dabe ,50));
};};type event struct{_dbdcc float64 ;_fgec bool ;_bfgd int ;};func (_ddfdc *textPara )writeCellText (_dfcf _ac .Writer ){for _fedbc ,_bccd :=range _ddfdc ._ggfbe {_bgfc :=_bccd .text ();_ecbef :=_gdeg &&_bccd .endsInHyphen ()&&_fedbc !=len (_ddfdc ._ggfbe )-1;
if _ecbef {_bgfc =_dfgab (_bgfc );};_dfcf .Write ([]byte (_bgfc ));if !(_ecbef ||_fedbc ==len (_ddfdc ._ggfbe )-1){_dfcf .Write ([]byte (_bdce (_bccd ._dgda ,_ddfdc ._ggfbe [_fedbc +1]._dgda )));};};};func _agdec (_bbfbg ,_cdbbb ,_eddc float64 )rulingKind {if _bbfbg >=_eddc &&_ceca (_cdbbb ,_bbfbg ){return _bgbc ;
};if _cdbbb >=_eddc &&_ceca (_bbfbg ,_cdbbb ){return _ffgdf ;};return _fgdf ;};

// String returns a description of `p`.
func (_befe *textPara )String ()string {if _befe ._ffgb {return _gb .Sprintf ("\u0025\u0036\u002e\u0032\u0066\u0020\u005b\u0045\u004d\u0050\u0054\u0059\u005d",_befe .PdfRectangle );};_daadd :="";if _befe ._bcff !=nil {_daadd =_gb .Sprintf ("\u005b\u0025\u0064\u0078\u0025\u0064\u005d\u0020",_befe ._bcff ._bdea ,_befe ._bcff ._acdga );
};return _gb .Sprintf ("\u0025\u0036\u002e\u0032f \u0025\u0073\u0025\u0064\u0020\u006c\u0069\u006e\u0065\u0073\u0020\u0025\u0071",_befe .PdfRectangle ,_daadd ,len (_befe ._ggfbe ),_gbcgb (_befe .text (),50));};func (_bfe *textObject )setTextRenderMode (_bfcg int ){if _bfe ==nil {return ;
};_bfe ._eea ._ecfc =RenderMode (_bfcg );};func (_ecag *stateStack )pop ()*textState {if _ecag .empty (){return nil ;};_aggd :=*(*_ecag )[len (*_ecag )-1];*_ecag =(*_ecag )[:len (*_ecag )-1];return &_aggd ;};const (RenderModeStroke RenderMode =1<<iota ;
RenderModeFill ;RenderModeClip ;);func (_fbbf *textObject )showText (_cgag _fe .PdfObject ,_debb []byte ,_ebdg int ,_cgfd string )error {return _fbbf .renderText (_cgag ,_debb ,_ebdg ,_cgfd );};func (_bgeg compositeCell )String ()string {_egde :="";if len (_bgeg .paraList )> 0{_egde =_gbcgb (_bgeg .paraList .merge ().text (),50);
};return _gb .Sprintf ("\u0025\u0036\u002e\u0032\u0066\u0020\u0025\u0064\u0020\u0070\u0061\u0072a\u0073\u0020\u0025\u0071",_bgeg .PdfRectangle ,len (_bgeg .paraList ),_egde );};type bounded interface{bbox ()_acf .PdfRectangle };func (_egage *wordBag )removeDuplicates (){if _gecf {_a .Log .Info ("r\u0065m\u006f\u0076\u0065\u0044\u0075\u0070\u006c\u0069c\u0061\u0074\u0065\u0073: \u0025\u0071",_egage .text ());
};for _ ,_fgbbe :=range _egage .depthIndexes (){if len (_egage ._ceea [_fgbbe ])==0{continue ;};_cgac :=_egage ._ceea [_fgbbe ][0];_edaf :=_eacd *_cgac ._facbbf ;_ccbg :=_cgac ._dbbagg ;for _ ,_acae :=range _egage .depthBand (_ccbg ,_ccbg +_edaf ){_ggeda :=map[*textWord ]struct{}{};
_ffbb :=_egage ._ceea [_acae ];for _ ,_cfaab :=range _ffbb {if _ ,_efba :=_ggeda [_cfaab ];_efba {continue ;};for _ ,_efbbc :=range _ffbb {if _ ,_dcge :=_ggeda [_efbbc ];_dcge {continue ;};if _efbbc !=_cfaab &&_efbbc ._cdffa ==_cfaab ._cdffa &&_f .Abs (_efbbc .Llx -_cfaab .Llx )< _edaf &&_f .Abs (_efbbc .Urx -_cfaab .Urx )< _edaf &&_f .Abs (_efbbc .Lly -_cfaab .Lly )< _edaf &&_f .Abs (_efbbc .Ury -_cfaab .Ury )< _edaf {_ggeda [_efbbc ]=struct{}{};
};};};if len (_ggeda )> 0{_eebb :=0;for _ ,_cgaf :=range _ffbb {if _ ,_fcab :=_ggeda [_cgaf ];!_fcab {_ffbb [_eebb ]=_cgaf ;_eebb ++;};};_egage ._ceea [_acae ]=_ffbb [:len (_ffbb )-len (_ggeda )];if len (_egage ._ceea [_acae ])==0{delete (_egage ._ceea ,_acae );
};};};};};const _fefd =1.0/1000.0;func (_cfef *textObject )moveLP (_dbdfd ,_ggde float64 ){_cfef ._fgeb .Concat (_aeg .NewMatrix (1,0,0,1,_dbdfd ,_ggde ));_cfef ._fcda =_cfef ._fgeb ;};func (_bggb *shapesState )establishSubpath ()*subpath {_gaga ,_fadg :=_bggb .lastpointEstablished ();
if !_fadg {_bggb ._feae =append (_bggb ._feae ,_ffgd (_gaga ));};if len (_bggb ._feae )==0{return nil ;};_bggb ._dec =false ;return _bggb ._feae [len (_bggb ._feae )-1];};

// GetContentStreamOps returns the contentStreamOps field of `pt`.
func (_gbgc *PageText )GetContentStreamOps ()*_ec .ContentStreamOperations {return _gbgc ._gbad };

// PageTextOptions holds various options available in extraction process.
type PageTextOptions struct{_aebg bool ;_eabg ExtractionMode ;};func (_dceef *shapesState )lineTo (_bddc ,_dgce float64 ){if _bdbeg {_a .Log .Info ("\u006c\u0069\u006eeT\u006f\u0028\u0025\u002e\u0032\u0066\u002c\u0025\u002e\u0032\u0066\u0020\u0070\u003d\u0025\u002e\u0032\u0066",_bddc ,_dgce ,_dceef .devicePoint (_bddc ,_dgce ));
};_dceef .addPoint (_bddc ,_dgce );};func (_fcgd *textTable )newTablePara ()*textPara {_bdfa :=_fcgd .computeBbox ();_bcdad :=&textPara {PdfRectangle :_bdfa ,_dfcaa :_bdfa ,_bcff :_fcgd };if _ccdc {_a .Log .Info ("\u006e\u0065w\u0054\u0061\u0062l\u0065\u0050\u0061\u0072\u0061\u003a\u0020\u0025\u0073",_bcdad );
};return _bcdad ;};func _bfbc (_edfd map[int ][]float64 )string {_fffd :=_gfgcb (_edfd );_adffd :=make ([]string ,len (_edfd ));for _debe ,_eecgf :=range _fffd {_adffd [_debe ]=_gb .Sprintf ("\u0025\u0064\u003a\u0020\u0025\u002e\u0032\u0066",_eecgf ,_edfd [_eecgf ]);
};return _gb .Sprintf ("\u007b\u0025\u0073\u007d",_cg .Join (_adffd ,"\u002c\u0020"));};func (_efffa *textTable )compositeRowCorridors ()map[int ][]float64 {_bgbad :=make (map[int ][]float64 ,_efffa ._acdga );if _ccdc {_a .Log .Info ("c\u006f\u006d\u0070\u006f\u0073\u0069t\u0065\u0052\u006f\u0077\u0043\u006f\u0072\u0072\u0069d\u006f\u0072\u0073:\u0020h\u003d\u0025\u0064",_efffa ._acdga );
};for _aaag :=1;_aaag < _efffa ._acdga ;_aaag ++{var _fcad []compositeCell ;for _dggab :=0;_dggab < _efffa ._bdea ;_dggab ++{if _cfba ,_fdfg :=_efffa ._dgbef [_egeeg (_dggab ,_aaag )];_fdfg {_fcad =append (_fcad ,_cfba );};};if len (_fcad )==0{continue ;
};_fdcg :=_gfgf (_fcad );_bgbad [_aaag ]=_fdcg ;if _ccdc {_gb .Printf ("\u0020\u0020\u0020\u0025\u0032\u0064\u003a\u0020\u00256\u002e\u0032\u0066\u000a",_aaag ,_fdcg );};};return _bgbad ;};func _bdadb (_deeed []float64 ,_ffca ,_fgfeg float64 )[]float64 {_baag ,_febc :=_ffca ,_fgfeg ;
if _febc < _baag {_baag ,_febc =_febc ,_baag ;};_ecfcb :=make ([]float64 ,0,len (_deeed )+2);_ecfcb =append (_ecfcb ,_ffca );for _ ,_cafeb :=range _deeed {if _cafeb <=_baag {continue ;}else if _cafeb >=_febc {break ;};_ecfcb =append (_ecfcb ,_cafeb );};
_ecfcb =append (_ecfcb ,_fgfeg );return _ecfcb ;};type gridTile struct{_acf .PdfRectangle ;_bdba ,_gefgb ,_gfddc ,_gdec bool ;};func (_fgag *subpath )add (_bdg ..._aeg .Point ){_fgag ._adcb =append (_fgag ._adcb ,_bdg ...)};func (_aegb *textTable )get (_gbcec ,_bbfd int )*textPara {return _aegb ._cdefa [_egeeg (_gbcec ,_bbfd )]};
func (_fffc rulingList )removeDuplicates ()rulingList {if len (_fffc )==0{return nil ;};_fffc .sort ();_bdedg :=rulingList {_fffc [0]};for _ ,_gbbdd :=range _fffc [1:]{if _gbbdd .equals (_bdedg [len (_bdedg )-1]){continue ;};_bdedg =append (_bdedg ,_gbbdd );
};return _bdedg ;};func _ddbb (_abec *list ,_ecbee *string )string {_dgfd :=_cg .Split (_abec ._abbb ,"\u000a");_abfd :=&_cg .Builder {};for _ ,_fegf :=range _dgfd {if _fegf !=""{_abfd .WriteString (*_ecbee );_abfd .WriteString (_fegf );_abfd .WriteString ("\u000a");
};};return _abfd .String ();};func (_defcf *textTable )markCells (){for _eagd :=0;_eagd < _defcf ._acdga ;_eagd ++{for _bcffd :=0;_bcffd < _defcf ._bdea ;_bcffd ++{_cdgb :=_defcf .get (_bcffd ,_eagd );if _cdgb !=nil {_cdgb ._bfcgd =true ;};};};};const (_bacf =false ;
_bfcb =false ;_fdee =false ;_acbd =false ;_bdbeg =false ;_becg =false ;_ebfc =false ;_dfdd =false ;_deba =false ;_efgb =_deba &&true ;_gafd =_efgb &&false ;_gecf =_deba &&true ;_ccdc =false ;_eefb =_ccdc &&false ;_cgagd =_ccdc &&true ;_eagg =false ;_bdcce =_eagg &&false ;
_dgea =_eagg &&false ;_caegd =_eagg &&true ;_dbfec =_eagg &&false ;_gbeec =_eagg &&false ;);func (_beee *textObject )getFontDirect (_fggf string )(*_acf .PdfFont ,error ){_gbfd ,_bfdc :=_beee .getFontDict (_fggf );if _bfdc !=nil {return nil ,_bfdc ;};_dfff ,_bfdc :=_acf .NewPdfFontFromPdfObject (_gbfd );
if _bfdc !=nil {_a .Log .Debug ("\u0067\u0065\u0074\u0046\u006f\u006e\u0074\u0044\u0069\u0072\u0065\u0063\u0074\u003a\u0020\u004e\u0065\u0077Pd\u0066F\u006f\u006e\u0074\u0046\u0072\u006f\u006d\u0050\u0064\u0066\u004f\u0062j\u0065\u0063\u0074\u0020\u0066\u0061\u0069\u006c\u0065\u0064\u002e\u0020\u006e\u0061\u006d\u0065\u003d%\u0023\u0071\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_fggf ,_bfdc );
};return _dfff ,_bfdc ;};func (_cgfb *wordBag )maxDepth ()float64 {return _cgfb ._gefb -_cgfb .Lly };func _ceca (_bcafe ,_dbde float64 )bool {return _bcafe /_f .Max (_afdc ,_dbde )< _afcg };func (_gbga *shapesState )fill (_gdce *[]pathSection ){_acge :=pathSection {_dbe :_gbga ._feae ,Color :_gbga ._eecfa .getFillColor ()};
*_gdce =append (*_gdce ,_acge );if _eagg {_ecfa :=_acge .bbox ();_gb .Printf ("\u0020 \u0020\u0020\u0046\u0049\u004c\u004c\u003a %\u0032\u0064\u0020\u0066\u0069\u006c\u006c\u0073\u0020\u0028\u0025\u0064\u0020\u006ee\u0077\u0029 \u0073\u0073\u003d%\u0073\u0020\u0063\u006f\u006c\u006f\u0072\u003d\u0025\u0033\u0076\u0020\u0025\u0036\u002e\u0032f\u003d\u00256.\u0032\u0066\u0078%\u0036\u002e\u0032\u0066\u000a",len (*_gdce ),len (_acge ._dbe ),_gbga ,_acge .Color ,_ecfa ,_ecfa .Width (),_ecfa .Height ());
if _bdcce {for _affe ,_decf :=range _acge ._dbe {_gb .Printf ("\u0025\u0038\u0064\u003a\u0020\u0025\u0073\u000a",_affe ,_decf );if _affe ==10{break ;};};};};};func (_cgcc *textTable )reduceTiling (_abdf gridTiling ,_dbaf float64 )*textTable {_bafeg :=make ([]int ,0,_cgcc ._acdga );
_eggbb :=make ([]int ,0,_cgcc ._bdea );_edeeg :=_abdf ._aeba ;_cfgae :=_abdf ._dead ;for _febce :=0;_febce < _cgcc ._acdga ;_febce ++{_egagef :=_febce > 0&&_f .Abs (_cfgae [_febce -1]-_cfgae [_febce ])< _dbaf &&_cgcc .emptyCompositeRow (_febce );if !_egagef {_bafeg =append (_bafeg ,_febce );
};};for _gecaa :=0;_gecaa < _cgcc ._bdea ;_gecaa ++{_ecdb :=_gecaa < _cgcc ._bdea -1&&_f .Abs (_edeeg [_gecaa +1]-_edeeg [_gecaa ])< _dbaf &&_cgcc .emptyCompositeColumn (_gecaa );if !_ecdb {_eggbb =append (_eggbb ,_gecaa );};};if len (_bafeg )==_cgcc ._acdga &&len (_eggbb )==_cgcc ._bdea {return _cgcc ;
};_gfeg :=textTable {_fgae :_cgcc ._fgae ,_bdea :len (_eggbb ),_acdga :len (_bafeg ),_dgbef :make (map[uint64 ]compositeCell ,len (_eggbb )*len (_bafeg ))};if _ccdc {_a .Log .Info ("\u0072\u0065\u0064\u0075c\u0065\u0054\u0069\u006c\u0069\u006e\u0067\u003a\u0020\u0025d\u0078%\u0064\u0020\u002d\u003e\u0020\u0025\u0064x\u0025\u0064",_cgcc ._bdea ,_cgcc ._acdga ,len (_eggbb ),len (_bafeg ));
_a .Log .Info ("\u0072\u0065d\u0075\u0063\u0065d\u0043\u006f\u006c\u0073\u003a\u0020\u0025\u002b\u0076",_eggbb );_a .Log .Info ("\u0072\u0065d\u0075\u0063\u0065d\u0052\u006f\u0077\u0073\u003a\u0020\u0025\u002b\u0076",_bafeg );};for _febb ,_egfec :=range _bafeg {for _ddfed ,_caaafd :=range _eggbb {_cbadg ,_abdfg :=_cgcc .getComposite (_caaafd ,_egfec );
if len (_cbadg )==0{continue ;};if _ccdc {_gb .Printf ("\u0020 \u0025\u0032\u0064\u002c \u0025\u0032\u0064\u0020\u0028%\u0032d\u002c \u0025\u0032\u0064\u0029\u0020\u0025\u0071\n",_ddfed ,_febb ,_caaafd ,_egfec ,_gbcgb (_cbadg .merge ().text (),50));};_gfeg .putComposite (_ddfed ,_febb ,_cbadg ,_abdfg );
};};return &_gfeg ;};func _acd (_gbb int )bool {return (_gbb &1)==0};func (_fdede rulingList )comp (_cbeg ,_egfbe int )bool {_cadcb ,_efbcf :=_fdede [_cbeg ],_fdede [_egfbe ];_egcd ,_eecfb :=_cadcb ._becca ,_efbcf ._becca ;if _egcd !=_eecfb {return _egcd > _eecfb ;
};if _egcd ==_fgdf {return false ;};_afeff :=func (_bcgda bool )bool {if _egcd ==_bgbc {return _bcgda ;};return !_bcgda ;};_dagd ,_fbdb :=_cadcb ._eeac ,_efbcf ._eeac ;if _dagd !=_fbdb {return _afeff (_dagd > _fbdb );};_dagd ,_fbdb =_cadcb ._feded ,_efbcf ._feded ;
if _dagd !=_fbdb {return _afeff (_dagd < _fbdb );};return _afeff (_cadcb ._bbebb < _efbcf ._bbebb );};func (_faadb paraList )applyTables (_fcfa []*textTable )paraList {var _bdcf paraList ;for _ ,_fddfc :=range _fcfa {_bdcf =append (_bdcf ,_fddfc .newTablePara ());
};for _ ,_adgd :=range _faadb {if _adgd ._bfcgd {continue ;};_bdcf =append (_bdcf ,_adgd );};return _bdcf ;};const (_fgdf rulingKind =iota ;_bgbc ;_ffgdf ;);func (_ggab rulingList )asTiling ()gridTiling {if _caegd {_a .Log .Info ("r\u0075\u006ci\u006e\u0067\u004c\u0069\u0073\u0074\u002e\u0061\u0073\u0054\u0069\u006c\u0069\u006e\u0067\u003a\u0020\u0076\u0065\u0063s\u003d\u0025\u0064\u0020\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d=\u003d\u003d\u003d\u003d\u003d\u002b\u002b\u002b\u0020\u003d\u003d\u003d\u003d=\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d=\u003d",len (_ggab ));
};for _fdaae ,_bfac :=range _ggab [1:]{_cgdd :=_ggab [_fdaae ];if _cgdd .alignsPrimary (_bfac )&&_cgdd .alignsSec (_bfac ){_a .Log .Error ("a\u0073\u0054\u0069\u006c\u0069\u006e\u0067\u003a\u0020\u0044\u0075\u0070\u006c\u0069\u0063\u0061\u0074\u0065 \u0072\u0075\u006c\u0069\u006e\u0067\u0073\u002e\u000a\u0009v=\u0025\u0073\u000a\t\u0077=\u0025\u0073",_bfac ,_cgdd );
};};_ggab .sortStrict ();_ggab .log ("\u0073n\u0061\u0070\u0070\u0065\u0064");_fadgd ,_ebeeda :=_ggab .vertsHorzs ();_bcdac :=_fadgd .primaries ();_fgcf :=_ebeeda .primaries ();_acfc :=len (_bcdac )-1;_gdfg :=len (_fgcf )-1;if _acfc ==0||_gdfg ==0{return gridTiling {};
};_badb :=_acf .PdfRectangle {Llx :_bcdac [0],Urx :_bcdac [_acfc ],Lly :_fgcf [0],Ury :_fgcf [_gdfg ]};if _caegd {_a .Log .Info ("\u0072\u0075l\u0069\u006e\u0067\u004c\u0069\u0073\u0074\u002e\u0061\u0073\u0054\u0069\u006c\u0069\u006e\u0067\u003a\u0020\u0076\u0065\u0072\u0074s=\u0025\u0064",len (_fadgd ));
for _aadb ,_gbeb :=range _fadgd {_gb .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0073\u000a",_aadb ,_gbeb );};_a .Log .Info ("\u0072\u0075l\u0069\u006e\u0067\u004c\u0069\u0073\u0074\u002e\u0061\u0073\u0054\u0069\u006c\u0069\u006e\u0067\u003a\u0020\u0068\u006f\u0072\u007as=\u0025\u0064",len (_ebeeda ));
for _cbdcac ,_faag :=range _ebeeda {_gb .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0073\u000a",_cbdcac ,_faag );};_a .Log .Info ("\u0072\u0075\u006c\u0069\u006eg\u004c\u0069\u0073\u0074\u002e\u0061\u0073\u0054\u0069\u006c\u0069\u006e\u0067:\u0020\u0020\u0077\u0078\u0068\u003d\u0025\u0064\u0078\u0025\u0064\u000a\u0009\u006c\u006c\u0078\u003d\u0025\u002e\u0032\u0066\u000a\u0009\u006c\u006c\u0079\u003d\u0025\u002e\u0032f",_acfc ,_gdfg ,_bcdac ,_fgcf );
};_dgcba :=make ([]gridTile ,_acfc *_gdfg );for _ccee :=_gdfg -1;_ccee >=0;_ccee --{_cbba :=_fgcf [_ccee ];_fdaga :=_fgcf [_ccee +1];for _dgec :=0;_dgec < _acfc ;_dgec ++{_ggcaa :=_bcdac [_dgec ];_bdccd :=_bcdac [_dgec +1];_feeca :=_fadgd .findPrimSec (_ggcaa ,_cbba );
_cbdgc :=_fadgd .findPrimSec (_bdccd ,_cbba );_bebdb :=_ebeeda .findPrimSec (_cbba ,_ggcaa );_eegdg :=_ebeeda .findPrimSec (_fdaga ,_ggcaa );_fbcb :=_acf .PdfRectangle {Llx :_ggcaa ,Urx :_bdccd ,Lly :_cbba ,Ury :_fdaga };_dadgc :=_eedf (_fbcb ,_feeca ,_cbdgc ,_bebdb ,_eegdg );
_dgcba [_ccee *_acfc +_dgec ]=_dadgc ;if _caegd {_gb .Printf ("\u0020\u0020\u0078\u003d\u0025\u0032\u0064\u0020\u0079\u003d\u0025\u0032\u0064\u003a\u0020%\u0073 \u0025\u0036\u002e\u0032\u0066\u0020\u0078\u0020\u0025\u0036\u002e\u0032\u0066\u000a",_dgec ,_ccee ,_dadgc .String (),_dadgc .Width (),_dadgc .Height ());
};};};if _caegd {_a .Log .Info ("r\u0075\u006c\u0069\u006e\u0067\u004c\u0069\u0073\u0074.\u0061\u0073\u0054\u0069\u006c\u0069\u006eg:\u0020\u0063\u006f\u0061l\u0065\u0073\u0063\u0065\u0020\u0068\u006f\u0072\u0069zo\u006e\u0074a\u006c\u002e\u0020\u0025\u0036\u002e\u0032\u0066",_badb );
};_facgb :=make ([]map[float64 ]gridTile ,_gdfg );for _dbedb :=_gdfg -1;_dbedb >=0;_dbedb --{if _caegd {_gb .Printf ("\u0020\u0020\u0079\u003d\u0025\u0032\u0064\u000a",_dbedb );};_facgb [_dbedb ]=make (map[float64 ]gridTile ,_acfc );for _ecbf :=0;_ecbf < _acfc ;
_ecbf ++{_ccabb :=_dgcba [_dbedb *_acfc +_ecbf ];if _caegd {_gb .Printf ("\u0020\u0020\u0025\u0034\u0064\u003a\u0020\u0025\u0073\u000a",_ecbf ,_ccabb );};if !_ccabb ._gefgb {continue ;};_abbd :=_ecbf ;for _acfae :=_ecbf +1;!_ccabb ._gdec &&_acfae < _acfc ;
_acfae ++{_fecc :=_dgcba [_dbedb *_acfc +_acfae ];_ccabb .Urx =_fecc .Urx ;_ccabb ._bdba =_ccabb ._bdba ||_fecc ._bdba ;_ccabb ._gfddc =_ccabb ._gfddc ||_fecc ._gfddc ;_ccabb ._gdec =_fecc ._gdec ;if _caegd {_gb .Printf ("\u0020 \u0020%\u0034\u0064\u003a\u0020\u0025s\u0020\u2192 \u0025\u0073\u000a",_acfae ,_fecc ,_ccabb );
};_abbd =_acfae ;};if _caegd {_gb .Printf (" \u0020 \u0025\u0032\u0064\u0020\u002d\u0020\u0025\u0032d\u0020\u2192\u0020\u0025s\n",_ecbf ,_abbd ,_ccabb );};_ecbf =_abbd ;_facgb [_dbedb ][_ccabb .Llx ]=_ccabb ;};};_feef :=make (map[float64 ]map[float64 ]gridTile ,_gdfg );
_ffab :=make (map[float64 ]map[float64 ]struct{},_gdfg );for _ebeb :=_gdfg -1;_ebeb >=0;_ebeb --{_fedbd :=_dgcba [_ebeb *_acfc ].Lly ;_feef [_fedbd ]=make (map[float64 ]gridTile ,_acfc );_ffab [_fedbd ]=make (map[float64 ]struct{},_acfc );};if _caegd {_a .Log .Info ("\u0072u\u006c\u0069n\u0067\u004c\u0069s\u0074\u002e\u0061\u0073\u0054\u0069\u006ci\u006e\u0067\u003a\u0020\u0063\u006fa\u006c\u0065\u0073\u0063\u0065\u0020\u0076\u0065\u0072\u0074\u0069c\u0061\u006c\u002e\u0020\u0025\u0036\u002e\u0032\u0066",_badb );
};for _fbaeb :=_gdfg -1;_fbaeb >=0;_fbaeb --{_gfee :=_dgcba [_fbaeb *_acfc ].Lly ;_abcfg :=_facgb [_fbaeb ];if _caegd {_gb .Printf ("\u0020\u0020\u0079\u003d\u0025\u0032\u0064\u000a",_fbaeb );};for _ ,_ebbb :=range _aecge (_abcfg ){if _ ,_fagba :=_ffab [_gfee ][_ebbb ];
_fagba {continue ;};_ebbg :=_abcfg [_ebbb ];if _caegd {_gb .Printf (" \u0020\u0020\u0020\u0020\u0076\u0030\u003d\u0025\u0073\u000a",_ebbg .String ());};for _badf :=_fbaeb -1;_badf >=0;_badf --{if _ebbg ._gfddc {break ;};_adfg :=_facgb [_badf ];_cgagc ,_ebad :=_adfg [_ebbb ];
if !_ebad {break ;};if _cgagc .Urx !=_ebbg .Urx {break ;};_ebbg ._gfddc =_cgagc ._gfddc ;_ebbg .Lly =_cgagc .Lly ;if _caegd {_gb .Printf ("\u0020\u0020\u0020\u0020  \u0020\u0020\u0076\u003d\u0025\u0073\u0020\u0076\u0030\u003d\u0025\u0073\u000a",_cgagc .String (),_ebbg .String ());
};_ffab [_cgagc .Lly ][_cgagc .Llx ]=struct{}{};};if _fbaeb ==0{_ebbg ._gfddc =true ;};if _ebbg .complete (){_feef [_gfee ][_ebbb ]=_ebbg ;};};};_agceb :=gridTiling {PdfRectangle :_badb ,_aeba :_dbdg (_feef ),_dead :_ffag (_feef ),_bddfg :_feef };_agceb .log ("\u0043r\u0065\u0061\u0074\u0065\u0064");
return _agceb ;};func _edfea (_agaaae float64 )bool {return _f .Abs (_agaaae )< _deef };func _gagef (_dfebg []TextMark ,_egce *int )[]TextMark {_fcbda :=_dfebg [len (_dfebg )-1];_febed :=[]rune (_fcbda .Text );if len (_febed )==1{_dfebg =_dfebg [:len (_dfebg )-1];
_fceee :=_dfebg [len (_dfebg )-1];*_egce =_fceee .Offset +len (_fceee .Text );}else {_gacbf :=_dfgab (_fcbda .Text );*_egce +=len (_gacbf )-len (_fcbda .Text );_fcbda .Text =_gacbf ;};return _dfebg ;};func _dadf (_bdcd *_ec .ContentStreamOperation )(float64 ,error ){if len (_bdcd .Params )!=1{_fdcf :=_agb .New ("\u0069n\u0063\u006f\u0072\u0072e\u0063\u0074\u0020\u0070\u0061r\u0061m\u0065t\u0065\u0072\u0020\u0063\u006f\u0075\u006et");
_a .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0025\u0023\u0071\u0020\u0073\u0068\u006f\u0075\u006c\u0064\u0020h\u0061\u0076\u0065\u0020\u0025\u0064\u0020i\u006e\u0070\u0075\u0074\u0020\u0070\u0061\u0072\u0061\u006d\u0073,\u0020\u0067\u006f\u0074\u0020\u0025\u0064\u0020\u0025\u002b\u0076",_bdcd .Operand ,1,len (_bdcd .Params ),_bdcd .Params );
return 0.0,_fdcf ;};return _fe .GetNumberAsFloat (_bdcd .Params [0]);};func _ebffg (_dgcc string )(string ,bool ){_dgbd :=[]rune (_dgcc );if len (_dgbd )!=1{return "",false ;};_cgdfd ,_dfdaa :=_aebdc [_dgbd [0]];return _cgdfd ,_dfdaa ;};func _cfddg (_cfafe ,_dcabc ,_ccgbbc ,_egee *textPara )*textTable {_cgdcb :=&textTable {_bdea :2,_acdga :2,_cdefa :make (map[uint64 ]*textPara ,4)};
_cgdcb .put (0,0,_cfafe );_cgdcb .put (1,0,_dcabc );_cgdcb .put (0,1,_ccgbbc );_cgdcb .put (1,1,_egee );return _cgdcb ;};func _aadg (_dbad string ,_gcfdd []rulingList ){_a .Log .Info ("\u0024\u0024 \u0025\u0064\u0020g\u0072\u0069\u0064\u0073\u0020\u002d\u0020\u0025\u0073",len (_gcfdd ),_dbad );
for _gefd ,_fceg :=range _gcfdd {_gb .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0073\u000a",_gefd ,_fceg .String ());};};func (_abee *textLine )text ()string {var _gbac []string ;for _ ,_cabce :=range _abee ._cfec {if _cabce ._agdf {_gbac =append (_gbac ,"\u0020");
};_gbac =append (_gbac ,_cabce ._cdffa );};_gbdbe :=_cg .Join (_gbac ,"");_efccb :=_dfe ([]rune (_gbdbe ));return _efccb ._de ;};func (_cfde paraList )lines ()[]*textLine {var _acbag []*textLine ;for _ ,_dbgce :=range _cfde {_acbag =append (_acbag ,_dbgce ._ggfbe ...);
};return _acbag ;};func (_agbb *textLine )appendWord (_faee *textWord ){_agbb ._cfec =append (_agbb ._cfec ,_faee );_agbb .PdfRectangle =_fccd (_agbb .PdfRectangle ,_faee .PdfRectangle );if _faee ._facbbf > _agbb ._aebd {_agbb ._aebd =_faee ._facbbf ;};
if _faee ._dbbagg > _agbb ._dgda {_agbb ._dgda =_faee ._dbbagg ;};};func (_cffd intSet )del (_ceadf int ){delete (_cffd ,_ceadf )};func (_cfbd *textObject )newTextMark (_egfa string ,_bbac _aeg .Matrix ,_fdde _aeg .Point ,_affa float64 ,_ggbb *_acf .PdfFont ,_eaae float64 ,_fafd ,_cbggb _fd .Color ,_bgba _fe .PdfObject ,_ecgb []string ,_gcdaa int ,_eead int )(textMark ,bool ){_dggg :=_bbac .Angle ();
_aabfd :=_dcd (_dggg ,_bbfbc );var _bgcd float64 ;if _aabfd %180!=90{_bgcd =_bbac .ScalingFactorY ();}else {_bgcd =_bbac .ScalingFactorX ();};_cafd :=_eccg (_bbac );_afdb :=_acf .PdfRectangle {Llx :_cafd .X ,Lly :_cafd .Y ,Urx :_fdde .X ,Ury :_fdde .Y };
switch _aabfd %360{case 90:_afdb .Urx -=_bgcd ;case 180:_afdb .Ury -=_bgcd ;case 270:_afdb .Urx +=_bgcd ;case 0:_afdb .Ury +=_bgcd ;default:_aabfd =0;_afdb .Ury +=_bgcd ;};if _afdb .Llx > _afdb .Urx {_afdb .Llx ,_afdb .Urx =_afdb .Urx ,_afdb .Llx ;};if _afdb .Lly > _afdb .Ury {_afdb .Lly ,_afdb .Ury =_afdb .Ury ,_afdb .Lly ;
};_eaad :=true ;if _cfbd ._ccgf ._ffe .Width ()> 0{_deddc ,_bfcbb :=_edfg (_afdb ,_cfbd ._ccgf ._ffe );if !_bfcbb {_eaad =false ;_a .Log .Debug ("\u0054\u0065\u0078\u0074\u0020m\u0061\u0072\u006b\u0020\u006f\u0075\u0074\u0073\u0069\u0064\u0065\u0020\u0070a\u0067\u0065\u002e\u0020\u0062\u0062\u006f\u0078\u003d\u0025\u0067\u0020\u006d\u0065\u0064\u0069\u0061\u0042\u006f\u0078\u003d\u0025\u0067\u0020\u0074\u0065\u0078\u0074\u003d\u0025q",_afdb ,_cfbd ._ccgf ._ffe ,_egfa );
};_afdb =_deddc ;};_bbgf :=_afdb ;_acbc :=_cfbd ._ccgf ._ffe ;switch _aabfd %360{case 90:_acbc .Urx ,_acbc .Ury =_acbc .Ury ,_acbc .Urx ;_bbgf =_acf .PdfRectangle {Llx :_acbc .Urx -_afdb .Ury ,Urx :_acbc .Urx -_afdb .Lly ,Lly :_afdb .Llx ,Ury :_afdb .Urx };
case 180:_bbgf =_acf .PdfRectangle {Llx :_acbc .Urx -_afdb .Llx ,Urx :_acbc .Urx -_afdb .Urx ,Lly :_acbc .Ury -_afdb .Lly ,Ury :_acbc .Ury -_afdb .Ury };case 270:_acbc .Urx ,_acbc .Ury =_acbc .Ury ,_acbc .Urx ;_bbgf =_acf .PdfRectangle {Llx :_afdb .Ury ,Urx :_afdb .Lly ,Lly :_acbc .Ury -_afdb .Llx ,Ury :_acbc .Ury -_afdb .Urx };
};if _bbgf .Llx > _bbgf .Urx {_bbgf .Llx ,_bbgf .Urx =_bbgf .Urx ,_bbgf .Llx ;};if _bbgf .Lly > _bbgf .Ury {_bbgf .Lly ,_bbgf .Ury =_bbgf .Ury ,_bbgf .Lly ;};_facfa :=textMark {_gadb :_egfa ,PdfRectangle :_bbgf ,_bfbe :_afdb ,_dfdga :_ggbb ,_gfgd :_bgcd ,_daad :_eaae ,_fefbg :_bbac ,_bcag :_fdde ,_dgff :_aabfd ,_fcecb :_fafd ,_aedf :_cbggb ,_dcga :_bgba ,_dgcd :_ecgb ,Th :_cfbd ._eea ._dgad ,Tw :_cfbd ._eea ._abc ,_cgfg :_eead ,_fgbaa :_gcdaa };
if _bfcb {_a .Log .Info ("n\u0065\u0077\u0054\u0065\u0078\u0074M\u0061\u0072\u006b\u003a\u0020\u0073t\u0061\u0072\u0074\u003d\u0025\u002e\u0032f\u0020\u0065\u006e\u0064\u003d\u0025\u002e\u0032\u0066\u0020%\u0073",_cafd ,_fdde ,_facfa .String ());};return _facfa ,_eaad ;
};func _dbed (_bagg ,_bdf bounded )float64 {_degd :=_acdg (_bagg ,_bdf );if !_edfea (_degd ){return _degd ;};return _dfffg (_bagg ,_bdf );};func (_bgdc paraList )toTextMarks ()[]TextMark {_dded :=0;var _gbbed []TextMark ;for _degfc ,_cffb :=range _bgdc {if _cffb ._ffgb {continue ;
};_agce :=_cffb .toTextMarks (&_dded );_gbbed =append (_gbbed ,_agce ...);if _degfc !=len (_bgdc )-1{if _bbgd (_cffb ,_bgdc [_degfc +1]){_gbbed =_caacf (_gbbed ,&_dded ,"\u0020");}else {_gbbed =_caacf (_gbbed ,&_dded ,"\u000a");_gbbed =_caacf (_gbbed ,&_dded ,"\u000a");
};};};_gbbed =_caacf (_gbbed ,&_dded ,"\u000a");_gbbed =_caacf (_gbbed ,&_dded ,"\u000a");return _gbbed ;};func (_adae *wordBag )minDepth ()float64 {return _adae ._gefb -(_adae .Ury -_adae ._aacag )};

// TextTable represents a table.
// Cells are ordered top-to-bottom, left-to-right.
// Cells[y] is the (0-offset) y'th row in the table.
// Cells[y][x] is the (0-offset) x'th column in the table.
type TextTable struct{_acf .PdfRectangle ;W ,H int ;Cells [][]TableCell ;};var _ccagb =_dc .MustCompile ("\u005e\u005c\u0073\u002a\u0028\u005c\u0064\u002b\u005c\u002e\u003f|\u005b\u0049\u0069\u0076\u005d\u002b\u0029\u005c\u0073\u002a\\\u0029\u003f\u0024");
type textWord struct{_acf .PdfRectangle ;_dbbagg float64 ;_cdffa string ;_eaee []*textMark ;_facbbf float64 ;_agdf bool ;};func (_acbeg paraList )xNeighbours (_abef float64 )map[*textPara ][]int {_aafdb :=make ([]event ,2*len (_acbeg ));if _abef ==0{for _egdc ,_cdafaa :=range _acbeg {_aafdb [2*_egdc ]=event {_cdafaa .Llx ,true ,_egdc };
_aafdb [2*_egdc +1]=event {_cdafaa .Urx ,false ,_egdc };};}else {for _gdba ,_fcdee :=range _acbeg {_aafdb [2*_gdba ]=event {_fcdee .Llx -_abef *_fcdee .fontsize (),true ,_gdba };_aafdb [2*_gdba +1]=event {_fcdee .Urx +_abef *_fcdee .fontsize (),false ,_gdba };
};};return _acbeg .eventNeighbours (_aafdb );};func (_gabb gridTile )complete ()bool {return _gabb .numBorders ()==4};type paraList []*textPara ;func (_aafd rectRuling )asRuling ()(*ruling ,bool ){_agae :=ruling {_becca :_aafd ._dffec ,Color :_aafd .Color ,_fgaa :_ccgee };
switch _aafd ._dffec {case _ffgdf :_agae ._eeac =0.5*(_aafd .Llx +_aafd .Urx );_agae ._feded =_aafd .Lly ;_agae ._bbebb =_aafd .Ury ;_eeeea ,_cggfc :=_aafd .checkWidth (_aafd .Llx ,_aafd .Urx );if !_cggfc {if _dbfec {_a .Log .Error ("\u0072\u0065\u0063\u0074\u0052\u0075l\u0069\u006e\u0067\u002e\u0061\u0073\u0052\u0075\u006c\u0069\u006e\u0067\u003a\u0020\u0072\u0075\u006c\u0069\u006e\u0067V\u0065\u0072\u0074\u0020\u0021\u0063\u0068\u0065\u0063\u006b\u0057\u0069\u0064\u0074h\u0020v\u003d\u0025\u002b\u0076",_aafd );
};return nil ,false ;};_agae ._aacbb =_eeeea ;case _bgbc :_agae ._eeac =0.5*(_aafd .Lly +_aafd .Ury );_agae ._feded =_aafd .Llx ;_agae ._bbebb =_aafd .Urx ;_ccbca ,_agedd :=_aafd .checkWidth (_aafd .Lly ,_aafd .Ury );if !_agedd {if _dbfec {_a .Log .Error ("\u0072\u0065\u0063\u0074\u0052\u0075l\u0069\u006e\u0067\u002e\u0061\u0073\u0052\u0075\u006c\u0069\u006e\u0067\u003a\u0020\u0072\u0075\u006c\u0069\u006e\u0067H\u006f\u0072\u007a\u0020\u0021\u0063\u0068\u0065\u0063\u006b\u0057\u0069\u0064\u0074h\u0020v\u003d\u0025\u002b\u0076",_aafd );
};return nil ,false ;};_agae ._aacbb =_ccbca ;default:_a .Log .Error ("\u0062\u0061\u0064\u0020pr\u0069\u006d\u0061\u0072\u0079\u0020\u006b\u0069\u006e\u0064\u003d\u0025\u0064",_aafd ._dffec );return nil ,false ;};return &_agae ,true ;};func _gecdb (_gdbbg map[int ][]float64 ){if len (_gdbbg )<=1{return ;
};_egaef :=_gfgcb (_gdbbg );if _ccdc {_a .Log .Info ("\u0066i\u0078C\u0065\u006c\u006c\u0073\u003a \u006b\u0065y\u0073\u003d\u0025\u002b\u0076",_egaef );};var _aaebb ,_ffcb int ;for _aaebb ,_ffcb =range _egaef {if _gdbbg [_ffcb ]!=nil {break ;};};for _fdaacg ,_gdege :=range _egaef [_aaebb :]{_dgfb :=_gdbbg [_gdege ];
if _dgfb ==nil {continue ;};if _ccdc {_gb .Printf ("\u0025\u0034\u0064\u003a\u0020\u006b\u0030\u003d\u0025\u0064\u0020\u006b1\u003d\u0025\u0064\u000a",_aaebb +_fdaacg ,_ffcb ,_gdege );};_egac :=_gdbbg [_gdege ];if _egac [len (_egac )-1]> _dgfb [0]{_egac [len (_egac )-1]=_dgfb [0];
_gdbbg [_ffcb ]=_egac ;};_ffcb =_gdege ;};};func (_gcab *wordBag )removeWord (_gfff *textWord ,_gdbf int ){_babb :=_gcab ._ceea [_gdbf ];_babb =_abad (_babb ,_gfff );if len (_babb )==0{delete (_gcab ._ceea ,_gdbf );}else {_gcab ._ceea [_gdbf ]=_babb ;};
};func (_gaff *Extractor )extractPageText (_fgca string ,_bag *_acf .PdfPageResources ,_ceed _aeg .Matrix ,_bab int ,_dbgd bool )(*PageText ,int ,int ,error ){_a .Log .Trace ("\u0065x\u0074\u0072\u0061\u0063t\u0050\u0061\u0067\u0065\u0054e\u0078t\u003a \u006c\u0065\u0076\u0065\u006c\u003d\u0025d",_bab );
_fec :=&PageText {_ddfe :_gaff ._ffe ,_gddgb :_gaff ._dbf ,_daea :_gaff ._fbb };_caaf :=_aabfc (_gaff ._ffe );var _ccf stateStack ;_dgeg :=_acfa (_gaff ,_bag ,_ec .GraphicsState {},&_caaf ,&_ccf );_eebe :=shapesState {_fbg :_ceed ,_fabc :_aeg .IdentityMatrix (),_eecfa :_dgeg };
var _adeg bool ;_eaaf :=-1;_aaf :="";if _bab > _cgc {_aafe :=_agb .New ("\u0066\u006f\u0072\u006d s\u0074\u0061\u0063\u006b\u0020\u006f\u0076\u0065\u0072\u0066\u006c\u006f\u0077");_a .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a \u0065\u0078\u0074\u0072\u0061\u0063\u0074\u0050\u0061\u0067\u0065\u0054\u0065\u0078\u0074\u002e\u0020\u0072\u0065\u0063u\u0072\u0073\u0069\u006f\u006e\u0020\u006c\u0065\u0076\u0065\u006c\u003d\u0025\u0064 \u0065r\u0072\u003d\u0025\u0076",_bab ,_aafe );
return _fec ,_caaf ._abga ,_caaf ._ceaa ,_aafe ;};_ecbe :=_ec .NewContentStreamParser (_fgca );_ebed ,_bafe :=_ecbe .Parse ();if _bafe !=nil {_a .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020e\u0078\u0074\u0072a\u0063\u0074\u0050\u0061g\u0065\u0054\u0065\u0078\u0074\u0020\u0070\u0061\u0072\u0073\u0065\u0020\u0066\u0061\u0069\u006c\u0065\u0064\u002e\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_bafe );
return _fec ,_caaf ._abga ,_caaf ._ceaa ,_bafe ;};_fec ._gbad =_ebed ;_febf :=_ec .NewContentStreamProcessor (*_ebed );if _gaff ._cdad !=nil {_febf .SetRelaxedMode (_gaff ._cdad .RelaxedMode );};_febf .AddHandler (_ec .HandlerConditionEnumAllOperands ,"",func (_dccc *_ec .ContentStreamOperation ,_bcb _ec .GraphicsState ,_ceeg *_acf .PdfPageResources )error {_faf :=_dccc .Operand ;
if _fdee {_a .Log .Info ("\u0026&\u0026\u0020\u006f\u0070\u003d\u0025s",_dccc );};switch _faf {case "\u0071":if _bdbeg {_a .Log .Info ("\u0063\u0074\u006d\u003d\u0025\u0073",_eebe ._fabc );};_ccf .push (&_caaf );case "\u0051":if !_ccf .empty (){_caaf =*_ccf .pop ();
};_eebe ._fabc =_bcb .CTM ;if _bdbeg {_a .Log .Info ("\u0063\u0074\u006d\u003d\u0025\u0073",_eebe ._fabc );};case "\u0042\u0044\u0043":_aeab ,_ddd :=_fe .GetDict (_dccc .Params [1]);if !_ddd {_a .Log .Debug ("\u0045\u0052\u0052O\u0052\u003a\u0020\u0042D\u0043\u0020\u006f\u0070\u003d\u0025\u0073 \u0047\u0065\u0074\u0044\u0069\u0063\u0074\u0020\u0066\u0061\u0069\u006c\u0065\u0064",_dccc );
return _bafe ;};_dcef :=_aeab .Get ("\u004d\u0043\u0049\u0044");if _dcef !=nil {_fff ,_aff :=_fe .GetIntVal (_dcef );if !_aff {_a .Log .Debug ("\u0045R\u0052\u004fR\u003a\u0020\u0042\u0044C\u0020\u006f\u0070=\u0025\u0073\u002e\u0020\u0042\u0061\u0064\u0020\u006eum\u0065\u0072\u0069c\u0061\u006c \u006f\u0062\u006a\u0065\u0063\u0074.\u0020\u006f=\u0025\u0073",_dccc ,_dcef );
};_eaaf =_fff ;}else {_eaaf =-1;};if _gaff ._dbf !=nil &&_eaaf !=-1&&_gaff ._dgaf !=-1&&_gaff ._dbf .ParentTree !=nil {_ddfc :=_gaff ._dgaf ;var _eaab func (_fga []*_acf .KValue )bool ;_eaab =func (_bda []*_acf .KValue )bool {for _ ,_gada :=range _bda {if _ffcd :=_gada .GetKDict ();
_ffcd !=nil {_gacf :=_ffcd .GetChildren ();if len (_gacf )==1&&_gacf [0].GetMCID ()!=nil {if *_gacf [0].GetMCID ()==_eaaf {if _ffcd .ActualText !=nil {_aaf =_cg .TrimSpace (_ffcd .ActualText .Str ());return true ;};return false ;};}else {return _eaab (_gacf );
};};};return false ;};if _dag :=_gaff ._dbf .ParentTree .Get ("\u004e\u0075\u006d\u0073");_dag !=nil {_eedc ,_bdaa :=_fe .GetArray (_dag );if !_bdaa {_a .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0042\u0044\u0043\u0020\u006f\u0070\u003d\u0025\u0073\u002e\u0020\u0042\u0061\u0064\u0020\u004e\u0075m\u0073\u0020\u0061\u0072\u0072a\u0079\u002e \u006f\u003d\u0025\u0073",_dccc ,_dag );
}else {for _bgaa :=0;_bgaa < _eedc .Len ();_bgaa +=2{if _gcce ,_agbf :=_fe .GetInt (_eedc .Get (_bgaa ));_agbf {if int (*_gcce )==_ddfc {if _cecg :=_eedc .Get (_bgaa +1);_cecg !=nil {if _agbfb ,_bgc :=_fe .GetArray (_cecg );_bgc {for _ ,_baad :=range _agbfb .Elements (){_eded ,_bcbc :=_acf .NewKDictFromPdfObject (_baad );
if _bcbc !=nil {_a .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a \u0042\u0044\u0043\u0020\u006f\u0070\u003d\u0025\u0073\u002e\u0020\u0042\u0061d\u0020\u004b\u0044\u0069\u0063\u0074\u002e \u006f\u003d\u0025\u0073",_dccc ,_baad );continue ;};_agge :=_eded .GetChildren ();
if len (_agge )==1&&_agge [0].GetMCID ()!=nil {if *_agge [0].GetMCID ()==_eaaf {if _eded .ActualText !=nil {_aaf =_cg .TrimSpace (_eded .ActualText .Str ());};break ;}else if _eaab (_agge ){break ;};};};};};};};};};};};if _aaf ==""{_aeb :=_aeab .Get ("\u0041\u0063\u0074\u0075\u0061\u006c\u0054\u0065\u0078\u0074");
if _aeb !=nil {_aaf =_cg .TrimSpace (_aeb .String ());};};case "\u0045\u004d\u0043":_eaaf =-1;_aaf ="";case "\u0042\u0054":if _adeg {_a .Log .Debug ("\u0042\u0054\u0020\u0063\u0061\u006c\u006c\u0065\u0064\u0020\u0077\u0068\u0069\u006c\u0065 \u0069n\u0020\u0061\u0020\u0074\u0065\u0078\u0074\u0020\u006f\u0062\u006a\u0065\u0063\u0074");
_fec ._effb =append (_fec ._effb ,_dgeg ._cggfb ...);};_adeg =true ;_abgb :=_bcb ;if _dbgd {_abgb =_ec .GraphicsState {};_abgb .CTM =_eebe ._fabc ;};_abgb .CTM =_ceed .Mult (_abgb .CTM );_dgeg =_acfa (_gaff ,_ceeg ,_abgb ,&_caaf ,&_ccf );_eebe ._eecfa =_dgeg ;
case "\u0045\u0054":if !_adeg {_a .Log .Debug ("\u0045\u0054\u0020ca\u006c\u006c\u0065\u0064\u0020\u006f\u0075\u0074\u0073i\u0064e\u0020o\u0066 \u0061\u0020\u0074\u0065\u0078\u0074\u0020\u006f\u0062\u006a\u0065\u0063\u0074");};_adeg =false ;_fec ._effb =append (_fec ._effb ,_dgeg ._cggfb ...);
_dgeg .reset ();case "\u0054\u002a":_dgeg .nextLine ();case "\u0054\u0064":if _eebd ,_cbbd :=_dgeg .checkOp (_dccc ,2,true );!_eebd {_a .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_cbbd );return _cbbd ;
};_gaa ,_ceeb ,_gde :=_gbccb (_dccc .Params );if _gde !=nil {return _gde ;};_dgeg .moveText (_gaa ,_ceeb );case "\u0054\u0044":if _aega ,_eabe :=_dgeg .checkOp (_dccc ,2,true );!_aega {_a .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_eabe );
return _eabe ;};_gbed ,_cddg ,_efbb :=_gbccb (_dccc .Params );if _efbb !=nil {_a .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_efbb );return _efbb ;};_dgeg .moveTextSetLeading (_gbed ,_cddg );case "\u0054\u006a":if _gaea ,_fcc :=_dgeg .checkOp (_dccc ,1,true );
!_gaea {_a .Log .Debug ("\u0045\u0052\u0052\u004fR:\u0020\u0054\u006a\u0020\u006f\u0070\u003d\u0025\u0073\u0020\u0065\u0072\u0072\u003d%\u0076",_dccc ,_fcc );return _fcc ;};_gcf :=_fe .TraceToDirectObject (_dccc .Params [0]);_ccdb ,_dcab :=_fe .GetStringBytes (_gcf );
if !_dcab {_a .Log .Debug ("\u0045\u0052R\u004f\u0052\u003a\u0020T\u006a\u0020o\u0070\u003d\u0025\u0073\u0020\u0047\u0065\u0074S\u0074\u0072\u0069\u006e\u0067\u0042\u0079\u0074\u0065\u0073\u0020\u0066a\u0069\u006c\u0065\u0064",_dccc );return _fe .ErrTypeError ;
};return _dgeg .showText (_gcf ,_ccdb ,_eaaf ,_aaf );case "\u0054\u004a":if _cdg ,_fdaa :=_dgeg .checkOp (_dccc ,1,true );!_cdg {_a .Log .Debug ("\u0045\u0052R\u004f\u0052\u003a \u0054\u004a\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_fdaa );return _fdaa ;
};_gfa ,_bef :=_fe .GetArray (_dccc .Params [0]);if !_bef {_a .Log .Debug ("\u0045\u0052\u0052OR\u003a\u0020\u0054\u004a\u0020\u006f\u0070\u003d\u0025s\u0020G\u0065t\u0041r\u0072\u0061\u0079\u0056\u0061\u006c\u0020\u0066\u0061\u0069\u006c\u0065\u0064",_dccc );
return _bafe ;};return _dgeg .showTextAdjusted (_gfa ,_eaaf ,_aaf );case "\u0027":if _aefa ,_dcee :=_dgeg .checkOp (_dccc ,1,true );!_aefa {_a .Log .Debug ("\u0045R\u0052O\u0052\u003a\u0020\u0027\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_dcee );return _dcee ;
};_aegg :=_fe .TraceToDirectObject (_dccc .Params [0]);_fef ,_aedb :=_fe .GetStringBytes (_aegg );if !_aedb {_a .Log .Debug ("\u0045\u0052RO\u0052\u003a\u0020'\u0020\u006f\u0070\u003d%s \u0047et\u0053\u0074\u0072\u0069\u006e\u0067\u0042yt\u0065\u0073\u0020\u0066\u0061\u0069\u006ce\u0064",_dccc );
return _fe .ErrTypeError ;};_dgeg .nextLine ();return _dgeg .showText (_aegg ,_fef ,_eaaf ,_aaf );case "\u0022":if _ebg ,_dbac :=_dgeg .checkOp (_dccc ,3,true );!_ebg {_a .Log .Debug ("\u0045R\u0052O\u0052\u003a\u0020\u0022\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_dbac );
return _dbac ;};_ffed ,_bbb ,_dbb :=_gbccb (_dccc .Params [:2]);if _dbb !=nil {return _dbb ;};_aade :=_fe .TraceToDirectObject (_dccc .Params [2]);_geced ,_efbc :=_fe .GetStringBytes (_aade );if !_efbc {_a .Log .Debug ("\u0045\u0052RO\u0052\u003a\u0020\"\u0020\u006f\u0070\u003d%s \u0047et\u0053\u0074\u0072\u0069\u006e\u0067\u0042yt\u0065\u0073\u0020\u0066\u0061\u0069\u006ce\u0064",_dccc );
return _fe .ErrTypeError ;};_dgeg .setCharSpacing (_ffed );_dgeg .setWordSpacing (_bbb );_dgeg .nextLine ();return _dgeg .showText (_aade ,_geced ,_eaaf ,_aaf );case "\u0054\u004c":_ddg ,_gceg :=_dadf (_dccc );if _gceg !=nil {_a .Log .Debug ("\u0045\u0052R\u004f\u0052\u003a \u0054\u004c\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_gceg );
return _gceg ;};_dgeg .setTextLeading (_ddg );case "\u0054\u0063":_dcefc ,_aabg :=_dadf (_dccc );if _aabg !=nil {_a .Log .Debug ("\u0045\u0052R\u004f\u0052\u003a \u0054\u0063\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_aabg );return _aabg ;};_dgeg .setCharSpacing (_dcefc );
case "\u0054\u0066":if _gdffb ,_acbf :=_dgeg .checkOp (_dccc ,2,true );!_gdffb {_a .Log .Debug ("\u0045\u0052R\u004f\u0052\u003a \u0054\u0066\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_acbf );return _acbf ;};_degc ,_gfdf :=_fe .GetNameVal (_dccc .Params [0]);
if !_gfdf {_a .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a \u0054\u0066\u0020\u006f\u0070\u003d\u0025\u0073\u0020\u0047\u0065\u0074\u004ea\u006d\u0065\u0056\u0061\u006c\u0020\u0066a\u0069\u006c\u0065\u0064",_dccc );return _fe .ErrTypeError ;};_effa ,_debg :=_fe .GetNumberAsFloat (_dccc .Params [1]);
if !_gfdf {_a .Log .Debug ("\u0045\u0052\u0052O\u0052\u003a\u0020\u0054\u0066\u0020\u006f\u0070\u003d\u0025\u0073\u0020\u0047\u0065\u0074\u0046\u006c\u006f\u0061\u0074\u0056\u0061\u006c\u0020\u0066\u0061\u0069\u006c\u0065d\u002e\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_dccc ,_debg );
return _debg ;};_debg =_dgeg .setFont (_degc ,_effa );_dgeg ._fdabb =_agb .Is (_debg ,_fe .ErrNotSupported );if _debg !=nil &&!_dgeg ._fdabb {return _debg ;};case "\u0054\u006d":if _adcg ,_eeffb :=_dgeg .checkOp (_dccc ,6,true );!_adcg {_a .Log .Debug ("\u0045\u0052R\u004f\u0052\u003a \u0054\u006d\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_eeffb );
return _eeffb ;};_ggb ,_fab :=_fe .GetNumbersAsFloat (_dccc .Params );if _fab !=nil {_a .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_fab );return _fab ;};_dgeg .setTextMatrix (_ggb );case "\u0054\u0072":if _afaf ,_agde :=_dgeg .checkOp (_dccc ,1,true );
!_afaf {_a .Log .Debug ("\u0045\u0052R\u004f\u0052\u003a \u0054\u0072\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_agde );return _agde ;};_fag ,_agf :=_fe .GetIntVal (_dccc .Params [0]);if !_agf {_a .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0054\u0072\u0020\u006f\u0070\u003d\u0025\u0073 \u0047e\u0074\u0049\u006e\u0074\u0056\u0061\u006c\u0020\u0066\u0061\u0069\u006c\u0065\u0064",_dccc );
return _fe .ErrTypeError ;};_dgeg .setTextRenderMode (_fag );case "\u0054\u0073":if _daf ,_dfdg :=_dgeg .checkOp (_dccc ,1,true );!_daf {_a .Log .Debug ("\u0045\u0052R\u004f\u0052\u003a \u0054\u0073\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_dfdg );return _dfdg ;
};_fdab ,_afb :=_fe .GetNumberAsFloat (_dccc .Params [0]);if _afb !=nil {_a .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_afb );return _afb ;};_dgeg .setTextRise (_fdab );case "\u0054\u0077":if _gdge ,_fcfc :=_dgeg .checkOp (_dccc ,1,true );
!_gdge {_a .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_fcfc );return _fcfc ;};_eddb ,_cfbc :=_fe .GetNumberAsFloat (_dccc .Params [0]);if _cfbc !=nil {_a .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_cfbc );
return _cfbc ;};_dgeg .setWordSpacing (_eddb );case "\u0054\u007a":if _cadb ,_degcf :=_dgeg .checkOp (_dccc ,1,true );!_cadb {_a .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_degcf );return _degcf ;};_dbgc ,_bcf :=_fe .GetNumberAsFloat (_dccc .Params [0]);
if _bcf !=nil {_a .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_bcf );return _bcf ;};_dgeg .setHorizScaling (_dbgc );case "\u0063\u006d":if !_dbgd {_eebe ._fabc =_bcb .CTM ;};if _eebe ._fabc .Singular (){_bbbe :=_aeg .IdentityMatrix ().Translate (_eebe ._fabc .Translation ());
_a .Log .Debug ("S\u0069n\u0067\u0075\u006c\u0061\u0072\u0020\u0063\u0074m\u003d\u0025\u0073\u2192%s",_eebe ._fabc ,_bbbe );_eebe ._fabc =_bbbe ;};if _bdbeg {_a .Log .Info ("\u0063\u0074\u006d\u003d\u0025\u0073",_eebe ._fabc );};case "\u006d":if len (_dccc .Params )!=2{_a .Log .Debug ("\u0057\u0041\u0052\u004e\u003a\u0020\u0065\u0072\u0072o\u0072\u0020\u0077\u0068\u0069\u006c\u0065\u0020\u0070\u0072\u006f\u0063\u0065\u0073\u0073\u0069\u006e\u0067\u0020\u0060\u006d\u0060\u0020o\u0070\u0065r\u0061\u0074o\u0072\u003a\u0020\u0025\u0076\u002e\u0020\u004f\u0075\u0074\u0070\u0075\u0074 m\u0061\u0079\u0020\u0062\u0065\u0020\u0069\u006e\u0063o\u0072\u0072\u0065\u0063\u0074\u002e",_fede );
return nil ;};_cgfab ,_eaef :=_fe .GetNumbersAsFloat (_dccc .Params );if _eaef !=nil {return _eaef ;};_eebe .moveTo (_cgfab [0],_cgfab [1]);case "\u006c":if len (_dccc .Params )!=2{_a .Log .Debug ("\u0057\u0041\u0052\u004e\u003a\u0020\u0065\u0072\u0072o\u0072\u0020\u0077\u0068\u0069\u006c\u0065\u0020\u0070\u0072\u006f\u0063\u0065\u0073\u0073\u0069\u006e\u0067\u0020\u0060\u006c\u0060\u0020o\u0070\u0065r\u0061\u0074o\u0072\u003a\u0020\u0025\u0076\u002e\u0020\u004f\u0075\u0074\u0070\u0075\u0074 m\u0061\u0079\u0020\u0062\u0065\u0020\u0069\u006e\u0063o\u0072\u0072\u0065\u0063\u0074\u002e",_fede );
return nil ;};_dddd ,_fefc :=_fe .GetNumbersAsFloat (_dccc .Params );if _fefc !=nil {return _fefc ;};_eebe .lineTo (_dddd [0],_dddd [1]);case "\u0063":if len (_dccc .Params )!=6{return _fede ;};_baab ,_aaad :=_fe .GetNumbersAsFloat (_dccc .Params );if _aaad !=nil {return _aaad ;
};_a .Log .Debug ("\u0043u\u0062\u0069\u0063\u0020b\u0065\u007a\u0069\u0065\u0072 \u0070a\u0072a\u006d\u0073\u003a\u0020\u0025\u002e\u0032f",_baab );_eebe .cubicTo (_baab [0],_baab [1],_baab [2],_baab [3],_baab [4],_baab [5]);case "\u0076","\u0079":if len (_dccc .Params )!=4{return _fede ;
};_deec ,_cfeec :=_fe .GetNumbersAsFloat (_dccc .Params );if _cfeec !=nil {return _cfeec ;};_a .Log .Debug ("\u0043u\u0062\u0069\u0063\u0020b\u0065\u007a\u0069\u0065\u0072 \u0070a\u0072a\u006d\u0073\u003a\u0020\u0025\u002e\u0032f",_deec );_eebe .quadraticTo (_deec [0],_deec [1],_deec [2],_deec [3]);
case "\u0068":_eebe .closePath ();case "\u0072\u0065":if len (_dccc .Params )!=4{return _fede ;};_dagf ,_eagb :=_fe .GetNumbersAsFloat (_dccc .Params );if _eagb !=nil {return _eagb ;};_eebe .drawRectangle (_dagf [0],_dagf [1],_dagf [2],_dagf [3]);_eebe .closePath ();
case "\u0053":_eebe .stroke (&_fec ._fege );_eebe .clearPath ();case "\u0073":_eebe .closePath ();_eebe .stroke (&_fec ._fege );_eebe .clearPath ();case "\u0046":_eebe .fill (&_fec ._gaaab );_eebe .clearPath ();case "\u0066","\u0066\u002a":_eebe .closePath ();
_eebe .fill (&_fec ._gaaab );_eebe .clearPath ();case "\u0042","\u0042\u002a":_eebe .fill (&_fec ._gaaab );_eebe .stroke (&_fec ._fege );_eebe .clearPath ();case "\u0062","\u0062\u002a":_eebe .closePath ();_eebe .fill (&_fec ._gaaab );_eebe .stroke (&_fec ._fege );
_eebe .clearPath ();case "\u006e":_eebe .clearPath ();case "\u0044\u006f":if len (_dccc .Params )==0{_a .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0065\u0078\u0070\u0065\u0063\u0074\u0065\u0064\u0020\u0058\u004fbj\u0065c\u0074\u0020\u006e\u0061\u006d\u0065\u0020\u006f\u0070\u0065\u0072\u0061n\u0064\u0020\u0066\u006f\u0072\u0020\u0044\u006f\u0020\u006f\u0070\u0065\u0072\u0061\u0074\u006f\u0072.\u0020\u0047\u006f\u0074\u0020\u0025\u002b\u0076\u002e",_dccc .Params );
return _fe .ErrRangeError ;};_fdea ,_gcg :=_fe .GetName (_dccc .Params [0]);if !_gcg {_a .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0069\u006e\u0076\u0061l\u0069\u0064\u0020\u0044\u006f\u0020\u006f\u0070e\u0072a\u0074\u006f\u0072\u0020\u0058\u004f\u0062\u006a\u0065\u0063\u0074\u0020\u006e\u0061\u006d\u0065\u0020\u006fp\u0065\u0072\u0061\u006e\u0064\u003a\u0020\u0025\u002b\u0076\u002e",_dccc .Params [0]);
return _fe .ErrTypeError ;};_ ,_cedb :=_ceeg .GetXObjectByName (*_fdea );if _cedb !=_acf .XObjectTypeForm {break ;};_gege ,_gcg :=_gaff ._dfd [_fdea .String ()];if !_gcg {_bcfe ,_gcfg :=_ceeg .GetXObjectFormByName (*_fdea );if _gcfg !=nil {_a .Log .Debug ("\u0045R\u0052\u004f\u0052\u003a\u0020\u0025v",_gcfg );
return _gcfg ;};_dfae ,_gcfg :=_bcfe .GetContentStream ();if _gcfg !=nil {_a .Log .Debug ("\u0045R\u0052\u004f\u0052\u003a\u0020\u0025v",_gcfg );return _gcfg ;};_eafc :=_bcfe .Resources ;if _eafc ==nil {_eafc =_ceeg ;};_ceg :=_bcb .CTM ;if _gdcb ,_dcae :=_fe .GetArray (_bcfe .Matrix );
_dcae {_gaaa ,_dcaa :=_gdcb .GetAsFloat64Slice ();if _dcaa !=nil {return _dcaa ;};if len (_gaaa )!=6{return _fede ;};_add :=_aeg .NewMatrix (_gaaa [0],_gaaa [1],_gaaa [2],_gaaa [3],_gaaa [4],_gaaa [5]);_ceg =_bcb .CTM .Mult (_add );};_aabd ,_ebfb ,_fcbe ,_gcfg :=_gaff .extractPageText (string (_dfae ),_eafc ,_ceed .Mult (_ceg ),_bab +1,false );
if _gcfg !=nil {_a .Log .Debug ("\u0045R\u0052\u004f\u0052\u003a\u0020\u0025v",_gcfg );return _gcfg ;};_gege =textResult {*_aabd ,_ebfb ,_fcbe };_gaff ._dfd [_fdea .String ()]=_gege ;};_eebe ._fabc =_bcb .CTM ;if _bdbeg {_a .Log .Info ("\u0063\u0074\u006d\u003d\u0025\u0073",_eebe ._fabc );
};_fec ._effb =append (_fec ._effb ,_gege ._gaec ._effb ...);_fec ._fege =append (_fec ._fege ,_gege ._gaec ._fege ...);_fec ._gaaab =append (_fec ._gaaab ,_gege ._gaec ._gaaab ...);_caaf ._abga +=_gege ._eecd ;_caaf ._ceaa +=_gege ._ecc ;case "\u0072\u0067","\u0067","\u006b","\u0063\u0073","\u0073\u0063","\u0073\u0063\u006e":_dgeg ._dbc .ColorspaceNonStroking =_bcb .ColorspaceNonStroking ;
_dgeg ._dbc .ColorNonStroking =_bcb .ColorNonStroking ;case "\u0052\u0047","\u0047","\u004b","\u0043\u0053","\u0053\u0043","\u0053\u0043\u004e":_dgeg ._dbc .ColorspaceStroking =_bcb .ColorspaceStroking ;_dgeg ._dbc .ColorStroking =_bcb .ColorStroking ;
};return nil ;});_bafe =_febf .Process (_bag );if _gaff ._cdad !=nil &&_gaff ._cdad .IncludeAnnotations &&!_dbgd {for _ ,_ccda :=range _gaff ._aae {_bagf ,_edc :=_fe .GetDict (_ccda .AP );if !_edc {continue ;};_gbc ,_edc :=_bagf .Get ("\u004e").(*_fe .PdfObjectStream );
if !_edc {continue ;};_fefb ,_face :=_fe .DecodeStream (_gbc );if _face !=nil {_a .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u006f\u006e\u0020\u0064\u0065c\u006f\u0064\u0065\u0020\u0073\u0074\u0072\u0065\u0061\u006d:\u0020\u0025\u0076",_face );
continue ;};_bbfb :=_gbc .PdfObjectDictionary .Get ("\u0052e\u0073\u006f\u0075\u0072\u0063\u0065s");_ggfg ,_face :=_acf .NewPdfPageResourcesFromDict (_bbfb .(*_fe .PdfObjectDictionary ));if _face !=nil {_a .Log .Debug ("\u0045\u0072\u0072\u006f\u0072 \u006f\u006e\u0020\u0067\u0065\u0074\u0074\u0069\u006e\u0067\u0020\u0061\u006en\u006f\u0074\u0061\u0074\u0069\u006f\u006e\u0020\u0072\u0065\u0073\u006f\u0075\u0072\u0063\u0065\u0073\u003a\u0020\u0025\u0076",_face );
continue ;};_ecaf :=_aeg .IdentityMatrix ();_egbg ,_edc :=_gbc .PdfObjectDictionary .Get ("\u004d\u0061\u0074\u0072\u0069\u0078").(*_fe .PdfObjectArray );if _edc {_abb ,_cdfc :=_egbg .GetAsFloat64Slice ();if _cdfc !=nil {_a .Log .Debug ("\u0045\u0072\u0072or\u0020\u006f\u006e\u0020\u0067\u0065\u0074\u0074\u0069n\u0067 \u0066l\u006fa\u0074\u0036\u0034\u0020\u0073\u006c\u0069\u0063\u0065\u003a\u0020\u0025\u0076",_cdfc );
continue ;};if len (_abb )!=6{_a .Log .Debug ("I\u006e\u0076\u0061\u006c\u0069\u0064 \u006d\u0061\u0074\u0072\u0069\u0078\u0020\u0073\u006ci\u0063\u0065\u0020l\u0065n\u0067\u0074\u0068");continue ;};_ecaf =_aeg .NewMatrix (_abb [0],_abb [1],_abb [2],_abb [3],_abb [4],_abb [5]);
};_fgdb ,_edc :=_gaff ._ggd [_gbc .String ()];if !_edc {_gfc ,_dfef ,_bbd ,_aeabb :=_gaff .extractPageText (string (_fefb ),_ggfg ,_ecaf ,_bab +1,true );if _aeabb !=nil {_a .Log .Debug ("\u0045\u0052R\u004f\u0052\u0020\u0065x\u0074\u0072a\u0063\u0074\u0069\u006e\u0067\u0020\u0061\u006en\u006f\u0074\u0061\u0074\u0069\u006f\u006e\u0020\u0074\u0065\u0078\u0074s\u003a\u0020\u0025\u0076",_aeabb );
continue ;};_fgdb =textResult {*_gfc ,_dfef ,_bbd };_gaff ._ggd [_gbc .String ()]=_fgdb ;};_fec ._effb =append (_fec ._effb ,_fgdb ._gaec ._effb ...);_fec ._fege =append (_fec ._fege ,_fgdb ._gaec ._fege ...);_fec ._gaaab =append (_fec ._gaaab ,_fgdb ._gaec ._gaaab ...);
_caaf ._abga +=_fgdb ._eecd ;_caaf ._ceaa +=_fgdb ._ecc ;};};return _fec ,_caaf ._abga ,_caaf ._ceaa ,_bafe ;};

// ExtractTextWithStats works like ExtractText but returns the number of characters in the output
// (`numChars`) and the number of characters that were not decoded (`numMisses`).
func (_aaeg *Extractor )ExtractTextWithStats ()(_ffeb string ,_fea int ,_adc int ,_degf error ){_efef ,_fea ,_adc ,_degf :=_aaeg .ExtractPageText ();if _degf !=nil {return "",_fea ,_adc ,_degf ;};return _efef .Text (),_fea ,_adc ,nil ;};

// String returns a description of `k`.
func (_bfaf rulingKind )String ()string {_eaec ,_ecbbe :=_egdec [_bfaf ];if !_ecbbe {return _gb .Sprintf ("\u004e\u006ft\u0020\u0061\u0020r\u0075\u006c\u0069\u006e\u0067\u003a\u0020\u0025\u0064",_bfaf );};return _eaec ;};func (_fagae paraList )llyOrdering ()[]int {_bbad :=make ([]int ,len (_fagae ));
for _bggea :=range _fagae {_bbad [_bggea ]=_bggea ;};_g .SliceStable (_bbad ,func (_eccc ,_ddbbc int )bool {_cafc ,_gbde :=_bbad [_eccc ],_bbad [_ddbbc ];return _fagae [_cafc ].Lly < _fagae [_gbde ].Lly ;});return _bbad ;};

// ImageExtractOptions contains options for controlling image extraction from
// PDF pages.
type ImageExtractOptions struct{IncludeInlineStencilMasks bool ;};var _fdfc string ="\u0028\u003f\u0069\u0029\u005e\u0028\u004d\u007b\u0030\u002c\u0033\u007d\u0029\u0028\u0043\u0028?\u003a\u0044\u007cM\u0029\u007c\u0044\u003f\u0043{\u0030\u002c\u0033\u007d\u0029\u0028\u0058\u0028\u003f\u003a\u004c\u007c\u0043\u0029\u007cL\u003f\u0058\u007b\u0030\u002c\u0033}\u0029\u0028\u0049\u0028\u003f\u003a\u0056\u007c\u0058\u0029\u007c\u0056\u003f\u0049\u007b\u0030\u002c\u0033\u007d\u0029\u0028\u005c\u0029\u007c\u005c\u002e\u0029\u007c\u005e\u005c\u0028\u0028\u004d\u007b\u0030\u002c\u0033\u007d\u0029\u0028\u0043\u0028\u003f\u003aD\u007cM\u0029\u007c\u0044\u003f\u0043\u007b\u0030\u002c\u0033\u007d\u0029\u0028\u0058\u0028?\u003a\u004c\u007c\u0043\u0029\u007c\u004c?\u0058\u007b0\u002c\u0033\u007d\u0029(\u0049\u0028\u003f\u003a\u0056|\u0058\u0029\u007c\u0056\u003f\u0049\u007b\u0030\u002c\u0033\u007d\u0029\u005c\u0029";
func (_gbbge *textObject )setCharSpacing (_cggd float64 ){if _gbbge ==nil {return ;};_gbbge ._eea ._edg =_cggd ;if _becg {_a .Log .Info ("\u0073\u0065t\u0043\u0068\u0061\u0072\u0053\u0070\u0061\u0063\u0069\u006e\u0067\u003a\u0020\u0025\u002e\u0032\u0066\u0020\u0073\u0074\u0061\u0074e=\u0025\u0073",_cggd ,_gbbge ._eea .String ());
};};func _aefe (_gbfb string ,_cgd string )([][]int ,error ){_cefe ,_bcad :=_dc .Compile (_gbfb );if _bcad !=nil {return nil ,_gb .Errorf ("\u0065\u0072\u0072\u006f\u0072\u0020c\u006f\u006d\u0070\u0069\u006c\u0069\u006e\u0067\u0020\u0072\u0065\u0067\u0065x\u0020\u0070\u0061\u0074\u0074\u0065\u0072n\u003a\u0020\u0025\u0077",_bcad );
};_ggg :=_cefe .FindAllStringIndex (_cgd ,-1);return _ggg ,nil ;};func (_gccd *wordBag )firstReadingIndex (_dfgb int )int {_ebgf :=_gccd .firstWord (_dfgb )._facbbf ;_ecafg :=float64 (_dfgb +1)*_fbfbb ;_baae :=_ecafg +_badc *_ebgf ;_ebfd :=_dfgb ;for _ ,_ceedb :=range _gccd .depthBand (_ecafg ,_baae ){if _acdg (_gccd .firstWord (_ceedb ),_gccd .firstWord (_ebfd ))< 0{_ebfd =_ceedb ;
};};return _ebfd ;};func _becae (_caga ,_bfdcd _aeg .Point ,_fagde _fd .Color )(*ruling ,bool ){_bbdb :=lineRuling {_gbcde :_caga ,_eaaeg :_bfdcd ,_afbb :_gdda (_caga ,_bfdcd ),Color :_fagde };if _bbdb ._afbb ==_fgdf {return nil ,false ;};return _bbdb .asRuling ();
};type cachedImage struct{_cgb *_acf .Image ;_aefg _acf .PdfColorspace ;};func (_cedf gridTiling )log (_feff string ){if !_caegd {return ;};_a .Log .Info ("\u0074i\u006ci\u006e\u0067\u003a\u0020\u0025d\u0020\u0078 \u0025\u0064\u0020\u0025\u0071",len (_cedf ._aeba ),len (_cedf ._dead ),_feff );
_gb .Printf ("\u0020\u0020\u0020l\u006c\u0078\u003d\u0025\u002e\u0032\u0066\u000a",_cedf ._aeba );_gb .Printf ("\u0020\u0020\u0020l\u006c\u0079\u003d\u0025\u002e\u0032\u0066\u000a",_cedf ._dead );for _ggac ,_ggda :=range _cedf ._dead {_cgagf ,_fgggfg :=_cedf ._bddfg [_ggda ];
if !_fgggfg {continue ;};_gb .Printf ("%\u0034\u0064\u003a\u0020\u0025\u0036\u002e\u0032\u0066\u000a",_ggac ,_ggda );for _dfec ,_ffaf :=range _cedf ._aeba {_egcaf ,_eddfc :=_cgagf [_ffaf ];if !_eddfc {continue ;};_gb .Printf ("\u0025\u0038\u0064\u003a\u0020\u0025\u0073\u000a",_dfec ,_egcaf .String ());
};};};var _fdcbf =[]string {"\u2756","\u27a2","\u2713","\u2022","\uf0a7","\u25a1","\u2212","\u25a0","\u25aa","\u006f"};func _ffdf (_gcdaf []int ,_fde *TextMarkArray ,_eebf string )(*TextMarkArray ,Box ,error ){_caabe :=Box {};_gdg :=_gcdaf [0];_fad :=_gcdaf [1];
_fdddc :=len (_eebf )-len (_cg .TrimLeft (_eebf ,"\u0020"));_ada :=len (_eebf )-len (_cg .TrimRight (_eebf ,"\u0020\u000a"));_gdg =_gdg +_fdddc ;_fad =_fad -_ada ;_eeeg ,_eca :=_fde .RangeOffset (_gdg ,_fad );if _eca !=nil {return nil ,_caabe ,_eca ;};
_cfge ,_aaab :=_eeeg .BBox ();if !_aaab {return nil ,_caabe ,_gb .Errorf ("\u0073\u0070\u0061\u006e\u004d\u0061\u0072\u006bs\u002e\u0042\u0042ox\u0020\u0068\u0061\u0073\u0020\u006eo\u0020\u0062\u006f\u0075\u006e\u0064\u0069\u006e\u0067\u0020\u0062\u006f\u0078\u002e\u0020s\u0070\u0061\u006e\u004d\u0061\u0072\u006b\u0073=\u0025\u0073",_eeeg );
};_caabe =Box {BBox :_cfge };return _eeeg ,_caabe ,nil ;};func (_aag rulingList )vertsHorzs ()(rulingList ,rulingList ){var _gaffb ,_faae rulingList ;for _ ,_decg :=range _aag {switch _decg ._becca {case _ffgdf :_gaffb =append (_gaffb ,_decg );case _bgbc :_faae =append (_faae ,_decg );
};};return _gaffb ,_faae ;};

// Marks returns the TextMark collection for a page. It represents all the text on the page.
func (_cbe PageText )Marks ()*TextMarkArray {return &TextMarkArray {_bcea :_cbe ._bece }};func _eacbg (_afade []pathSection ){if _bdff < 0.0{return ;};if _eagg {_a .Log .Info ("\u0067\u0072\u0061\u006e\u0075\u006c\u0061\u0072\u0069\u007a\u0065\u003a\u0020\u0025\u0064 \u0073u\u0062\u0070\u0061\u0074\u0068\u0020\u0073\u0065\u0063\u0074\u0069\u006f\u006e\u0073",len (_afade ));
};for _bebgb ,_dfdef :=range _afade {for _aeffe ,_ebce :=range _dfdef ._dbe {for _abed ,_bbeba :=range _ebce ._adcb {_ebce ._adcb [_abed ]=_aeg .Point {X :_cbfa (_bbeba .X ),Y :_cbfa (_bbeba .Y )};if _eagg {_gdbfa :=_ebce ._adcb [_abed ];if !_gagac (_bbeba ,_gdbfa ){_fdgb :=_aeg .Point {X :_gdbfa .X -_bbeba .X ,Y :_gdbfa .Y -_bbeba .Y };
_gb .Printf ("\u0025\u0034d \u002d\u0020\u00254\u0064\u0020\u002d\u0020%4d\u003a %\u002e\u0032\u0066\u0020\u2192\u0020\u0025.2\u0066\u0020\u0028\u0025\u0067\u0029\u000a",_bebgb ,_aeffe ,_abed ,_bbeba ,_gdbfa ,_fdgb );};};};};};};

// NewFromContents creates a new extractor from contents and page resources.
func NewFromContents (contents string ,resources *_acf .PdfPageResources )(*Extractor ,error ){const _baa ="\u0065x\u0074\u0072\u0061\u0063t\u006f\u0072\u002e\u004e\u0065w\u0046r\u006fm\u0043\u006f\u006e\u0074\u0065\u006e\u0074s";_agbe :=&Extractor {_dfg :contents ,_cda :resources ,_cea :map[string ]fontEntry {},_dfd :map[string ]textResult {}};
_ae .TrackUse (_baa );return _agbe ,nil ;};func (_agace paraList )topoOrder ()[]int {if _dfdd {_a .Log .Info ("\u0074\u006f\u0070\u006f\u004f\u0072\u0064\u0065\u0072\u003a");};_adbf :=len (_agace );_ddbf :=make ([]bool ,_adbf );_dgdc :=make ([]int ,0,_adbf );
_aege :=_agace .llyOrdering ();var _bbfff func (_aacc int );_bbfff =func (_aggdc int ){_ddbf [_aggdc ]=true ;for _dgbe :=0;_dgbe < _adbf ;_dgbe ++{if !_ddbf [_dgbe ]{if _agace .readBefore (_aege ,_aggdc ,_dgbe ){_bbfff (_dgbe );};};};_dgdc =append (_dgdc ,_aggdc );
};for _debgd :=0;_debgd < _adbf ;_debgd ++{if !_ddbf [_debgd ]{_bbfff (_debgd );};};return _dcba (_dgdc );};func (_ggeg rulingList )merge ()*ruling {_dfdf :=_ggeg [0]._eeac ;_ebca :=_ggeg [0]._feded ;_fcbg :=_ggeg [0]._bbebb ;for _ ,_gbef :=range _ggeg [1:]{_dfdf +=_gbef ._eeac ;
if _gbef ._feded < _ebca {_ebca =_gbef ._feded ;};if _gbef ._bbebb > _fcbg {_fcbg =_gbef ._bbebb ;};};_aaffg :=&ruling {_becca :_ggeg [0]._becca ,_fgaa :_ggeg [0]._fgaa ,Color :_ggeg [0].Color ,_eeac :_dfdf /float64 (len (_ggeg )),_feded :_ebca ,_bbebb :_fcbg };
if _dgea {_a .Log .Info ("\u006de\u0072g\u0065\u003a\u0020\u0025\u0032d\u0020\u0076e\u0063\u0073\u0020\u0025\u0073",len (_ggeg ),_aaffg );for _cfdc ,_gdde :=range _ggeg {_gb .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0073\u000a",_cfdc ,_gdde );};};
return _aaffg ;};func _cadbe (_abba *wordBag ,_bbce int )*textLine {_gbcd :=_abba .firstWord (_bbce );_egfbb :=textLine {PdfRectangle :_gbcd .PdfRectangle ,_aebd :_gbcd ._facbbf ,_dgda :_gbcd ._dbbagg };_egfbb .pullWord (_abba ,_gbcd ,_bbce );return &_egfbb ;
};func _cbce (_aedc func (*wordBag ,*textWord ,float64 )bool ,_daee float64 )func (*wordBag ,*textWord )bool {return func (_daae *wordBag ,_beda *textWord )bool {return _aedc (_daae ,_beda ,_daee )};};func (_ffdfb *shapesState )clearPath (){_ffdfb ._feae =nil ;
_ffdfb ._dec =false ;if _bdbeg {_a .Log .Info ("\u0043\u004c\u0045A\u0052\u003a\u0020\u0073\u0073\u003d\u0025\u0073",_ffdfb );};};func (_feaeg rulingList )snapToGroupsDirection ()rulingList {_feaeg .sortStrict ();_fddb :=make (map[*ruling ]rulingList ,len (_feaeg ));
_cffc :=_feaeg [0];_eeafee :=func (_egcee *ruling ){_cffc =_egcee ;_fddb [_cffc ]=rulingList {_egcee }};_eeafee (_feaeg [0]);for _ ,_aggab :=range _feaeg [1:]{if _aggab ._eeac < _cffc ._eeac -_deef {_a .Log .Error ("\u0073\u006e\u0061\u0070T\u006f\u0047\u0072\u006f\u0075\u0070\u0073\u0044\u0069r\u0065\u0063\u0074\u0069\u006f\u006e\u003a\u0020\u0057\u0072\u006f\u006e\u0067\u0020\u0070\u0072\u0069\u006da\u0072\u0079\u0020\u006f\u0072d\u0065\u0072\u002e\u000a\u0009\u0076\u0030\u003d\u0025\u0073\u000a\u0009\u0020\u0076\u003d\u0025\u0073",_cffc ,_aggab );
};if _aggab ._eeac > _cffc ._eeac +_cadg {_eeafee (_aggab );}else {_fddb [_cffc ]=append (_fddb [_cffc ],_aggab );};};_fggcd :=make (map[*ruling ]float64 ,len (_fddb ));_adfdd :=make (map[*ruling ]*ruling ,len (_feaeg ));for _bfg ,_aabcf :=range _fddb {_fggcd [_bfg ]=_aabcf .mergePrimary ();
for _ ,_dabadb :=range _aabcf {_adfdd [_dabadb ]=_bfg ;};};for _ ,_egfcde :=range _feaeg {_egfcde ._eeac =_fggcd [_adfdd [_egfcde ]];};_ffaae :=make (rulingList ,0,len (_feaeg ));for _ ,_afaa :=range _fddb {_bfaeg :=_afaa .splitSec ();for _ccaa ,_eddgb :=range _bfaeg {_egcca :=_eddgb .merge ();
if len (_ffaae )> 0{_cafbd :=_ffaae [len (_ffaae )-1];if _cafbd .alignsPrimary (_egcca )&&_cafbd .alignsSec (_egcca ){_a .Log .Error ("\u0073\u006e\u0061\u0070\u0054\u006fG\u0072\u006f\u0075\u0070\u0073\u0044\u0069\u0072\u0065\u0063\u0074\u0069\u006f\u006e\u003a\u0020\u0044\u0075\u0070\u006ci\u0063\u0061\u0074\u0065\u0020\u0069\u003d\u0025\u0064\u000a\u0009\u0077\u003d\u0025s\u000a\t\u0076\u003d\u0025\u0073",_ccaa ,_cafbd ,_egcca );
continue ;};};_ffaae =append (_ffaae ,_egcca );};};_ffaae .sortStrict ();return _ffaae ;};func _ggf (_gec []Font ,_ebf string )bool {for _ ,_fcb :=range _gec {if _fcb .FontName ==_ebf {return true ;};};return false ;};func (_aadd *textTable )getRight ()paraList {_dffb :=make (paraList ,_aadd ._acdga );
for _agddd :=0;_agddd < _aadd ._acdga ;_agddd ++{_aefc :=_aadd .get (_aadd ._bdea -1,_agddd )._cdfcc ;if _aefc .taken (){return nil ;};_dffb [_agddd ]=_aefc ;};for _eabdg :=0;_eabdg < _aadd ._acdga -1;_eabdg ++{if _dffb [_eabdg ]._caaaf !=_dffb [_eabdg +1]{return nil ;
};};return _dffb ;};func (_dddea paraList )findTextTables ()[]*textTable {var _gaad []*textTable ;for _ ,_cfcg :=range _dddea {if _cfcg .taken ()||_cfcg .Width ()==0{continue ;};_babac :=_cfcg .isAtom ();if _babac ==nil {continue ;};_babac .growTable ();
if _babac ._bdea *_babac ._acdga < _egca {continue ;};_babac .markCells ();_babac .log ("\u0067\u0072\u006fw\u006e");_gaad =append (_gaad ,_babac );};return _gaad ;};func (_aaaa *textObject )showTextAdjusted (_feg *_fe .PdfObjectArray ,_cag int ,_fdc string )error {_bdad :=false ;
for _ ,_fgb :=range _feg .Elements (){switch _fgb .(type ){case *_fe .PdfObjectFloat ,*_fe .PdfObjectInteger :_gggf ,_eabc :=_fe .GetNumberAsFloat (_fgb );if _eabc !=nil {_a .Log .Debug ("\u0045\u0052\u0052\u004fR\u003a\u0020\u0073\u0068\u006f\u0077\u0054\u0065\u0078t\u0041\u0064\u006a\u0075\u0073\u0074\u0065\u0064\u002e\u0020\u0042\u0061\u0064\u0020\u006e\u0075\u006d\u0065r\u0069\u0063\u0061\u006c\u0020a\u0072\u0067\u002e\u0020\u006f\u003d\u0025\u0073\u0020\u0061\u0072\u0067\u0073\u003d\u0025\u002b\u0076",_fgb ,_feg );
return _eabc ;};_dde ,_egg :=-_gggf *0.001*_aaaa ._eea ._cfad ,0.0;if _bdad {_egg ,_dde =_dde ,_egg ;};_bdd :=_agdb (_aeg .Point {X :_dde ,Y :_egg });_aaaa ._fcda .Concat (_bdd );case *_fe .PdfObjectString :_geac :=_fe .TraceToDirectObject (_fgb );_bbe ,_bfd :=_fe .GetStringBytes (_geac );
if !_bfd {_a .Log .Trace ("s\u0068\u006f\u0077\u0054\u0065\u0078\u0074\u0041\u0064j\u0075\u0073\u0074\u0065\u0064\u003a\u0020Ba\u0064\u0020\u0073\u0074r\u0069\u006e\u0067\u0020\u0061\u0072\u0067\u002e\u0020o=\u0025\u0073 \u0061\u0072\u0067\u0073\u003d\u0025\u002b\u0076",_fgb ,_feg );
return _fe .ErrTypeError ;};_aaaa .renderText (_geac ,_bbe ,_cag ,_fdc );default:_a .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0073\u0068\u006f\u0077\u0054\u0065\u0078\u0074A\u0064\u006a\u0075\u0073\u0074\u0065\u0064\u002e\u0020\u0055\u006e\u0065\u0078p\u0065\u0063\u0074\u0065\u0064\u0020\u0074\u0079\u0070\u0065\u0020\u0028%T\u0029\u0020\u0061\u0072\u0067\u0073\u003d\u0025\u002b\u0076",_fgb ,_feg );
return _fe .ErrTypeError ;};};return nil ;};func (_ggc *wordBag )arrangeText (_ecgcb bool )*textPara {_ggc .sort ();if _bfdg {_ggc .removeDuplicates ();};var _gcb []*textLine ;for _ ,_fadge :=range _ggc .depthIndexes (){for !_ggc .empty (_fadge ){_geba :=_ggc .firstReadingIndex (_fadge );
_aabba :=_ggc .firstWord (_geba );_bcge :=_cadbe (_ggc ,_geba );_gdagd :=_aabba ._facbbf ;if _gdagd < _gfcbc {_gdagd =_gfcbc ;};_gddgg :=_aabba ._dbbagg -_bgfe *_gdagd ;_bbgca :=_aabba ._dbbagg +_bgfe *_gdagd ;_abgf :=_eaga *_gdagd ;_dfddc :=_dacg *_gdagd ;
_cgbc :for {var _geec *textWord ;_egfcf :=0;for _ ,_gbbd :=range _ggc .depthBand (_gddgg ,_bbgca ){_bage :=_ggc .highestWord (_gbbd ,_gddgg ,_bbgca );if _bage ==nil {continue ;};_dfcff :=_bbca (_bage ,_bcge ._cfec [len (_bcge ._cfec )-1]);if _dfcff < -_dfddc {break _cgbc ;
};if !_ecgcb &&_dfcff > _abgf {continue ;};if _geec !=nil &&_acdg (_bage ,_geec )>=0{continue ;};_geec =_bage ;_egfcf =_gbbd ;};if _geec ==nil {break ;};_bcge .pullWord (_ggc ,_geec ,_egfcf );};_bcge .markWordBoundaries ();_gcb =append (_gcb ,_bcge );};
};if len (_gcb )==0{return nil ;};_g .Slice (_gcb ,func (_bbeb ,_afbe int )bool {return _fgded (_gcb [_bbeb ],_gcb [_afbe ])< 0});_aaba :=_bfaa (_ggc .PdfRectangle ,_gcb );if _deba {_a .Log .Info ("\u0061\u0072\u0072an\u0067\u0065\u0054\u0065\u0078\u0074\u0020\u0021\u0021\u0021\u0020\u0070\u0061\u0072\u0061\u003d\u0025\u0073",_aaba .String ());
if _efgb {for _adede ,_cdgee :=range _aaba ._ggfbe {_gb .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0073\u000a",_adede ,_cdgee .String ());if _gafd {for _bcbf ,_aebgb :=range _cdgee ._cfec {_gb .Printf ("\u0025\u0038\u0064\u003a\u0020\u0025\u0073\u000a",_bcbf ,_aebgb .String ());
for _bgaf ,_adbb :=range _aebgb ._eaee {_gb .Printf ("\u00251\u0032\u0064\u003a\u0020\u0025\u0073\n",_bgaf ,_adbb .String ());};};};};};};return _aaba ;};func (_bdcb *wordBag )firstWord (_acbed int )*textWord {return _bdcb ._ceea [_acbed ][0]};

// RenderMode specifies the text rendering mode (Tmode), which determines whether showing text shall cause
// glyph outlines to be  stroked, filled, used as a clipping boundary, or some combination of the three.
// Stroking, filling, and clipping shall have the same effects for a text object as they do for a path object
// (see 8.5.3, "Path-Painting Operators" and 8.5.4, "Clipping Path Operators").
type RenderMode int ;type textPara struct{_acf .PdfRectangle ;_dfcaa _acf .PdfRectangle ;_ggfbe []*textLine ;_bcff *textTable ;_bfcgd bool ;_ffgb bool ;_eefa *textPara ;_cdfcc *textPara ;_gabf *textPara ;_caaaf *textPara ;_adcc []list ;};func _gbcgb (_bebf string ,_befea int )string {if len (_bebf )< _befea {return _bebf ;
};return _bebf [:_befea ];};func (_cefbc *textWord )addDiacritic (_fefe string ){_bgde :=_cefbc ._eaee [len (_cefbc ._eaee )-1];_bgde ._gadb +=_fefe ;_bgde ._gadb =_ag .NFKC .String (_bgde ._gadb );};func _dfgab (_afdeg string )string {_gbgcg :=[]rune (_afdeg );
return string (_gbgcg [:len (_gbgcg )-1])};type compositeCell struct{_acf .PdfRectangle ;paraList ;};func (_faaa *shapesState )drawRectangle (_fagdd ,_dgfef ,_ccefb ,_debc float64 ){if _bdbeg {_gcea :=_faaa .devicePoint (_fagdd ,_dgfef );_agbfe :=_faaa .devicePoint (_fagdd +_ccefb ,_dgfef +_debc );
_efea :=_acf .PdfRectangle {Llx :_gcea .X ,Lly :_gcea .Y ,Urx :_agbfe .X ,Ury :_agbfe .Y };_a .Log .Info ("d\u0072a\u0077\u0052\u0065\u0063\u0074\u0061\u006e\u0067l\u0065\u003a\u0020\u00256.\u0032\u0066",_efea );};_faaa .newSubPath ();_faaa .moveTo (_fagdd ,_dgfef );
_faaa .lineTo (_fagdd +_ccefb ,_dgfef );_faaa .lineTo (_fagdd +_ccefb ,_dgfef +_debc );_faaa .lineTo (_fagdd ,_dgfef +_debc );_faaa .closePath ();};func (_gfacb rulingList )tidied (_cfbbb string )rulingList {_beef :=_gfacb .removeDuplicates ();_beef .log ("\u0075n\u0069\u0071\u0075\u0065\u0073");
_cfbdc :=_beef .snapToGroups ();if _cfbdc ==nil {return nil ;};_cfbdc .sort ();if _eagg {_a .Log .Info ("\u0074\u0069\u0064i\u0065\u0064\u003a\u0020\u0025\u0071\u0020\u0076\u0065\u0063\u0073\u003d\u0025\u0064\u0020\u0075\u006e\u0069\u0071\u0075\u0065\u0073\u003d\u0025\u0064\u0020\u0063\u006f\u0061l\u0065\u0073\u0063\u0065\u0064\u003d\u0025\u0064",_cfbbb ,len (_gfacb ),len (_beef ),len (_cfbdc ));
};_cfbdc .log ("\u0063o\u0061\u006c\u0065\u0073\u0063\u0065d");return _cfbdc ;};func (_ffeae *textPara )taken ()bool {return _ffeae ==nil ||_ffeae ._bfcgd };func _cddcf (_geca *textLine )bool {_acff :=true ;_fbag :=-1;for _ ,_fdcc :=range _geca ._cfec {for _ ,_gefg :=range _fdcc ._eaee {_bbcb :=_gefg ._cgfg ;
if _fbag ==-1{_fbag =_bbcb ;}else {if _fbag !=_bbcb {_acff =false ;break ;};};};};return _acff ;};func (_agefg intSet )add (_gddf int ){_agefg [_gddf ]=struct{}{}};func _dbdg (_eddgg map[float64 ]map[float64 ]gridTile )[]float64 {_bgecc :=make ([]float64 ,0,len (_eddgg ));
_cbdcd :=make (map[float64 ]struct{},len (_eddgg ));for _ ,_dbadg :=range _eddgg {for _acdgd :=range _dbadg {if _ ,_acgc :=_cbdcd [_acdgd ];_acgc {continue ;};_bgecc =append (_bgecc ,_acdgd );_cbdcd [_acdgd ]=struct{}{};};};_g .Float64s (_bgecc );return _bgecc ;
};func (_fagaf paraList )reorder (_feec []int ){_agga :=make (paraList ,len (_fagaf ));for _egfg ,_gedc :=range _feec {_agga [_egfg ]=_fagaf [_gedc ];};copy (_fagaf ,_agga );};type textState struct{_edg float64 ;_abc float64 ;_dgad float64 ;_agbg float64 ;
_cfad float64 ;_ecfc RenderMode ;_bfag float64 ;_cdfg *_acf .PdfFont ;_cggf _acf .PdfRectangle ;_abga int ;_ceaa int ;};func (_bbbf rulingList )primMinMax ()(float64 ,float64 ){_defc ,_dage :=_bbbf [0]._eeac ,_bbbf [0]._eeac ;for _ ,_fcae :=range _bbbf [1:]{if _fcae ._eeac < _defc {_defc =_fcae ._eeac ;
}else if _fcae ._eeac > _dage {_dage =_fcae ._eeac ;};};return _defc ,_dage ;};func _abeca (_fgad ,_ceaae int )int {if _fgad > _ceaae {return _fgad ;};return _ceaae ;};func (_cggc lineRuling )asRuling ()(*ruling ,bool ){_dcaeaf :=ruling {_becca :_cggc ._afbb ,Color :_cggc .Color ,_fgaa :_gdga };
switch _cggc ._afbb {case _ffgdf :_dcaeaf ._eeac =_cggc .xMean ();_dcaeaf ._feded =_f .Min (_cggc ._gbcde .Y ,_cggc ._eaaeg .Y );_dcaeaf ._bbebb =_f .Max (_cggc ._gbcde .Y ,_cggc ._eaaeg .Y );case _bgbc :_dcaeaf ._eeac =_cggc .yMean ();_dcaeaf ._feded =_f .Min (_cggc ._gbcde .X ,_cggc ._eaaeg .X );
_dcaeaf ._bbebb =_f .Max (_cggc ._gbcde .X ,_cggc ._eaaeg .X );default:_a .Log .Error ("\u0062\u0061\u0064\u0020pr\u0069\u006d\u0061\u0072\u0079\u0020\u006b\u0069\u006e\u0064\u003d\u0025\u0064",_cggc ._afbb );return nil ,false ;};return &_dcaeaf ,true ;
};func _bfaa (_cbcef _acf .PdfRectangle ,_bgfff []*textLine )*textPara {return &textPara {PdfRectangle :_cbcef ,_ggfbe :_bgfff };};func (_fdgc *wordBag )getDepthIdx (_egeb float64 )int {_agcfe :=_fdgc .depthIndexes ();_daccc :=_deaf (_egeb );if _daccc < _agcfe [0]{return _agcfe [0];
};if _daccc > _agcfe [len (_agcfe )-1]{return _agcfe [len (_agcfe )-1];};return _daccc ;};func _dcd (_bgec float64 ,_gefbb int )int {if _gefbb ==0{_gefbb =1;};_cgbg :=float64 (_gefbb );return int (_f .Round (_bgec /_cgbg )*_cgbg );};func (_ccbb paraList )readBefore (_bdbd []int ,_gaee ,_ffad int )bool {_edga ,_fgagad :=_ccbb [_gaee ],_ccbb [_ffad ];
if _ecdc (_edga ,_fgagad )&&_edga .Lly > _fgagad .Lly {return true ;};if !(_edga ._dfcaa .Urx < _fgagad ._dfcaa .Llx ){return false ;};_eegd ,_gdag :=_edga .Lly ,_fgagad .Lly ;if _eegd > _gdag {_gdag ,_eegd =_eegd ,_gdag ;};_adcbd :=_f .Max (_edga ._dfcaa .Llx ,_fgagad ._dfcaa .Llx );
_fcag :=_f .Min (_edga ._dfcaa .Urx ,_fgagad ._dfcaa .Urx );_ggfd :=_ccbb .llyRange (_bdbd ,_eegd ,_gdag );for _ ,_edce :=range _ggfd {if _edce ==_gaee ||_edce ==_ffad {continue ;};_ebdgc :=_ccbb [_edce ];if _ebdgc ._dfcaa .Llx <=_fcag &&_adcbd <=_ebdgc ._dfcaa .Urx {return false ;
};};return true ;};var _dadb string ="\u005e\u005b\u0061\u002d\u007a\u0041\u002dZ\u005d\u0028\u005c)\u007c\u005c\u002e)\u007c\u005e[\u005c\u0064\u005d\u002b\u0028\u005c)\u007c\\.\u0029\u007c\u005e\u005c\u0028\u005b\u0061\u002d\u007a\u0041\u002d\u005a\u005d\u005c\u0029\u007c\u005e\u005c\u0028\u005b\u005c\u0064\u005d\u002b\u005c\u0029";
func _cfcd (_bfaac _acf .PdfRectangle )*ruling {return &ruling {_becca :_bgbc ,_eeac :_bfaac .Ury ,_feded :_bfaac .Llx ,_bbebb :_bfaac .Urx };};func _dfeb (_cafbb *wordBag ,_gcded float64 ,_eaaef ,_cdccb rulingList ,_gfgdf bool )[]*wordBag {var _cfag []*wordBag ;
for _ ,_gacb :=range _cafbb .depthIndexes (){_adfdf :=false ;for !_cafbb .empty (_gacb ){_debgc :=_cafbb .firstReadingIndex (_gacb );_dbee :=_cafbb .firstWord (_debgc );_bgag :=_gecg (_dbee ,_gcded ,_eaaef ,_cdccb );_cafbb .removeWord (_dbee ,_debgc );
if _ebfc {_a .Log .Info ("\u0066\u0069\u0072\u0073\u0074\u0057\u006f\u0072\u0064\u0020\u005e\u005e^\u005e\u0020\u0025\u0073",_dbee .String ());};for _egdba :=true ;_egdba ;_egdba =_adfdf {_adfdf =false ;_feba :=_dgba *_bgag ._aacag ;_eadfg :=_afag *_bgag ._aacag ;
if _gfgdf {_eadfg =_f .MaxFloat64 ;};_eggg :=_fbdf *_bgag ._aacag ;if _ebfc {_a .Log .Info ("\u0070a\u0072a\u0057\u006f\u0072\u0064\u0073\u0020\u0064\u0065\u0070\u0074\u0068 \u0025\u002e\u0032\u0066 \u002d\u0020\u0025\u002e\u0032f\u0020\u006d\u0061\u0078\u0049\u006e\u0074\u0072\u0061\u0044\u0065\u0070\u0074\u0068\u0047\u0061\u0070\u003d\u0025\u002e\u0032\u0066\u0020\u006d\u0061\u0078\u0049\u006e\u0074\u0072\u0061R\u0065\u0061\u0064\u0069\u006e\u0067\u0047\u0061p\u003d\u0025\u002e\u0032\u0066",_bgag .minDepth (),_bgag .maxDepth (),_eggg ,_eadfg );
};if _cafbb .scanBand ("\u0076\u0065\u0072\u0074\u0069\u0063\u0061\u006c",_bgag ,_cbce (_fcde ,0),_bgag .minDepth ()-_eggg ,_bgag .maxDepth ()+_eggg ,_cdba ,false ,false )> 0{_adfdf =true ;};if _cafbb .scanBand ("\u0068\u006f\u0072\u0069\u007a\u006f\u006e\u0074\u0061\u006c",_bgag ,_cbce (_fcde ,_eadfg ),_bgag .minDepth (),_bgag .maxDepth (),_gcfc ,false ,false )> 0{_adfdf =true ;
};if _adfdf {continue ;};_aecdf :=_cafbb .scanBand ("",_bgag ,_cbce (_addc ,_feba ),_bgag .minDepth (),_bgag .maxDepth (),_agef ,true ,false );if _aecdf > 0{_gbbbd :=(_bgag .maxDepth ()-_bgag .minDepth ())/_bgag ._aacag ;if (_aecdf > 1&&float64 (_aecdf )> 0.3*_gbbbd )||_aecdf <=10{if _cafbb .scanBand ("\u006f\u0074\u0068e\u0072",_bgag ,_cbce (_addc ,_feba ),_bgag .minDepth (),_bgag .maxDepth (),_agef ,false ,true )> 0{_adfdf =true ;
};};};};_cfag =append (_cfag ,_bgag );};};return _cfag ;};

// Len returns the number of TextMarks in `ma`.
func (_dadcc *TextMarkArray )Len ()int {if _dadcc ==nil {return 0;};return len (_dadcc ._bcea );};func _bcdg (_dbcff ,_acfbe _ce .Image )_ce .Image {_baeee ,_gedbg :=_acfbe .Bounds ().Size (),_dbcff .Bounds ().Size ();_bgcaa ,_ecfff :=_baeee .X ,_baeee .Y ;
if _gedbg .X > _bgcaa {_bgcaa =_gedbg .X ;};if _gedbg .Y > _ecfff {_ecfff =_gedbg .Y ;};_bcdag :=_ce .Rect (0,0,_bgcaa ,_ecfff );if _baeee .X !=_bgcaa ||_baeee .Y !=_ecfff {_fdac :=_ce .NewRGBA (_bcdag );_d .BiLinear .Scale (_fdac ,_bcdag ,_dbcff ,_acfbe .Bounds (),_d .Over ,nil );
_acfbe =_fdac ;};if _gedbg .X !=_bgcaa ||_gedbg .Y !=_ecfff {_bbffab :=_ce .NewRGBA (_bcdag );_d .BiLinear .Scale (_bbffab ,_bcdag ,_dbcff ,_dbcff .Bounds (),_d .Over ,nil );_dbcff =_bbffab ;};_aefd :=_ce .NewRGBA (_bcdag );_d .DrawMask (_aefd ,_bcdag ,_dbcff ,_ce .Point {},_acfbe ,_ce .Point {},_d .Over );
return _aefd ;};func (_bdde *shapesState )stroke (_aaabd *[]pathSection ){_acba :=pathSection {_dbe :_bdde ._feae ,Color :_bdde ._eecfa .getStrokeColor ()};*_aaabd =append (*_aaabd ,_acba );if _eagg {_gb .Printf ("\u0020 \u0020\u0020S\u0054\u0052\u004fK\u0045\u003a\u0020\u0025\u0064\u0020\u0073t\u0072\u006f\u006b\u0065\u0073\u0020s\u0073\u003d\u0025\u0073\u0020\u0063\u006f\u006c\u006f\u0072\u003d%\u002b\u0076\u0020\u0025\u0036\u002e\u0032\u0066\u000a",len (*_aaabd ),_bdde ,_bdde ._eecfa .getStrokeColor (),_acba .bbox ());
if _bdcce {for _eegbb ,_eaff :=range _bdde ._feae {_gb .Printf ("\u0025\u0038\u0064\u003a\u0020\u0025\u0073\u000a",_eegbb ,_eaff );if _eegbb ==10{break ;};};};};};

// String returns a description of `tm`.
func (_cdaf *textMark )String ()string {return _gb .Sprintf ("\u0025\u002e\u0032f \u0066\u006f\u006e\u0074\u0073\u0069\u007a\u0065\u003d\u0025\u002e\u0032\u0066\u0020\u0022\u0025\u0073\u0022",_cdaf .PdfRectangle ,_cdaf ._gfgd ,_cdaf ._gadb );};func (_dceed *wordBag )makeRemovals ()map[int ]map[*textWord ]struct{}{_cccc :=make (map[int ]map[*textWord ]struct{},len (_dceed ._ceea ));
for _ecgd :=range _dceed ._ceea {_cccc [_ecgd ]=make (map[*textWord ]struct{});};return _cccc ;};func (_aba *textObject )getFillColor ()_fd .Color {return _acda (_aba ._dbc .ColorspaceNonStroking ,_aba ._dbc .ColorNonStroking );};func _aced (_bfcc []*wordBag )[]*wordBag {if len (_bfcc )<=1{return _bfcc ;
};if _deba {_a .Log .Info ("\u006d\u0065\u0072\u0067\u0065\u0057\u006f\u0072\u0064B\u0061\u0067\u0073\u003a");};_g .Slice (_bfcc ,func (_feac ,_gcec int )bool {_ffaac ,_ccgb :=_bfcc [_feac ],_bfcc [_gcec ];_gbdb :=_ffaac .Width ()*_ffaac .Height ();_ggbf :=_ccgb .Width ()*_ccgb .Height ();
if _gbdb !=_ggbf {return _gbdb > _ggbf ;};if _ffaac .Height ()!=_ccgb .Height (){return _ffaac .Height ()> _ccgb .Height ();};return _feac < _gcec ;});var _cbaf []*wordBag ;_gdbbb :=make (intSet );for _ccbf :=0;_ccbf < len (_bfcc );_ccbf ++{if _gdbbb .has (_ccbf ){continue ;
};_aadff :=_bfcc [_ccbf ];for _cfdda :=_ccbf +1;_cfdda < len (_bfcc );_cfdda ++{if _gdbbb .has (_ccbf ){continue ;};_debcc :=_bfcc [_cfdda ];_aabc :=_aadff .PdfRectangle ;_aabc .Llx -=_aadff ._aacag ;if _gdef (_aabc ,_debcc .PdfRectangle ){_aadff .absorb (_debcc );
_gdbbb .add (_cfdda );};};_cbaf =append (_cbaf ,_aadff );};if len (_bfcc )!=len (_cbaf )+len (_gdbbb ){_a .Log .Error ("\u006d\u0065\u0072ge\u0057\u006f\u0072\u0064\u0042\u0061\u0067\u0073\u003a \u0025d\u2192%\u0064 \u0061\u0062\u0073\u006f\u0072\u0062\u0065\u0064\u003d\u0025\u0064",len (_bfcc ),len (_cbaf ),len (_gdbbb ));
};return _cbaf ;};func (_beedb rulingList )intersections ()map[int ]intSet {var _ebdea ,_fgfe []int ;for _edeea ,_aggdf :=range _beedb {switch _aggdf ._becca {case _ffgdf :_ebdea =append (_ebdea ,_edeea );case _bgbc :_fgfe =append (_fgfe ,_edeea );};};
if len (_ebdea )< _ageb +1||len (_fgfe )< _aaeb +1{return nil ;};if len (_ebdea )+len (_fgfe )> _eadg {_a .Log .Debug ("\u0069\u006e\u0074\u0065\u0072\u0073e\u0063\u0074\u0069\u006f\u006e\u0073\u003a\u0020\u0054\u004f\u004f\u0020\u004d\u0041\u004e\u0059\u0020\u0072\u0075\u006ci\u006e\u0067\u0073\u0020\u0076\u0065\u0063\u0073\u003d\u0025\u0064\u0020\u003d\u0020%\u0064 \u0078\u0020\u0025\u0064",len (_beedb ),len (_ebdea ),len (_fgfe ));
return nil ;};_ecafd :=make (map[int ]intSet ,len (_ebdea )+len (_fgfe ));for _ ,_gcfbg :=range _ebdea {for _ ,_eeba :=range _fgfe {if _beedb [_gcfbg ].intersects (_beedb [_eeba ]){if _ ,_bebag :=_ecafd [_gcfbg ];!_bebag {_ecafd [_gcfbg ]=make (intSet );
};if _ ,_ebec :=_ecafd [_eeba ];!_ebec {_ecafd [_eeba ]=make (intSet );};_ecafd [_gcfbg ].add (_eeba );_ecafd [_eeba ].add (_gcfbg );};};};return _ecafd ;};func (_ddgb compositeCell )split (_affb ,_ffbc []float64 )*textTable {_bfeg :=len (_affb )+1;_daedb :=len (_ffbc )+1;
if _ccdc {_a .Log .Info ("\u0063\u006f\u006d\u0070\u006f\u0073\u0069t\u0065\u0043\u0065l\u006c\u002e\u0073\u0070l\u0069\u0074\u003a\u0020\u0025\u0064\u0020\u0078\u0020\u0025\u0064\u000a\u0009\u0063\u006f\u006d\u0070\u006f\u0073\u0069\u0074\u0065\u003d\u0025\u0073\u000a"+"\u0009\u0072\u006f\u0077\u0043\u006f\u0072\u0072\u0069\u0064\u006f\u0072\u0073=\u0025\u0036\u002e\u0032\u0066\u000a\t\u0063\u006f\u006c\u0043\u006f\u0072\u0072\u0069\u0064\u006f\u0072\u0073\u003d%\u0036\u002e\u0032\u0066",_daedb ,_bfeg ,_ddgb ,_affb ,_ffbc );
_gb .Printf ("\u0020\u0020\u0020\u0020\u0025\u0064\u0020\u0070\u0061\u0072\u0061\u0073\u000a",len (_ddgb .paraList ));for _gaged ,_dgca :=range _ddgb .paraList {_gb .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0073\u000a",_gaged ,_dgca .String ());};
_gb .Printf ("\u0020\u0020\u0020\u0020\u0025\u0064\u0020\u006c\u0069\u006e\u0065\u0073\u000a",len (_ddgb .lines ()));for _ggaf ,_fage :=range _ddgb .lines (){_gb .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0073\u000a",_ggaf ,_fage );};};_affb =_bdadb (_affb ,_ddgb .Ury ,_ddgb .Lly );
_ffbc =_bdadb (_ffbc ,_ddgb .Llx ,_ddgb .Urx );_bfae :=make (map[uint64 ]*textPara ,_daedb *_bfeg );_cbdg :=textTable {_bdea :_daedb ,_acdga :_bfeg ,_cdefa :_bfae };_bbdg :=_ddgb .paraList ;_g .Slice (_bbdg ,func (_edacf ,_ddbag int )bool {_fddf ,_gdgg :=_bbdg [_edacf ],_bbdg [_ddbag ];
_geabd ,_acfb :=_fddf .Lly ,_gdgg .Lly ;if _geabd !=_acfb {return _geabd < _acfb ;};return _fddf .Llx < _gdgg .Llx ;});_fefa :=make (map[uint64 ]_acf .PdfRectangle ,_daedb *_bfeg );for _egfcd ,_gfdgd :=range _affb [1:]{_fead :=_affb [_egfcd ];for _fddda ,_ecdd :=range _ffbc [1:]{_fafa :=_ffbc [_fddda ];
_fefa [_egeeg (_fddda ,_egfcd )]=_acf .PdfRectangle {Llx :_fafa ,Urx :_ecdd ,Lly :_gfdgd ,Ury :_fead };};};if _ccdc {_a .Log .Info ("\u0063\u006f\u006d\u0070\u006f\u0073\u0069\u0074\u0065\u0043\u0065l\u006c\u002e\u0073\u0070\u006c\u0069\u0074\u003a\u0020\u0072e\u0063\u0074\u0073");
_gb .Printf ("\u0020\u0020\u0020\u0020");for _abbfa :=0;_abbfa < _daedb ;_abbfa ++{_gb .Printf ("\u0025\u0033\u0030\u0064\u002c\u0020",_abbfa );};_gb .Println ();for _aefgd :=0;_aefgd < _bfeg ;_aefgd ++{_gb .Printf ("\u0020\u0020\u0025\u0032\u0064\u003a",_aefgd );
for _gffc :=0;_gffc < _daedb ;_gffc ++{_gb .Printf ("\u00256\u002e\u0032\u0066\u002c\u0020",_fefa [_egeeg (_gffc ,_aefgd )]);};_gb .Println ();};};_dacgd :=func (_dbage *textLine )(int ,int ){for _egfdc :=0;_egfdc < _bfeg ;_egfdc ++{for _ecfg :=0;_ecfg < _daedb ;
_ecfg ++{if _gdef (_fefa [_egeeg (_ecfg ,_egfdc )],_dbage .PdfRectangle ){return _ecfg ,_egfdc ;};};};return -1,-1;};_gegf :=make (map[uint64 ][]*textLine ,_daedb *_bfeg );for _ ,_addg :=range _bbdg .lines (){_adff ,_bdgab :=_dacgd (_addg );if _adff < 0{continue ;
};_gegf [_egeeg (_adff ,_bdgab )]=append (_gegf [_egeeg (_adff ,_bdgab )],_addg );};for _dgbad :=0;_dgbad < len (_affb )-1;_dgbad ++{_cbcfg :=_affb [_dgbad ];_bdbc :=_affb [_dgbad +1];for _baddg :=0;_baddg < len (_ffbc )-1;_baddg ++{_aabbg :=_ffbc [_baddg ];
_daeaf :=_ffbc [_baddg +1];_fcbba :=_acf .PdfRectangle {Llx :_aabbg ,Urx :_daeaf ,Lly :_bdbc ,Ury :_cbcfg };_dbea :=_gegf [_egeeg (_baddg ,_dgbad )];if len (_dbea )==0{continue ;};_gefee :=_bfaa (_fcbba ,_dbea );_cbdg .put (_baddg ,_dgbad ,_gefee );};};
return &_cbdg ;};type shapesState struct{_fabc _aeg .Matrix ;_fbg _aeg .Matrix ;_feae []*subpath ;_dec bool ;_fgba _aeg .Point ;_eecfa *textObject ;};func _acgfb (_eceeb int ,_agcg func (int ,int )bool )[]int {_gbgbdf :=make ([]int ,_eceeb );for _bddae :=range _gbgbdf {_gbgbdf [_bddae ]=_bddae ;
};_g .Slice (_gbgbdf ,func (_bfdeb ,_edadg int )bool {return _agcg (_gbgbdf [_bfdeb ],_gbgbdf [_edadg ])});return _gbgbdf ;};func _b (_gc int )bool {return (_gc &1)!=0};var (_ffg =_agb .New ("\u0074\u0079p\u0065\u0020\u0063h\u0065\u0063\u006b\u0020\u0065\u0072\u0072\u006f\u0072");
_fede =_agb .New ("\u0072\u0061\u006e\u0067\u0065\u0020\u0063\u0068\u0065\u0063\u006b\u0020e\u0072\u0072\u006f\u0072"););func (_adcdb *textTable )computeBbox ()_acf .PdfRectangle {var _eefe _acf .PdfRectangle ;_eedb :=false ;for _bebgf :=0;_bebgf < _adcdb ._acdga ;
_bebgf ++{for _cdea :=0;_cdea < _adcdb ._bdea ;_cdea ++{_bbegb :=_adcdb .get (_cdea ,_bebgf );if _bbegb ==nil {continue ;};if !_eedb {_eefe =_bbegb .PdfRectangle ;_eedb =true ;}else {_eefe =_fccd (_eefe ,_bbegb .PdfRectangle );};};};return _eefe ;};

// Replace takes a pattern and replaces all the texts that much the pattern with `replacement`.
func (_ebbab *Editor )Replace (pattern string ,replacement string ,pages []int )error {_acdb :=map[int ]Match {};for _ ,_fac :=range pages {_ffea ,_gag :=_ebbab ._bbg .GetPage (_fac );if _gag !=nil {return _gag ;};_ddb ,_gag :=New (_ffea );if _gag !=nil {return _gag ;
};_dfgdb ,_ ,_ ,_gag :=_ddb .ExtractPageText ();if _gag !=nil {return _gag ;};_dff :="";_deg :=_dfgdb .Text ();_abfe ,_gag :=_aefe (pattern ,_deg );if _gag !=nil {return _gag ;};_abfeb :=_dfgdb .Marks ();_acec :=[]Box {};for _ ,_cgg :=range _abfe {_agbee ,_gaeg ,_fda :=_ffdf (_cgg ,_abfeb ,pattern );
if _fda !=nil {return _fda ;};_eebc :=_ffc (_agbee );_acec =append (_acec ,_gaeg );replacement ,_fda =_eda (_eebc ,replacement ,pattern );if _fda !=nil {return _fda ;};};_dff =_dfgdb .GetContentStreamOps ().String ();_eaca :=Match {Pattern :pattern ,Indexes :_abfe ,Locations :_acec };
_ffea .SetContentStreams ([]string {_dff },_fe .NewFlateEncoder ());_acdb [_fac ]=_eaca ;};return nil ;};func _bbca (_fgab ,_abebgc bounded )float64 {return _fgab .bbox ().Llx -_abebgc .bbox ().Urx };func (_bbff *PageText )getParagraphs ()paraList {var _cggdc rulingList ;
if _bbag {_gbeg :=_ccfg (_bbff ._fege );_cggdc =append (_cggdc ,_gbeg ...);};if _gccg {_dgab :=_fecdf (_bbff ._gaaab );_cggdc =append (_cggdc ,_dgab ...);};_cggdc ,_dedd :=_cggdc .toTilings ();var _gcef paraList ;_aadf :=len (_bbff ._effb );for _efgg :=0;
_efgg < 360&&_aadf > 0;_efgg +=90{_bde :=make ([]*textMark ,0,len (_bbff ._effb )-_aadf );for _ ,_ebcd :=range _bbff ._effb {if _ebcd ._dgff ==_efgg {_bde =append (_bde ,_ebcd );};};if len (_bde )> 0{_egff :=_baeb (_bde ,_bbff ._ddfe ,_cggdc ,_dedd ,_bbff ._dfdb ._eabg ==ExtractionModeLayoutNoBreaks );
_gcef =append (_gcef ,_egff ...);_aadf -=len (_bde );};};return _gcef ;};type ruling struct{_becca rulingKind ;_fgaa markKind ;_fd .Color ;_eeac float64 ;_feded float64 ;_bbebb float64 ;_aacbb float64 ;};func _eceaf (_ggaa _acf .PdfRectangle )*ruling {return &ruling {_becca :_ffgdf ,_eeac :_ggaa .Urx ,_feded :_ggaa .Lly ,_bbebb :_ggaa .Ury };
};func _gagac (_efgf ,_gbfde _aeg .Point )bool {return _efgf .X ==_gbfde .X &&_efgf .Y ==_gbfde .Y };func (_cdeg *textObject )getCurrentFont ()*_acf .PdfFont {_gdcd :=_cdeg ._eea ._cdfg ;if _gdcd ==nil {_a .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u004e\u006f\u0020\u0066\u006f\u006e\u0074\u0020\u0064\u0065\u0066\u0069\u006e\u0065\u0064\u002e\u0020U\u0073\u0069\u006e\u0067\u0020d\u0065\u0066a\u0075\u006c\u0074\u002e");
return _acf .DefaultFont ();};return _gdcd ;};func (_fadc *textTable )emptyCompositeColumn (_cedcd int )bool {for _ecage :=0;_ecage < _fadc ._acdga ;_ecage ++{if _bbfeg ,_cfeb :=_fadc ._dgbef [_egeeg (_cedcd ,_ecage )];_cfeb {if len (_bbfeg .paraList )> 0{return false ;
};};};return true ;};func (_fccc *textObject )moveTextSetLeading (_cecgf ,_dea float64 ){_fccc ._eea ._agbg =-_dea ;_fccc .moveLP (_cecgf ,_dea );};func (_ffae *wordBag )depthBand (_dgfeb ,_eecc float64 )[]int {if len (_ffae ._ceea )==0{return nil ;};return _ffae .depthRange (_ffae .getDepthIdx (_dgfeb ),_ffae .getDepthIdx (_eecc ));
};const (_gdeg =true ;_bfdg =true ;_fefdd =true ;_cbge =false ;_feaf =true ;_cbcg =true ;_bbag =true ;_gccg =true ;_fbgb =false ;);func _dbfa (_ccb *TextMarkArray )string {_ecgf :="";for _ ,_dac :=range _ccb .Elements (){_ecgf +=_dac .Text ;};return _ecgf ;
};func _bdce (_agcc ,_dbbc float64 )string {_bfbb :=!_edfea (_agcc -_dbbc );if _bfbb {return "\u000a";};return "\u0020";};

// String returns a description of `v`.
func (_deeag *ruling )String ()string {if _deeag ._becca ==_fgdf {return "\u004e\u004f\u0054\u0020\u0052\u0055\u004c\u0049\u004e\u0047";};_cbfe ,_dfcfg :="\u0078","\u0079";if _deeag ._becca ==_bgbc {_cbfe ,_dfcfg ="\u0079","\u0078";};_bbadf :="";if _deeag ._aacbb !=0.0{_bbadf =_gb .Sprintf (" \u0077\u0069\u0064\u0074\u0068\u003d\u0025\u002e\u0032\u0066",_deeag ._aacbb );
};return _gb .Sprintf ("\u0025\u00310\u0073\u0020\u0025\u0073\u003d\u0025\u0036\u002e\u0032\u0066\u0020\u0025\u0073\u003d\u0025\u0036\u002e\u0032\u0066\u0020\u002d\u0020\u0025\u0036\u002e\u0032\u0066\u0020\u0028\u0025\u0036\u002e\u0032\u0066\u0029\u0020\u0025\u0073\u0020\u0025\u0076\u0025\u0073",_deeag ._becca ,_cbfe ,_deeag ._eeac ,_dfcfg ,_deeag ._feded ,_deeag ._bbebb ,_deeag ._bbebb -_deeag ._feded ,_deeag ._fgaa ,_deeag .Color ,_bbadf );
};func (_eagcf *textTable )emptyCompositeRow (_egaf int )bool {for _dfgcd :=0;_dfgcd < _eagcf ._bdea ;_dfgcd ++{if _aecb ,_gebcb :=_eagcf ._dgbef [_egeeg (_dfgcd ,_egaf )];_gebcb {if len (_aecb .paraList )> 0{return false ;};};};return true ;};type rulingList []*ruling ;


// ImageMark represents an image drawn on a page and its position in device coordinates.
// All coordinates are in device coordinates.
type ImageMark struct{Image *_acf .Image ;

// Dimensions of the image as displayed in the PDF.
Width float64 ;Height float64 ;

// Position of the image in PDF coordinates (lower left corner).
X float64 ;Y float64 ;

// Angle in degrees, if rotated.
Angle float64 ;};

// NewWithOptions an Extractor instance for extracting content from the input PDF page with options.
func NewWithOptions (page *_acf .PdfPage ,options *Options )(*Extractor ,error ){const _dbg ="\u0065x\u0074\u0072\u0061\u0063\u0074\u006f\u0072\u002e\u004e\u0065\u0077W\u0069\u0074\u0068\u004f\u0070\u0074\u0069\u006f\u006e\u0073";_eeb ,_cbd :=page .GetAllContentStreams ();
if _cbd !=nil {return nil ,_cbd ;};var _cab *_acf .StructTreeRoot ;_bgda ,_ded :=page .GetStructTreeRoot ();if !_ded {_a .Log .Debug ("T\u0068\u0065\u0020\u0070\u0064\u0066\u0020\u0064\u006f\u0063\u0075\u006d\u0065\u006e\u0074\u0020\u0069\u0073\u0020\u006e\u006f\u0074\u0020\u0074\u0061\u0067g\u0065d\u002e\u0020\u0053\u0074r\u0075\u0063t\u0054\u0072\u0065\u0065\u0052\u006f\u006f\u0074\u0020\u0064\u006f\u0065\u0073\u006e\u0027\u0074\u0020\u0065\u0078\u0069\u0073\u0074\u002e");
}else {_cab ,_cbd =_acf .NewStructTreeRootFromPdfObject (*_bgda );if _cbd !=nil {return nil ,_gb .Errorf ("\u0065\u0072\u0072or\u0020\u006c\u006f\u0061\u0064\u0069\u006e\u0067\u0020s\u0074r\u0075c\u0074 \u0074\u0072\u0065\u0065\u0020\u0072\u006f\u006f\u0074\u003a\u0020\u0025\u0076",_cbd );
};};_deb :=page .GetContainingPdfObject ();_fbc ,_cbd :=page .GetMediaBox ();if _cbd !=nil {return nil ,_gb .Errorf ("\u0065\u0078\u0074r\u0061\u0063\u0074\u006fr\u0020\u0072\u0065\u0071\u0075\u0069\u0072e\u0073\u0020\u006d\u0065\u0064\u0069\u0061\u0042\u006f\u0078\u002e\u0020\u0025\u0076",_cbd );
};_dbd :=&Extractor {_dfg :_eeb ,_cda :page .Resources ,_ffe :*_fbc ,_dfb :page .CropBox ,_dgaf :page .GetStructParentsKey (),_cea :map[string ]fontEntry {},_dfd :map[string ]textResult {},_ggd :map[string ]textResult {},_cdad :options ,_dbf :_cab ,_fbb :_deb };
if _dbd ._ffe .Llx > _dbd ._ffe .Urx {_a .Log .Info ("\u004d\u0065\u0064\u0069\u0061\u0042o\u0078\u0020\u0068\u0061\u0073\u0020\u0058\u0020\u0063\u006f\u006f\u0072\u0064\u0069\u006e\u0061\u0074\u0065\u0073\u0020r\u0065\u0076\u0065\u0072\u0073\u0065\u0064\u002e\u0020\u0025\u002e\u0032\u0066\u0020F\u0069x\u0069\u006e\u0067\u002e",_dbd ._ffe );
_dbd ._ffe .Llx ,_dbd ._ffe .Urx =_dbd ._ffe .Urx ,_dbd ._ffe .Llx ;};if _dbd ._ffe .Lly > _dbd ._ffe .Ury {_a .Log .Info ("\u004d\u0065\u0064\u0069\u0061\u0042o\u0078\u0020\u0068\u0061\u0073\u0020\u0059\u0020\u0063\u006f\u006f\u0072\u0064\u0069\u006e\u0061\u0074\u0065\u0073\u0020r\u0065\u0076\u0065\u0072\u0073\u0065\u0064\u002e\u0020\u0025\u002e\u0032\u0066\u0020F\u0069x\u0069\u006e\u0067\u002e",_dbd ._ffe );
_dbd ._ffe .Lly ,_dbd ._ffe .Ury =_dbd ._ffe .Ury ,_dbd ._ffe .Lly ;};if _dbd ._cdad !=nil {if _dbd ._cdad .IncludeAnnotations {_dbd ._aae ,_cbd =page .GetAnnotations ();if _cbd !=nil {_a .Log .Debug ("\u0045\u0072r\u006f\u0072\u0020\u0067\u0065\u0074\u0074\u0069\u006e\u0067\u0020\u0061\u006e\u006e\u006f\u0074\u0061\u0074\u0069\u006f\u006e\u0073: \u0025\u0076",_cbd );
};};};_ae .TrackUse (_dbg );return _dbd ,nil ;};func (_fgcag *textLine )markWordBoundaries (){_cgda :=_cbbf *_fgcag ._aebd ;for _gcff ,_fgce :=range _fgcag ._cfec [1:]{if _bbca (_fgce ,_fgcag ._cfec [_gcff ])>=_cgda {_fgce ._agdf =true ;};};};const _cgc =20;


// String returns a string descibing `i`.
func (_fcfdf gridTile )String ()string {_fgdac :=func (_bdgaa bool ,_bbba string )string {if _bdgaa {return _bbba ;};return "\u005f";};return _gb .Sprintf ("\u00256\u002e2\u0066\u0020\u0025\u0031\u0073%\u0031\u0073%\u0031\u0073\u0025\u0031\u0073",_fcfdf .PdfRectangle ,_fgdac (_fcfdf ._gefgb ,"\u004c"),_fgdac (_fcfdf ._gdec ,"\u0052"),_fgdac (_fcfdf ._gfddc ,"\u0042"),_fgdac (_fcfdf ._bdba ,"\u0054"));
};func (_gfe *shapesState )cubicTo (_dfce ,_caeg ,_dgfaf ,_bade ,_cgcg ,_ddcb float64 ){if _bdbeg {_a .Log .Info ("\u0063\u0075\u0062\u0069\u0063\u0054\u006f\u003a");};_gfe .addPoint (_cgcg ,_ddcb );};func _ffgd (_gdbb _aeg .Point )*subpath {return &subpath {_adcb :[]_aeg .Point {_gdbb }}};
func _agdb (_ggfb _aeg .Point )_aeg .Matrix {return _aeg .TranslationMatrix (_ggfb .X ,_ggfb .Y )};func (_egag *wordBag )depthIndexes ()[]int {if len (_egag ._ceea )==0{return nil ;};_dfed :=make ([]int ,len (_egag ._ceea ));_ddba :=0;for _eged :=range _egag ._ceea {_dfed [_ddba ]=_eged ;
_ddba ++;};_g .Ints (_dfed );return _dfed ;};func (_bffd rulingList )snapToGroups ()rulingList {_gecbf ,_adeef :=_bffd .vertsHorzs ();if len (_gecbf )> 0{_gecbf =_gecbf .snapToGroupsDirection ();};if len (_adeef )> 0{_adeef =_adeef .snapToGroupsDirection ();
};_edfb :=append (_gecbf ,_adeef ...);_edfb .log ("\u0073\u006e\u0061p\u0054\u006f\u0047\u0072\u006f\u0075\u0070\u0073");return _edfb ;};func _ccfd (_efbe _acf .PdfRectangle ,_aabb bounded )float64 {return _efbe .Ury -_aabb .bbox ().Lly };func _agff (_cafe []*_acf .KValue ,_gfcc map[int ][]*textLine ,_aedcf _fe .PdfObject )[]*list {_dafc :=[]*list {};
for _ ,_bbed :=range _cafe {_cggdb :=_bbed .GetKDict ();_abbad :=_cggdb .GetChildren ();_aebbb :=[]*textLine {};_fdcd :=[]*list {};_gdbff :=_cggdb .S .(*_fe .PdfObjectName ).String ();_fgdba :=_abbad [0];_bcbg :=_fgdba .GetMCID ();if len (_abbad )==1&&_bcbg !=nil &&*_bcbg !=-1{if _cggdb .Pg ==_aedcf {_aebbb =_gfcc [*_bcbg ];
};}else {_fdcd =_agff (_abbad ,_gfcc ,_aedcf );};_gdbbbf :=_eafb (_aebbb ,_gdbff ,_fdcd );_dafc =append (_dafc ,_gdbbbf );};return _dafc ;};func (_cegfa *textWord )toTextMarks (_cfaed *int )[]TextMark {var _cfbag []TextMark ;for _ ,_befee :=range _cegfa ._eaee {_cfbag =_egbf (_cfbag ,_cfaed ,_befee .ToTextMark ());
};return _cfbag ;};func _eccg (_dbfb _aeg .Matrix )_aeg .Point {_afd ,_gbee :=_dbfb .Translation ();return _aeg .Point {X :_afd ,Y :_gbee };};func _cdcb (_dgfe *TextMarkArray ,_ecf int )int {_gadf :=_dgfe .Elements ();_efb :=_ecf -1;_cfee :=_ecf +1;_fcf :=-1;
if _efb >=0{_fba :=_gadf [_efb ];_gdcf :=_fba .ObjString ;_bgga :=len (_gdcf );_dbgf :=_fba .Index ;if _dbgf +1< _bgga {return _efb ;};};if _cfee < len (_gadf ){_eae :=_gadf [_cfee ];_fae :=_eae .ObjString ;if _fae [0]!=_eae .Text {return _cfee ;};};if _fcf ==-1&&_gadf [_ecf ].Text =="\u0020"{return _efb ;
};return _fcf ;};var (_aebdc =map[rune ]string {0x0060:"\u0300",0x02CB:"\u0300",0x0027:"\u0301",0x00B4:"\u0301",0x02B9:"\u0301",0x02CA:"\u0301",0x005E:"\u0302",0x02C6:"\u0302",0x007E:"\u0303",0x02DC:"\u0303",0x00AF:"\u0304",0x02C9:"\u0304",0x02D8:"\u0306",0x02D9:"\u0307",0x00A8:"\u0308",0x00B0:"\u030a",0x02DA:"\u030a",0x02BA:"\u030b",0x02DD:"\u030b",0x02C7:"\u030c",0x02C8:"\u030d",0x0022:"\u030e",0x02BB:"\u0312",0x02BC:"\u0313",0x0486:"\u0313",0x055A:"\u0313",0x02BD:"\u0314",0x0485:"\u0314",0x0559:"\u0314",0x02D4:"\u031d",0x02D5:"\u031e",0x02D6:"\u031f",0x02D7:"\u0320",0x02B2:"\u0321",0x00B8:"\u0327",0x02CC:"\u0329",0x02B7:"\u032b",0x02CD:"\u0331",0x005F:"\u0332",0x204E:"\u0359"};
);func (_cfdd *stateStack )top ()*textState {if _cfdd .empty (){return nil ;};return (*_cfdd )[_cfdd .size ()-1];};func (_bbee *ruling )gridIntersecting (_dbcf *ruling )bool {return _ffbcb (_bbee ._feded ,_dbcf ._feded )&&_ffbcb (_bbee ._bbebb ,_dbcf ._bbebb );
};func _agbd (_ggbfd []rulingList )(rulingList ,rulingList ){var _ccdg rulingList ;for _ ,_efgd :=range _ggbfd {_ccdg =append (_ccdg ,_efgd ...);};return _ccdg .vertsHorzs ();};func (_gabge lineRuling )yMean ()float64 {return 0.5*(_gabge ._gbcde .Y +_gabge ._eaaeg .Y )};
func _gagf (_efbg *list )[]*list {var _gcfd []*list ;for _ ,_fgbb :=range _efbg ._feddf {switch _fgbb ._dbfbg {case "\u004c\u0049":_becea :=_dcacd (_fgbb );_facb :=_gagf (_fgbb );_fced :=_eafb (_becea ,"\u0062\u0075\u006c\u006c\u0065\u0074",_facb );_dggf :=_gcde (_becea ,"");
_fced ._abbb =_dggf ;_gcfd =append (_gcfd ,_fced );case "\u004c\u0042\u006fd\u0079":return _gagf (_fgbb );case "\u004c":_ebbd :=_gagf (_fgbb );_gcfd =append (_gcfd ,_ebbd ...);return _gcfd ;};};return _gcfd ;};func (_fbeac compositeCell )parasBBox ()(paraList ,_acf .PdfRectangle ){return _fbeac .paraList ,_fbeac .PdfRectangle ;
};

// Text returns the extracted page text.
func (_def PageText )Text ()string {return _def ._dfge };func (_fcdc *textObject )setFont (_cfca string ,_fagd float64 )error {if _fcdc ==nil {return nil ;};_fcdc ._eea ._cfad =_fagd ;_egcc ,_dfde :=_fcdc .getFont (_cfca );if _dfde !=nil {return _dfde ;
};_fcdc ._eea ._cdfg =_egcc ;return nil ;};func (_faegf rulingList )sort (){_g .Slice (_faegf ,_faegf .comp )};func (_cbdca *textPara )writeText (_cfdb _ac .Writer ){if _cbdca ._bcff ==nil {_cbdca .writeCellText (_cfdb );return ;};for _bbea :=0;_bbea < _cbdca ._bcff ._acdga ;
_bbea ++{for _dgfaa :=0;_dgfaa < _cbdca ._bcff ._bdea ;_dgfaa ++{_cgdf :=_cbdca ._bcff .get (_dgfaa ,_bbea );if _cgdf ==nil {_cfdb .Write ([]byte ("\u0009"));}else {_cdggf (_cgdf ._ggfbe );_cgdf .writeCellText (_cfdb );};_cfdb .Write ([]byte ("\u0020"));
};if _bbea < _cbdca ._bcff ._acdga -1{_cfdb .Write ([]byte ("\u000a"));};};};

// Options extractor options.
type Options struct{

// DisableDocumentTags specifies whether to use the document tags during list extraction.
DisableDocumentTags bool ;

// ApplyCropBox will extract page text based on page cropbox if set to `true`.
ApplyCropBox bool ;

// Text extraction mode, default is ExtractionModeLayout.
ExtractionMode ExtractionMode ;

// IncludeAnnotations specifies whether to include annotations in the extraction process, default value is `false`.
IncludeAnnotations bool ;

// RelaxedMode specifies whether to use relaxed mode for processing the objects,
// If enabled UniPDF will automatically try to fix invalid parameters length and value.
// Default is `false`.
RelaxedMode bool ;};func _eggb (_cbdec []*textMark ,_fcdaa _acf .PdfRectangle )string {_a .Log .Trace ("\u006d\u0061\u006b\u0065\u0053i\u006d\u0070\u006c\u0065\u0054\u0065\u0078\u0074\u003a\u0020\u0025\u0064\u0020e\u006c\u0065\u006d\u0065\u006e\u0074\u0073\u0020\u0070\u0061\u0067\u0065\u0053\u0069\u007a\u0065\u003d\u0025\u002e\u0032\u0066",len (_cbdec ),_fcdaa );
_ddaa :="";if len (_cbdec )==0{return _ddaa ;};_ecae :=_dddc (_cbdec ,_fcdaa ,true );if len (_ecae )==0{return _ddaa ;};_cfede :=0.0;_bbgc :=true ;_cecb :="";for _ ,_gcccd :=range _ecae {_dbeb :=_gcccd ._facbbf ;if _dbeb > _gfcbc {_dbeb =_gfcbc ;};if (_gcccd ._dbbagg -_cfede > _bgfe *_dbeb &&_cfede !=0.0)||(_cfede -_gcccd ._dbbagg > _dbeb *10){_beba :=_dfe ([]rune (_cecb ));
_cecb =_beba ._de ;_cecb +="\u000a";_ddaa +=_cecb ;_cecb ="";}else {if !_bbgc {_cecb +="\u0020";};};_cecb +=_gcccd ._cdffa ;_bbgc =false ;_cfede =_gcccd ._dbbagg ;};if _cecb !=""{_dgabe :=_dfe ([]rune (_cecb ));_cecb =_dgabe ._de ;_cecb +="\u000a";_ddaa +=_cecb ;
};return _ddaa ;};func _deab (_accbc byte )bool {for _ ,_bgce :=range _fdcbf {if []byte (_bgce )[0]==_accbc {return true ;};};return false ;};func _acda (_ebadd _acf .PdfColorspace ,_cgadc _acf .PdfColor )_fd .Color {if _ebadd ==nil ||_cgadc ==nil {return _fd .Black ;
};_acefg ,_gfcdf :=_ebadd .ColorToRGB (_cgadc );if _gfcdf !=nil {_a .Log .Debug ("\u0057\u0041\u0052\u004e\u003a\u0020\u0063\u006fu\u006c\u0064\u0020no\u0074\u0020\u0063\u006f\u006e\u0076e\u0072\u0074\u0020\u0063\u006f\u006c\u006f\u0072\u0020\u0025\u0076\u0020\u0028\u0025\u0076)\u0020\u0074\u006f\u0020\u0052\u0047\u0042\u003a \u0025\u0073",_cgadc ,_ebadd ,_gfcdf );
return _fd .Black ;};_gdgcb ,_adgg :=_acefg .(*_acf .PdfColorDeviceRGB );if !_adgg {_a .Log .Debug ("\u0057\u0041\u0052\u004e\u003a\u0020\u0063\u006f\u006e\u0076\u0065\u0072\u0074\u0065\u0064 \u0063\u006f\u006c\u006f\u0072\u0020\u0069\u0073\u0020\u006e\u006f\u0074\u0020i\u006e\u0020\u0074\u0068\u0065\u0020\u0052\u0047\u0042\u0020\u0063\u006flo\u0072\u0073\u0070\u0061\u0063\u0065\u003a\u0020\u0025\u0076",_acefg );
return _fd .Black ;};return _fd .NRGBA {R :uint8 (_gdgcb .R ()*255),G :uint8 (_gdgcb .G ()*255),B :uint8 (_gdgcb .B ()*255),A :uint8 (255)};};

// String returns a human readable description of `vecs`.
func (_dfcb rulingList )String ()string {if len (_dfcb )==0{return "\u007b \u0045\u004d\u0050\u0054\u0059\u0020}";};_efecg ,_dgcb :=_dfcb .vertsHorzs ();_efed :=len (_efecg );_edcgab :=len (_dgcb );if _efed ==0||_edcgab ==0{return _gb .Sprintf ("\u007b%\u0064\u0020\u0078\u0020\u0025\u0064}",_efed ,_edcgab );
};_ggfbg :=_acf .PdfRectangle {Llx :_efecg [0]._eeac ,Urx :_efecg [_efed -1]._eeac ,Lly :_dgcb [_edcgab -1]._eeac ,Ury :_dgcb [0]._eeac };return _gb .Sprintf ("\u007b\u0025d\u0020\u0078\u0020%\u0064\u003a\u0020\u0025\u0036\u002e\u0032\u0066\u007d",_efed ,_edcgab ,_ggfbg );
};func _gcde (_cfaa []*textLine ,_aceda string )string {var _feed _cg .Builder ;_abbbb :=0.0;for _eaed ,_edfef :=range _cfaa {_bfdd :=_edfef .text ();_fccfa :=_edfef ._dgda ;if _eaed < len (_cfaa )-1{_abbbb =_cfaa [_eaed +1]._dgda ;}else {_abbbb =0.0;};
_feed .WriteString (_aceda );_feed .WriteString (_bfdd );if _abbbb !=_fccfa {_feed .WriteString ("\u000a");}else {_feed .WriteString ("\u0020");};};return _feed .String ();};func _cbfa (_fbdfc float64 )float64 {return _bdff *_f .Round (_fbdfc /_bdff )};
func _ecdc (_gcceg ,_cgca *textPara )bool {return _bgeb (_gcceg ._dfcaa ,_cgca ._dfcaa )};func (_eabca *shapesState )moveTo (_fccf ,_eacaa float64 ){_eabca ._dec =true ;_eabca ._fgba =_eabca .devicePoint (_fccf ,_eacaa );if _bdbeg {_a .Log .Info ("\u006d\u006fv\u0065\u0054\u006f\u003a\u0020\u0025\u002e\u0032\u0066\u002c\u0025\u002e\u0032\u0066\u0020\u0064\u0065\u0076\u0069\u0063\u0065\u003d%.\u0032\u0066",_fccf ,_eacaa ,_eabca ._fgba );
};};func (_cbga rulingList )log (_ggaaa string ){if !_eagg {return ;};_a .Log .Info ("\u0023\u0023\u0023\u0020\u0025\u0031\u0030\u0073\u003a\u0020\u0076\u0065c\u0073\u003d\u0025\u0073",_ggaaa ,_cbga .String ());for _abeag ,_fbcg :=range _cbga {_gb .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0073\u000a",_abeag ,_fbcg .String ());
};};func _fcde (_feee *wordBag ,_feaa *textWord ,_ebfbd float64 )bool {return _feaa .Llx < _feee .Urx +_ebfbd &&_feee .Llx -_ebfbd < _feaa .Urx ;};func _gbge (_edede []TextMark ,_gabg *TextTable )[]TextMark {var _dgee []TextMark ;for _ ,_cbbfc :=range _edede {_cbbfc ._addf =true ;
_cbbfc ._fddcb =_gabg ;_dgee =append (_dgee ,_cbbfc );};return _dgee ;};func (_gcegd paraList )list ()[]*list {var _bbbeg []*textLine ;var _egeba []*textLine ;for _ ,_gecgg :=range _gcegd {_fcbb :=_gecgg .getListLines ();_bbbeg =append (_bbbeg ,_fcbb ...);
_egeba =append (_egeba ,_gecgg ._ggfbe ...);};_ebfa :=_aada (_bbbeg );_efaf :=_aee (_egeba ,_ebfa );return _efaf ;};func (_fggc *ruling )encloses (_cdfd ,_bfbbaa float64 )bool {return _fggc ._feded -_bgffd <=_cdfd &&_bfbbaa <=_fggc ._bbebb +_bgffd ;};

// TableInfo gets table information of the textmark `tm`.
func (_agdea *TextMark )TableInfo ()(*TextTable ,[][]int ){if !_agdea ._addf {return nil ,nil ;};_ddce :=_agdea ._fddcb ;_adecc :=_ddce .getCellInfo (*_agdea );return _ddce ,_adecc ;};type textLine struct{_acf .PdfRectangle ;_dgda float64 ;_cfec []*textWord ;
_aebd float64 ;};