//
// Copyright 2020 FoxyUtils ehf. All rights reserved.
//
// This is a commercial product and requires a license to operate.
// A trial license can be obtained at https://unidoc.io
//
// DO NOT EDIT: generated by unitwist Go source code obfuscator.
//
// Use of this source code is governed by the UniDoc End User License Agreement
// terms that can be accessed at https://unidoc.io/eula/

// Package extractor is used for quickly extracting PDF content through a simple interface.
// Currently offers functionality for extracting textual content.
package extractor ;import (_fd "bytes";_gd "errors";_gf "fmt";_b "github.com/unidoc/unipdf/v3/common";_ef "github.com/unidoc/unipdf/v3/contentstream";_fc "github.com/unidoc/unipdf/v3/core";_gg "github.com/unidoc/unipdf/v3/internal/license";_ae "github.com/unidoc/unipdf/v3/internal/textencoding";
_cd "github.com/unidoc/unipdf/v3/internal/transform";_ff "github.com/unidoc/unipdf/v3/model";_bg "golang.org/x/image/draw";_e "golang.org/x/text/unicode/norm";_eg "image";_cf "image/color";_ee "io";_g "math";_c "reflect";_a "regexp";_dc "sort";_ca "strings";
_bga "unicode";_d "unicode/utf8";);func (_eadcb *textObject )reset (){_eadcb ._dddff =_cd .IdentityMatrix ();_eadcb ._bfad =_cd .IdentityMatrix ();_eadcb ._geg =nil ;};func (_cbgbaf intSet )has (_egeeg int )bool {_ ,_bfdc :=_cbgbaf [_egeeg ];return _bfdc };
func _fcbdc (_agddb ,_gdfabg _eg .Image )_eg .Image {_bcfbb ,_cbgda :=_gdfabg .Bounds ().Size (),_agddb .Bounds ().Size ();_bdeg ,_gcaab :=_bcfbb .X ,_bcfbb .Y ;if _cbgda .X > _bdeg {_bdeg =_cbgda .X ;};if _cbgda .Y > _gcaab {_gcaab =_cbgda .Y ;};_fcgdd :=_eg .Rect (0,0,_bdeg ,_gcaab );
if _bcfbb .X !=_bdeg ||_bcfbb .Y !=_gcaab {_efagb :=_eg .NewRGBA (_fcgdd );_bg .BiLinear .Scale (_efagb ,_fcgdd ,_agddb ,_gdfabg .Bounds (),_bg .Over ,nil );_gdfabg =_efagb ;};if _cbgda .X !=_bdeg ||_cbgda .Y !=_gcaab {_eeeef :=_eg .NewRGBA (_fcgdd );_bg .BiLinear .Scale (_eeeef ,_fcgdd ,_agddb ,_agddb .Bounds (),_bg .Over ,nil );
_agddb =_eeeef ;};_cfcfb :=_eg .NewRGBA (_fcgdd );_bg .DrawMask (_cfcfb ,_fcgdd ,_agddb ,_eg .Point {},_gdfabg ,_eg .Point {},_bg .Over );return _cfcfb ;};func (_dbcd paraList )llyOrdering ()[]int {_fdecb :=make ([]int ,len (_dbcd ));for _fbdeg :=range _dbcd {_fdecb [_fbdeg ]=_fbdeg ;
};_dc .SliceStable (_fdecb ,func (_adac ,_ccfe int )bool {_cffg ,_ebbg :=_fdecb [_adac ],_fdecb [_ccfe ];return _dbcd [_cffg ].Lly < _dbcd [_ebbg ].Lly ;});return _fdecb ;};

// String returns a description of `k`.
func (_gegfc rulingKind )String ()string {_ddcdb ,_gcfcf :=_bbfcf [_gegfc ];if !_gcfcf {return _gf .Sprintf ("\u004e\u006ft\u0020\u0061\u0020r\u0075\u006c\u0069\u006e\u0067\u003a\u0020\u0025\u0064",_gegfc );};return _ddcdb ;};func _fgga (_eded ,_egbc _cd .Point )rulingKind {_afdbf :=_g .Abs (_eded .X -_egbc .X );
_cfdeg :=_g .Abs (_eded .Y -_egbc .Y );return _cedef (_afdbf ,_cfdeg ,_cfcbf );};func (_gbdfc *TextMarkArray )getTextMarkAtOffset (_ffcb int )*TextMark {for _ ,_ddfd :=range _gbdfc ._egee {if _ddfd .Offset ==_ffcb {return &_ddfd ;};};return nil ;};func (_dggfd paraList )inTile (_bbcg gridTile )paraList {var _edce paraList ;
for _ ,_bffb :=range _dggfd {if _bbcg .contains (_bffb .PdfRectangle ){_edce =append (_edce ,_bffb );};};if _cebg {_gf .Printf ("\u0020 \u0020\u0069\u006e\u0054i\u006c\u0065\u003a\u0020\u0020%\u0073 \u0069n\u0073\u0069\u0064\u0065\u003d\u0025\u0064\n",_bbcg ,len (_edce ));
for _ededa ,_gefce :=range _edce {_gf .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0073\u000a",_ededa ,_gefce );};_gf .Println ("");};return _edce ;};func (_edfgbc *textTable )reduceTiling (_geadd gridTiling ,_edccf float64 )*textTable {_cdadg :=make ([]int ,0,_edfgbc ._ecedc );
_cffbc :=make ([]int ,0,_edfgbc ._edebd );_egda :=_geadd ._gfbb ;_dbbfc :=_geadd ._cefd ;for _dgbfd :=0;_dgbfd < _edfgbc ._ecedc ;_dgbfd ++{_geba :=_dgbfd > 0&&_g .Abs (_dbbfc [_dgbfd -1]-_dbbfc [_dgbfd ])< _edccf &&_edfgbc .emptyCompositeRow (_dgbfd );
if !_geba {_cdadg =append (_cdadg ,_dgbfd );};};for _geff :=0;_geff < _edfgbc ._edebd ;_geff ++{_aace :=_geff < _edfgbc ._edebd -1&&_g .Abs (_egda [_geff +1]-_egda [_geff ])< _edccf &&_edfgbc .emptyCompositeColumn (_geff );if !_aace {_cffbc =append (_cffbc ,_geff );
};};if len (_cdadg )==_edfgbc ._ecedc &&len (_cffbc )==_edfgbc ._edebd {return _edfgbc ;};_gedeg :=textTable {_fbgad :_edfgbc ._fbgad ,_edebd :len (_cffbc ),_ecedc :len (_cdadg ),_cdafa :make (map[uint64 ]compositeCell ,len (_cffbc )*len (_cdadg ))};if _cebg {_b .Log .Info ("\u0072\u0065\u0064\u0075c\u0065\u0054\u0069\u006c\u0069\u006e\u0067\u003a\u0020\u0025d\u0078%\u0064\u0020\u002d\u003e\u0020\u0025\u0064x\u0025\u0064",_edfgbc ._edebd ,_edfgbc ._ecedc ,len (_cffbc ),len (_cdadg ));
_b .Log .Info ("\u0072\u0065d\u0075\u0063\u0065d\u0043\u006f\u006c\u0073\u003a\u0020\u0025\u002b\u0076",_cffbc );_b .Log .Info ("\u0072\u0065d\u0075\u0063\u0065d\u0052\u006f\u0077\u0073\u003a\u0020\u0025\u002b\u0076",_cdadg );};for _aeecg ,_dgef :=range _cdadg {for _acdf ,_adbe :=range _cffbc {_gace ,_dagg :=_edfgbc .getComposite (_adbe ,_dgef );
if len (_gace )==0{continue ;};if _cebg {_gf .Printf ("\u0020 \u0025\u0032\u0064\u002c \u0025\u0032\u0064\u0020\u0028%\u0032d\u002c \u0025\u0032\u0064\u0029\u0020\u0025\u0071\n",_acdf ,_aeecg ,_adbe ,_dgef ,_aggbc (_gace .merge ().text (),50));};_gedeg .putComposite (_acdf ,_aeecg ,_gace ,_dagg );
};};return &_gedeg ;};

// Match defines the structure for each match, including pattern, indexes, and locations.
type Match struct{Pattern string ;Indexes [][]int ;Locations []Box ;};type lists []*list ;func (_gdgg *textTable )bbox ()_ff .PdfRectangle {return _gdgg .PdfRectangle };type cachedImage struct{_afcc *_ff .Image ;_daca _ff .PdfColorspace ;};func (_ceae paraList )toTextMarks ()[]TextMark {_dcefd :=0;
var _edeba []TextMark ;for _dafag ,_dbece :=range _ceae {if _dbece ._cgac {continue ;};_ecbfb :=_dbece .toTextMarks (&_dcefd );_edeba =append (_edeba ,_ecbfb ...);if _dafag !=len (_ceae )-1{if _ggdcc (_dbece ,_ceae [_dafag +1]){_edeba =_abee (_edeba ,&_dcefd ,"\u0020");
}else {_edeba =_abee (_edeba ,&_dcefd ,"\u000a");_edeba =_abee (_edeba ,&_dcefd ,"\u000a");};};};_edeba =_abee (_edeba ,&_dcefd ,"\u000a");_edeba =_abee (_edeba ,&_dcefd ,"\u000a");return _edeba ;};func (_eabd *wordBag )maxDepth ()float64 {return _eabd ._ddc -_eabd .Lly };
func _aagfb (_eeab int ,_fcdgb func (int ,int )bool )[]int {_cbaf :=make ([]int ,_eeab );for _cdcd :=range _cbaf {_cbaf [_cdcd ]=_cdcd ;};_dc .Slice (_cbaf ,func (_cdcgf ,_gcee int )bool {return _fcdgb (_cbaf [_cdcgf ],_cbaf [_gcee ])});return _cbaf ;};
var _cgefe =[]string {"\u2756","\u27a2","\u2713","\u2022","\uf0a7","\u25a1","\u2212","\u25a0","\u25aa","\u006f"};func (_fedbf rulingList )primaries ()[]float64 {_eeaaf :=make (map[float64 ]struct{},len (_fedbf ));for _ ,_gcgf :=range _fedbf {_eeaaf [_gcgf ._fgbd ]=struct{}{};
};_cafg :=make ([]float64 ,len (_eeaaf ));_bddc :=0;for _bdeda :=range _eeaaf {_cafg [_bddc ]=_bdeda ;_bddc ++;};_dc .Float64s (_cafg );return _cafg ;};func _bfef (_fddg byte )bool {for _ ,_bcage :=range _cgefe {if []byte (_bcage )[0]==_fddg {return true ;
};};return false ;};func (_daef *textObject )setTextRenderMode (_cegd int ){if _daef ==nil {return ;};_daef ._dedg ._cbfg =RenderMode (_cegd );};func (_becg *stateStack )empty ()bool {return len (*_becg )==0};func (_dcdf *PageText )computeViews (){if _dcdf ._abga ._aadcf {_dcdf ._agag =_dcdf .getText ();
return ;};_fgdd :=_dcdf .getParagraphs ();_gbeff :=new (_fd .Buffer );_fgdd .writeText (_gbeff );_dcdf ._agag =_gbeff .String ();_dcdf ._gbeg =_fgdd .toTextMarks ();_dcdf ._ccdc =_fgdd .tables ();if _cebg {_b .Log .Info ("\u0063\u006f\u006dpu\u0074\u0065\u0056\u0069\u0065\u0077\u0073\u003a\u0020\u0074\u0061\u0062\u006c\u0065\u0073\u003d\u0025\u0064",len (_dcdf ._ccdc ));
};};func _fgcc (_gbfa ,_ggce bounded )float64 {return _gbfa .bbox ().Llx -_ggce .bbox ().Llx };func (_eacf *textObject )setTextRise (_cabb float64 ){if _eacf ==nil {return ;};_eacf ._dedg ._eagf =_cabb ;};func (_fbbgd gridTiling )complete ()bool {for _ ,_cfbgc :=range _fbbgd ._bbgf {for _ ,_bbbfg :=range _cfbgc {if !_bbbfg .complete (){return false ;
};};};return true ;};func (_bbea *textObject )getFillColor ()_cf .Color {return _bbbe (_bbea ._cbec .ColorspaceNonStroking ,_bbea ._cbec .ColorNonStroking );};func (_agfa paraList )findTextTables ()[]*textTable {var _efaed []*textTable ;for _ ,_dcaba :=range _agfa {if _dcaba .taken ()||_dcaba .Width ()==0{continue ;
};_fedgb :=_dcaba .isAtom ();if _fedgb ==nil {continue ;};_fedgb .growTable ();if _fedgb ._edebd *_fedgb ._ecedc < _faacd {continue ;};_fedgb .markCells ();_fedgb .log ("\u0067\u0072\u006fw\u006e");_efaed =append (_efaed ,_fedgb );};return _efaed ;};func (_fefa *textObject )setWordSpacing (_fac float64 ){if _fefa ==nil {return ;
};_fefa ._dedg ._egcc =_fac ;};func _dge (_cfc []rune )BidiText {_cfg :=-1;_be :=false ;_aaa :=true ;_ga :=len (_cfc );_ce :=make ([]string ,_ga );_gb :=make ([]string ,_ga );if _ga ==0||_be {return _da (string (_cfc ),_aaa ,_be );};_bbb :=0;for _df ,_dbc :=range _cfc {_ce [_df ]=string (_dbc );
_af :="\u004c";if _dbc <=0x00ff{_af =_caf [_dbc ];}else if 0x0590<=_dbc &&_dbc <=0x05f4{_af ="\u0052";}else if 0x0600<=_dbc &&_dbc <=0x06ff{_fed :=_dbc &0xff;if int (_fed )>=len (_aa ){_b .Log .Debug ("\u0042\u0069\u0064\u0069\u003a\u0020\u0069\u006e\u0076\u0061\u006c\u0069\u0064\u0020\u0055n\u0069c\u006f\u0064\u0065\u0020\u0063\u0068\u0061\u0072\u0061\u0063\u0074\u0065\u0072\u0020"+string (_dbc ));
};_af =_aa [_dbc &0xff];}else if (0x0700<=_dbc &&_dbc <=0x08ac)||(0xfb50<=_dbc &&_dbc <=0xfdff)||(0xfe70<=_dbc &&_dbc <=0xfeff){_af ="\u0041\u004c";};if _af =="\u0052"||_af =="\u0041\u004c"||_af =="\u0041\u004e"{_bbb ++;};_gb [_df ]=_af ;};if _bbb ==0{_aaa =true ;
return _da (string (_cfc ),_aaa ,false );};if _cfg ==-1{if float64 (_bbb )/float64 (_ga )< 0.3&&_ga > 4{_aaa =true ;_cfg =0;}else {_aaa =false ;_cfg =1;};};var _gfc []int ;for range _cfc {_gfc =append (_gfc ,_cfg );};_egf :="\u004c";if _cc (_cfg ){_egf ="\u0052";
};_eb :=_egf ;_dd :=_eb ;_fec :=_eb ;for _ggf :=range _cfc {if _gb [_ggf ]=="\u004e\u0053\u004d"{_gb [_ggf ]=_fec ;}else {_fec =_gb [_ggf ];};};_fec =_eb ;var _ggff string ;for _ffc :=range _cfc {_ggff =_gb [_ffc ];if _ggff =="\u0045\u004e"{if _fec =="\u0041\u004c"{_gb [_ffc ]="\u0041\u004e";
}else {_gb [_ffc ]="\u0045\u004e";};}else if _ggff =="\u0052"||_ggff =="\u004c"||_ggff =="\u0041\u004c"{_fec =_ggff ;};};for _cdd :=range _cfc {_afc :=_gb [_cdd ];if _afc =="\u0041\u004c"{_gb [_cdd ]="\u0052";};};for _aaf :=1;_aaf < (len (_cfc )-1);_aaf ++{if _gb [_aaf ]=="\u0045\u0053"&&_gb [_aaf -1]=="\u0045\u004e"&&_gb [_aaf +1]=="\u0045\u004e"{_gb [_aaf ]="\u0045\u004e";
};if _gb [_aaf ]=="\u0043\u0053"&&(_gb [_aaf -1]=="\u0045\u004e"||_gb [_aaf -1]=="\u0041\u004e")&&_gb [_aaf +1]==_gb [_aaf -1]{_gb [_aaf ]=_gb [_aaf -1];};};for _gfa :=range _cfc {if _gb [_gfa ]=="\u0045\u004e"{for _ccd :=_gfa -1;_ccd >=0;_ccd --{if _gb [_ccd ]!="\u0045\u0054"{break ;
};_gb [_ccd ]="\u0045\u004e";};for _ffg :=_gfa +1;_ffg < _ga ;_ffg ++{if _gb [_ffg ]!="\u0045\u0054"{break ;};_gb [_ffg ]="\u0045\u004e";};};};for _fdd :=range _cfc {_dgb :=_gb [_fdd ];if _dgb =="\u0057\u0053"||_dgb =="\u0045\u0053"||_dgb =="\u0045\u0054"||_dgb =="\u0043\u0053"{_gb [_fdd ]="\u004f\u004e";
};};_fec ="\u0073\u006f\u0072";for _dfd :=range _cfc {_ffa :=_gb [_dfd ];if _ffa =="\u0045\u004e"{if _fec =="\u004c"{_gb [_dfd ]="\u004c";}else {_gb [_dfd ]="\u0045\u004e";};}else if _ffa =="\u0052"||_ffa =="\u004c"{_fec =_ffa ;};};for _bad :=0;_bad < len (_cfc );
_bad ++{if _gb [_bad ]=="\u004f\u004e"{_cadd :=_gfe (_gb ,_bad +1,"\u004f\u004e");_bac :=_dd ;if _bad > 0{_bac =_gb [_bad -1];};_ggb :=_dd ;if _cadd +1< _ga {_ggb =_gb [_cadd +1];};if _bac !="\u004c"{_bac ="\u0052";};if _ggb !="\u004c"{_ggb ="\u0052";};
if _bac ==_ggb {_gc (_gb ,_bad ,_cadd ,_bac );};_bad =_cadd -1;};};for _dged :=range _cfc {if _gb [_dged ]=="\u004f\u004e"{_gb [_dged ]=_egf ;};};for _bbf :=range _cfc {_gdg :=_gb [_bbf ];if _ad (_gfc [_bbf ]){if _gdg =="\u0052"{_gfc [_bbf ]++;}else if _gdg =="\u0041\u004e"||_gdg =="\u0045\u004e"{_gfc [_bbf ]+=2;
};}else if _gdg =="\u004c"||_gdg =="\u0041\u004e"||_gdg =="\u0045\u004e"{_gfc [_bbf ]++;};};_gcf :=-1;_cfb :=99;var _cac int ;for _fdc :=0;_fdc < len (_gfc );_fdc ++{_cac =_gfc [_fdc ];if _gcf < _cac {_gcf =_cac ;};if _cfb > _cac &&_cc (_cac ){_cfb =_cac ;
};};for _cdf :=_gcf ;_cdf >=_cfb ;_cdf --{_fb :=-1;for _ffb :=0;_ffb < len (_gfc );_ffb ++{if _gfc [_ffb ]< _cdf {if _fb >=0{_cad (_ce ,_fb ,_ffb );_fb =-1;};}else if _fb < 0{_fb =_ffb ;};};if _fb >=0{_cad (_ce ,_fb ,len (_gfc ));};};for _dfa :=0;_dfa < len (_ce );
_dfa ++{_fbd :=_ce [_dfa ];if _fbd =="\u003c"||_fbd =="\u003e"{_ce [_dfa ]="";};};return _da (_ca .Join (_ce ,""),_aaa ,false );};func _cc (_db int )bool {return (_db &1)!=0};

// String returns a description of `tm`.
func (_cgdcc *textMark )String ()string {return _gf .Sprintf ("\u0025\u002e\u0032f \u0066\u006f\u006e\u0074\u0073\u0069\u007a\u0065\u003d\u0025\u002e\u0032\u0066\u0020\u0022\u0025\u0073\u0022",_cgdcc .PdfRectangle ,_cgdcc ._dgec ,_cgdcc ._ffcaf );};func _dbec (_dcgb []*textWord ,_dgee float64 ,_aefc ,_afbdg rulingList )*wordBag {_bbfab :=_dfdg (_dcgb [0],_dgee ,_aefc ,_afbdg );
for _ ,_fcbe :=range _dcgb [1:]{_eaefg :=_eec (_fcbe ._efdea );_bbfab ._ggeff [_eaefg ]=append (_bbfab ._ggeff [_eaefg ],_fcbe );_bbfab .PdfRectangle =_baabb (_bbfab .PdfRectangle ,_fcbe .PdfRectangle );};_bbfab .sort ();return _bbfab ;};func (_ddfc *textTable )growTable (){_eeffc :=func (_gaed paraList ){_ddfc ._ecedc ++;
for _eebdd :=0;_eebdd < _ddfc ._edebd ;_eebdd ++{_bdaa :=_gaed [_eebdd ];_ddfc .put (_eebdd ,_ddfc ._ecedc -1,_bdaa );};};_bdgfb :=func (_gbbc paraList ){_ddfc ._edebd ++;for _fbgc :=0;_fbgc < _ddfc ._ecedc ;_fbgc ++{_gecfb :=_gbbc [_fbgc ];_ddfc .put (_ddfc ._edebd -1,_fbgc ,_gecfb );
};};if _fbde {_ddfc .log ("\u0067r\u006f\u0077\u0054\u0061\u0062\u006ce");};for _gaege :=0;;_gaege ++{_gffae :=false ;_beege :=_ddfc .getDown ();_gdaec :=_ddfc .getRight ();if _fbde {_gf .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0073\u000a",_gaege ,_ddfc );
_gf .Printf ("\u0020\u0020 \u0020\u0020\u0020 \u0020\u0064\u006f\u0077\u006e\u003d\u0025\u0073\u000a",_beege );_gf .Printf ("\u0020\u0020 \u0020\u0020\u0020 \u0072\u0069\u0067\u0068\u0074\u003d\u0025\u0073\u000a",_gdaec );};if _beege !=nil &&_gdaec !=nil {_dcbd :=_beege [len (_beege )-1];
if !_dcbd .taken ()&&_dcbd ==_gdaec [len (_gdaec )-1]{_eeffc (_beege );if _gdaec =_ddfc .getRight ();_gdaec !=nil {_bdgfb (_gdaec );_ddfc .put (_ddfc ._edebd -1,_ddfc ._ecedc -1,_dcbd );};_gffae =true ;};};if !_gffae &&_beege !=nil {_eeffc (_beege );_gffae =true ;
};if !_gffae &&_gdaec !=nil {_bdgfb (_gdaec );_gffae =true ;};if !_gffae {break ;};};};type bounded interface{bbox ()_ff .PdfRectangle };func (_egfg *textObject )getFontDirect (_eeac string )(*_ff .PdfFont ,error ){_ccef ,_ccdbe :=_egfg .getFontDict (_eeac );
if _ccdbe !=nil {return nil ,_ccdbe ;};_gdef ,_ccdbe :=_ff .NewPdfFontFromPdfObject (_ccef );if _ccdbe !=nil {_b .Log .Debug ("\u0067\u0065\u0074\u0046\u006f\u006e\u0074\u0044\u0069\u0072\u0065\u0063\u0074\u003a\u0020\u004e\u0065\u0077Pd\u0066F\u006f\u006e\u0074\u0046\u0072\u006f\u006d\u0050\u0064\u0066\u004f\u0062j\u0065\u0063\u0074\u0020\u0066\u0061\u0069\u006c\u0065\u0064\u002e\u0020\u006e\u0061\u006d\u0065\u003d%\u0023\u0071\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_eeac ,_ccdbe );
};return _gdef ,_ccdbe ;};func _gecfg (_eabgg []*textWord ,_dgbea *textWord )[]*textWord {for _ddffe ,_fabeg :=range _eabgg {if _fabeg ==_dgbea {return _dccd (_eabgg ,_ddffe );};};_b .Log .Error ("\u0072\u0065\u006d\u006f\u0076e\u0057\u006f\u0072\u0064\u003a\u0020\u0077\u006f\u0072\u0064\u0073\u0020\u0064o\u0065\u0073\u006e\u0027\u0074\u0020\u0063\u006f\u006e\u0074\u0061\u0069\u006e\u0020\u0077\u006f\u0072\u0064\u003d\u0025\u0073",_dgbea );
return nil ;};func (_bebfd *ruling )gridIntersecting (_badgb *ruling )bool {return _dbgd (_bebfd ._aceb ,_badgb ._aceb )&&_dbgd (_bebfd ._gddcg ,_badgb ._gddcg );};func _dfdg (_fbga *textWord ,_ecfad float64 ,_dgcb ,_fgde rulingList )*wordBag {_cbdgg :=_eec (_fbga ._efdea );
_dfde :=[]*textWord {_fbga };_ccbb :=wordBag {_ggeff :map[int ][]*textWord {_cbdgg :_dfde },PdfRectangle :_fbga .PdfRectangle ,_dfcaf :_fbga ._gfbc ,_ddc :_ecfad ,_bacaf :_dgcb ,_eebd :_fgde };return &_ccbb ;};func _gaca (_cabd *wordBag ,_bbfb *textWord ,_bfgb float64 )bool {return _bbfb .Llx < _cabd .Urx +_bfgb &&_cabd .Llx -_bfgb < _bbfb .Urx ;
};func _gaabe (_bbcd float64 ,_ggcef int )int {if _ggcef ==0{_ggcef =1;};_cegg :=float64 (_ggcef );return int (_g .Round (_bbcd /_cegg )*_cegg );};type textObject struct{_cbgd *Extractor ;_bfbf *_ff .PdfPageResources ;_cbec _ef .GraphicsState ;_dedg *textState ;
_ceed *stateStack ;_dddff _cd .Matrix ;_bfad _cd .Matrix ;_geg []*textMark ;_cebf bool ;};func (_ccge *textLine )markWordBoundaries (){_cbgba :=_fafe *_ccge ._dcdbf ;for _aece ,_bdfca :=range _ccge ._egbe [1:]{if _dedd (_bdfca ,_ccge ._egbe [_aece ])>=_cbgba {_bdfca ._fecgf =true ;
};};};type paraList []*textPara ;var _caf =[]string {"\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0053","\u0042","\u0053","\u0057\u0053","\u0042","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042","\u0042","\u0042","\u0053","\u0057\u0053","\u004f\u004e","\u004f\u004e","\u0045\u0054","\u0045\u0054","\u0045\u0054","\u004f\u004e","\u004f\u004e","\u004f\u004e","\u004f\u004e","\u004f\u004e","\u0045\u0053","\u0043\u0053","\u0045\u0053","\u0043\u0053","\u0043\u0053","\u0045\u004e","\u0045\u004e","\u0045\u004e","\u0045\u004e","\u0045\u004e","\u0045\u004e","\u0045\u004e","\u0045\u004e","\u0045\u004e","\u0045\u004e","\u0043\u0053","\u004f\u004e","\u004f\u004e","\u004f\u004e","\u004f\u004e","\u004f\u004e","\u004f\u004e","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004f\u004e","\u004f\u004e","\u004f\u004e","\u004f\u004e","\u004f\u004e","\u004f\u004e","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004f\u004e","\u004f\u004e","\u004f\u004e","\u004f\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0043\u0053","\u004f\u004e","\u0045\u0054","\u0045\u0054","\u0045\u0054","\u0045\u0054","\u004f\u004e","\u004f\u004e","\u004f\u004e","\u004f\u004e","\u004c","\u004f\u004e","\u004f\u004e","\u0042\u004e","\u004f\u004e","\u004f\u004e","\u0045\u0054","\u0045\u0054","\u0045\u004e","\u0045\u004e","\u004f\u004e","\u004c","\u004f\u004e","\u004f\u004e","\u004f\u004e","\u0045\u004e","\u004c","\u004f\u004e","\u004f\u004e","\u004f\u004e","\u004f\u004e","\u004f\u004e","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004f\u004e","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004f\u004e","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c"};
func _cae (_eeb []int ,_acag *TextMarkArray ,_baf string )(*TextMarkArray ,Box ,error ){_gad :=Box {};_ceba :=_eeb [0];_gddc :=_eeb [1];_age :=len (_baf )-len (_ca .TrimLeft (_baf ,"\u0020"));_dee :=len (_baf )-len (_ca .TrimRight (_baf ,"\u0020\u000a"));
_ceba =_ceba +_age ;_gddc =_gddc -_dee ;_cbgb ,_ace :=_acag .RangeOffset (_ceba ,_gddc );if _ace !=nil {return nil ,_gad ,_ace ;};_cdad ,_bcf :=_cbgb .BBox ();if !_bcf {return nil ,_gad ,_gf .Errorf ("\u0073\u0070\u0061\u006e\u004d\u0061\u0072\u006bs\u002e\u0042\u0042ox\u0020\u0068\u0061\u0073\u0020\u006eo\u0020\u0062\u006f\u0075\u006e\u0064\u0069\u006e\u0067\u0020\u0062\u006f\u0078\u002e\u0020s\u0070\u0061\u006e\u004d\u0061\u0072\u006b\u0073=\u0025\u0073",_cbgb );
};_gad =Box {BBox :_cdad };return _cbgb ,_gad ,nil ;};func (_gaeg paraList )computeEBBoxes (){if _adcg {_b .Log .Info ("\u0063o\u006dp\u0075\u0074\u0065\u0045\u0042\u0042\u006f\u0078\u0065\u0073\u003a");};for _ ,_afaa :=range _gaeg {_afaa ._gbbdf =_afaa .PdfRectangle ;
};_ggee :=_gaeg .yNeighbours (0);for _fgcd ,_aeega :=range _gaeg {_cbgac :=_aeega ._gbbdf ;_ggbba ,_dedgg :=-1.0e9,+1.0e9;for _ ,_bcaa :=range _ggee [_aeega ]{_dggd :=_gaeg [_bcaa ]._gbbdf ;if _dggd .Urx < _cbgac .Llx {_ggbba =_g .Max (_ggbba ,_dggd .Urx );
}else if _cbgac .Urx < _dggd .Llx {_dedgg =_g .Min (_dedgg ,_dggd .Llx );};};for _agaae ,_fccg :=range _gaeg {_gcdeg :=_fccg ._gbbdf ;if _fgcd ==_agaae ||_gcdeg .Ury > _cbgac .Lly {continue ;};if _ggbba <=_gcdeg .Llx &&_gcdeg .Llx < _cbgac .Llx {_cbgac .Llx =_gcdeg .Llx ;
}else if _gcdeg .Urx <=_dedgg &&_cbgac .Urx < _gcdeg .Urx {_cbgac .Urx =_gcdeg .Urx ;};};if _adcg {_gf .Printf ("\u0025\u0034\u0064\u003a %\u0036\u002e\u0032\u0066\u2192\u0025\u0036\u002e\u0032\u0066\u0020\u0025\u0071\u000a",_fgcd ,_aeega ._gbbdf ,_cbgac ,_aggbc (_aeega .text (),50));
};_aeega ._gbbdf =_cbgac ;};if _aecgd {for _ ,_bdbba :=range _gaeg {_bdbba .PdfRectangle =_bdbba ._gbbdf ;};};};func _gfae (_efdd int ,_gagee map[int ][]float64 )([]int ,int ){_aegag :=make ([]int ,_efdd );_eagc :=0;for _aafgc :=0;_aafgc < _efdd ;_aafgc ++{_aegag [_aafgc ]=_eagc ;
_eagc +=len (_gagee [_aafgc ])+1;};return _aegag ,_eagc ;};func _cafd (_ebbe []structElement ,_dbfdc map[int ][]*textLine ,_agfb _fc .PdfObject )[]*list {_ebee :=[]*list {};for _ ,_gfgga :=range _ebbe {_ecdde :=_gfgga ._cced ;_cecg :=int (_gfgga ._abaa );
_efaab :=_gfgga ._feea ;_aaaa :=[]*textLine {};_ggdeb :=[]*list {};_cedg :=_gfgga ._bfff ;_fafb ,_eedb :=(_cedg .(*_fc .PdfObjectReference ));if !_eedb {_b .Log .Debug ("\u0066\u0061\u0069l\u0065\u0064\u0020\u006f\u0074\u0020\u0063\u0061\u0073\u0074\u0020\u0074\u006f\u0020\u002a\u0063\u006f\u0072\u0065\u002e\u0050\u0064\u0066\u004f\u0062\u006a\u0065\u0063\u0074R\u0065\u0066\u0065\u0072\u0065\u006e\u0063\u0065");
};if _cecg !=-1&&_fafb !=nil {if _gecf ,_ceeg :=_dbfdc [_cecg ];_ceeg {if _fffcg ,_gcgd :=_agfb .(*_fc .PdfIndirectObject );_gcgd {_bdbd :=_fffcg .PdfObjectReference ;if _c .DeepEqual (*_fafb ,_bdbd ){_aaaa =_gecf ;};};};};if _ecdde !=nil {_ggdeb =_cafd (_ecdde ,_dbfdc ,_agfb );
};_ebca :=_cgdd (_aaaa ,_efaab ,_ggdeb );_ebee =append (_ebee ,_ebca );};return _ebee ;};func (_bccc *subpath )last ()_cd .Point {return _bccc ._ddfa [len (_bccc ._ddfa )-1]};func _dfdgd (_adggc ,_cabgb int )uint64 {return uint64 (_adggc )*0x1000000+uint64 (_cabgb )};
func _cgede (_eddc ,_aeecc int )int {if _eddc < _aeecc {return _eddc ;};return _aeecc ;};func (_fcce rulingList )vertsHorzs ()(rulingList ,rulingList ){var _eebg ,_gded rulingList ;for _ ,_cfaab :=range _fcce {switch _cfaab ._gefad {case _ebgd :_eebg =append (_eebg ,_cfaab );
case _deca :_gded =append (_gded ,_cfaab );};};return _eebg ,_gded ;};func (_bacafe *wordBag )arrangeText (_agecd bool )*textPara {_bacafe .sort ();if _ccffe {_bacafe .removeDuplicates ();};var _ecdge []*textLine ;for _ ,_edcga :=range _bacafe .depthIndexes (){for !_bacafe .empty (_edcga ){_ebf :=_bacafe .firstReadingIndex (_edcga );
_caba :=_bacafe .firstWord (_ebf );_efecf :=_fdec (_bacafe ,_ebf );_acgabc :=_caba ._gfbc ;if _acgabc < _gccd {_acgabc =_gccd ;};_ebfc :=_caba ._efdea -_abgac *_acgabc ;_bcab :=_caba ._efdea +_abgac *_acgabc ;_bgede :=_agbee *_acgabc ;_acbeb :=_cddc *_acgabc ;
_adcb :for {var _dbcb *textWord ;_fddbc :=0;for _ ,_aafg :=range _bacafe .depthBand (_ebfc ,_bcab ){_agfg :=_bacafe .highestWord (_aafg ,_ebfc ,_bcab );if _agfg ==nil {continue ;};_fabdb :=_dedd (_agfg ,_efecf ._egbe [len (_efecf ._egbe )-1]);if _fabdb < -_acbeb {break _adcb ;
};if !_agecd &&_fabdb > _bgede {continue ;};if _dbcb !=nil &&_fgcc (_agfg ,_dbcb )>=0{continue ;};_dbcb =_agfg ;_fddbc =_aafg ;};if _dbcb ==nil {break ;};_efecf .pullWord (_bacafe ,_dbcb ,_fddbc );};_efecf .markWordBoundaries ();_ecdge =append (_ecdge ,_efecf );
};};if len (_ecdge )==0{return nil ;};_dc .Slice (_ecdge ,func (_gacf ,_bcdab int )bool {return _effg (_ecdge [_gacf ],_ecdge [_bcdab ])< 0});_bdfb :=_edee (_bacafe .PdfRectangle ,_ecdge );if _gdfg {_b .Log .Info ("\u0061\u0072\u0072an\u0067\u0065\u0054\u0065\u0078\u0074\u0020\u0021\u0021\u0021\u0020\u0070\u0061\u0072\u0061\u003d\u0025\u0073",_bdfb .String ());
if _bdfc {for _dfdd ,_adgg :=range _bdfb ._gfef {_gf .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0073\u000a",_dfdd ,_adgg .String ());if _fcabe {for _efbc ,_dgcf :=range _adgg ._egbe {_gf .Printf ("\u0025\u0038\u0064\u003a\u0020\u0025\u0073\u000a",_efbc ,_dgcf .String ());
for _gbfc ,_eabe :=range _dgcf ._eacb {_gf .Printf ("\u00251\u0032\u0064\u003a\u0020\u0025\u0073\n",_gbfc ,_eabe .String ());};};};};};};return _bdfb ;};func _gc (_ega []string ,_ag int ,_ge int ,_fa string ){for _gfd :=_ag ;_gfd < _ge ;_gfd ++{_ega [_gfd ]=_fa ;
};};func (_abe *textObject )setFont (_agcd string ,_fefb float64 )error {if _abe ==nil {return nil ;};_abe ._dedg ._dgd =_fefb ;_ebedf ,_feba :=_abe .getFont (_agcd );if _feba !=nil {return _feba ;};_abe ._dedg ._egfa =_ebedf ;return nil ;};

// ImageMark represents an image drawn on a page and its position in device coordinates.
// All coordinates are in device coordinates.
type ImageMark struct{Image *_ff .Image ;

// Dimensions of the image as displayed in the PDF.
Width float64 ;Height float64 ;

// Position of the image in PDF coordinates (lower left corner).
X float64 ;Y float64 ;

// Angle in degrees, if rotated.
Angle float64 ;};

// String returns a string describing `ma`.
func (_gae TextMarkArray )String ()string {_aeb :=len (_gae ._egee );if _aeb ==0{return "\u0045\u004d\u0050T\u0059";};_gbega :=_gae ._egee [0];_gbgc :=_gae ._egee [_aeb -1];return _gf .Sprintf ("\u007b\u0054\u0045\u0058\u0054\u004d\u0041\u0052K\u0041\u0052\u0052AY\u003a\u0020\u0025\u0064\u0020\u0065l\u0065\u006d\u0065\u006e\u0074\u0073\u000a\u0009\u0066\u0069\u0072\u0073\u0074\u003d\u0025s\u000a\u0009\u0020\u006c\u0061\u0073\u0074\u003d%\u0073\u007d",_aeb ,_gbega ,_gbgc );
};const _aaadb =20;func _dccd (_cbafg []*textWord ,_gefda int )[]*textWord {_afffe :=len (_cbafg );copy (_cbafg [_gefda :],_cbafg [_gefda +1:]);return _cbafg [:_afffe -1];};func (_fbcdc *textLine )appendWord (_efga *textWord ){_fbcdc ._egbe =append (_fbcdc ._egbe ,_efga );
_fbcdc .PdfRectangle =_baabb (_fbcdc .PdfRectangle ,_efga .PdfRectangle );if _efga ._gfbc > _fbcdc ._dcdbf {_fbcdc ._dcdbf =_efga ._gfbc ;};if _efga ._efdea > _fbcdc ._cdab {_fbcdc ._cdab =_efga ._efdea ;};};

// ToTextMark returns the public view of `tm`.
func (_dbffe *textMark )ToTextMark ()TextMark {return TextMark {Text :_dbffe ._ffcaf ,Original :_dbffe ._fedb ,BBox :_dbffe ._bfaf ,Font :_dbffe ._aaee ,FontSize :_dbffe ._dgec ,FillColor :_dbffe ._cfbba ,StrokeColor :_dbffe ._ddae ,Orientation :_dbffe ._eecb ,DirectObject :_dbffe ._fgadd ,ObjString :_dbffe ._bcfb ,Tw :_dbffe .Tw ,Th :_dbffe .Th ,Tc :_dbffe ._agdb ,Index :_dbffe ._gaeb };
};func _abee (_bgeg []TextMark ,_gbce *int ,_dgdbe string )[]TextMark {_cdac :=_cegf ;_cdac .Text =_dgdbe ;return _cecd (_bgeg ,_gbce ,_cdac );};func _dbbec (_ccfcg *textLine ,_ffdd []*textLine ,_gfgbe []float64 )float64 {var _cebaa float64 =-1;for _ ,_gbdd :=range _ffdd {if _gbdd ._cdab > _ccfcg ._cdab {if _g .Round (_gbdd .Llx )>=_g .Round (_ccfcg .Llx ){_cebaa =_gbdd ._cdab ;
}else {break ;};};};return _cebaa ;};func _cceeg (_cfad []_fc .PdfObject )(_bbfgg ,_dgeeg float64 ,_gccg error ){if len (_cfad )!=2{return 0,0,_gf .Errorf ("\u0069\u006e\u0076\u0061l\u0069\u0064\u0020\u006e\u0075\u006d\u0062\u0065\u0072\u0020o\u0066 \u0070\u0061\u0072\u0061\u006d\u0073\u003a \u0025\u0064",len (_cfad ));
};_cedb ,_gccg :=_fc .GetNumbersAsFloat (_cfad );if _gccg !=nil {return 0,0,_gccg ;};return _cedb [0],_cedb [1],nil ;};func _gbgdf (_bfeba *_ff .Image ,_acca _cf .Color )_eg .Image {_egfce ,_accc :=int (_bfeba .Width ),int (_bfeba .Height );_beab :=_eg .NewRGBA (_eg .Rect (0,0,_egfce ,_accc ));
for _dcgg :=0;_dcgg < _accc ;_dcgg ++{for _cfefe :=0;_cfefe < _egfce ;_cfefe ++{_bfffe ,_bagc :=_bfeba .ColorAt (_cfefe ,_dcgg );if _bagc !=nil {_b .Log .Debug ("\u0057\u0041\u0052\u004e\u003a\u0020\u0063o\u0075\u006c\u0064\u0020\u006e\u006f\u0074\u0020\u0072\u0065\u0074\u0072\u0069\u0065v\u0065 \u0069\u006d\u0061\u0067\u0065\u0020m\u0061\u0073\u006b\u0020\u0076\u0061\u006cu\u0065\u0020\u0061\u0074\u0020\u0028\u0025\u0064\u002c\u0020\u0025\u0064\u0029\u002e\u0020\u004f\u0075\u0074\u0070\u0075\u0074\u0020\u006da\u0079\u0020\u0062\u0065\u0020\u0069\u006e\u0063\u006f\u0072\u0072\u0065\u0063t\u002e",_cfefe ,_dcgg );
continue ;};_edbcb ,_bedfd ,_cecga ,_ :=_bfffe .RGBA ();var _bagfc _cf .Color ;if _edbcb +_bedfd +_cecga ==0{_bagfc =_acca ;}else {_bagfc =_cf .Transparent ;};_beab .Set (_cfefe ,_dcgg ,_bagfc );};};return _beab ;};func (_cbdc *shapesState )quadraticTo (_gbabe ,_adfc ,_eccd ,_badf float64 ){if _fdgc {_b .Log .Info ("\u0071\u0075\u0061d\u0072\u0061\u0074\u0069\u0063\u0054\u006f\u003a");
};_cbdc .addPoint (_eccd ,_badf );};func (_dgbcd pathSection )bbox ()_ff .PdfRectangle {_dfda :=_dgbcd ._adg [0]._ddfa [0];_fdde :=_ff .PdfRectangle {Llx :_dfda .X ,Urx :_dfda .X ,Lly :_dfda .Y ,Ury :_dfda .Y };_adaa :=func (_ffeg _cd .Point ){if _ffeg .X < _fdde .Llx {_fdde .Llx =_ffeg .X ;
}else if _ffeg .X > _fdde .Urx {_fdde .Urx =_ffeg .X ;};if _ffeg .Y < _fdde .Lly {_fdde .Lly =_ffeg .Y ;}else if _ffeg .Y > _fdde .Ury {_fdde .Ury =_ffeg .Y ;};};for _ ,_ageg :=range _dgbcd ._adg [0]._ddfa [1:]{_adaa (_ageg );};for _ ,_bfg :=range _dgbcd ._adg [1:]{for _ ,_faaea :=range _bfg ._ddfa {_adaa (_faaea );
};};return _fdde ;};func _cecf (_gbab _cd .Matrix )_cd .Point {_geeg ,_baab :=_gbab .Translation ();return _cd .Point {X :_geeg ,Y :_baab };};func (_afbd TextTable )getCellInfo (_aggc TextMark )[][]int {for _aebf ,_gebb :=range _afbd .Cells {for _edgd :=range _gebb {_ccgg :=&_gebb [_edgd ].Marks ;
if _ccgg .exists (_aggc ){return [][]int {{_aebf },{_edgd }};};};};return nil ;};func _bdga (_abgbaa []*textMark ,_dacdd _ff .PdfRectangle ,_edae bool )[]*textWord {var _bfaa []*textWord ;var _cgaba *textWord ;if _baec {_b .Log .Info ("\u006d\u0061\u006beT\u0065\u0078\u0074\u0057\u006f\u0072\u0064\u0073\u003a\u0020\u0025\u0064\u0020\u006d\u0061\u0072\u006b\u0073",len (_abgbaa ));
};_fdcb :=func (){if _cgaba !=nil {_eccbd :=_cgaba .computeText ();if !_egdga (_eccbd ){_cgaba ._dbefc =_eccbd ;_bfaa =append (_bfaa ,_cgaba );if _baec {_b .Log .Info ("\u0061\u0064\u0064Ne\u0077\u0057\u006f\u0072\u0064\u003a\u0020\u0025\u0064\u003a\u0020\u0077\u006f\u0072\u0064\u003d\u0025\u0073",len (_bfaa )-1,_cgaba .String ());
for _eacea ,_afeb :=range _cgaba ._eacb {_gf .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0073\u000a",_eacea ,_afeb .String ());};};};_cgaba =nil ;};};for _ ,_ecag :=range _abgbaa {if _dacgf &&_cgaba !=nil &&len (_cgaba ._eacb )> 0{_dcgda :=_cgaba ._eacb [len (_cgaba ._eacb )-1];
_ebef ,_feccc :=_dbaf (_ecag ._ffcaf );_baffg ,_ebgde :=_dbaf (_dcgda ._ffcaf );if _feccc &&!_ebgde &&_dcgda .inDiacriticArea (_ecag ){_cgaba .addDiacritic (_ebef );continue ;};if _ebgde &&!_feccc &&_ecag .inDiacriticArea (_dcgda ){_cgaba ._eacb =_cgaba ._eacb [:len (_cgaba ._eacb )-1];
_cgaba .appendMark (_ecag ,_dacdd );_cgaba .addDiacritic (_baffg );continue ;};};_agebf :=_egdga (_ecag ._ffcaf );if _agebf {_fdcb ();continue ;};if _cgaba ==nil &&!_agebf {_cgaba =_bfdbb ([]*textMark {_ecag },_dacdd );continue ;};_edebda :=_cgaba ._gfbc ;
_agead :=_g .Abs (_aedc (_dacdd ,_ecag )-_cgaba ._efdea )/_edebda ;_baggb :=_dedd (_ecag ,_cgaba )/_edebda ;_gadgg :=_cgaba .Width ()+_ecag .Width ();if _edae &&_ecag ._aeag .Angle ()!=0.0{_gddeg :=_g .Abs (_gadgg *_g .Tan (_ecag ._aeag .Angle ())/_edebda );
if _agead > _gddeg {_agead -=_gddeg ;}else {_agead =0.0;};};if _baggb >=_adaec ||!(-_adef <=_baggb &&_agead <=_dfeag ){_fdcb ();_cgaba =_bfdbb ([]*textMark {_ecag },_dacdd );continue ;};_cgaba .appendMark (_ecag ,_dacdd );};_fdcb ();return _bfaa ;};func (_fcbb *shapesState )establishSubpath ()*subpath {_eagg ,_aega :=_fcbb .lastpointEstablished ();
if !_aega {_fcbb ._afgc =append (_fcbb ._afgc ,_agaf (_eagg ));};if len (_fcbb ._afgc )==0{return nil ;};_fcbb ._acc =false ;return _fcbb ._afgc [len (_fcbb ._afgc )-1];};func _de (_ceb []Font ,_dfc string )bool {for _ ,_bbg :=range _ceb {if _bbg .FontName ==_dfc {return true ;
};};return false ;};func (_bdc *shapesState )newSubPath (){_bdc .clearPath ();if _fdgc {_b .Log .Info ("\u006e\u0065\u0077\u0053\u0075\u0062\u0050\u0061\u0074h\u003a\u0020\u0025\u0073",_bdc );};};const _dbbcb =1.0/1000.0;var _cegf =TextMark {Text :"\u005b\u0058\u005d",Original :"\u0020",Meta :true ,FillColor :_cf .White ,StrokeColor :_cf .White };
func _bace (_bfd *_ef .ContentStreamOperation )(float64 ,error ){if len (_bfd .Params )!=1{_egdb :=_gd .New ("\u0069n\u0063\u006f\u0072\u0072e\u0063\u0074\u0020\u0070\u0061r\u0061m\u0065t\u0065\u0072\u0020\u0063\u006f\u0075\u006et");_b .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0025\u0023\u0071\u0020\u0073\u0068\u006f\u0075\u006c\u0064\u0020h\u0061\u0076\u0065\u0020\u0025\u0064\u0020i\u006e\u0070\u0075\u0074\u0020\u0070\u0061\u0072\u0061\u006d\u0073,\u0020\u0067\u006f\u0074\u0020\u0025\u0064\u0020\u0025\u002b\u0076",_bfd .Operand ,1,len (_bfd .Params ),_bfd .Params );
return 0.0,_egdb ;};return _fc .GetNumberAsFloat (_bfd .Params [0]);};func _bagfec (_gcabf ,_agad *textPara )bool {return _fffae (_gcabf ._gbbdf ,_agad ._gbbdf )};

// GetContentStreamOps returns the contentStreamOps field of `pt`.
func (_fagc *PageText )GetContentStreamOps ()*_ef .ContentStreamOperations {return _fagc ._geeed };

// New returns an Extractor instance for extracting content from the input PDF page.
func New (page *_ff .PdfPage )(*Extractor ,error ){return NewWithOptions (page ,nil )};

// Elements returns the TextMarks in `ma`.
func (_degg *TextMarkArray )Elements ()[]TextMark {return _degg ._egee };func (_begec paraList )addNeighbours (){_becba :=func (_ddgf []int ,_agdd *textPara )([]*textPara ,[]*textPara ){_cffdf :=make ([]*textPara ,0,len (_ddgf )-1);_aagef :=make ([]*textPara ,0,len (_ddgf )-1);
for _ ,_gdcae :=range _ddgf {_ebadc :=_begec [_gdcae ];if _ebadc .Urx <=_agdd .Llx {_cffdf =append (_cffdf ,_ebadc );}else if _ebadc .Llx >=_agdd .Urx {_aagef =append (_aagef ,_ebadc );};};return _cffdf ,_aagef ;};_bfefee :=func (_aedac []int ,_adgbg *textPara )([]*textPara ,[]*textPara ){_ggadfe :=make ([]*textPara ,0,len (_aedac )-1);
_beef :=make ([]*textPara ,0,len (_aedac )-1);for _ ,_begd :=range _aedac {_dcad :=_begec [_begd ];if _dcad .Ury <=_adgbg .Lly {_beef =append (_beef ,_dcad );}else if _dcad .Lly >=_adgbg .Ury {_ggadfe =append (_ggadfe ,_dcad );};};return _ggadfe ,_beef ;
};_dbcdef :=_begec .yNeighbours (_efgf );for _ ,_eafd :=range _begec {_efcbd :=_dbcdef [_eafd ];if len (_efcbd )==0{continue ;};_abcc ,_abaeb :=_becba (_efcbd ,_eafd );if len (_abcc )==0&&len (_abaeb )==0{continue ;};if len (_abcc )> 0{_gffaa :=_abcc [0];
for _ ,_cfcaa :=range _abcc [1:]{if _cfcaa .Urx >=_gffaa .Urx {_gffaa =_cfcaa ;};};for _ ,_dcgce :=range _abcc {if _dcgce !=_gffaa &&_dcgce .Urx > _gffaa .Llx {_gffaa =nil ;break ;};};if _gffaa !=nil &&_dcb (_eafd .PdfRectangle ,_gffaa .PdfRectangle ){_eafd ._dfec =_gffaa ;
};};if len (_abaeb )> 0{_dcac :=_abaeb [0];for _ ,_bfege :=range _abaeb [1:]{if _bfege .Llx <=_dcac .Llx {_dcac =_bfege ;};};for _ ,_dbgfa :=range _abaeb {if _dbgfa !=_dcac &&_dbgfa .Llx < _dcac .Urx {_dcac =nil ;break ;};};if _dcac !=nil &&_dcb (_eafd .PdfRectangle ,_dcac .PdfRectangle ){_eafd ._egbd =_dcac ;
};};};_dbcdef =_begec .xNeighbours (_gdde );for _ ,_gcgde :=range _begec {_bedee :=_dbcdef [_gcgde ];if len (_bedee )==0{continue ;};_gfafe ,_fgfce :=_bfefee (_bedee ,_gcgde );if len (_gfafe )==0&&len (_fgfce )==0{continue ;};if len (_fgfce )> 0{_bfdaa :=_fgfce [0];
for _ ,_efaf :=range _fgfce [1:]{if _efaf .Ury >=_bfdaa .Ury {_bfdaa =_efaf ;};};for _ ,_adga :=range _fgfce {if _adga !=_bfdaa &&_adga .Ury > _bfdaa .Lly {_bfdaa =nil ;break ;};};if _bfdaa !=nil &&_fffae (_gcgde .PdfRectangle ,_bfdaa .PdfRectangle ){_gcgde ._acgf =_bfdaa ;
};};if len (_gfafe )> 0{_agce :=_gfafe [0];for _ ,_bdda :=range _gfafe [1:]{if _bdda .Lly <=_agce .Lly {_agce =_bdda ;};};for _ ,_fege :=range _gfafe {if _fege !=_agce &&_fege .Lly < _agce .Ury {_agce =nil ;break ;};};if _agce !=nil &&_fffae (_gcgde .PdfRectangle ,_agce .PdfRectangle ){_gcgde ._cbaa =_agce ;
};};};for _ ,_fffb :=range _begec {if _fffb ._dfec !=nil &&_fffb ._dfec ._egbd !=_fffb {_fffb ._dfec =nil ;};if _fffb ._cbaa !=nil &&_fffb ._cbaa ._acgf !=_fffb {_fffb ._cbaa =nil ;};if _fffb ._egbd !=nil &&_fffb ._egbd ._dfec !=_fffb {_fffb ._egbd =nil ;
};if _fffb ._acgf !=nil &&_fffb ._acgf ._cbaa !=_fffb {_fffb ._acgf =nil ;};};};func _cedef (_cfga ,_fedg ,_acddc float64 )rulingKind {if _cfga >=_acddc &&_afag (_fedg ,_cfga ){return _deca ;};if _fedg >=_acddc &&_afag (_cfga ,_fedg ){return _ebgd ;};return _ccebbf ;
};func (_eccbg *textObject )showTextAdjusted (_gbef *_fc .PdfObjectArray ,_cffd int ,_degad string )error {_bdb :=false ;for _ ,_cgba :=range _gbef .Elements (){switch _cgba .(type ){case *_fc .PdfObjectFloat ,*_fc .PdfObjectInteger :_cfcd ,_afbc :=_fc .GetNumberAsFloat (_cgba );
if _afbc !=nil {_b .Log .Debug ("\u0045\u0052\u0052\u004fR\u003a\u0020\u0073\u0068\u006f\u0077\u0054\u0065\u0078t\u0041\u0064\u006a\u0075\u0073\u0074\u0065\u0064\u002e\u0020\u0042\u0061\u0064\u0020\u006e\u0075\u006d\u0065r\u0069\u0063\u0061\u006c\u0020a\u0072\u0067\u002e\u0020\u006f\u003d\u0025\u0073\u0020\u0061\u0072\u0067\u0073\u003d\u0025\u002b\u0076",_cgba ,_gbef );
return _afbc ;};_bafb ,_ggbc :=-_cfcd *0.001*_eccbg ._dedg ._dgd ,0.0;if _bdb {_ggbc ,_bafb =_bafb ,_ggbc ;};_fabb :=_febc (_cd .Point {X :_bafb ,Y :_ggbc });_eccbg ._dddff .Concat (_fabb );case *_fc .PdfObjectString :_eabg :=_fc .TraceToDirectObject (_cgba );
_agbe ,_bgda :=_fc .GetStringBytes (_eabg );if !_bgda {_b .Log .Trace ("s\u0068\u006f\u0077\u0054\u0065\u0078\u0074\u0041\u0064j\u0075\u0073\u0074\u0065\u0064\u003a\u0020Ba\u0064\u0020\u0073\u0074r\u0069\u006e\u0067\u0020\u0061\u0072\u0067\u002e\u0020o=\u0025\u0073 \u0061\u0072\u0067\u0073\u003d\u0025\u002b\u0076",_cgba ,_gbef );
return _fc .ErrTypeError ;};_eccbg .renderText (_eabg ,_agbe ,_cffd ,_degad );default:_b .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0073\u0068\u006f\u0077\u0054\u0065\u0078\u0074A\u0064\u006a\u0075\u0073\u0074\u0065\u0064\u002e\u0020\u0055\u006e\u0065\u0078p\u0065\u0063\u0074\u0065\u0064\u0020\u0074\u0079\u0070\u0065\u0020\u0028%T\u0029\u0020\u0061\u0072\u0067\u0073\u003d\u0025\u002b\u0076",_cgba ,_gbef );
return _fc .ErrTypeError ;};};return nil ;};func (_cgga *shapesState )moveTo (_gac ,_beeg float64 ){_cgga ._acc =true ;_cgga ._bcb =_cgga .devicePoint (_gac ,_beeg );if _fdgc {_b .Log .Info ("\u006d\u006fv\u0065\u0054\u006f\u003a\u0020\u0025\u002e\u0032\u0066\u002c\u0025\u002e\u0032\u0066\u0020\u0064\u0065\u0076\u0069\u0063\u0065\u003d%.\u0032\u0066",_gac ,_beeg ,_cgga ._bcb );
};};func _abbg (_bbag float64 )bool {return _g .Abs (_bbag )< _gbgaa };func (_ceebb lineRuling )yMean ()float64 {return 0.5*(_ceebb ._dabfc .Y +_ceebb ._cfacg .Y )};func (_gfaf *stateStack )pop ()*textState {if _gfaf .empty (){return nil ;};_bfcgf :=*(*_gfaf )[len (*_gfaf )-1];
*_gfaf =(*_gfaf )[:len (*_gfaf )-1];return &_bfcgf ;};func _fegc (_cafbd map[int ][]float64 ){if len (_cafbd )<=1{return ;};_fcdg :=_abdcc (_cafbd );if _cebg {_b .Log .Info ("\u0066i\u0078C\u0065\u006c\u006c\u0073\u003a \u006b\u0065y\u0073\u003d\u0025\u002b\u0076",_fcdg );
};var _acgg ,_begeb int ;for _acgg ,_begeb =range _fcdg {if _cafbd [_begeb ]!=nil {break ;};};for _ecda ,_eegeb :=range _fcdg [_acgg :]{_edede :=_cafbd [_eegeb ];if _edede ==nil {continue ;};if _cebg {_gf .Printf ("\u0025\u0034\u0064\u003a\u0020\u006b\u0030\u003d\u0025\u0064\u0020\u006b1\u003d\u0025\u0064\u000a",_acgg +_ecda ,_begeb ,_eegeb );
};_daag :=_cafbd [_eegeb ];if _daag [len (_daag )-1]> _edede [0]{_daag [len (_daag )-1]=_edede [0];_cafbd [_begeb ]=_daag ;};_begeb =_eegeb ;};};func (_cgacc rulingList )sortStrict (){_dc .Slice (_cgacc ,func (_gcce ,_fcgd int )bool {_dbgfg ,_dbgcb :=_cgacc [_gcce ],_cgacc [_fcgd ];
_fbcde ,_ddge :=_dbgfg ._gefad ,_dbgcb ._gefad ;if _fbcde !=_ddge {return _fbcde > _ddge ;};_agbga ,_fgegf :=_dbgfg ._fgbd ,_dbgcb ._fgbd ;if !_abbg (_agbga -_fgegf ){return _agbga < _fgegf ;};_agbga ,_fgegf =_dbgfg ._aceb ,_dbgcb ._aceb ;if _agbga !=_fgegf {return _agbga < _fgegf ;
};return _dbgfg ._gddcg < _dbgcb ._gddcg ;});};func (_egcd *TextMarkArray )exists (_bcdc TextMark )bool {for _ ,_gabe :=range _egcd .Elements (){if _c .DeepEqual (_bcdc .DirectObject ,_gabe .DirectObject )&&_c .DeepEqual (_bcdc .BBox ,_gabe .BBox )&&_gabe .Text ==_bcdc .Text {return true ;
};};return false ;};func (_fefd compositeCell )split (_ecef ,_acdd []float64 )*textTable {_efcec :=len (_ecef )+1;_bfbcf :=len (_acdd )+1;if _cebg {_b .Log .Info ("\u0063\u006f\u006d\u0070\u006f\u0073\u0069t\u0065\u0043\u0065l\u006c\u002e\u0073\u0070l\u0069\u0074\u003a\u0020\u0025\u0064\u0020\u0078\u0020\u0025\u0064\u000a\u0009\u0063\u006f\u006d\u0070\u006f\u0073\u0069\u0074\u0065\u003d\u0025\u0073\u000a"+"\u0009\u0072\u006f\u0077\u0043\u006f\u0072\u0072\u0069\u0064\u006f\u0072\u0073=\u0025\u0036\u002e\u0032\u0066\u000a\t\u0063\u006f\u006c\u0043\u006f\u0072\u0072\u0069\u0064\u006f\u0072\u0073\u003d%\u0036\u002e\u0032\u0066",_bfbcf ,_efcec ,_fefd ,_ecef ,_acdd );
_gf .Printf ("\u0020\u0020\u0020\u0020\u0025\u0064\u0020\u0070\u0061\u0072\u0061\u0073\u000a",len (_fefd .paraList ));for _gbge ,_ccgcd :=range _fefd .paraList {_gf .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0073\u000a",_gbge ,_ccgcd .String ());};
_gf .Printf ("\u0020\u0020\u0020\u0020\u0025\u0064\u0020\u006c\u0069\u006e\u0065\u0073\u000a",len (_fefd .lines ()));for _cedc ,_bcadc :=range _fefd .lines (){_gf .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0073\u000a",_cedc ,_bcadc );};};_ecef =_cecad (_ecef ,_fefd .Ury ,_fefd .Lly );
_acdd =_cecad (_acdd ,_fefd .Llx ,_fefd .Urx );_bebff :=make (map[uint64 ]*textPara ,_bfbcf *_efcec );_efgd :=textTable {_edebd :_bfbcf ,_ecedc :_efcec ,_eafac :_bebff };_agab :=_fefd .paraList ;_dc .Slice (_agab ,func (_daba ,_fbcb int )bool {_dbbbd ,_fedcc :=_agab [_daba ],_agab [_fbcb ];
_egbg ,_dgbf :=_dbbbd .Lly ,_fedcc .Lly ;if _egbg !=_dgbf {return _egbg < _dgbf ;};return _dbbbd .Llx < _fedcc .Llx ;});_cegdg :=make (map[uint64 ]_ff .PdfRectangle ,_bfbcf *_efcec );for _ddfbb ,_ffac :=range _ecef [1:]{_cggfb :=_ecef [_ddfbb ];for _cgcdb ,_aedfe :=range _acdd [1:]{_afgd :=_acdd [_cgcdb ];
_cegdg [_dfdgd (_cgcdb ,_ddfbb )]=_ff .PdfRectangle {Llx :_afgd ,Urx :_aedfe ,Lly :_ffac ,Ury :_cggfb };};};if _cebg {_b .Log .Info ("\u0063\u006f\u006d\u0070\u006f\u0073\u0069\u0074\u0065\u0043\u0065l\u006c\u002e\u0073\u0070\u006c\u0069\u0074\u003a\u0020\u0072e\u0063\u0074\u0073");
_gf .Printf ("\u0020\u0020\u0020\u0020");for _adad :=0;_adad < _bfbcf ;_adad ++{_gf .Printf ("\u0025\u0033\u0030\u0064\u002c\u0020",_adad );};_gf .Println ();for _aabgc :=0;_aabgc < _efcec ;_aabgc ++{_gf .Printf ("\u0020\u0020\u0025\u0032\u0064\u003a",_aabgc );
for _adda :=0;_adda < _bfbcf ;_adda ++{_gf .Printf ("\u00256\u002e\u0032\u0066\u002c\u0020",_cegdg [_dfdgd (_adda ,_aabgc )]);};_gf .Println ();};};_gfgf :=func (_babce *textLine )(int ,int ){for _aabe :=0;_aabe < _efcec ;_aabe ++{for _babca :=0;_babca < _bfbcf ;
_babca ++{if _cefa (_cegdg [_dfdgd (_babca ,_aabe )],_babce .PdfRectangle ){return _babca ,_aabe ;};};};return -1,-1;};_dafb :=make (map[uint64 ][]*textLine ,_bfbcf *_efcec );for _ ,_cacbd :=range _agab .lines (){_badfa ,_badge :=_gfgf (_cacbd );if _badfa < 0{continue ;
};_dafb [_dfdgd (_badfa ,_badge )]=append (_dafb [_dfdgd (_badfa ,_badge )],_cacbd );};for _ggfac :=0;_ggfac < len (_ecef )-1;_ggfac ++{_badfd :=_ecef [_ggfac ];_eafa :=_ecef [_ggfac +1];for _dgebbb :=0;_dgebbb < len (_acdd )-1;_dgebbb ++{_degdf :=_acdd [_dgebbb ];
_ddce :=_acdd [_dgebbb +1];_bfdgg :=_ff .PdfRectangle {Llx :_degdf ,Urx :_ddce ,Lly :_eafa ,Ury :_badfd };_fbcba :=_dafb [_dfdgd (_dgebbb ,_ggfac )];if len (_fbcba )==0{continue ;};_cfda :=_edee (_bfdgg ,_fbcba );_efgd .put (_dgebbb ,_ggfac ,_cfda );};
};return &_efgd ;};func (_abgb *wordBag )text ()string {_gbgdd :=_abgb .allWords ();_gbae :=make ([]string ,len (_gbgdd ));for _agbd ,_cgeb :=range _gbgdd {_gbae [_agbd ]=_cgeb ._dbefc ;};return _ca .Join (_gbae ,"\u0020");};func _gdgga (_efcfc ,_dbeeg ,_ddff ,_dcfdb *textPara )*textTable {_degca :=&textTable {_edebd :2,_ecedc :2,_eafac :make (map[uint64 ]*textPara ,4)};
_degca .put (0,0,_efcfc );_degca .put (1,0,_dbeeg );_degca .put (0,1,_ddff );_degca .put (1,1,_dcfdb );return _degca ;};

// TableInfo gets table information of the textmark `tm`.
func (_gaad *TextMark )TableInfo ()(*TextTable ,[][]int ){if !_gaad ._ggda {return nil ,nil ;};_cede :=_gaad ._agae ;_ebb :=_cede .getCellInfo (*_gaad );return _cede ,_ebb ;};func (_egbf rectRuling )asRuling ()(*ruling ,bool ){_cag :=ruling {_gefad :_egbf ._gbgcg ,Color :_egbf .Color ,_afge :_fdab };
switch _egbf ._gbgcg {case _ebgd :_cag ._fgbd =0.5*(_egbf .Llx +_egbf .Urx );_cag ._aceb =_egbf .Lly ;_cag ._gddcg =_egbf .Ury ;_cdeec ,_bfbcc :=_egbf .checkWidth (_egbf .Llx ,_egbf .Urx );if !_bfbcc {if _dece {_b .Log .Error ("\u0072\u0065\u0063\u0074\u0052\u0075l\u0069\u006e\u0067\u002e\u0061\u0073\u0052\u0075\u006c\u0069\u006e\u0067\u003a\u0020\u0072\u0075\u006c\u0069\u006e\u0067V\u0065\u0072\u0074\u0020\u0021\u0063\u0068\u0065\u0063\u006b\u0057\u0069\u0064\u0074h\u0020v\u003d\u0025\u002b\u0076",_egbf );
};return nil ,false ;};_cag ._cafb =_cdeec ;case _deca :_cag ._fgbd =0.5*(_egbf .Lly +_egbf .Ury );_cag ._aceb =_egbf .Llx ;_cag ._gddcg =_egbf .Urx ;_cgff ,_fdddga :=_egbf .checkWidth (_egbf .Lly ,_egbf .Ury );if !_fdddga {if _dece {_b .Log .Error ("\u0072\u0065\u0063\u0074\u0052\u0075l\u0069\u006e\u0067\u002e\u0061\u0073\u0052\u0075\u006c\u0069\u006e\u0067\u003a\u0020\u0072\u0075\u006c\u0069\u006e\u0067H\u006f\u0072\u007a\u0020\u0021\u0063\u0068\u0065\u0063\u006b\u0057\u0069\u0064\u0074h\u0020v\u003d\u0025\u002b\u0076",_egbf );
};return nil ,false ;};_cag ._cafb =_cgff ;default:_b .Log .Error ("\u0062\u0061\u0064\u0020pr\u0069\u006d\u0061\u0072\u0079\u0020\u006b\u0069\u006e\u0064\u003d\u0025\u0064",_egbf ._gbgcg );return nil ,false ;};return &_cag ,true ;};func (_begfa *textTable )emptyCompositeRow (_dfcee int )bool {for _ffcafa :=0;
_ffcafa < _begfa ._edebd ;_ffcafa ++{if _gaef ,_dbdb :=_begfa ._cdafa [_dfdgd (_ffcafa ,_dfcee )];_dbdb {if len (_gaef .paraList )> 0{return false ;};};};return true ;};func (_cgdccc rectRuling )checkWidth (_decg ,_cgfg float64 )(float64 ,bool ){_dgfac :=_cgfg -_decg ;
_daacb :=_dgfac <=_aeeg ;return _dgfac ,_daacb ;};

// String returns a string describing `tm`.
func (_fbcd TextMark )String ()string {_effa :=_fbcd .BBox ;var _bfbb string ;if _fbcd .Font !=nil {_bfbb =_fbcd .Font .String ();if len (_bfbb )> 50{_bfbb =_bfbb [:50]+"\u002e\u002e\u002e";};};var _cfdd string ;if _fbcd .Meta {_cfdd ="\u0020\u002a\u004d\u002a";
};return _gf .Sprintf ("\u007b\u0054\u0065\u0078t\u004d\u0061\u0072\u006b\u003a\u0020\u0025\u0064\u0020%\u0071\u003d\u0025\u0030\u0032\u0078\u0020\u0028\u0025\u0036\u002e\u0032\u0066\u002c\u0020\u0025\u0036\u002e2\u0066\u0029\u0020\u0028\u00256\u002e\u0032\u0066\u002c\u0020\u0025\u0036\u002e\u0032\u0066\u0029\u0020\u0025\u0073\u0025\u0073\u007d",_fbcd .Offset ,_fbcd .Text ,[]rune (_fbcd .Text ),_effa .Llx ,_effa .Lly ,_effa .Urx ,_effa .Ury ,_bfbb ,_cfdd );
};

// String returns a description of `k`.
func (_ddad markKind )String ()string {_ggcde ,_febfd :=_agaga [_ddad ];if !_febfd {return _gf .Sprintf ("\u004e\u006f\u0074\u0020\u0061\u0020\u006d\u0061\u0072k\u003a\u0020\u0025\u0064",_ddad );};return _ggcde ;};func (_abdbb *textTable )putComposite (_cgbe ,_adeeg int ,_aggcac paraList ,_fgade _ff .PdfRectangle ){if len (_aggcac )==0{_b .Log .Error ("\u0074\u0065xt\u0054\u0061\u0062l\u0065\u0029\u0020\u0070utC\u006fmp\u006f\u0073\u0069\u0074\u0065\u003a\u0020em\u0070\u0074\u0079\u0020\u0070\u0061\u0072a\u0073");
return ;};_eebcc :=compositeCell {PdfRectangle :_fgade ,paraList :_aggcac };if _cebg {_gf .Printf ("\u0020\u0020\u0020\u0020\u0020\u0020\u0020\u0020\u0070\u0075\u0074\u0043\u006f\u006d\u0070o\u0073i\u0074\u0065\u0028\u0025\u0064\u002c\u0025\u0064\u0029\u003c\u002d\u0025\u0073\u000a",_cgbe ,_adeeg ,_eebcc .String ());
};_eebcc .updateBBox ();_abdbb ._cdafa [_dfdgd (_cgbe ,_adeeg )]=_eebcc ;};func _cgdd (_ffaa []*textLine ,_caa string ,_dfcc []*list )*list {return &list {_dcdbc :_ffaa ,_ggcb :_caa ,_ccebg :_dfcc };};func _bfdd (_bfgd func (*wordBag ,*textWord ,float64 )bool ,_gafa float64 )func (*wordBag ,*textWord )bool {return func (_cbeed *wordBag ,_ebdff *textWord )bool {return _bfgd (_cbeed ,_ebdff ,_gafa )};
};

// ExtractTextWithStats works like ExtractText but returns the number of characters in the output
// (`numChars`) and the number of characters that were not decoded (`numMisses`).
func (_efb *Extractor )ExtractTextWithStats ()(_cbd string ,_abc int ,_efdef int ,_cace error ){_dddb ,_abc ,_efdef ,_cace :=_efb .ExtractPageText ();if _cace !=nil {return "",_abc ,_efdef ,_cace ;};return _dddb .Text (),_abc ,_efdef ,nil ;};func (_dfca *subpath )add (_aaab ..._cd .Point ){_dfca ._ddfa =append (_dfca ._ddfa ,_aaab ...)};
func _aagf (_bgfec *list )[]*textLine {for _ ,_cebd :=range _bgfec ._ccebg {switch _cebd ._ggcb {case "\u004c\u0042\u006fd\u0079":if len (_cebd ._dcdbc )!=0{return _cebd ._dcdbc ;};return _aagf (_cebd );case "\u0053\u0070\u0061\u006e":return _cebd ._dcdbc ;
case "I\u006e\u006c\u0069\u006e\u0065\u0053\u0068\u0061\u0070\u0065":return _cebd ._dcdbc ;};};return nil ;};func _dcag (_aaagd []pathSection ){if _ddaf < 0.0{return ;};if _aaeb {_b .Log .Info ("\u0067\u0072\u0061\u006e\u0075\u006c\u0061\u0072\u0069\u007a\u0065\u003a\u0020\u0025\u0064 \u0073u\u0062\u0070\u0061\u0074\u0068\u0020\u0073\u0065\u0063\u0074\u0069\u006f\u006e\u0073",len (_aaagd ));
};for _gbaf ,_gaada :=range _aaagd {for _dgae ,_ffegc :=range _gaada ._adg {for _ebcf ,_baabf :=range _ffegc ._ddfa {_ffegc ._ddfa [_ebcf ]=_cd .Point {X :_ebfe (_baabf .X ),Y :_ebfe (_baabf .Y )};if _aaeb {_bbccg :=_ffegc ._ddfa [_ebcf ];if !_ddgef (_baabf ,_bbccg ){_dfeg :=_cd .Point {X :_bbccg .X -_baabf .X ,Y :_bbccg .Y -_baabf .Y };
_gf .Printf ("\u0025\u0034d \u002d\u0020\u00254\u0064\u0020\u002d\u0020%4d\u003a %\u002e\u0032\u0066\u0020\u2192\u0020\u0025.2\u0066\u0020\u0028\u0025\u0067\u0029\u000a",_gbaf ,_dgae ,_ebcf ,_baabf ,_bbccg ,_dfeg );};};};};};};

// String returns a human readable description of `ss`.
func (_fdga *shapesState )String ()string {return _gf .Sprintf ("\u007b\u0025\u0064\u0020su\u0062\u0070\u0061\u0074\u0068\u0073\u0020\u0066\u0072\u0065\u0073\u0068\u003d\u0025t\u007d",len (_fdga ._afgc ),_fdga ._acc );};func (_adbd *wordBag )scanBand (_bade string ,_begc *wordBag ,_dcge func (_cfea *wordBag ,_gecad *textWord )bool ,_cbga ,_cefc ,_eee float64 ,_dbeb ,_ddeg bool )int {_fbad :=_begc ._dfcaf ;
var _ceedb map[int ]map[*textWord ]struct{};if !_dbeb {_ceedb =_adbd .makeRemovals ();};_gage :=_abgac *_fbad ;_cfcb :=0;for _ ,_acfa :=range _adbd .depthBand (_cbga -_gage ,_cefc +_gage ){if len (_adbd ._ggeff [_acfa ])==0{continue ;};for _ ,_dfcd :=range _adbd ._ggeff [_acfa ]{if !(_cbga -_gage <=_dfcd ._efdea &&_dfcd ._efdea <=_cefc +_gage ){continue ;
};if !_dcge (_begc ,_dfcd ){continue ;};_fecg :=2.0*_g .Abs (_dfcd ._gfbc -_begc ._dfcaf )/(_dfcd ._gfbc +_begc ._dfcaf );_fbbc :=_g .Max (_dfcd ._gfbc /_begc ._dfcaf ,_begc ._dfcaf /_dfcd ._gfbc );_dccf :=_g .Min (_fecg ,_fbbc );if _eee > 0&&_dccf > _eee {continue ;
};if _begc .blocked (_dfcd ){continue ;};if !_dbeb {_begc .pullWord (_dfcd ,_acfa ,_ceedb );};_cfcb ++;if !_ddeg {if _dfcd ._efdea < _cbga {_cbga =_dfcd ._efdea ;};if _dfcd ._efdea > _cefc {_cefc =_dfcd ._efdea ;};};if _dbeb {break ;};};};if !_dbeb {_adbd .applyRemovals (_ceedb );
};return _cfcb ;};

// String returns a human readable description of `path`.
func (_acdb *subpath )String ()string {_accf :=_acdb ._ddfa ;_gefg :=len (_accf );if _gefg <=5{return _gf .Sprintf ("\u0025d\u003a\u0020\u0025\u0036\u002e\u0032f",_gefg ,_accf );};return _gf .Sprintf ("\u0025d\u003a\u0020\u0025\u0036.\u0032\u0066\u0020\u0025\u0036.\u0032f\u0020.\u002e\u002e\u0020\u0025\u0036\u002e\u0032f",_gefg ,_accf [0],_accf [1],_accf [_gefg -1]);
};func (_afe *wordBag )highestWord (_cfcg int ,_gaade ,_fcgb float64 )*textWord {for _ ,_edeg :=range _afe ._ggeff [_cfcg ]{if _gaade <=_edeg ._efdea &&_edeg ._efdea <=_fcgb {return _edeg ;};};return nil ;};

// Font represents the font properties on a PDF page.
type Font struct{PdfFont *_ff .PdfFont ;

// FontName represents Font Name from font properties.
FontName string ;

// FontType represents Font Subtype entry in the font dictionary inside page resources.
// Examples : type0, Type1, MMType1, Type3, TrueType, CIDFont.
FontType string ;

// ToUnicode is true if font provides a `ToUnicode` mapping.
ToUnicode bool ;

// IsCID is true if underlying font is a composite font.
// Composite font is represented by a font dictionary whose Subtype is `Type0`
IsCID bool ;

// IsSimple is true if font is simple font.
// A simple font is limited to only 8 bit (255) character codes.
IsSimple bool ;

// FontData represents the raw data of the embedded font file.
// It can have format TrueType (TTF), PostScript Font (PFB) or Compact Font Format (CCF).
// FontData value can be indicates from `FontFile`, `FontFile2` or `FontFile3` inside Font Descriptor.
// At most, only one of `FontFile`, `FontFile2` or `FontFile3` will be FontData value.
FontData []byte ;

// FontFileName is a name representing the font. it has format:
// (Font Name) + (Font Type Extension), example: helvetica.ttf.
FontFileName string ;

// FontDescriptor represents metrics and other attributes inside font properties from PDF Structure (Font Descriptor).
FontDescriptor *_ff .PdfFontDescriptor ;};func (_eddec *textTable )emptyCompositeColumn (_gcdf int )bool {for _fgae :=0;_fgae < _eddec ._ecedc ;_fgae ++{if _ccaae ,_fbcbd :=_eddec ._cdafa [_dfdgd (_gcdf ,_fgae )];_fbcbd {if len (_ccaae .paraList )> 0{return false ;
};};};return true ;};func (_gcea *wordBag )empty (_eceea int )bool {_ ,_fgcfc :=_gcea ._ggeff [_eceea ];return !_fgcfc };func (_abefc *textWord )toTextMarks (_efdcf *int )[]TextMark {var _acge []TextMark ;for _ ,_gaeee :=range _abefc ._eacb {_acge =_cecd (_acge ,_efdcf ,_gaeee .ToTextMark ());
};return _acge ;};func _egfe (_aggfe _fc .PdfObject ,_eacga _cf .Color )(_eg .Image ,error ){_gabdd ,_cfdgf :=_fc .GetStream (_aggfe );if !_cfdgf {return nil ,nil ;};_dfffb ,_egae :=_ff .NewXObjectImageFromStream (_gabdd );if _egae !=nil {return nil ,_egae ;
};_fcag ,_egae :=_dfffb .ToImage ();if _egae !=nil {return nil ,_egae ;};return _adfgg (_fcag ,_eacga ),nil ;};

// Replace takes a pattern and replaces all the texts that much the pattern with `replacement`.
func (_acdea *Editor )Replace (pattern string ,replacement string ,pages []int )error {_bcad :=map[int ]Match {};for _ ,_aecg :=range pages {_gec ,_dce :=_acdea ._acg .GetPage (_aecg );if _dce !=nil {return _dce ;};_efac ,_dce :=New (_gec );if _dce !=nil {return _dce ;
};_fdf ,_ ,_ ,_dce :=_efac .ExtractPageText ();if _dce !=nil {return _dce ;};_bag :="";_eedc :=_fdf .Text ();_fffe ,_dce :=_ecec (pattern ,_eedc );if _dce !=nil {return _dce ;};_gcac :=_fdf .Marks ();_fgd :=[]Box {};for _ ,_fgf :=range _fffe {_dacac ,_cbee ,_aed :=_cae (_fgf ,_gcac ,pattern );
if _aed !=nil {return _aed ;};_bgb :=_bce (_dacac );if _aed !=nil {return _aed ;};_fgd =append (_fgd ,_cbee );replacement ,_aed =_bcc (_bgb ,replacement ,pattern );if _aed !=nil {return _aed ;};};_bag =_fdf .GetContentStreamOps ().String ();_gdab :=Match {Pattern :pattern ,Indexes :_fffe ,Locations :_fgd };
_gec .SetContentStreams ([]string {_bag },_fc .NewFlateEncoder ());_bcad [_aecg ]=_gdab ;};return nil ;};func _ecec (_feac string ,_gag string )([][]int ,error ){_cgc ,_cece :=_a .Compile (_feac );if _cece !=nil {return nil ,_gf .Errorf ("\u0065\u0072\u0072\u006f\u0072\u0020c\u006f\u006d\u0070\u0069\u006c\u0069\u006e\u0067\u0020\u0072\u0065\u0067\u0065x\u0020\u0070\u0061\u0074\u0074\u0065\u0072n\u003a\u0020\u0025\u0077",_cece );
};_afcg :=_cgc .FindAllStringIndex (_gag ,-1);return _afcg ,nil ;};func _bagfb (_bbbd _ff .PdfRectangle )*ruling {return &ruling {_gefad :_deca ,_fgbd :_bbbd .Lly ,_aceb :_bbbd .Llx ,_gddcg :_bbbd .Urx };};

// NewEditor returns a new Editor object
func NewEditor (reader *_ff .PdfReader )*Editor {return &Editor {_acg :reader }};func _agaf (_ggfa _cd .Point )*subpath {return &subpath {_ddfa :[]_cd .Point {_ggfa }}};func _adfgg (_bgdd *_ff .Image ,_fdeed _cf .Color )_eg .Image {_bdbec ,_edbf :=int (_bgdd .Width ),int (_bgdd .Height );
_bbca :=_eg .NewRGBA (_eg .Rect (0,0,_bdbec ,_edbf ));for _dfagf :=0;_dfagf < _edbf ;_dfagf ++{for _bcdcd :=0;_bcdcd < _bdbec ;_bcdcd ++{_edef ,_aecgg :=_bgdd .ColorAt (_bcdcd ,_dfagf );if _aecgg !=nil {_b .Log .Debug ("\u0057\u0041\u0052\u004e\u003a\u0020\u0063o\u0075\u006c\u0064\u0020\u006e\u006f\u0074\u0020\u0072\u0065\u0074\u0072\u0069\u0065v\u0065 \u0069\u006d\u0061\u0067\u0065\u0020m\u0061\u0073\u006b\u0020\u0076\u0061\u006cu\u0065\u0020\u0061\u0074\u0020\u0028\u0025\u0064\u002c\u0020\u0025\u0064\u0029\u002e\u0020\u004f\u0075\u0074\u0070\u0075\u0074\u0020\u006da\u0079\u0020\u0062\u0065\u0020\u0069\u006e\u0063\u006f\u0072\u0072\u0065\u0063t\u002e",_bcdcd ,_dfagf );
continue ;};_bbfgc ,_aacf ,_gfggg ,_ :=_edef .RGBA ();var _abfce _cf .Color ;if _bbfgc +_aacf +_gfggg ==0{_abfce =_cf .Transparent ;}else {_abfce =_fdeed ;};_bbca .Set (_bcdcd ,_dfagf ,_abfce );};};return _bbca ;};func (_ggag *textLine )pullWord (_cabg *wordBag ,_gbba *textWord ,_gacg int ){_ggag .appendWord (_gbba );
_cabg .removeWord (_gbba ,_gacg );};var _edbe =_a .MustCompile ("\u005e\u005c\u0073\u002a\u0028\u005c\u0064\u002b\u005c\u002e\u003f|\u005b\u0049\u0069\u0076\u005d\u002b\u0029\u005c\u0073\u002a\\\u0029\u003f\u0024");func _fagb (_fggd _ff .PdfRectangle )*ruling {return &ruling {_gefad :_deca ,_fgbd :_fggd .Ury ,_aceb :_fggd .Llx ,_gddcg :_fggd .Urx };
};func (_gaac *textPara )toCellTextMarks (_gdae *int )[]TextMark {var _ccgcb []TextMark ;for _eabgd ,_abge :=range _gaac ._gfef {_agga :=_abge .toTextMarks (_gdae );_cbbg :=_gfb &&_abge .endsInHyphen ()&&_eabgd !=len (_gaac ._gfef )-1;if _cbbg {_agga =_cbad (_agga ,_gdae );
};_ccgcb =append (_ccgcb ,_agga ...);if !(_cbbg ||_eabgd ==len (_gaac ._gfef )-1){_ccgcb =_abee (_ccgcb ,_gdae ,_cggb (_abge ._cdab ,_gaac ._gfef [_eabgd +1]._cdab ));};};return _ccgcb ;};type pathSection struct{_adg []*subpath ;_cf .Color ;};func _cdcf (_gga *TextMarkArray ,_dbe *string ,_ggde *int ,_gecg string )error {var _bagf TextMark ;
for _ ,_geb :=range _gga .Elements (){_agd :=_geb .Text ;_abg :=_geb .Font ;_befe :="";_gde :=*_dbe ;if len (_gde )> *_ggde {_befe =_gde [*_ggde :*_ggde +len (_agd )];}else if *_ggde ==len (_gecg )-1&&len (_gde )> *_ggde {_befe =_gde [*_ggde :];};_gdc :=_geb .DirectObject ;
if _gdc ==nil &&_geb .Text =="\u0020"{_ggad :=_bagf .ObjString ;_dgeb :=_ggad [len (_ggad )-1];if _dgeb !=_geb .Text {_gdc =_bagf .DirectObject ;_abg =_bagf .Font ;_eccb ,_gefa :=_fc .GetString (_gdc );if !_gefa {return _gf .Errorf ("\u0075n\u0061\u0062l\u0065\u0020\u0074\u006f \u0067\u0065\u0074 \u0073\u0074\u0072\u0069\u006e\u0067\u0020\u0042\u0079te\u0073\u0020\u0066r\u006f\u006d \u0064\u0069\u0072\u0065\u0063\u0074O\u0062\u006ae\u0063\u0074");
};_ebed ,_gefa :=_fc .GetStringBytes (_gdc );if !_gefa {return _fc .ErrTypeError ;};_add :=_daa (_ebed ,_abg );_befe =_add +_befe ;_edf (_eccb ,_befe ,_abg );*_ggde +=len (_agd );continue ;};};_cab ,_faae :=_fc .GetString (_gdc );if !_faae {return _gf .Errorf ("\u0075n\u0061\u0062l\u0065\u0020\u0074\u006f \u0067\u0065\u0074 \u0073\u0074\u0072\u0069\u006e\u0067\u0020\u0042\u0079te\u0073\u0020\u0066r\u006f\u006d \u0064\u0069\u0072\u0065\u0063\u0074O\u0062\u006ae\u0063\u0074");
};_gbdf :="";_gbf ,_faae :=_fc .GetStringBytes (_gdc );if !_faae {return _fc .ErrTypeError ;};_ceca :=_daa (_gbf ,_abg );_gbdf =_ca .Replace (_ceca ,_agd ,_befe ,1);_edf (_cab ,_gbdf ,_abg );*_ggde +=len (_agd );_bagf =_geb ;};return nil ;};

// TableCell is a cell in a TextTable.
type TableCell struct{_ff .PdfRectangle ;

// Text is the extracted text.
Text string ;

// Marks returns the TextMarks corresponding to the text in Text.
Marks TextMarkArray ;};func _ddeb (_cgdcg ,_adbb _ff .PdfRectangle )bool {return _fffae (_cgdcg ,_adbb )&&_dcb (_cgdcg ,_adbb )};var _agaga =map[markKind ]string {_acad :"\u0073\u0074\u0072\u006f\u006b\u0065",_fdab :"\u0066\u0069\u006c\u006c",_cffee :"\u0061u\u0067\u006d\u0065\u006e\u0074"};
func (_fgac *structTreeRoot )parseStructTreeRoot (_cgabe _fc .PdfObject ){if _cgabe !=nil {_eaded ,_agff :=_fc .GetDict (_cgabe );if !_agff {_b .Log .Debug ("\u0070\u0061\u0072s\u0065\u0053\u0074\u0072\u0075\u0063\u0074\u0054\u0072\u0065\u0065\u0052\u006f\u006f\u0074\u003a\u0020\u0064\u0069\u0063\u0074\u0069\u006f\u006e\u0061\u0072\u0079\u0020\u006eo\u0074\u0020\u0066\u006f\u0075\u006e\u0064\u002e");
};K :=_eaded .Get ("\u004b");_dcebf :=_eaded .Get ("\u0054\u0079\u0070\u0065").String ();var _acfd *_fc .PdfObjectArray ;switch _cfcbc :=K .(type ){case *_fc .PdfObjectArray :_acfd =_cfcbc ;case *_fc .PdfObjectReference :_acfd =_fc .MakeArray (K );};_bbeaf :=[]structElement {};
for _ ,_adgc :=range _acfd .Elements (){_egcdc :=&structElement {};_egcdc .parseStructElement (_adgc );_bbeaf =append (_bbeaf ,*_egcdc );};_fgac ._ecdca =_bbeaf ;_fgac ._cfgg =_dcebf ;};};func (_cbea *wordBag )makeRemovals ()map[int ]map[*textWord ]struct{}{_egce :=make (map[int ]map[*textWord ]struct{},len (_cbea ._ggeff ));
for _gfcc :=range _cbea ._ggeff {_egce [_gfcc ]=make (map[*textWord ]struct{});};return _egce ;};type subpath struct{_ddfa []_cd .Point ;_fbcf bool ;};func (_cef *subpath )removeDuplicates (){if len (_cef ._ddfa )==0{return ;};_aadg :=[]_cd .Point {_cef ._ddfa [0]};
for _ ,_dbgf :=range _cef ._ddfa [1:]{if !_ddgef (_dbgf ,_aadg [len (_aadg )-1]){_aadg =append (_aadg ,_dbgf );};};_cef ._ddfa =_aadg ;};func (_efee *textPara )depth ()float64 {if _efee ._cgac {return -1.0;};if len (_efee ._gfef )> 0{return _efee ._gfef [0]._cdab ;
};return _efee ._eeage .depth ();};func _cdgf (_ccaa []TextMark ,_cdbg *TextTable )[]TextMark {var _defc []TextMark ;for _ ,_dfcga :=range _ccaa {_dfcga ._ggda =true ;_dfcga ._agae =_cdbg ;_defc =append (_defc ,_dfcga );};return _defc ;};

// PageFonts represents extracted fonts on a PDF page.
type PageFonts struct{Fonts []Font ;};func (_gbaeg compositeCell )String ()string {_abbfa :="";if len (_gbaeg .paraList )> 0{_abbfa =_aggbc (_gbaeg .paraList .merge ().text (),50);};return _gf .Sprintf ("\u0025\u0036\u002e\u0032\u0066\u0020\u0025\u0064\u0020\u0070\u0061\u0072a\u0073\u0020\u0025\u0071",_gbaeg .PdfRectangle ,len (_gbaeg .paraList ),_abbfa );
};func (_agega paraList )writeText (_cecda _ee .Writer ){for _cfcf ,_egcf :=range _agega {if _egcf ._cgac {continue ;};_egcf .writeText (_cecda );if _cfcf !=len (_agega )-1{if _ggdcc (_egcf ,_agega [_cfcf +1]){_cecda .Write ([]byte ("\u0020"));}else {_cecda .Write ([]byte ("\u000a"));
_cecda .Write ([]byte ("\u000a"));};};};_cecda .Write ([]byte ("\u000a"));_cecda .Write ([]byte ("\u000a"));};func (_cgbd paraList )lines ()[]*textLine {var _gfceb []*textLine ;for _ ,_bbegd :=range _cgbd {_gfceb =append (_gfceb ,_bbegd ._gfef ...);};return _gfceb ;
};func (_gfca *imageExtractContext )processOperand (_efde *_ef .ContentStreamOperation ,_gbd _ef .GraphicsState ,_fbeg *_ff .PdfPageResources )error {if _efde .Operand =="\u0042\u0049"&&len (_efde .Params )==1{_fcg ,_dbbd :=_efde .Params [0].(*_ef .ContentStreamInlineImage );
if !_dbbd {return nil ;};if _dadc ,_eadg :=_fc .GetBoolVal (_fcg .ImageMask );_eadg {if _dadc &&!_gfca ._ffaf .IncludeInlineStencilMasks {return nil ;};};return _gfca .extractInlineImage (_fcg ,_gbd ,_fbeg );}else if _efde .Operand =="\u0044\u006f"&&len (_efde .Params )==1{_dff ,_bfa :=_fc .GetName (_efde .Params [0]);
if !_bfa {_b .Log .Debug ("E\u0052\u0052\u004f\u0052\u003a\u0020\u0054\u0079\u0070\u0065");return _bea ;};_ ,_cdc :=_fbeg .GetXObjectByName (*_dff );switch _cdc {case _ff .XObjectTypeImage :return _gfca .extractXObjectImage (_dff ,_gbd ,_fbeg );case _ff .XObjectTypeForm :return _gfca .extractFormImages (_dff ,_gbd ,_fbeg );
};}else if _gfca ._fedf &&(_efde .Operand =="\u0073\u0063\u006e"||_efde .Operand =="\u0053\u0043\u004e")&&len (_efde .Params )==1{_fbg ,_dgg :=_fc .GetName (_efde .Params [0]);if !_dgg {_b .Log .Debug ("E\u0052\u0052\u004f\u0052\u003a\u0020\u0054\u0079\u0070\u0065");
return _bea ;};_fdg ,_dgg :=_fbeg .GetPatternByName (*_fbg );if !_dgg {_b .Log .Debug ("\u0045R\u0052\u004f\u0052\u003a\u0020\u0050\u0061\u0074\u0074\u0065\u0072n\u0020\u006e\u006f\u0074\u0020\u0066\u006f\u0075\u006e\u0064");return nil ;};if _fdg .IsTiling (){_aec :=_fdg .GetAsTilingPattern ();
_aca ,_gda :=_aec .GetContentStream ();if _gda !=nil {return _gda ;};_gda =_gfca .extractContentStreamImages (string (_aca ),_aec .Resources );if _gda !=nil {return _gda ;};};}else if (_efde .Operand =="\u0063\u0073"||_efde .Operand =="\u0043\u0053")&&len (_efde .Params )>=1{_gfca ._fedf =_efde .Params [0].String ()=="\u0050a\u0074\u0074\u0065\u0072\u006e";
};return nil ;};func _afag (_gfbaa ,_ffbga float64 )bool {return _gfbaa /_g .Max (_ffecd ,_ffbga )< _gdeg };func _efgbb (_aged []*textLine ,_baabc map[float64 ][]*textLine )[]*list {_abea :=_acffg (_baabc );_cdcfa :=[]*list {};if len (_abea )==0{return _cdcfa ;
};_gccdc :=_abea [0];_dbbce :=1;_edad :=_baabc [_gccdc ];for _ccggd ,_ebaa :=range _edad {var _cbeede float64 ;_eage :=[]*list {};_ffege :=_ebaa ._cdab ;_gadge :=-1.0;if _ccggd < len (_edad )-1{_gadge =_edad [_ccggd +1]._cdab ;};if _dbbce < len (_abea ){_eage =_ebg (_aged ,_baabc ,_abea ,_dbbce ,_ffege ,_gadge );
};_cbeede =_gadge ;if len (_eage )> 0{_fcgc :=_eage [0];if len (_fcgc ._dcdbc )> 0{_cbeede =_fcgc ._dcdbc [0]._cdab ;};};_dba :=[]*textLine {_ebaa };_bgdbd :=_adbc (_ebaa ,_aged ,_abea ,_ffege ,_cbeede );_dba =append (_dba ,_bgdbd ...);_aaeaa :=_cgdd (_dba ,"\u0062\u0075\u006c\u006c\u0065\u0074",_eage );
_aaeaa ._gddaf =_afff (_dba ,"");_cdcfa =append (_cdcfa ,_aaeaa );};return _cdcfa ;};func (_ddde *shapesState )devicePoint (_ceef ,_beb float64 )_cd .Point {_aaff :=_ddde ._ecdc .Mult (_ddde ._aeee );_ceef ,_beb =_aaff .Transform (_ceef ,_beb );return _cd .NewPoint (_ceef ,_beb );
};func (_bgag paraList )log (_ddbfb string ){if !_gegca {return ;};_b .Log .Info ("%\u0038\u0073\u003a\u0020\u0025\u0064 \u0070\u0061\u0072\u0061\u0073\u0020=\u003d\u003d\u003d\u003d\u003d\u003d\u002d-\u002d\u002d\u002d\u002d\u002d\u003d\u003d\u003d\u003d\u003d=\u003d",_ddbfb ,len (_bgag ));
for _accff ,_bbgg :=range _bgag {if _bbgg ==nil {continue ;};_efeee :=_bbgg .text ();_agcc :="\u0020\u0020";if _bbgg ._eeage !=nil {_agcc =_gf .Sprintf ("\u005b%\u0064\u0078\u0025\u0064\u005d",_bbgg ._eeage ._edebd ,_bbgg ._eeage ._ecedc );};_gf .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0036\u002e\u0032\u0066\u0020\u0025s\u0020\u0025\u0071\u000a",_accff ,_bbgg .PdfRectangle ,_agcc ,_aggbc (_efeee ,50));
};};func _dcb (_dgdb ,_cdee _ff .PdfRectangle )bool {return _dgdb .Lly <=_cdee .Ury &&_cdee .Lly <=_dgdb .Ury ;};type shapesState struct{_aeee _cd .Matrix ;_ecdc _cd .Matrix ;_afgc []*subpath ;_acc bool ;_bcb _cd .Point ;_caddc *textObject ;};func _gfeb (_ecdg ,_eegf _ff .PdfRectangle )(_ff .PdfRectangle ,bool ){if !_ddeb (_ecdg ,_eegf ){return _ff .PdfRectangle {},false ;
};return _ff .PdfRectangle {Llx :_g .Max (_ecdg .Llx ,_eegf .Llx ),Urx :_g .Min (_ecdg .Urx ,_eegf .Urx ),Lly :_g .Max (_ecdg .Lly ,_eegf .Lly ),Ury :_g .Min (_ecdg .Ury ,_eegf .Ury )},true ;};func (_bfdb *ruling )alignsSec (_dccac *ruling )bool {const _ecgbe =_aeeg +1.0;
return _bfdb ._aceb -_ecgbe <=_dccac ._gddcg &&_dccac ._aceb -_ecgbe <=_bfdb ._gddcg ;};type rulingKind int ;func (_adfb paraList )tables ()[]TextTable {var _cfgea []TextTable ;if _cebg {_b .Log .Info ("\u0070\u0061\u0072\u0061\u0073\u002e\u0074\u0061\u0062\u006c\u0065\u0073\u003a");
};for _ ,_bagec :=range _adfb {_bfefb :=_bagec ._eeage ;if _bfefb !=nil &&_bfefb .isExportable (){_cfgea =append (_cfgea ,_bfefb .toTextTable ());};};return _cfgea ;};func _dfdc (_edbg structElement )[]structElement {_gadg :=[]structElement {};for _ ,_dbce :=range _edbg ._cced {for _ ,_facd :=range _dbce ._cced {for _ ,_eegag :=range _facd ._cced {if _eegag ._feea =="\u004c"{_gadg =append (_gadg ,_eegag );
};};};};return _gadg ;};func (_eeebc paraList )yNeighbours (_acafe float64 )map[*textPara ][]int {_bgfga :=make ([]event ,2*len (_eeebc ));if _acafe ==0{for _gdadb ,_bgdbf :=range _eeebc {_bgfga [2*_gdadb ]=event {_bgdbf .Lly ,true ,_gdadb };_bgfga [2*_gdadb +1]=event {_bgdbf .Ury ,false ,_gdadb };
};}else {for _aacbg ,_babe :=range _eeebc {_bgfga [2*_aacbg ]=event {_babe .Lly -_acafe *_babe .fontsize (),true ,_aacbg };_bgfga [2*_aacbg +1]=event {_babe .Ury +_acafe *_babe .fontsize (),false ,_aacbg };};};return _eeebc .eventNeighbours (_bgfga );};
func (_gcgfc *textTable )newTablePara ()*textPara {_cbfe :=_gcgfc .computeBbox ();_cadea :=&textPara {PdfRectangle :_cbfe ,_gbbdf :_cbfe ,_eeage :_gcgfc };if _cebg {_b .Log .Info ("\u006e\u0065w\u0054\u0061\u0062l\u0065\u0050\u0061\u0072\u0061\u003a\u0020\u0025\u0073",_cadea );
};return _cadea ;};func (_aaac paraList )eventNeighbours (_gfde []event )map[*textPara ][]int {_dc .Slice (_gfde ,func (_ceefb ,_daccc int )bool {_bfgbf ,_cddfg :=_gfde [_ceefb ],_gfde [_daccc ];_abffa ,_bbefg :=_bfgbf ._cgccb ,_cddfg ._cgccb ;if _abffa !=_bbefg {return _abffa < _bbefg ;
};if _bfgbf ._cdcad !=_cddfg ._cdcad {return _bfgbf ._cdcad ;};return _ceefb < _daccc ;});_ccgdb :=make (map[int ]intSet );_gadce :=make (intSet );for _ ,_bcgbf :=range _gfde {if _bcgbf ._cdcad {_ccgdb [_bcgbf ._abgba ]=make (intSet );for _egfcdd :=range _gadce {if _egfcdd !=_bcgbf ._abgba {_ccgdb [_bcgbf ._abgba ].add (_egfcdd );
_ccgdb [_egfcdd ].add (_bcgbf ._abgba );};};_gadce .add (_bcgbf ._abgba );}else {_gadce .del (_bcgbf ._abgba );};};_cfbbf :=map[*textPara ][]int {};for _dage ,_egeee :=range _ccgdb {_debaa :=_aaac [_dage ];if len (_egeee )==0{_cfbbf [_debaa ]=nil ;continue ;
};_fgccf :=make ([]int ,len (_egeee ));_cffc :=0;for _ddbba :=range _egeee {_fgccf [_cffc ]=_ddbba ;_cffc ++;};_cfbbf [_debaa ]=_fgccf ;};return _cfbbf ;};var _ccfc string ="\u0028\u003f\u0069\u0029\u005e\u0028\u004d\u007b\u0030\u002c\u0033\u007d\u0029\u0028\u0043\u0028?\u003a\u0044\u007cM\u0029\u007c\u0044\u003f\u0043{\u0030\u002c\u0033\u007d\u0029\u0028\u0058\u0028\u003f\u003a\u004c\u007c\u0043\u0029\u007cL\u003f\u0058\u007b\u0030\u002c\u0033}\u0029\u0028\u0049\u0028\u003f\u003a\u0056\u007c\u0058\u0029\u007c\u0056\u003f\u0049\u007b\u0030\u002c\u0033\u007d\u0029\u0028\u005c\u0029\u007c\u005c\u002e\u0029\u007c\u005e\u005c\u0028\u0028\u004d\u007b\u0030\u002c\u0033\u007d\u0029\u0028\u0043\u0028\u003f\u003aD\u007cM\u0029\u007c\u0044\u003f\u0043\u007b\u0030\u002c\u0033\u007d\u0029\u0028\u0058\u0028?\u003a\u004c\u007c\u0043\u0029\u007c\u004c?\u0058\u007b0\u002c\u0033\u007d\u0029(\u0049\u0028\u003f\u003a\u0056|\u0058\u0029\u007c\u0056\u003f\u0049\u007b\u0030\u002c\u0033\u007d\u0029\u005c\u0029";
func _dbaf (_dgab string )(string ,bool ){_fdbda :=[]rune (_dgab );if len (_fdbda )!=1{return "",false ;};_ffdeb ,_badeg :=_febbg [_fdbda [0]];return _ffdeb ,_badeg ;};func (_gdfc *shapesState )clearPath (){_gdfc ._afgc =nil ;_gdfc ._acc =false ;if _fdgc {_b .Log .Info ("\u0043\u004c\u0045A\u0052\u003a\u0020\u0073\u0073\u003d\u0025\u0073",_gdfc );
};};func (_dbcde paraList )reorder (_cada []int ){_ecfd :=make (paraList ,len (_dbcde ));for _fdfa ,_gdbfe :=range _cada {_ecfd [_fdfa ]=_dbcde [_gdbfe ];};copy (_dbcde ,_ecfd );};func (_aecc paraList )findTables (_gdca []gridTiling )[]*textTable {_aecc .addNeighbours ();
_dc .Slice (_aecc ,func (_dbeee ,_bedd int )bool {return _abgd (_aecc [_dbeee ],_aecc [_bedd ])< 0});var _feec []*textTable ;if _ccbbg {_egac :=_aecc .findGridTables (_gdca );_feec =append (_feec ,_egac ...);};if _ecbd {_babb :=_aecc .findTextTables ();
_feec =append (_feec ,_babb ...);};return _feec ;};func (_dfce *shapesState )addPoint (_cgab ,_ged float64 ){_fgddg :=_dfce .establishSubpath ();_fcca :=_dfce .devicePoint (_cgab ,_ged );if _fgddg ==nil {_dfce ._acc =true ;_dfce ._bcb =_fcca ;}else {_fgddg .add (_fcca );
};};func (_fdffc *textTable )get (_gefeb ,_bdfba int )*textPara {return _fdffc ._eafac [_dfdgd (_gefeb ,_bdfba )];};

// WriteToFile writes the edited content to `outputPath`.
func (_gdda *Editor )WriteToFile (outputPath string )error {_aef ,_bgf :=_gdda ._acg .ToWriter (nil );if _bgf !=nil {return _gf .Errorf ("\u0066\u0061\u0069\u006c\u0065\u0064\u0020\u0074\u006f\u0020c\u006f\u006e\u0076\u0065\u0072\u0074\u0020t\u006f\u0020\u0077\u0072\u0069\u0074\u0065\u0072\u0020\u0025\u0076",_bgf );
};_aef .WriteToFile (outputPath );return nil ;};func (_cdeb *textTable )isExportable ()bool {if _cdeb ._fbgad {return true ;};_ddea :=func (_gcdce int )bool {_bfge :=_cdeb .get (0,_gcdce );if _bfge ==nil {return false ;};_febfg :=_bfge .text ();_bbga :=_d .RuneCountInString (_febfg );
_cffga :=_edbe .MatchString (_febfg );return _bbga <=1||_cffga ;};for _cdag :=0;_cdag < _cdeb ._ecedc ;_cdag ++{if !_ddea (_cdag ){return true ;};};return false ;};

// String returns a string descibing `i`.
func (_cedd gridTile )String ()string {_edfg :=func (_gfaa bool ,_acgd string )string {if _gfaa {return _acgd ;};return "\u005f";};return _gf .Sprintf ("\u00256\u002e2\u0066\u0020\u0025\u0031\u0073%\u0031\u0073%\u0031\u0073\u0025\u0031\u0073",_cedd .PdfRectangle ,_edfg (_cedd ._bfac ,"\u004c"),_edfg (_cedd ._gfdb ,"\u0052"),_edfg (_cedd ._dddffa ,"\u0042"),_edfg (_cedd ._gcabff ,"\u0054"));
};func (_cdfe *textWord )appendMark (_gcggc *textMark ,_fdged _ff .PdfRectangle ){_cdfe ._eacb =append (_cdfe ._eacb ,_gcggc );_cdfe .PdfRectangle =_baabb (_cdfe .PdfRectangle ,_gcggc .PdfRectangle );if _gcggc ._dgec > _cdfe ._gfbc {_cdfe ._gfbc =_gcggc ._dgec ;
};_cdfe ._efdea =_fdged .Ury -_cdfe .PdfRectangle .Lly ;};func (_aced *textObject )setTextMatrix (_caegf []float64 ){if len (_caegf )!=6{_b .Log .Debug ("\u0045\u0052\u0052OR\u003a\u0020\u006c\u0065\u006e\u0028\u0066\u0029\u0020\u0021\u003d\u0020\u0036\u0020\u0028\u0025\u0064\u0029",len (_caegf ));
return ;};_fcgfg ,_faba ,_fbea ,_gdbb ,_cgec ,_bbgd :=_caegf [0],_caegf [1],_caegf [2],_caegf [3],_caegf [4],_caegf [5];_aced ._dddff =_cd .NewMatrix (_fcgfg ,_faba ,_fbea ,_gdbb ,_cgec ,_bbgd );_aced ._bfad =_aced ._dddff ;};func _bbbe (_deef _ff .PdfColorspace ,_afdaf _ff .PdfColor )_cf .Color {if _deef ==nil ||_afdaf ==nil {return _cf .Black ;
};_gfdeg ,_gdcbe :=_deef .ColorToRGB (_afdaf );if _gdcbe !=nil {_b .Log .Debug ("\u0057\u0041\u0052\u004e\u003a\u0020\u0063\u006fu\u006c\u0064\u0020no\u0074\u0020\u0063\u006f\u006e\u0076e\u0072\u0074\u0020\u0063\u006f\u006c\u006f\u0072\u0020\u0025\u0076\u0020\u0028\u0025\u0076)\u0020\u0074\u006f\u0020\u0052\u0047\u0042\u003a \u0025\u0073",_afdaf ,_deef ,_gdcbe );
return _cf .Black ;};_eggb ,_dacgca :=_gfdeg .(*_ff .PdfColorDeviceRGB );if !_dacgca {_b .Log .Debug ("\u0057\u0041\u0052\u004e\u003a\u0020\u0063\u006f\u006e\u0076\u0065\u0072\u0074\u0065\u0064 \u0063\u006f\u006c\u006f\u0072\u0020\u0069\u0073\u0020\u006e\u006f\u0074\u0020i\u006e\u0020\u0074\u0068\u0065\u0020\u0052\u0047\u0042\u0020\u0063\u006flo\u0072\u0073\u0070\u0061\u0063\u0065\u003a\u0020\u0025\u0076",_gfdeg );
return _cf .Black ;};return _cf .NRGBA {R :uint8 (_eggb .R ()*255),G :uint8 (_eggb .G ()*255),B :uint8 (_eggb .B ()*255),A :uint8 (255)};};func (_cbgc *Editor )getMatches (_bed string ,_cgb []int )(map[int ]Match ,map[int ][]*TextMarkArray ,error ){_ecc :=map[int ]Match {};
_fedc :=map[int ][]*TextMarkArray {};for _ ,_aab :=range _cgb {_fcfb ,_bca :=_cbgc ._acg .GetPage (_aab );if _bca !=nil {return nil ,nil ,_bca ;};_gdf ,_bca :=New (_fcfb );if _bca !=nil {return nil ,nil ,_bca ;};_fcac ,_ ,_ ,_bca :=_gdf .ExtractPageText ();
if _bca !=nil {return nil ,nil ,_bca ;};_gcabb :=_fcac .Text ();_bcee ,_bca :=_ecec (_bed ,_gcabb );if _bca !=nil {return nil ,nil ,_bca ;};if len (_bcee )==0{_b .Log .Info ("\u004e\u006f\u0020\u006d\u0061\u0074\u0063\u0068\u0020\u0066\u006f\u0075\u006e\u0064\u0020f\u006fr\u0020\u0025\u0073\u0020\u006f\u006e\u0020\u0070\u0061\u0067\u0065\u0020\u0025\u0064",_bed ,_aab );
};_ccfa :=_fcac .Marks ();_ecg :=[]Box {};for _ ,_daga :=range _bcee {_ ,_eag ,_gbe :=_cae (_daga ,_ccfa ,_bed );if _gbe !=nil {return nil ,nil ,_gbe ;};_ecg =append (_ecg ,_eag );};_ecca :=Match {Pattern :_bed ,Indexes :_bcee ,Locations :_ecg };_ecc [_aab ]=_ecca ;
};return _ecc ,_fedc ,nil ;};func _afcb (_eefe []pathSection )rulingList {_dcag (_eefe );if _aaeb {_b .Log .Info ("\u006d\u0061k\u0065\u0053\u0074\u0072\u006f\u006b\u0065\u0052\u0075\u006c\u0069\u006e\u0067\u0073\u003a\u0020\u0025\u0064\u0020\u0073\u0074\u0072ok\u0065\u0073",len (_eefe ));
};var _cbdbc rulingList ;for _ ,_ffaaa :=range _eefe {for _ ,_bgedf :=range _ffaaa ._adg {if len (_bgedf ._ddfa )< 2{continue ;};_daaf :=_bgedf ._ddfa [0];for _ ,_cdgd :=range _bgedf ._ddfa [1:]{if _agdf ,_ffdee :=_ecgc (_daaf ,_cdgd ,_ffaaa .Color );_ffdee {_cbdbc =append (_cbdbc ,_agdf );
};_daaf =_cdgd ;};};};if _aaeb {_b .Log .Info ("m\u0061\u006b\u0065\u0053tr\u006fk\u0065\u0052\u0075\u006c\u0069n\u0067\u0073\u003a\u0020\u0025\u0073",_cbdbc );};return _cbdbc ;};func (_deab *textObject )newTextMark (_ecbb string ,_afgca _cd .Matrix ,_cegc _cd .Point ,_dfba float64 ,_abdf *_ff .PdfFont ,_efcb float64 ,_cgde ,_aegab _cf .Color ,_gabea _fc .PdfObject ,_ecgf []string ,_acaac int ,_gadc int )(textMark ,bool ){_cfbde :=_afgca .Angle ();
_ddbbf :=_gaabe (_cfbde ,_acbg );var _bggf float64 ;if _ddbbf %180!=90{_bggf =_afgca .ScalingFactorY ();}else {_bggf =_afgca .ScalingFactorX ();};_adcf :=_cecf (_afgca );_dfdb :=_ff .PdfRectangle {Llx :_adcf .X ,Lly :_adcf .Y ,Urx :_cegc .X ,Ury :_cegc .Y };
switch _ddbbf %360{case 90:_dfdb .Urx -=_bggf ;case 180:_dfdb .Ury -=_bggf ;case 270:_dfdb .Urx +=_bggf ;case 0:_dfdb .Ury +=_bggf ;default:_ddbbf =0;_dfdb .Ury +=_bggf ;};if _dfdb .Llx > _dfdb .Urx {_dfdb .Llx ,_dfdb .Urx =_dfdb .Urx ,_dfdb .Llx ;};if _dfdb .Lly > _dfdb .Ury {_dfdb .Lly ,_dfdb .Ury =_dfdb .Ury ,_dfdb .Lly ;
};_abgf :=true ;if _deab ._cbgd ._adf .Width ()> 0{_ebea ,_cddaa :=_gfeb (_dfdb ,_deab ._cbgd ._adf );if !_cddaa {_abgf =false ;_b .Log .Debug ("\u0054\u0065\u0078\u0074\u0020m\u0061\u0072\u006b\u0020\u006f\u0075\u0074\u0073\u0069\u0064\u0065\u0020\u0070a\u0067\u0065\u002e\u0020\u0062\u0062\u006f\u0078\u003d\u0025\u0067\u0020\u006d\u0065\u0064\u0069\u0061\u0042\u006f\u0078\u003d\u0025\u0067\u0020\u0074\u0065\u0078\u0074\u003d\u0025q",_dfdb ,_deab ._cbgd ._adf ,_ecbb );
};_dfdb =_ebea ;};_eabgf :=_dfdb ;_adab :=_deab ._cbgd ._adf ;switch _ddbbf %360{case 90:_adab .Urx ,_adab .Ury =_adab .Ury ,_adab .Urx ;_eabgf =_ff .PdfRectangle {Llx :_adab .Urx -_dfdb .Ury ,Urx :_adab .Urx -_dfdb .Lly ,Lly :_dfdb .Llx ,Ury :_dfdb .Urx };
case 180:_eabgf =_ff .PdfRectangle {Llx :_adab .Urx -_dfdb .Llx ,Urx :_adab .Urx -_dfdb .Urx ,Lly :_adab .Ury -_dfdb .Lly ,Ury :_adab .Ury -_dfdb .Ury };case 270:_adab .Urx ,_adab .Ury =_adab .Ury ,_adab .Urx ;_eabgf =_ff .PdfRectangle {Llx :_dfdb .Ury ,Urx :_dfdb .Lly ,Lly :_adab .Ury -_dfdb .Llx ,Ury :_adab .Ury -_dfdb .Urx };
};if _eabgf .Llx > _eabgf .Urx {_eabgf .Llx ,_eabgf .Urx =_eabgf .Urx ,_eabgf .Llx ;};if _eabgf .Lly > _eabgf .Ury {_eabgf .Lly ,_eabgf .Ury =_eabgf .Ury ,_eabgf .Lly ;};_gcdd :=textMark {_ffcaf :_ecbb ,PdfRectangle :_eabgf ,_bfaf :_dfdb ,_aaee :_abdf ,_dgec :_bggf ,_agdb :_efcb ,_aeag :_afgca ,_abcgc :_cegc ,_eecb :_ddbbf ,_cfbba :_cgde ,_ddae :_aegab ,_fgadd :_gabea ,_bcfb :_ecgf ,Th :_deab ._dedg ._cceb ,Tw :_deab ._dedg ._egcc ,_dcaed :_gadc ,_gaeb :_acaac };
if _baec {_b .Log .Info ("n\u0065\u0077\u0054\u0065\u0078\u0074M\u0061\u0072\u006b\u003a\u0020\u0073t\u0061\u0072\u0074\u003d\u0025\u002e\u0032f\u0020\u0065\u006e\u0064\u003d\u0025\u002e\u0032\u0066\u0020%\u0073",_adcf ,_cegc ,_gcdd .String ());};return _gcdd ,_abgf ;
};type rulingList []*ruling ;func _acffg (_fdcad map[float64 ][]*textLine )[]float64 {_egeg :=[]float64 {};for _ggdc :=range _fdcad {_egeg =append (_egeg ,_ggdc );};_dc .Float64s (_egeg );return _egeg ;};func (_fgcf *textObject )checkOp (_gcacc *_ef .ContentStreamOperation ,_bec int ,_baa bool )(_cadb bool ,_geca error ){if _fgcf ==nil {var _dadcf []_fc .PdfObject ;
if _bec > 0{_dadcf =_gcacc .Params ;if len (_dadcf )> _bec {_dadcf =_dadcf [:_bec ];};};_b .Log .Debug ("\u0025\u0023q \u006f\u0070\u0065r\u0061\u006e\u0064\u0020out\u0073id\u0065\u0020\u0074\u0065\u0078\u0074\u002e p\u0061\u0072\u0061\u006d\u0073\u003d\u0025+\u0076",_gcacc .Operand ,_dadcf );
};if _bec >=0{if len (_gcacc .Params )!=_bec {if _baa {_geca =_gd .New ("\u0069n\u0063\u006f\u0072\u0072e\u0063\u0074\u0020\u0070\u0061r\u0061m\u0065t\u0065\u0072\u0020\u0063\u006f\u0075\u006et");};_b .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0025\u0023\u0071\u0020\u0073\u0068\u006f\u0075\u006c\u0064\u0020h\u0061\u0076\u0065\u0020\u0025\u0064\u0020i\u006e\u0070\u0075\u0074\u0020\u0070\u0061\u0072\u0061\u006d\u0073,\u0020\u0067\u006f\u0074\u0020\u0025\u0064\u0020\u0025\u002b\u0076",_gcacc .Operand ,_bec ,len (_gcacc .Params ),_gcacc .Params );
return false ,_geca ;};};return true ,nil ;};func (_aaaba rulingList )snapToGroupsDirection ()rulingList {_aaaba .sortStrict ();_cfgaa :=make (map[*ruling ]rulingList ,len (_aaaba ));_bbbab :=_aaaba [0];_cgfec :=func (_aefa *ruling ){_bbbab =_aefa ;_cfgaa [_bbbab ]=rulingList {_aefa }};
_cgfec (_aaaba [0]);for _ ,_cead :=range _aaaba [1:]{if _cead ._fgbd < _bbbab ._fgbd -_gbgaa {_b .Log .Error ("\u0073\u006e\u0061\u0070T\u006f\u0047\u0072\u006f\u0075\u0070\u0073\u0044\u0069r\u0065\u0063\u0074\u0069\u006f\u006e\u003a\u0020\u0057\u0072\u006f\u006e\u0067\u0020\u0070\u0072\u0069\u006da\u0072\u0079\u0020\u006f\u0072d\u0065\u0072\u002e\u000a\u0009\u0076\u0030\u003d\u0025\u0073\u000a\u0009\u0020\u0076\u003d\u0025\u0073",_bbbab ,_cead );
};if _cead ._fgbd > _bbbab ._fgbd +_aeeg {_cgfec (_cead );}else {_cfgaa [_bbbab ]=append (_cfgaa [_bbbab ],_cead );};};_fbgf :=make (map[*ruling ]float64 ,len (_cfgaa ));_deafb :=make (map[*ruling ]*ruling ,len (_aaaba ));for _dfag ,_gfeag :=range _cfgaa {_fbgf [_dfag ]=_gfeag .mergePrimary ();
for _ ,_faafe :=range _gfeag {_deafb [_faafe ]=_dfag ;};};for _ ,_bdaf :=range _aaaba {_bdaf ._fgbd =_fbgf [_deafb [_bdaf ]];};_gaaa :=make (rulingList ,0,len (_aaaba ));for _ ,_eacg :=range _cfgaa {_gcdg :=_eacg .splitSec ();for _geab ,_edadf :=range _gcdg {_dced :=_edadf .merge ();
if len (_gaaa )> 0{_cddgd :=_gaaa [len (_gaaa )-1];if _cddgd .alignsPrimary (_dced )&&_cddgd .alignsSec (_dced ){_b .Log .Error ("\u0073\u006e\u0061\u0070\u0054\u006fG\u0072\u006f\u0075\u0070\u0073\u0044\u0069\u0072\u0065\u0063\u0074\u0069\u006f\u006e\u003a\u0020\u0044\u0075\u0070\u006ci\u0063\u0061\u0074\u0065\u0020\u0069\u003d\u0025\u0064\u000a\u0009\u0077\u003d\u0025s\u000a\t\u0076\u003d\u0025\u0073",_geab ,_cddgd ,_dced );
continue ;};};_gaaa =append (_gaaa ,_dced );};};_gaaa .sortStrict ();return _gaaa ;};func _dedd (_badg ,_ffbc bounded )float64 {return _badg .bbox ().Llx -_ffbc .bbox ().Urx };func _ebfe (_dgdba float64 )float64 {return _ddaf *_g .Round (_dgdba /_ddaf )};
func (_gcfe *stateStack )top ()*textState {if _gcfe .empty (){return nil ;};return (*_gcfe )[_gcfe .size ()-1];};func _gebc (_gafc *textLine )bool {_abac :=true ;_dfcafb :=-1;for _ ,_bgge :=range _gafc ._egbe {for _ ,_fefba :=range _bgge ._eacb {_ffdca :=_fefba ._dcaed ;
if _dfcafb ==-1{_dfcafb =_ffdca ;}else {if _dfcafb !=_ffdca {_abac =false ;break ;};};};};return _abac ;};func (_cgdg *wordBag )pullWord (_fbba *textWord ,_decd int ,_cgcaf map[int ]map[*textWord ]struct{}){_cgdg .PdfRectangle =_baabb (_cgdg .PdfRectangle ,_fbba .PdfRectangle );
if _fbba ._gfbc > _cgdg ._dfcaf {_cgdg ._dfcaf =_fbba ._gfbc ;};_cgdg ._ggeff [_decd ]=append (_cgdg ._ggeff [_decd ],_fbba );_cgcaf [_decd ][_fbba ]=struct{}{};};type textResult struct{_cadg PageText ;_edg int ;_gbcd int ;};

// String returns a description of `p`.
func (_egg *textPara )String ()string {if _egg ._cgac {return _gf .Sprintf ("\u0025\u0036\u002e\u0032\u0066\u0020\u005b\u0045\u004d\u0050\u0054\u0059\u005d",_egg .PdfRectangle );};_cdbcd :="";if _egg ._eeage !=nil {_cdbcd =_gf .Sprintf ("\u005b\u0025\u0064\u0078\u0025\u0064\u005d\u0020",_egg ._eeage ._edebd ,_egg ._eeage ._ecedc );
};return _gf .Sprintf ("\u0025\u0036\u002e\u0032f \u0025\u0073\u0025\u0064\u0020\u006c\u0069\u006e\u0065\u0073\u0020\u0025\u0071",_egg .PdfRectangle ,_cdbcd ,len (_egg ._gfef ),_aggbc (_egg .text (),50));};func (_dfge rulingList )intersections ()map[int ]intSet {var _dded ,_cfcgb []int ;
for _ffcae ,_ccead :=range _dfge {switch _ccead ._gefad {case _ebgd :_dded =append (_dded ,_ffcae );case _deca :_cfcgb =append (_cfcgb ,_ffcae );};};if len (_dded )< _gddcb +1||len (_cfcgb )< _bdbca +1{return nil ;};if len (_dded )+len (_cfcgb )> _bbdb {_b .Log .Debug ("\u0069\u006e\u0074\u0065\u0072\u0073e\u0063\u0074\u0069\u006f\u006e\u0073\u003a\u0020\u0054\u004f\u004f\u0020\u004d\u0041\u004e\u0059\u0020\u0072\u0075\u006ci\u006e\u0067\u0073\u0020\u0076\u0065\u0063\u0073\u003d\u0025\u0064\u0020\u003d\u0020%\u0064 \u0078\u0020\u0025\u0064",len (_dfge ),len (_dded ),len (_cfcgb ));
return nil ;};_dfgg :=make (map[int ]intSet ,len (_dded )+len (_cfcgb ));for _ ,_fcba :=range _dded {for _ ,_aebd :=range _cfcgb {if _dfge [_fcba ].intersects (_dfge [_aebd ]){if _ ,_bgdec :=_dfgg [_fcba ];!_bgdec {_dfgg [_fcba ]=make (intSet );};if _ ,_aabac :=_dfgg [_aebd ];
!_aabac {_dfgg [_aebd ]=make (intSet );};_dfgg [_fcba ].add (_aebd );_dfgg [_aebd ].add (_fcba );};};};return _dfgg ;};

// RenderMode specifies the text rendering mode (Tmode), which determines whether showing text shall cause
// glyph outlines to be  stroked, filled, used as a clipping boundary, or some combination of the three.
// Stroking, filling, and clipping shall have the same effects for a text object as they do for a path object
// (see 8.5.3, "Path-Painting Operators" and 8.5.4, "Clipping Path Operators").
type RenderMode int ;func (_caaa *textWord )computeText ()string {_abegf :=make ([]string ,len (_caaa ._eacb ));for _cdbff ,_gccc :=range _caaa ._eacb {_abegf [_cdbff ]=_gccc ._ffcaf ;};return _ca .Join (_abegf ,"");};func (_fbbe gridTile )numBorders ()int {_baedb :=0;
if _fbbe ._bfac {_baedb ++;};if _fbbe ._gfdb {_baedb ++;};if _fbbe ._dddffa {_baedb ++;};if _fbbe ._gcabff {_baedb ++;};return _baedb ;};

// Editor represents a document editor object
type Editor struct{_acg *_ff .PdfReader };type structElement struct{_feea string ;_cced []structElement ;_abaa int64 ;_bfff _fc .PdfObject ;};func _abdcc (_aaecg map[int ][]float64 )[]int {_edge :=make ([]int ,len (_aaecg ));_aedfd :=0;for _egfgd :=range _aaecg {_edge [_aedfd ]=_egfgd ;
_aedfd ++;};_dc .Ints (_edge );return _edge ;};func _abf (_efe string ,_fgc ,_ggbgc int ,_dfea string )string {if _ggbgc > len (_efe )-1{return _efe [:_fgc ]+_dfea ;};return _efe [:_fgc ]+_dfea +_efe [_ggbgc :];};var _fdff *_a .Regexp =_a .MustCompile (_ccfc +"\u007c"+_dbfd );
type textTable struct{_ff .PdfRectangle ;_edebd ,_ecedc int ;_fbgad bool ;_eafac map[uint64 ]*textPara ;_cdafa map[uint64 ]compositeCell ;};func _fffae (_geeb ,_gdefa _ff .PdfRectangle )bool {return _gdefa .Llx <=_geeb .Urx &&_geeb .Llx <=_gdefa .Urx ;
};func _ad (_aag int )bool {return (_aag &1)==0};func _cccg (_dcfad []*textLine )map[float64 ][]*textLine {_dc .Slice (_dcfad ,func (_egaa ,_eeeg int )bool {return _dcfad [_egaa ]._cdab < _dcfad [_eeeg ]._cdab });_cdcg :=map[float64 ][]*textLine {};for _ ,_cfdg :=range _dcfad {_feeg :=_degde (_cfdg );
_feeg =_g .Round (_feeg );_cdcg [_feeg ]=append (_cdcg [_feeg ],_cfdg );};return _cdcg ;};func (_cdca *textTable )getRight ()paraList {_accffc :=make (paraList ,_cdca ._ecedc );for _cdcgb :=0;_cdcgb < _cdca ._ecedc ;_cdcgb ++{_fcbdb :=_cdca .get (_cdca ._edebd -1,_cdcgb )._egbd ;
if _fcbdb .taken (){return nil ;};_accffc [_cdcgb ]=_fcbdb ;};for _ecedg :=0;_ecedg < _cdca ._ecedc -1;_ecedg ++{if _accffc [_ecedg ]._acgf !=_accffc [_ecedg +1]{return nil ;};};return _accffc ;};func (_gaec *shapesState )drawRectangle (_efef ,_bfda ,_dfbd ,_gabc float64 ){if _fdgc {_gddg :=_gaec .devicePoint (_efef ,_bfda );
_cabbb :=_gaec .devicePoint (_efef +_dfbd ,_bfda +_gabc );_fdee :=_ff .PdfRectangle {Llx :_gddg .X ,Lly :_gddg .Y ,Urx :_cabbb .X ,Ury :_cabbb .Y };_b .Log .Info ("d\u0072a\u0077\u0052\u0065\u0063\u0074\u0061\u006e\u0067l\u0065\u003a\u0020\u00256.\u0032\u0066",_fdee );
};_gaec .newSubPath ();_gaec .moveTo (_efef ,_bfda );_gaec .lineTo (_efef +_dfbd ,_bfda );_gaec .lineTo (_efef +_dfbd ,_bfda +_gabc );_gaec .lineTo (_efef ,_bfda +_gabc );_gaec .closePath ();};func _bce (_eff *TextMarkArray )[]*TextMarkArray {_cfca :=_eff .Elements ();
_fge :=len (_cfca );var _cbgg _fc .PdfObject ;_cda :=[]*TextMarkArray {};_gbg :=&TextMarkArray {};_ada :=-1;for _fbeb ,_gfg :=range _cfca {_gef :=_gfg .DirectObject ;_ada =_gfg .Index ;if _gef ==nil {_bbe :=_gbbd (_eff ,_fbeb ,_ada );if _cbgg !=nil {if _bbe ==-1||_bbe > _fbeb {_cda =append (_cda ,_gbg );
_gbg =&TextMarkArray {};};};}else if _gef !=nil &&_cbgg ==nil {if _ada ==0&&_fbeb > 0{_cda =append (_cda ,_gbg );_gbg =&TextMarkArray {};};}else if _gef !=nil &&_cbgg !=nil {if _gef !=_cbgg {_cda =append (_cda ,_gbg );_gbg =&TextMarkArray {};};};_cbgg =_gef ;
_gbg .Append (_gfg );if _fbeb ==(_fge -1){_cda =append (_cda ,_gbg );};};return _cda ;};

// String returns a description of `v`.
func (_cbcc *ruling )String ()string {if _cbcc ._gefad ==_ccebbf {return "\u004e\u004f\u0054\u0020\u0052\u0055\u004c\u0049\u004e\u0047";};_dgdbf ,_fgbg :="\u0078","\u0079";if _cbcc ._gefad ==_deca {_dgdbf ,_fgbg ="\u0079","\u0078";};_bgdg :="";if _cbcc ._cafb !=0.0{_bgdg =_gf .Sprintf (" \u0077\u0069\u0064\u0074\u0068\u003d\u0025\u002e\u0032\u0066",_cbcc ._cafb );
};return _gf .Sprintf ("\u0025\u00310\u0073\u0020\u0025\u0073\u003d\u0025\u0036\u002e\u0032\u0066\u0020\u0025\u0073\u003d\u0025\u0036\u002e\u0032\u0066\u0020\u002d\u0020\u0025\u0036\u002e\u0032\u0066\u0020\u0028\u0025\u0036\u002e\u0032\u0066\u0029\u0020\u0025\u0073\u0020\u0025\u0076\u0025\u0073",_cbcc ._gefad ,_dgdbf ,_cbcc ._fgbd ,_fgbg ,_cbcc ._aceb ,_cbcc ._gddcg ,_cbcc ._gddcg -_cbcc ._aceb ,_cbcc ._afge ,_cbcc .Color ,_bgdg );
};

// String returns a description of `t`.
func (_dccb *textTable )String ()string {return _gf .Sprintf ("\u0025\u0064\u0020\u0078\u0020\u0025\u0064\u0020\u0025\u0074",_dccb ._edebd ,_dccb ._ecedc ,_dccb ._fbgad );};func _cecad (_eaggf []float64 ,_cbbbg ,_fafbe float64 )[]float64 {_cbggd ,_cfaf :=_cbbbg ,_fafbe ;
if _cfaf < _cbggd {_cbggd ,_cfaf =_cfaf ,_cbggd ;};_cfeab :=make ([]float64 ,0,len (_eaggf )+2);_cfeab =append (_cfeab ,_cbbbg );for _ ,_efbd :=range _eaggf {if _efbd <=_cbggd {continue ;}else if _efbd >=_cfaf {break ;};_cfeab =append (_cfeab ,_efbd );
};_cfeab =append (_cfeab ,_fafbe );return _cfeab ;};func (_abff *textObject )showText (_cgfc _fc .PdfObject ,_baed []byte ,_abfa int ,_cbdb string )error {return _abff .renderText (_cgfc ,_baed ,_abfa ,_cbdb );};func (_bcg rulingList )blocks (_acfef ,_dgfg *ruling )bool {if _acfef ._aceb > _dgfg ._gddcg ||_dgfg ._aceb > _acfef ._gddcg {return false ;
};_efcg :=_g .Max (_acfef ._aceb ,_dgfg ._aceb );_gcfed :=_g .Min (_acfef ._gddcg ,_dgfg ._gddcg );if _acfef ._fgbd > _dgfg ._fgbd {_acfef ,_dgfg =_dgfg ,_acfef ;};for _ ,_adaeg :=range _bcg {if _acfef ._fgbd <=_adaeg ._fgbd +_aeeg &&_adaeg ._fgbd <=_dgfg ._fgbd +_aeeg &&_adaeg ._aceb <=_gcfed &&_efcg <=_adaeg ._gddcg {return true ;
};};return false ;};func (_efaa *wordBag )getDepthIdx (_dgebb float64 )int {_agdc :=_efaa .depthIndexes ();_edbc :=_eec (_dgebb );if _edbc < _agdc [0]{return _agdc [0];};if _edbc > _agdc [len (_agdc )-1]{return _agdc [len (_agdc )-1];};return _edbc ;};
func _gddf (_bdba ,_daac bounded )float64 {return _eaeb (_bdba )-_eaeb (_daac )};func _beaab (_dacd []*textLine ,_dggf ,_ffag float64 )[]*textLine {var _aadd []*textLine ;for _ ,_bdee :=range _dacd {if _dggf ==-1{if _bdee ._cdab > _ffag {_aadd =append (_aadd ,_bdee );
};}else {if _bdee ._cdab > _ffag &&_bdee ._cdab < _dggf {_aadd =append (_aadd ,_bdee );};};};return _aadd ;};func (_beeee *textLine )bbox ()_ff .PdfRectangle {return _beeee .PdfRectangle };func (_bbcf *textPara )getListLines ()[]*textLine {var _agfdg []*textLine ;
_ecgb :=_addb (_bbcf ._gfef );for _ ,_gbea :=range _bbcf ._gfef {_cgda :=_gbea ._egbe [0]._dbefc [0];if _bfef (_cgda ){_agfdg =append (_agfdg ,_gbea );};};_agfdg =append (_agfdg ,_ecgb ...);return _agfdg ;};func _cdcb (_gacd map[float64 ]map[float64 ]gridTile )[]float64 {_afdce :=make ([]float64 ,0,len (_gacd ));
for _eedf :=range _gacd {_afdce =append (_afdce ,_eedf );};_dc .Float64s (_afdce );_adacf :=len (_afdce );for _egbfg :=0;_egbfg < _adacf /2;_egbfg ++{_afdce [_egbfg ],_afdce [_adacf -1-_egbfg ]=_afdce [_adacf -1-_egbfg ],_afdce [_egbfg ];};return _afdce ;
};func (_fbggb *textMark )inDiacriticArea (_gbbeb *textMark )bool {_ddefg :=_fbggb .Llx -_gbbeb .Llx ;_deaba :=_fbggb .Urx -_gbbeb .Urx ;_caef :=_fbggb .Lly -_gbbeb .Lly ;return _g .Abs (_ddefg +_deaba )< _fbggb .Width ()*_beee &&_g .Abs (_caef )< _fbggb .Height ()*_beee ;
};

// String returns a string describing the current state of the textState stack.
func (_fdca *stateStack )String ()string {_agea :=[]string {_gf .Sprintf ("\u002d\u002d\u002d\u002d f\u006f\u006e\u0074\u0020\u0073\u0074\u0061\u0063\u006b\u003a\u0020\u0025\u0064",len (*_fdca ))};for _cgef ,_ggbbd :=range *_fdca {_ccfab :="\u003c\u006e\u0069l\u003e";
if _ggbbd !=nil {_ccfab =_ggbbd .String ();};_agea =append (_agea ,_gf .Sprintf ("\u0009\u0025\u0032\u0064\u003a\u0020\u0025\u0073",_cgef ,_ccfab ));};return _ca .Join (_agea ,"\u000a");};

// Tables returns the tables extracted from the page.
func (_ggae PageText )Tables ()[]TextTable {if _cebg {_b .Log .Info ("\u0054\u0061\u0062\u006c\u0065\u0073\u003a\u0020\u0025\u0064",len (_ggae ._ccdc ));};return _ggae ._ccdc ;};func (_bfcg *imageExtractContext )extractContentStreamImages (_dbb string ,_ggdd *_ff .PdfPageResources )error {_fdaf :=_ef .NewContentStreamParser (_dbb );
_bgc ,_dag :=_fdaf .Parse ();if _dag !=nil {return _dag ;};if _bfcg ._dad ==nil {_bfcg ._dad =map[*_fc .PdfObjectStream ]*cachedImage {};};if _bfcg ._ffaf ==nil {_bfcg ._ffaf =&ImageExtractOptions {};};_cebb :=_ef .NewContentStreamProcessor (*_bgc );_cebb .AddHandler (_ef .HandlerConditionEnumAllOperands ,"",_bfcg .processOperand );
return _cebb .Process (_ggdd );};func (_aefee *subpath )makeRectRuling (_fdbe _cf .Color )(*ruling ,bool ){if _dece {_b .Log .Info ("\u006d\u0061\u006beR\u0065\u0063\u0074\u0052\u0075\u006c\u0069\u006e\u0067\u003a\u0020\u0070\u0061\u0074\u0068\u003d\u0025\u0076",_aefee );
};_fgbdc :=_aefee ._ddfa [:4];_dbfgc :=make (map[int ]rulingKind ,len (_fgbdc ));for _fbcg ,_fgbba :=range _fgbdc {_agcb :=_aefee ._ddfa [(_fbcg +1)%4];_dbfgc [_fbcg ]=_gbeffa (_fgbba ,_agcb );if _dece {_gf .Printf ("\u0025\u0034\u0064: \u0025\u0073\u0020\u003d\u0020\u0025\u0036\u002e\u0032\u0066\u0020\u002d\u0020\u0025\u0036\u002e\u0032\u0066",_fbcg ,_dbfgc [_fbcg ],_fgbba ,_agcb );
};};if _dece {_gf .Printf ("\u0020\u0020\u0020\u006b\u0069\u006e\u0064\u0073\u003d\u0025\u002b\u0076\u000a",_dbfgc );};var _gbda ,_ceff []int ;for _gceac ,_bgea :=range _dbfgc {switch _bgea {case _deca :_ceff =append (_ceff ,_gceac );case _ebgd :_gbda =append (_gbda ,_gceac );
};};if _dece {_gf .Printf ("\u0020\u0020 \u0068\u006f\u0072z\u0073\u003d\u0025\u0064\u0020\u0025\u002b\u0076\u000a",len (_ceff ),_ceff );_gf .Printf ("\u0020\u0020 \u0076\u0065\u0072t\u0073\u003d\u0025\u0064\u0020\u0025\u002b\u0076\u000a",len (_gbda ),_gbda );
};_gffc :=(len (_ceff )==2&&len (_gbda )==2)||(len (_ceff )==2&&len (_gbda )==0&&_dcbff (_fgbdc [_ceff [0]],_fgbdc [_ceff [1]]))||(len (_gbda )==2&&len (_ceff )==0&&_agda (_fgbdc [_gbda [0]],_fgbdc [_gbda [1]]));if _dece {_gf .Printf (" \u0020\u0020\u0068\u006f\u0072\u007as\u003d\u0025\u0064\u0020\u0076\u0065\u0072\u0074\u0073=\u0025\u0064\u0020o\u006b=\u0025\u0074\u000a",len (_ceff ),len (_gbda ),_gffc );
};if !_gffc {if _dece {_b .Log .Error ("\u0021!\u006d\u0061\u006b\u0065R\u0065\u0063\u0074\u0052\u0075l\u0069n\u0067:\u0020\u0070\u0061\u0074\u0068\u003d\u0025v",_aefee );_gf .Printf (" \u0020\u0020\u0068\u006f\u0072\u007as\u003d\u0025\u0064\u0020\u0076\u0065\u0072\u0074\u0073=\u0025\u0064\u0020o\u006b=\u0025\u0074\u000a",len (_ceff ),len (_gbda ),_gffc );
};return &ruling {},false ;};if len (_gbda )==0{for _aegg ,_cbbdb :=range _dbfgc {if _cbbdb !=_deca {_gbda =append (_gbda ,_aegg );};};};if len (_ceff )==0{for _fggc ,_caab :=range _dbfgc {if _caab !=_ebgd {_ceff =append (_ceff ,_fggc );};};};if _dece {_b .Log .Info ("\u006da\u006b\u0065R\u0065\u0063\u0074\u0052u\u006c\u0069\u006eg\u003a\u0020\u0068\u006f\u0072\u007a\u0073\u003d\u0025d \u0076\u0065\u0072t\u0073\u003d%\u0064\u0020\u0070\u006f\u0069\u006et\u0073\u003d%\u0064\u000a"+"\u0009\u0020\u0068o\u0072\u007a\u0073\u003d\u0025\u002b\u0076\u000a"+"\u0009\u0020\u0076e\u0072\u0074\u0073\u003d\u0025\u002b\u0076\u000a"+"\t\u0070\u006f\u0069\u006e\u0074\u0073\u003d\u0025\u002b\u0076",len (_ceff ),len (_gbda ),len (_fgbdc ),_ceff ,_gbda ,_fgbdc );
};var _egdg ,_ecgd ,_bgfc ,_bgcef _cd .Point ;if _fgbdc [_ceff [0]].Y > _fgbdc [_ceff [1]].Y {_bgfc ,_bgcef =_fgbdc [_ceff [0]],_fgbdc [_ceff [1]];}else {_bgfc ,_bgcef =_fgbdc [_ceff [1]],_fgbdc [_ceff [0]];};if _fgbdc [_gbda [0]].X > _fgbdc [_gbda [1]].X {_egdg ,_ecgd =_fgbdc [_gbda [0]],_fgbdc [_gbda [1]];
}else {_egdg ,_ecgd =_fgbdc [_gbda [1]],_fgbdc [_gbda [0]];};_ecbfd :=_ff .PdfRectangle {Llx :_egdg .X ,Urx :_ecgd .X ,Lly :_bgcef .Y ,Ury :_bgfc .Y };if _ecbfd .Llx > _ecbfd .Urx {_ecbfd .Llx ,_ecbfd .Urx =_ecbfd .Urx ,_ecbfd .Llx ;};if _ecbfd .Lly > _ecbfd .Ury {_ecbfd .Lly ,_ecbfd .Ury =_ecbfd .Ury ,_ecbfd .Lly ;
};_dacc :=rectRuling {PdfRectangle :_ecbfd ,_gbgcg :_fbef (_ecbfd ),Color :_fdbe };if _dacc ._gbgcg ==_ccebbf {if _dece {_b .Log .Error ("\u006da\u006b\u0065\u0052\u0065\u0063\u0074\u0052\u0075\u006c\u0069\u006eg\u003a\u0020\u006b\u0069\u006e\u0064\u003d\u006e\u0069\u006c");
};return nil ,false ;};_fgbf ,_dagac :=_dacc .asRuling ();if !_dagac {if _dece {_b .Log .Error ("\u006da\u006b\u0065\u0052\u0065c\u0074\u0052\u0075\u006c\u0069n\u0067:\u0020!\u0069\u0073\u0052\u0075\u006c\u0069\u006eg");};return nil ,false ;};if _aaeb {_gf .Printf ("\u0020\u0020\u0020\u0072\u003d\u0025\u0073\u000a",_fgbf .String ());
};return _fgbf ,true ;};func _gbeffa (_cbcf ,_ffgb _cd .Point )rulingKind {_aggca :=_g .Abs (_cbcf .X -_ffgb .X );_fgace :=_g .Abs (_cbcf .Y -_ffgb .Y );return _cedef (_aggca ,_fgace ,_gdeg );};func _acga (_eddb *TextMarkArray ,_fffd *string ,_egd *int ,_bbdg string )error {_ffbb :=_eddb .Elements ()[0].DirectObject ;
_gfgd ,_ddfb :=_fc .GetString (_ffbb );if !_ddfb {return _gf .Errorf ("\u0075n\u0061\u0062l\u0065\u0020\u0074\u006f \u0067\u0065\u0074 \u0073\u0074\u0072\u0069\u006e\u0067\u0020\u0042\u0079te\u0073\u0020\u0066r\u006f\u006d \u0064\u0069\u0072\u0065\u0063\u0074O\u0062\u006ae\u0063\u0074");
};_dfb :=_cge (_eddb );_dfad ,_ddfb :=_fc .GetStringBytes (_ffbb );if !_ddfb {return _fc .ErrTypeError ;};_fgab :=_eddb .Elements ()[0].Font ;_bgbf :=_daa (_dfad ,_fgab );_fce :="";_cfgc :=*_fffd ;if len (_cfgc )> *_egd {_fce =_cfgc [*_egd :*_egd +len (_dfb )];
}else if *_egd ==len (_bbdg )-1&&len (_cfgc )> *_egd {_fce =_cfgc [*_egd :];};_gbdb :="";_ceg :=_ca .Split (_bgbf ,"\u0020");_dea :=_ceg [len (_ceg )-1];if _dea ==_dfb &&*_egd ==0{_bacgb :=_ca .LastIndex (_bgbf ,_dfb );_gbdb =_abf (_bgbf ,_bacgb ,len (_dfb )+_bacgb ,_fce );
}else if *_egd ==len (_bbdg )-1&&len (_cfgc )> *_egd {_gbdb =_ca .Replace (_bgbf ,_dfb ,_cfgc [*_egd :],-1);}else {_gbdb =_ca .Replace (_bgbf ,_dfb ,_fce ,1);};_edf (_gfgd ,_gbdb ,_fgab );*_egd +=len (_dfb );return nil ;};

// String returns a description of `l`.
func (_edag *textLine )String ()string {return _gf .Sprintf ("\u0025\u002e2\u0066\u0020\u0025\u0036\u002e\u0032\u0066\u0020\u0066\u006f\u006e\u0074\u0073\u0069\u007a\u0065\u003d\u0025\u002e\u0032\u0066\u0020\"%\u0073\u0022",_edag ._cdab ,_edag .PdfRectangle ,_edag ._dcdbf ,_edag .text ());
};func _faec (_bcade _ff .PdfRectangle )textState {return textState {_cceb :100,_cbfg :RenderModeFill ,_fgeg :_bcade };};func (_cgaf rulingList )comp (_fcecf ,_cbead int )bool {_cegfaf ,_eaabc :=_cgaf [_fcecf ],_cgaf [_cbead ];_fcedb ,_efdaa :=_cegfaf ._gefad ,_eaabc ._gefad ;
if _fcedb !=_efdaa {return _fcedb > _efdaa ;};if _fcedb ==_ccebbf {return false ;};_egef :=func (_acdad bool )bool {if _fcedb ==_deca {return _acdad ;};return !_acdad ;};_bdbdd ,_bfddf :=_cegfaf ._fgbd ,_eaabc ._fgbd ;if _bdbdd !=_bfddf {return _egef (_bdbdd > _bfddf );
};_bdbdd ,_bfddf =_cegfaf ._aceb ,_eaabc ._aceb ;if _bdbdd !=_bfddf {return _egef (_bdbdd < _bfddf );};return _egef (_cegfaf ._gddcg < _eaabc ._gddcg );};func (_dcbb rulingList )connections (_dbac map[int ]intSet ,_dcdfd int )intSet {_bgabe :=make (intSet );
_ffbef :=make (intSet );var _affc func (int );_affc =func (_bedc int ){if !_ffbef .has (_bedc ){_ffbef .add (_bedc );for _cgfdb :=range _dcbb {if _dbac [_cgfdb ].has (_bedc ){_bgabe .add (_cgfdb );};};for _baabcg :=range _dcbb {if _bgabe .has (_baabcg ){_affc (_baabcg );
};};};};_affc (_dcdfd );return _bgabe ;};func _bdae (_dcec _ff .PdfRectangle )*ruling {return &ruling {_gefad :_ebgd ,_fgbd :_dcec .Llx ,_aceb :_dcec .Lly ,_gddcg :_dcec .Ury };};func (_gdgea *textTable )getComposite (_deecee ,_fagbe int )(paraList ,_ff .PdfRectangle ){_dfffc ,_ceafc :=_gdgea ._cdafa [_dfdgd (_deecee ,_fagbe )];
if _cebg {_gf .Printf ("\u0020\u0020\u0020\u0020\u0020\u0020\u0020\u0020\u0067\u0065\u0074\u0043\u006f\u006d\u0070o\u0073i\u0074\u0065\u0028\u0025\u0064\u002c\u0025\u0064\u0029\u002d\u003e\u0025\u0073\u000a",_deecee ,_fagbe ,_dfffc .String ());};if !_ceafc {return nil ,_ff .PdfRectangle {};
};return _dfffc .parasBBox ();};func (_gcdeb *structElement )parseStructElement (_dbgb _fc .PdfObject ){_fddga ,_gfbd :=_fc .GetDict (_dbgb );if !_gfbd {_b .Log .Debug ("\u0070\u0061\u0072\u0073\u0065\u0053\u0074\u0072u\u0063\u0074\u0045le\u006d\u0065\u006e\u0074\u003a\u0020d\u0069\u0063\u0074\u0069\u006f\u006e\u0061\u0072\u0079\u0020\u006f\u0062\u006a\u0065\u0063t\u0020\u006e\u006f\u0074\u0020\u0066\u006f\u0075n\u0064\u002e");
return ;};_bebf :=_fddga .Get ("\u0053");_aeed :=_fddga .Get ("\u0050\u0067");_ffgf :="";if _bebf !=nil {_ffgf =_bebf .String ();};_aaea :=_fddga .Get ("\u004b");_gcdeb ._feea =_ffgf ;_gcdeb ._bfff =_aeed ;switch _gfba :=_aaea .(type ){case *_fc .PdfObjectInteger :_gcdeb ._feea =_ffgf ;
_gcdeb ._abaa =int64 (*_gfba );_gcdeb ._bfff =_aeed ;case *_fc .PdfObjectReference :_afdbc :=*_fc .MakeArray (_gfba );var _acba int64 =-1;_gcdeb ._abaa =_acba ;if _afdbc .Len ()==1{_cebe :=_afdbc .Elements ()[0];_gaaf ,_gccaa :=_cebe .(*_fc .PdfObjectInteger );
if _gccaa {_acba =int64 (*_gaaf );_gcdeb ._abaa =_acba ;_gcdeb ._feea =_ffgf ;_gcdeb ._bfff =_aeed ;return ;};};_bgaa :=[]structElement {};for _ ,_faab :=range _afdbc .Elements (){_dfccd ,_acff :=_faab .(*_fc .PdfObjectInteger );if _acff {_acba =int64 (*_dfccd );
_gcdeb ._abaa =_acba ;_gcdeb ._feea =_ffgf ;}else {_fabda :=&structElement {};_fabda .parseStructElement (_faab );_bgaa =append (_bgaa ,*_fabda );};_acba =-1;};_gcdeb ._cced =_bgaa ;case *_fc .PdfObjectArray :_cgaa :=_aaea .(*_fc .PdfObjectArray );var _eafc int64 =-1;
_gcdeb ._abaa =_eafc ;if _cgaa .Len ()==1{_agbb :=_cgaa .Elements ()[0];_dbff ,_aebb :=_agbb .(*_fc .PdfObjectInteger );if _aebb {_eafc =int64 (*_dbff );_gcdeb ._abaa =_eafc ;_gcdeb ._feea =_ffgf ;_gcdeb ._bfff =_aeed ;return ;};};_gcabc :=[]structElement {};
for _ ,_ffebd :=range _cgaa .Elements (){_dcab ,_fdda :=_ffebd .(*_fc .PdfObjectInteger );if _fdda {_eafc =int64 (*_dcab );_gcdeb ._abaa =_eafc ;_gcdeb ._feea =_ffgf ;_gcdeb ._bfff =_aeed ;}else {_ecbf :=&structElement {};_ecbf .parseStructElement (_ffebd );
_gcabc =append (_gcabc ,*_ecbf );};_eafc =-1;};_gcdeb ._cced =_gcabc ;};};func (_cgecb *wordBag )depthRange (_aggg ,_bgfe int )[]int {var _cdg []int ;for _fbbcc :=range _cgecb ._ggeff {if _aggg <=_fbbcc &&_fbbcc <=_bgfe {_cdg =append (_cdg ,_fbbcc );};
};if len (_cdg )==0{return nil ;};_dc .Ints (_cdg );return _cdg ;};type textPara struct{_ff .PdfRectangle ;_gbbdf _ff .PdfRectangle ;_gfef []*textLine ;_eeage *textTable ;_acfg bool ;_cgac bool ;_dfec *textPara ;_egbd *textPara ;_cbaa *textPara ;_acgf *textPara ;
_degaga []list ;};const (_adcg =false ;_baec =false ;_gebgd =false ;_dbbea =false ;_fdgc =false ;_abab =false ;_babc =false ;_gegca =false ;_gdfg =false ;_bdfc =_gdfg &&true ;_fcabe =_bdfc &&false ;_dgaa =_gdfg &&true ;_cebg =false ;_fbde =_cebg &&false ;
_faad =_cebg &&true ;_aaeb =false ;_bdgfg =_aaeb &&false ;_dade =_aaeb &&false ;_babf =_aaeb &&true ;_dece =_aaeb &&false ;_ddag =_aaeb &&false ;);type list struct{_dcdbc []*textLine ;_ggcb string ;_ccebg []*list ;_gddaf string ;};type structTreeRoot struct{_ecdca []structElement ;
_cfgg string ;};func (_fdae rulingList )tidied (_abec string )rulingList {_ffga :=_fdae .removeDuplicates ();_ffga .log ("\u0075n\u0069\u0071\u0075\u0065\u0073");_cdadd :=_ffga .snapToGroups ();if _cdadd ==nil {return nil ;};_cdadd .sort ();if _aaeb {_b .Log .Info ("\u0074\u0069\u0064i\u0065\u0064\u003a\u0020\u0025\u0071\u0020\u0076\u0065\u0063\u0073\u003d\u0025\u0064\u0020\u0075\u006e\u0069\u0071\u0075\u0065\u0073\u003d\u0025\u0064\u0020\u0063\u006f\u0061l\u0065\u0073\u0063\u0065\u0064\u003d\u0025\u0064",_abec ,len (_fdae ),len (_ffga ),len (_cdadd ));
};_cdadd .log ("\u0063o\u0061\u006c\u0065\u0073\u0063\u0065d");return _cdadd ;};func (_dgag paraList )llyRange (_dggg []int ,_ggefd ,_afaf float64 )[]int {_efda :=len (_dgag );if _afaf < _dgag [_dggg [0]].Lly ||_ggefd > _dgag [_dggg [_efda -1]].Lly {return nil ;
};_cfeeb :=_dc .Search (_efda ,func (_dfbb int )bool {return _dgag [_dggg [_dfbb ]].Lly >=_ggefd });_bbeb :=_dc .Search (_efda ,func (_cadde int )bool {return _dgag [_dggg [_cadde ]].Lly > _afaf });return _dggg [_cfeeb :_bbeb ];};func _ebg (_feed []*textLine ,_dadee map[float64 ][]*textLine ,_ffgcb []float64 ,_gcda int ,_caca ,_becbf float64 )[]*list {_agec :=[]*list {};
_affa :=_gcda ;_gcda =_gcda +1;_cfbd :=_ffgcb [_affa ];_fcfe :=_dadee [_cfbd ];_cabf :=_beaab (_fcfe ,_becbf ,_caca );for _ffde ,_def :=range _cabf {var _fcbd float64 ;_efea :=[]*list {};_eece :=_def ._cdab ;_afdbb :=_becbf ;if _ffde < len (_cabf )-1{_afdbb =_cabf [_ffde +1]._cdab ;
};if _gcda < len (_ffgcb ){_efea =_ebg (_feed ,_dadee ,_ffgcb ,_gcda ,_eece ,_afdbb );};_fcbd =_afdbb ;if len (_efea )> 0{_cddb :=_efea [0];if len (_cddb ._dcdbc )> 0{_fcbd =_cddb ._dcdbc [0]._cdab ;};};_cafde :=[]*textLine {_def };_gfgcf :=_adbc (_def ,_feed ,_ffgcb ,_eece ,_fcbd );
_cafde =append (_cafde ,_gfgcf ...);_gagf :=_cgdd (_cafde ,"\u0062\u0075\u006c\u006c\u0065\u0074",_efea );_gagf ._gddaf =_afff (_cafde ,"");_agec =append (_agec ,_gagf );};return _agec ;};func (_ebdb *textTable )compositeRowCorridors ()map[int ][]float64 {_cecgf :=make (map[int ][]float64 ,_ebdb ._ecedc );
if _cebg {_b .Log .Info ("c\u006f\u006d\u0070\u006f\u0073\u0069t\u0065\u0052\u006f\u0077\u0043\u006f\u0072\u0072\u0069d\u006f\u0072\u0073:\u0020h\u003d\u0025\u0064",_ebdb ._ecedc );};for _gbeffad :=1;_gbeffad < _ebdb ._ecedc ;_gbeffad ++{var _cadgee []compositeCell ;
for _gfdbf :=0;_gfdbf < _ebdb ._edebd ;_gfdbf ++{if _bffaf ,_gfcd :=_ebdb ._cdafa [_dfdgd (_gfdbf ,_gbeffad )];_gfcd {_cadgee =append (_cadgee ,_bffaf );};};if len (_cadgee )==0{continue ;};_cfbee :=_eacc (_cadgee );_cecgf [_gbeffad ]=_cfbee ;if _cebg {_gf .Printf ("\u0020\u0020\u0020\u0025\u0032\u0064\u003a\u0020\u00256\u002e\u0032\u0066\u000a",_gbeffad ,_cfbee );
};};return _cecgf ;};func (_degag *structTreeRoot )buildList (_bgcf map[int ][]*textLine ,_acbe _fc .PdfObject )[]*list {if _degag ==nil {_b .Log .Debug ("\u0062\u0075\u0069\u006c\u0064\u004c\u0069\u0073\u0074\u003a\u0020t\u0072\u0065\u0065\u0052\u006f\u006f\u0074\u0020\u0069\u0073 \u006e\u0069\u006c");
return nil ;};var _bfbc *structElement ;_abcf :=[]structElement {};if len (_degag ._ecdca )==1{_aead :=_degag ._ecdca [0]._feea ;if _aead =="\u0044\u006f\u0063\u0075\u006d\u0065\u006e\u0074"||_aead =="\u0053\u0065\u0063\u0074"||_aead =="\u0050\u0061\u0072\u0074"||_aead =="\u0044\u0069\u0076"||_aead =="\u0041\u0072\u0074"{_bfbc =&_degag ._ecdca [0];
};}else {_bfbc =&structElement {_cced :_degag ._ecdca ,_feea :_degag ._cfgg };};if _bfbc ==nil {_b .Log .Debug ("\u0062\u0075\u0069\u006cd\u004c\u0069\u0073\u0074\u003a\u0020\u0074\u006f\u0070\u0045l\u0065m\u0065\u006e\u0074\u0020\u0069\u0073\u0020n\u0069\u006c");
return nil ;};for _ ,_ggbd :=range _bfbc ._cced {if _ggbd ._feea =="\u004c"{_abcf =append (_abcf ,_ggbd );}else if _ggbd ._feea =="\u0054\u0061\u0062l\u0065"{_dbdd :=_dfdc (_ggbd );_abcf =append (_abcf ,_dbdd ...);};};_abca :=_cafd (_abcf ,_bgcf ,_acbe );
var _dffb []*list ;for _ ,_fffag :=range _abca {_bbaf :=_dcef (_fffag );_dffb =append (_dffb ,_bbaf ...);};return _dffb ;};

// String returns a human readable description of `s`.
func (_afaeb intSet )String ()string {var _gadb []int ;for _caccg :=range _afaeb {if _afaeb .has (_caccg ){_gadb =append (_gadb ,_caccg );};};_dc .Ints (_gadb );return _gf .Sprintf ("\u0025\u002b\u0076",_gadb );};func (_abeg *textPara )text ()string {_geda :=new (_fd .Buffer );
_abeg .writeText (_geda );return _geda .String ();};func _cefa (_gfggd ,_acdcc _ff .PdfRectangle )bool {return _gfggd .Llx <=_acdcc .Llx &&_acdcc .Urx <=_gfggd .Urx &&_gfggd .Lly <=_acdcc .Lly &&_acdcc .Ury <=_gfggd .Ury ;};func _febc (_ffcaa _cd .Point )_cd .Matrix {return _cd .TranslationMatrix (_ffcaa .X ,_ffcaa .Y )};


// Text returns the extracted page text.
func (_dgde PageText )Text ()string {return _dgde ._agag };func _ggbfa (_abaf map[float64 ]gridTile )[]float64 {_cdcgc :=make ([]float64 ,0,len (_abaf ));for _gaadd :=range _abaf {_cdcgc =append (_cdcgc ,_gaadd );};_dc .Float64s (_cdcgc );return _cdcgc ;
};func _bcda (_bafe []*textMark ,_begcb _ff .PdfRectangle )string {_b .Log .Trace ("\u006d\u0061\u006b\u0065\u0053i\u006d\u0070\u006c\u0065\u0054\u0065\u0078\u0074\u003a\u0020\u0025\u0064\u0020e\u006c\u0065\u006d\u0065\u006e\u0074\u0073\u0020\u0070\u0061\u0067\u0065\u0053\u0069\u007a\u0065\u003d\u0025\u002e\u0032\u0066",len (_bafe ),_begcb );
_gegf :="";if len (_bafe )==0{return _gegf ;};_cdcfab :=_bdga (_bafe ,_begcb ,true );if len (_cdcfab )==0{return _gegf ;};_bcac :=0.0;_ebcb :=true ;_ffcg :="";for _ ,_aaaag :=range _cdcfab {_fdfff :=_aaaag ._gfbc ;if _fdfff > _gccd {_fdfff =_gccd ;};if (_aaaag ._efdea -_bcac > _abgac *_fdfff &&_bcac !=0.0)||(_bcac -_aaaag ._efdea > _fdfff *10){_eageb :=_dge ([]rune (_ffcg ));
_ffcg =_eageb ._eef ;_ffcg +="\u000a";_gegf +=_ffcg ;_ffcg ="";}else {if !_ebcb {_ffcg +="\u0020";};};_ffcg +=_aaaag ._dbefc ;_ebcb =false ;_bcac =_aaaag ._efdea ;};if _ffcg !=""{_gabd :=_dge ([]rune (_ffcg ));_ffcg =_gabd ._eef ;_ffcg +="\u000a";_gegf +=_ffcg ;
};return _gegf ;};func _agda (_eaaee ,_ccffed _cd .Point )bool {_aacdcb :=_g .Abs (_eaaee .X -_ccffed .X );_ceab :=_g .Abs (_eaaee .Y -_ccffed .Y );return _afag (_aacdcb ,_ceab );};func _dcfe (_cffa _ff .PdfRectangle )*ruling {return &ruling {_gefad :_ebgd ,_fgbd :_cffa .Urx ,_aceb :_cffa .Lly ,_gddcg :_cffa .Ury };
};func (_acab *wordBag )firstWord (_dacgc int )*textWord {return _acab ._ggeff [_dacgc ][0]};func (_cggf *wordBag )removeDuplicates (){if _dgaa {_b .Log .Info ("r\u0065m\u006f\u0076\u0065\u0044\u0075\u0070\u006c\u0069c\u0061\u0074\u0065\u0073: \u0025\u0071",_cggf .text ());
};for _ ,_aeab :=range _cggf .depthIndexes (){if len (_cggf ._ggeff [_aeab ])==0{continue ;};_gfbg :=_cggf ._ggeff [_aeab ][0];_ddfde :=_cgea *_gfbg ._gfbc ;_cabgg :=_gfbg ._efdea ;for _ ,_abfe :=range _cggf .depthBand (_cabgg ,_cabgg +_ddfde ){_cfdgb :=map[*textWord ]struct{}{};
_ffea :=_cggf ._ggeff [_abfe ];for _ ,_ffcga :=range _ffea {if _ ,_effd :=_cfdgb [_ffcga ];_effd {continue ;};for _ ,_gdfab :=range _ffea {if _ ,_efag :=_cfdgb [_gdfab ];_efag {continue ;};if _gdfab !=_ffcga &&_gdfab ._dbefc ==_ffcga ._dbefc &&_g .Abs (_gdfab .Llx -_ffcga .Llx )< _ddfde &&_g .Abs (_gdfab .Urx -_ffcga .Urx )< _ddfde &&_g .Abs (_gdfab .Lly -_ffcga .Lly )< _ddfde &&_g .Abs (_gdfab .Ury -_ffcga .Ury )< _ddfde {_cfdgb [_gdfab ]=struct{}{};
};};};if len (_cfdgb )> 0{_gbbaf :=0;for _ ,_fbfdg :=range _ffea {if _ ,_edcg :=_cfdgb [_fbfdg ];!_edcg {_ffea [_gbbaf ]=_fbfdg ;_gbbaf ++;};};_cggf ._ggeff [_abfe ]=_ffea [:len (_ffea )-len (_cfdgb )];if len (_cggf ._ggeff [_abfe ])==0{delete (_cggf ._ggeff ,_abfe );
};};};};};func (_cegda *textLine )toTextMarks (_ddgc *int )[]TextMark {var _fdfee []TextMark ;for _ ,_bfe :=range _cegda ._egbe {if _bfe ._fecgf {_fdfee =_abee (_fdfee ,_ddgc ,"\u0020");};_ccec :=_bfe .toTextMarks (_ddgc );_fdfee =append (_fdfee ,_ccec ...);
};return _fdfee ;};func (_eaae *shapesState )fill (_beaa *[]pathSection ){_cbbd :=pathSection {_adg :_eaae ._afgc ,Color :_eaae ._caddc .getFillColor ()};*_beaa =append (*_beaa ,_cbbd );if _aaeb {_fbfg :=_cbbd .bbox ();_gf .Printf ("\u0020 \u0020\u0020\u0046\u0049\u004c\u004c\u003a %\u0032\u0064\u0020\u0066\u0069\u006c\u006c\u0073\u0020\u0028\u0025\u0064\u0020\u006ee\u0077\u0029 \u0073\u0073\u003d%\u0073\u0020\u0063\u006f\u006c\u006f\u0072\u003d\u0025\u0033\u0076\u0020\u0025\u0036\u002e\u0032f\u003d\u00256.\u0032\u0066\u0078%\u0036\u002e\u0032\u0066\u000a",len (*_beaa ),len (_cbbd ._adg ),_eaae ,_cbbd .Color ,_fbfg ,_fbfg .Width (),_fbfg .Height ());
if _bdgfg {for _bafbb ,_faac :=range _cbbd ._adg {_gf .Printf ("\u0025\u0038\u0064\u003a\u0020\u0025\u0073\u000a",_bafbb ,_faac );if _bafbb ==10{break ;};};};};};type event struct{_cgccb float64 ;_cdcad bool ;_abgba int ;};func (_fcabf *textTable )subdivide ()*textTable {_fcabf .logComposite ("\u0073u\u0062\u0064\u0069\u0076\u0069\u0064e");
_beeed :=_fcabf .compositeRowCorridors ();_edfgb :=_fcabf .compositeColCorridors ();if _cebg {_b .Log .Info ("\u0073u\u0062\u0064i\u0076\u0069\u0064\u0065:\u000a\u0009\u0072o\u0077\u0043\u006f\u0072\u0072\u0069\u0064\u006f\u0072s=\u0025\u0073\u000a\t\u0063\u006fl\u0043\u006f\u0072\u0072\u0069\u0064o\u0072\u0073=\u0025\u0073",_gfff (_beeed ),_gfff (_edfgb ));
};if len (_beeed )==0||len (_edfgb )==0{return _fcabf ;};_fegc (_beeed );_fegc (_edfgb );if _cebg {_b .Log .Info ("\u0073\u0075\u0062\u0064\u0069\u0076\u0069\u0064\u0065\u0020\u0066\u0069\u0078\u0065\u0064\u003a\u000a\u0009r\u006f\u0077\u0043\u006f\u0072\u0072\u0069d\u006f\u0072\u0073\u003d\u0025\u0073\u000a\u0009\u0063\u006f\u006cC\u006f\u0072\u0072\u0069\u0064\u006f\u0072\u0073\u003d\u0025\u0073",_gfff (_beeed ),_gfff (_edfgb ));
};_gbdde ,_deebb :=_gfae (_fcabf ._ecedc ,_beeed );_cdbd ,_deba :=_gfae (_fcabf ._edebd ,_edfgb );_cgdf :=make (map[uint64 ]*textPara ,_deba *_deebb );_ddagd :=&textTable {PdfRectangle :_fcabf .PdfRectangle ,_fbgad :_fcabf ._fbgad ,_ecedc :_deebb ,_edebd :_deba ,_eafac :_cgdf };
if _cebg {_b .Log .Info ("\u0073\u0075b\u0064\u0069\u0076\u0069\u0064\u0065\u003a\u0020\u0063\u006f\u006d\u0070\u006f\u0073\u0069\u0074\u0065\u0020\u003d\u0020\u0025\u0064\u0020\u0078\u0020\u0025\u0064\u0020\u0063\u0065\u006c\u006c\u0073\u003d\u0020\u0025\u0064\u0020\u0078\u0020\u0025\u0064\u000a"+"\u0009\u0072\u006f\u0077\u0043\u006f\u0072\u0072\u0069\u0064\u006f\u0072s\u003d\u0025\u0073\u000a"+"\u0009\u0063\u006f\u006c\u0043\u006f\u0072\u0072\u0069\u0064\u006f\u0072s\u003d\u0025\u0073\u000a"+"\u0009\u0079\u004f\u0066\u0066\u0073\u0065\u0074\u0073=\u0025\u002b\u0076\u000a"+"\u0009\u0078\u004f\u0066\u0066\u0073\u0065\u0074\u0073\u003d\u0025\u002b\u0076",_fcabf ._edebd ,_fcabf ._ecedc ,_deba ,_deebb ,_gfff (_beeed ),_gfff (_edfgb ),_gbdde ,_cdbd );
};for _cgfdf :=0;_cgfdf < _fcabf ._ecedc ;_cgfdf ++{_ddaae :=_gbdde [_cgfdf ];for _dgdgf :=0;_dgdgf < _fcabf ._edebd ;_dgdgf ++{_bgcg :=_cdbd [_dgdgf ];if _cebg {_gf .Printf ("\u0025\u0036\u0064\u002c %\u0032\u0064\u003a\u0020\u0078\u0030\u003d\u0025\u0064\u0020\u0079\u0030\u003d\u0025d\u000a",_dgdgf ,_cgfdf ,_bgcg ,_ddaae );
};_gebba ,_ffbgaf :=_fcabf ._cdafa [_dfdgd (_dgdgf ,_cgfdf )];if !_ffbgaf {continue ;};_bcde :=_gebba .split (_beeed [_cgfdf ],_edfgb [_dgdgf ]);for _bdfbd :=0;_bdfbd < _bcde ._ecedc ;_bdfbd ++{for _fded :=0;_fded < _bcde ._edebd ;_fded ++{_gbfdb :=_bcde .get (_fded ,_bdfbd );
_ddagd .put (_bgcg +_fded ,_ddaae +_bdfbd ,_gbfdb );if _cebg {_gf .Printf ("\u0025\u0038\u0064\u002c\u0020\u0025\u0032\u0064\u003a\u0020\u0025\u0073\u000a",_bgcg +_fded ,_ddaae +_bdfbd ,_gbfdb );};};};};};return _ddagd ;};func (_eedd *textObject )nextLine (){_eedd .moveLP (0,-_eedd ._dedg ._bcca )};
func (_bgebe rulingList )bbox ()_ff .PdfRectangle {var _aafa _ff .PdfRectangle ;if len (_bgebe )==0{_b .Log .Error ("r\u0075\u006c\u0069\u006e\u0067\u004ci\u0073\u0074\u002e\u0062\u0062\u006f\u0078\u003a\u0020n\u006f\u0020\u0072u\u006ci\u006e\u0067\u0073");
return _ff .PdfRectangle {};};if _bgebe [0]._gefad ==_deca {_aafa .Llx ,_aafa .Urx =_bgebe .secMinMax ();_aafa .Lly ,_aafa .Ury =_bgebe .primMinMax ();}else {_aafa .Llx ,_aafa .Urx =_bgebe .primMinMax ();_aafa .Lly ,_aafa .Ury =_bgebe .secMinMax ();};return _aafa ;
};func (_bgfg *Extractor )extractPageText (_fggb string ,_eba *_ff .PdfPageResources ,_bdg _cd .Matrix ,_feeb int ,_fccc bool )(*PageText ,int ,int ,error ){_b .Log .Trace ("\u0065x\u0074\u0072\u0061\u0063t\u0050\u0061\u0067\u0065\u0054e\u0078t\u003a \u006c\u0065\u0076\u0065\u006c\u003d\u0025d",_feeb );
_bbgb :=&PageText {_cbeg :_bgfg ._adf ,_fcb :_bgfg ._ccg ,_efecb :_bgfg ._ac };_gdb :=_faec (_bgfg ._adf );var _cee stateStack ;_eede :=_gcb (_bgfg ,_eba ,_ef .GraphicsState {},&_gdb ,&_cee );_fcfg :=shapesState {_ecdc :_bdg ,_aeee :_cd .IdentityMatrix (),_caddc :_eede };
var _gcacb bool ;_ggbb :=-1;_fbgb :="";if _feeb > _aaadb {_bbed :=_gd .New ("\u0066\u006f\u0072\u006d s\u0074\u0061\u0063\u006b\u0020\u006f\u0076\u0065\u0072\u0066\u006c\u006f\u0077");_b .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a \u0065\u0078\u0074\u0072\u0061\u0063\u0074\u0050\u0061\u0067\u0065\u0054\u0065\u0078\u0074\u002e\u0020\u0072\u0065\u0063u\u0072\u0073\u0069\u006f\u006e\u0020\u006c\u0065\u0076\u0065\u006c\u003d\u0025\u0064 \u0065r\u0072\u003d\u0025\u0076",_feeb ,_bbed );
return _bbgb ,_gdb ._bbdc ,_gdb ._eeg ,_bbed ;};_gba :=_ef .NewContentStreamParser (_fggb );_fceg ,_gefag :=_gba .Parse ();if _gefag !=nil {_b .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020e\u0078\u0074\u0072a\u0063\u0074\u0050\u0061g\u0065\u0054\u0065\u0078\u0074\u0020\u0070\u0061\u0072\u0073\u0065\u0020\u0066\u0061\u0069\u006c\u0065\u0064\u002e\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_gefag );
return _bbgb ,_gdb ._bbdc ,_gdb ._eeg ,_gefag ;};_bbgb ._geeed =_fceg ;_gcca :=_ef .NewContentStreamProcessor (*_fceg );if _bgfg ._gea !=nil {_gcca .SetRelaxedMode (_bgfg ._gea .RelaxedMode );};_gcca .AddHandler (_ef .HandlerConditionEnumAllOperands ,"",func (_bde *_ef .ContentStreamOperation ,_bage _ef .GraphicsState ,_ege *_ff .PdfPageResources )error {_eac :=_bde .Operand ;
if _gebgd {_b .Log .Info ("\u0026&\u0026\u0020\u006f\u0070\u003d\u0025s",_bde );};switch _eac {case "\u0071":if _fdgc {_b .Log .Info ("\u0063\u0074\u006d\u003d\u0025\u0073",_fcfg ._aeee );};_cee .push (&_gdb );case "\u0051":if !_cee .empty (){_gdb =*_cee .pop ();
};_fcfg ._aeee =_bage .CTM ;if _fdgc {_b .Log .Info ("\u0063\u0074\u006d\u003d\u0025\u0073",_fcfg ._aeee );};case "\u0042\u0044\u0043":_bba ,_efeg :=_fc .GetDict (_bde .Params [1]);if !_efeg {_b .Log .Debug ("\u0045\u0052\u0052O\u0052\u003a\u0020\u0042D\u0043\u0020\u006f\u0070\u003d\u0025\u0073 \u0047\u0065\u0074\u0044\u0069\u0063\u0074\u0020\u0066\u0061\u0069\u006c\u0065\u0064",_bde );
return _gefag ;};_ccb :=_bba .Get ("\u004d\u0043\u0049\u0044");if _ccb !=nil {_ecee ,_geee :=_fc .GetIntVal (_ccb );if !_geee {_b .Log .Debug ("\u0045R\u0052\u004fR\u003a\u0020\u0042\u0044C\u0020\u006f\u0070=\u0025\u0073\u002e\u0020\u0042\u0061\u0064\u0020\u006eum\u0065\u0072\u0069c\u0061\u006c \u006f\u0062\u006a\u0065\u0063\u0074.\u0020\u006f=\u0025\u0073",_bde ,_ccb );
};_ggbb =_ecee ;}else {_ggbb =-1;};_dbg :=_bba .Get ("\u0041\u0063\u0074\u0075\u0061\u006c\u0054\u0065\u0078\u0074");if _dbg !=nil {_fbgb =_dbg .String ();};case "\u0045\u004d\u0043":_ggbb =-1;_fbgb ="";case "\u0042\u0054":if _gcacb {_b .Log .Debug ("\u0042\u0054\u0020\u0063\u0061\u006c\u006c\u0065\u0064\u0020\u0077\u0068\u0069\u006c\u0065 \u0069n\u0020\u0061\u0020\u0074\u0065\u0078\u0074\u0020\u006f\u0062\u006a\u0065\u0063\u0074");
_bbgb ._agbg =append (_bbgb ._agbg ,_eede ._geg ...);};_gcacb =true ;_bab :=_bage ;if _fccc {_bab =_ef .GraphicsState {};_bab .CTM =_fcfg ._aeee ;};_bab .CTM =_bdg .Mult (_bab .CTM );_eede =_gcb (_bgfg ,_ege ,_bab ,&_gdb ,&_cee );_fcfg ._caddc =_eede ;
case "\u0045\u0054":if !_gcacb {_b .Log .Debug ("\u0045\u0054\u0020ca\u006c\u006c\u0065\u0064\u0020\u006f\u0075\u0074\u0073i\u0064e\u0020o\u0066 \u0061\u0020\u0074\u0065\u0078\u0074\u0020\u006f\u0062\u006a\u0065\u0063\u0074");};_gcacb =false ;_bbgb ._agbg =append (_bbgb ._agbg ,_eede ._geg ...);
_eede .reset ();case "\u0054\u002a":_eede .nextLine ();case "\u0054\u0064":if _ccfd ,_fde :=_eede .checkOp (_bde ,2,true );!_ccfd {_b .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_fde );return _fde ;};_agc ,_caeg ,_gcfa :=_cceeg (_bde .Params );
if _gcfa !=nil {return _gcfa ;};_eede .moveText (_agc ,_caeg );case "\u0054\u0044":if _abdc ,_dfbf :=_eede .checkOp (_bde ,2,true );!_abdc {_b .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_dfbf );return _dfbf ;
};_ggef ,_bfca ,_ccde :=_cceeg (_bde .Params );if _ccde !=nil {_b .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_ccde );return _ccde ;};_eede .moveTextSetLeading (_ggef ,_bfca );case "\u0054\u006a":if _fdfe ,_gfce :=_eede .checkOp (_bde ,1,true );
!_fdfe {_b .Log .Debug ("\u0045\u0052\u0052\u004fR:\u0020\u0054\u006a\u0020\u006f\u0070\u003d\u0025\u0073\u0020\u0065\u0072\u0072\u003d%\u0076",_bde ,_gfce );return _gfce ;};_ecb :=_fc .TraceToDirectObject (_bde .Params [0]);_fdcd ,_fcab :=_fc .GetStringBytes (_ecb );
if !_fcab {_b .Log .Debug ("\u0045\u0052R\u004f\u0052\u003a\u0020T\u006a\u0020o\u0070\u003d\u0025\u0073\u0020\u0047\u0065\u0074S\u0074\u0072\u0069\u006e\u0067\u0042\u0079\u0074\u0065\u0073\u0020\u0066a\u0069\u006c\u0065\u0064",_bde );return _fc .ErrTypeError ;
};return _eede .showText (_ecb ,_fdcd ,_ggbb ,_fbgb );case "\u0054\u004a":if _fgbe ,_egff :=_eede .checkOp (_bde ,1,true );!_fgbe {_b .Log .Debug ("\u0045\u0052R\u004f\u0052\u003a \u0054\u004a\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_egff );return _egff ;
};_aegf ,_deaa :=_fc .GetArray (_bde .Params [0]);if !_deaa {_b .Log .Debug ("\u0045\u0052\u0052OR\u003a\u0020\u0054\u004a\u0020\u006f\u0070\u003d\u0025s\u0020G\u0065t\u0041r\u0072\u0061\u0079\u0056\u0061\u006c\u0020\u0066\u0061\u0069\u006c\u0065\u0064",_bde );
return _gefag ;};return _eede .showTextAdjusted (_aegf ,_ggbb ,_fbgb );case "\u0027":if _afb ,_ded :=_eede .checkOp (_bde ,1,true );!_afb {_b .Log .Debug ("\u0045R\u0052O\u0052\u003a\u0020\u0027\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_ded );return _ded ;
};_deg :=_fc .TraceToDirectObject (_bde .Params [0]);_fdfc ,_aecd :=_fc .GetStringBytes (_deg );if !_aecd {_b .Log .Debug ("\u0045\u0052RO\u0052\u003a\u0020'\u0020\u006f\u0070\u003d%s \u0047et\u0053\u0074\u0072\u0069\u006e\u0067\u0042yt\u0065\u0073\u0020\u0066\u0061\u0069\u006ce\u0064",_bde );
return _fc .ErrTypeError ;};_eede .nextLine ();return _eede .showText (_deg ,_fdfc ,_ggbb ,_fbgb );case "\u0022":if _dcca ,_fcgf :=_eede .checkOp (_bde ,3,true );!_dcca {_b .Log .Debug ("\u0045R\u0052O\u0052\u003a\u0020\u0022\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_fcgf );
return _fcgf ;};_dggc ,_fcec ,_ecd :=_cceeg (_bde .Params [:2]);if _ecd !=nil {return _ecd ;};_cbfa :=_fc .TraceToDirectObject (_bde .Params [2]);_bfcad ,_cgg :=_fc .GetStringBytes (_cbfa );if !_cgg {_b .Log .Debug ("\u0045\u0052RO\u0052\u003a\u0020\"\u0020\u006f\u0070\u003d%s \u0047et\u0053\u0074\u0072\u0069\u006e\u0067\u0042yt\u0065\u0073\u0020\u0066\u0061\u0069\u006ce\u0064",_bde );
return _fc .ErrTypeError ;};_eede .setCharSpacing (_dggc );_eede .setWordSpacing (_fcec );_eede .nextLine ();return _eede .showText (_cbfa ,_bfcad ,_ggbb ,_fbgb );case "\u0054\u004c":_fgad ,_ggade :=_bace (_bde );if _ggade !=nil {_b .Log .Debug ("\u0045\u0052R\u004f\u0052\u003a \u0054\u004c\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_ggade );
return _ggade ;};_eede .setTextLeading (_fgad );case "\u0054\u0063":_cffe ,_dbd :=_bace (_bde );if _dbd !=nil {_b .Log .Debug ("\u0045\u0052R\u004f\u0052\u003a \u0054\u0063\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_dbd );return _dbd ;};_eede .setCharSpacing (_cffe );
case "\u0054\u0066":if _aegb ,_cbca :=_eede .checkOp (_bde ,2,true );!_aegb {_b .Log .Debug ("\u0045\u0052R\u004f\u0052\u003a \u0054\u0066\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_cbca );return _cbca ;};_dega ,_efgb :=_fc .GetNameVal (_bde .Params [0]);
if !_efgb {_b .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a \u0054\u0066\u0020\u006f\u0070\u003d\u0025\u0073\u0020\u0047\u0065\u0074\u004ea\u006d\u0065\u0056\u0061\u006c\u0020\u0066a\u0069\u006c\u0065\u0064",_bde );return _fc .ErrTypeError ;};_bff ,_bdgg :=_fc .GetNumberAsFloat (_bde .Params [1]);
if !_efgb {_b .Log .Debug ("\u0045\u0052\u0052O\u0052\u003a\u0020\u0054\u0066\u0020\u006f\u0070\u003d\u0025\u0073\u0020\u0047\u0065\u0074\u0046\u006c\u006f\u0061\u0074\u0056\u0061\u006c\u0020\u0066\u0061\u0069\u006c\u0065d\u002e\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_bde ,_bdgg );
return _bdgg ;};_bdgg =_eede .setFont (_dega ,_bff );_eede ._cebf =_gd .Is (_bdgg ,_fc .ErrNotSupported );if _bdgg !=nil &&!_eede ._cebf {return _bdgg ;};case "\u0054\u006d":if _fcfbg ,_aabf :=_eede .checkOp (_bde ,6,true );!_fcfbg {_b .Log .Debug ("\u0045\u0052R\u004f\u0052\u003a \u0054\u006d\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_aabf );
return _aabf ;};_ddab ,_cba :=_fc .GetNumbersAsFloat (_bde .Params );if _cba !=nil {_b .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_cba );return _cba ;};_eede .setTextMatrix (_ddab );case "\u0054\u0072":if _feca ,_dgbc :=_eede .checkOp (_bde ,1,true );
!_feca {_b .Log .Debug ("\u0045\u0052R\u004f\u0052\u003a \u0054\u0072\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_dgbc );return _dgbc ;};_fbgd ,_fef :=_fc .GetIntVal (_bde .Params [0]);if !_fef {_b .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0054\u0072\u0020\u006f\u0070\u003d\u0025\u0073 \u0047e\u0074\u0049\u006e\u0074\u0056\u0061\u006c\u0020\u0066\u0061\u0069\u006c\u0065\u0064",_bde );
return _fc .ErrTypeError ;};_eede .setTextRenderMode (_fbgd );case "\u0054\u0073":if _bbgc ,_cdfb :=_eede .checkOp (_bde ,1,true );!_bbgc {_b .Log .Debug ("\u0045\u0052R\u004f\u0052\u003a \u0054\u0073\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_cdfb );
return _cdfb ;};_fgaf ,_dddf :=_fc .GetNumberAsFloat (_bde .Params [0]);if _dddf !=nil {_b .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_dddf );return _dddf ;};_eede .setTextRise (_fgaf );case "\u0054\u0077":if _abfd ,_dadf :=_eede .checkOp (_bde ,1,true );
!_abfd {_b .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_dadf );return _dadf ;};_gfgc ,_ebc :=_fc .GetNumberAsFloat (_bde .Params [0]);if _ebc !=nil {_b .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_ebc );
return _ebc ;};_eede .setWordSpacing (_gfgc );case "\u0054\u007a":if _gcfaf ,_bcfa :=_eede .checkOp (_bde ,1,true );!_gcfaf {_b .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_bcfa );return _bcfa ;};_ddb ,_dfgd :=_fc .GetNumberAsFloat (_bde .Params [0]);
if _dfgd !=nil {_b .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_dfgd );return _dfgd ;};_eede .setHorizScaling (_ddb );case "\u0063\u006d":if !_fccc {_fcfg ._aeee =_bage .CTM ;};if _fcfg ._aeee .Singular (){_ceea :=_cd .IdentityMatrix ().Translate (_fcfg ._aeee .Translation ());
_b .Log .Debug ("S\u0069n\u0067\u0075\u006c\u0061\u0072\u0020\u0063\u0074m\u003d\u0025\u0073\u2192%s",_fcfg ._aeee ,_ceea );_fcfg ._aeee =_ceea ;};if _fdgc {_b .Log .Info ("\u0063\u0074\u006d\u003d\u0025\u0073",_fcfg ._aeee );};case "\u006d":if len (_bde .Params )!=2{_b .Log .Debug ("\u0057\u0041\u0052\u004e\u003a\u0020\u0065\u0072\u0072o\u0072\u0020\u0077\u0068\u0069\u006c\u0065\u0020\u0070\u0072\u006f\u0063\u0065\u0073\u0073\u0069\u006e\u0067\u0020\u0060\u006d\u0060\u0020o\u0070\u0065r\u0061\u0074o\u0072\u003a\u0020\u0025\u0076\u002e\u0020\u004f\u0075\u0074\u0070\u0075\u0074 m\u0061\u0079\u0020\u0062\u0065\u0020\u0069\u006e\u0063o\u0072\u0072\u0065\u0063\u0074\u002e",_dac );
return nil ;};_fece ,_dcd :=_fc .GetNumbersAsFloat (_bde .Params );if _dcd !=nil {return _dcd ;};_fcfg .moveTo (_fece [0],_fece [1]);case "\u006c":if len (_bde .Params )!=2{_b .Log .Debug ("\u0057\u0041\u0052\u004e\u003a\u0020\u0065\u0072\u0072o\u0072\u0020\u0077\u0068\u0069\u006c\u0065\u0020\u0070\u0072\u006f\u0063\u0065\u0073\u0073\u0069\u006e\u0067\u0020\u0060\u006c\u0060\u0020o\u0070\u0065r\u0061\u0074o\u0072\u003a\u0020\u0025\u0076\u002e\u0020\u004f\u0075\u0074\u0070\u0075\u0074 m\u0061\u0079\u0020\u0062\u0065\u0020\u0069\u006e\u0063o\u0072\u0072\u0065\u0063\u0074\u002e",_dac );
return nil ;};_fae ,_dbbe :=_fc .GetNumbersAsFloat (_bde .Params );if _dbbe !=nil {return _dbbe ;};_fcfg .lineTo (_fae [0],_fae [1]);case "\u0063":if len (_bde .Params )!=6{return _dac ;};_agb ,_deec :=_fc .GetNumbersAsFloat (_bde .Params );if _deec !=nil {return _deec ;
};_b .Log .Debug ("\u0043u\u0062\u0069\u0063\u0020b\u0065\u007a\u0069\u0065\u0072 \u0070a\u0072a\u006d\u0073\u003a\u0020\u0025\u002e\u0032f",_agb );_fcfg .cubicTo (_agb [0],_agb [1],_agb [2],_agb [3],_agb [4],_agb [5]);case "\u0076","\u0079":if len (_bde .Params )!=4{return _dac ;
};_cfee ,_afae :=_fc .GetNumbersAsFloat (_bde .Params );if _afae !=nil {return _afae ;};_b .Log .Debug ("\u0043u\u0062\u0069\u0063\u0020b\u0065\u007a\u0069\u0065\u0072 \u0070a\u0072a\u006d\u0073\u003a\u0020\u0025\u002e\u0032f",_cfee );_fcfg .quadraticTo (_cfee [0],_cfee [1],_cfee [2],_cfee [3]);
case "\u0068":_fcfg .closePath ();case "\u0072\u0065":if len (_bde .Params )!=4{return _dac ;};_bgcd ,_eface :=_fc .GetNumbersAsFloat (_bde .Params );if _eface !=nil {return _eface ;};_fcfg .drawRectangle (_bgcd [0],_bgcd [1],_bgcd [2],_bgcd [3]);_fcfg .closePath ();
case "\u0053":_fcfg .stroke (&_bbgb ._aggf );_fcfg .clearPath ();case "\u0073":_fcfg .closePath ();_fcfg .stroke (&_bbgb ._aggf );_fcfg .clearPath ();case "\u0046":_fcfg .fill (&_bbgb ._deed );_fcfg .clearPath ();case "\u0066","\u0066\u002a":_fcfg .closePath ();
_fcfg .fill (&_bbgb ._deed );_fcfg .clearPath ();case "\u0042","\u0042\u002a":_fcfg .fill (&_bbgb ._deed );_fcfg .stroke (&_bbgb ._aggf );_fcfg .clearPath ();case "\u0062","\u0062\u002a":_fcfg .closePath ();_fcfg .fill (&_bbgb ._deed );_fcfg .stroke (&_bbgb ._aggf );
_fcfg .clearPath ();case "\u006e":_fcfg .clearPath ();case "\u0044\u006f":if len (_bde .Params )==0{_b .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0065\u0078\u0070\u0065\u0063\u0074\u0065\u0064\u0020\u0058\u004fbj\u0065c\u0074\u0020\u006e\u0061\u006d\u0065\u0020\u006f\u0070\u0065\u0072\u0061n\u0064\u0020\u0066\u006f\u0072\u0020\u0044\u006f\u0020\u006f\u0070\u0065\u0072\u0061\u0074\u006f\u0072.\u0020\u0047\u006f\u0074\u0020\u0025\u002b\u0076\u002e",_bde .Params );
return _fc .ErrRangeError ;};_ccbc ,_gff :=_fc .GetName (_bde .Params [0]);if !_gff {_b .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0069\u006e\u0076\u0061l\u0069\u0064\u0020\u0044\u006f\u0020\u006f\u0070e\u0072a\u0074\u006f\u0072\u0020\u0058\u004f\u0062\u006a\u0065\u0063\u0074\u0020\u006e\u0061\u006d\u0065\u0020\u006fp\u0065\u0072\u0061\u006e\u0064\u003a\u0020\u0025\u002b\u0076\u002e",_bde .Params [0]);
return _fc .ErrTypeError ;};_ ,_dcaa :=_ege .GetXObjectByName (*_ccbc );if _dcaa !=_ff .XObjectTypeForm {break ;};_fecc ,_gff :=_bgfg ._gfdg [_ccbc .String ()];if !_gff {_gab ,_eebb :=_ege .GetXObjectFormByName (*_ccbc );if _eebb !=nil {_b .Log .Debug ("\u0045R\u0052\u004f\u0052\u003a\u0020\u0025v",_eebb );
return _eebb ;};_ccdb ,_eebb :=_gab .GetContentStream ();if _eebb !=nil {_b .Log .Debug ("\u0045R\u0052\u004f\u0052\u003a\u0020\u0025v",_eebb );return _eebb ;};_dbcf :=_gab .Resources ;if _dbcf ==nil {_dbcf =_ege ;};_acgc :=_bage .CTM ;if _bfbd ,_dae :=_fc .GetArray (_gab .Matrix );
_dae {_abdd ,_fdge :=_bfbd .GetAsFloat64Slice ();if _fdge !=nil {return _fdge ;};if len (_abdd )!=6{return _dac ;};_befd :=_cd .NewMatrix (_abdd [0],_abdd [1],_abdd [2],_abdd [3],_abdd [4],_abdd [5]);_acgc =_bage .CTM .Mult (_befd );};_acgab ,_fdbc ,_eeae ,_eebb :=_bgfg .extractPageText (string (_ccdb ),_dbcf ,_bdg .Mult (_acgc ),_feeb +1,false );
if _eebb !=nil {_b .Log .Debug ("\u0045R\u0052\u004f\u0052\u003a\u0020\u0025v",_eebb );return _eebb ;};_fecc =textResult {*_acgab ,_fdbc ,_eeae };_bgfg ._gfdg [_ccbc .String ()]=_fecc ;};_fcfg ._aeee =_bage .CTM ;if _fdgc {_b .Log .Info ("\u0063\u0074\u006d\u003d\u0025\u0073",_fcfg ._aeee );
};_bbgb ._agbg =append (_bbgb ._agbg ,_fecc ._cadg ._agbg ...);_bbgb ._aggf =append (_bbgb ._aggf ,_fecc ._cadg ._aggf ...);_bbgb ._deed =append (_bbgb ._deed ,_fecc ._cadg ._deed ...);_gdb ._bbdc +=_fecc ._edg ;_gdb ._eeg +=_fecc ._gbcd ;case "\u0072\u0067","\u0067","\u006b","\u0063\u0073","\u0073\u0063","\u0073\u0063\u006e":_eede ._cbec .ColorspaceNonStroking =_bage .ColorspaceNonStroking ;
_eede ._cbec .ColorNonStroking =_bage .ColorNonStroking ;case "\u0052\u0047","\u0047","\u004b","\u0043\u0053","\u0053\u0043","\u0053\u0043\u004e":_eede ._cbec .ColorspaceStroking =_bage .ColorspaceStroking ;_eede ._cbec .ColorStroking =_bage .ColorStroking ;
};return nil ;});_gefag =_gcca .Process (_eba );if _bgfg ._gea !=nil &&_bgfg ._gea .IncludeAnnotations &&!_fccc {for _ ,_fbebc :=range _bgfg ._fab {_edde ,_gcaf :=_fc .GetDict (_fbebc .AP );if !_gcaf {continue ;};_afaee ,_gcaf :=_edde .Get ("\u004e").(*_fc .PdfObjectStream );
if !_gcaf {continue ;};_afd ,_cfa :=_fc .DecodeStream (_afaee );if _cfa !=nil {_b .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u006f\u006e\u0020\u0064\u0065c\u006f\u0064\u0065\u0020\u0073\u0074\u0072\u0065\u0061\u006d:\u0020\u0025\u0076",_cfa );continue ;
};_dbee :=_afaee .PdfObjectDictionary .Get ("\u0052e\u0073\u006f\u0075\u0072\u0063\u0065s");_cga ,_cfa :=_ff .NewPdfPageResourcesFromDict (_dbee .(*_fc .PdfObjectDictionary ));if _cfa !=nil {_b .Log .Debug ("\u0045\u0072\u0072\u006f\u0072 \u006f\u006e\u0020\u0067\u0065\u0074\u0074\u0069\u006e\u0067\u0020\u0061\u006en\u006f\u0074\u0061\u0074\u0069\u006f\u006e\u0020\u0072\u0065\u0073\u006f\u0075\u0072\u0063\u0065\u0073\u003a\u0020\u0025\u0076",_cfa );
continue ;};_bae :=_cd .IdentityMatrix ();_bgab ,_gcaf :=_afaee .PdfObjectDictionary .Get ("\u004d\u0061\u0074\u0072\u0069\u0078").(*_fc .PdfObjectArray );if _gcaf {_eaef ,_feb :=_bgab .GetAsFloat64Slice ();if _feb !=nil {_b .Log .Debug ("\u0045\u0072\u0072or\u0020\u006f\u006e\u0020\u0067\u0065\u0074\u0074\u0069n\u0067 \u0066l\u006fa\u0074\u0036\u0034\u0020\u0073\u006c\u0069\u0063\u0065\u003a\u0020\u0025\u0076",_feb );
continue ;};if len (_eaef )!=6{_b .Log .Debug ("I\u006e\u0076\u0061\u006c\u0069\u0064 \u006d\u0061\u0074\u0072\u0069\u0078\u0020\u0073\u006ci\u0063\u0065\u0020l\u0065n\u0067\u0074\u0068");continue ;};_bae =_cd .NewMatrix (_eaef [0],_eaef [1],_eaef [2],_eaef [3],_eaef [4],_eaef [5]);
};_ebag ,_gcaf :=_bgfg ._eea [_afaee .String ()];if !_gcaf {_gbc ,_cgf ,_cacb ,_efec :=_bgfg .extractPageText (string (_afd ),_cga ,_bae ,_feeb +1,true );if _efec !=nil {_b .Log .Debug ("\u0045\u0052R\u004f\u0052\u0020\u0065x\u0074\u0072a\u0063\u0074\u0069\u006e\u0067\u0020\u0061\u006en\u006f\u0074\u0061\u0074\u0069\u006f\u006e\u0020\u0074\u0065\u0078\u0074s\u003a\u0020\u0025\u0076",_efec );
continue ;};_ebag =textResult {*_gbc ,_cgf ,_cacb };_bgfg ._eea [_afaee .String ()]=_ebag ;};_bbgb ._agbg =append (_bbgb ._agbg ,_ebag ._cadg ._agbg ...);_bbgb ._aggf =append (_bbgb ._aggf ,_ebag ._cadg ._aggf ...);_bbgb ._deed =append (_bbgb ._deed ,_ebag ._cadg ._deed ...);
_gdb ._bbdc +=_ebag ._edg ;_gdb ._eeg +=_ebag ._gbcd ;};};return _bbgb ,_gdb ._bbdc ,_gdb ._eeg ,_gefag ;};type intSet map[int ]struct{};const (RenderModeStroke RenderMode =1<<iota ;RenderModeFill ;RenderModeClip ;);var (_febbg =map[rune ]string {0x0060:"\u0300",0x02CB:"\u0300",0x0027:"\u0301",0x00B4:"\u0301",0x02B9:"\u0301",0x02CA:"\u0301",0x005E:"\u0302",0x02C6:"\u0302",0x007E:"\u0303",0x02DC:"\u0303",0x00AF:"\u0304",0x02C9:"\u0304",0x02D8:"\u0306",0x02D9:"\u0307",0x00A8:"\u0308",0x00B0:"\u030a",0x02DA:"\u030a",0x02BA:"\u030b",0x02DD:"\u030b",0x02C7:"\u030c",0x02C8:"\u030d",0x0022:"\u030e",0x02BB:"\u0312",0x02BC:"\u0313",0x0486:"\u0313",0x055A:"\u0313",0x02BD:"\u0314",0x0485:"\u0314",0x0559:"\u0314",0x02D4:"\u031d",0x02D5:"\u031e",0x02D6:"\u031f",0x02D7:"\u0320",0x02B2:"\u0321",0x00B8:"\u0327",0x02CC:"\u0329",0x02B7:"\u032b",0x02CD:"\u0331",0x005F:"\u0332",0x204E:"\u0359"};
);var _aa =[]string {"\u0041\u004e","\u0041\u004e","\u0041\u004e","\u0041\u004e","\u0041\u004e","\u0041\u004e","\u004f\u004e","\u004f\u004e","\u0041\u004c","\u0045\u0054","\u0045\u0054","\u0041\u004c","\u0043\u0053","\u0041\u004c","\u004f\u004e","\u004f\u004e","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u0041\u004c","\u0041\u004c","","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u0041\u004e","\u0041\u004e","\u0041\u004e","\u0041\u004e","\u0041\u004e","\u0041\u004e","\u0041\u004e","\u0041\u004e","\u0041\u004e","\u0041\u004e","\u0045\u0054","\u0041\u004e","\u0041\u004e","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u004e\u0053\u004d","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u0041\u004e","\u004f\u004e","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u0041\u004c","\u0041\u004c","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004f\u004e","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u0041\u004c","\u0041\u004c","\u0045\u004e","\u0045\u004e","\u0045\u004e","\u0045\u004e","\u0045\u004e","\u0045\u004e","\u0045\u004e","\u0045\u004e","\u0045\u004e","\u0045\u004e","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c"};
func (_aaafa rulingList )mergePrimary ()float64 {_gbabc :=_aaafa [0]._fgbd ;for _ ,_bfafg :=range _aaafa [1:]{_gbabc +=_bfafg ._fgbd ;};return _gbabc /float64 (len (_aaafa ));};var _bbfcf =map[rulingKind ]string {_ccebbf :"\u006e\u006f\u006e\u0065",_deca :"\u0068\u006f\u0072\u0069\u007a\u006f\u006e\u0074\u0061\u006c",_ebgd :"\u0076\u0065\u0072\u0074\u0069\u0063\u0061\u006c"};


// BidiText represents a bidi text organized in its visual order
// with base direction of the text.
type BidiText struct{_eef string ;_bgd string ;};func _bagfe (_feg *paraList )map[int ][]*textLine {_fgbb :=map[int ][]*textLine {};for _ ,_gcdc :=range *_feg {for _ ,_ggfc :=range _gcdc ._gfef {if !_gebc (_ggfc ){_b .Log .Debug ("g\u0072\u006f\u0075p\u004c\u0069\u006e\u0065\u0073\u003a\u0020\u0054\u0068\u0065\u0020\u0074\u0065\u0078\u0074\u0020\u006c\u0069\u006e\u0065\u0020\u0063\u006f\u006e\u0074a\u0069\u006e\u0073 \u006d\u006f\u0072\u0065\u0020\u0074\u0068\u0061\u006e\u0020\u006f\u006e\u0065 \u006d\u0063\u0069\u0064 \u006e\u0075\u006d\u0062e\u0072\u002e\u0020\u0049\u0074\u0020\u0073\u0068\u006f\u0075\u006c\u0064\u0020\u0062\u0065\u0020\u0073p\u006c\u0069\u0074\u002e");
continue ;};_gfcbc :=_ggfc ._egbe [0]._eacb [0]._dcaed ;_fgbb [_gfcbc ]=append (_fgbb [_gfcbc ],_ggfc );};if _gcdc ._eeage !=nil {_cccf :=_gcdc ._eeage ._eafac ;for _ ,_bgbac :=range _cccf {for _ ,_bebfa :=range _bgbac ._gfef {if !_gebc (_bebfa ){_b .Log .Debug ("g\u0072\u006f\u0075p\u004c\u0069\u006e\u0065\u0073\u003a\u0020\u0054\u0068\u0065\u0020\u0074\u0065\u0078\u0074\u0020\u006c\u0069\u006e\u0065\u0020\u0063\u006f\u006e\u0074a\u0069\u006e\u0073 \u006d\u006f\u0072\u0065\u0020\u0074\u0068\u0061\u006e\u0020\u006f\u006e\u0065 \u006d\u0063\u0069\u0064 \u006e\u0075\u006d\u0062e\u0072\u002e\u0020\u0049\u0074\u0020\u0073\u0068\u006f\u0075\u006c\u0064\u0020\u0062\u0065\u0020\u0073p\u006c\u0069\u0074\u002e");
continue ;};_bdbbg :=_bebfa ._egbe [0]._eacb [0]._dcaed ;_fgbb [_bdbbg ]=append (_fgbb [_bdbbg ],_bebfa );};};};};return _fgbb ;};func _gbbd (_egc *TextMarkArray ,_adfd int ,_fag int )int {_adc :=_egc .Elements ();_dde :=_adfd -1;_eade :=_adfd +1;_geed :=-1;
if _dde >=0{_eadc :=_adc [_dde ];_afa :=_eadc .ObjString ;_cec :=len (_afa );_bge :=_eadc .Index ;if _bge +1< _cec {return _dde ;};};if _eade < len (_adc ){_adag :=_adc [_eade ];_aagd :=_adag .ObjString ;if _aagd [0]!=_adag .Text {return _eade ;};};if _geed ==-1&&_adc [_adfd ].Text =="\u0020"{return _dde ;
};return _geed ;};type textLine struct{_ff .PdfRectangle ;_cdab float64 ;_egbe []*textWord ;_dcdbf float64 ;};func (_dbecd paraList )list ()[]*list {var _adee []*textLine ;var _fbaa []*textLine ;for _ ,_dddg :=range _dbecd {_ccea :=_dddg .getListLines ();
_adee =append (_adee ,_ccea ...);_fbaa =append (_fbaa ,_dddg ._gfef ...);};_bbffe :=_cccg (_adee );_beff :=_efgbb (_fbaa ,_bbffe );return _beff ;};func _bcc (_fffc []*TextMarkArray ,_fga ,_gaa string )(string ,error ){_eab :=0;for _ ,_baca :=range _fffc {_aaae :=_baca ._egee [0].DirectObject ;
if _aaae ==nil {continue ;};_faa :=_aaae .String ();if len (_faa )> 1{_abb :=_acga (_baca ,&_fga ,&_eab ,_gaa );if _abb !=nil {return _fga ,_abb ;};}else if len (_faa )==1{_cca :=_cdcf (_baca ,&_fga ,&_eab ,_gaa );if _cca !=nil {return _fga ,_cca ;};};
};return _fga ,nil ;};func (_bedb *textObject )getFontDict (_aegd string )(_dcfa _fc .PdfObject ,_fccf error ){_faaef :=_bedb ._bfbf ;if _faaef ==nil {_b .Log .Debug ("g\u0065\u0074\u0046\u006f\u006e\u0074D\u0069\u0063\u0074\u002e\u0020\u004eo\u0020\u0072\u0065\u0073\u006f\u0075\u0072c\u0065\u0073\u002e\u0020\u006e\u0061\u006d\u0065\u003d\u0025#\u0071",_aegd );
return nil ,nil ;};_dcfa ,_eadgf :=_faaef .GetFontByName (_fc .PdfObjectName (_aegd ));if !_eadgf {_b .Log .Debug ("\u0045R\u0052\u004fR\u003a\u0020\u0067\u0065t\u0046\u006f\u006et\u0044\u0069\u0063\u0074\u003a\u0020\u0046\u006f\u006et \u006e\u006f\u0074 \u0066\u006fu\u006e\u0064\u003a\u0020\u006e\u0061m\u0065\u003d%\u0023\u0071",_aegd );
return nil ,_gd .New ("f\u006f\u006e\u0074\u0020no\u0074 \u0069\u006e\u0020\u0072\u0065s\u006f\u0075\u0072\u0063\u0065\u0073");};return _dcfa ,nil ;};type lineRuling struct{_ddaeg rulingKind ;_ffcd markKind ;_cf .Color ;_dabfc ,_cfacg _cd .Point ;};func _geef (_ebagf *list ,_bgdaf *string )string {_fgff :=_ca .Split (_ebagf ._gddaf ,"\u000a");
_gagc :=&_ca .Builder {};for _ ,_gaab :=range _fgff {if _gaab !=""{_gagc .WriteString (*_bgdaf );_gagc .WriteString (_gaab );_gagc .WriteString ("\u000a");};};return _gagc .String ();};func (_baabd rulingList )toGrids ()[]rulingList {if _aaeb {_b .Log .Info ("t\u006f\u0047\u0072\u0069\u0064\u0073\u003a\u0020\u0025\u0073",_baabd );
};_cebfd :=_baabd .intersections ();if _aaeb {_b .Log .Info ("\u0074\u006f\u0047r\u0069\u0064\u0073\u003a \u0076\u0065\u0063\u0073\u003d\u0025\u0064 \u0069\u006e\u0074\u0065\u0072\u0073\u0065\u0063\u0074\u0073\u003d\u0025\u0064\u0020",len (_baabd ),len (_cebfd ));
for _ ,_bcdb :=range _egdc (_cebfd ){_gf .Printf ("\u00254\u0064\u003a\u0020\u0025\u002b\u0076\n",_bcdb ,_cebfd [_bcdb ]);};};_ccgf :=make (map[int ]intSet ,len (_baabd ));for _eebf :=range _baabd {_cbfd :=_baabd .connections (_cebfd ,_eebf );if len (_cbfd )> 0{_ccgf [_eebf ]=_cbfd ;
};};if _aaeb {_b .Log .Info ("t\u006fG\u0072\u0069\u0064\u0073\u003a\u0020\u0063\u006fn\u006e\u0065\u0063\u0074s=\u0025\u0064",len (_ccgf ));for _ ,_fecef :=range _egdc (_ccgf ){_gf .Printf ("\u00254\u0064\u003a\u0020\u0025\u002b\u0076\n",_fecef ,_ccgf [_fecef ]);
};};_ggaef :=_aagfb (len (_baabd ),func (_cbecb ,_cbcfb int )bool {_ccaab ,_gbbga :=len (_ccgf [_cbecb ]),len (_ccgf [_cbcfb ]);if _ccaab !=_gbbga {return _ccaab > _gbbga ;};return _baabd .comp (_cbecb ,_cbcfb );});if _aaeb {_b .Log .Info ("t\u006fG\u0072\u0069\u0064\u0073\u003a\u0020\u006f\u0072d\u0065\u0072\u0069\u006eg=\u0025\u0076",_ggaef );
};_fabdae :=[][]int {{_ggaef [0]}};_dcfbb :for _ ,_aabdf :=range _ggaef [1:]{for _dbef ,_bdde :=range _fabdae {for _ ,_bbac :=range _bdde {if _ccgf [_bbac ].has (_aabdf ){_fabdae [_dbef ]=append (_bdde ,_aabdf );continue _dcfbb ;};};};_fabdae =append (_fabdae ,[]int {_aabdf });
};if _aaeb {_b .Log .Info ("\u0074o\u0047r\u0069\u0064\u0073\u003a\u0020i\u0067\u0072i\u0064\u0073\u003d\u0025\u0076",_fabdae );};_dc .SliceStable (_fabdae ,func (_cafe ,_dffa int )bool {return len (_fabdae [_cafe ])> len (_fabdae [_dffa ])});for _ ,_cdga :=range _fabdae {_dc .Slice (_cdga ,func (_cafdb ,_cffb int )bool {return _baabd .comp (_cdga [_cafdb ],_cdga [_cffb ])});
};_ccbce :=make ([]rulingList ,len (_fabdae ));for _addbd ,_dcdc :=range _fabdae {_feaa :=make (rulingList ,len (_dcdc ));for _bfcge ,_fcad :=range _dcdc {_feaa [_bfcge ]=_baabd [_fcad ];};_ccbce [_addbd ]=_feaa ;};if _aaeb {_b .Log .Info ("\u0074o\u0047r\u0069\u0064\u0073\u003a\u0020g\u0072\u0069d\u0073\u003d\u0025\u002b\u0076",_ccbce );
};var _cbbgb []rulingList ;for _ ,_cecef :=range _ccbce {if _bege ,_ebfg :=_cecef .isActualGrid ();_ebfg {_cecef =_bege ;_cecef =_cecef .snapToGroups ();_cbbgb =append (_cbbgb ,_cecef );};};if _aaeb {_dgdbd ("t\u006fG\u0072\u0069\u0064\u0073\u003a\u0020\u0061\u0063t\u0075\u0061\u006c\u0047ri\u0064\u0073",_cbbgb );
_b .Log .Info ("\u0074\u006f\u0047\u0072\u0069\u0064\u0073\u003a\u0020\u0067\u0072\u0069\u0064\u0073\u003d%\u0064 \u0061\u0063\u0074\u0075\u0061\u006c\u0047\u0072\u0069\u0064\u0073\u003d\u0025\u0064",len (_ccbce ),len (_cbbgb ));};return _cbbgb ;};

// Text gets the extracted text contained in `l`.
func (_fffg *list )Text ()string {_bcbc :=&_ca .Builder {};_dcbf :="";_ccfdb (_fffg ,_bcbc ,&_dcbf );return _bcbc .String ();};func (_eedef paraList )sortReadingOrder (){_b .Log .Trace ("\u0073\u006fr\u0074\u0052\u0065\u0061\u0064i\u006e\u0067\u004f\u0072\u0064e\u0072\u003a\u0020\u0070\u0061\u0072\u0061\u0073\u003d\u0025\u0064\u0020\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u0078\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d",len (_eedef ));
if len (_eedef )<=1{return ;};_eedef .computeEBBoxes ();_dc .Slice (_eedef ,func (_ceeb ,_aabd int )bool {return _effg (_eedef [_ceeb ],_eedef [_aabd ])<=0});};func (_afbg *textObject )setCharSpacing (_ebedb float64 ){if _afbg ==nil {return ;};_afbg ._dedg ._cbdg =_ebedb ;
if _abab {_b .Log .Info ("\u0073\u0065t\u0043\u0068\u0061\u0072\u0053\u0070\u0061\u0063\u0069\u006e\u0067\u003a\u0020\u0025\u002e\u0032\u0066\u0020\u0073\u0074\u0061\u0074e=\u0025\u0073",_ebedb ,_afbg ._dedg .String ());};};func (_abdb *textObject )renderText (_ggc _fc .PdfObject ,_dfcb []byte ,_gbgd int ,_ccfag string )error {if _abdb ._cebf {_b .Log .Debug ("\u0072\u0065\u006e\u0064\u0065r\u0054\u0065\u0078\u0074\u003a\u0020\u0049\u006e\u0076\u0061\u006c\u0069\u0064 \u0066\u006f\u006e\u0074\u002e\u0020\u004e\u006f\u0074\u0020\u0070\u0072\u006f\u0063\u0065\u0073\u0073\u0069\u006e\u0067\u002e");
return nil ;};_cfbe :=_abdb .getCurrentFont ();_dcaf :=_cfbe .BytesToCharcodes (_dfcb );_eeff ,_eefae ,_gcae :=_cfbe .CharcodesToStrings (_dcaf ,_ccfag );if _gcae > 0{_b .Log .Debug ("\u0072\u0065nd\u0065\u0072\u0054e\u0078\u0074\u003a\u0020num\u0043ha\u0072\u0073\u003d\u0025\u0064\u0020\u006eum\u004d\u0069\u0073\u0073\u0065\u0073\u003d%\u0064",_eefae ,_gcae );
};_abdb ._dedg ._bbdc +=_eefae ;_abdb ._dedg ._eeg +=_gcae ;_cgedb :=_abdb ._dedg ;_edcf :=_cgedb ._dgd ;_fcff :=_cgedb ._cceb /100.0;_agfd :=_dbbcb ;if _cfbe .Subtype ()=="\u0054\u0079\u0070e\u0033"{_agfd =1;};_acb ,_becb :=_cfbe .GetRuneMetrics (' ');
if !_becb {_acb ,_becb =_cfbe .GetCharMetrics (32);};if !_becb {_acb ,_ =_ff .DefaultFont ().GetRuneMetrics (' ');};_agg :=_acb .Wx *_agfd ;_b .Log .Trace ("\u0073p\u0061\u0063e\u0057\u0069\u0064t\u0068\u003d\u0025\u002e\u0032\u0066\u0020t\u0065\u0078\u0074\u003d\u0025\u0071 \u0066\u006f\u006e\u0074\u003d\u0025\u0073\u0020\u0066\u006f\u006et\u0053\u0069\u007a\u0065\u003d\u0025\u002e\u0032\u0066",_agg ,_eeff ,_cfbe ,_edcf );
_gdcg :=_cd .NewMatrix (_edcf *_fcff ,0,0,_edcf ,0,_cgedb ._eagf );if _abab {_b .Log .Info ("\u0072\u0065\u006e\u0064\u0065\u0072T\u0065\u0078\u0074\u003a\u0020\u0025\u0064\u0020\u0063\u006f\u0064\u0065\u0073=\u0025\u002b\u0076\u0020\u0074\u0065\u0078t\u0073\u003d\u0025\u0071",len (_dcaf ),_dcaf ,_eeff );
};_b .Log .Trace ("\u0072\u0065\u006e\u0064\u0065\u0072T\u0065\u0078\u0074\u003a\u0020\u0025\u0064\u0020\u0063\u006f\u0064\u0065\u0073=\u0025\u002b\u0076\u0020\u0072\u0075\u006ee\u0073\u003d\u0025\u0071",len (_dcaf ),_dcaf ,len (_eeff ));_ffab :=_abdb .getFillColor ();
_cade :=_abdb .getStrokeColor ();for _dege ,_bda :=range _eeff {_ggca :=[]rune (_bda );if len (_ggca )==1&&_ggca [0]=='\x00'{continue ;};_ddfe :=_dcaf [_dege ];_ebdf :=_abdb ._cbec .CTM .Mult (_abdb ._dddff ).Mult (_gdcg );_efgbg :=0.0;if len (_ggca )==1&&_ggca [0]==32{_efgbg =_cgedb ._egcc ;
};_aadc ,_cfegd :=_cfbe .GetCharMetrics (_ddfe );if !_cfegd {_b .Log .Debug ("\u0045R\u0052\u004fR\u003a\u0020\u004e\u006f \u006d\u0065\u0074r\u0069\u0063\u0020\u0066\u006f\u0072\u0020\u0063\u006fde\u003d\u0025\u0064 \u0072\u003d0\u0078\u0025\u0030\u0034\u0078\u003d%\u002b\u0071 \u0025\u0073",_ddfe ,_ggca ,_ggca ,_cfbe );
return _gf .Errorf ("\u006e\u006f\u0020\u0063\u0068\u0061\u0072\u0020\u006d\u0065\u0074\u0072\u0069\u0063\u0073:\u0020f\u006f\u006e\u0074\u003d\u0025\u0073\u0020\u0063\u006f\u0064\u0065\u003d\u0025\u0064",_cfbe .String (),_ddfe );};_agca :=_cd .Point {X :_aadc .Wx *_agfd ,Y :_aadc .Wy *_agfd };
_dgc :=_cd .Point {X :(_agca .X *_edcf +_efgbg )*_fcff };_aba :=_cd .Point {X :(_agca .X *_edcf +_cgedb ._cbdg +_efgbg )*_fcff };if _abab {_b .Log .Info ("\u0074\u0066\u0073\u003d\u0025\u002e\u0032\u0066\u0020\u0074\u0063\u003d\u0025\u002e\u0032f\u0020t\u0077\u003d\u0025\u002e\u0032\u0066\u0020\u0074\u0068\u003d\u0025\u002e\u0032\u0066",_edcf ,_cgedb ._cbdg ,_cgedb ._egcc ,_fcff );
_b .Log .Info ("\u0064x\u002c\u0064\u0079\u003d%\u002e\u0033\u0066\u0020\u00740\u003d%\u002e3\u0066\u0020\u0074\u003d\u0025\u002e\u0033f",_agca ,_dgc ,_aba );};_gfgb :=_febc (_dgc );_dbde :=_febc (_aba );_dbgc :=_abdb ._cbec .CTM .Mult (_abdb ._dddff ).Mult (_gfgb );
if _dbbea {_b .Log .Info ("e\u006e\u0064\u003a\u000a\tC\u0054M\u003d\u0025\u0073\u000a\u0009 \u0074\u006d\u003d\u0025\u0073\u000a"+"\u0009\u0020t\u0064\u003d\u0025s\u0020\u0078\u006c\u0061\u0074\u003d\u0025\u0073\u000a"+"\u0009t\u0064\u0030\u003d\u0025s\u000a\u0009\u0020\u0020\u2192 \u0025s\u0020x\u006c\u0061\u0074\u003d\u0025\u0073",_abdb ._cbec .CTM ,_abdb ._dddff ,_dbde ,_cecf (_abdb ._cbec .CTM .Mult (_abdb ._dddff ).Mult (_dbde )),_gfgb ,_dbgc ,_cecf (_dbgc ));
};_aea ,_gebg :=_abdb .newTextMark (_ae .ExpandLigatures (_ggca ),_ebdf ,_cecf (_dbgc ),_g .Abs (_agg *_ebdf .ScalingFactorX ()),_cfbe ,_abdb ._dedg ._cbdg ,_ffab ,_cade ,_ggc ,_eeff ,_dege ,_gbgd );if !_gebg {_b .Log .Debug ("\u0054\u0065\u0078\u0074\u0020\u006d\u0061\u0072\u006b\u0020\u006f\u0075\u0074\u0073\u0069d\u0065 \u0070\u0061\u0067\u0065\u002e\u0020\u0053\u006b\u0069\u0070\u0070\u0069\u006e\u0067");
continue ;};if _cfbe ==nil {_b .Log .Debug ("\u0045R\u0052O\u0052\u003a\u0020\u004e\u006f\u0020\u0066\u006f\u006e\u0074\u002e");}else if _cfbe .Encoder ()==nil {_b .Log .Debug ("E\u0052\u0052\u004f\u0052\u003a\u0020N\u006f\u0020\u0065\u006e\u0063\u006f\u0064\u0069\u006eg\u002e\u0020\u0066o\u006et\u003d\u0025\u0073",_cfbe );
}else {if _abad ,_feaf :=_cfbe .Encoder ().CharcodeToRune (_ddfe );_feaf {_aea ._fedb =string (_abad );};};_b .Log .Trace ("i\u003d\u0025\u0064\u0020\u0063\u006fd\u0065\u003d\u0025\u0064\u0020\u006d\u0061\u0072\u006b=\u0025\u0073\u0020t\u0072m\u003d\u0025\u0073",_dege ,_ddfe ,_aea ,_ebdf );
_abdb ._geg =append (_abdb ._geg ,&_aea );_abdb ._dddff .Concat (_dbde );};return nil ;};func (_bbfa *PageText )getParagraphs ()paraList {var _bcff rulingList ;if _eda {_dedc :=_afcb (_bbfa ._aggf );_bcff =append (_bcff ,_dedc ...);};if _bgbc {_ddbf :=_fad (_bbfa ._deed );
_bcff =append (_bcff ,_ddbf ...);};_bcff ,_aadb :=_bcff .toTilings ();var _cfd paraList ;_gcbf :=len (_bbfa ._agbg );for _fggbg :=0;_fggbg < 360&&_gcbf > 0;_fggbg +=90{_cgcd :=make ([]*textMark ,0,len (_bbfa ._agbg )-_gcbf );for _ ,_cgfe :=range _bbfa ._agbg {if _cgfe ._eecb ==_fggbg {_cgcd =append (_cgcd ,_cgfe );
};};if len (_cgcd )> 0{_gdgd :=_cdbe (_cgcd ,_bbfa ._cbeg ,_bcff ,_aadb ,_bbfa ._abga ._cgca );_cfd =append (_cfd ,_gdgd ...);_gcbf -=len (_cgcd );};};return _cfd ;};func _edee (_dabf _ff .PdfRectangle ,_dafc []*textLine )*textPara {return &textPara {PdfRectangle :_dabf ,_gfef :_dafc };
};func (_dceb *stateStack )size ()int {return len (*_dceb )};func (_fcfa rulingList )removeDuplicates ()rulingList {if len (_fcfa )==0{return nil ;};_fcfa .sort ();_defg :=rulingList {_fcfa [0]};for _ ,_bbbbd :=range _fcfa [1:]{if _bbbbd .equals (_defg [len (_defg )-1]){continue ;
};_defg =append (_defg ,_bbbbd );};return _defg ;};func (_ggcbc gridTile )complete ()bool {return _ggcbc .numBorders ()==4};func (_fafg *wordBag )firstReadingIndex (_gefc int )int {_gbfe :=_fafg .firstWord (_gefc )._gfbc ;_eabf :=float64 (_gefc +1)*_edbb ;
_dfbe :=_eabf +_ddg *_gbfe ;_bgdb :=_gefc ;for _ ,_fcbg :=range _fafg .depthBand (_eabf ,_dfbe ){if _fgcc (_fafg .firstWord (_fcbg ),_fafg .firstWord (_bgdb ))< 0{_bgdb =_fcbg ;};};return _bgdb ;};func _bcce (_gcde []*wordBag )[]*wordBag {if len (_gcde )<=1{return _gcde ;
};if _gdfg {_b .Log .Info ("\u006d\u0065\u0072\u0067\u0065\u0057\u006f\u0072\u0064B\u0061\u0067\u0073\u003a");};_dc .Slice (_gcde ,func (_gedf ,_geeef int )bool {_becf ,_adgb :=_gcde [_gedf ],_gcde [_geeef ];_egad :=_becf .Width ()*_becf .Height ();_fbada :=_adgb .Width ()*_adgb .Height ();
if _egad !=_fbada {return _egad > _fbada ;};if _becf .Height ()!=_adgb .Height (){return _becf .Height ()> _adgb .Height ();};return _gedf < _geeef ;});var _ceaff []*wordBag ;_dccc :=make (intSet );for _dbfa :=0;_dbfa < len (_gcde );_dbfa ++{if _dccc .has (_dbfa ){continue ;
};_eddf :=_gcde [_dbfa ];for _gggd :=_dbfa +1;_gggd < len (_gcde );_gggd ++{if _dccc .has (_dbfa ){continue ;};_babd :=_gcde [_gggd ];_fddd :=_eddf .PdfRectangle ;_fddd .Llx -=_eddf ._dfcaf ;if _cefa (_fddd ,_babd .PdfRectangle ){_eddf .absorb (_babd );
_dccc .add (_gggd );};};_ceaff =append (_ceaff ,_eddf );};if len (_gcde )!=len (_ceaff )+len (_dccc ){_b .Log .Error ("\u006d\u0065\u0072ge\u0057\u006f\u0072\u0064\u0042\u0061\u0067\u0073\u003a \u0025d\u2192%\u0064 \u0061\u0062\u0073\u006f\u0072\u0062\u0065\u0064\u003d\u0025\u0064",len (_gcde ),len (_ceaff ),len (_dccc ));
};return _ceaff ;};func (_bcgb gridTiling )log (_dbaeg string ){if !_babf {return ;};_b .Log .Info ("\u0074i\u006ci\u006e\u0067\u003a\u0020\u0025d\u0020\u0078 \u0025\u0064\u0020\u0025\u0071",len (_bcgb ._gfbb ),len (_bcgb ._cefd ),_dbaeg );_gf .Printf ("\u0020\u0020\u0020l\u006c\u0078\u003d\u0025\u002e\u0032\u0066\u000a",_bcgb ._gfbb );
_gf .Printf ("\u0020\u0020\u0020l\u006c\u0079\u003d\u0025\u002e\u0032\u0066\u000a",_bcgb ._cefd );for _gfgag ,_gfgeg :=range _bcgb ._cefd {_bcgg ,_agcag :=_bcgb ._bbgf [_gfgeg ];if !_agcag {continue ;};_gf .Printf ("%\u0034\u0064\u003a\u0020\u0025\u0036\u002e\u0032\u0066\u000a",_gfgag ,_gfgeg );
for _ecede ,_ggfad :=range _bcgb ._gfbb {_afcd ,_gaee :=_bcgg [_ggfad ];if !_gaee {continue ;};_gf .Printf ("\u0025\u0038\u0064\u003a\u0020\u0025\u0073\u000a",_ecede ,_afcd .String ());};};};

// Box represents the bounding box of a given textMark on pdf page.
// This might be used for different kinds of high lighting after doing the search
type Box struct{BBox _ff .PdfRectangle ;};

// ToText returns the page text as a single string.
// Deprecated: This function is deprecated and will be removed in a future major version. Please use
// Text() instead.
func (_fdcda PageText )ToText ()string {return _fdcda .Text ()};func (_cfbc *textTable )depth ()float64 {_fbfc :=1e10;for _eafcd :=0;_eafcd < _cfbc ._edebd ;_eafcd ++{_gfab :=_cfbc .get (_eafcd ,0);if _gfab ==nil ||_gfab ._cgac {continue ;};_fbfc =_g .Min (_fbfc ,_gfab .depth ());
};return _fbfc ;};type imageExtractContext struct{_aga []ImageMark ;_abda int ;_efc int ;_bfc int ;_dad map[*_fc .PdfObjectStream ]*cachedImage ;_ffaf *ImageExtractOptions ;_fedf bool ;};func _egdga (_cdbf string )bool {for _ ,_dcgd :=range _cdbf {if !_bga .IsSpace (_dcgd ){return false ;
};};return true ;};func (_dcfbbf *textTable )log (_bgdc string ){if !_cebg {return ;};_b .Log .Info ("~\u007e\u007e\u0020\u0025\u0073\u003a \u0025\u0064\u0020\u0078\u0020\u0025d\u0020\u0067\u0072\u0069\u0064\u003d\u0025t\u000a\u0020\u0020\u0020\u0020\u0020\u0020\u0025\u0036\u002e2\u0066",_bgdc ,_dcfbbf ._edebd ,_dcfbbf ._ecedc ,_dcfbbf ._fbgad ,_dcfbbf .PdfRectangle );
for _eedg :=0;_eedg < _dcfbbf ._ecedc ;_eedg ++{for _gdcb :=0;_gdcb < _dcfbbf ._edebd ;_gdcb ++{_febebf :=_dcfbbf .get (_gdcb ,_eedg );if _febebf ==nil {continue ;};_gf .Printf ("%\u0034\u0064\u0020\u00252d\u003a \u0025\u0036\u002e\u0032\u0066 \u0025\u0071\u0020\u0025\u0064\u000a",_gdcb ,_eedg ,_febebf .PdfRectangle ,_aggbc (_febebf .text (),50),_d .RuneCountInString (_febebf .text ()));
};};};func _ecgc (_agee ,_aafge _cd .Point ,_ageba _cf .Color )(*ruling ,bool ){_afde :=lineRuling {_dabfc :_agee ,_cfacg :_aafge ,_ddaeg :_fgga (_agee ,_aafge ),Color :_ageba };if _afde ._ddaeg ==_ccebbf {return nil ,false ;};return _afde .asRuling ();
};func (_daeff rulingList )asTiling ()gridTiling {if _babf {_b .Log .Info ("r\u0075\u006ci\u006e\u0067\u004c\u0069\u0073\u0074\u002e\u0061\u0073\u0054\u0069\u006c\u0069\u006e\u0067\u003a\u0020\u0076\u0065\u0063s\u003d\u0025\u0064\u0020\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d=\u003d\u003d\u003d\u003d\u003d\u002b\u002b\u002b\u0020\u003d\u003d\u003d\u003d=\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d=\u003d",len (_daeff ));
};for _ebbgg ,_gecgd :=range _daeff [1:]{_acgce :=_daeff [_ebbgg ];if _acgce .alignsPrimary (_gecgd )&&_acgce .alignsSec (_gecgd ){_b .Log .Error ("a\u0073\u0054\u0069\u006c\u0069\u006e\u0067\u003a\u0020\u0044\u0075\u0070\u006c\u0069\u0063\u0061\u0074\u0065 \u0072\u0075\u006c\u0069\u006e\u0067\u0073\u002e\u000a\u0009v=\u0025\u0073\u000a\t\u0077=\u0025\u0073",_gecgd ,_acgce );
};};_daeff .sortStrict ();_daeff .log ("\u0073n\u0061\u0070\u0070\u0065\u0064");_ecde ,_deff :=_daeff .vertsHorzs ();_ababg :=_ecde .primaries ();_eeacf :=_deff .primaries ();_aaggb :=len (_ababg )-1;_gffcd :=len (_eeacf )-1;if _aaggb ==0||_gffcd ==0{return gridTiling {};
};_aaafe :=_ff .PdfRectangle {Llx :_ababg [0],Urx :_ababg [_aaggb ],Lly :_eeacf [0],Ury :_eeacf [_gffcd ]};if _babf {_b .Log .Info ("\u0072\u0075l\u0069\u006e\u0067\u004c\u0069\u0073\u0074\u002e\u0061\u0073\u0054\u0069\u006c\u0069\u006e\u0067\u003a\u0020\u0076\u0065\u0072\u0074s=\u0025\u0064",len (_ecde ));
for _bdaea ,_cacag :=range _ecde {_gf .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0073\u000a",_bdaea ,_cacag );};_b .Log .Info ("\u0072\u0075l\u0069\u006e\u0067\u004c\u0069\u0073\u0074\u002e\u0061\u0073\u0054\u0069\u006c\u0069\u006e\u0067\u003a\u0020\u0068\u006f\u0072\u007as=\u0025\u0064",len (_deff ));
for _ebbee ,_abdae :=range _deff {_gf .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0073\u000a",_ebbee ,_abdae );};_b .Log .Info ("\u0072\u0075\u006c\u0069\u006eg\u004c\u0069\u0073\u0074\u002e\u0061\u0073\u0054\u0069\u006c\u0069\u006e\u0067:\u0020\u0020\u0077\u0078\u0068\u003d\u0025\u0064\u0078\u0025\u0064\u000a\u0009\u006c\u006c\u0078\u003d\u0025\u002e\u0032\u0066\u000a\u0009\u006c\u006c\u0079\u003d\u0025\u002e\u0032f",_aaggb ,_gffcd ,_ababg ,_eeacf );
};_dedf :=make ([]gridTile ,_aaggb *_gffcd );for _ffbed :=_gffcd -1;_ffbed >=0;_ffbed --{_gfege :=_eeacf [_ffbed ];_ffafe :=_eeacf [_ffbed +1];for _bbccf :=0;_bbccf < _aaggb ;_bbccf ++{_dfcbf :=_ababg [_bbccf ];_daacbe :=_ababg [_bbccf +1];_gccbe :=_ecde .findPrimSec (_dfcbf ,_gfege );
_degcg :=_ecde .findPrimSec (_daacbe ,_gfege );_adeec :=_deff .findPrimSec (_gfege ,_dfcbf );_dbebc :=_deff .findPrimSec (_ffafe ,_dfcbf );_abeea :=_ff .PdfRectangle {Llx :_dfcbf ,Urx :_daacbe ,Lly :_gfege ,Ury :_ffafe };_adgef :=_ecaf (_abeea ,_gccbe ,_degcg ,_adeec ,_dbebc );
_dedf [_ffbed *_aaggb +_bbccf ]=_adgef ;if _babf {_gf .Printf ("\u0020\u0020\u0078\u003d\u0025\u0032\u0064\u0020\u0079\u003d\u0025\u0032\u0064\u003a\u0020%\u0073 \u0025\u0036\u002e\u0032\u0066\u0020\u0078\u0020\u0025\u0036\u002e\u0032\u0066\u000a",_bbccf ,_ffbed ,_adgef .String (),_adgef .Width (),_adgef .Height ());
};};};if _babf {_b .Log .Info ("r\u0075\u006c\u0069\u006e\u0067\u004c\u0069\u0073\u0074.\u0061\u0073\u0054\u0069\u006c\u0069\u006eg:\u0020\u0063\u006f\u0061l\u0065\u0073\u0063\u0065\u0020\u0068\u006f\u0072\u0069zo\u006e\u0074a\u006c\u002e\u0020\u0025\u0036\u002e\u0032\u0066",_aaafe );
};_dfcab :=make ([]map[float64 ]gridTile ,_gffcd );for _cadbd :=_gffcd -1;_cadbd >=0;_cadbd --{if _babf {_gf .Printf ("\u0020\u0020\u0079\u003d\u0025\u0032\u0064\u000a",_cadbd );};_dfcab [_cadbd ]=make (map[float64 ]gridTile ,_aaggb );for _eebeb :=0;_eebeb < _aaggb ;
_eebeb ++{_eaegc :=_dedf [_cadbd *_aaggb +_eebeb ];if _babf {_gf .Printf ("\u0020\u0020\u0025\u0034\u0064\u003a\u0020\u0025\u0073\u000a",_eebeb ,_eaegc );};if !_eaegc ._bfac {continue ;};_gfbdd :=_eebeb ;for _dcfd :=_eebeb +1;!_eaegc ._gfdb &&_dcfd < _aaggb ;
_dcfd ++{_febeb :=_dedf [_cadbd *_aaggb +_dcfd ];_eaegc .Urx =_febeb .Urx ;_eaegc ._gcabff =_eaegc ._gcabff ||_febeb ._gcabff ;_eaegc ._dddffa =_eaegc ._dddffa ||_febeb ._dddffa ;_eaegc ._gfdb =_febeb ._gfdb ;if _babf {_gf .Printf ("\u0020 \u0020%\u0034\u0064\u003a\u0020\u0025s\u0020\u2192 \u0025\u0073\u000a",_dcfd ,_febeb ,_eaegc );
};_gfbdd =_dcfd ;};if _babf {_gf .Printf (" \u0020 \u0025\u0032\u0064\u0020\u002d\u0020\u0025\u0032d\u0020\u2192\u0020\u0025s\n",_eebeb ,_gfbdd ,_eaegc );};_eebeb =_gfbdd ;_dfcab [_cadbd ][_eaegc .Llx ]=_eaegc ;};};_ddac :=make (map[float64 ]map[float64 ]gridTile ,_gffcd );
_gddcc :=make (map[float64 ]map[float64 ]struct{},_gffcd );for _fgea :=_gffcd -1;_fgea >=0;_fgea --{_faeb :=_dedf [_fgea *_aaggb ].Lly ;_ddac [_faeb ]=make (map[float64 ]gridTile ,_aaggb );_gddcc [_faeb ]=make (map[float64 ]struct{},_aaggb );};if _babf {_b .Log .Info ("\u0072u\u006c\u0069n\u0067\u004c\u0069s\u0074\u002e\u0061\u0073\u0054\u0069\u006ci\u006e\u0067\u003a\u0020\u0063\u006fa\u006c\u0065\u0073\u0063\u0065\u0020\u0076\u0065\u0072\u0074\u0069c\u0061\u006c\u002e\u0020\u0025\u0036\u002e\u0032\u0066",_aaafe );
};for _fcgcb :=_gffcd -1;_fcgcb >=0;_fcgcb --{_agafd :=_dedf [_fcgcb *_aaggb ].Lly ;_befa :=_dfcab [_fcgcb ];if _babf {_gf .Printf ("\u0020\u0020\u0079\u003d\u0025\u0032\u0064\u000a",_fcgcb );};for _ ,_cfbf :=range _ggbfa (_befa ){if _ ,_fbcbb :=_gddcc [_agafd ][_cfbf ];
_fbcbb {continue ;};_fefe :=_befa [_cfbf ];if _babf {_gf .Printf (" \u0020\u0020\u0020\u0020\u0076\u0030\u003d\u0025\u0073\u000a",_fefe .String ());};for _ggbf :=_fcgcb -1;_ggbf >=0;_ggbf --{if _fefe ._dddffa {break ;};_bdeed :=_dfcab [_ggbf ];_aeef ,_cedad :=_bdeed [_cfbf ];
if !_cedad {break ;};if _aeef .Urx !=_fefe .Urx {break ;};_fefe ._dddffa =_aeef ._dddffa ;_fefe .Lly =_aeef .Lly ;if _babf {_gf .Printf ("\u0020\u0020\u0020\u0020  \u0020\u0020\u0076\u003d\u0025\u0073\u0020\u0076\u0030\u003d\u0025\u0073\u000a",_aeef .String (),_fefe .String ());
};_gddcc [_aeef .Lly ][_aeef .Llx ]=struct{}{};};if _fcgcb ==0{_fefe ._dddffa =true ;};if _fefe .complete (){_ddac [_agafd ][_cfbf ]=_fefe ;};};};_dfcf :=gridTiling {PdfRectangle :_aaafe ,_gfbb :_dbcg (_ddac ),_cefd :_cdcb (_ddac ),_bbgf :_ddac };_dfcf .log ("\u0043r\u0065\u0061\u0074\u0065\u0064");
return _dfcf ;};

// ExtractFonts returns all font information from the page extractor, including
// font name, font type, the raw data of the embedded font file (if embedded), font descriptor and more.
//
// The argument `previousPageFonts` is used when trying to build a complete font catalog for multiple pages or the entire document.
// The entries from `previousPageFonts` are added to the returned result unless already included in the page, i.e. no duplicate entries.
//
// NOTE: If previousPageFonts is nil, all fonts from the page will be returned. Use it when building up a full list of fonts for a document or page range.
func (_fee *Extractor )ExtractFonts (previousPageFonts *PageFonts )(*PageFonts ,error ){_fcd :=PageFonts {};_ead :=_fcd .extractPageResourcesToFont (_fee ._gbb );if _ead !=nil {return nil ,_ead ;};if previousPageFonts !=nil {for _ ,_gdd :=range previousPageFonts .Fonts {if !_de (_fcd .Fonts ,_gdd .FontName ){_fcd .Fonts =append (_fcd .Fonts ,_gdd );
};};};return &PageFonts {Fonts :_fcd .Fonts },nil ;};func (_eafe *textPara )toTextMarks (_fdcde *int )[]TextMark {if _eafe ._eeage ==nil {return _eafe .toCellTextMarks (_fdcde );};var _ffef []TextMark ;for _fdfg :=0;_fdfg < _eafe ._eeage ._ecedc ;_fdfg ++{for _bged :=0;
_bged < _eafe ._eeage ._edebd ;_bged ++{_agadf :=_eafe ._eeage .get (_bged ,_fdfg );if _agadf ==nil {_ffef =_abee (_ffef ,_fdcde ,"\u0009");}else {_caed :=_agadf .toCellTextMarks (_fdcde );_ffef =append (_ffef ,_caed ...);};_ffef =_abee (_ffef ,_fdcde ,"\u0020");
};if _fdfg < _eafe ._eeage ._ecedc -1{_ffef =_abee (_ffef ,_fdcde ,"\u000a");};};_ebeae :=_eafe ._eeage ;if _ebeae .isExportable (){_egge :=_ebeae .toTextTable ();_ffef =_cdgf (_ffef ,&_egge );};return _ffef ;};

// TextMark represents extracted text on a page with information regarding both textual content,
// formatting (font and size) and positioning.
// It is the smallest unit of text on a PDF page, typically a single character.
//
// getBBox() in test_text.go shows how to compute bounding boxes of substrings of extracted text.
// The following code extracts the text on PDF page `page` into `text` then finds the bounding box
// `bbox` of substring `term` in `text`.
//
//	ex, _ := New(page)
//	// handle errors
//	pageText, _, _, err := ex.ExtractPageText()
//	// handle errors
//	text := pageText.Text()
//	textMarks := pageText.Marks()
//
//		start := strings.Index(text, term)
//	 end := start + len(term)
//	 spanMarks, err := textMarks.RangeOffset(start, end)
//	 // handle errors
//	 bbox, ok := spanMarks.BBox()
//	 // handle errors
type TextMark struct{

// Text is the extracted text.
Text string ;

// Original is the text in the PDF. It has not been decoded like `Text`.
Original string ;

// BBox is the bounding box of the text.
BBox _ff .PdfRectangle ;

// Font is the font the text was drawn with.
Font *_ff .PdfFont ;

// FontSize is the font size the text was drawn with.
FontSize float64 ;

// Offset is the offset of the start of TextMark.Text in the extracted text. If you do this
//   text, textMarks := pageText.Text(), pageText.Marks()
//   marks := textMarks.Elements()
// then marks[i].Offset is the offset of marks[i].Text in text.
Offset int ;

// Meta is set true for spaces and line breaks that we insert in the extracted text. We insert
// spaces (line breaks) when we see characters that are over a threshold horizontal (vertical)
//  distance  apart. See wordJoiner (lineJoiner) in PageText.computeViews().
Meta bool ;

// FillColor is the fill color of the text.
// The color is nil for spaces and line breaks (i.e. the Meta field is true).
FillColor _cf .Color ;

// StrokeColor is the stroke color of the text.
// The color is nil for spaces and line breaks (i.e. the Meta field is true).
StrokeColor _cf .Color ;

// Orientation is the text orientation
Orientation int ;

// DirectObject is the underlying PdfObject (Text Object) that represents the visible texts. This is introduced to get
// a simple access to the TextObject in case editing or replacment of some text is needed. E.g during redaction.
DirectObject _fc .PdfObject ;

// ObjString is a decoded string operand of a text-showing operator. It has the same value as `Text` attribute except
// when many glyphs are represented with the same Text Object that contains multiple length string operand in which case
// ObjString spans more than one character string that falls in different TextMark objects.
ObjString []string ;Tw float64 ;Th float64 ;Tc float64 ;Index int ;_ggda bool ;_agae *TextTable ;};func (_degc *PageText )getText ()string {_fgce :="";_ggg :=len (_degc ._agbg );for _bfcga :=0;_bfcga < 360&&_ggg > 0;_bfcga +=90{_fabd :=make ([]*textMark ,0,len (_degc ._agbg )-_ggg );
for _ ,_abbf :=range _degc ._agbg {if _abbf ._eecb ==_bfcga {_fabd =append (_fabd ,_abbf );};};if len (_fabd )> 0{_fgce +=_bcda (_fabd ,_degc ._cbeg );_ggg -=len (_fabd );};};return _fgce ;};

// ImageExtractOptions contains options for controlling image extraction from
// PDF pages.
type ImageExtractOptions struct{IncludeInlineStencilMasks bool ;};func (_ffbe *textObject )moveLP (_ecdd ,_bceb float64 ){_ffbe ._bfad .Concat (_cd .NewMatrix (1,0,0,1,_ecdd ,_bceb ));_ffbe ._dddff =_ffbe ._bfad ;};

// RangeOffset returns the TextMarks in `ma` that overlap text[start:end] in the extracted text.
// These are tm: `start` <= tm.Offset + len(tm.Text) && tm.Offset < `end` where
// `start` and `end` are offsets in the extracted text.
// NOTE: TextMarks can contain multiple characters. e.g. "ffi" for the ﬃ ligature so the first and
// last elements of the returned TextMarkArray may only partially overlap text[start:end].
func (_beaf *TextMarkArray )RangeOffset (start ,end int )(*TextMarkArray ,error ){if _beaf ==nil {return nil ,_gd .New ("\u006da\u003d\u003d\u006e\u0069\u006c");};if end < start {return nil ,_gf .Errorf ("\u0065\u006e\u0064\u0020\u003c\u0020\u0073\u0074\u0061\u0072\u0074\u002e\u0020\u0052\u0061n\u0067\u0065\u004f\u0066\u0066\u0073\u0065\u0074\u0020\u006e\u006f\u0074\u0020d\u0065\u0066\u0069\u006e\u0065\u0064\u002e\u0020\u0073\u0074\u0061\u0072t=\u0025\u0064\u0020\u0065\u006e\u0064\u003d\u0025\u0064\u0020",start ,end );
};_aeda :=len (_beaf ._egee );if _aeda ==0{return _beaf ,nil ;};if start < _beaf ._egee [0].Offset {start =_beaf ._egee [0].Offset ;};if end > _beaf ._egee [_aeda -1].Offset +1{end =_beaf ._egee [_aeda -1].Offset +1;};_cfbb :=_dc .Search (_aeda ,func (_bcag int )bool {return _beaf ._egee [_bcag ].Offset +len (_beaf ._egee [_bcag ].Text )-1>=start });
if !(0<=_cfbb &&_cfbb < _aeda ){_fabbc :=_gf .Errorf ("\u004f\u0075\u0074\u0020\u006f\u0066\u0020\u0072\u0061\u006e\u0067\u0065\u002e\u0020\u0073\u0074\u0061\u0072\u0074\u003d%\u0064\u0020\u0069\u0053\u0074\u0061\u0072\u0074\u003d\u0025\u0064\u0020\u006c\u0065\u006e\u003d\u0025\u0064\u000a\u0009\u0066\u0069\u0072\u0073\u0074\u003d\u0025\u0076\u000a\u0009 \u006c\u0061\u0073\u0074\u003d%\u0076",start ,_cfbb ,_aeda ,_beaf ._egee [0],_beaf ._egee [_aeda -1]);
return nil ,_fabbc ;};_bacc :=_dc .Search (_aeda ,func (_fbc int )bool {return _beaf ._egee [_fbc ].Offset > end -1});if !(0<=_bacc &&_bacc < _aeda ){_bgabg :=_gf .Errorf ("\u004f\u0075\u0074\u0020\u006f\u0066\u0020r\u0061\u006e\u0067e\u002e\u0020\u0065n\u0064\u003d%\u0064\u0020\u0069\u0045\u006e\u0064=\u0025d \u006c\u0065\u006e\u003d\u0025\u0064\u000a\u0009\u0066\u0069\u0072\u0073\u0074\u003d\u0025\u0076\u000a\u0009\u0020\u006c\u0061\u0073\u0074\u003d\u0025\u0076",end ,_bacc ,_aeda ,_beaf ._egee [0],_beaf ._egee [_aeda -1]);
return nil ,_bgabg ;};if _bacc <=_cfbb {return nil ,_gf .Errorf ("\u0069\u0045\u006e\u0064\u0020\u003c=\u0020\u0069\u0053\u0074\u0061\u0072\u0074\u003a\u0020\u0073\u0074\u0061\u0072\u0074\u003d\u0025\u0064\u0020\u0065\u006ed\u003d\u0025\u0064\u0020\u0069\u0053\u0074\u0061\u0072\u0074\u003d\u0025\u0064\u0020i\u0045n\u0064\u003d\u0025\u0064",start ,end ,_cfbb ,_bacc );
};return &TextMarkArray {_egee :_beaf ._egee [_cfbb :_bacc ]},nil ;};func (_baae *textPara )writeText (_adea _ee .Writer ){if _baae ._eeage ==nil {_baae .writeCellText (_adea );return ;};for _dcfb :=0;_dcfb < _baae ._eeage ._ecedc ;_dcfb ++{for _ccgdf :=0;
_ccgdf < _baae ._eeage ._edebd ;_ccgdf ++{_ccebge :=_baae ._eeage .get (_ccgdf ,_dcfb );if _ccebge ==nil {_adea .Write ([]byte ("\u0009"));}else {_gddfe (_ccebge ._gfef );_ccebge .writeCellText (_adea );};_adea .Write ([]byte ("\u0020"));};if _dcfb < _baae ._eeage ._ecedc -1{_adea .Write ([]byte ("\u000a"));
};};};func (_fdeeb *shapesState )closePath (){if _fdeeb ._acc {_fdeeb ._afgc =append (_fdeeb ._afgc ,_agaf (_fdeeb ._bcb ));_fdeeb ._acc =false ;}else if len (_fdeeb ._afgc )==0{if _fdgc {_b .Log .Debug ("\u0063\u006c\u006f\u0073eP\u0061\u0074\u0068\u0020\u0077\u0069\u0074\u0068\u0020\u006e\u006f\u0020\u0070\u0061t\u0068");
};_fdeeb ._acc =false ;return ;};_fdeeb ._afgc [len (_fdeeb ._afgc )-1].close ();if _fdgc {_b .Log .Info ("\u0063\u006c\u006f\u0073\u0065\u0050\u0061\u0074\u0068\u003a\u0020\u0025\u0073",_fdeeb );};};func (_cfgeb *ruling )intersects (_gafea *ruling )bool {_ggfacf :=(_cfgeb ._gefad ==_ebgd &&_gafea ._gefad ==_deca )||(_gafea ._gefad ==_ebgd &&_cfgeb ._gefad ==_deca );
_gdfb :=func (_edfbb ,_bbbf *ruling )bool {return _edfbb ._aceb -_bgee <=_bbbf ._fgbd &&_bbbf ._fgbd <=_edfbb ._gddcg +_bgee ;};_bggcf :=_gdfb (_cfgeb ,_gafea );_cdgb :=_gdfb (_gafea ,_cfgeb );if _aaeb {_gf .Printf ("\u0020\u0020\u0020\u0020\u0069\u006e\u0074\u0065\u0072\u0073\u0065\u0063\u0074\u0073\u003a\u0020\u0020\u006fr\u0074\u0068\u006f\u0067\u006f\u006e\u0061l\u003d\u0025\u0074\u0020\u006f\u0031\u003d\u0025\u0074\u0020\u006f2\u003d\u0025\u0074\u0020\u2192\u0020\u0025\u0074\u000a"+"\u0020\u0020\u0020 \u0020\u0020\u0020\u0076\u003d\u0025\u0073\u000a"+" \u0020\u0020\u0020\u0020\u0020\u0077\u003d\u0025\u0073\u000a",_ggfacf ,_bggcf ,_cdgb ,_ggfacf &&_bggcf &&_cdgb ,_cfgeb ,_gafea );
};return _ggfacf &&_bggcf &&_cdgb ;};func (_gfcebe *textTable )compositeColCorridors ()map[int ][]float64 {_ebfge :=make (map[int ][]float64 ,_gfcebe ._edebd );if _cebg {_b .Log .Info ("\u0063\u006f\u006d\u0070o\u0073\u0069\u0074\u0065\u0043\u006f\u006c\u0043\u006f\u0072r\u0069d\u006f\u0072\u0073\u003a\u0020\u0077\u003d%\u0064\u0020",_gfcebe ._edebd );
};for _geebc :=0;_geebc < _gfcebe ._edebd ;_geebc ++{_ebfge [_geebc ]=nil ;};return _ebfge ;};var _dbfd string ="\u005e\u005b\u0061\u002d\u007a\u0041\u002dZ\u005d\u0028\u005c)\u007c\u005c\u002e)\u007c\u005e[\u005c\u0064\u005d\u002b\u0028\u005c)\u007c\\.\u0029\u007c\u005e\u005c\u0028\u005b\u0061\u002d\u007a\u0041\u002d\u005a\u005d\u005c\u0029\u007c\u005e\u005c\u0028\u005b\u005c\u0064\u005d\u002b\u005c\u0029";
type textWord struct{_ff .PdfRectangle ;_efdea float64 ;_dbefc string ;_eacb []*textMark ;_gfbc float64 ;_fecgf bool ;};func (_fgeac paraList )applyTables (_cgdac []*textTable )paraList {var _adfa paraList ;for _ ,_gfecd :=range _cgdac {_adfa =append (_adfa ,_gfecd .newTablePara ());
};for _ ,_cgffa :=range _fgeac {if _cgffa ._acfg {continue ;};_adfa =append (_adfa ,_cgffa );};return _adfa ;};type stateStack []*textState ;

// TextMarkArray is a collection of TextMarks.
type TextMarkArray struct{_egee []TextMark };func _aggbc (_eaebb string ,_cgdad int )string {if len (_eaebb )< _cgdad {return _eaebb ;};return _eaebb [:_cgdad ];};func _addb (_effe []*textLine )[]*textLine {_cgebb :=[]*textLine {};for _ ,_baac :=range _effe {_gefe :=_baac .text ();
_gggc :=_fdff .Find ([]byte (_gefe ));if _gggc !=nil {_cgebb =append (_cgebb ,_baac );};};return _cgebb ;};func (_cbaad paraList )findTableGrid (_bcfae gridTiling )(*textTable ,map[*textPara ]struct{}){_dcbg :=len (_bcfae ._gfbb );_aafab :=len (_bcfae ._cefd );
_ecebc :=textTable {_fbgad :true ,_edebd :_dcbg ,_ecedc :_aafab ,_eafac :make (map[uint64 ]*textPara ,_dcbg *_aafab ),_cdafa :make (map[uint64 ]compositeCell ,_dcbg *_aafab )};_ecebc .PdfRectangle =_bcfae .PdfRectangle ;_fbdfg :=make (map[*textPara ]struct{});
_dacaa :=int ((1.0-_eebc )*float64 (_dcbg *_aafab ));_dgacb :=0;if _babf {_b .Log .Info ("\u0066\u0069\u006e\u0064Ta\u0062\u006c\u0065\u0047\u0072\u0069\u0064\u003a\u0020\u0025\u0064\u0020\u0078\u0020%\u0064",_dcbg ,_aafab );};for _aeede ,_fcecg :=range _bcfae ._cefd {_feda ,_ccgb :=_bcfae ._bbgf [_fcecg ];
if !_ccgb {continue ;};for _bccf ,_defb :=range _bcfae ._gfbb {_ffbec ,_ceabe :=_feda [_defb ];if !_ceabe {continue ;};_bbgda :=_cbaad .inTile (_ffbec );if len (_bbgda )==0{_dgacb ++;if _dgacb > _dacaa {if _babf {_b .Log .Info ("\u0021\u006e\u0075m\u0045\u006d\u0070\u0074\u0079\u003d\u0025\u0064",_dgacb );
};return nil ,nil ;};}else {_ecebc .putComposite (_bccf ,_aeede ,_bbgda ,_ffbec .PdfRectangle );for _ ,_dafef :=range _bbgda {_fbdfg [_dafef ]=struct{}{};};};};};_ddgcd :=0;for _eaeeb :=0;_eaeeb < _dcbg ;_eaeeb ++{_ggdf :=_ecebc .get (_eaeeb ,0);if _ggdf ==nil ||!_ggdf ._cgac {_ddgcd ++;
};};if _ddgcd ==0{if _babf {_b .Log .Info ("\u0021\u006e\u0075m\u0048\u0065\u0061\u0064\u0065\u0072\u003d\u0030");};return nil ,nil ;};_bafd :=_ecebc .reduceTiling (_bcfae ,_bddf );_bafd =_bafd .subdivide ();return _bafd ,_fbdfg ;};const (_afeg markKind =iota ;
_acad ;_fdab ;_cffee ;);const (_gbgaa =1.0e-6;_ddaf =1.0e-4;_acbg =10;_edbb =6;_abgac =0.5;_adaec =0.12;_adef =0.19;_dfeag =0.04;_fcacc =1.0;_dfgde =0.04;_gccd =12;_eaf =0.4;_dgda =0.7;_ddbb =1.0;_ccga =0.1;_agbee =1.4;_cddc =0.46;_fafe =0.02;_cgea =0.2;
_beee =0.5;_deb =4;_ddg =4.0;_faacd =6;_eebc =0.3;_gdde =0.01;_efgf =0.02;_gddcb =2;_bdbca =2;_bbdb =500;_cfcbf =4.0;_gdeg =0.05;_ffecd =0.1;_bgee =2.0;_aeeg =2.0;_aaaf =1.5;_bddf =3.0;_cdbcb =0.25;);

// PageImages represents extracted images on a PDF page with spatial information:
// display position and size.
type PageImages struct{Images []ImageMark ;};type textState struct{_cbdg float64 ;_egcc float64 ;_cceb float64 ;_bcca float64 ;_dgd float64 ;_cbfg RenderMode ;_eagf float64 ;_egfa *_ff .PdfFont ;_fgeg _ff .PdfRectangle ;_bbdc int ;_eeg int ;};type textMark struct{_ff .PdfRectangle ;
_eecb int ;_ffcaf string ;_fedb string ;_aaee *_ff .PdfFont ;_dgec float64 ;_agdb float64 ;_aeag _cd .Matrix ;_abcgc _cd .Point ;_bfaf _ff .PdfRectangle ;_cfbba _cf .Color ;_ddae _cf .Color ;_fgadd _fc .PdfObject ;_bcfb []string ;Tw float64 ;Th float64 ;
_dcaed int ;_gaeb int ;};func (_bbfbf rulingList )primMinMax ()(float64 ,float64 ){_bgbe ,_fgffb :=_bbfbf [0]._fgbd ,_bbfbf [0]._fgbd ;for _ ,_beafg :=range _bbfbf [1:]{if _beafg ._fgbd < _bgbe {_bgbe =_beafg ._fgbd ;}else if _beafg ._fgbd > _fgffb {_fgffb =_beafg ._fgbd ;
};};return _bgbe ,_fgffb ;};func _ggdcc (_dfff ,_egfcd *textPara )bool {if _dfff ._cgac ||_egfcd ._cgac {return true ;};return _abbg (_dfff .depth ()-_egfcd .depth ());};

// Len returns the number of TextMarks in `ma`.
func (_ecea *TextMarkArray )Len ()int {if _ecea ==nil {return 0;};return len (_ecea ._egee );};

// String returns a description of `state`.
func (_cega *textState )String ()string {_dbfg :="\u005bN\u004f\u0054\u0020\u0053\u0045\u0054]";if _cega ._egfa !=nil {_dbfg =_cega ._egfa .BaseFont ();};return _gf .Sprintf ("\u0074\u0063\u003d\u0025\u002e\u0032\u0066\u0020\u0074\u0077\u003d\u0025\u002e\u0032\u0066 \u0074f\u0073\u003d\u0025\u002e\u0032\u0066\u0020\u0066\u006f\u006e\u0074\u003d\u0025\u0071",_cega ._cbdg ,_cega ._egcc ,_cega ._dgd ,_dbfg );
};

// Marks returns the TextMark collection for a page. It represents all the text on the page.
func (_ebaf PageText )Marks ()*TextMarkArray {return &TextMarkArray {_egee :_ebaf ._gbeg }};func _edf (_bbef *_fc .PdfObjectString ,_gbbg string ,_edc *_ff .PdfFont ){_fgfc ,_cged :=_edc .StringToCharcodeBytes (_gbbg );if _cged !=0{_b .Log .Debug ("\u0057\u0041\u0052\u004e\u003a\u0020\u0073\u006fm\u0065\u0020\u0072un\u0065\u0073\u0020\u0063\u006f\u0075l\u0064\u0020\u006e\u006f\u0074\u0020\u0062\u0065\u0020\u0065\u006e\u0063\u006f\u0064\u0065d\u002e\u000a\u0009\u0025\u0073\u0020\u002d\u003e \u0025\u0076",_gbbg ,_fgfc );
};_aad :=_fc .MakeStringFromBytes (_fgfc );*_bbef =*_aad ;};func _cecd (_gead []TextMark ,_ababa *int ,_aabg TextMark )[]TextMark {_aabg .Offset =*_ababa ;_gead =append (_gead ,_aabg );*_ababa +=len (_aabg .Text );return _gead ;};func _adbc (_fcdc *textLine ,_ebdg []*textLine ,_fgge []float64 ,_gdbf ,_bdef float64 )[]*textLine {_facg :=[]*textLine {};
for _ ,_abae :=range _ebdg {if _abae ._cdab >=_gdbf {if _bdef !=-1&&_abae ._cdab < _bdef {if _abae .text ()!=_fcdc .text (){if _g .Round (_abae .Llx )< _g .Round (_fcdc .Llx ){break ;};_facg =append (_facg ,_abae );};}else if _bdef ==-1{if _abae ._cdab ==_fcdc ._cdab {if _abae .text ()!=_fcdc .text (){_facg =append (_facg ,_abae );
};continue ;};_faaa :=_dbbec (_fcdc ,_ebdg ,_fgge );if _faaa !=-1&&_abae ._cdab <=_faaa {_facg =append (_facg ,_abae );};};};};return _facg ;};func (_bdfe compositeCell )parasBBox ()(paraList ,_ff .PdfRectangle ){return _bdfe .paraList ,_bdfe .PdfRectangle ;
};func (_eeag *wordBag )absorb (_bffc *wordBag ){_fdddg :=_bffc .makeRemovals ();for _aeba ,_cffdb :=range _bffc ._ggeff {for _ ,_cceba :=range _cffdb {_eeag .pullWord (_cceba ,_aeba ,_fdddg );};};_bffc .applyRemovals (_fdddg );};func _cad (_fca []string ,_ab int ,_ffe int ){for _fcc ,_cdb :=_ab ,_ffe -1;
_fcc < _cdb ;_fcc ,_cdb =_fcc +1,_cdb -1{_fe :=_fca [_fcc ];_fca [_fcc ]=_fca [_cdb ];_fca [_cdb ]=_fe ;};};func (_gbed *wordBag )minDepth ()float64 {return _gbed ._ddc -(_gbed .Ury -_gbed ._dfcaf )};func (_baff intSet )add (_ecegc int ){_baff [_ecegc ]=struct{}{}};
func _cdbe (_cbcab []*textMark ,_fged _ff .PdfRectangle ,_afda rulingList ,_gcgg []gridTiling ,_facc bool )paraList {_b .Log .Trace ("\u006d\u0061\u006b\u0065\u0054\u0065\u0078\u0074\u0050\u0061\u0067\u0065\u003a \u0025\u0064\u0020\u0065\u006c\u0065m\u0065\u006e\u0074\u0073\u0020\u0070\u0061\u0067\u0065\u0053\u0069\u007a\u0065=\u0025\u002e\u0032\u0066",len (_cbcab ),_fged );
if len (_cbcab )==0{return nil ;};_eca :=_bdga (_cbcab ,_fged ,false );if len (_eca )==0{return nil ;};_afda .log ("\u006d\u0061\u006be\u0054\u0065\u0078\u0074\u0050\u0061\u0067\u0065");_cgdee ,_ddcg :=_afda .vertsHorzs ();_geede :=_dbec (_eca ,_fged .Ury ,_cgdee ,_ddcg );
_ffbfc :=_bfeb (_geede ,_fged .Ury ,_cgdee ,_ddcg ,_facc );_ffbfc =_bcce (_ffbfc );_ccebb :=make (paraList ,0,len (_ffbfc ));for _ ,_bacf :=range _ffbfc {_bagg :=_bacf .arrangeText (_facc );if _bagg !=nil {_ccebb =append (_ccebb ,_bagg );};};if len (_ccebb )>=_faacd {_ccebb =_ccebb .extractTables (_gcgg );
};_ccebb .sortReadingOrder ();_ccebb .sortTopoOrder ();_ccebb .log ("\u0073\u006f\u0072te\u0064\u0020\u0069\u006e\u0020\u0072\u0065\u0061\u0064\u0069\u006e\u0067\u0020\u006f\u0072\u0064\u0065\u0072");return _ccebb ;};func (_agf *imageExtractContext )extractFormImages (_aae *_fc .PdfObjectName ,_fbgg _ef .GraphicsState ,_fedfd *_ff .PdfPageResources )error {_bfb ,_bdd :=_fedfd .GetXObjectFormByName (*_aae );
if _bdd !=nil {return _bdd ;};if _bfb ==nil {return nil ;};_eead ,_bdd :=_bfb .GetContentStream ();if _bdd !=nil {return _bdd ;};_beg :=_bfb .Resources ;if _beg ==nil {_beg =_fedfd ;};_bdd =_agf .extractContentStreamImages (string (_eead ),_beg );if _bdd !=nil {return _bdd ;
};_agf ._bfc ++;return nil ;};func (_bacde *textMark )bbox ()_ff .PdfRectangle {return _bacde .PdfRectangle };func (_cedag *textTable )computeBbox ()_ff .PdfRectangle {var _afbe _ff .PdfRectangle ;_eeebe :=false ;for _dddbb :=0;_dddbb < _cedag ._ecedc ;
_dddbb ++{for _bfcf :=0;_bfcf < _cedag ._edebd ;_bfcf ++{_aedd :=_cedag .get (_bfcf ,_dddbb );if _aedd ==nil {continue ;};if !_eeebe {_afbe =_aedd .PdfRectangle ;_eeebe =true ;}else {_afbe =_baabb (_afbe ,_aedd .PdfRectangle );};};};return _afbe ;};

// NewFromContents creates a new extractor from contents and page resources.
func NewFromContents (contents string ,resources *_ff .PdfPageResources )(*Extractor ,error ){const _fff ="\u0065x\u0074\u0072\u0061\u0063t\u006f\u0072\u002e\u004e\u0065w\u0046r\u006fm\u0043\u006f\u006e\u0074\u0065\u006e\u0074s";_bd :=&Extractor {_bc :contents ,_gbb :resources ,_dcf :map[string ]fontEntry {},_gfdg :map[string ]textResult {}};
_gg .TrackUse (_fff );return _bd ,nil ;};func (_gfecf *textTable )getDown ()paraList {_bbdd :=make (paraList ,_gfecf ._edebd );for _bedbe :=0;_bedbe < _gfecf ._edebd ;_bedbe ++{_ggadf :=_gfecf .get (_bedbe ,_gfecf ._ecedc -1)._acgf ;if _ggadf .taken (){return nil ;
};_bbdd [_bedbe ]=_ggadf ;};for _dafg :=0;_dafg < _gfecf ._edebd -1;_dafg ++{if _bbdd [_dafg ]._egbd !=_bbdd [_dafg +1]{return nil ;};};return _bbdd ;};type gridTiling struct{_ff .PdfRectangle ;_gfbb []float64 ;_cefd []float64 ;_bbgf map[float64 ]map[float64 ]gridTile ;
};const _gcdb =10;func (_fgddb rulingList )augmentGrid ()(rulingList ,rulingList ){_dfed ,_bfefe :=_fgddb .vertsHorzs ();if len (_dfed )==0||len (_bfefe )==0{return _dfed ,_bfefe ;};_fadd ,_afcbg :=_dfed ,_bfefe ;_edfbc :=_dfed .bbox ();_fgda :=_bfefe .bbox ();
if _aaeb {_b .Log .Info ("\u0061u\u0067\u006d\u0065\u006e\u0074\u0047\u0072\u0069\u0064\u003a\u0020b\u0062\u006f\u0078\u0056\u003d\u0025\u0036\u002e\u0032\u0066",_edfbc );_b .Log .Info ("\u0061u\u0067\u006d\u0065\u006e\u0074\u0047\u0072\u0069\u0064\u003a\u0020b\u0062\u006f\u0078\u0048\u003d\u0025\u0036\u002e\u0032\u0066",_fgda );
};var _agbeb ,_edfc ,_afgb ,_dbege *ruling ;if _fgda .Llx < _edfbc .Llx -_bgee {_agbeb =&ruling {_afge :_cffee ,_gefad :_ebgd ,_fgbd :_fgda .Llx ,_aceb :_edfbc .Lly ,_gddcg :_edfbc .Ury };_dfed =append (rulingList {_agbeb },_dfed ...);};if _fgda .Urx > _edfbc .Urx +_bgee {_edfc =&ruling {_afge :_cffee ,_gefad :_ebgd ,_fgbd :_fgda .Urx ,_aceb :_edfbc .Lly ,_gddcg :_edfbc .Ury };
_dfed =append (_dfed ,_edfc );};if _edfbc .Lly < _fgda .Lly -_bgee {_afgb =&ruling {_afge :_cffee ,_gefad :_deca ,_fgbd :_edfbc .Lly ,_aceb :_fgda .Llx ,_gddcg :_fgda .Urx };_bfefe =append (rulingList {_afgb },_bfefe ...);};if _edfbc .Ury > _fgda .Ury +_bgee {_dbege =&ruling {_afge :_cffee ,_gefad :_deca ,_fgbd :_edfbc .Ury ,_aceb :_fgda .Llx ,_gddcg :_fgda .Urx };
_bfefe =append (_bfefe ,_dbege );};if len (_dfed )+len (_bfefe )==len (_fgddb ){return _fadd ,_afcbg ;};_gfccf :=append (_dfed ,_bfefe ...);_fgddb .log ("u\u006e\u0061\u0075\u0067\u006d\u0065\u006e\u0074\u0065\u0064");_gfccf .log ("\u0061u\u0067\u006d\u0065\u006e\u0074\u0065d");
return _dfed ,_bfefe ;};

// PageText represents the layout of text on a device page.
type PageText struct{_agbg []*textMark ;_agag string ;_gbeg []TextMark ;_ccdc []TextTable ;_cbeg _ff .PdfRectangle ;_aggf []pathSection ;_deed []pathSection ;_fcb *_fc .PdfObject ;_efecb _fc .PdfObject ;_geeed *_ef .ContentStreamOperations ;_abga PageTextOptions ;
};func _cggb (_fbbb ,_geac float64 )string {_gdfa :=!_abbg (_fbbb -_geac );if _gdfa {return "\u000a";};return "\u0020";};func _gafaf (_aabeg *PageText )error {_cegdb :=_gg .GetLicenseKey ();if _cegdb !=nil &&_cegdb .IsLicensed ()||_gca {return nil ;};_gf .Printf ("\u0055\u006e\u006c\u0069\u0063\u0065\u006e\u0073\u0065\u0064\u0020c\u006f\u0070\u0079\u0020\u006f\u0066\u0020\u0055\u006e\u0069P\u0044\u0046\u000a");
_gf .Println ("-\u0020\u0047\u0065\u0074\u0020\u0061\u0020\u0066\u0072e\u0065\u0020\u0074\u0072\u0069\u0061\u006c l\u0069\u0063\u0065\u006es\u0065\u0020\u006f\u006e\u0020\u0068\u0074\u0074\u0070s:\u002f\u002fu\u006e\u0069\u0064\u006f\u0063\u002e\u0069\u006f");
return _gd .New ("\u0075\u006e\u0069\u0070d\u0066\u0020\u006c\u0069\u0063\u0065\u006e\u0073\u0065\u0020c\u006fd\u0065\u0020\u0072\u0065\u0071\u0075\u0069r\u0065\u0064");};

// ExtractPageText returns the text contents of `e` (an Extractor for a page) as a PageText.
// TODO(peterwilliams97): The stats complicate this function signature and aren't very useful.
//
//	Replace with a function like Extract() (*PageText, error)
func (_gfeg *Extractor )ExtractPageText ()(*PageText ,int ,int ,error ){_fffa ,_cgd ,_caee ,_eefa :=_gfeg .extractPageText (_gfeg ._bc ,_gfeg ._gbb ,_cd .IdentityMatrix (),0,false );if _eefa !=nil &&_eefa !=_ff .ErrColorOutOfRange {return nil ,0,0,_eefa ;
};if _gfeg ._gea !=nil {_fffa ._abga ._aadcf =_gfeg ._gea .UseSimplerExtractionProcess ;_fffa ._abga ._cgca =_gfeg ._gea .DisableMultiColumns ;};_fffa .computeViews ();_eefa =_gafaf (_fffa );if _eefa !=nil {return nil ,0,0,_eefa ;};if _gfeg ._gea !=nil {if _gfeg ._gea .ApplyCropBox &&_gfeg ._gcd !=nil {_fffa .ApplyArea (*_gfeg ._gcd );
};_fffa ._abga ._cecfd =_gfeg ._gea .DisableDocumentTags ;};return _fffa ,_cgd ,_caee ,nil ;};func (_dbbf *imageExtractContext )extractXObjectImage (_gcab *_fc .PdfObjectName ,_edd _ef .GraphicsState ,_badd *_ff .PdfPageResources )error {_ffdc ,_ :=_badd .GetXObjectByName (*_gcab );
if _ffdc ==nil {return nil ;};_acfc ,_cg :=_dbbf ._dad [_ffdc ];if !_cg {_gcaa ,_fgg :=_badd .GetXObjectImageByName (*_gcab );if _fgg !=nil {return _fgg ;};if _gcaa ==nil {return nil ;};_gfac ,_fgg :=_gcaa .ToImage ();if _fgg !=nil {return _fgg ;};var _gee _eg .Image ;
if _gcaa .Mask !=nil {if _gee ,_fgg =_dfgb (_gcaa .Mask ,_cf .Opaque );_fgg !=nil {_b .Log .Debug ("\u0057\u0041\u0052\u004e\u003a \u0063\u006f\u0075\u006c\u0064 \u006eo\u0074\u0020\u0067\u0065\u0074\u0020\u0065\u0078\u0070\u006c\u0069\u0063\u0069\u0074\u0020\u0069\u006d\u0061\u0067e\u0020\u006d\u0061\u0073\u006b\u002e\u0020\u004f\u0075\u0074\u0070\u0075\u0074\u0020\u006d\u0061\u0079\u0020\u0062\u0065\u0020\u0069\u006e\u0063o\u0072\u0072\u0065\u0063\u0074\u002e");
};}else if _gcaa .SMask !=nil {_gee ,_fgg =_egfe (_gcaa .SMask ,_cf .Opaque );if _fgg !=nil {_b .Log .Debug ("W\u0041\u0052\u004e\u003a\u0020\u0063\u006f\u0075\u006c\u0064\u0020\u006e\u006f\u0074\u0020\u0067\u0065\u0074\u0020\u0073\u006f\u0066\u0074\u0020\u0069\u006da\u0067e\u0020\u006d\u0061\u0073k\u002e\u0020O\u0075\u0074\u0070\u0075\u0074\u0020\u006d\u0061\u0079\u0020\u0062\u0065\u0020\u0069\u006e\u0063\u006f\u0072\u0072\u0065\u0063\u0074\u002e");
};};if _gee !=nil {_aaad ,_fdcf :=_gfac .ToGoImage ();if _fdcf !=nil {return _fdcf ;};_aaad =_fcbdc (_aaad ,_gee );switch _gcaa .ColorSpace .String (){case "\u0044\u0065\u0076\u0069\u0063\u0065\u0047\u0072\u0061\u0079","\u0049n\u0064\u0065\u0078\u0065\u0064":_gfac ,_fdcf =_ff .ImageHandling .NewGrayImageFromGoImage (_aaad );
if _fdcf !=nil {return _fdcf ;};default:_gfac ,_fdcf =_ff .ImageHandling .NewImageFromGoImage (_aaad );if _fdcf !=nil {return _fdcf ;};};};_acfc =&cachedImage {_afcc :_gfac ,_daca :_gcaa .ColorSpace };_dbbf ._dad [_ffdc ]=_acfc ;};_bdf :=_acfc ._afcc ;
_gccf :=_acfc ._daca ;_afg ,_eae :=_gccf .ImageToRGB (*_bdf );if _eae !=nil {return _eae ;};_b .Log .Debug ("@\u0044\u006f\u0020\u0043\u0054\u004d\u003a\u0020\u0025\u0073",_edd .CTM .String ());_dfg :=ImageMark {Image :&_afg ,Width :_edd .CTM .ScalingFactorX (),Height :_edd .CTM .ScalingFactorY (),Angle :_edd .CTM .Angle ()};
_dfg .X ,_dfg .Y =_edd .CTM .Translation ();_dbbf ._aga =append (_dbbf ._aga ,_dfg );_dbbf ._efc ++;return nil ;};func _eec (_gcfc float64 )int {var _becfb int ;if _gcfc >=0{_becfb =int (_gcfc /_edbb );}else {_becfb =int (_gcfc /_edbb )-1;};return _becfb ;
};func (_efdc *wordBag )blocked (_dcdeg *textWord )bool {if _dcdeg .Urx < _efdc .Llx {_fedd :=_dcfe (_dcdeg .PdfRectangle );_bggc :=_bdae (_efdc .PdfRectangle );if _efdc ._bacaf .blocks (_fedd ,_bggc ){if _ddag {_b .Log .Info ("\u0062\u006c\u006f\u0063ke\u0064\u0020\u2190\u0078\u003a\u0020\u0025\u0073\u0020\u0025\u0073",_dcdeg ,_efdc );
};return true ;};}else if _efdc .Urx < _dcdeg .Llx {_gcad :=_dcfe (_efdc .PdfRectangle );_begg :=_bdae (_dcdeg .PdfRectangle );if _efdc ._bacaf .blocks (_gcad ,_begg ){if _ddag {_b .Log .Info ("b\u006co\u0063\u006b\u0065\u0064\u0020\u0078\u2192\u0020:\u0020\u0025\u0073\u0020%s",_dcdeg ,_efdc );
};return true ;};};if _dcdeg .Ury < _efdc .Lly {_bede :=_fagb (_dcdeg .PdfRectangle );_gdfd :=_bagfb (_efdc .PdfRectangle );if _efdc ._eebd .blocks (_bede ,_gdfd ){if _ddag {_b .Log .Info ("\u0062\u006c\u006f\u0063ke\u0064\u0020\u2190\u0079\u003a\u0020\u0025\u0073\u0020\u0025\u0073",_dcdeg ,_efdc );
};return true ;};}else if _efdc .Ury < _dcdeg .Lly {_dbfge :=_fagb (_efdc .PdfRectangle );_cbdd :=_bagfb (_dcdeg .PdfRectangle );if _efdc ._eebd .blocks (_dbfge ,_cbdd ){if _ddag {_b .Log .Info ("b\u006co\u0063\u006b\u0065\u0064\u0020\u0079\u2192\u0020:\u0020\u0025\u0073\u0020%s",_dcdeg ,_efdc );
};return true ;};};return false ;};func (_eabce paraList )extractTables (_cadbe []gridTiling )paraList {if _cebg {_b .Log .Debug ("\u0065\u0078\u0074r\u0061\u0063\u0074\u0054\u0061\u0062\u006c\u0065\u0073\u003d\u0025\u0064\u0020\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u0078\u003d\u003d\u003d\u003d=\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d",len (_eabce ));
};if len (_eabce )< _faacd {return _eabce ;};_bdeb :=_eabce .findTables (_cadbe );if _cebg {_b .Log .Info ("c\u006f\u006d\u0062\u0069\u006e\u0065d\u0020\u0074\u0061\u0062\u006c\u0065s\u0020\u0025\u0064\u0020\u003d\u003d\u003d=\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d=\u003d",len (_bdeb ));
for _eege ,_febec :=range _bdeb {_febec .log (_gf .Sprintf ("c\u006f\u006d\u0062\u0069\u006e\u0065\u0064\u0020\u0025\u0064",_eege ));};};return _eabce .applyTables (_bdeb );};func (_dgdef *textTable )reduce ()*textTable {_dgff :=make ([]int ,0,_dgdef ._ecedc );
_bffg :=make ([]int ,0,_dgdef ._edebd );for _degae :=0;_degae < _dgdef ._ecedc ;_degae ++{if !_dgdef .emptyCompositeRow (_degae ){_dgff =append (_dgff ,_degae );};};for _dccg :=0;_dccg < _dgdef ._edebd ;_dccg ++{if !_dgdef .emptyCompositeColumn (_dccg ){_bffg =append (_bffg ,_dccg );
};};if len (_dgff )==_dgdef ._ecedc &&len (_bffg )==_dgdef ._edebd {return _dgdef ;};_fecea :=textTable {_fbgad :_dgdef ._fbgad ,_edebd :len (_bffg ),_ecedc :len (_dgff ),_eafac :make (map[uint64 ]*textPara ,len (_bffg )*len (_dgff ))};if _cebg {_b .Log .Info ("\u0072\u0065\u0064\u0075ce\u003a\u0020\u0025\u0064\u0078\u0025\u0064\u0020\u002d\u003e\u0020\u0025\u0064\u0078%\u0064",_dgdef ._edebd ,_dgdef ._ecedc ,len (_bffg ),len (_dgff ));
_b .Log .Info ("\u0072\u0065d\u0075\u0063\u0065d\u0043\u006f\u006c\u0073\u003a\u0020\u0025\u002b\u0076",_bffg );_b .Log .Info ("\u0072\u0065d\u0075\u0063\u0065d\u0052\u006f\u0077\u0073\u003a\u0020\u0025\u002b\u0076",_dgff );};for _gacef ,_daeee :=range _dgff {for _gbdc ,_cdff :=range _bffg {_gdge ,_febb :=_dgdef .getComposite (_cdff ,_daeee );
if _gdge ==nil {continue ;};if _cebg {_gf .Printf ("\u0020 \u0025\u0032\u0064\u002c \u0025\u0032\u0064\u0020\u0028%\u0032d\u002c \u0025\u0032\u0064\u0029\u0020\u0025\u0071\n",_gbdc ,_gacef ,_cdff ,_daeee ,_aggbc (_gdge .merge ().text (),50));};_fecea .putComposite (_gbdc ,_gacef ,_gdge ,_febb );
};};return &_fecea ;};func (_afbb rulingList )isActualGrid ()(rulingList ,bool ){_daee ,_egbbc :=_afbb .augmentGrid ();if !(len (_daee )>=_gddcb +1&&len (_egbbc )>=_bdbca +1){if _aaeb {_b .Log .Info ("\u0069s\u0041\u0063t\u0075\u0061\u006c\u0047r\u0069\u0064\u003a \u004e\u006f\u0074\u0020\u0061\u006c\u0069\u0067\u006eed\u002e\u0020\u0025d\u0020\u0078 \u0025\u0064\u0020\u003c\u0020\u0025d\u0020\u0078 \u0025\u0064",len (_daee ),len (_egbbc ),_gddcb +1,_bdbca +1);
};return nil ,false ;};if _aaeb {_b .Log .Info ("\u0069\u0073\u0041\u0063\u0074\u0075a\u006c\u0047\u0072\u0069\u0064\u003a\u0020\u0025\u0073\u0020\u003a\u0020\u0025t\u0020\u0026\u0020\u0025\u0074\u0020\u2192 \u0025\u0074",_afbb ,len (_daee )>=2,len (_egbbc )>=2,len (_daee )>=2&&len (_egbbc )>=2);
for _aadda ,_bdfea :=range _afbb {_gf .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0076\u000a",_aadda ,_bdfea );};};if _gdcd {_dfgdec ,_eeedb :=_daee [0],_daee [len (_daee )-1];_cbag ,_bbaa :=_egbbc [0],_egbbc [len (_egbbc )-1];if !(_bcec (_dfgdec ._fgbd -_cbag ._aceb )&&_bcec (_eeedb ._fgbd -_cbag ._gddcg )&&_bcec (_cbag ._fgbd -_dfgdec ._gddcg )&&_bcec (_bbaa ._fgbd -_dfgdec ._aceb )){if _aaeb {_b .Log .Info ("\u0069\u0073\u0041\u0063\u0074\u0075\u0061l\u0047\u0072\u0069d\u003a\u0020\u0020N\u006f\u0074 \u0061\u006c\u0069\u0067\u006e\u0065d\u002e\n\t\u0076\u0030\u003d\u0025\u0073\u000a\u0009\u0076\u0031\u003d\u0025\u0073\u000a\u0009\u0068\u0030\u003d\u0025\u0073\u000a\u0009\u0068\u0031\u003d\u0025\u0073",_dfgdec ,_eeedb ,_cbag ,_bbaa );
};return nil ,false ;};}else {if !_daee .aligned (){if _dade {_b .Log .Info ("i\u0073\u0041\u0063\u0074\u0075\u0061l\u0047\u0072\u0069\u0064\u003a\u0020N\u006f\u0074\u0020\u0061\u006c\u0069\u0067n\u0065\u0064\u0020\u0076\u0065\u0072\u0074\u0073\u002e\u0020%\u0064",len (_daee ));
};return nil ,false ;};if !_egbbc .aligned (){if _aaeb {_b .Log .Info ("i\u0073\u0041\u0063\u0074\u0075\u0061l\u0047\u0072\u0069\u0064\u003a\u0020N\u006f\u0074\u0020\u0061\u006c\u0069\u0067n\u0065\u0064\u0020\u0068\u006f\u0072\u007a\u0073\u002e\u0020%\u0064",len (_egbbc ));
};return nil ,false ;};};_dcecf :=append (_daee ,_egbbc ...);return _dcecf ,true ;};func (_edgb *subpath )clear (){*_edgb =subpath {}};

// BBox returns the smallest axis-aligned rectangle that encloses all the TextMarks in `ma`.
func (_ecbae *TextMarkArray )BBox ()(_ff .PdfRectangle ,bool ){var _fba _ff .PdfRectangle ;_cdbc :=false ;for _ ,_bbc :=range _ecbae ._egee {if _bbc .Meta ||_egdga (_bbc .Text ){continue ;};if _cdbc {_fba =_baabb (_fba ,_bbc .BBox );}else {_fba =_bbc .BBox ;
_cdbc =true ;};};return _fba ,_cdbc ;};func _ddgef (_fgeaf ,_gdbc _cd .Point )bool {return _fgeaf .X ==_gdbc .X &&_fgeaf .Y ==_gdbc .Y };func _bcec (_eecg float64 )bool {return _g .Abs (_eecg )< _aeeg };func (_ddca *wordBag )sort (){for _ ,_eadb :=range _ddca ._ggeff {_dc .Slice (_eadb ,func (_adae ,_afdbe int )bool {return _fgcc (_eadb [_adae ],_eadb [_afdbe ])< 0});
};};func (_cfgca rulingList )sort (){_dc .Slice (_cfgca ,_cfgca .comp )};func _fad (_deaf []pathSection )rulingList {_dcag (_deaf );if _aaeb {_b .Log .Info ("\u006da\u006b\u0065\u0046\u0069l\u006c\u0052\u0075\u006c\u0069n\u0067s\u003a \u0025\u0064\u0020\u0066\u0069\u006c\u006cs",len (_deaf ));
};var _ddcd rulingList ;for _ ,_agdcf :=range _deaf {for _ ,_agaea :=range _agdcf ._adg {if !_agaea .isQuadrilateral (){if _aaeb {_b .Log .Error ("!\u0069s\u0051\u0075\u0061\u0064\u0072\u0069\u006c\u0061t\u0065\u0072\u0061\u006c: \u0025\u0073",_agaea );
};continue ;};if _beae ,_adfg :=_agaea .makeRectRuling (_agdcf .Color );_adfg {_ddcd =append (_ddcd ,_beae );}else {if _dece {_b .Log .Error ("\u0021\u006d\u0061\u006beR\u0065\u0063\u0074\u0052\u0075\u006c\u0069\u006e\u0067\u003a\u0020\u0025\u0073",_agaea );
};};};};if _aaeb {_b .Log .Info ("\u006d\u0061\u006b\u0065Fi\u006c\u006c\u0052\u0075\u006c\u0069\u006e\u0067\u0073\u003a\u0020\u0025\u0073",_ddcd .String ());};return _ddcd ;};func (_edcc paraList )merge ()*textPara {_b .Log .Trace ("\u006d\u0065\u0072\u0067\u0065:\u0020\u0070\u0061\u0072\u0061\u0073\u003d\u0025\u0064\u0020\u003d\u003d\u003d=\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u0078\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d",len (_edcc ));
if len (_edcc )==0{return nil ;};_edcc .sortReadingOrder ();_ccdec :=_edcc [0].PdfRectangle ;_eceaf :=_edcc [0]._gfef ;for _ ,_bacdb :=range _edcc [1:]{_ccdec =_baabb (_ccdec ,_bacdb .PdfRectangle );_eceaf =append (_eceaf ,_bacdb ._gfef ...);};return _edee (_ccdec ,_eceaf );
};

// String returns a human readable description of `vecs`.
func (_faff rulingList )String ()string {if len (_faff )==0{return "\u007b \u0045\u004d\u0050\u0054\u0059\u0020}";};_bgeab ,_ceda :=_faff .vertsHorzs ();_dcfbd :=len (_bgeab );_addd :=len (_ceda );if _dcfbd ==0||_addd ==0{return _gf .Sprintf ("\u007b%\u0064\u0020\u0078\u0020\u0025\u0064}",_dcfbd ,_addd );
};_bbba :=_ff .PdfRectangle {Llx :_bgeab [0]._fgbd ,Urx :_bgeab [_dcfbd -1]._fgbd ,Lly :_ceda [_addd -1]._fgbd ,Ury :_ceda [0]._fgbd };return _gf .Sprintf ("\u007b\u0025d\u0020\u0078\u0020%\u0064\u003a\u0020\u0025\u0036\u002e\u0032\u0066\u007d",_dcfbd ,_addd ,_bbba );
};func (_bcacc paraList )topoOrder ()[]int {if _gegca {_b .Log .Info ("\u0074\u006f\u0070\u006f\u004f\u0072\u0064\u0065\u0072\u003a");};_eebbf :=len (_bcacc );_dbfb :=make ([]bool ,_eebbf );_bbfc :=make ([]int ,0,_eebbf );_abgag :=_bcacc .llyOrdering ();
var _fafa func (_efad int );_fafa =func (_beffd int ){_dbfb [_beffd ]=true ;for _bbee :=0;_bbee < _eebbf ;_bbee ++{if !_dbfb [_bbee ]{if _bcacc .readBefore (_abgag ,_beffd ,_bbee ){_fafa (_bbee );};};};_bbfc =append (_bbfc ,_beffd );};for _ddba :=0;_ddba < _eebbf ;
_ddba ++{if !_dbfb [_ddba ]{_fafa (_ddba );};};return _cdbb (_bbfc );};func _aedc (_fgaa _ff .PdfRectangle ,_eegg bounded )float64 {return _fgaa .Ury -_eegg .bbox ().Lly };func (_baba *ruling )equals (_bbcfb *ruling )bool {return _baba ._gefad ==_bbcfb ._gefad &&_dbgd (_baba ._fgbd ,_bbcfb ._fgbd )&&_dbgd (_baba ._aceb ,_bbcfb ._aceb )&&_dbgd (_baba ._gddcg ,_bbcfb ._gddcg );
};func _fbef (_gecgg _ff .PdfRectangle )rulingKind {_aacb :=_gecgg .Width ();_abaeg :=_gecgg .Height ();if _aacb > _abaeg {if _aacb >=_cfcbf {return _deca ;};}else {if _abaeg >=_cfcbf {return _ebgd ;};};return _ccebbf ;};type gridTile struct{_ff .PdfRectangle ;
_gcabff ,_bfac ,_dddffa ,_gfdb bool ;};

// Append appends `mark` to the mark array.
func (_ecba *TextMarkArray )Append (mark TextMark ){_ecba ._egee =append (_ecba ._egee ,mark )};func (_cafed intSet )del (_adgca int ){delete (_cafed ,_adgca )};func (_beeec paraList )findGridTables (_dcee []gridTiling )[]*textTable {if _cebg {_b .Log .Info ("\u0066i\u006e\u0064\u0047\u0072\u0069\u0064\u0054\u0061\u0062\u006c\u0065s\u003a\u0020\u0025\u0064\u0020\u0070\u0061\u0072\u0061\u0073",len (_beeec ));
for _gebca ,_bbebg :=range _beeec {_gf .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0073\u000a",_gebca ,_bbebg );};};var _cafgd []*textTable ;for _cddf ,_aeae :=range _dcee {_ggfbb ,_dadg :=_beeec .findTableGrid (_aeae );if _ggfbb !=nil {_ggfbb .log (_gf .Sprintf ("\u0066\u0069\u006e\u0064Ta\u0062\u006c\u0065\u0057\u0069\u0074\u0068\u0047\u0072\u0069\u0064\u0073\u003a\u0020%\u0064",_cddf ));
_cafgd =append (_cafgd ,_ggfbb );_ggfbb .markCells ();};for _afbgea :=range _dadg {_afbgea ._acfg =true ;};};if _cebg {_b .Log .Info ("\u0066i\u006e\u0064\u0047\u0072i\u0064\u0054\u0061\u0062\u006ce\u0073:\u0020%\u0064\u0020\u0074\u0061\u0062\u006c\u0065s",len (_cafgd ));
};return _cafgd ;};func (_egbac paraList )xNeighbours (_bceef float64 )map[*textPara ][]int {_bacgc :=make ([]event ,2*len (_egbac ));if _bceef ==0{for _bdefg ,_cdce :=range _egbac {_bacgc [2*_bdefg ]=event {_cdce .Llx ,true ,_bdefg };_bacgc [2*_bdefg +1]=event {_cdce .Urx ,false ,_bdefg };
};}else {for _ccbbe ,_agfc :=range _egbac {_bacgc [2*_ccbbe ]=event {_agfc .Llx -_bceef *_agfc .fontsize (),true ,_ccbbe };_bacgc [2*_ccbbe +1]=event {_agfc .Urx +_bceef *_agfc .fontsize (),false ,_ccbbe };};};return _egbac .eventNeighbours (_bacgc );};
func (_dbdea paraList )readBefore (_bdgfe []int ,_abfbc ,_fdacf int )bool {_eecef ,_aaec :=_dbdea [_abfbc ],_dbdea [_fdacf ];if _bagfec (_eecef ,_aaec )&&_eecef .Lly > _aaec .Lly {return true ;};if !(_eecef ._gbbdf .Urx < _aaec ._gbbdf .Llx ){return false ;
};_fabf ,_cegfa :=_eecef .Lly ,_aaec .Lly ;if _fabf > _cegfa {_cegfa ,_fabf =_fabf ,_cegfa ;};_acaf :=_g .Max (_eecef ._gbbdf .Llx ,_aaec ._gbbdf .Llx );_gdbbd :=_g .Min (_eecef ._gbbdf .Urx ,_aaec ._gbbdf .Urx );_ecedd :=_dbdea .llyRange (_bdgfe ,_fabf ,_cegfa );
for _ ,_ffbg :=range _ecedd {if _ffbg ==_abfbc ||_ffbg ==_fdacf {continue ;};_gaece :=_dbdea [_ffbg ];if _gaece ._gbbdf .Llx <=_gdbbd &&_acaf <=_gaece ._gbbdf .Urx {return false ;};};return true ;};func (_gadgd *textTable )markCells (){for _fffca :=0;_fffca < _gadgd ._ecedc ;
_fffca ++{for _fbca :=0;_fbca < _gadgd ._edebd ;_fbca ++{_deece :=_gadgd .get (_fbca ,_fffca );if _deece !=nil {_deece ._acfg =true ;};};};};func (_bgdef *textPara )isAtom ()*textTable {_agadg :=_bgdef ;_bcdd :=_bgdef ._egbd ;_fdfd :=_bgdef ._acgf ;if _bcdd .taken ()||_fdfd .taken (){return nil ;
};_beaeb :=_bcdd ._acgf ;if _beaeb .taken ()||_beaeb !=_fdfd ._egbd {return nil ;};return _gdgga (_agadg ,_bcdd ,_fdfd ,_beaeb );};func (_efcd *textPara )writeCellText (_dbga _ee .Writer ){for _ccbd ,_bdbad :=range _efcd ._gfef {_aeaa :=_bdbad .text ();
_egbda :=_gfb &&_bdbad .endsInHyphen ()&&_ccbd !=len (_efcd ._gfef )-1;if _egbda {_aeaa =_dbae (_aeaa );};_dbga .Write ([]byte (_aeaa ));if !(_egbda ||_ccbd ==len (_efcd ._gfef )-1){_dbga .Write ([]byte (_cggb (_bdbad ._cdab ,_efcd ._gfef [_ccbd +1]._cdab )));
};};};

// Search searches the pages specified by `pages`.
func (_dec *Editor )Search (pattern string ,pages []int )(map[int ]Match ,error ){_dcc ,_ ,_acaa :=_dec .getMatches (pattern ,pages );return _dcc ,_acaa ;};func (_gffa rulingList )log (_egcfc string ){if !_aaeb {return ;};_b .Log .Info ("\u0023\u0023\u0023\u0020\u0025\u0031\u0030\u0073\u003a\u0020\u0076\u0065c\u0073\u003d\u0025\u0073",_egcfc ,_gffa .String ());
for _efacb ,_gbbdd :=range _gffa {_gf .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0073\u000a",_efacb ,_gbbdd .String ());};};func (_cabe *textObject )getCurrentFont ()*_ff .PdfFont {_efae :=_cabe ._dedg ._egfa ;if _efae ==nil {_b .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u004e\u006f\u0020\u0066\u006f\u006e\u0074\u0020\u0064\u0065\u0066\u0069\u006e\u0065\u0064\u002e\u0020U\u0073\u0069\u006e\u0067\u0020d\u0065\u0066a\u0075\u006c\u0074\u002e");
return _ff .DefaultFont ();};return _efae ;};func _dcef (_gcfafe *list )[]*list {var _facdf []*list ;for _ ,_afdcg :=range _gcfafe ._ccebg {switch _afdcg ._ggcb {case "\u004c\u0049":_bgcff :=_aagf (_afdcg );_deaaf :=_dcef (_afdcg );_cfbg :=_cgdd (_bgcff ,"\u0062\u0075\u006c\u006c\u0065\u0074",_deaaf );
_bagef :=_afff (_bgcff ,"");_cfbg ._gddaf =_bagef ;_facdf =append (_facdf ,_cfbg );case "\u004c\u0042\u006fd\u0079":return _dcef (_afdcg );case "\u004c":_cfgd :=_dcef (_afdcg );_facdf =append (_facdf ,_cfgd ...);return _facdf ;};};return _facdf ;};func _ecaf (_aebe _ff .PdfRectangle ,_dgdd ,_bfea ,_gabdf ,_dbag *ruling )gridTile {_adeab :=_aebe .Llx ;
_bdgd :=_aebe .Urx ;_bffa :=_aebe .Lly ;_gbdg :=_aebe .Ury ;return gridTile {PdfRectangle :_aebe ,_bfac :_dgdd !=nil &&_dgdd .encloses (_bffa ,_gbdg ),_gfdb :_bfea !=nil &&_bfea .encloses (_bffa ,_gbdg ),_dddffa :_gabdf !=nil &&_gabdf .encloses (_adeab ,_bdgd ),_gcabff :_dbag !=nil &&_dbag .encloses (_adeab ,_bdgd )};
};var _gca =false ;func (_adge *wordBag )depthBand (_ceaf ,_ddec float64 )[]int {if len (_adge ._ggeff )==0{return nil ;};return _adge .depthRange (_adge .getDepthIdx (_ceaf ),_adge .getDepthIdx (_ddec ));};func _gfff (_dcgf map[int ][]float64 )string {_abcb :=_abdcc (_dcgf );
_eaac :=make ([]string ,len (_dcgf ));for _cedaf ,_gefd :=range _abcb {_eaac [_cedaf ]=_gf .Sprintf ("\u0025\u0064\u003a\u0020\u0025\u002e\u0032\u0066",_gefd ,_dcgf [_gefd ]);};return _gf .Sprintf ("\u007b\u0025\u0073\u007d",_ca .Join (_eaac ,"\u002c\u0020"));
};func (_dbbc *textObject )moveTextSetLeading (_cde ,_dgedc float64 ){_dbbc ._dedg ._bcca =-_dgedc ;_dbbc .moveLP (_cde ,_dgedc );};func (_ddfdb lineRuling )asRuling ()(*ruling ,bool ){_caaf :=ruling {_gefad :_ddfdb ._ddaeg ,Color :_ddfdb .Color ,_afge :_acad };
switch _ddfdb ._ddaeg {case _ebgd :_caaf ._fgbd =_ddfdb .xMean ();_caaf ._aceb =_g .Min (_ddfdb ._dabfc .Y ,_ddfdb ._cfacg .Y );_caaf ._gddcg =_g .Max (_ddfdb ._dabfc .Y ,_ddfdb ._cfacg .Y );case _deca :_caaf ._fgbd =_ddfdb .yMean ();_caaf ._aceb =_g .Min (_ddfdb ._dabfc .X ,_ddfdb ._cfacg .X );
_caaf ._gddcg =_g .Max (_ddfdb ._dabfc .X ,_ddfdb ._cfacg .X );default:_b .Log .Error ("\u0062\u0061\u0064\u0020pr\u0069\u006d\u0061\u0072\u0079\u0020\u006b\u0069\u006e\u0064\u003d\u0025\u0064",_ddfdb ._ddaeg );return nil ,false ;};return &_caaf ,true ;
};

// Text returns the text content of the `bulletLists`.
func (_dffd *lists )Text ()string {_bgeb :=&_ca .Builder {};for _ ,_cbfag :=range *_dffd {_dacgfg :=_cbfag .Text ();_bgeb .WriteString (_dacgfg );};return _bgeb .String ();};type wordBag struct{_ff .PdfRectangle ;_dfcaf float64 ;_bacaf ,_eebd rulingList ;
_ddc float64 ;_ggeff map[int ][]*textWord ;};func (_feafb *textTable )logComposite (_efaea string ){if !_cebg {return ;};_b .Log .Info ("\u007e~\u007eP\u0061\u0072\u0061\u0020\u0025d\u0020\u0078 \u0025\u0064\u0020\u0025\u0073",_feafb ._edebd ,_feafb ._ecedc ,_efaea );
_gf .Printf ("\u0025\u0035\u0073 \u007c","");for _fbcdfg :=0;_fbcdfg < _feafb ._edebd ;_fbcdfg ++{_gf .Printf ("\u0025\u0033\u0064 \u007c",_fbcdfg );};_gf .Println ("");_gf .Printf ("\u0025\u0035\u0073 \u002b","");for _cbab :=0;_cbab < _feafb ._edebd ;
_cbab ++{_gf .Printf ("\u0025\u0033\u0073 \u002b","\u002d\u002d\u002d");};_gf .Println ("");for _gfadf :=0;_gfadf < _feafb ._ecedc ;_gfadf ++{_gf .Printf ("\u0025\u0035\u0064 \u007c",_gfadf );for _fegb :=0;_fegb < _feafb ._edebd ;_fegb ++{_gdada ,_ :=_feafb ._cdafa [_dfdgd (_fegb ,_gfadf )].parasBBox ();
_gf .Printf ("\u0025\u0033\u0064 \u007c",len (_gdada ));};_gf .Println ("");};_b .Log .Info ("\u007e~\u007eT\u0065\u0078\u0074\u0020\u0025d\u0020\u0078 \u0025\u0064\u0020\u0025\u0073",_feafb ._edebd ,_feafb ._ecedc ,_efaea );_gf .Printf ("\u0025\u0035\u0073 \u007c","");
for _gefcd :=0;_gefcd < _feafb ._edebd ;_gefcd ++{_gf .Printf ("\u0025\u0031\u0032\u0064\u0020\u007c",_gefcd );};_gf .Println ("");_gf .Printf ("\u0025\u0035\u0073 \u002b","");for _fafgf :=0;_fafgf < _feafb ._edebd ;_fafgf ++{_gf .Print ("\u002d\u002d\u002d\u002d\u002d\u002d\u002d\u002d\u002d-\u002d\u002d\u002d\u002b");
};_gf .Println ("");for _afbf :=0;_afbf < _feafb ._ecedc ;_afbf ++{_gf .Printf ("\u0025\u0035\u0064 \u007c",_afbf );for _gcabbd :=0;_gcabbd < _feafb ._edebd ;_gcabbd ++{_ccbcb ,_ :=_feafb ._cdafa [_dfdgd (_gcabbd ,_afbf )].parasBBox ();_gefea :="";_aaeee :=_ccbcb .merge ();
if _aaeee !=nil {_gefea =_aaeee .text ();};_gefea =_gf .Sprintf ("\u0025\u0071",_aggbc (_gefea ,12));_gefea =_gefea [1:len (_gefea )-1];_gf .Printf ("\u0025\u0031\u0032\u0073\u0020\u007c",_gefea );};_gf .Println ("");};};func (_cffac *textTable )toTextTable ()TextTable {if _cebg {_b .Log .Info ("t\u006fT\u0065\u0078\u0074\u0054\u0061\u0062\u006c\u0065:\u0020\u0025\u0064\u0020x \u0025\u0064",_cffac ._edebd ,_cffac ._ecedc );
};_cddgdb :=make ([][]TableCell ,_cffac ._ecedc );for _edagb :=0;_edagb < _cffac ._ecedc ;_edagb ++{_cddgdb [_edagb ]=make ([]TableCell ,_cffac ._edebd );for _gbcad :=0;_gbcad < _cffac ._edebd ;_gbcad ++{_feece :=_cffac .get (_gbcad ,_edagb );if _feece ==nil {continue ;
};_gddfe (_feece ._gfef );if _cebg {_gf .Printf ("\u0025\u0034\u0064 \u0025\u0032\u0064\u003a\u0020\u0025\u0073\u000a",_gbcad ,_edagb ,_feece );};_cddgdb [_edagb ][_gbcad ].Text =_feece .text ();_bcea :=0;_cddgdb [_edagb ][_gbcad ].Marks ._egee =_feece .toTextMarks (&_bcea );
};};_adgce :=TextTable {W :_cffac ._edebd ,H :_cffac ._ecedc ,Cells :_cddgdb };_adgce .PdfRectangle =_cffac .bbox ();return _adgce ;};func _gfe (_ec []string ,_dg int ,_eed string )int {_ccc :=_dg ;for ;_ccc < len (_ec );_ccc ++{if _ec [_ccc ]!=_eed {return _ccc ;
};};return _ccc ;};type fontEntry struct{_bdgf *_ff .PdfFont ;_cfac int64 ;};func (_bbedf *textObject )getStrokeColor ()_cf .Color {return _bbbe (_bbedf ._cbec .ColorspaceStroking ,_bbedf ._cbec .ColorStroking );};func (_dbeeb *textWord )absorb (_cefe *textWord ){_dbeeb .PdfRectangle =_baabb (_dbeeb .PdfRectangle ,_cefe .PdfRectangle );
_dbeeb ._eacb =append (_dbeeb ._eacb ,_cefe ._eacb ...);};const (_gfb =true ;_ccffe =true ;_dacgf =true ;_aecgd =false ;_faadd =false ;_ccbbg =true ;_ecbd =true ;_eda =true ;_bgbc =true ;_gdcd =false ;);func (_cfeg *stateStack )push (_dcdb *textState ){_bcdg :=*_dcdb ;
*_cfeg =append (*_cfeg ,&_bcdg )};

// Extractor stores and offers functionality for extracting content from PDF pages.
type Extractor struct{_bc string ;_gbb *_ff .PdfPageResources ;_adf _ff .PdfRectangle ;_gcd *_ff .PdfRectangle ;_dcf map[string ]fontEntry ;_gfdg map[string ]textResult ;_eea map[string ]textResult ;_dfe int64 ;_ebd int ;_gea *Options ;_ccg *_fc .PdfObject ;
_ac _fc .PdfObject ;_fab []*_ff .PdfAnnotation ;};func (_afbcd rulingList )snapToGroups ()rulingList {_ddeba ,_ggga :=_afbcd .vertsHorzs ();if len (_ddeba )> 0{_ddeba =_ddeba .snapToGroupsDirection ();};if len (_ggga )> 0{_ggga =_ggga .snapToGroupsDirection ();
};_bbffa :=append (_ddeba ,_ggga ...);_bbffa .log ("\u0073\u006e\u0061p\u0054\u006f\u0047\u0072\u006f\u0075\u0070\u0073");return _bbffa ;};func _bfeb (_facdc *wordBag ,_dcba float64 ,_cfef ,_ceegb rulingList ,_fgca bool )[]*wordBag {var _faacb []*wordBag ;
for _ ,_acdeae :=range _facdc .depthIndexes (){_eagge :=false ;for !_facdc .empty (_acdeae ){_fcgg :=_facdc .firstReadingIndex (_acdeae );_bffd :=_facdc .firstWord (_fcgg );_gcbb :=_dfdg (_bffd ,_dcba ,_cfef ,_ceegb );_facdc .removeWord (_bffd ,_fcgg );
if _babc {_b .Log .Info ("\u0066\u0069\u0072\u0073\u0074\u0057\u006f\u0072\u0064\u0020\u005e\u005e^\u005e\u0020\u0025\u0073",_bffd .String ());};for _eeea :=true ;_eeea ;_eeea =_eagge {_eagge =false ;_bgce :=_ddbb *_gcbb ._dfcaf ;_caddg :=_eaf *_gcbb ._dfcaf ;
if _fgca {_caddg =_g .MaxFloat64 ;};_begf :=_fcacc *_gcbb ._dfcaf ;if _babc {_b .Log .Info ("\u0070a\u0072a\u0057\u006f\u0072\u0064\u0073\u0020\u0064\u0065\u0070\u0074\u0068 \u0025\u002e\u0032\u0066 \u002d\u0020\u0025\u002e\u0032f\u0020\u006d\u0061\u0078\u0049\u006e\u0074\u0072\u0061\u0044\u0065\u0070\u0074\u0068\u0047\u0061\u0070\u003d\u0025\u002e\u0032\u0066\u0020\u006d\u0061\u0078\u0049\u006e\u0074\u0072\u0061R\u0065\u0061\u0064\u0069\u006e\u0067\u0047\u0061p\u003d\u0025\u002e\u0032\u0066",_gcbb .minDepth (),_gcbb .maxDepth (),_begf ,_caddg );
};if _facdc .scanBand ("\u0076\u0065\u0072\u0074\u0069\u0063\u0061\u006c",_gcbb ,_bfdd (_gaca ,0),_gcbb .minDepth ()-_begf ,_gcbb .maxDepth ()+_begf ,_dfgde ,false ,false )> 0{_eagge =true ;};if _facdc .scanBand ("\u0068\u006f\u0072\u0069\u007a\u006f\u006e\u0074\u0061\u006c",_gcbb ,_bfdd (_gaca ,_caddg ),_gcbb .minDepth (),_gcbb .maxDepth (),_dgda ,false ,false )> 0{_eagge =true ;
};if _eagge {continue ;};_gddcf :=_facdc .scanBand ("",_gcbb ,_bfdd (_eaeg ,_bgce ),_gcbb .minDepth (),_gcbb .maxDepth (),_ccga ,true ,false );if _gddcf > 0{_ecdda :=(_gcbb .maxDepth ()-_gcbb .minDepth ())/_gcbb ._dfcaf ;if (_gddcf > 1&&float64 (_gddcf )> 0.3*_ecdda )||_gddcf <=10{if _facdc .scanBand ("\u006f\u0074\u0068e\u0072",_gcbb ,_bfdd (_eaeg ,_bgce ),_gcbb .minDepth (),_gcbb .maxDepth (),_ccga ,false ,true )> 0{_eagge =true ;
};};};};_faacb =append (_faacb ,_gcbb );};};return _faacb ;};func (_gfbgg rulingList )aligned ()bool {if len (_gfbgg )< 2{return false ;};_fcgcg :=make (map[*ruling ]int );_fcgcg [_gfbgg [0]]=0;for _ ,_ebgg :=range _gfbgg [1:]{_ebab :=false ;for _aefeea :=range _fcgcg {if _ebgg .gridIntersecting (_aefeea ){_fcgcg [_aefeea ]++;
_ebab =true ;break ;};};if !_ebab {_fcgcg [_ebgg ]=0;};};_gcgc :=0;for _ ,_cgad :=range _fcgcg {if _cgad ==0{_gcgc ++;};};_aeec :=float64 (_gcgc )/float64 (len (_gfbgg ));_cgaed :=_aeec <=1.0-_cdbcb ;if _aaeb {_b .Log .Info ("\u0061\u006c\u0069\u0067\u006e\u0065\u0064\u003d\u0025\u0074\u0020\u0075\u006em\u0061\u0074\u0063\u0068\u0065\u0064=\u0025\u002e\u0032\u0066\u003d\u0025\u0064\u002f\u0025\u0064\u0020\u0076\u0065c\u0073\u003d\u0025\u0073",_cgaed ,_aeec ,_gcgc ,len (_gfbgg ),_gfbgg .String ());
};return _cgaed ;};const (_ddf ="\u0045\u0052R\u004f\u0052\u003a\u0020\u0043\u0061\u006e\u0027\u0074\u0020\u0063\u006f\u006e\u0076\u0065\u0072\u0074\u0020\u0066\u006f\u006e\u0074\u0020\u006f\u0062\u006a\u0065\u0063\u0074\u002c\u0020\u0069\u006e\u0076\u0061\u006c\u0069\u0064\u0020\u0074\u0079\u0070\u0065";
_ea ="\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0043a\u006e\u0027\u0074 g\u0065\u0074\u0020\u0066\u006f\u006et\u0020\u0070\u0072\u006f\u0070\u0065\u0072\u0074\u0069\u0065\u0073\u002c\u0020\u0066\u006fn\u0074\u0020\u006e\u006f\u0074\u0020\u0066\u006fu\u006e\u0064";
_aeg ="\u0045\u0052\u0052O\u0052\u003a\u0020\u0043\u0061\u006e\u0027\u0074\u0020\u0067\u0065\u0074\u0020\u0066\u006f\u006e\u0074\u0020\u0073\u0074\u0072\u0065\u0061\u006d\u002c\u0020\u0069\u006e\u0076a\u006c\u0069\u0064\u0020\u0074\u0079\u0070\u0065";_ccf ="E\u0052R\u004f\u0052\u003a\u0020\u004e\u006f\u0020\u0066o\u006e\u0074\u0020\u0066ou\u006e\u0064";
);func (_ddbag *subpath )isQuadrilateral ()bool {if len (_ddbag ._ddfa )< 4||len (_ddbag ._ddfa )> 5{return false ;};if len (_ddbag ._ddfa )==5{_dbcda :=_ddbag ._ddfa [0];_aacdc :=_ddbag ._ddfa [4];if _dbcda .X !=_aacdc .X ||_dbcda .Y !=_aacdc .Y {return false ;
};};return true ;};func _ccfdb (_fdcfd *list ,_eeee *_ca .Builder ,_gcbfg *string ){_cfaa :=_geef (_fdcfd ,_gcbfg );_eeee .WriteString (_cfaa );for _ ,_geeea :=range _fdcfd ._ccebg {_dgdg :=*_gcbfg +"\u0020\u0020\u0020";_ccfdb (_geeea ,_eeee ,&_dgdg );
};};

// ExtractText processes and extracts all text data in content streams and returns as a string.
// It takes into account character encodings in the PDF file, which are decoded by
// CharcodeBytesToUnicode.
// Characters that can't be decoded are replaced with MissingCodeRune ('\ufffd' = �).
func (_agaa *Extractor )ExtractText ()(string ,error ){_gdac ,_ ,_ ,_cebad :=_agaa .ExtractTextWithStats ();return _gdac ,_cebad ;};func _dfgb (_gege _fc .PdfObject ,_dccae _cf .Color )(_eg .Image ,error ){_ecbg ,_beeda :=_fc .GetStream (_gege );if !_beeda {return nil ,nil ;
};_dfbaa ,_dcfed :=_ff .NewXObjectImageFromStream (_ecbg );if _dcfed !=nil {return nil ,_dcfed ;};_bagb ,_dcfed :=_dfbaa .ToImage ();if _dcfed !=nil {return nil ,_dcfed ;};return _gbgdf (_bagb ,_dccae ),nil ;};func _eacc (_fdag []compositeCell )[]float64 {var _efacef []*textLine ;
_ecbe :=0;for _ ,_bgfb :=range _fdag {_ecbe +=len (_bgfb .paraList );_efacef =append (_efacef ,_bgfb .lines ()...);};_dc .Slice (_efacef ,func (_abfdc ,_gbddb int )bool {_fddgc ,_bgfdg :=_efacef [_abfdc ],_efacef [_gbddb ];_ecfg ,_abef :=_fddgc ._cdab ,_bgfdg ._cdab ;
if !_abbg (_ecfg -_abef ){return _ecfg < _abef ;};return _fddgc .Llx < _bgfdg .Llx ;});if _cebg {_gf .Printf ("\u0020\u0020\u0020 r\u006f\u0077\u0042\u006f\u0072\u0064\u0065\u0072\u0073:\u0020%\u0064 \u0070a\u0072\u0061\u0073\u0020\u0025\u0064\u0020\u006c\u0069\u006e\u0065\u0073\u000a",_ecbe ,len (_efacef ));
for _bcceg ,_ggdad :=range _efacef {_gf .Printf ("\u0025\u0038\u0064\u003a\u0020\u0025\u0073\u000a",_bcceg ,_ggdad );};};var _bebfe []float64 ;_eadgfd :=_efacef [0];var _gbgf [][]*textLine ;_gcfb :=[]*textLine {_eadgfd };for _gcbg ,_deddc :=range _efacef [1:]{if _deddc .Ury < _eadgfd .Lly {_aggb :=0.5*(_deddc .Ury +_eadgfd .Lly );
if _cebg {_gf .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0036\u002e\u0032\u0066\u0020\u003c\u0020\u0025\u0036.\u0032f\u0020\u0062\u006f\u0072\u0064\u0065\u0072\u003d\u0025\u0036\u002e\u0032\u0066\u000a"+"\u0009\u0020\u0071\u003d\u0025\u0073\u000a\u0009\u0020p\u003d\u0025\u0073\u000a",_gcbg ,_deddc .Ury ,_eadgfd .Lly ,_aggb ,_eadgfd ,_deddc );
};_bebfe =append (_bebfe ,_aggb );_gbgf =append (_gbgf ,_gcfb );_gcfb =nil ;};_gcfb =append (_gcfb ,_deddc );if _deddc .Lly < _eadgfd .Lly {_eadgfd =_deddc ;};};if len (_gcfb )> 0{_gbgf =append (_gbgf ,_gcfb );};if _cebg {_gf .Printf (" \u0020\u0020\u0020\u0020\u0020\u0020 \u0072\u006f\u0077\u0043\u006f\u0072\u0072\u0069\u0064o\u0072\u0073\u003d%\u0036.\u0032\u0066\u000a",_bebfe );
};if _cebg {_b .Log .Info ("\u0072\u006f\u0077\u003d\u0025\u0064",len (_fdag ));for _dbaga ,_adff :=range _fdag {_gf .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0073\u000a",_dbaga ,_adff );};_b .Log .Info ("\u0067r\u006f\u0075\u0070\u0073\u003d\u0025d",len (_gbgf ));
for _bbda ,_cgdaa :=range _gbgf {_gf .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0064\u000a",_bbda ,len (_cgdaa ));for _bcdbf ,_cgce :=range _cgdaa {_gf .Printf ("\u0025\u0038\u0064\u003a\u0020\u0025\u0073\u000a",_bcdbf ,_cgce );};};};_decb :=true ;
for _bgbg ,_cecdb :=range _gbgf {_bfccb :=true ;for _efdac ,_cegag :=range _fdag {if _cebg {_gf .Printf ("\u0020\u0020\u0020\u007e\u007e\u007e\u0067\u0072\u006f\u0075\u0070\u0020\u0025\u0064\u0020\u006f\u0066\u0020\u0025\u0064\u0020\u0063\u0065\u006cl\u0020\u0025\u0064\u0020\u006ff\u0020\u0025d\u0020\u0025\u0073\u000a",_bgbg ,len (_gbgf ),_efdac ,len (_fdag ),_cegag );
};if !_cegag .hasLines (_cecdb ){if _cebg {_gf .Printf ("\u0020\u0020\u0020\u0021\u0021\u0021\u0067\u0072\u006f\u0075\u0070\u0020\u0025d\u0020\u006f\u0066\u0020\u0025\u0064 \u0063\u0065\u006c\u006c\u0020\u0025\u0064\u0020\u006f\u0066\u0020\u0025\u0064 \u004f\u0055\u0054\u000a",_bgbg ,len (_gbgf ),_efdac ,len (_fdag ));
};_bfccb =false ;break ;};};if !_bfccb {_decb =false ;break ;};};if !_decb {if _cebg {_b .Log .Info ("\u0072\u006f\u0077\u0020\u0063o\u0072\u0072\u0069\u0064\u006f\u0072\u0073\u0020\u0064\u006f\u006e\u0027\u0074 \u0073\u0070\u0061\u006e\u0020\u0061\u006c\u006c\u0020\u0063\u0065\u006c\u006c\u0073\u0020\u0069\u006e\u0020\u0072\u006f\u0077\u002e\u0020\u0069\u0067\u006e\u006f\u0072\u0069\u006eg");
};_bebfe =nil ;};if _cebg &&_bebfe !=nil {_gf .Printf ("\u0020\u0020\u0020\u0020\u0020\u0020\u0020\u0020\u002a\u002a*\u0072\u006f\u0077\u0043\u006f\u0072\u0072i\u0064\u006f\u0072\u0073\u003d\u0025\u0036\u002e\u0032\u0066\u000a",_bebfe );};return _bebfe ;
};var (_bea =_gd .New ("\u0074\u0079p\u0065\u0020\u0063h\u0065\u0063\u006b\u0020\u0065\u0072\u0072\u006f\u0072");_dac =_gd .New ("\u0072\u0061\u006e\u0067\u0065\u0020\u0063\u0068\u0065\u0063\u006b\u0020e\u0072\u0072\u006f\u0072"););type markKind int ;func (_fcge *shapesState )stroke (_ffff *[]pathSection ){_adba :=pathSection {_adg :_fcge ._afgc ,Color :_fcge ._caddc .getStrokeColor ()};
*_ffff =append (*_ffff ,_adba );if _aaeb {_gf .Printf ("\u0020 \u0020\u0020S\u0054\u0052\u004fK\u0045\u003a\u0020\u0025\u0064\u0020\u0073t\u0072\u006f\u006b\u0065\u0073\u0020s\u0073\u003d\u0025\u0073\u0020\u0063\u006f\u006c\u006f\u0072\u003d%\u002b\u0076\u0020\u0025\u0036\u002e\u0032\u0066\u000a",len (*_ffff ),_fcge ,_fcge ._caddc .getStrokeColor (),_adba .bbox ());
if _bdgfg {for _cgbc ,_ffbd :=range _fcge ._afgc {_gf .Printf ("\u0025\u0038\u0064\u003a\u0020\u0025\u0073\u000a",_cgbc ,_ffbd );if _cgbc ==10{break ;};};};};};func _ededg (_gageg ,_cfgaf int )int {if _gageg > _cfgaf {return _gageg ;};return _cfgaf ;};
func (_dffda *textPara )bbox ()_ff .PdfRectangle {return _dffda .PdfRectangle };

// String returns a description of `w`.
func (_dagf *textWord )String ()string {return _gf .Sprintf ("\u0025\u002e2\u0066\u0020\u0025\u0036\u002e\u0032\u0066\u0020\u0066\u006f\u006e\u0074\u0073\u0069\u007a\u0065\u003d\u0025\u002e\u0032\u0066\u0020\"%\u0073\u0022",_dagf ._efdea ,_dagf .PdfRectangle ,_dagf ._gfbc ,_dagf ._dbefc );
};func (_bebcg *textWord )bbox ()_ff .PdfRectangle {return _bebcg .PdfRectangle };func (_febe *textObject )setHorizScaling (_cce float64 ){if _febe ==nil {return ;};_febe ._dedg ._cceb =_cce ;};func (_fecb *shapesState )cubicTo (_acdc ,_eagb ,_bbbb ,_ade ,_ffcc ,_eebe float64 ){if _fdgc {_b .Log .Info ("\u0063\u0075\u0062\u0069\u0063\u0054\u006f\u003a");
};_fecb .addPoint (_ffcc ,_eebe );};func (_cbgag *wordBag )removeWord (_dgcc *textWord ,_fbfgf int ){_eaba :=_cbgag ._ggeff [_fbfgf ];_eaba =_gecfg (_eaba ,_dgcc );if len (_eaba )==0{delete (_cbgag ._ggeff ,_fbfgf );}else {_cbgag ._ggeff [_fbfgf ]=_eaba ;
};};func (_baeb rulingList )merge ()*ruling {_bedf :=_baeb [0]._fgbd ;_gacgf :=_baeb [0]._aceb ;_cbeec :=_baeb [0]._gddcg ;for _ ,_bddcd :=range _baeb [1:]{_bedf +=_bddcd ._fgbd ;if _bddcd ._aceb < _gacgf {_gacgf =_bddcd ._aceb ;};if _bddcd ._gddcg > _cbeec {_cbeec =_bddcd ._gddcg ;
};};_afca :=&ruling {_gefad :_baeb [0]._gefad ,_afge :_baeb [0]._afge ,Color :_baeb [0].Color ,_fgbd :_bedf /float64 (len (_baeb )),_aceb :_gacgf ,_gddcg :_cbeec };if _dade {_b .Log .Info ("\u006de\u0072g\u0065\u003a\u0020\u0025\u0032d\u0020\u0076e\u0063\u0073\u0020\u0025\u0073",len (_baeb ),_afca );
for _accfb ,_aaag :=range _baeb {_gf .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0073\u000a",_accfb ,_aaag );};};return _afca ;};func (_fced *textObject )setTextLeading (_cbb float64 ){if _fced ==nil {return ;};_fced ._dedg ._bcca =_cbb ;};func (_faaf *textObject )getFont (_aedae string )(*_ff .PdfFont ,error ){if _faaf ._cbgd ._dcf !=nil {_aee ,_fbf :=_faaf .getFontDict (_aedae );
if _fbf !=nil {_b .Log .Debug ("\u0045\u0052\u0052OR\u003a\u0020\u0067\u0065\u0074\u0046\u006f\u006e\u0074:\u0020n\u0061m\u0065=\u0025\u0073\u002c\u0020\u0065\u0072\u0072\u006f\u0072\u003a\u0020\u0025\u0073",_aedae ,_fbf .Error ());return nil ,_fbf ;};
_faaf ._cbgd ._dfe ++;_fcbf ,_bdbc :=_faaf ._cbgd ._dcf [_aee .String ()];if _bdbc {_fcbf ._cfac =_faaf ._cbgd ._dfe ;return _fcbf ._bdgf ,nil ;};};_dcde ,_dga :=_faaf .getFontDict (_aedae );if _dga !=nil {return nil ,_dga ;};_dcae ,_dga :=_faaf .getFontDirect (_aedae );
if _dga !=nil {return nil ,_dga ;};if _faaf ._cbgd ._dcf !=nil {_ggcd :=fontEntry {_dcae ,_faaf ._cbgd ._dfe };if len (_faaf ._cbgd ._dcf )>=_gcdb {var _gbgg []string ;for _efdb :=range _faaf ._cbgd ._dcf {_gbgg =append (_gbgg ,_efdb );};_dc .Slice (_gbgg ,func (_cacc ,_dgac int )bool {return _faaf ._cbgd ._dcf [_gbgg [_cacc ]]._cfac < _faaf ._cbgd ._dcf [_gbgg [_dgac ]]._cfac ;
});delete (_faaf ._cbgd ._dcf ,_gbgg [0]);};_faaf ._cbgd ._dcf [_dcde .String ()]=_ggcd ;};return _dcae ,nil ;};type rectRuling struct{_gbgcg rulingKind ;_eace markKind ;_cf .Color ;_ff .PdfRectangle ;};func (_bgbef *ruling )alignsPrimary (_adaed *ruling )bool {return _bgbef ._gefad ==_adaed ._gefad &&_g .Abs (_bgbef ._fgbd -_adaed ._fgbd )< _aeeg *0.5;
};func _dcbff (_facgb ,_dedbc _cd .Point )bool {_bbgee :=_g .Abs (_facgb .X -_dedbc .X );_dede :=_g .Abs (_facgb .Y -_dedbc .Y );return _afag (_dede ,_bbgee );};func _fcabg (_fggab []rulingList )(rulingList ,rulingList ){var _fabe rulingList ;for _ ,_gagef :=range _fggab {_fabe =append (_fabe ,_gagef ...);
};return _fabe .vertsHorzs ();};func _dbcg (_fbcc map[float64 ]map[float64 ]gridTile )[]float64 {_bgbd :=make ([]float64 ,0,len (_fbcc ));_fddgf :=make (map[float64 ]struct{},len (_fbcc ));for _ ,_fgcdf :=range _fbcc {for _acadf :=range _fgcdf {if _ ,_fdgce :=_fddgf [_acadf ];
_fdgce {continue ;};_bgbd =append (_bgbd ,_acadf );_fddgf [_acadf ]=struct{}{};};};_dc .Float64s (_bgbd );return _bgbd ;};func (_dfbc *textObject )moveText (_cgdc ,_gcg float64 ){_dfbc .moveLP (_cgdc ,_gcg )};func _dbae (_fgfa string )string {_gede :=[]rune (_fgfa );
return string (_gede [:len (_gede )-1])};func (_dgcg gridTile )contains (_baaa _ff .PdfRectangle )bool {if _dgcg .numBorders ()< 3{return false ;};if _dgcg ._bfac &&_baaa .Llx < _dgcg .Llx -_aaaf {return false ;};if _dgcg ._gfdb &&_baaa .Urx > _dgcg .Urx +_aaaf {return false ;
};if _dgcg ._dddffa &&_baaa .Lly < _dgcg .Lly -_aaaf {return false ;};if _dgcg ._gcabff &&_baaa .Ury > _dgcg .Ury +_aaaf {return false ;};return true ;};

// List returns all the list objects detected on the page.
// It detects all the bullet point Lists from a given pdf page and builds a slice of bullet list objects.
// A given bullet list object has a tree structure.
// Each bullet point list is extracted with the text content it contains and all the sub lists found under it as children in the tree.
// The rest content of the pdf is ignored and only text in the bullet point lists are extracted.
// The list extraction is done in two ways.
// 1. If the document is tagged then the lists are extracted using the tags provided in the document.
// 2. Otherwise the bullet lists are extracted from the raw text using regex matching.
// By default the document tag is used if available.
// However this can be disabled using `DisableDocumentTags` in the `Options` object.
// Sometimes disabling document tags option might give a better bullet list extraction if the document was tagged incorrectly.
//
//	    options := &Options{
//		     DisableDocumentTags: false, // this means use document tag if available
//	    }
//	    ex, err := NewWithOptions(page, options)
//	    // handle error
//	    pageText, _, _, err := ex.ExtractPageText()
//	    // handle error
//	    lists := pageText.List()
//	    txt := lists.Text()
func (_dbbb PageText )List ()lists {_ffbf :=!_dbbb ._abga ._cecfd ;_gebe :=_dbbb .getParagraphs ();_ageb :=true ;if _dbbb ._fcb ==nil ||*_dbbb ._fcb ==nil {_ageb =false ;};_gbca :=_gebe .list ();if _ageb &&_ffbf {_fbbcg :=_bagfe (&_gebe );_abcg :=&structTreeRoot {};
_abcg .parseStructTreeRoot (*_dbbb ._fcb );if _abcg ._ecdca ==nil {_b .Log .Debug ("\u004c\u0069\u0073\u0074\u003a\u0020\u0073t\u0072\u0075\u0063\u0074\u0054\u0072\u0065\u0065\u0052\u006f\u006f\u0074\u0020\u0064\u006f\u0065\u0073\u006e'\u0074\u0020\u0068\u0061\u0076e\u0020\u0061\u006e\u0079\u0020\u0063\u006f\u006e\u0074e\u006e\u0074\u002c\u0020\u0075\u0073\u0069\u006e\u0067\u0020\u0074\u0065\u0078\u0074\u0020\u006d\u0061\u0074\u0063\u0068\u0069\u006e\u0067\u0020\u006d\u0065\u0074\u0068\u006f\u0064\u0020\u0069\u006e\u0073\u0074\u0065\u0061\u0064\u002e");
return _gbca ;};_gbca =_abcg .buildList (_fbbcg ,_dbbb ._efecb );};return _gbca ;};func (_ceafg compositeCell )hasLines (_ggea []*textLine )bool {for _dgfa ,_dgdbea :=range _ggea {_degge :=_ddeb (_ceafg .PdfRectangle ,_dgdbea .PdfRectangle );if _cebg {_gf .Printf ("\u0020\u0020\u0020\u0020\u0020\u0020\u005e\u005e\u005e\u0069\u006e\u0074\u0065\u0072\u0073e\u0063t\u0073\u003d\u0025\u0074\u0020\u0025\u0064\u0020\u006f\u0066\u0020\u0025\u0064\u000a",_degge ,_dgfa ,len (_ggea ));
_gf .Printf ("\u0020\u0020\u0020\u0020  \u005e\u005e\u005e\u0063\u006f\u006d\u0070\u006f\u0073\u0069\u0074\u0065\u003d\u0025s\u000a",_ceafg );_gf .Printf ("\u0020 \u0020 \u0020\u0020\u0020\u006c\u0069\u006e\u0065\u003d\u0025\u0073\u000a",_dgdbea );};if _degge {return true ;
};};return false ;};func _degde (_cddg *textLine )float64 {return _cddg ._egbe [0].Llx };

// NewWithOptions an Extractor instance for extracting content from the input PDF page with options.
func NewWithOptions (page *_ff .PdfPage ,options *Options )(*Extractor ,error ){const _acd ="\u0065x\u0074\u0072\u0061\u0063\u0074\u006f\u0072\u002e\u004e\u0065\u0077W\u0069\u0074\u0068\u004f\u0070\u0074\u0069\u006f\u006e\u0073";_dbf ,_ece :=page .GetAllContentStreams ();
if _ece !=nil {return nil ,_ece ;};_cff ,_fda :=page .GetStructTreeRoot ();if !_fda {_b .Log .Debug ("T\u0068\u0065\u0020\u0070\u0064\u0066\u0020\u0064\u006f\u0063\u0075\u006d\u0065\u006e\u0074\u0020\u0069\u0073\u0020\u006e\u006f\u0074\u0020\u0074\u0061\u0067g\u0065d\u002e\u0020\u0053\u0074r\u0075\u0063t\u0054\u0072\u0065\u0065\u0052\u006f\u006f\u0074\u0020\u0064\u006f\u0065\u0073\u006e\u0027\u0074\u0020\u0065\u0078\u0069\u0073\u0074\u002e");
};_ffd :=page .GetContainingPdfObject ();_fbe ,_ece :=page .GetMediaBox ();if _ece !=nil {return nil ,_gf .Errorf ("\u0065\u0078\u0074r\u0061\u0063\u0074\u006fr\u0020\u0072\u0065\u0071\u0075\u0069\u0072e\u0073\u0020\u006d\u0065\u0064\u0069\u0061\u0042\u006f\u0078\u002e\u0020\u0025\u0076",_ece );
};_cfe :=&Extractor {_bc :_dbf ,_gbb :page .Resources ,_adf :*_fbe ,_gcd :page .CropBox ,_dcf :map[string ]fontEntry {},_gfdg :map[string ]textResult {},_eea :map[string ]textResult {},_gea :options ,_ccg :_cff ,_ac :_ffd };if _cfe ._adf .Llx > _cfe ._adf .Urx {_b .Log .Info ("\u004d\u0065\u0064\u0069\u0061\u0042o\u0078\u0020\u0068\u0061\u0073\u0020\u0058\u0020\u0063\u006f\u006f\u0072\u0064\u0069\u006e\u0061\u0074\u0065\u0073\u0020r\u0065\u0076\u0065\u0072\u0073\u0065\u0064\u002e\u0020\u0025\u002e\u0032\u0066\u0020F\u0069x\u0069\u006e\u0067\u002e",_cfe ._adf );
_cfe ._adf .Llx ,_cfe ._adf .Urx =_cfe ._adf .Urx ,_cfe ._adf .Llx ;};if _cfe ._adf .Lly > _cfe ._adf .Ury {_b .Log .Info ("\u004d\u0065\u0064\u0069\u0061\u0042o\u0078\u0020\u0068\u0061\u0073\u0020\u0059\u0020\u0063\u006f\u006f\u0072\u0064\u0069\u006e\u0061\u0074\u0065\u0073\u0020r\u0065\u0076\u0065\u0072\u0073\u0065\u0064\u002e\u0020\u0025\u002e\u0032\u0066\u0020F\u0069x\u0069\u006e\u0067\u002e",_cfe ._adf );
_cfe ._adf .Lly ,_cfe ._adf .Ury =_cfe ._adf .Ury ,_cfe ._adf .Lly ;};if _cfe ._gea !=nil {if _cfe ._gea .IncludeAnnotations {_cfe ._fab ,_ece =page .GetAnnotations ();if _ece !=nil {_b .Log .Debug ("\u0045\u0072r\u006f\u0072\u0020\u0067\u0065\u0074\u0074\u0069\u006e\u0067\u0020\u0061\u006e\u006e\u006f\u0074\u0061\u0074\u0069\u006f\u006e\u0073: \u0025\u0076",_ece );
};};};_gg .TrackUse (_acd );return _cfe ,nil ;};func (_ccag paraList )sortTopoOrder (){_abfc :=_ccag .topoOrder ();_ccag .reorder (_abfc )};func _eaeb (_cbcb bounded )float64 {return -_cbcb .bbox ().Lly };func (_dcded *textWord )addDiacritic (_ggeg string ){_fgcg :=_dcded ._eacb [len (_dcded ._eacb )-1];
_fgcg ._ffcaf +=_ggeg ;_fgcg ._ffcaf =_e .NFKC .String (_fgcg ._ffcaf );};type ruling struct{_gefad rulingKind ;_afge markKind ;_cf .Color ;_fgbd float64 ;_aceb float64 ;_gddcg float64 ;_cafb float64 ;};func (_eeaf *textPara )fontsize ()float64 {return _eeaf ._gfef [0]._dcdbf };
func _egdc (_beea map[int ]intSet )[]int {_dbebcg :=make ([]int ,0,len (_beea ));for _gaba :=range _beea {_dbebcg =append (_dbebcg ,_gaba );};_dc .Ints (_dbebcg );return _dbebcg ;};func (_cgfd *textLine )text ()string {var _fdeg []string ;for _ ,_ebad :=range _cgfd ._egbe {if _ebad ._fecgf {_fdeg =append (_fdeg ,"\u0020");
};_fdeg =append (_fdeg ,_ebad ._dbefc );};_afdc :=_ca .Join (_fdeg ,"");_deda :=_dge ([]rune (_afdc ));return _deda ._eef ;};func _gddfe (_cedae []*textLine ){_dc .Slice (_cedae ,func (_cbfef ,_affd int )bool {_fdba ,_fbabb :=_cedae [_cbfef ],_cedae [_affd ];
return _fdba ._cdab < _fbabb ._cdab ;});};func _cbad (_bgfed []TextMark ,_cbbge *int )[]TextMark {_cfde :=_bgfed [len (_bgfed )-1];_dfae :=[]rune (_cfde .Text );if len (_dfae )==1{_bgfed =_bgfed [:len (_bgfed )-1];_cggd :=_bgfed [len (_bgfed )-1];*_cbbge =_cggd .Offset +len (_cggd .Text );
}else {_acbb :=_dbae (_cfde .Text );*_cbbge +=len (_acbb )-len (_cfde .Text );_cfde .Text =_acbb ;};return _bgfed ;};func (_fcee *textTable )put (_acede ,_geffg int ,_gdfcd *textPara ){_fcee ._eafac [_dfdgd (_acede ,_geffg )]=_gdfcd ;};

// ApplyArea processes the page text only within the specified area `bbox`.
// Each time ApplyArea is called, it updates the result set in `pt`.
// Can be called multiple times in a row with different bounding boxes.
func (_badb *PageText )ApplyArea (bbox _ff .PdfRectangle ){_agef :=make ([]*textMark ,0,len (_badb ._agbg ));for _ ,_aaed :=range _badb ._agbg {if _ddeb (_aaed .bbox (),bbox ){_agef =append (_agef ,_aaed );};};var _cfab paraList ;_fbeac :="";_egfc :=len (_agef );
for _cfcdf :=0;_cfcdf < 360&&_egfc > 0;_cfcdf +=90{_dgfe :=make ([]*textMark ,0,len (_agef )-_egfc );for _ ,_aagg :=range _agef {if _aagg ._eecb ==_cfcdf {_dgfe =append (_dgfe ,_aagg );};};if len (_dgfe )> 0{if _badb ._abga ._aadcf {_fbeac +=_bcda (_dgfe ,_badb ._cbeg );
}else {_eceb :=_cdbe (_dgfe ,_badb ._cbeg ,nil ,nil ,_badb ._abga ._cgca );_cfab =append (_cfab ,_eceb ...);};_egfc -=len (_dgfe );};};if _badb ._abga ._aadcf {_badb ._agag =_fbeac ;}else {_baee :=new (_fd .Buffer );_cfab .writeText (_baee );_badb ._agag =_baee .String ();
_badb ._gbeg =_cfab .toTextMarks ();_badb ._ccdc =_cfab .tables ();};};

// String returns a string describing `pt`.
func (_cbfad PageText )String ()string {_gegc :=_gf .Sprintf ("P\u0061\u0067\u0065\u0054ex\u0074:\u0020\u0025\u0064\u0020\u0065l\u0065\u006d\u0065\u006e\u0074\u0073",len (_cbfad ._agbg ));_ebde :=[]string {"\u002d"+_gegc };for _ ,_ddef :=range _cbfad ._agbg {_ebde =append (_ebde ,_ddef .String ());
};_ebde =append (_ebde ,"\u002b"+_gegc );return _ca .Join (_ebde ,"\u000a");};func _abgd (_edeb ,_efcf bounded )float64 {_ffec :=_fgcc (_edeb ,_efcf );if !_abbg (_ffec ){return _ffec ;};return _gddf (_edeb ,_efcf );};func (_fcaa *textPara )taken ()bool {return _fcaa ==nil ||_fcaa ._acfg };
func _da (_bb string ,_efd bool ,_daf bool )BidiText {_ba :="\u006c\u0074\u0072";if _daf {_ba ="\u0074\u0074\u0062";}else if !_efd {_ba ="\u0072\u0074\u006c";};return BidiText {_eef :_bb ,_bgd :_ba };};func (_cfba *wordBag )allWords ()[]*textWord {var _eega []*textWord ;
for _ ,_gafe :=range _cfba ._ggeff {_eega =append (_eega ,_gafe ...);};return _eega ;};func _baabb (_geag ,_fbfd _ff .PdfRectangle )_ff .PdfRectangle {return _ff .PdfRectangle {Llx :_g .Min (_geag .Llx ,_fbfd .Llx ),Lly :_g .Min (_geag .Lly ,_fbfd .Lly ),Urx :_g .Max (_geag .Urx ,_fbfd .Urx ),Ury :_g .Max (_geag .Ury ,_fbfd .Ury )};
};func (_becgd *compositeCell )updateBBox (){for _ ,_dbbeg :=range _becgd .paraList {_becgd .PdfRectangle =_baabb (_becgd .PdfRectangle ,_dbbeg .PdfRectangle );};};func (_adagc *subpath )close (){if !_ddgef (_adagc ._ddfa [0],_adagc .last ()){_adagc .add (_adagc ._ddfa [0]);
};_adagc ._fbcf =true ;_adagc .removeDuplicates ();};func _afff (_febf []*textLine ,_fefc string )string {var _bfeg _ca .Builder ;_bffca :=0.0;for _gfad ,_dafe :=range _febf {_ddaa :=_dafe .text ();_abbfd :=_dafe ._cdab ;if _gfad < len (_febf )-1{_bffca =_febf [_gfad +1]._cdab ;
}else {_bffca =0.0;};_bfeg .WriteString (_fefc );_bfeg .WriteString (_ddaa );if _bffca !=_abbfd {_bfeg .WriteString ("\u000a");}else {_bfeg .WriteString ("\u0020");};};return _bfeg .String ();};func (_ddacg rulingList )splitSec ()[]rulingList {_dc .Slice (_ddacg ,func (_fefde ,_aadf int )bool {_gggf ,_abdg :=_ddacg [_fefde ],_ddacg [_aadf ];
if _gggf ._aceb !=_abdg ._aceb {return _gggf ._aceb < _abdg ._aceb ;};return _gggf ._gddcg < _abdg ._gddcg ;});_ebae :=make (map[*ruling ]struct{},len (_ddacg ));_acdbb :=func (_bebb *ruling )rulingList {_ddebf :=rulingList {_bebb };_ebae [_bebb ]=struct{}{};
for _ ,_fcgga :=range _ddacg {if _ ,_gaadg :=_ebae [_fcgga ];_gaadg {continue ;};for _ ,_bggca :=range _ddebf {if _fcgga .alignsSec (_bggca ){_ddebf =append (_ddebf ,_fcgga );_ebae [_fcgga ]=struct{}{};break ;};};};return _ddebf ;};_bcae :=[]rulingList {_acdbb (_ddacg [0])};
for _ ,_eggc :=range _ddacg [1:]{if _ ,_bebc :=_ebae [_eggc ];_bebc {continue ;};_bcae =append (_bcae ,_acdbb (_eggc ));};return _bcae ;};func _cdbb (_ebbd []int )[]int {_bbce :=make ([]int ,len (_ebbd ));for _bbafa ,_bfegd :=range _ebbd {_bbce [len (_ebbd )-1-_bbafa ]=_bfegd ;
};return _bbce ;};func _dgdbd (_bbcc string ,_bafa []rulingList ){_b .Log .Info ("\u0024\u0024 \u0025\u0064\u0020g\u0072\u0069\u0064\u0073\u0020\u002d\u0020\u0025\u0073",len (_bafa ),_bbcc );for _face ,_aade :=range _bafa {_gf .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0073\u000a",_face ,_aade .String ());
};};func _effg (_bded ,_gfacg bounded )float64 {_dfef :=_gddf (_bded ,_gfacg );if !_abbg (_dfef ){return _dfef ;};return _fgcc (_bded ,_gfacg );};const (_ccebbf rulingKind =iota ;_deca ;_ebgd ;);func (_gcag *shapesState )lastpointEstablished ()(_cd .Point ,bool ){if _gcag ._acc {return _gcag ._bcb ,false ;
};_agcae :=len (_gcag ._afgc );if _agcae > 0&&_gcag ._afgc [_agcae -1]._fbcf {return _gcag ._afgc [_agcae -1].last (),false ;};return _cd .Point {},true ;};

// Options extractor options.
type Options struct{

// DisableDocumentTags specifies whether to use the document tags during list extraction.
DisableDocumentTags bool ;

// ApplyCropBox will extract page text based on page cropbox if set to `true`.
ApplyCropBox bool ;

// UseSimplerExtractionProcess will skip topological text ordering and table processing.
//
// NOTE: While normally the extra processing is beneficial, it can also lead to problems when it does not work.
// Thus it is a flag to allow the user to control this process.
//
// Skipping some extraction processes would also lead to the reduced processing time.
UseSimplerExtractionProcess bool ;

// IncludeAnnotations specifies whether to include annotations in the extraction process, default value is `false`.
IncludeAnnotations bool ;

// If enabled, this option prevents splitting of one line into several lines.
DisableMultiColumns bool ;

// RelaxedMode specifies whether to use relaxed mode for processing the objects,
// If enabled UniPDF will automatically try to fix invalid parameters length and value.
// Default is `false`.
RelaxedMode bool ;};func _cge (_bef *TextMarkArray )string {_dgf :="";for _ ,_aefe :=range _bef .Elements (){_dgf +=_aefe .Text ;};return _dgf ;};func (_ed *PageFonts )extractPageResourcesToFont (_abd *_ff .PdfPageResources )error {if _abd .Font ==nil {return _gd .New (_ccf );
};_cb ,_cfeb :=_fc .GetDict (_abd .Font );if !_cfeb {return _gd .New (_ddf );};for _ ,_dab :=range _cb .Keys (){var (_ffca =true ;_ffed []byte ;_ffeb string ;);_bee ,_gfcb :=_abd .GetFontByName (_dab );if !_gfcb {return _gd .New (_ea );};_bgg ,_bbd :=_ff .NewPdfFontFromPdfObject (_bee );
if _bbd !=nil {return _bbd ;};_bf :=_bgg .FontDescriptor ();_ggd :=_bgg .FontDescriptor ().FontName .String ();_bcd :=_bgg .Subtype ();if _de (_ed .Fonts ,_ggd ){continue ;};if len (_bgg .ToUnicode ())==0{_ffca =false ;};if _bf .FontFile !=nil {if _cbc ,_edb :=_fc .GetStream (_bf .FontFile );
_edb {_ffed ,_bbd =_fc .DecodeStream (_cbc );if _bbd !=nil {return _bbd ;};_ffeb =_ggd +"\u002e\u0070\u0066\u0062";};}else if _bf .FontFile2 !=nil {if _fea ,_fcf :=_fc .GetStream (_bf .FontFile2 );_fcf {_ffed ,_bbd =_fc .DecodeStream (_fea );if _bbd !=nil {return _bbd ;
};_ffeb =_ggd +"\u002e\u0074\u0074\u0066";};}else if _bf .FontFile3 !=nil {if _bacg ,_cbg :=_fc .GetStream (_bf .FontFile3 );_cbg {_ffed ,_bbd =_fc .DecodeStream (_bacg );if _bbd !=nil {return _bbd ;};_ffeb =_ggd +"\u002e\u0063\u0066\u0066";};};if len (_ffeb )< 1{_b .Log .Debug (_aeg );
};_dcfg :=Font {FontName :_ggd ,PdfFont :_bgg ,IsCID :_bgg .IsCID (),IsSimple :_bgg .IsSimple (),ToUnicode :_ffca ,FontType :_bcd ,FontData :_ffed ,FontFileName :_ffeb ,FontDescriptor :_bf };_ed .Fonts =append (_ed .Fonts ,_dcfg );};return nil ;};func (_ffgc *wordBag )depthIndexes ()[]int {if len (_ffgc ._ggeff )==0{return nil ;
};_dafa :=make ([]int ,len (_ffgc ._ggeff ));_ccce :=0;for _gfgg :=range _ffgc ._ggeff {_dafa [_ccce ]=_gfgg ;_ccce ++;};_dc .Ints (_dafa );return _dafa ;};func (_gbbe *imageExtractContext )extractInlineImage (_acf *_ef .ContentStreamInlineImage ,_eefb _ef .GraphicsState ,_acde *_ff .PdfPageResources )error {_ced ,_dabc :=_acf .ToImage (_acde );
if _dabc !=nil {return _dabc ;};_dcg ,_dabc :=_acf .GetColorSpace (_acde );if _dabc !=nil {return _dabc ;};if _dcg ==nil {_dcg =_ff .NewPdfColorspaceDeviceGray ();};_faf ,_dabc :=_dcg .ImageToRGB (*_ced );if _dabc !=nil {return _dabc ;};_dda :=ImageMark {Image :&_faf ,Width :_eefb .CTM .ScalingFactorX (),Height :_eefb .CTM .ScalingFactorY (),Angle :_eefb .CTM .Angle ()};
_dda .X ,_dda .Y =_eefb .CTM .Translation ();_gbbe ._aga =append (_gbbe ._aga ,_dda );_gbbe ._abda ++;return nil ;};func _fdec (_bdbe *wordBag ,_edfb int )*textLine {_gfge :=_bdbe .firstWord (_edfb );_faaca :=textLine {PdfRectangle :_gfge .PdfRectangle ,_dcdbf :_gfge ._gfbc ,_cdab :_gfge ._efdea };
_faaca .pullWord (_bdbe ,_gfge ,_edfb );return &_faaca ;};func (_eabc rulingList )secMinMax ()(float64 ,float64 ){_bggea ,_fbae :=_eabc [0]._aceb ,_eabc [0]._gddcg ;for _ ,_bgbacc :=range _eabc [1:]{if _bgbacc ._aceb < _bggea {_bggea =_bgbacc ._aceb ;};
if _bgbacc ._gddcg > _fbae {_fbae =_bgbacc ._gddcg ;};};return _bggea ,_fbae ;};type compositeCell struct{_ff .PdfRectangle ;paraList ;};func _bfdbb (_efed []*textMark ,_abdbba _ff .PdfRectangle )*textWord {_aeaab :=_efed [0].PdfRectangle ;_fecf :=_efed [0]._dgec ;
for _ ,_bfbcfa :=range _efed [1:]{_aeaab =_baabb (_aeaab ,_bfbcfa .PdfRectangle );if _bfbcfa ._dgec > _fecf {_fecf =_bfbcfa ._dgec ;};};return &textWord {PdfRectangle :_aeaab ,_eacb :_efed ,_efdea :_abdbba .Ury -_aeaab .Lly ,_gfbc :_fecf };};func (_dcabd lineRuling )xMean ()float64 {return 0.5*(_dcabd ._dabfc .X +_dcabd ._cfacg .X )};


// PageTextOptions holds various options available in extraction process.
type PageTextOptions struct{_cecfd bool ;_aadcf bool ;_cgca bool ;};func (_gfec rulingList )findPrimSec (_gfbga ,_gdbfb float64 )*ruling {for _ ,_gfdd :=range _gfec {if _abbg (_gfdd ._fgbd -_gfbga )&&_gfdd ._aceb -_bgee <=_gdbfb &&_gdbfb <=_gfdd ._gddcg +_bgee {return _gfdd ;
};};return nil ;};func _eaeg (_cgcc *wordBag ,_ccgd *textWord ,_agdcd float64 )bool {return _cgcc .Urx <=_ccgd .Llx &&_ccgd .Llx < _cgcc .Urx +_agdcd ;};func (_afdb *wordBag )applyRemovals (_bgfd map[int ]map[*textWord ]struct{}){for _dabe ,_gbfd :=range _bgfd {if len (_gbfd )==0{continue ;
};_gbga :=_afdb ._ggeff [_dabe ];_bdbb :=len (_gbga )-len (_gbfd );if _bdbb ==0{delete (_afdb ._ggeff ,_dabe );continue ;};_cege :=make ([]*textWord ,_bdbb );_ede :=0;for _ ,_cadbf :=range _gbga {if _ ,_cdda :=_gbfd [_cadbf ];!_cdda {_cege [_ede ]=_cadbf ;
_ede ++;};};_afdb ._ggeff [_dabe ]=_cege ;};};func _dbgd (_aaeaaa ,_bfgg float64 )bool {return _g .Abs (_aaeaaa -_bfgg )<=_bgee };func _dbfe (_bbfg string )bool {if _d .RuneCountInString (_bbfg )< _deb {return false ;};_aabb ,_bbgdc :=_d .DecodeLastRuneInString (_bbfg );
if _bbgdc <=0||!_bga .Is (_bga .Hyphen ,_aabb ){return false ;};_aabb ,_bbgdc =_d .DecodeLastRuneInString (_bbfg [:len (_bbfg )-_bbgdc ]);return _bbgdc > 0&&!_bga .IsSpace (_aabb );};

// ExtractPageImages returns the image contents of the page extractor, including data
// and position, size information for each image.
// A set of options to control page image extraction can be passed in. The options
// parameter can be nil for the default options. By default, inline stencil masks
// are not extracted.
func (_cbe *Extractor )ExtractPageImages (options *ImageExtractOptions )(*PageImages ,error ){_ddd :=&imageExtractContext {_ffaf :options };_aac :=_ddd .extractContentStreamImages (_cbe ._bc ,_cbe ._gbb );if _aac !=nil {return nil ,_aac ;};return &PageImages {Images :_ddd ._aga },nil ;
};

// TextTable represents a table.
// Cells are ordered top-to-bottom, left-to-right.
// Cells[y] is the (0-offset) y'th row in the table.
// Cells[y][x] is the (0-offset) x'th column in the table.
type TextTable struct{_ff .PdfRectangle ;W ,H int ;Cells [][]TableCell ;};func (_egca *shapesState )lineTo (_gdad ,_abdcb float64 ){if _fdgc {_b .Log .Info ("\u006c\u0069\u006eeT\u006f\u0028\u0025\u002e\u0032\u0066\u002c\u0025\u002e\u0032\u0066\u0020\u0070\u003d\u0025\u002e\u0032\u0066",_gdad ,_abdcb ,_egca .devicePoint (_gdad ,_abdcb ));
};_egca .addPoint (_gdad ,_abdcb );};func _daa (_dfcg []byte ,_fdbd *_ff .PdfFont )string {_ggbg :=_fdbd .BytesToCharcodes (_dfcg );_eadeg ,_gce ,_gge :=_fdbd .CharcodesToStrings (_ggbg ,"");if _gge > 0{_b .Log .Debug ("\u0072\u0065nd\u0065\u0072\u0054e\u0078\u0074\u003a\u0020num\u0043ha\u0072\u0073\u003d\u0025\u0064\u0020\u006eum\u004d\u0069\u0073\u0073\u0065\u0073\u003d%\u0064",_gce ,_gge );
};_bbbc :=_ca .Join (_eadeg ,"");return _bbbc ;};

// String returns a description of `b`.
func (_gfea *wordBag )String ()string {var _fdac []string ;for _ ,_degd :=range _gfea .depthIndexes (){_eeaa :=_gfea ._ggeff [_degd ];for _ ,_eced :=range _eeaa {_fdac =append (_fdac ,_eced ._dbefc );};};return _gf .Sprintf ("\u0025.\u0032\u0066\u0020\u0066\u006f\u006e\u0074\u0073\u0069\u007a\u0065=\u0025\u002e\u0032\u0066\u0020\u0025\u0064\u0020\u0025\u0071",_gfea .PdfRectangle ,_gfea ._dfcaf ,len (_fdac ),_fdac );
};func (_bgba *textLine )endsInHyphen ()bool {_fbgdb :=_bgba ._egbe [len (_bgba ._egbe )-1];_fbbg :=_fbgdb ._dbefc ;_decde ,_gbbgd :=_d .DecodeLastRuneInString (_fbbg );if _gbbgd <=0||!_bga .Is (_bga .Hyphen ,_decde ){return false ;};if _fbgdb ._fecgf &&_dbfe (_fbbg ){return true ;
};return _dbfe (_bgba .text ());};func (_efba rulingList )toTilings ()(rulingList ,[]gridTiling ){_efba .log ("\u0074o\u0054\u0069\u006c\u0069\u006e\u0067s");if len (_efba )==0{return nil ,nil ;};_efba =_efba .tidied ("\u0061\u006c\u006c");_efba .log ("\u0074\u0069\u0064\u0069\u0065\u0064");
_eefac :=_efba .toGrids ();_baag :=make ([]gridTiling ,len (_eefac ));for _cadge ,_caeb :=range _eefac {_baag [_cadge ]=_caeb .asTiling ();};return _efba ,_baag ;};func (_cbbb *ruling )encloses (_abegc ,_gade float64 )bool {return _cbbb ._aceb -_bgee <=_abegc &&_gade <=_cbbb ._gddcg +_bgee ;
};func _gcb (_cdaf *Extractor ,_dacg *_ff .PdfPageResources ,_bgec _ef .GraphicsState ,_ddbc *textState ,_cfge *stateStack )*textObject {return &textObject {_cbgd :_cdaf ,_bfbf :_dacg ,_cbec :_bgec ,_ceed :_cfge ,_dedg :_ddbc ,_dddff :_cd .IdentityMatrix (),_bfad :_cd .IdentityMatrix ()};
};