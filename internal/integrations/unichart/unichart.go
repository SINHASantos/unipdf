//
// Copyright 2020 FoxyUtils ehf. All rights reserved.
//
// This is a commercial product and requires a license to operate.
// A trial license can be obtained at https://unidoc.io
//
// DO NOT EDIT: generated by unitwist Go source code obfuscator.
//
// Use of this source code is governed by the UniDoc End User License Agreement
// terms that can be accessed at https://unidoc.io/eula/

package unichart ;import (_f "bytes";_cc "fmt";_aa "github.com/unidoc/unichart/render";_fce "github.com/unidoc/unipdf/v3/common";_d "github.com/unidoc/unipdf/v3/contentstream";_fb "github.com/unidoc/unipdf/v3/contentstream/draw";_fd "github.com/unidoc/unipdf/v3/core";
_ag "github.com/unidoc/unipdf/v3/model";_b "image/color";_a "io";_fc "math";);func (_cgcc *Renderer )Text (text string ,x ,y int ){_cgcc ._be .Add_q ();_cgcc .SetFont (_cgcc ._cfg );_cge ,_dgf ,_abfb ,_ :=_bcd (_cgcc ._ff );_cgcc ._be .Add_rg (_cge ,_dgf ,_abfb );
_cgcc ._be .Translate (float64 (x ),float64 (y )).Scale (1,-1);if _egff :=_cgcc ._cff ;_egff !=0{_cgcc ._be .RotateDeg (_egff );};_cgcc ._be .Add_BT ().Add_TL (_cgcc ._ee );var (_aga =_cgcc ._cfg .Encoder ();_geb =_cgcc .wrapText (text );_fge =len (_geb );
);for _baa ,_age :=range _geb {_cgcc ._be .Add_TJ (_fd .MakeStringFromBytes (_aga .Encode (_age )));if _baa !=_fge -1{_cgcc ._be .Add_Tstar ();};};_cgcc ._be .Add_ET ();_cgcc ._be .Add_Q ();};func (_beb *Renderer )QuadCurveTo (cx ,cy ,x ,y int ){_beb ._be .Add_v (float64 (x ),float64 (y ),float64 (cx ),float64 (cy ));
};func _ggd (_ffd float64 )float64 {return _ffd *_fc .Pi /180.0};func _bbd (_fbe string ,_fda int ,_dde func (_fd .PdfObjectName )bool )_fd .PdfObjectName {_ddg :=_fd .PdfObjectName (_cc .Sprintf ("\u0025\u0073\u0025\u0064",_fbe ,_fda ));for _fdd :=_fda ;
_dde (_ddg );{_fdd ++;_ddg =_fd .PdfObjectName (_cc .Sprintf ("\u0025\u0073\u0025\u0064",_fbe ,_fdd ));};return _ddg ;};func (_fba *Renderer )Close (){_fba ._be .Add_h ()};func (_baac *Renderer )getTextWidth (_cgd string )float64 {var _bdd float64 ;for _ ,_eb :=range _cgd {_db ,_ccce :=_baac ._cfg .GetRuneMetrics (_eb );
if !_ccce {_fce .Log .Debug ("\u0045\u0052\u0052OR\u003a\u0020\u0075\u006e\u0073\u0075\u0070\u0070\u006fr\u0074e\u0064 \u0072u\u006e\u0065\u0020\u0025\u0076\u0020\u0069\u006e\u0020\u0066\u006f\u006e\u0074",_eb );};_bdd +=_db .Wx ;};return _baac ._ee *_bdd /1000.0;
};func (_cgc *Renderer )MoveTo (x ,y int ){_cgc ._be .Add_m (float64 (x ),float64 (y ))};func (_ege *Renderer )ArcTo (cx ,cy int ,rx ,ry ,startAngle ,deltaAngle float64 ){startAngle =_bg (2.0*_fc .Pi -startAngle );deltaAngle =_bg (-deltaAngle );_ga ,_ge :=deltaAngle ,1;
if _fc .Abs (deltaAngle )> 90.0{_ge =int (_fc .Ceil (_fc .Abs (deltaAngle )/90.0));_ga =deltaAngle /float64 (_ge );};var (_cca =_ggd (_ga /2);_cce =_fc .Abs (4.0/3.0*(1.0-_fc .Cos (_cca ))/_fc .Sin (_cca ));_egf =float64 (cx );_dd =float64 (cy ););for _baf :=0;
_baf < _ge ;_baf ++{_egeg :=_ggd (startAngle +float64 (_baf )*_ga );_de :=_ggd (startAngle +float64 (_baf +1)*_ga );_gfc :=_fc .Cos (_egeg );_aeb :=_fc .Cos (_de );_bb :=_fc .Sin (_egeg );_ed :=_fc .Sin (_de );var _ad []float64 ;if _ga > 0{_ad =[]float64 {_egf +rx *_gfc ,_dd -ry *_bb ,_egf +rx *(_gfc -_cce *_bb ),_dd -ry *(_bb +_cce *_gfc ),_egf +rx *(_aeb +_cce *_ed ),_dd -ry *(_ed -_cce *_aeb ),_egf +rx *_aeb ,_dd -ry *_ed };
}else {_ad =[]float64 {_egf +rx *_gfc ,_dd -ry *_bb ,_egf +rx *(_gfc +_cce *_bb ),_dd -ry *(_bb -_cce *_gfc ),_egf +rx *(_aeb -_cce *_ed ),_dd -ry *(_ed +_cce *_aeb ),_egf +rx *_aeb ,_dd -ry *_ed };};if _baf ==0{_ege ._be .Add_l (_ad [0],_ad [1]);};_ege ._be .Add_c (_ad [2],_ad [3],_ad [4],_ad [5],_ad [6],_ad [7]);
};};func (_cgb *Renderer )Circle (radius float64 ,x ,y int ){_dg :=radius ;if _abf :=_cgb ._ba ;_abf !=0{_dg -=_abf /2;};_fef :=_dg *0.551784;_dgg :=_fb .CubicBezierPath {Curves :[]_fb .CubicBezierCurve {_fb .NewCubicBezierCurve (-_dg ,0,-_dg ,_fef ,-_fef ,_dg ,0,_dg ),_fb .NewCubicBezierCurve (0,_dg ,_fef ,_dg ,_dg ,_fef ,_dg ,0),_fb .NewCubicBezierCurve (_dg ,0,_dg ,-_fef ,_fef ,-_dg ,0,-_dg ),_fb .NewCubicBezierCurve (0,-_dg ,-_fef ,-_dg ,-_dg ,-_fef ,-_dg ,0)}};
if _dgc :=_cgb ._ba ;_dgc !=0{_dgg =_dgg .Offset (_dgc /2,_dgc /2);};_dgg =_dgg .Offset (float64 (x ),float64 (y ));_fb .DrawBezierPathWithCreator (_dgg ,_cgb ._be );};func (_da *Renderer )ClearTextRotation (){_da ._cff =0};func (_efb *Renderer )FillStroke (){_efb ._be .Add_B ()};
func (_ca *Renderer )ResetStyle (){_ca .SetFillColor (_b .Black );_ca .SetStrokeColor (_b .Transparent );_ca .SetStrokeWidth (0);_ca .SetFont (_ag .DefaultFont ());_ca .SetFontColor (_b .Black );_ca .SetFontSize (12);_ca .SetTextRotation (0);};func (_cg *Renderer )SetStrokeWidth (width float64 ){_cg ._ba =width ;
_cg ._be .Add_w (width )};func (_aag *Renderer )MeasureText (text string )_aa .Box {_aee :=_aag ._ee ;_gce ,_bbg :=_aag ._cfg .GetFontDescriptor ();if _bbg !=nil {_fce .Log .Debug ("W\u0041\u0052\u004e\u003a\u0020\u0055n\u0061\u0062\u006c\u0065\u0020\u0074o\u0020\u0067\u0065\u0074\u0020\u0066\u006fn\u0074\u0020\u0064\u0065\u0073\u0063\u0072\u0069\u0070\u0074o\u0072");
}else {_edc ,_bda :=_gce .GetCapHeight ();if _bda !=nil {_fce .Log .Debug ("\u0057\u0041\u0052\u004e\u003a\u0020\u0055\u006e\u0061\u0062\u006c\u0065\u0020t\u006f\u0020\u0067\u0065\u0074\u0020f\u006f\u006e\u0074\u0020\u0063\u0061\u0070\u0020\u0068\u0065\u0069\u0067\u0068t\u003a\u0020\u0025\u0076",_bda );
}else {_aee =_edc /1000.0*_aag ._ee ;};};var (_efa =0.0;_ce =_aag .wrapText (text ););for _ ,_ea :=range _ce {if _cac :=_aag .getTextWidth (_ea );_cac > _efa {_efa =_cac ;};};_beg :=_aa .NewBox (0,0,int (_efa ),int (_aee ));if _abfe :=_aag ._cff ;_abfe !=0{_beg =_beg .Corners ().Rotate (_abfe ).Box ();
};return _beg ;};func (_bac *Renderer )wrapText (_eff string )[]string {var (_edd []string ;_agfc []rune ;);for _ ,_aba :=range _eff {if _aba =='\n'{_edd =append (_edd ,string (_agfc ));_agfc =[]rune {};continue ;};_agfc =append (_agfc ,_aba );};if len (_agfc )> 0{_edd =append (_edd ,string (_agfc ));
};return _edd ;};func (_gc *Renderer )SetFontColor (color _b .Color ){_gc ._ff =color };func (_fed *Renderer )SetDPI (dpi float64 ){_fed ._agf =dpi };func (_gg *Renderer )Stroke (){_gg ._be .Add_S ()};func _bg (_afb float64 )float64 {return _afb *180/_fc .Pi };
func (_bbc *Renderer )Fill (){_bbc ._be .Add_f ()};func (_eef *Renderer )SetStrokeDashArray (dashArray []float64 ){_ffa :=make ([]int64 ,len (dashArray ));for _fdg ,_ccc :=range dashArray {_ffa [_fdg ]=int64 (_ccc );};_eef ._be .Add_d (_ffa ,0);};func (_gea *Renderer )Save (w _a .Writer )error {if w ==nil {return nil ;
};_ ,_gcc :=_a .Copy (w ,_f .NewBuffer (_gea ._be .Bytes ()));return _gcc ;};func (_eeb *Renderer )SetClassName (name string ){};func (_fg *Renderer )LineTo (x ,y int ){_fg ._be .Add_l (float64 (x ),float64 (y ))};func _fcd (_bbce _b .Color )(uint8 ,uint8 ,uint8 ,uint8 ){_af ,_ffe ,_cb ,_fdgg :=_bbce .RGBA ();
return uint8 (_af >>8),uint8 (_ffe >>8),uint8 (_cb >>8),uint8 (_fdgg >>8);};func (_eg *Renderer )SetFillColor (color _b .Color ){_eg ._ae =color ;_ega ,_ffc ,_ab ,_ :=_bcd (color );_eg ._be .Add_rg (_ega ,_ffc ,_ab );};func (_cea *Renderer )SetTextRotation (radians float64 ){_cea ._cff =_bg (-radians )};
func _bcd (_aae _b .Color )(float64 ,float64 ,float64 ,float64 ){_fdb ,_fea ,_baff ,_ceg :=_fcd (_aae );return float64 (_fdb )/255,float64 (_fea )/255,float64 (_baff )/255,float64 (_ceg )/255;};func (_feg *Renderer )SetFont (font _aa .Font ){_dfb ,_fdge :=font .(*_ag .PdfFont );
if !_fdge {_fce .Log .Debug ("\u0045R\u0052\u004f\u0052\u003a\u0020\u0069\u006e\u0076\u0061\u006c\u0069d\u0020\u0066\u006f\u006e\u0074\u0020\u0074\u0079\u0070\u0065");return ;};_bab ,_fdge :=_feg ._g [_dfb ];if !_fdge {_bab =_bbd ("\u0046\u006f\u006e\u0074",1,_feg ._cf .HasFontByName );
if _cgf :=_feg ._cf .SetFontByName (_bab ,_dfb .ToPdfObject ());_cgf !=nil {_fce .Log .Debug ("\u0045\u0052\u0052\u004f\u0052:\u0020\u0063\u006f\u0075\u006c\u0064\u0020\u006e\u006f\u0074\u0020\u0061\u0064d\u0020\u0066\u006f\u006e\u0074\u0020\u0025\u0076\u0020\u0074\u006f\u0020\u0072\u0065\u0073\u006f\u0075\u0072\u0063\u0065\u0073",_dfb );
};_feg ._g [_dfb ]=_bab ;};_feg ._be .Add_Tf (_bab ,_feg ._ee );_feg ._cfg =_dfb ;};func NewRenderer (cc *_d .ContentCreator ,res *_ag .PdfPageResources )func (int ,int )(_aa .Renderer ,error ){return func (_gf ,_df int )(_aa .Renderer ,error ){_ef :=&Renderer {_fe :_gf ,_e :_df ,_agf :72,_be :cc ,_cf :res ,_g :map[*_ag .PdfFont ]_fd .PdfObjectName {}};
_ef .ResetStyle ();return _ef ,nil ;};};type Renderer struct{_fe int ;_e int ;_agf float64 ;_be *_d .ContentCreator ;_cf *_ag .PdfPageResources ;_ae _b .Color ;_ec _b .Color ;_ba float64 ;_cfg *_ag .PdfFont ;_ee float64 ;_ff _b .Color ;_cff float64 ;_g map[*_ag .PdfFont ]_fd .PdfObjectName ;
};func (_cd *Renderer )GetDPI ()float64 {return _cd ._agf };func (_fbf *Renderer )SetStrokeColor (color _b .Color ){_fbf ._ec =color ;_bd ,_bag ,_aed ,_ :=_bcd (color );_fbf ._be .Add_RG (_bd ,_bag ,_aed );};func (_abb *Renderer )SetFontSize (size float64 ){_abb ._ee =size };
