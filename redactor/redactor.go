//
// Copyright 2020 FoxyUtils ehf. All rights reserved.
//
// This is a commercial product and requires a license to operate.
// A trial license can be obtained at https://unidoc.io
//
// DO NOT EDIT: generated by unitwist Go source code obfuscator.
//
// Use of this source code is governed by the UniDoc End User License Agreement
// terms that can be accessed at https://unidoc.io/eula/

package redactor ;import (_fc "errors";_a "fmt";_ea "github.com/unidoc/unipdf/v4/common";_c "github.com/unidoc/unipdf/v4/contentstream";_gc "github.com/unidoc/unipdf/v4/core";_ga "github.com/unidoc/unipdf/v4/creator";_gd "github.com/unidoc/unipdf/v4/extractor";
_bb "github.com/unidoc/unipdf/v4/model";_d "io";_b "regexp";_g "sort";_e "strings";);func _ccdce (_dcc []*targetMap ){for _cbcd ,_aff :=range _dcc {for _gbbc ,_faba :=range _dcc {if _cbcd !=_gbbc {_fcfa ,_adcf :=_adac (*_aff ,*_faba );if _fcfa {_ddcc (_faba ,_adcf );
};};};};};func _dfd (_fba *_bb .PdfFont ,_cgb _gd .TextMark )float64 {_cbfa :=0.001;_egg :=_cgb .Th /100;if _fba .Subtype ()=="\u0054\u0079\u0070e\u0033"{_cbfa =1;};_ecd ,_cf :=_fba .GetRuneMetrics (' ');if !_cf {_ecd ,_cf =_fba .GetCharMetrics (32);};
if !_cf {_ecd ,_ =_bb .DefaultFont ().GetRuneMetrics (' ');};_ad :=_cbfa *((_ecd .Wx *_cgb .FontSize +_cgb .Tc +_cgb .Tw )/_egg );return _ad ;};

// WriteToFile writes the redacted document to file specified by `outputPath`.
func (_gaeg *Redactor )WriteToFile (outputPath string )error {if _dcg :=_gaeg ._dffd .WriteToFile (outputPath );_dcg !=nil {return _a .Errorf ("\u0066\u0061\u0069l\u0065\u0064\u0020\u0074o\u0020\u0077\u0072\u0069\u0074\u0065\u0020t\u0068\u0065\u0020\u006f\u0075\u0074\u0070\u0075\u0074\u0020\u0066\u0069\u006c\u0065");
};return nil ;};func _ffec (_egd *matchedIndex ,_ccec [][]int )(bool ,[][]int ){_adfa :=[][]int {};for _ ,_gdf :=range _ccec {if _egd ._fbcb < _gdf [0]&&_egd ._aaaf > _gdf [1]{_adfa =append (_adfa ,_gdf );};};return len (_adfa )> 0,_adfa ;};

// RectangleProps defines properties of the redaction rectangle to be drawn.
type RectangleProps struct{FillColor _ga .Color ;BorderWidth float64 ;FillOpacity float64 ;};func _ce (_fed *_c .ContentStreamOperations ,_dfb string ,_bfb int )error {_ec :=_c .ContentStreamOperations {};var _fg _c .ContentStreamOperation ;for _gfe ,_bc :=range *_fed {if _gfe ==_bfb {if _dfb =="\u0027"{_gfc :=_c .ContentStreamOperation {Operand :"\u0054\u002a"};
_ec =append (_ec ,&_gfc );_fg .Params =_bc .Params ;_fg .Operand ="\u0054\u006a";_ec =append (_ec ,&_fg );}else if _dfb =="\u0022"{_ceb :=_bc .Params [:2];Tc ,Tw :=_ceb [0],_ceb [1];_ge :=_c .ContentStreamOperation {Params :[]_gc .PdfObject {Tc },Operand :"\u0054\u0063"};
_ec =append (_ec ,&_ge );_ge =_c .ContentStreamOperation {Params :[]_gc .PdfObject {Tw },Operand :"\u0054\u0077"};_ec =append (_ec ,&_ge );_fg .Params =[]_gc .PdfObject {_bc .Params [2]};_fg .Operand ="\u0054\u006a";_ec =append (_ec ,&_fg );};};_ec =append (_ec ,_bc );
};*_fed =_ec ;return nil ;};func _gag (_efc localSpanMarks ,_gbd *_gd .TextMarkArray ,_fbe *_bb .PdfFont ,_gfab ,_dbf string )([]_gc .PdfObject ,error ){_aaa :=_cdg (_gbd );Tj ,_dad :=_feab (_gbd );if _dad !=nil {return nil ,_dad ;};_afd :=len (_gfab );
_gcfd :=len (_aaa );_cce :=-1;_eaba :=_gc .MakeFloat (Tj );if _aaa !=_dbf {_adc :=_efc ._gga ;if _adc ==0{_cce =_e .LastIndex (_gfab ,_aaa );}else {_cce =_e .Index (_gfab ,_aaa );};}else {_cce =_e .Index (_gfab ,_aaa );};_cgbd :=_cce +_gcfd ;_eded :=[]_gc .PdfObject {};
if _cce ==0&&_cgbd ==_afd {_eded =append (_eded ,_eaba );}else if _cce ==0&&_cgbd < _afd {_fbad :=_bgg (_gfab [_cgbd :],_fbe );_dbcc :=_gc .MakeStringFromBytes (_fbad );_eded =append (_eded ,_eaba ,_dbcc );}else if _cce > 0&&_cgbd >=_afd {_eef :=_bgg (_gfab [:_cce ],_fbe );
_dge :=_gc .MakeStringFromBytes (_eef );_eded =append (_eded ,_dge ,_eaba );}else if _cce > 0&&_cgbd < _afd {_adg :=_bgg (_gfab [:_cce ],_fbe );_afdc :=_bgg (_gfab [_cgbd :],_fbe );_fbg :=_gc .MakeStringFromBytes (_adg );_abe :=_gc .MakeString (string (_afdc ));
_eded =append (_eded ,_fbg ,_eaba ,_abe );};return _eded ,nil ;};

// New instantiates a Redactor object with given PdfReader and `regex` pattern.
func New (reader *_bb .PdfReader ,opts *RedactionOptions ,rectProps *RectangleProps )*Redactor {if rectProps ==nil {rectProps =RedactRectanglePropsNew ();};return &Redactor {_cgc :reader ,_bbgc :opts ,_dffd :_ga .New (),_bad :rectProps };};func _de (_dfa *_gd .TextMarkArray )int {_ca :=0;
_bg :=_dfa .Elements ();if _bg [0].Text =="\u0020"{_ca ++;};if _bg [_dfa .Len ()-1].Text =="\u0020"{_ca ++;};return _ca ;};

// Redact executes the redact operation on a pdf file and updates the content streams of all pages of the file.
func (_dgac *Redactor )Redact ()error {_fced ,_gdac :=_dgac ._cgc .GetNumPages ();if _gdac !=nil {return _a .Errorf ("\u0066\u0061\u0069\u006c\u0065\u0064 \u0074\u006f\u0020\u0067\u0065\u0074\u0020\u0074\u0068\u0065\u0020\u006e\u0075m\u0062\u0065\u0072\u0020\u006f\u0066\u0020P\u0061\u0067\u0065\u0073");
};_dbggd :=_dgac ._bad .FillColor ;_bgfa :=_dgac ._bad .BorderWidth ;_ebbf :=_dgac ._bad .FillOpacity ;for _beb :=1;_beb <=_fced ;_beb ++{_dadc ,_gegf :=_dgac ._cgc .GetPage (_beb );if _gegf !=nil {return _gegf ;};_bbcf ,_gegf :=_gd .New (_dadc );if _gegf !=nil {return _gegf ;
};_eabg ,_ ,_ ,_gegf :=_bbcf .ExtractPageText ();if _gegf !=nil {return _gegf ;};_aefa :=_eabg .GetContentStreamOps ();_fcg ,_dgf ,_gegf :=_dgac .redactPage (_aefa ,_dadc .Resources );if _dgf ==nil {_ea .Log .Info ("N\u006f\u0020\u006d\u0061\u0074\u0063\u0068\u0020\u0066\u006f\u0075\u006e\u0064\u0020\u0066\u006f\u0072\u0020t\u0068\u0065\u0020\u0070\u0072\u006f\u0076\u0069\u0064\u0065d \u0070\u0061\u0074t\u0061r\u006e\u002e");
_dgf =_aefa ;};_aad :=_c .ContentStreamOperation {Operand :"\u006e"};*_dgf =append (*_dgf ,&_aad );_dadc .SetContentStreams ([]string {_dgf .String ()},_gc .NewFlateEncoder ());if _gegf !=nil {return _gegf ;};_gdde ,_gegf :=_dadc .GetMediaBox ();if _gegf !=nil {return _gegf ;
};if _dadc .MediaBox ==nil {_dadc .MediaBox =_gdde ;};if _dbe :=_dgac ._dffd .AddPage (_dadc );_dbe !=nil {return _dbe ;};_g .Slice (_fcg ,func (_ebg ,_ccee int )bool {return _fcg [_ebg ]._cea < _fcg [_ccee ]._cea });_dbfd :=_gdde .Ury ;for _ ,_ead :=range _fcg {_bae :=_ead ._daa ;
_aga :=_dgac ._dffd .NewRectangle (_bae .Llx ,_dbfd -_bae .Lly ,_bae .Urx -_bae .Llx ,-(_bae .Ury -_bae .Lly ));_aga .SetFillColor (_dbggd );_aga .SetBorderWidth (_bgfa );_aga .SetFillOpacity (_ebbf );if _afg :=_dgac ._dffd .Draw (_aga );_afg !=nil {return nil ;
};};};_dgac ._dffd .SetOutlineTree (_dgac ._cgc .GetOutlineTree ());return nil ;};func _gdb (_caf *_c .ContentStreamOperation ,_ede _gc .PdfObject ,_efb []localSpanMarks )error {_bbc ,_dd :=_gc .GetArray (_caf .Params [0]);_dbc :=[]_gc .PdfObject {};if !_dd {_ea .Log .Debug ("\u0045\u0052\u0052OR\u003a\u0020\u0054\u004a\u0020\u006f\u0070\u003d\u0025s\u0020G\u0065t\u0041r\u0072\u0061\u0079\u0056\u0061\u006c\u0020\u0066\u0061\u0069\u006c\u0065\u0064",_caf );
return _a .Errorf ("\u0073\u0070\u0061\u006e\u004d\u0061\u0072\u006bs\u002e\u0042\u0042ox\u0020\u0068\u0061\u0073\u0020\u006eo\u0020\u0062\u006f\u0075\u006e\u0064\u0069\u006e\u0067\u0020\u0062\u006f\u0078\u002e\u0020s\u0070\u0061\u006e\u004d\u0061\u0072\u006b\u0073=\u0025\u0073",_caf );
};_bgf ,_deb :=_adb (_efb );if len (_deb )==1{_be :=_deb [0];_dff :=_bgf [_be ];if len (_dff )==1{_fgd :=_dff [0];_dba :=_fgd ._fbb ;_ecg :=_eb (_dba );_ab ,_eaef :=_gfaa (_ede ,_ecg );if _eaef !=nil {return _eaef ;};_aa ,_eaef :=_gag (_fgd ,_dba ,_ecg ,_ab ,_be );
if _eaef !=nil {return _eaef ;};for _ ,_fad :=range _bbc .Elements (){if _fad ==_ede {_dbc =append (_dbc ,_aa ...);}else {_dbc =append (_dbc ,_fad );};};}else {_fef :=_dff [0]._fbb ;_bcg :=_eb (_fef );_egf ,_bd :=_gfaa (_ede ,_bcg );if _bd !=nil {return _bd ;
};_cc ,_bd :=_cbcb (_egf ,_dff );if _bd !=nil {return _bd ;};_eca :=_eaeb (_cc );_aeb :=_gcb (_egf ,_eca ,_bcg );for _ ,_eac :=range _bbc .Elements (){if _eac ==_ede {_dbc =append (_dbc ,_aeb ...);}else {_dbc =append (_dbc ,_eac );};};};_caf .Params [0]=_gc .MakeArray (_dbc ...);
}else if len (_deb )> 1{_dfff :=_efb [0];_bab :=_dfff ._fbb ;_ ,_gdd :=_bca (_bab );_bgc :=_bab .Elements ()[_gdd ];_ee :=_bgc .Font ;_dbg ,_fb :=_gfaa (_ede ,_ee );if _fb !=nil {return _fb ;};_af ,_fb :=_cbcb (_dbg ,_efb );if _fb !=nil {return _fb ;};
_ged :=_eaeb (_af );_bcgc :=_gcb (_dbg ,_ged ,_ee );for _ ,_cbc :=range _bbc .Elements (){if _cbc ==_ede {_dbc =append (_dbc ,_bcgc ...);}else {_dbc =append (_dbc ,_cbc );};};_caf .Params [0]=_gc .MakeArray (_dbc ...);};return nil ;};func _fbag (_aef ,_dbgd string )[]int {if len (_dbgd )==0{return nil ;
};var _acee []int ;for _ededc :=0;_ededc < len (_aef );{_fdf :=_e .Index (_aef [_ededc :],_dbgd );if _fdf < 0{return _acee ;};_acee =append (_acee ,_ededc +_fdf );_ededc +=_fdf +len (_dbgd );};return _acee ;};func _feab (_cfe *_gd .TextMarkArray )(float64 ,error ){_gea ,_fedd :=_cfe .BBox ();
if !_fedd {return 0.0,_a .Errorf ("\u0073\u0070\u0061\u006e\u004d\u0061\u0072\u006bs\u002e\u0042\u0042ox\u0020\u0068\u0061\u0073\u0020\u006eo\u0020\u0062\u006f\u0075\u006e\u0064\u0069\u006e\u0067\u0020\u0062\u006f\u0078\u002e\u0020s\u0070\u0061\u006e\u004d\u0061\u0072\u006b\u0073=\u0025\u0073",_cfe );
};_cbe :=_de (_cfe );_dae :=0.0;_ ,_beg :=_bca (_cfe );_bga :=_cfe .Elements ()[_beg ];_gee :=_bga .Font ;if _cbe > 0{_dae =_dfd (_gee ,_bga );};_dag :=(_gea .Urx -_gea .Llx );_dag =_dag +_dae *float64 (_cbe );Tj :=_cbd (_dag ,_bga .FontSize ,_bga .Th );
return Tj ,nil ;};func _cbcb (_fca string ,_bde []localSpanMarks )([]placeHolders ,error ){_eefb :="";_bbg :=[]placeHolders {};for _ggf ,_bag :=range _bde {_eeg :=_bag ._fbb ;_adfe :=_bag ._dbga ;_cgg :=_cdg (_eeg );_geg ,_ccg :=_feab (_eeg );if _ccg !=nil {return nil ,_ccg ;
};if _cgg !=_eefb {var _ag []int ;if _ggf ==0&&_adfe !=_cgg {_bba :=_e .Index (_fca ,_cgg );_ag =[]int {_bba };}else if _ggf ==len (_bde )-1{_aee :=_e .LastIndex (_fca ,_cgg );_ag =[]int {_aee };}else {_ag =_fbag (_fca ,_cgg );};_adfg :=placeHolders {_gaa :_ag ,_fe :_cgg ,_ac :_geg };
_bbg =append (_bbg ,_adfg );};_eefb =_cgg ;};return _bbg ,nil ;};func _eae (_ba *_c .ContentStreamOperations ,_cb map[_gc .PdfObject ][]localSpanMarks )error {for _ed ,_bf :=range _cb {if _ed ==nil {continue ;};_cd ,_ff ,_ae :=_dga (_ba ,_ed );if !_ae {_ea .Log .Debug ("Pd\u0066\u004fb\u006a\u0065\u0063\u0074\u0020\u0025\u0073\u006e\u006ft\u0020\u0066\u006f\u0075\u006e\u0064\u0020\u0069\u006e\u0020\u0073\u0069\u0064\u0065\u0020\u0074\u0068\u0065\u0020\u0063\u006f\u006e\u0074\u0065\u006e\u0074\u0073\u0074r\u0065a\u006d\u0020\u006f\u0070\u0065\u0072\u0061\u0074i\u006fn\u0020\u0025s",_ed ,_ba );
return nil ;};if _cd .Operand =="\u0054\u006a"{_bfe :=_bcgb (_cd ,_ed ,_bf );if _bfe !=nil {return _bfe ;};}else if _cd .Operand =="\u0054\u004a"{_gf :=_gdb (_cd ,_ed ,_bf );if _gf !=nil {return _gf ;};}else if _cd .Operand =="\u0027"||_cd .Operand =="\u0022"{_cbf :=_ce (_ba ,_cd .Operand ,_ff );
if _cbf !=nil {return _cbf ;};_cbf =_bcgb (_cd ,_ed ,_bf );if _cbf !=nil {return _cbf ;};};};return nil ;};func _dga (_gbgf *_c .ContentStreamOperations ,PdfObj _gc .PdfObject )(*_c .ContentStreamOperation ,int ,bool ){for _abba ,_ebd :=range *_gbgf {_eea :=_ebd .Operand ;
if _eea =="\u0054\u006a"{_ega :=_gc .TraceToDirectObject (_ebd .Params [0]);if _ega ==PdfObj {return _ebd ,_abba ,true ;};}else if _eea =="\u0054\u004a"{_dbggg ,_eaa :=_gc .GetArray (_ebd .Params [0]);if !_eaa {return nil ,_abba ,_eaa ;};for _ ,_faf :=range _dbggg .Elements (){if _faf ==PdfObj {return _ebd ,_abba ,true ;
};};}else if _eea =="\u0022"{_egb :=_gc .TraceToDirectObject (_ebd .Params [2]);if _egb ==PdfObj {return _ebd ,_abba ,true ;};}else if _eea =="\u0027"{_begd :=_gc .TraceToDirectObject (_ebd .Params [0]);if _begd ==PdfObj {return _ebd ,_abba ,true ;};};
};return nil ,-1,false ;};func _bgff (_gdda *_gd .TextMarkArray ,_cgcf int ,_acd int )int {_dgge :=_gdda .Elements ();_bcf :=_cgcf -1;_gcd :=_cgcf +1;_caa :=-1;if _bcf >=0{_bfg :=_dgge [_bcf ];_aebd :=_bfg .ObjString ;_dgacf :=len (_aebd );_cae :=_bfg .Index ;
if _cae +1< _dgacf {_caa =_bcf ;return _caa ;};};if _gcd < len (_dgge ){_gdc :=_dgge [_gcd ];_dgae :=_gdc .ObjString ;if _dgae [0]!=_gdc .Text {_caa =_gcd ;return _caa ;};};return _caa ;};

// Redactor represents a Redactor object.
type Redactor struct{_cgc *_bb .PdfReader ;_bbgc *RedactionOptions ;_dffd *_ga .Creator ;_bad *RectangleProps ;};func _eaeb (_gbeb []placeHolders )[]replacement {_fgbb :=[]replacement {};for _ ,_dgg :=range _gbeb {_bbd :=_dgg ._gaa ;_ebb :=_dgg ._fe ;_aabb :=_dgg ._ac ;
for _ ,_ebc :=range _bbd {_cef :=replacement {_df :_ebb ,_ef :_aabb ,_cg :_ebc };_fgbb =append (_fgbb ,_cef );};};_g .Slice (_fgbb ,func (_bef ,_cbb int )bool {return _fgbb [_bef ]._cg < _fgbb [_cbb ]._cg });return _fgbb ;};func _cdf (_cca []*matchedIndex ,_aeef [][]int )[]*matchedIndex {_babf :=[]*matchedIndex {};
for _ ,_fac :=range _cca {_dbac ,_aafe :=_ffec (_fac ,_aeef );if _dbac {_gca :=_bcaee (_fac ,_aafe );_babf =append (_babf ,_gca ...);}else {_babf =append (_babf ,_fac );};};return _babf ;};type targetMap struct{_cgd string ;_geab [][]int ;};func _ddcc (_dfae *targetMap ,_gebd []int ){var _daag [][]int ;
for _cdc ,_dgfg :=range _dfae ._geab {if _bgbe (_cdc ,_gebd ){continue ;};_daag =append (_daag ,_dgfg );};_dfae ._geab =_daag ;};

// RedactionTerm holds the regexp pattern and the replacement string for the redaction process.
type RedactionTerm struct{Pattern *_b .Regexp ;};func _aca (_gae []int ,_egc *_gd .TextMarkArray ,_ddd string )(*_gd .TextMarkArray ,matchedBBox ,error ){_ccea :=matchedBBox {};_afb :=_gae [0];_edf :=_gae [1];_efa :=len (_ddd )-len (_e .TrimLeft (_ddd ,"\u0020"));
_efd :=len (_ddd )-len (_e .TrimRight (_ddd ,"\u0020\u000a"));_afb =_afb +_efa ;_edf =_edf -_efd ;_ddd =_e .Trim (_ddd ,"\u0020\u000a");_dfc ,_dgee :=_egc .RangeOffset (_afb ,_edf );if _dgee !=nil {return nil ,_ccea ,_dgee ;};_badc ,_gdab :=_dfc .BBox ();
if !_gdab {return nil ,_ccea ,_a .Errorf ("\u0073\u0070\u0061\u006e\u004d\u0061\u0072\u006bs\u002e\u0042\u0042ox\u0020\u0068\u0061\u0073\u0020\u006eo\u0020\u0062\u006f\u0075\u006e\u0064\u0069\u006e\u0067\u0020\u0062\u006f\u0078\u002e\u0020s\u0070\u0061\u006e\u004d\u0061\u0072\u006b\u0073=\u0025\u0073",_dfc );
};_ccea =matchedBBox {_cea :_ddd ,_daa :_badc };return _dfc ,_ccea ,nil ;};func _bgbe (_bdee int ,_dfaf []int )bool {for _ ,_ceac :=range _dfaf {if _ceac ==_bdee {return true ;};};return false ;};func _bca (_fcb *_gd .TextMarkArray )(_gc .PdfObject ,int ){var _dg _gc .PdfObject ;
_db :=-1;for _dgc ,_fa :=range _fcb .Elements (){_dg =_fa .DirectObject ;_db =_dgc ;if _dg !=nil {break ;};};return _dg ,_db ;};type regexMatcher struct{_gcdd RedactionTerm };func _dfec (_gcdg *_gd .TextMarkArray )[]*_gd .TextMarkArray {_fdc :=_gcdg .Elements ();
_fbcd :=len (_fdc );var _dgbc _gc .PdfObject ;_befb :=[]*_gd .TextMarkArray {};_gcca :=&_gd .TextMarkArray {};_edd :=-1;for _eacg ,_gcg :=range _fdc {_bee :=_gcg .DirectObject ;_edd =_gcg .Index ;if _bee ==nil {_eaee :=_bgff (_gcdg ,_eacg ,_edd );if _dgbc !=nil {if _eaee ==-1||_eaee > _eacg {_befb =append (_befb ,_gcca );
_gcca =&_gd .TextMarkArray {};};};}else if _bee !=nil &&_dgbc ==nil {if _edd ==0&&_eacg > 0{_befb =append (_befb ,_gcca );_gcca =&_gd .TextMarkArray {};};}else if _bee !=nil &&_dgbc !=nil {if _bee !=_dgbc {_befb =append (_befb ,_gcca );_gcca =&_gd .TextMarkArray {};
};};_dgbc =_bee ;_gcca .Append (_gcg );if _eacg ==(_fbcd -1){_befb =append (_befb ,_gcca );};};return _befb ;};type matchedBBox struct{_daa _bb .PdfRectangle ;_cea string ;};func _edc (_gdcb string )(string ,[][]int ){_fbgd :=_b .MustCompile ("\u005c\u006e");
_decg :=_fbgd .FindAllStringIndex (_gdcb ,-1);_gefb :=_fbgd .ReplaceAllString (_gdcb ,"\u0020");return _gefb ,_decg ;};type replacement struct{_df string ;_ef float64 ;_cg int ;};func (_gfgb *Redactor )redactPage (_bdb *_c .ContentStreamOperations ,_gcfe *_bb .PdfPageResources )([]matchedBBox ,*_c .ContentStreamOperations ,error ){_aea ,_dda :=_gd .NewFromContents (_bdb .String (),_gcfe );
if _dda !=nil {return nil ,nil ,_dda ;};_gcc ,_ ,_ ,_dda :=_aea .ExtractPageText ();if _dda !=nil {return nil ,nil ,_dda ;};_bdb =_gcc .GetContentStreamOps ();_bfcg :=_gcc .Marks ();_daee :=_gcc .Text ();_daee ,_gce :=_edc (_daee );_cfd :=[]matchedBBox {};
_ddc :=make (map[_gc .PdfObject ][]localSpanMarks );_dffe :=[]*targetMap {};for _ ,_egab :=range _gfgb ._bbgc .Terms {_fde ,_dade :=_bfce (_egab );if _dade !=nil {return nil ,nil ,_dade ;};_accd ,_dade :=_fde .match (_daee );if _dade !=nil {return nil ,nil ,_dade ;
};_accd =_cdf (_accd ,_gce );_afga :=_cceb (_accd );_dffe =append (_dffe ,_afga ...);};_ccdce (_dffe );for _ ,_eefc :=range _dffe {_dc :=_eefc ._cgd ;_fbada :=_eefc ._geab ;_gaad :=[]matchedBBox {};for _ ,_fdd :=range _fbada {_bbdb ,_edbe ,_cebe :=_aca (_fdd ,_bfcg ,_dc );
if _cebe !=nil {return nil ,nil ,_cebe ;};_eecc :=_dfec (_bbdb );for _aaf ,_abbf :=range _eecc {_abf :=localSpanMarks {_fbb :_abbf ,_gga :_aaf ,_dbga :_dc };_afa ,_ :=_bca (_abbf );if _dgb ,_ddf :=_ddc [_afa ];_ddf {_ddc [_afa ]=append (_dgb ,_abf );}else {_ddc [_afa ]=[]localSpanMarks {_abf };
};};_gaad =append (_gaad ,_edbe );};_cfd =append (_cfd ,_gaad ...);};_dda =_eae (_bdb ,_ddc );if _dda !=nil {return nil ,nil ,_dda ;};return _cfd ,_bdb ,nil ;};func _cbd (_bffb ,_cbcf ,_eead float64 )float64 {_eead =_eead /100;_eaec :=(-1000*_bffb )/(_cbcf *_eead );
return _eaec ;};func _bgg (_bbb string ,_aeg *_bb .PdfFont )[]byte {_acb ,_gdg :=_aeg .StringToCharcodeBytes (_bbb );if _gdg !=0{_ea .Log .Debug ("\u0057\u0041\u0052\u004e\u003a\u0020\u0073\u006fm\u0065\u0020\u0072un\u0065\u0073\u0020\u0063\u006f\u0075l\u0064\u0020\u006e\u006f\u0074\u0020\u0062\u0065\u0020\u0065\u006e\u0063\u006f\u0064\u0065d\u002e\u000a\u0009\u0025\u0073\u0020\u002d\u003e \u0025\u0076",_bbb ,_acb );
};return _acb ;};func _bcaee (_eaebc *matchedIndex ,_bfbb [][]int )[]*matchedIndex {_ggb :=[]*matchedIndex {};_cde :=_eaebc ._fbcb ;_fdb :=_cde ;_gbde :=_eaebc ._ecb ;_debc :=0;for _ ,_bgda :=range _bfbb {_bac :=_bgda [0]-_cde ;if _debc >=_bac {continue ;
};_aba :=_gbde [_debc :_bac ];_ecf :=&matchedIndex {_ecb :_aba ,_fbcb :_fdb ,_aaaf :_bgda [0]};if len (_e .TrimSpace (_aba ))!=0{_ggb =append (_ggb ,_ecf );};_debc =_bgda [1]-_cde ;_fdb =_cde +_debc ;};_bbgb :=_gbde [_debc :];_caef :=&matchedIndex {_ecb :_bbgb ,_fbcb :_fdb ,_aaaf :_eaebc ._aaaf };
if len (_e .TrimSpace (_bbgb ))!=0{_ggb =append (_ggb ,_caef );};return _ggb ;};

// RedactRectanglePropsNew return a new pointer to a default RectangleProps object.
func RedactRectanglePropsNew ()*RectangleProps {return &RectangleProps {FillColor :_ga .ColorBlack ,BorderWidth :0.0,FillOpacity :1.0};};func _gcb (_gfag string ,_cbfe []replacement ,_ffe *_bb .PdfFont )[]_gc .PdfObject {_bcb :=[]_gc .PdfObject {};_gbg :=0;
_ffa :=_gfag ;for _gfcb ,_fea :=range _cbfe {_adgc :=_fea ._cg ;_bgge :=_fea ._ef ;_gef :=_fea ._df ;_gfg :=_gc .MakeFloat (_bgge );if _gbg > _adgc ||_adgc ==-1{continue ;};_afc :=_gfag [_gbg :_adgc ];_ccd :=_bgg (_afc ,_ffe );_cdd :=_gc .MakeStringFromBytes (_ccd );
_bcb =append (_bcb ,_cdd );_bcb =append (_bcb ,_gfg );_dadd :=_adgc +len (_gef );_ffa =_gfag [_dadd :];_gbg =_dadd ;if _gfcb ==len (_cbfe )-1{_ccd =_bgg (_ffa ,_ffe );_cdd =_gc .MakeStringFromBytes (_ccd );_bcb =append (_bcb ,_cdd );};};return _bcb ;};
func _bfce (_bcaeeb RedactionTerm )(*regexMatcher ,error ){return &regexMatcher {_gcdd :_bcaeeb },nil };type matchedIndex struct{_fbcb int ;_aaaf int ;_ecb string ;};func _eb (_da *_gd .TextMarkArray )*_bb .PdfFont {_ ,_bgb :=_bca (_da );_dab :=_da .Elements ()[_bgb ];
_edb :=_dab .Font ;return _edb ;};func _adb (_fbd []localSpanMarks )(map[string ][]localSpanMarks ,[]string ){_cga :=make (map[string ][]localSpanMarks );_gcf :=[]string {};for _ ,_adba :=range _fbd {_feg :=_adba ._dbga ;if _gbe ,_babd :=_cga [_feg ];_babd {_cga [_feg ]=append (_gbe ,_adba );
}else {_cga [_feg ]=[]localSpanMarks {_adba };_gcf =append (_gcf ,_feg );};};return _cga ,_gcf ;};type localSpanMarks struct{_fbb *_gd .TextMarkArray ;_gga int ;_dbga string ;};func _cceb (_cbfd []*matchedIndex )[]*targetMap {_geae :=make (map[string ][][]int );
_afgc :=[]*targetMap {};for _ ,_ebbe :=range _cbfd {_egaa :=_ebbe ._ecb ;_adaa :=[]int {_ebbe ._fbcb ,_ebbe ._aaaf };if _ebde ,_ggac :=_geae [_egaa ];_ggac {_geae [_egaa ]=append (_ebde ,_adaa );}else {_geae [_egaa ]=[][]int {_adaa };};};for _bdg ,_daeb :=range _geae {_ccgb :=&targetMap {_cgd :_bdg ,_geab :_daeb };
_afgc =append (_afgc ,_ccgb );};return _afgc ;};func _cdg (_eag *_gd .TextMarkArray )string {_dac :="";for _ ,_acc :=range _eag .Elements (){_dac +=_acc .Text ;};return _dac ;};func _adac (_daaf ,_dabf targetMap )(bool ,[]int ){_ffc :=_e .Contains (_daaf ._cgd ,_dabf ._cgd );
var _beag []int ;for _ ,_aed :=range _daaf ._geab {for _gfce ,_gagc :=range _dabf ._geab {if _gagc [0]>=_aed [0]&&_gagc [1]<=_aed [1]{_beag =append (_beag ,_gfce );};};};return _ffc ,_beag ;};func _gfaa (_dgaa _gc .PdfObject ,_ccdc *_bb .PdfFont )(string ,error ){_feae ,_dbge :=_gc .GetStringBytes (_dgaa );
if !_dbge {return "",_gc .ErrTypeError ;};_gda :=_ccdc .BytesToCharcodes (_feae );_dbb ,_bcgeb ,_dfe :=_ccdc .CharcodesToStrings (_gda ,"");if _dfe > 0{_ea .Log .Debug ("\u0072\u0065nd\u0065\u0072\u0054e\u0078\u0074\u003a\u0020num\u0043ha\u0072\u0073\u003d\u0025\u0064\u0020\u006eum\u004d\u0069\u0073\u0073\u0065\u0073\u003d%\u0064",_bcgeb ,_dfe );
};_eggg :=_e .Join (_dbb ,"");return _eggg ,nil ;};func _bcgb (_eab *_c .ContentStreamOperation ,_bfa _gc .PdfObject ,_fbc []localSpanMarks )error {var _ace *_gc .PdfObjectArray ;_dbgg ,_fae :=_adb (_fbc );if len (_fae )==1{_bcae :=_fae [0];_fd :=_dbgg [_bcae ];
if len (_fd )==1{_fgb :=_fd [0];_gaaf :=_fgb ._fbb ;_ebe :=_eb (_gaaf );_cgbe ,_gfa :=_gfaa (_bfa ,_ebe );if _gfa !=nil {return _gfa ;};_acbf ,_gfa :=_gag (_fgb ,_gaaf ,_ebe ,_cgbe ,_bcae );if _gfa !=nil {return _gfa ;};_ace =_gc .MakeArray (_acbf ...);
}else {_fgg :=_fd [0]._fbb ;_gbef :=_eb (_fgg );_fce ,_fcf :=_gfaa (_bfa ,_gbef );if _fcf !=nil {return _fcf ;};_eec ,_fcf :=_cbcb (_fce ,_fd );if _fcf !=nil {return _fcf ;};_gec :=_eaeb (_eec );_ada :=_gcb (_fce ,_gec ,_gbef );_ace =_gc .MakeArray (_ada ...);
};}else if len (_fae )> 1{_adf :=_fbc [0];_abb :=_adf ._fbb ;_ ,_bfc :=_bca (_abb );_aab :=_abb .Elements ()[_bfc ];_acf :=_aab .Font ;_cag ,_bfca :=_gfaa (_bfa ,_acf );if _bfca !=nil {return _bfca ;};_geb ,_bfca :=_cbcb (_cag ,_fbc );if _bfca !=nil {return _bfca ;
};_eed :=_eaeb (_geb );_cgf :=_gcb (_cag ,_eed ,_acf );_ace =_gc .MakeArray (_cgf ...);};_eab .Params [0]=_ace ;_eab .Operand ="\u0054\u004a";return nil ;};type placeHolders struct{_gaa []int ;_fe string ;_ac float64 ;};

// Write writes the content of `re.creator` to writer of type io.Writer interface.
func (_eee *Redactor )Write (writer _d .Writer )error {return _eee ._dffd .Write (writer )};

// RedactionOptions is a collection of RedactionTerm objects.
type RedactionOptions struct{Terms []RedactionTerm ;};func (_efdd *regexMatcher )match (_aege string )([]*matchedIndex ,error ){_eaca :=_efdd ._gcdd .Pattern ;if _eaca ==nil {return nil ,_fc .New ("\u006e\u006f\u0020\u0070at\u0074\u0065\u0072\u006e\u0020\u0063\u006f\u006d\u0070\u0069\u006c\u0065\u0064");
};var (_bcfa =_eaca .FindAllStringIndex (_aege ,-1);_ccc []*matchedIndex ;);for _ ,_bgfd :=range _bcfa {_ccc =append (_ccc ,&matchedIndex {_fbcb :_bgfd [0],_aaaf :_bgfd [1],_ecb :_aege [_bgfd [0]:_bgfd [1]]});};return _ccc ,nil ;};